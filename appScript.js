var workspaceMeta =  {"requireConfig":{"bootstrap.431.css":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/bootstrap.4.3.1/css/bootstrap.min.css"],"js":[],"status":"loaded"},"bootstrap.431":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/bootstrap.4.3.1/css/bootstrap.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/bootstrap.4.3.1/js/bootstrap.bundle.min.js"],"status":""},"bootstrap.337.css":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/bootstrap.3.3.7/css/bootstrap.min.css"],"js":[],"status":""},"bootstrap.337":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/bootstrap.3.3.7/css/bootstrap.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/bootstrap.3.3.7/js/bootstrap.min.js"],"status":""},"jquery.331":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js"],"status":""},"jqueryUi.1.12.1":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/bootstrap.3.3.7/css/bootstrap.min.css"],"js":[],"status":""},"font-awesome":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-ui-1.12.1/jquery-ui.min.css"],"js":[],"status":"loaded"},"less":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/less/less.min.js"],"status":"loaded"},"moment":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/moment/moment-with-locales.min.js"],"status":""},"inputMask":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/Inputmask/dist/min/inputmask/inputmask.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/Inputmask/dist/min/inputmask/inputmask.numeric.extensions.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/Inputmask/dist/min/inputmask/inputmask.date.extensions.min.js"],"status":""},"XXinputMask":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/Inputmask/dist/min/inputmask/inputmask.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/Inputmask/dist/min/inputmask/inputmask.numeric.extensions.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/Inputmask/dist/min/inputmask/inputmask.date.extensions.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/Inputmask/dist/min/inputmask/bindings/inputmask.binding.min.js"],"status":""},"highLight":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/highlight/styles/agate.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/highlight/highlight.pack.js","https://cdn.appspeed.net:8444/repository/assets/libs/highlight/highlightjs-line-numbers.min.js"],"status":""},"highLight-Dark":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/highlight/styles/a11y-dark.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/highlight/highlight.pack.js","https://cdn.appspeed.net:8444/repository/assets/libs/highlight/highlightjs-line-numbers.min.js"],"status":""},"autoNumeric":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/autoNumeric/dist/autoNumeric.min.js"]},"inputmask2":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/inputmask/dist/jquery.inputmask.bundle.js","https://cdn.appspeed.net:8444/repository/assets/libs/inputmask/dist/inputmask/bindings/inputmask.binding.js"]},"fullcalendar2016":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/fullcalendar/fullcalendar.min.css","https://cdn.appspeed.net:8444/repository/assets/libs/fullcalendar/fullcalendar.print.css|print"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/moment/moment-with-locales.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/fullcalendar/fullcalendar.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/fullcalendar/lang/ko.js"]},"fullcalendar":{"css":["https://unpkg.com/@fullcalendar/core@4.2.0/main.min.css","https://unpkg.com/@fullcalendar/daygrid@4.2.0/main.min.css","https://unpkg.com/@fullcalendar/timegrid@4.2.0/main.min.css"],"js":["https://unpkg.com/@fullcalendar/core@4.2.0/main.min.js","https://unpkg.com/@fullcalendar/interaction@4.2.0/main.min.js","https://unpkg.com/@fullcalendar/daygrid@4.2.0/main.min.js","https://unpkg.com/@fullcalendar/timegrid@4.2.0/main.min.js"]},"diagram":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/jsplumb/jsplumb.css","https://cdn.appspeed.net:8444/repository/assets/libs/Diagram/jj.diagram.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jsplumb/jsplumb-1.7.2-min.js","https://cdn.appspeed.net:8444/repository/assets/libs/Diagram/jj.diagram.js"]},"jsplumb":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/jsplumb/jsplumb.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jsplumb/jsplumb-1.7.2-min.js"]},"jsplumb.2.12.5":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jsplumb-2.12.5/dist/js/jsplumb.min.js"]},"jwt":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jwt/jsrsasign-all-min.js"]},"ace":{"css":[],"js":["/appspeed/ace.1.3.3/ace.js","/appspeed/ace.1.3.3/ext-tern.js","/appspeed/ace.1.3.3/ext-beautify.js","/appspeed/ace.1.3.3/ext-language_tools.js"]},"jjCodeMirror":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/codeMirror/jjCodeMirror.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/codeMirror/jjCodeMirror.js","https://cdn.appspeed.net:8444/repository/assets/libs/codemirror-5.44.0/addon/display/rulers.js","https://cdn.appspeed.net:8444/repository/assets/libs/codemirror-5.44.0/mode/yaml/yaml.js","https://cdn.appspeed.net:8444/repository/assets/libs/codemirror-5.44.0/mode/sql/sql.js"],"status":""},"jjCodeMirrorBak":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/codeMirror/jjCodeMirror.css","https://cdn.appspeed.net:8444/repository/assets/libs/codemirror-5.44.0/theme/material.css","https://cdn.firebase.com/libs/firepad/1.4.0/firepad.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/codeMirror/jjCodeMirror.js","https://cdn.appspeed.net:8444/repository/assets/libs/codemirror-5.44.0/addon/display/rulers.js","https://cdn.firebase.com/libs/firepad/1.4.0/firepad.min.js"],"status":""},"summernote":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/summernote/0.8.12/summernote.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/bootstrap.3.3.7/js/bootstrap.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/summernote/0.8.12/summernote.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/summernote/0.8.12/lang/summernote-ko-KR.js"]},"summernote-bs4":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/summernote/0.8.12/summernote-bs4.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/bootstrap.4.3.1/js/bootstrap.bundle.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/summernote/0.8.12/summernote-bs4.min.js"]},"summernote-lite":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/summernote/0.8.12/summernote-lite.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/summernote/0.8.12/summernote-lite.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/summernote/0.8.12/lang/summernote-ko-KR.js"]},"smarteditor":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/smarteditor/js/HuskyEZCreator.js"]},"tuieditor":{"css":["https://uicdn.toast.com/tui-editor/latest/tui-editor.css","https://uicdn.toast.com/tui-editor/latest/tui-editor-contents.css"],"js":["https://uicdn.toast.com/tui-editor/latest/tui-editor-Editor-full.js"]},"tuieditor-full":{"css":["https://uicdn.toast.com/tui-editor/latest/tui-editor.css","https://uicdn.toast.com/tui-editor/latest/tui-editor-contents.css","https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.33.0/codemirror.css","https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://uicdn.toast.com/tui-editor/latest/tui-editor-Editor.js","https://uicdn.toast.com/tui-editor/latest/tui-editor-Editor-full.js"]},"handsontable":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/handsontable/dist/handsontable.full.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/handsontable/dist/handsontable.full.min.js"]},"googleMap":{"js":["https://maps.googleapis.com/maps/api/js?key=AIzaSyAmppJEvJzWJCKbPoPvU8twIla1a0Bu4TQ"]},"googleChart":{"js":["https://www.gstatic.com/charts/loader.js"]},"weather-icons":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/weather-icons/weather-icons.min.css"],"js":[]},"plyr":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/plyr/plyr.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/plyr/plyr.min.js"]},"keditor":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/k-editor/gcspread.sheets.excel2013white.9.40.20161.0.css","https://cdn.appspeed.net:8444/repository/assets/libs/k-editor/keditor.1.1.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/k-editor/gcspread.sheets.all.9.40.20153.0.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/k-editor/globalize.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/k-editor/globalize.cultures.js","https://cdn.appspeed.net:8444/repository/assets/libs/k-editor/gcspread.sheets.copy.form.js","https://cdn.appspeed.net:8444/repository/assets/libs/k-editor/FileSaver.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/k-editor/gcspread.sheets.print.9.40.20153.0.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/k-editor/keditor.1.1.js"]},"i18next":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/i18n/i18next.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/i18n/jquery-i18next.min.js"]},"d3":{"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v4.min.js"]},"d3v3":{"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v3.min.js"]},"d3v4":{"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v4.min.js"]},"c3bad":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/c3-0.7.8/c3.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v4.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/c3-0.7.8/c3.min.js"]},"c3":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/c3/c3.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v4.min.js","https://cdnjs.cloudflare.com/ajax/libs/c3/0.6.6/c3.min.js"]},"c3v2":{"css":["https://cdnjs.cloudflare.com/ajax/libs/c3/0.6.6/c3.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v4.min.js","https://cdnjs.cloudflare.com/ajax/libs/c3/0.6.6/c3.min.js"]},"pivot":{"css":["https://cdnjs.cloudflare.com/ajax/libs/c3/0.6.6/c3.min.css","https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.13.0/pivot.min.css","https://webpivot.nrecosite.com/Scripts/pivottable/nrecopivottableext.css?v20180718"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v4.min.js","https://cdnjs.cloudflare.com/ajax/libs/c3/0.6.6/c3.min.js","https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.14.0/pivot.min.js","https://pivottable.js.org/dist/c3_renderers.js","https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.6.0/tips_data.min.js","https://webpivot.nrecosite.com/Scripts/pivottable/nrecopivottableext.js?v20180718"]},"pivot2":{"css":["https://cdnjs.cloudflare.com/ajax/libs/c3/0.6.6/c3.min.css","https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.13.0/pivot.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v4.min.js","https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js","https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js","https://cdnjs.cloudflare.com/ajax/libs/c3/0.6.6/c3.min.js","https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.14.0/pivot.min.js","https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.14.0/c3_renderers.min.js","https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.6.0/tips_data.min.js"]},"apexchart":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/apexcharts/dist/apexcharts.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/apexcharts/dist/apexcharts.min.js"]},"sankey.d3":{"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v4.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/d3-sankey-master/dist/sankey.js"]},"billboardBak":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/billboard/billboard.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v5.9.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/billboard/billboard.min.js"]},"billboard":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/billboard/billboard.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/d3/d3.v4.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/billboard/billboard.min.js"]},"chartjs":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/chartjs/Chart.min.js"]},"chartjs.280":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/chartjs.2.8.0/Chart.min.js"]},"flot":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/flot/jquery.flot.min.js"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/flot/jquery.flot.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/flot/jquery.flot.resize.min.js"]},"sparkline":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/sparkline/jquery.sparkline.min.js"]},"chartist":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/chartist/dist/chartist.min.css","https://cdn.appspeed.net:8444/repository/assets/libs/chartist/dist/chartist-plugin-tooltip.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/chartist/dist/chartist.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/chartist/dist/chartist-plugin-tooltip.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/chartist/dist/chartist-plugin-pointlabels.min.js"]},"pie-chart":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/Pie-Progress-Bar/js/pie-chart.js"]},"circles":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/circles-master/circles.min.js"]},"gauge":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/gauge/gauge.min.js"]},"html2canvas":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/html2canvas/rgbcolor.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/html2canvas/canvg.js","https://cdn.appspeed.net:8444/repository/assets/libs/html2canvas/html2canvas.min.js"]},"html2canvasOld":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/canvg/v2/rgbcolor.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/canvg/v2/canvg.js","https://cdn.appspeed.net:8444/repository/assets/libs/html2canvas/html2canvas.min.js"]},"datetimepicker":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/datepicker/build/css/bootstrap-datetimepicker.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/datepicker/build/js/bootstrap-datetimepicker.min.js"]},"daum.post":{"css":[],"js":["//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"]},"daum.post2":{"css":[],"js":["https://ssl.daumcdn.net/dmaps/map_js_init/postcode.v2.js"]},"dataTable":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/dataTables.bootstrap.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/jquery.dataTables.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/dataTables.bootstrap.min.js"]},"dataTableBS4":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/datatables.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/datatables.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/Responsive-2.2.3/js/dataTables.responsive.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/Responsive-2.2.3/js/responsive.bootstrap4.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/Buttons-1.6.1/js/dataTables.buttons.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/Buttons-1.6.1/js/buttons.bootstrap4.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/Buttons-1.6.1/js/buttons.html5.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/Buttons-1.6.1/js/buttons.flash.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/Buttons-1.6.1/js/buttons.print.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/KeyTable-2.5.1/js/dataTables.keyTable.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/dataTable/bs4/Select-1.3.1/js/dataTables.select.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/pdfmake-master/build/pdfmake.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/pdfmake-master/build/vfs_fonts.js"]},"jjAppForm":{"css":[],"js":["/javascript/jjAppForm.js","/javascript/jjAppItem.js"]},"jjDataTable":{"css":["/css/jjDataTable.css"],"js":["/javascript/jjDataTable.js"]},"jjDataTree":{"css":["/css/jjDataTree.css"],"js":["/javascript/jjDataTree.js"]},"waves":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/waves-master/dist/waves.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/waves-master/dist/waves.min.js"]},"countUp":{"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/countUp/jquery.waypoints.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/countUp//jquery.counterup.min.js"]},"vue":{"js":["https://unpkg.com/vue"]},"react":{"js":["https://unpkg.com/react@16/umd/react.development.js","https://unpkg.com/react-dom@16/umd/react-dom.development.js"],"status":""},"vis":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/vis-4.21.0/dist/vis.min.css"],"js":["https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment-with-locales.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/vis-4.21.0/dist/vis.min.js"],"status":"loaded"},"kakao":{"js":["https://developers.kakao.com/sdk/js/kakao.js"]},"firebase":{"css":[],"js":["https://www.gstatic.com/firebasejs/5.7.0/firebase-app.js","https://www.gstatic.com/firebasejs/5.7.0/firebase-messaging.js","https://www.gstatic.com/firebasejs/5.7.0/firebase-database.js"]},"resize":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/css-element-queries-1.0.0/src/ResizeSensor.js","https://cdn.appspeed.net:8444/repository/assets/libs/css-element-queries-1.0.0/src/ElementQueries.js"]},"hammer":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/hammer/hammer.2.0.8.min.js"]},"imask":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/imask/imask.js"]},"svgIcon":{"css":["https://cdn.jsdelivr.net/npm/evil-icons@1.9.0//repository/assets/libs/evil-icons.min.css"],"js":["https://cdn.jsdelivr.net/npm/evil-icons@1.9.0//repository/assets/libs/evil-icons.min.js"],"status":""},"toast":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/tui.chart-3.7.0/dist/tui-chart.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/tui.chart-3.7.0/dist/tui-chart-all.min.js"]},"toast.map":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/tui.chart-3.7.0/dist/tui-chart.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/tui.chart-3.7.0/dist/tui-chart-all.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/tui.chart-3.7.0/dist/maps/south-korea.js","https://cdn.appspeed.net:8444/repository/assets/libs/tui.chart-3.7.0/dist/maps/world.js"]},"toast-polyfill":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/tui.chart-3.7.0/dist/tui-chart.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/tui.chart-3.7.0/dist/tui-chart-all.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/tui.chart-3.7.0/dist/tui-chart-polyfill.min.js"]},"qrprint":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/qrcode/qrcode.js"]},"qrread":{"css":[],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/qrcode/jsQR.js"]},"jqGrid":{"css":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-ui-1.12.1/theme/redmond/jquery-ui.min.css","https://cdn.appspeed.net:8444/repository/assets/libs/jqGrid-free/dist/css/ui.jqgrid.min.css"],"js":["https://cdn.appspeed.net:8444/repository/assets/libs/jquery/jquery-3.3.1.min.js","https://cdn.appspeed.net:8444/repository/assets/libs/jqGrid-free/dist/jquery.jqgrid.min.js"]},"naverCloud":{"css":[],"js":["https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/hmac-sha256.js","https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/enc-base64-min.js"]}},"options":{"docType":"710","version":"710.0.27","seo":{"ogTitle":"Studio 710","ogApplicationName":"AppSpeed HOME","ogDescription":"소프트웨어 개발,배포 및 운영 시스템.","ogKeywords":"모바일우선, 개발참조용사이트, 일반개발, 클라우드","ogImage":"/repository/studio602/20191024/a7cc136e-f7c9-42fb-9d40-33ae6359b334","XshortcutIcon":"https://cdn.appspeed.net:8444/repository/favicon.ico","shortcutIcon":"/favicon.ico","ogUrl":"https://studio0.appspeed.net","ogRobots":"robots.710","ogAuthor":"SM SYSTEM LTD.","googleVerification":"","robotsUri":"robots.710","locale":"ko-KR","timeZone":"Asia/Seoul","currency":"KRW","appleTouchIcon":"/repository/studio602/20191028/ca824cdb-ff52-4b0d-aaed-d7478b75bbaf.png"},"appInfo":{"apiVersion":"v7","workspaceUri":"studio0","cookie":"appspeed","xsiteDomain":"appspeed.net","appPackageUri":"Run.711.pkg","extPackageUri":"Ext.blank.pkg","requireConfigUri":"cdn.require.config","XhomeFolderId":"011b6283-6cae-4483-8b82-8bb103e2537f","homeFolderId":"a5fd4997-0383-4ed8-9b02-5e0453f39834","themeUri":"","themeMdiUri":"blank.640.theme","menuUri":"","startUri":"studioAll.710.uc","colorUri":"appStyle.710.css","compressDeploy":false,"autoUpgrade":true,"codeUri":"getCodeList.sql","jbatisId":"studio","cdnServer":"https://cdn.appspeed.net:8444"},"policy":{"codeNotFoundSpace":false},"login":{"loginUri":"auth.640.login.uc","useGuest":false},"pwa":{"manifestUri":"manifest.640","serviceWorkerUri":"serviceWorker.640.js","sseWorkerUri":"sseWorker.640.js","useSW":false,"usePush":false,"useSSE":false,"useNoti":false,"useResourceCache":true,"folderResourcesCache":false},"studio":{"default":"studio","workspaces":["studio","studio0","help","SEP"]},"keys":{"openweathermap":"14446a8f71abfe83ace02ae9cc32365d"},"links":{"account":"https://account.appspeed.net","myapps":"https://myapps.appspeed.net","studio":"https://studio.appspeed.net","help":"https://help.appspeed.net"},"launchers":["launcher.640.color.info","launcher.640.well.info","launcher.640.board.info","launcher.640.sql.info","launcher.640.api.info","launcher.640.text.info","launcher.640.calendar.info","launcher.640.less.info","launcher.640.javascript.info","launcher.640.erd.info","launcher.640.diagram.info","launcher.640.html.info","launcher.640.css.info","launcher.640.theme.info","launcher.640.deploy.info","launcher.640.page.info","launcher.640.component.info","launcher.640.extlib.info","launcher.640.json.info","launcher.640.word.info","launcher.640.image.info","launcher.640.vhtml.info","launcher.640.workspace.info","launcher.640.package.info","launcher.640.menu.info","launcher.640.formapp.info","launcher.640.hmi.info","launcher.640.yaml.info"],"dev":{"seo":{"ogUrl":"http://dev710-studio0.appspeed.net:8080"},"appInfo":{"cookie":"testappspeed"},"login":{"loginUri":"auth.640.login.uc","useGuest":true},"links":{"account":"http://dev710-account.appspeed.net:8080","myapps":"http://dev710-myapps.appspeed.net:8080","studio":"http://dev710-studio.appspeed.net:8080","help":"http://dev710-help.appspeed.net:8080"}}},"MENU":null,"lessRuleset":null,"appColor":null,"cacheResources":[{"NAME":"app.640.api.studio","BODY":"{\r\n  \"uuid\": \"1a4b9a88-0fd4-41f9-9231-ce3b616f7c08\",\r\n  \"html\": \"<div class=\\\"input-group\\\">\\n\\t<span class=\\\"input-group-prepend\\\">\\n\\t\\t<select class=\\\"input-group-text\\\" jj-id=\\\"reqMethod\\\">\\n\\t\\t\\t<option>GET</option>\\n\\t\\t\\t<option>POST</option>\\n\\t\\t\\t<option>DELETE</option>\\n\\t\\t\\t<option>PATCH</option>\\n\\t\\t\\t<option>getJSONP</option>\\n\\t\\t</select>\\n\\t</span>\\t\\n\\t<input jj-id=\\\"reqUrl\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"rest Url\\\" value=\\\"\\\">\\n</div>\\n<h5>Description</h5>\\n<textarea class=\\\"form-control\\\" jj-id=\\\"descreiption\\\"></textarea>\\n\\n<section  class=\\\"row p-10\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <h5>mode</h5>\\n      <select jj-id=\\\"mode\\\" class=\\\"form-control\\\">\\n        <option>cors</option>\\n        <option>same-origin</option>\\n        <option>no-cors</option>\\n        <option></option>\\n      </select>\\n      <h5>credentials</h5>\\n      <select jj-id=\\\"credentials\\\" class=\\\"form-control\\\">\\n        <option>same-origin</option>\\n        <option>include</option>\\n        <option>omit</option>\\n        <option></option>\\n      </select>\\n\\t\\t\\t<h5>Head</h5>\\n      <jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"reqHead\\\"></jj-code-editor>\\n\\t\\t\\t<h5>SendData</h5>\\n      <jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"reqData\\\"></jj-code-editor>\\n\\t\\t\\t<h5>Files</h5>\\n      <input type=\\\"file\\\" jj-id=\\\"uploadFile\\\" multiple>\\n\\t\\t</div>\\n    <div class=\\\"col-md-6\\\">\\n\\t\\t\\t<h5>responce</h5>\\n      <jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"resBody\\\"></jj-code-editor>\\n\\n      <h5>IN DATA</h5>\\n      <div jj-id=\\\"tables\\\" class=\\\"list-group jj-active\\\" j-for=\\\"row in data.indata\\\"  data-active-move=\\\"false\\\" j-page=300>\\n        <a class=\\\"list-group-item\\\">${row.COLUMN_NAME}</a>\\n      </div>\\n\\n      <h5>OUT DATA</h5>\\n      <div jj-id=\\\"tables\\\" class=\\\"list-group jj-active\\\" j-for=\\\"row in data.outdata\\\"  data-active-move=\\\"false\\\" j-page=300>\\n        <a class=\\\"list-group-item\\\">${row.COLUMN_NAME}</a>\\n      </div>\\n      \\n\\t\\t</div>\\n  \\n</section>\\n            \",\r\n  \"less\": \".input-group-btn xxselect {\\n\\tborder-color: #ccc;\\n   margin-top: 0px;\\n    margin-bottom: 0px;\\n    padding-top: 7px;\\n    padding-bottom: 7px;\\n}\\n\\njj-code-editor[jj-id=\\\"reqHead\\\"],\\njj-code-editor[jj-id=\\\"reqData\\\"]{\\n\\tposition: relative;\\n  top: auto;\\n  left: 0;\\n\\theight:200px;\\n}\\njj-code-editor[jj-id=\\\"resBody\\\"]{\\n\\tposition: relative;\\n  top: auto;\\n  left: 0;\\n\\theight:500px;\\n}\",\r\n  \"script\": \"/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n --------------------------------------------------------------------------------------------------- */\\nconst DELAY_EDITING_ACTION_TIMER = 200;\\n\\nform.config={\\n  \\\"data\\\":{\\n    \\\"indata\\\":[],\\n    \\\"outdata\\\":[]\\n  }\\n};\\n\\nform.reqMethod.value = \\\"GET\\\";\\nform.credentials.value = \\\"same-origin\\\";\\nform.mode.value = \\\"cors\\\";\\n\\nform.bo = new JJReact(form, form.config);\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n\\tbody = Jinja.global.json(body||\\\"{}\\\");\\n\\n\\tform.reqUrl.value = body.reqUrl||\\\"studio610.appspeed.net/\\\";\\n  form.descreiption.value = body.descreiption;\\n  form.credentials.value = body.credentials;\\n  form.mode.value = body.mode;\\n\\tform.reqMethod.value = body.reqMethod||\\\"GET\\\";\\n\\tif(body.reqHead === undefined){\\n\\t\\tform.reqHead.value = body.reqHead||{\\n\\t\\t\\t\\\"Accept\\\": \\\"application/json; charset=UTF-8\\\",\\n\\t\\t\\t\\\"Content-type\\\": \\\"application/json; charset=UTF-8\\\"\\n\\t\\t};\\n\\t} else {\\n\\t\\tform.reqHead.value = body.reqHead||\\\"\\\";\\n\\t}\\n\\tform.reqData.value = body.reqData;\\n\\tform.resBody.value = body.resBody;\\n  form.config.data.indata = body.indata;\\n  form.config.data.outdata = body.outdata;\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=>{\\n  return Jinja.global.string({\\n    \\\"reqUrl\\\": form.reqUrl.value,\\n    \\\"mode\\\": form.mode.value,\\n    \\\"descreiption\\\": form.descreiption.value,\\n    \\\"credentials\\\": form.credentials.value,\\n    \\\"reqMethod\\\": form.reqMethod.value,\\n    \\\"reqHead\\\": form.reqHead.value,\\n    \\\"reqData\\\": form.reqData.value,\\n    \\\"resBody\\\": form.resBody.value,\\n    \\\"indata\\\":form.config.data.indata,\\n    \\\"outdata\\\":form.config.data.outdata,\\n  })\\n}\\n\\nform.excute = async function() {\\n  debugger;\\n\\tswitch(form.reqMethod.value) {\\n\\t\\tcase \\\"getJSONP\\\":\\n\\t\\t\\tform.getJsonp();\\n\\t\\t\\tbreak;\\n\\t\\tdefault:\\n      if(form.uploadFile.files.length > 0){\\n\\t\\t\\t\\tform.upload();\\n      } else {\\n\\t\\t\\t\\tform.fetch();\\n      }\\n\\t\\t\\tbreak;\\n\\t}\\n}\\n\\n\\n\\nform.fetch=()=>{\\n\\tlet url = encodeURI(form.reqUrl.value);\\n\\tlet options = {\\n\\t\\t\\t\\\"method\\\": form.reqMethod.value,\\n    \\t\\\"mode\\\": form.mode.value,\\n \\t\\t\\t\\\"headers\\\": {}\\n\\t};\\n  \\n  if(form.credentials.value){\\n    options.credentials = form.credentials.value;\\n  }\\n  \\n\\t// 설정된 해드를 추가한다.\\t\\n\\tif (form.reqHead.value){\\n\\t\\tObject.assign(options.headers, Jinja.global.json(form.reqHead.value));\\n\\t}\\n\\t\\n\\t// 설정된 데이터를 추가한다, GET, POST에 따라서 다르게 추가한다\\n\\tlet reqData = Jinja.global.json(form.reqData.value)||{}; \\n\\tif ([\\\"GET\\\",\\\"DELETE\\\"].includes(form.reqMethod.value) && reqData){\\n\\t\\tif(!url.includes(\\\"?\\\")) url += \\\"?\\\";\\n \\t\\turl += Object.keys(reqData).map(function(k) {\\n\\t\\t\\t\\t\\t\\t \\t\\t\\t\\t\\t\\t\\treturn encodeURIComponent(k) + '=' + encodeURIComponent(Jinja.global.string(reqData[k]));\\n \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}).join('&');\\n\\t} else if ([\\\"POST\\\",\\\"PATCH\\\"].includes(form.reqMethod.value)){\\n    let sendData = {};\\n\\t\\tObject.keys(reqData).map(function(k) {\\n\\t    sendData[k] =  Jinja.global.string(reqData[k]);\\n    });\\n\\t\\toptions.body = Jinja.global.string(sendData);\\t\\t\\t\\n\\t}\\n\\t\\n\\t\\treturn fetch(url, options)\\n\\t\\t\\t.then(response => {\\n\\t\\t\\t\\t\\tswitch(options.headers.Accept){\\n\\t\\t\\t\\t\\t\\tcase \\\"application/text\\\":\\n\\t\\t\\t\\t\\t\\t\\treturn response.text();\\n\\t\\t\\t\\t\\t\\tdefault:{\\n\\t\\t\\t\\t\\t\\t\\treturn response.json();\\n\\t\\t\\t\\t\\t\\t}\\t\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t})\\n\\t\\t\\t.then(body => {\\n\\t\\t\\t\\t\\tform.resBody.value = Jinja.global.string(body);\\n\\t\\t\\t})\\n\\t\\t\\t.catch(err=>{\\n\\t\\t\\t\\talert(err);\\t\\n\\t\\t\\t});\\t\\n};\\n\\nform.getJsonp =()=>{\\n  \\n \\tlet sendData = Jinja.global.json(form.reqData.value||\\\"{}\\\");\\n \\tlet optionData = Jinja.global.json(form.reqHead.value||\\\"{}\\\");\\n  let url;\\n  if(form.reqUrl.value.startsWith('http://')){\\n    url = encodeURI(form.reqUrl.value); \\n  } else {\\n    url = encodeURI(\\\"http://\\\"+form.reqUrl.value); \\n  }\\n  \\n\\tJinja.ajax.fetchJsonp(url, sendData, optionData)  \\n  .done(data =>form.resBody.value = data);\\n};\\n\\nform.upload=()=>{\\n\\tlet url = encodeURI(\\\"http://\\\"+form.reqUrl.value);\\n  let formData = new FormData();\\n\\tlet options = {\\n\\t\\t\\t\\\"method\\\": form.reqMethod.value,\\n    \\t\\\"mode\\\": form.mode.value,\\n \\t\\t\\t\\\"headers\\\": {}\\n\\t};\\n  \\n  if(form.credentials.value){\\n    options.credentials = form.credentials.value;\\n  }\\n  \\n\\t// 설정된 해드를 추가한다.\\t\\n\\tif (form.reqHead.value){\\n\\t\\tObject.assign(options.headers, Jinja.global.json(form.reqHead.value));\\n\\t}\\n  \\n  for(let index in form.uploadFile.files){\\n    let file = form.uploadFile.files[index];\\n    formData.append('file['+index+']', file);\\t\\n  }\\n\\n\\tlet reqData = form.reqData.value; \\n\\treqData = Jinja.global.json(reqData);\\n  Object.keys(reqData).forEach(key=>formData.append(key, Jinja.global.string(reqData[key])));\\n  \\n  options.body = formData;\\n\\t\\n\\t\\treturn fetch(url, options)\\n\\t\\t\\t.then(response => {\\n\\t\\t\\t\\t\\tswitch(options.headers.Accept){\\n\\t\\t\\t\\t\\t\\tcase \\\"application/text\\\":\\n\\t\\t\\t\\t\\t\\t\\treturn response.text();\\n\\t\\t\\t\\t\\t\\tdefault:{\\n\\t\\t\\t\\t\\t\\t\\treturn response.json();\\n\\t\\t\\t\\t\\t\\t}\\t\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t})\\n\\t\\t\\t.then(body => {\\n\\t\\t\\t\\tform.resBody.value = Jinja.global.string(body);\\n\\t\\t\\t})\\n\\t\\t\\t.catch(err=>{\\n\\t\\t\\t\\talert(err);\\t\\n\\t\\t\\t});\\t\\n  \\n}\\n\"\r\n}","URI":"app.640.api.studio","TYPE":"page"},{"NAME":"app.640.board.runtime","BODY":"{\n  \"uuid\": \"5b67814d-7206-4b24-9b45-e44ed85ac3ae\",\n  \"html\": \"<div board-mode=\\\"${data.mode}\\\">\\n  <side>\\n    <jj-include jj-id=\\\"sideMenu\\\" jj-uri=\\\"\\\"></jj-include>\\n  </side>\\n  <main>\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-12\\\">\\n        <div class=\\\"page-title-box\\\">\\n          <div class=\\\"page-title-right\\\">\\n            <ol class=\\\"breadcrumb m-0\\\">\\n              <li class=\\\"breadcrumb-item\\\"><a href=\\\"javascript: void(0);\\\">Minton</a></li>\\n              <li class=\\\"breadcrumb-item\\\"><a href=\\\"javascript: void(0);\\\">Apps</a></li>\\n              <li class=\\\"breadcrumb-item active\\\">Companies</li>\\n            </ol>\\n          </div>\\n          <h4 class=\\\"page-title\\\">${data.title}</h4>\\n        </div>\\n      </div>\\n    </div>    \\n\\n    <div class=\\\"row board-list\\\">\\n      <div class=\\\"col-12\\\">\\n        <div class=\\\"card-box\\\">    \\n          <div class=\\\"row\\\">\\n            <div class=\\\"col-lg-8\\\">\\n              <form class=\\\"form-inline\\\">\\n                <div class=\\\"form-group\\\">\\n                  <label for=\\\"inputPassword2\\\" class=\\\"sr-only\\\">Search</label>\\n                  <input data-bind=\\\"data.findword\\\" type=\\\"search\\\" class=\\\"form-control\\\" id=\\\"inputPassword2\\\" placeholder=\\\"Search...\\\">\\n                </div>\\n                <div class=\\\"form-group mx-sm-3\\\">\\n                  <label for=\\\"status-select\\\" class=\\\"mr-2\\\">Find By</label>\\n                  <select class=\\\"custom-select\\\">\\n                    <option selected=\\\"\\\">제목</option>\\n                    <option value=\\\"1\\\">제목</option>\\n                    <option value=\\\"2\\\">내용</option>\\n                    <option value=\\\"3\\\">제목+내용</option>\\n                    <option value=\\\"4\\\">글쓴이</option>\\n                  </select>\\n                </div>\\n              </form>\\n            </div>\\n            <div class=\\\"col-lg-4\\\">\\n              <div class=\\\"text-lg-right mt-3 mt-lg-0\\\">\\n                <button j-method=\\\"getList\\\"  type=\\\"button\\\" class=\\\"btn btn-success waves-effect waves-light mr-1\\\"><i class=\\\"mdi mdi-settings\\\"></i> Find</button>\\n                <button j-method=\\\"viewMode('edit')\\\" type=\\\"button\\\" class=\\\"btn btn-danger waves-effect waves-light\\\" data-animation=\\\"fadein\\\"><i class=\\\"mdi mdi-plus-circle mr-1\\\"></i> Add New</button>\\n              </div>\\n            </div><!-- end col-->\\n          </div>      \\n        </div>      \\n      </div>      \\n\\n      <div class=\\\"col-12\\\">\\n        <div class=\\\"card-box\\\">    \\n          <table class=\\\"table table-hover\\\">\\n            <thead>\\n              <tr>\\n                <th class=\\\"hidden-xs\\\" style=\\\"width:100px;\\\">순번</th>\\n                <th>제목</th>\\n                <!--           <th style=\\\"width:60px;\\\">조회</th> -->\\n                <th class=\\\"hidden-xs\\\" style=\\\"width:180px;\\\">작성일</th>\\n              </tr>\\n            </thead>\\n            <tbody j-for=\\\"row in data.rows\\\" j-page=5 pager=\\\"pager\\\">\\n              <tr j-method=\\\"getInfo('${row.BOARD_ID}')\\\">\\n                <td class=\\\"hidden-xs\\\">${row.CATE_SERIAL_NUMBER}</td>\\n                <td>${row.TITLE}</td>\\n                <!--           <td>${row.VIEW_CNT}</td> -->\\n                 <td class=\\\"hidden-xs\\\">${(new Date(row.REG_DATETIME)).$toFormat(\\\"yyyy-MM-dd\\\")}</td>\\n                <!--           <td>${Jinja.global.dateFormat(new Date(row.REG_DATETIME), 'yyyy-MM-dd')}(${Jinja.global.dateDiff(new Date(row.REG_DATETIME))})</td> -->\\n              </tr>\\n            </tbody>\\n          </table>\\n          <jj-pagination jj-id=\\\"pager\\\"></jj-pagination>\\n        </div>      \\n      </div>      \\n    </div>      \\n\\n    <div class=\\\"row board-view\\\">\\n      <div class=\\\"col-12\\\">\\n        <div class=\\\"card-box\\\">    \\n          <h3>${data.info.TITLE}</h3>  \\n          <ul class=\\\"list-inline pull-right hidden\\\">\\n            <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-thumbs-up\\\" aria-hidden=\\\"true\\\"></i><t>2.9천</t></a></li>\\n            <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-thumbs-down\\\" aria-hidden=\\\"true\\\"></i><t>460</t></a></li>\\n            <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-external-link\\\" aria-hidden=\\\"true\\\"></i><t>공유</t></a></li>\\n            <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-plus-circle\\\" aria-hidden=\\\"true\\\"></i><t>저장</t></a></li>\\n            <li class=\\\"list-inline-item dropdown\\\">\\n              <a href=\\\"#\\\" class=\\\"dropdown-toggle text-muted\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"true\\\">\\n                <i class=\\\"fa fa-ellipsis-h\\\" style=\\\"width: 11px;\\\"></i>\\n              </a>\\n              <ul class=\\\"dropdown-menu dropdown-menu-right\\\">\\n                <li><a href=\\\"#\\\">Action</a></li>\\n                <li><a href=\\\"#\\\">Another action</a></li>\\n                <li><a href=\\\"#\\\">Something else here</a></li>\\n                <li role=\\\"separator\\\" class=\\\"divider\\\"></li>\\n                <li><a href=\\\"#\\\">Separated link</a></li>\\n              </ul>\\n            </li>\\n          </ul>\\n          <label>${data.info.TAG}</label>\\n          <p jj-id=\\\"viewBody\\\"></p>\\n          <div jj-id=\\\"attachView\\\"></div>\\n          <div class=\\\"btn-group pull-right\\\" role=\\\"group\\\" aria-label=\\\"Basic example\\\">\\n            <button class=\\\"btn btn-info\\\" j-method=\\\"setEdit\\\">수정</button>\\n            <button j-method=\\\"delete\\\" class=\\\"btn btn-warning ${Jinja.uo.USER_NAME=='GUEST'?'hidden':''}\\\">삭제</button>\\n          </div>\\n          <button class=\\\"btn btn-primary\\\" j-method=\\\"viewMode('list')\\\">목록</button>\\n        </div>    \\n      </div>      \\n      <div class=\\\"col-12\\\" hidden>\\n        <div class=\\\"card-box\\\">    \\n          <div class=\\\"card-body p-4\\\">\\n            <h5 class=\\\"font-18\\\">Comments</h5>\\n            <hr>\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-lg-12\\\">\\n                <form class=\\\"form-main\\\">\\n                  <div class=\\\"row mt-4\\\">\\n                    <div class=\\\"col-lg-6\\\">\\n                      <div class=\\\"form-group\\\">\\n                        <label for=\\\"name2\\\">Name</label>\\n                        <input name=\\\"name\\\" id=\\\"name2\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Your name...\\\">\\n                      </div>\\n                    </div>\\n                    <div class=\\\"col-lg-6\\\">\\n                      <div class=\\\"form-group\\\">\\n                        <label for=\\\"email2\\\">Email address</label>\\n                        <input name=\\\"email\\\" id=\\\"email2\\\" type=\\\"email\\\" class=\\\"form-control\\\" placeholder=\\\"Your email...\\\">\\n                      </div>\\n                    </div>\\n                  </div>\\n\\n                  <div class=\\\"row\\\">\\n                    <div class=\\\"col-lg-12\\\">\\n                      <div class=\\\"form-group\\\">\\n                        <label for=\\\"subject2\\\">Subject</label>\\n                        <input name=\\\"name\\\" id=\\\"subject2\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Your subject...\\\">\\n                      </div>\\n                    </div>\\n                  </div>\\n\\n                  <div class=\\\"row\\\">\\n                    <div class=\\\"col-lg-12\\\">\\n                      <div class=\\\"form-group\\\">\\n                        <label for=\\\"comments2\\\">Message</label>\\n                        <textarea name=\\\"comments\\\" id=\\\"comments2\\\" rows=\\\"4\\\" class=\\\"form-control\\\" placeholder=\\\"Your message...\\\"></textarea>\\n                      </div>\\n                    </div>\\n                  </div>\\n\\n                  <div class=\\\"row\\\">            \\n                    <div class=\\\"col-lg-12\\\">\\n                      <div class=\\\"text-right\\\">\\n                        <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" id=\\\"send\\\">Submit <i class=\\\"mdi mdi-send ml-2\\\"></i></button>\\n                      </div>\\n                    </div> <!-- /col -->\\n                  </div> <!-- /row -->\\n                </form> <!-- /form -->\\n              </div> <!-- end col -->\\n            </div><!-- end row -->\\n          </div>\\n        </div>  \\n      </div>  \\n    </div>      \\n\\n    <div class=\\\"row board-edit\\\">\\n      <div class=\\\"col-12\\\">\\n        <div class=\\\"card-box\\\">    \\n          <j-form>\\n            <div class=\\\"form-group\\\">\\n              <label>TITLE</label>\\n              <input data-bind=\\\"data.edit.TITLE\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"TITLE\\\">\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label>BODY</label>\\n              <div  jj-id=\\\"wordEditor\\\"></div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label>TAG</label>\\n              <input data-bind=\\\"data.edit.TAG\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"TAG\\\">\\n            </div>\\n            <button jj-command=\\\"fileAttach\\\" type=\\\"button\\\" class=\\\"btn btn-link waves-effect waves-light\\\"><i class=\\\"fa fa-paperclip\\\" aria-hidden=\\\"true\\\"></i> Upload Files</button>\\n            <div jj-id=\\\"attachEdit\\\"></div>\\n\\n            <div class=\\\"text-right\\\" role=\\\"group\\\" aria-label=\\\"Basic example\\\">\\n              <button class=\\\"btn btn-info\\\" j-method=\\\"createSend\\\">Send</button>\\n              <button class=\\\"btn btn-link\\\" j-method=\\\"editCancel\\\">Cancel</button>\\n            </div>            \\n          </j-form>\\n        </div>\\n      </div>\\n    </div>\\n  </main>\\n</div>\",\n  \"less\": \"\\n.board-note{\\n  padding-left: 0px;\\n  border-width: 1px 0px 1px;\\n  border-style: solid;\\n  border-color: initial;\\n  border-image: initial;\\n  padding-top: 5px;\\n  padding-bottom: 20px;\\n  margin-bottom: 50px;\\n\\n}\\n\\n[board-mode=\\\"list\\\"]{\\n  .board-list{  display: block; }\\n  .board-view{  display: none; }\\n  .board-edit{  display: none; }\\n}\\n[board-mode=\\\"view\\\"]{\\n  .board-list{  display: none; }\\n  .board-view{  display: block; }\\n  .board-edit{  display: none; }\\n}\\n[board-mode=\\\"edit\\\"]{\\n  .board-list{  display: none; }\\n  .board-view{  display: none; }\\n  .board-edit{  display: block; }\\n}\\n\",\n  \"script\": \"/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n --------------------------------------------------------------------------------------------------- */\\nconst API_VERSION = workspaceMeta.options.appInfo.apiVersion||\\\"v61\\\";\\n\\nform.boardCateCd = \\\"test1\\\";\\nform.config={\\n  \\\"data\\\":{\\n    \\\"findword\\\":\\\"\\\",\\n    \\\"title\\\": \\\"\\\",\\n    \\\"boardNote\\\":\\\"\\\",\\n    \\\"menuPath\\\":[\\n      {\\\"title\\\":\\\"home\\\", \\\"link\\\":\\\"#\\\"},\\n      {\\\"title\\\":\\\"compay\\\", \\\"link\\\":\\\"#\\\"},\\n      {\\\"title\\\":\\\"info\\\", \\\"link\\\":\\\"#\\\"}\\n    ],\\n    \\\"mode\\\": \\\"list\\\",\\n    \\\"info\\\":{\\n      \\\"TITLE\\\":\\\"\\\",\\n      \\\"BODY\\\":\\\"\\\",\\n      \\\"TAG\\\":\\\"\\\",\\n      \\\"ATT_FILES\\\":\\\"\\\"\\n    },\\n    \\\"edit\\\":{\\n      \\\"BOARD_ID\\\":\\\"\\\",\\n      \\\"TITLE\\\":\\\"\\\",\\n      \\\"BODY\\\":\\\"\\\",\\n      \\\"TAG\\\":\\\"\\\",\\n      \\\"ATT_FILES\\\":\\\"\\\"\\n    },\\n    \\\"rows\\\": []\\n  },\\n  \\\"methods\\\": {\\n    \\\"getList\\\": ()=>{\\n      let findWord = form.config.data.findword;\\n      let GetListUrl = `/${API_VERSION}/board/${form.boardCateCd}`;\\n      if (findWord){\\n        GetListUrl = `/${API_VERSION}/board/${form.boardCateCd}/search/${findWord}`;\\n      }\\n      \\n      Jinja.ajax.get(GetListUrl,{\\n        \\\"FIELD\\\": \\\"TITLE\\\"\\n      })\\n        .then(result=>form.config.data.rows = result.rows)\\n        .then(result=>form.config.data.mode = \\\"list\\\")\\n    },\\n    \\\"getInfo\\\": (boardId)=>{\\n      Jinja.ajax.get(`/${API_VERSION}/board/${form.boardCateCd}/${boardId}`,{})\\n        .then(result=>{\\n        form.config.data.mode = \\\"view\\\";\\n        form.config.data.info = result;\\n        form.viewBody.innerHTML = result.BODY;\\n        form.viewfiles.value = result.ATT_FILES; \\n        history.pushState({\\\"pid\\\":boardId}, null, location.pathname+\\\"?pid=\\\"+boardId);\\n      });\\n    },\\n    \\\"setEdit\\\":()=>{\\n      if(Jinja.uo.USER_NAME == \\\"GUEST\\\"){\\n        alert(\\\"관리자권한이 필요합니다\\\");\\n        Jinja.auth.reqLogin();\\n      } else {\\n        Object.assign(form.config.data.edit, form.config.data.info);\\n        $(form.wordEditor).summernote(\\\"code\\\", form.config.data.edit.BODY);\\n        form.editfiles.value = form.config.data.edit.ATT_FILES;\\n        form.config.data.mode = \\\"edit\\\";\\n      }\\n    },\\n    \\\"createSend\\\":async ()=>{\\n      form.config.data.edit.ATT_FILES = await form.editfiles.value;\\n      form.config.data.edit.BODY = $(form.wordEditor).summernote(\\\"code\\\");\\n      let sendRlt;\\n      if (form.config.data.edit.BOARD_ID){\\n        sendRlt = await Jinja.ajax.patch(`/${API_VERSION}/board/${form.boardCateCd}/${form.config.data.edit.BOARD_ID}`,form.config.data.edit);\\n      }\\n      else {\\n        sendRlt = await Jinja.ajax.post(`/${API_VERSION}/board/${form.boardCateCd}`,form.config.data.edit);\\n      }\\n      \\n      await form.config.methods.getList();\\n      //sendRlt.then(result=>form.config.methods.getList())\\n      //.then(result=>{\\n      \\n        $(form.wordEditor).summernote(\\\"code\\\",\\\"\\\");\\n\\t      form.editfiles.value = \\\"\\\";\\n        form.config.data.edit.BOARD_ID = \\\"\\\";\\n        form.config.data.edit.TITLE = \\\"\\\";\\n        form.config.data.edit.TAG= \\\"\\\"; \\n        form.config.data.edit.BODY= \\\"\\\"; \\n      //})\\n    },\\n    \\n    \\\"createSend2\\\":()=>{\\n      form.config.data.edit.BODY = $(form.wordEditor).summernote(\\\"code\\\");\\n      let sendRlt;\\n      if (form.config.data.edit.BOARD_ID){\\n        sendRlt = Jinja.ajax.patch(`/${API_VERSION}/board/${form.boardCateCd}/${form.config.data.edit.BOARD_ID}`,form.config.data.edit);\\n      }\\n      else {\\n        sendRlt = Jinja.ajax.post(`/${API_VERSION}/board/${form.boardCateCd}`,form.config.data.edit);\\n      }\\n\\n      sendRlt.then(result=>form.config.methods.getList())\\n        .then(result=>{\\n        $(form.wordEditor).summernote(\\\"code\\\",\\\"\\\");\\n        form.config.data.edit.BOARD_ID = \\\"\\\";\\n        form.config.data.edit.TITLE = \\\"\\\";\\n        form.config.data.edit.TAG= \\\"\\\"; \\n        form.config.data.edit.BODY= \\\"\\\"; \\n\\n        history.pushState({}, null, location.pathname);\\n\\n      })\\n    },\\n    \\\"delete\\\":()=>{\\n      if(Jinja.uo.USER_NAME == \\\"GUEST\\\"){\\n        alert(\\\"관리자권한이 필요합니다\\\");\\n        Jinja.auth.reqLogin();\\n      } else {\\n\\t\\t\\t\\tJinja.confirm.delete(`Delete OK?`)\\n  \\t\\t\\t.then(()=>{\\n          Jinja.ajax.delete(`/${API_VERSION}/board/${form.boardCateCd}/${form.config.data.info.BOARD_ID}`)\\n         .then(result=>form.config.methods.getList())\\n        })\\n        .catch(()=>{});\\n      }\\n    },\\n    \\\"editCancel\\\":()=>{\\n      $(form.wordEditor).summernote(\\\"code\\\",\\\"\\\");\\n      form.editfiles.value = \\\"\\\";\\n      form.config.data.edit.BOARD_ID = \\\"\\\";\\n      form.config.data.edit.TITLE = \\\"\\\";\\n      form.config.data.edit.TAG= \\\"\\\"; \\n      form.config.data.edit.BODY= \\\"\\\"; \\n      form.config.data.mode = \\\"list\\\";\\n\\n      history.pushState({}, null, location.pathname);\\n\\n    },\\n    \\\"viewMode\\\": (mode)=>{\\n\\n      if (mode == \\\"list\\\"){\\n        form.config.data.mode= mode;\\n        history.pushState({}, null, location.pathname);\\n      } else if(mode == \\\"edit\\\"){\\n        if(Jinja.uo.USER_NAME == \\\"GUEST\\\"){\\n          alert(\\\"관리자권한이 필요합니다\\\");\\n          Jinja.auth.reqLogin();\\n        } else {\\n          form.config.data.mode= mode;\\n        }\\n      }\\n    }\\n  },\\n  \\\"watchs\\\": {\\n  },\\n  \\\"onLoad\\\":()=>{\\n    //form.config.methods.getList();\\n  }\\n};\\n\\nform.bo = new JJReact(form, form.config);\\n\\nform.editfiles = new JJAttach(form.attachEdit,{\\n  \\\"mode\\\": \\\"edit\\\"\\n});\\n\\nform.viewfiles = new JJAttach(form.attachView);\\n\\nform.fileAttach=()=>form.editfiles.attach();\\n\\nJinja.require.load(\\\"summernote-lite\\\")\\n  .then(()=>{\\n    $(form.wordEditor).summernote({ \\n      Height: 300,\\n      minHeight: 200,\\n      focus: true \\n    });\\n});  \\n\\nform.openUri = function(url) {\\n  Jinja.resource.getUri(url)\\n    .then(data => {\\n    form.fileInfo = data;\\n    form.setSource(data.BODY);\\n  });\\n\\n};\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n\\n  form.boardCateCd = form.fileInfo.ID;  \\n  form.config.data.title = body.title; \\n  form.config.data.boardNote = body.boardNote; \\n  if(body.sideMenu){\\n    form.sideMenu.setAttribute(\\\"jj-uri\\\", body.sideMenu);\\n    form.form.querySelector(\\\"div.container main\\\").style.marginLeft=\\\"20px\\\";\\n  }\\n  form.config.methods.getList();\\n  //form.reopen(); \\n};\\n\\n\"\n}","URI":"app.640.board.runtime","TYPE":"page"},{"NAME":"app.640.board.studio","BODY":"{\n  \"uuid\": \"3fcf6022-a87d-4182-a2af-cabd84777571\",\n  \"html\": \"<div class=\\\"row\\\">\\n  <div class=\\\"col-12\\\">\\n    <div class=\\\"card-box\\\">\\n      <div class=\\\"inbox-leftbar\\\" jj-id=\\\"form1\\\">\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"control-label\\\">Name:</label>\\n          <input data-bind=\\\"data.name\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"control-label\\\">Title:</label>\\n          <input data-bind=\\\"data.title\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"control-label\\\">sideMenu:</label>\\n          <input data-bind=\\\"data.sideMenu\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"control-label\\\">boardNote:</label>\\n          <textarea data-bind=\\\"data.boardNote\\\" type=\\\"text\\\" class=\\\"form-control\\\"></textarea>\\n        </div>\\n      </div>\\n      <div class=\\\"inbox-rightbar\\\" jj-id=\\\"form2\\\">\\n        <div class=\\\"\\\" board-mode=\\\"${data.mode}\\\">\\n          <div class=\\\"row board-list\\\">\\n            <div class=\\\"col-12\\\">\\n              <div class=\\\"card-box\\\">    \\n                <div class=\\\"row\\\">\\n                  <div class=\\\"col-lg-8\\\">\\n                    <form class=\\\"form-inline\\\"> \\n                      <div class=\\\"form-group\\\">\\n                        <label for=\\\"inputPassword2\\\" class=\\\"sr-only\\\">Search</label>\\n                        <input data-bind=\\\"data.findword\\\" type=\\\"search\\\" class=\\\"form-control\\\" id=\\\"inputPassword2\\\" placeholder=\\\"Search...\\\">\\n                      </div>\\n                      <div class=\\\"form-group mx-sm-3\\\">\\n                        <label for=\\\"status-select\\\" class=\\\"mr-2\\\">Find By</label>\\n                        <select class=\\\"custom-select\\\">\\n                          <option selected=\\\"\\\">제목</option>\\n                          <option value=\\\"1\\\">제목</option>\\n                          <option value=\\\"2\\\">내용</option>\\n                          <option value=\\\"3\\\">제목+내용</option>\\n                          <option value=\\\"4\\\">글쓴이</option>\\n                        </select>\\n                      </div>\\n                    </form>\\n                  </div>\\n                  <div class=\\\"col-lg-4\\\">\\n                    <div class=\\\"text-lg-right mt-3 mt-lg-0\\\">\\n                      <button j-method=\\\"getList\\\"  type=\\\"button\\\" class=\\\"btn btn-success waves-effect waves-light mr-1\\\"><i class=\\\"mdi mdi-settings\\\"></i> Find</button>\\n                      <button j-method=\\\"viewMode('edit')\\\" type=\\\"button\\\" class=\\\"btn btn-danger waves-effect waves-light\\\" data-animation=\\\"fadein\\\"><i class=\\\"mdi mdi-plus-circle mr-1\\\"></i> Add New</button>\\n                    </div>\\n                  </div><!-- end col-->\\n                </div>      \\n              </div>      \\n            </div>      \\n            <div class=\\\"col-12\\\">\\n              <div class=\\\"card-box\\\">    \\n                <table class=\\\"table table-hover\\\">\\n                  <thead>\\n                    <tr>\\n                      <th class=\\\"hidden-xs\\\" style=\\\"width:100px;\\\">순번</th>\\n                      <th>제목</th>\\n                      <!--           <th style=\\\"width:60px;\\\">조회</th> -->\\n                      <th class=\\\"hidden-xs\\\" style=\\\"width:180px;\\\">작성일</th>\\n                    </tr>\\n                  </thead>\\n                  <tbody j-for=\\\"row in data.rows\\\" j-page=5 pager=\\\"pager\\\">\\n                    <tr j-method=\\\"getInfo('${row.BOARD_ID}')\\\">\\n                      <td class=\\\"hidden-xs\\\">${row.CATE_SERIAL_NUMBER}</td>\\n                      <td>${row.TITLE}</td>\\n                      <!--           <td>${row.VIEW_CNT}</td> -->\\n                      <td class=\\\"hidden-xs\\\">${(new Date(row.REG_DATETIME)).$toFormat(\\\"yyyy-MM-dd\\\")}</td>\\n                      <!--           <td>${Jinja.global.dateFormat(new Date(row.REG_DATETIME), 'yyyy-MM-dd')}(${Jinja.global.dateDiff(new Date(row.REG_DATETIME))})</td> -->\\n                    </tr>\\n                  </tbody>\\n                </table>\\n                <jj-pagination jj-id=\\\"pager\\\"></jj-pagination>\\n              </div>      \\n            </div>      \\n          </div>      \\n\\n          <div class=\\\"row board-view\\\">\\n            <div class=\\\"col-12\\\">\\n              <div class=\\\"card-box\\\">    \\n                <h3>${data.info.TITLE}</h3>  \\n                <ul class=\\\"list-inline pull-right hidden\\\">\\n                  <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-thumbs-up\\\" aria-hidden=\\\"true\\\"></i><t>2.9천</t></a></li>\\n                  <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-thumbs-down\\\" aria-hidden=\\\"true\\\"></i><t>460</t></a></li>\\n                  <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-external-link\\\" aria-hidden=\\\"true\\\"></i><t>공유</t></a></li>\\n                  <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-plus-circle\\\" aria-hidden=\\\"true\\\"></i><t>저장</t></a></li>\\n                  <li class=\\\"list-inline-item dropdown\\\">\\n                    <a href=\\\"#\\\" class=\\\"dropdown-toggle text-muted\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"true\\\">\\n                      <i class=\\\"fa fa-ellipsis-h\\\" style=\\\"width: 11px;\\\"></i>\\n                    </a>\\n                    <ul class=\\\"dropdown-menu dropdown-menu-right\\\">\\n                      <li><a href=\\\"#\\\">Action</a></li>\\n                      <li><a href=\\\"#\\\">Another action</a></li>\\n                      <li><a href=\\\"#\\\">Something else here</a></li>\\n                      <li role=\\\"separator\\\" class=\\\"divider\\\"></li>\\n                      <li><a href=\\\"#\\\">Separated link</a></li>\\n                    </ul>\\n                  </li>\\n                </ul>\\n\\n                <label>${data.info.TAG}</label>\\n                <p jj-id=\\\"viewBody\\\"></p>\\n                <div jj-id=\\\"attachView\\\"></div>\\n                <div class=\\\"btn-group pull-right\\\" role=\\\"group\\\" aria-label=\\\"Basic example\\\">\\n                  <button class=\\\"btn btn-info\\\" j-method=\\\"setEdit\\\">수정</button>\\n                  <button j-method=\\\"delete\\\" class=\\\"btn btn-warning ${Jinja.uo.USER_NAME=='GUEST'?'hidden':''}\\\">삭제</button>\\n                </div>\\n                <button class=\\\"btn btn-primary\\\" j-method=\\\"viewMode('list')\\\">목록</button>\\n              </div>      \\n            </div>      \\n            <div class=\\\"col-12\\\" hidden>\\n              <div class=\\\"card-box\\\">    \\n                <div class=\\\"card-body p-4\\\">\\n                  <h5 class=\\\"font-18\\\">Comments</h5>\\n                  <hr>\\n                  <div class=\\\"row\\\">\\n                    <div class=\\\"col-lg-12\\\">\\n                      <form class=\\\"form-main\\\">\\n                        <div class=\\\"row mt-4\\\">\\n                          <div class=\\\"col-lg-6\\\">\\n                            <div class=\\\"form-group\\\">\\n                              <label for=\\\"name2\\\">Name</label>\\n                              <input name=\\\"name\\\" id=\\\"name2\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Your name...\\\">\\n                            </div>\\n                          </div>\\n                          <div class=\\\"col-lg-6\\\">\\n                            <div class=\\\"form-group\\\">\\n                              <label for=\\\"email2\\\">Email address</label>\\n                              <input name=\\\"email\\\" id=\\\"email2\\\" type=\\\"email\\\" class=\\\"form-control\\\" placeholder=\\\"Your email...\\\">\\n                            </div>\\n                          </div>\\n                        </div>\\n\\n                        <div class=\\\"row\\\">\\n                          <div class=\\\"col-lg-12\\\">\\n                            <div class=\\\"form-group\\\">\\n                              <label for=\\\"subject2\\\">Subject</label>\\n                              <input name=\\\"name\\\" id=\\\"subject2\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Your subject...\\\">\\n                            </div>\\n                          </div>\\n                        </div>\\n\\n                        <div class=\\\"row\\\">\\n                          <div class=\\\"col-lg-12\\\">\\n                            <div class=\\\"form-group\\\">\\n                              <label for=\\\"comments2\\\">Message</label>\\n                              <textarea name=\\\"comments\\\" id=\\\"comments2\\\" rows=\\\"4\\\" class=\\\"form-control\\\" placeholder=\\\"Your message...\\\"></textarea>\\n                            </div>\\n                          </div>\\n                        </div>\\n\\n                        <div class=\\\"row\\\">            \\n                          <div class=\\\"col-lg-12\\\">\\n                            <div class=\\\"text-right\\\">\\n                              <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" id=\\\"send\\\">Submit <i class=\\\"mdi mdi-send ml-2\\\"></i></button>\\n                            </div>\\n                          </div> <!-- /col -->\\n                        </div> <!-- /row -->\\n                      </form> <!-- /form -->\\n                    </div> <!-- end col -->\\n                  </div><!-- end row -->\\n                </div>\\n              </div>  \\n            </div>  \\n\\n          </div>      \\n          <div class=\\\"row board-edit\\\">\\n            <div class=\\\"col-12\\\">\\n              <div class=\\\"card-box\\\">    \\n                <j-form>\\n                  <div class=\\\"form-group\\\">\\n                    <label>TITLE</label>\\n                    <input data-bind=\\\"data.edit.TITLE\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"TITLE\\\">\\n                  </div>\\n                  <div class=\\\"form-group\\\">\\n                    <label>BODY</label>\\n                    <div  jj-id=\\\"wordEditor\\\"></div>\\n                  </div>\\n                  <div class=\\\"form-group\\\">\\n                    <label>TAG</label>\\n                    <input data-bind=\\\"data.edit.TAG\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"TAG\\\">\\n                  </div>\\n                  <button jj-command=\\\"fileAttach\\\" type=\\\"button\\\" class=\\\"btn btn-link waves-effect waves-light\\\"><i class=\\\"fa fa-paperclip\\\" aria-hidden=\\\"true\\\"></i> Upload Files</button>\\n                  <div jj-id=\\\"attachEdit\\\"></div>\\n\\n                  <div class=\\\"text-right\\\" role=\\\"group\\\" aria-label=\\\"Basic example\\\">\\n                    <button class=\\\"btn btn-info\\\" j-method=\\\"createSend\\\">Send</button>\\n                    <button class=\\\"btn btn-link\\\" j-method=\\\"editCancel\\\">Cancel</button>\\n                  </div>            \\n                </j-form>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>  \",\n  \"less\": \".board-note{\\n    padding-left: 0px;\\n    border-width: 1px 0px 1px;\\n    border-style: solid;\\n    border-color: initial;\\n    border-image: initial;\\n  \\tpadding-top: 5px;\\n    padding-bottom: 20px;\\n}\\n\\n[board-mode=\\\"list\\\"]{\\n  .board-list{  display: block; }\\n  .board-view{  display: none; }\\n  .board-edit{  display: none; }\\n}\\n[board-mode=\\\"view\\\"]{\\n  .board-list{  display: none; }\\n  .board-view{  display: block; }\\n  .board-edit{  display: none; }\\n}\\n[board-mode=\\\"edit\\\"]{\\n  .board-list{  display: none; }\\n  .board-view{  display: none; }\\n  .board-edit{  display: block; }\\n}\\n\",\n  \"script\": \"/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n --------------------------------------------------------------------------------------------------- */\\nconst API_VERSION = workspaceMeta.options.appInfo.apiVersion||\\\"v61\\\";\\nform.boardCateCd = \\\"df-123\\\";\\nform.config={\\n  \\\"data\\\":{\\n    \\\"title\\\": \\\"진행사업소개\\\",\\n    \\\"menuPath\\\":[\\n      {\\\"title\\\":\\\"home\\\", \\\"link\\\":\\\"#\\\"},\\n      {\\\"title\\\":\\\"compay\\\", \\\"link\\\":\\\"#\\\"},\\n      {\\\"title\\\":\\\"info\\\", \\\"link\\\":\\\"#\\\"}\\n    ],\\n    \\\"mode\\\": \\\"list\\\",\\n    \\\"info\\\":{\\n      \\\"TITLE\\\":\\\"\\\",\\n      \\\"BODY\\\":\\\"\\\",\\n      \\\"TAG\\\":\\\"\\\",\\n      \\\"ATT_FILES\\\":\\\"\\\"\\n    },\\n    \\\"edit\\\":{\\n      \\\"BOARD_ID\\\":\\\"\\\",\\n      \\\"TITLE\\\":\\\"\\\",\\n      \\\"BODY\\\":\\\"\\\",\\n      \\\"TAG\\\":\\\"\\\",\\n      \\\"ATT_FILES\\\":\\\"\\\"\\n    },\\n    \\\"rows\\\": []\\n  },\\n  \\\"methods\\\": {\\n    \\\"getList\\\": ()=>{\\n      let findWord = form.config.data.findword;\\n      let GetListUrl = `/${API_VERSION}/board/${form.boardCateCd}`;\\n      if (findWord){\\n        GetListUrl = `/${API_VERSION}/board/${form.boardCateCd}/search/${findWord}`;\\n      }\\n      \\n      Jinja.ajax.get(GetListUrl,{\\n        \\\"FIELD\\\": \\\"TITLE\\\"\\n      })\\n        .then(result=>form.config.data.rows = result.rows)\\n        .then(result=>form.config.data.mode = \\\"list\\\")\\n  \\t},\\n    \\\"getInfo\\\": (boardId)=>{\\n \\t\\t\\treturn Jinja.ajax.get(`/${API_VERSION}/board/${form.boardCateCd}/${boardId}`,{})\\n      .then(result=>{\\n        form.config.data.mode = \\\"view\\\";\\n        form.config.data.info = result;\\n        form.viewBody.innerHTML = result.BODY;\\n        form.viewfiles.value = result.ATT_FILES; \\n      });\\n  \\t},\\n    \\\"setEdit\\\":()=>{\\n      Object.assign(form.config.data.edit, form.config.data.info);\\n      $(form.wordEditor).summernote(\\\"code\\\", form.config.data.edit.BODY);\\n      form.config.data.mode = \\\"edit\\\";\\n    },\\n    \\\"createSend\\\":async ()=>{\\n      form.config.data.edit.ATT_FILES = await form.editfiles.value;\\n      form.config.data.edit.BODY = $(form.wordEditor).summernote(\\\"code\\\");\\n      let sendRlt;\\n      if (form.config.data.edit.BOARD_ID){\\n        sendRlt = await Jinja.ajax.patch(`/${API_VERSION}/board/${form.boardCateCd}/${form.config.data.edit.BOARD_ID}`,form.config.data.edit);\\n      }\\n      else {\\n        sendRlt = await Jinja.ajax.post(`/${API_VERSION}/board/${form.boardCateCd}`,form.config.data.edit);\\n      }\\n      \\n      await form.config.methods.getList();\\n      //sendRlt.then(result=>form.config.methods.getList())\\n      //.then(result=>{\\n      \\n        $(form.wordEditor).summernote(\\\"code\\\",\\\"\\\");\\n        form.config.data.edit.BOARD_ID = \\\"\\\";\\n        form.config.data.edit.TITLE = \\\"\\\";\\n        form.config.data.edit.TAG= \\\"\\\"; \\n        form.config.data.edit.BODY= \\\"\\\"; \\n        form.editfiles.value = \\\"\\\"; \\n\\n      //})\\n    },\\n    \\\"delete\\\":()=>{\\n      if(Jinja.uo.USER_NAME == \\\"GUEST\\\"){\\n        alert(\\\"관리자권한이 필요합니다\\\");\\n        Jinja.auth.reqLogin();\\n      } else {\\n\\t\\t\\t\\tJinja.confirm.delete(`Delete OK?`)\\n  \\t\\t\\t.then(()=>{\\n          Jinja.ajax.delete(`/${API_VERSION}/board/${form.boardCateCd}/${form.config.data.info.BOARD_ID}`)\\n         .then(result=>form.config.methods.getList())\\n        })\\n      }\\n    },\\n    \\\"editCancel\\\":()=>{\\n        $(form.wordEditor).summernote(\\\"code\\\",\\\"\\\");\\n        form.config.data.edit.BOARD_ID = \\\"\\\";\\n        form.config.data.edit.TITLE = \\\"\\\";\\n        form.config.data.edit.TAG= \\\"\\\"; \\n        form.config.data.edit.BODY= \\\"\\\"; \\n        form.editfiles.value = \\\"\\\"; \\n        form.config.data.mode = \\\"list\\\";\\n      \\n    },\\n    \\\"viewMode\\\": (mode)=>form.config.data.mode= mode\\n  },\\n  \\\"watchs\\\": {\\n  },\\n  \\\"onLoad\\\":()=>{\\n    //form.config.methods.getList();\\n  }\\n};\\n\\nform.fileAttach=()=>form.editfiles.attach();\\n\\n\\nform.bo = new JJReact(form.form2, form.config);\\nform.editfiles = new JJAttach(form.attachEdit, {\\n  \\\"mode\\\": \\\"edit\\\"\\n});\\n\\nform.viewfiles = new JJAttach(form.attachView);\\nJinja.require.load(\\\"summernote-lite\\\")\\n  .then(()=>{\\n\\t$(form.wordEditor).summernote({ \\n\\t\\tHeight: 300,\\n\\t\\tminHeight: 200,\\n\\t\\tfocus: true \\n\\t});\\n});  \\n\\n\\n/* 자원을 호출하고 해당 자원번호를 넘겨준다 */\\n\\nform.boardConfig={\\n  \\\"data\\\": {\\n    \\\"name\\\": \\\"df-123\\\",\\n    \\\"title\\\":\\\"시험용\\\",\\n    \\\"sideMenu\\\":\\\"\\\",\\n    \\\"boardNote\\\":\\\"시험용\\\"\\n  }\\n}\\n\\nform.boardBo = new JJReact(form.form1, form.boardConfig);\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n\\tbody = Jinja.global.json(body||\\\"{}\\\");\\n  Object.assign(form.boardConfig.data, body);\\n  form.excute();\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> {\\n  Jinja.global.string(form.boardConfig.data);\\n}\\n\\nform.excute = async function() {\\n  form.boardCateCd = form.fileInfo.ID;  \\n  form.config.data.title = form.boardConfig.data.title;  \\n  form.config.data.boardNote = form.boardConfig.data.boardNote;  \\n  form.config.methods.getList();\\n};\\n\\n// Test용으로 사용\\n//form.excute();\\n/* --------------------------------------------------------------------------------------------------- \\n    이벤트 정의\\n --------------------------------------------------------------------------------------------------- */\\n\\n    \\n\\n\\n/* --------------------------------------------------------------------------------------------------- \\n    함수 정의\\n --------------------------------------------------------------------------------------------------- */\\n\\n\"\n}","URI":"app.640.board.studio","TYPE":"page"},{"NAME":"app.640.calendar.runtime","BODY":"{\r\n  \"html\": \"<div class=\\\"container-fluid\\\">\\n  <!-- start page title -->\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"page-title-box\\\">\\n        <div class=\\\"page-title-right\\\">\\n          <ol class=\\\"breadcrumb m-0\\\">\\n            <li class=\\\"breadcrumb-item\\\"><a href=\\\"javascript: void(0);\\\">Minton</a></li>\\n            <li class=\\\"breadcrumb-item\\\"><a href=\\\"javascript: void(0);\\\">Extras</a></li>\\n            <li class=\\\"breadcrumb-item active\\\">Gallery</li>\\n          </ol>\\n        </div>\\n        <h4 class=\\\"page-title\\\">Calendar: ${data.info.title}</h4>\\n      </div>\\n    </div>\\n  </div>     \\n  <!-- end page title --> \\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">  \\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-body\\\">\\n          <div jj-id=\\\"calendar\\\"></div>\\n        </div>      \\n      </div>  \\n    </div>  \\n  </div>  \\n</div>    \\n\",\r\n  \"less\": \".fc-content .fc-title {\\n    color:  white;\\n}\\n@media (max-width: 767.98px){\\n.fc-toolbar.fc-header-toolbar  {\\n    display: block;\\n}\\n}\\n\",\r\n  \"script\": \"\\n/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n    http://jsfiddle.net/gw8xpwhp/20/\\n --------------------------------------------------------------------------------------------------- */\\nform.keyValue    = 0;\\nform.config={\\n  \\\"data\\\":{\\n    \\\"info\\\":{\\n      \\\"title\\\":\\\"\\\",\\n      \\\"description\\\":\\\"\\\"\\n    }\\n  }\\n};\\n\\nform.bo = new JJReact(form, form.config);\\n\\nlet calendar;\\n\\nthis.requirePromise = Jinja.require.load(\\\"fullcalendar\\\")\\n  .then(e=>{\\n  let Calendar = FullCalendar.Calendar;\\n\\n  calendar = new Calendar(form.calendar,  {\\n    plugins: [ 'interaction', 'dayGrid', 'timeGrid' ],\\n    defaultView: 'dayGridMonth',\\n    editable: false,\\n    droppable: false,\\n    selectable: false,\\n    weekNumbers: false,\\n    header: {\\n      left: 'prev,next today',\\n      center: 'title',\\n      right: 'dayGridMonth,timeGridWeek,timeGridDay'\\n    }\\n  });\\n\\n  calendar.render();\\n\\n});\\nform.changed = false;\\nform.changCheck= false;\\n\\n\\nform.setSource = function(body) {\\n  this.requirePromise.then(()=>{  \\n\\n    body = Jinja.global.json(body);\\n    if(body.info){\\n      form.config.data.info.title = body.info.title;\\n      form.config.data.info.description = body.info.description;\\n    }\\n\\n    calendar.addEventSource(body);    \\n\\n  });\\n\\n};\\n\",\r\n  \"uuid\": \"d03a1be9-2bd5-4cf7-8808-6465c683b8a7\"\r\n}","URI":"app.640.calendar.runtime","TYPE":"page"},{"NAME":"app.640.calendar.studio","BODY":"{\n  \"uuid\": \"a9930fff0-729a-4122-9b35-cf3e7c65e56f\",\n  \"html\": \"<div jj-id='externalEvents'>\\n  <p>\\n    <strong>Draggable Events</strong>\\n  </p>\\n  <div class='fc-event bg-success'>행사</div>\\n  <div class='fc-event bg-info'>교육</div>\\n  <div class='fc-event bg-warning'>시연</div>\\n  <div class='fc-event bg-danger'>전시</div>\\n  <hr>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">TITLE:</label>\\n    <input data-bind=\\\"data.info.title\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">DESCRIPTION:</label>\\n    <textarea data-bind=\\\"data.info.description\\\" type=\\\"text\\\" class=\\\"form-control\\\"></textarea>\\n  </div>\\n  \\n</div>\\n\\n<div jj-id=\\\"calendar\\\"></div>\\n\\n \",\n  \"less\": \"[jj-id='externalEvents'] {\\n  position: relative;\\n  padding: 10px;\\n  width: 150px;\\n\\tfloat: left;  \\n}\\n\\n[jj-id=\\\"calendar\\\"] {\\n  position: relative;\\n  margin-left: 200px;\\n  right: 10px;\\n}\\n\\n\\n.fc-holdday {\\n  background-color:lavenderblush;\\n}\\n.fc-holdday-text {\\n  color:red;\\n}\\n\\n\\n.fc-head  .fc-sun, .fc-body .fc-sun {\\ncolor: #930000;\\n}\\n.fc-head  .fc-sat,.fc-body .fc-sat  {\\ncolor: #930000;    \\n}\\n\\n.fc-day-header {\\n  line-height:25px;\\n}\\n.fc-scroller {\\n  overflow-y: auto!important\\n}\\n\\n// @media (max-width: 991px){\\n\\n//   .calendar-body[jj-id=\\\"calendar\\\"] {\\n//     left: 10px;\\n//   }\\n\\n//   .shapes {\\n//     display: none;\\n//   }\\n\\n// }  \\n@media (max-width: 767.98px){\\n.fc-toolbar.fc-header-toolbar  {\\n    display: block;\\n}\\n}\\n.fc-content .fc-title {\\n    color:  white;\\n}\\n\\n\",\n  \"script\": \"\\n/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n    http://jsfiddle.net/gw8xpwhp/20/\\n --------------------------------------------------------------------------------------------------- */\\nform.keyValue    = 0;\\n\\nform.config={\\n  \\\"data\\\":{\\n    \\\"info\\\":{\\n      \\\"title\\\":\\\"\\\",\\n      \\\"description\\\":\\\"\\\"\\n    }\\n  }\\n};\\n\\nform.bo = new JJReact(form, form.config);\\nform.calOption = {\\n  header: {\\n    left: 'today prev,next',\\n    center: 'title',\\n    right: 'month,agendaWeek,agendaDay'\\n  },\\n  height: 700, \\n  //contentHeight: 'auto',\\n  contentHeight: 700,\\n  minTime: '08:00:00',\\n  maxTime: '20:00:00',   \\n  defaultTimedEventDuration: '02:00:00',\\n  eventLimit: 5,\\n  navLinks: true,\\n  editable: true,\\n  droppable: true,\\n  selectable: true,\\n  weekNumbers: false,\\n  businessHours: {\\n    start: '09:00', // a start time (10am in this example)\\n    end: '18:00', // an end time (6pm in this example)\\n  },\\n  locale: \\\"ko\\\",\\n  weekends: true,\\n  timeFormat: 'HH:mm', //'HH(:mm)'\\n  eventSources: [],\\n  events: [],    \\n  titleFormat: function(date) {\\n    return date.toString() + '!!!';\\n  },\\n  drop: function(date) {\\n    form.change();\\n  },\\n  eventDrop: function(event, delta, revertFunc) {\\n    form.change();\\n  },    \\n  eventResize: function(event, delta, revertFunc) {\\n    form.change();\\n  },    \\n\\n  eventClick: function(calEvent, jsEvent, view) {\\n    JJModal602.show('event.calendar.uc', calEvent)\\n      .then(result=>form.change());           \\n  } ,   \\n\\n  ver: \\\"1.0\\\"\\n\\n};\\n\\nlet calendar;\\n\\nthis.requirePromise = Jinja.require.load(\\\"fullcalendar\\\")\\n  .then(e=>{\\n  let Calendar = FullCalendar.Calendar;\\n  let Draggable = FullCalendarInteraction.Draggable;\\n\\n  // initialize the external events\\n  // -----------------------------------------------------------------\\n\\n  new Draggable(form.externalEvents, {\\n    itemSelector: '.fc-event',\\n    eventData: function(eventEl) {\\n      return {\\n        title: eventEl.innerText,\\n        className: eventEl.getAttribute(\\\"class\\\")\\n      };\\n    }\\n  });\\n\\n\\n  calendar = new Calendar(form.calendar,  {\\n    plugins: [ 'interaction', 'dayGrid', 'timeGrid' ],\\n    defaultView: 'dayGridMonth',\\n    editable: true,\\n    droppable: true,\\n    selectable: true,\\n    weekNumbers: false,\\n    header: {\\n      left: 'prev,next today',\\n      center: 'title',\\n      right: 'dayGridMonth,timeGridWeek,timeGridDay'\\n    },\\n    drop: function(info) {},\\n//     titleFormat: function(date) {\\n//       return date.toString() + '!!!';\\n//     },\\n    \\n    eventClick: function(calEvent, jsEvent, view) {\\n\\n      JJModal602.show('event.calendar.uc',{\\n        \\\"event\\\": calEvent.event,\\n        \\\"buttons\\\":[ // 모발박스 동적생성용\\n          { \\\"title\\\": \\\"remove\\\",  \\\"class\\\": \\\"btn-warning\\\", \\\"method\\\": \\\"remove\\\", \\\"icon\\\":\\\"fa-calendar-times-o\\\"},\\n          { \\\"title\\\": \\\"update\\\",  \\\"class\\\": \\\"btn-info\\\"   , \\\"method\\\": \\\"update\\\", \\\"icon\\\":\\\"fa-pencil\\\"},\\n          { \\\"title\\\": \\\"Close\\\", \\\"class\\\": \\\"\\\"           , \\\"method\\\": \\\"\\\"}\\n        ]\\n      })      \\n        .then(result=>{})\\n    }\\n  });\\n\\n  calendar.render();\\n\\n});\\n\\n\\nform.setSource = (body)=>{\\n  this.requirePromise.then(()=>{  \\n\\n    body = Jinja.global.json(body);\\n    if(body.info){\\n      form.config.data.info.title = body.info.title;\\n      form.config.data.info.description = body.info.description;\\n    }\\n\\n    calendar.addEventSource(body);    \\n    \\n    Jinja.event.dispatch(\\\"studio.editFileReady\\\", \\\"word.studio.setSource\\\", {\\n      \\\"detail\\\": this.fileInfo\\n    });   \\n  });\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=>{\\n  let ds = calendar.getEvents();\\n  let evt = []; \\n  ds.forEach(fc =>{\\n    let nf = {\\n      \\\"title\\\"         : fc.title, \\n      \\\"icon\\\"          : fc.icon, \\n      \\\"allDay\\\"        : fc.allDay,\\n      \\\"classNames\\\"     : fc.classNames,\\n      \\\"description\\\"   : fc.description \\n    }\\n\\n    if (fc.start)   nf.start = fc.start.valueOf();\\n    if (fc.end)     nf.end   = fc.end.valueOf();\\n\\n    evt.push(nf);\\n\\n  });\\n\\n  let rlt = Jinja.global.string({\\n    \\\"info\\\": form.config.data.info,\\n    \\\"events\\\": evt\\n  });\\n\\n  return rlt;\\n}; \\n\\n\\nform.excute = async function() {\\n};\\n\\nform.clear = function(op) {\\n  let eventSources = calendar.getEventSources(); \\n  let len = eventSources.length;\\n  for (let i = 0; i < len; i++) { \\n    eventSources[i].remove(); \\n  }   \\n  calendar.getEvents().forEach(fc =>fc.remove());  \\n}\\n\"\n}","URI":"app.640.calendar.studio","TYPE":"page"},{"NAME":"app.640.color.studio","BODY":"{\r\n  \"html\": \"<h4 class=\\\"\\\">Color Schemes 설정</h4>\\n<style jj-id=\\\"formCss\\\"></style>\\n<div class=\\\"row\\\">\\n  <div class=\\\"col-5\\\">\\n    <ul class=\\\"nav nav-tabs jj-tabs\\\">\\n      <li class=\\\"nav-item\\\">\\n        <a href=\\\"#tab1\\\" data-toggle=\\\"tab\\\" aria-expanded=\\\"false\\\" class=\\\"nav-link active\\\">\\n          <span class=\\\"d-none d-sm-inline-block\\\">Background Color</span>   \\n        </a>\\n      </li>\\n      <li class=\\\"nav-item\\\">\\n        <a href=\\\"#tab2\\\" data-toggle=\\\"tab\\\" aria-expanded=\\\"true\\\" class=\\\"nav-link\\\">\\n          <span class=\\\"d-none d-sm-inline-block\\\">Text Color</span> \\n        </a>\\n      </li>\\n    </ul>\\n    <div class=\\\"tab-content  bg-white\\\">\\n      <div class=\\\"tab-pane active\\\" id=\\\"tab1\\\">\\n        <jj-color jj-id=\\\"basecolor\\\" cdata-bind=\\\"data.basecolor\\\"></jj-color>\\t\\n      </div>\\n      <div class=\\\"tab-pane\\\" id=\\\"tab2\\\">\\n        <jj-color jj-id=\\\"textcolor\\\" cdata-bind=\\\"data.textcolor\\\"></jj-color>\\t\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"col-7 css-test\\\">\\n    <h5><i class=\\\"fa fa-font\\\" aria-hidden=\\\"true\\\"></i> Text</h5>\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-6\\\">\\n        <div class=\\\"p-1 bg-white\\\" j-for=\\\"row in data.colors\\\">\\n          <div class=\\\"alert org-color\\\" data-color=\\\"${row.value}\\\" role=\\\"alert\\\" style=\\\"background-color: var(${row.value}); color: white;\\\">var(${row.value})<c></c></div>\\n        </div>\\n      </div>\\n      <div class=\\\"col-6\\\">\\n        <div class=\\\"p-1 bg-white\\\" j-for=\\\"row in data.colors\\\">\\n          <div class=\\\"alert chg-color\\\" data-color=\\\"${row.value}\\\" role=\\\"alert\\\" style=\\\"background-color: var(${row.value}); color: white;\\\">var(${row.value})<c></c></div>\\n          <input type=\\\"color\\\">\\n        </div>\\n      </div>\\n    </div>\\n    <button jj-command=\\\"setColor\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-rounded width-md waves-effect waves-light\\\">적용</button>\\n  </div> \\n  \\n</div>\\n\",\r\n  \"less\": \"[type=\\\"color\\\"]{\\n  position: absolute;\\n  visibility: hidden;\\n  height:0;\\n  margin-top:-20px;\\n}\\n[data-color]{\\n  c{\\n    padding-left:1rem;\\n    pointer-events: none;\\n  }\\n}\\n.btn-primary {\\n    color: #fff;\\n    background-color: var(--primary);\\n    border-color: var(--primary);\\n}\",\r\n  \"script\": \"/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n --------------------------------------------------------------------------------------------------- */\\nform.schemeLess = \\\"\\\";\\nform.config = {\\n  \\\"data\\\": {\\n    \\\"basecolor\\\": \\\"#337ab7\\\",\\n    \\\"textcolor\\\": \\\"#333333\\\",\\n    \\\"colors\\\":[\\n      \\\"--primary\\\",\\n      \\\"--secondary\\\",\\n      \\\"--success\\\",\\n      \\\"--info\\\",\\n      \\\"--warning\\\",\\n      \\\"--danger\\\",\\n      \\\"--light\\\",\\n      \\\"--dark\\\",\\n      \\\"--blue\\\",\\n      \\\"--indigo\\\",\\n      \\\"--red\\\",\\n      \\\"--orange\\\",\\n      \\\"--yellow\\\",\\n      \\\"--green\\\",\\n      \\\"--teal\\\",\\n      \\\"--cyan\\\",\\n      \\\"--white\\\",\\n      \\\"--gray\\\",\\n      \\\"--gray-dark\\\",\\n      \\\"--pink\\\",\\n      \\\"--purple\\\"\\n    ]\\n  }\\n};\\n\\n\\n\\nform.fromLoad =()=>{\\n  getColors();\\n}\\n\\n\\nnew JJReact(form, form.config);\\n\\nform.excute=()=>{\\n  let css = \\\"\\\";\\n  form.querySelectorAll(`[data-color]`).forEach(el=>{\\n    css += ` ${el.dataset.color}: ${getElBackColor(el)};\\\\n`\\n  })\\n  css = `.css-test{ ${css}}`;\\n\\n  form.formCss.$empty();\\n  form.formCss.appendChild(document.createTextNode(css));\\n}\\n\\nform.addEventListener(\\\"click\\\", e=>{\\n  if(e.target.matches(\\\".alert.org-color\\\")){\\n    let colorVar = e.target.dataset.color\\n    let colorVal = getElBackColor(e.target)\\n    \\n    form.querySelector(`.alert.chg-color[data-color=\\\"${colorVar}\\\"]`)\\n    .style.backgroundColor = colorVal;\\n    \\n  }\\n  if(e.target.matches(\\\".alert.chg-color\\\")){\\n    e.target.nextElementSibling.value = getElBackColor(e.target)\\n    e.target.nextElementSibling.click();\\n  }\\n})\\nform.addEventListener(\\\"input\\\", e=>{\\n  if(e.target.matches(`[type=\\\"color\\\"]`)){\\n    e.target.previousElementSibling.style.backgroundColor = e.target.value;\\n    getColors();\\n  }\\n})\\n\\nfunction getColors(){\\n  form.querySelectorAll('c').forEach(el=>{\\n    let compStyles = window.getComputedStyle(el.parentElement);\\n    var c = w3color(compStyles.getPropertyValue(\\\"background-color\\\"));\\n    var v = c.toHexString().toLowerCase();\\n    el.innerText  = v;\\n  });\\n}\\n\\ngetColors();\\n\\nfunction getElBackColor(el){\\n    let compStyles = window.getComputedStyle(el);\\n    var c = w3color(compStyles.getPropertyValue(\\\"background-color\\\"));\\n    return c.toHexString().toLowerCase();\\n\\t\\t  \\n}\",\r\n  \"uuid\": \"1f5a8ecf-0582-4c4f-a183-40516a58243c\"\r\n}","URI":"app.640.color.studio","TYPE":"page"},{"NAME":"app.640.component.studio","BODY":"{\n  \"uuid\": \"a7b0bacc8-129f-4b7e-8e21-107a2ba0c817\",\n  \"html\": \"<div hidden class=\\\"btn-group tool-bar\\\" role=\\\"group\\\" aria-label=\\\"...\\\">\\n  <button class=\\\"btn btn-link btn-sm\\\" jj-command=\\\"builder\\\">Builder</button>\\n</div>\\n<div class=\\\"flex3box d-flex flex-row h-100\\\">\\n  <div jj-id=\\\"leftEdit\\\">\\n    <jj-code-editor jj-id=\\\"scriptEditor\\\" data-mode=\\\"javascript\\\" data-theme=\\\"eclipse\\\"></jj-code-editor>\\n  </div>\\n  <div class=\\\"flex-grow-1\\\">\\n    <jj-code-editor jj-id=\\\"lessEditor\\\" data-mode=\\\"less\\\" data-theme=\\\"eclipse\\\"></jj-code-editor>\\n  </div>\\n</div>\\n\",\n  \"less\": \"article{\\n  display:flex;\\n  flex-direction: column;\\n  height: 100%;\\n  >.tool-bar{\\n    flex: none;\\n    display: inline-block;\\n  }\\n  >.flex3box {\\n    flex-grow:1;\\n    display:flex;\\n    flex-direction: row;\\n\\n    [jj-id=\\\"leftEdit\\\"]{\\n      position: relative;\\n      width: 50%;\\n      padding-right:5px;\\n      .resizer:hover{\\n        background-color: #ccc;\\n      }\\n    }    \\n  }\\n}\\n\",\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body);\\n  form.lessEditor.value   = body.less||body.css;\\n  form.scriptEditor.value = body.script;\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = (bTest)=>{\\n  let less = form.lessEditor.value;\\n  return Jinja.dom.lessJJcss(less)\\n    .then(css=> Jinja.global.string({\\n    \\\"html\\\": \\\"\\\",\\t\\n    \\\"css\\\": css,\\t\\n    \\\"less\\\":less,\\t\\n    \\\"script\\\": form.scriptEditor.value\\t\\n  }))\\n    .catch(ex=>{\\n    if (bTest){}\\n    else {\\n      console.error(ex);\\n    }\\n  });\\n}\\n\\nform.builder = ()=>{\\n  alert('실험하다');\\n}\\n\\nform.excute = async function() {\\n  form.getSource(true)\\n    .then(body=>$topMessage(\\\"LESS 2 CSS Complete\\\"))\\n    .catch(ex=>{\\n    let msg = `\\nLESS 2 CSS Convert Error\\nmessage: ${ex.message}\\nline: ${ex.line}\\ncolumn: ${ex.column}\\n`;\\n    $topMessage(msg);\\n    console.log(\\\"Component verifyCss\\\",ex);\\n  });\\n\\n  //Jinja.dom.verifyScript(body.script)\\n  let script = `\\n(function(app){\\n'use strict';\\n\\n${body.script}\\n\\n$topMessage(\\\"Script verify Complete\\\");\\n}).call(Jinja)\\n`;\\n  let libScript = document.createElement('script');\\n  libScript.type = 'text/javascript'; \\n  libScript.text = script;\\n  Jinja.appendChild(libScript);\\n};\\n\\nnew JJRresizable(form.leftEdit, {\\n  \\\"handles\\\":\\\"e\\\"\\n});   \"\n}","URI":"app.640.component.studio","TYPE":"page"},{"NAME":"app.640.css.studio","BODY":"{\r\n  \"html\": \"<jj-code-editor data-mode=\\\"less\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"editor\\\"></jj-code-editor>\\n\",\r\n  \"less\": \"jj-code-editor{\\n  height: 100%;\\n}\",\r\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body) => form.editor.value = body;\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> form.editor.value;\\n\\nform.excute = async function() {\\n  let body = form.getSource();\\n  try{\\n\\t\\tJinja.dom.verifyCss(body);\\n    $topMessage(\\\"정상입니다.\\\");\\n  } catch(ex){\\n    alert(\\\"구조에 문제가 있습니다.\\\\n\\\"+ex);  \\n  }  \\n\\n}\",\r\n  \"css\": \"ca41c483-04af-47d2-8943-f839f11845ea\"\r\n}","URI":"app.640.css.studio","TYPE":"page"},{"NAME":"app.640.deploy.studio","BODY":"{\n  \"uuid\": \"398913b9-4bb4-4c8d-9aaa-a8592308e2a1\",\n  \"html\": \"<div class=\\\"btn-group tool-bar\\\" role=\\\"group\\\" aria-label=\\\"...\\\">\\n  <button class=\\\"btn btn-link btn-sm\\\" jj-command=\\\"JbatisDepoly\\\">\\n  <i class=\\\"spinner-border-sm\\\"></i>JbatisDepoly \\n  </button>\\n</div>\\n<div class=\\\"d-flex flex-row h-100\\\">\\n  <div jj-id=\\\"leftEdit\\\">\\n    <jj-code-editor jj-id=\\\"scriptEditor\\\" data-mode=\\\"javascript\\\" data-theme=\\\"eclipse\\\"></jj-code-editor>\\n  </div>\\n  <div class=\\\"flex-grow-1\\\">\\n    <jj-code-editor jj-id=\\\"lessEditor\\\" data-mode=\\\"less\\\" data-theme=\\\"eclipse\\\"></jj-code-editor>\\n  </div>\\n</div>\\n\",\n  \"less\": \"[jj-id=\\\"leftEdit\\\"]{\\n  position: relative;\\n  width: 50%;\\n  padding-right:5px;\\n  .resizer:hover{\\n    background-color: #ccc;\\n  }\\n}\",\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body);\\n  form.lessEditor.value    = body.css;\\n  form.scriptEditor.value = body.script;\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=>{\\n return Jinja.global.string({\\n    \\\"html\\\": \\\"\\\",\\t\\n    \\\"css\\\": form.lessEditor.value,\\n    \\\"script\\\": form.scriptEditor.value\\t\\n  })\\n}\\n\\nform.JbatisDepoly =()=>{\\n  debugger;\\n  let uri = `/v61/jbatis/dev710Maria/excute/get/JbatisDepoly.sql`\\n  Jinja.ajax.post(uri, {\\n    \\\"ID\\\": form.fileInfo[\\\"ID\\\"],\\n    \\\"BODY\\\": form.fileInfo[\\\"BODY\\\"],\\n  })\\n      .then(result=>{\\n      alert('전송에 성공');\\n    })\\n      .catch(e=>{\\n      alert(`ajax excute \\\"${uri}\\\" 실행이 실패하였습니다.`)\\n    })\\n  \\n}\\n\\nform.excute = async function() {\\n};\\n\\nnew JJRresizable(form.leftEdit, {\\n  \\\"handles\\\":\\\"e\\\"\\n});   \"\n}","URI":"app.640.deploy.studio","TYPE":"page"},{"NAME":"app.640.diagram.runtime","BODY":"{\n  \"uuid\": \"acd1fae0e-865e-4222-be03-b7f8f4064277\",\n  \"html\": \"<div class=\\\"container\\\">\\n  <div class=\\\"jj-headline\\\">\\n    <h2>${data.fileInfo.NAME||\\\"\\\"}</h2>  \\n  </div>\\n  <div class=\\\"jj-body\\\">\\n    <side jj-id=\\\"sideLeft\\\" class=\\\"hidden\\\">\\n      <div class=\\\"btn-group\\\">\\n        <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\"><i class=\\\"fa fa-table\\\" aria-hidden=\\\"true\\\"></i></button>\\n        <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\"><i class=\\\"fa fa-bar-chart\\\" aria-hidden=\\\"true\\\"></i></button>\\n      </div>side\\n    </side>\\n    <article>\\n      <div class=\\\"btn-group hidden\\\">\\n        <a  jj-command=\\\"save\\\" class=\\\"btn btn-default btn-sm\\\" aria-command=\\\"save\\\" title=\\\"저장\\\"><i class=\\\"fa fa-floppy-o\\\" aria-hidden=\\\"true\\\"></i></a>\\n      </div>\\n      <jj-diagram jj-id=\\\"diagram\\\"></jj-diagram>\\n    </article>\\n  </div>\\n</div>\\n\",\n  \"less\": \".jj-body{\\n  position: relative;\\n  display: flex;\\n  flex-direction: row;\\n  height:100%;\\n  >side{\\n    position: relative;\\n    flex: none;\\n    width:140px;\\n    background-color: var(--basecolor3);\\n    display: flex;\\n    flex-direction: column;\\n  }\\n  >article{\\n    flex-grow:1;\\n    background-color: var(--basecolor2);\\n    display: flex;\\n    flex-direction: column;\\n\\n    jj-diagram{\\n      flex-grow:1;\\n      border: 5px solid #ccc;\\n      background-color: white;\\n      min-height: 600px;\\n      .w {\\n        border: 0;\\n        img{\\n          height: 100%;\\n          width: auto;            \\n        }      \\n      }\\n    }\\n  }\",\n  \"script\": \"form.config={\\n  \\\"data\\\":{\\n    \\\"fileInfo\\\": {}\\n  }\\n};\\n\\nform.bo = new JJReact602(form, form.config);\\n\\nnew JJRresizable(form.sideLeft, {\\\"handles\\\":\\\"e\\\"});   \\n\\n/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n --------------------------------------------------------------------------------------------------- */\\n\\n/* 자원을 호출하고 해당 자원번호를 넘겨준다 */\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (txtBody)=>{\\n  let body = Jinja.global.json(txtBody||\\\"{}\\\");\\n  form.diagram.fromJSON(body.diagram||{});\\n  form.bindCss(body);\\n  form.bindScript(body);\\n  \\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> Jinja.global.string({\\n  \\\"diagram\\\": form.diagram.toJSON()\\n});\\n\\n\"\n}","URI":"app.640.diagram.runtime","TYPE":"page"},{"NAME":"app.640.diagram.studio","BODY":"{\n  \"uuid\": \"a3aace16a-b895-4404-b6e5-f8103f723d16\",\n  \"html\": \"<div class=\\\"edit-article\\\">\\n  <div class=\\\"edit-toolbar\\\">\\n    <button jj-command=\\\"clear\\\" class=\\\"btn btn-secondary btn-sm\\\" aria-command=\\\"save\\\" title=\\\"새로작성\\\"><i class=\\\"fa fa-file-o\\\" aria-hidden=\\\"true\\\"></i></button>\\n    <button jj-command=\\\"deleteNode\\\" class=\\\"btn btn-secondary btn-sm\\\" aria-command=\\\"save\\\" title=\\\"아이템삭제\\\"><i class=\\\"fa fa-remove\\\" aria-hidden=\\\"true\\\"></i></button>\\n  </div>\\n  <div class=\\\"edit-body\\\">\\n  <side jj-id=\\\"sideLeft\\\">\\n    <div class=\\\"list-group\\\">\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/1.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/2.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/3.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/4.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/5.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/6.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/7.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/8.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/9.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/10.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/11.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/12.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/13.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/14.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/15.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/16.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/17.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/18.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/19.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/20.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/21.svg\\\">  <t></t></a>\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"node\\\" title=\\\"아이콘1\\\"><img src=\\\"https://cdn.appspeed.net:8444/repository/systemImages/tools/flowchart/22.svg\\\">  <t></t></a>\\n    </div>\\n    <div hidden class=\\\"list-group\\\">\\n      <a class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-diagram-type=\\\"group\\\" title=\\\"그룹\\\"><i class=\\\"fa fa-object-group\\\" aria-hidden=\\\"true\\\"></i> <t>그룹</t></a>\\n    </div>\\n  </side>\\n  <article>\\n    <jj-diagram jj-id=\\\"diagram\\\"></jj-diagram>\\n    <div class=\\\"code-tabContent flex-grow-1\\\">\\n      <ul class=\\\"nav nav-tabs jj-tabs\\\">\\n        <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link active\\\" data-target=\\\"tab1\\\" href=\\\"#\\\">script</a></li>\\n        <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link \\\" data-target=\\\"tab2\\\" href=\\\"#\\\">less</a></li>\\n        <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link \\\" data-target=\\\"tab3\\\" href=\\\"#\\\">html</a></li>\\n        <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link \\\" data-target=\\\"tab4\\\" href=\\\"#\\\">bizModel</a></li>\\n      </ul>\\n      <div class=\\\"tab-content\\\">\\n        <div role=\\\"tabpanel\\\" data-target=\\\"tab1\\\" class=\\\"tab-pane active\\\">\\n          <jj-code-editor data-mode=\\\"javascript\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"scriptEditor\\\"></jj-code-editor>\\n        </div>\\n        <div role=\\\"tabpanel\\\" data-target=\\\"tab2\\\" class=\\\"tab-pane active\\\">\\n          <div class=\\\"btn-group\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"cssApply\\\" ><i class=\\\"fa fa-upload\\\" aria-hidden=\\\"true\\\"></i> cssApply</button>\\n          </div>\\n          <jj-code-editor data-mode=\\\"less\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"lessEditor\\\"></jj-code-editor>\\n        </div>\\n        <div role=\\\"tabpanel\\\" data-target=\\\"tab3\\\" class=\\\"tab-pane active\\\">\\n          <div class=\\\"btn-group\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"exportHtml\\\"><i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> export HTML</button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"importHtml\\\"><i class=\\\"fa fa-upload\\\" aria-hidden=\\\"true\\\"></i> import HTML</button>\\n          </div>\\n          <jj-code-editor data-mode=\\\"html\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"htmlEditor\\\"></jj-code-editor>\\n        </div>\\n        <div role=\\\"tabpanel\\\" data-target=\\\"tab4\\\" class=\\\"tab-pane active\\\">\\n          <div class=\\\"btn-group\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"exportRule\\\"><i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> export Rule</button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"importRule\\\"><i class=\\\"fa fa-upload\\\" aria-hidden=\\\"true\\\"></i> import Rule</button>\\n          </div>\\n          <jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"ruleEditor\\\"></jj-code-editor>\\n        </div>\\n      </div>\\n    </div>     \\n  </article>\\n  <side jj-id=\\\"sideRight\\\">\\n    <label>노드제목</label>\\n    <input type=\\\"text\\\" class=\\\"form-control p-1\\\"  jj-id=\\\"nodeText\\\">\\n    <label>노드스타일</label>\\n    <jj-attribute jj-id=\\\"attribute\\\"></jj-attribute>\\n  </side>\\n  </div>\\n</div>\\n\",\n  \"less\": \".edit-article{\\n  display:flex;\\n  flex-direction: column;\\n  >.edit-toolbar{\\n    padding: 3px;\\n    flex: none;\\n  }\\n  >.edit-body{\\n    flex-grow:1;\\n    display:flex;\\n    flex-direction: row;\\n    >side{\\n      width:200px;\\n      flex: none;\\n      .list-group{\\n        height:400px;\\n        overflow: auto;\\n        position:relative;\\n\\t\\t\\t\\tflex-direction: row;\\n        \\n    \\t\\tflex-wrap: wrap;        \\n        .list-group-item{\\n\\t        padding:0;\\n          width:33%;\\n          img {\\n           pointer-events: none; \\n          }\\n        }\\n      }\\n    }\\n    >article{\\n      flex-grow:1;\\n      jj-diagram {\\n        .w {\\n          border: 0;\\n          img{\\n            height: 100%;\\n            width: auto;            \\n          }\\n        }\\n      }\\n    }\\n    \\n  }\\n}\\n\",\n  \"script\": \"// new JJRresizable(form.sideLeft, {\\\"handles\\\":\\\"e\\\"});   \\nlet selectNode;\\nform.diagram.addEventListener(\\\"selected\\\", e=>{\\n  selectNode = e.detail.node;\\n  form.attribute.activeNode(selectNode, true);\\n  if(selectNode.parentElement.querySelector('t')){\\n  \\tform.nodeText.value = selectNode.parentElement.querySelector('t').innerText;\\n  } else {\\n    selectNode.parentElement.appendChild(document.createElement('t'))\\n    form.nodeText.value = \\\"\\\";\\n  }\\n})\\n\\nform.nodeText.addEventListener(\\\"input\\\", e=>{\\n  selectNode.parentElement.querySelector('t').innerText = form.nodeText.value;\\n})\\n\\nform.addEventListener(\\\"dragstart\\\", e=>{\\n  e.dataTransfer.setData(\\\"text/html\\\", e.target.outerHTML);\\n  e.dataTransfer.setData(\\\"diagram-type\\\", e.target.dataset.diagramType);\\n});\\n\\nform.deleteNode=()=>{\\n  form.diagram.deleteNode();\\n}\\n\\nform.clear=()=>{\\n  form.diagram.clear();\\n}\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n\\n  form.diagram.fromJSON(body.diagram||{});\\n  form.htmlEditor.value   = body.html;\\n  form.scriptEditor.value = body.script;\\n  form.lessEditor.value = body.less||body.css;\\n  form.ruleEditor.value = body.rule;\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\n/* less의 내용은 미리 css로 변환하여 처리함 */\\nform.getSource=()=>{\\n  let uuid = Jinja.global.uuid();\\n  let less = form.lessEditor.value;\\n\\n  return Jinja.dom.lessFileIdCss(less, form.fileInfo.ID)\\n    .then(css=> Jinja.global.string({\\n    \\\"uuid\\\": uuid,\\n    \\\"diagram\\\": form.diagram.toJSON(),\\n    \\\"html\\\": form.htmlEditor.value,\\t\\n    \\\"css\\\": css,\\t\\n    \\\"less\\\":less,\\t\\n    \\\"script\\\": form.scriptEditor.value,\\n    \\\"rule\\\": form.ruleEditor.value\\n\\n  }))\\n    .catch(ex=>{\\n    console.error(ex)\\n  });\\n}\\n\\nform.excute = function() {};\\n\"\n}","URI":"app.640.diagram.studio","TYPE":"page"},{"NAME":"app.640.erd.runtime","BODY":"{\n  \"uuid\": \"a2ea5746e-2225-4f78-a9f4-3db4025bfb09\",\n  \"html\": \"<jj-diagram jj-id=\\\"diagram\\\" class=\\\"mt-1\\\"></jj-diagram>\\n\",\n  \"less\": \"jj-diagram{\\n\\tborder-width: 1px;  \\n}\\n\",\n  \"script\": \"\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n  form.diagram.fromJSON(body.diagram||{});\\n};\\n\"\n}","URI":"app.640.erd.runtime","TYPE":"page"},{"NAME":"app.640.erd.studio","BODY":"{\r\n  \"uuid\": \"011f45b2-0473-4bfe-8769-7f722b750871\",\r\n  \"html\": \"\\t<div class=\\\"btn-group\\\" role=\\\"group\\\" aria-label=\\\"screenCapture\\\">\\n\\t\\t<button class=\\\"btn btn-info btn-sm\\\" jj-command=\\\"clear\\\" title=\\\"clear\\\">\\n\\t\\t\\tClear\\n\\t\\t</button>\\n\\t\\t<button class=\\\"btn btn-info btn-sm\\\" jj-command=\\\"capture\\\" title=\\\"화면캡쳐\\\">\\n\\t\\t\\t<i class=\\\"fa fa-camera\\\"></i> Capture\\n\\t\\t</button>\\n</div>\\n<jj-erd-diagram jj-id=\\\"diagram\\\"></jj-erd-diagram>\\n\",\r\n  \"less\": \"tbody.jj-sortable tr *{\\n  pointer-events: none;\\n}\",\r\n  \"script\": \"\\nform.dbo = new JJBatisDBA();\\n\\nform.clear=()=>{\\n\\tform.diagram.clear();\\n}\\n\\nform.capture=()=>{\\n\\tform.diagram.print();\\n}\\n\\nform.newTable=(x, y, options)=>{\\n  var d = document.createElement(\\\"div\\\");\\n  var cont = document.createElement(\\\"div\\\");\\n  d.appendChild(cont);\\n  var id = jsPlumbUtil.uuid();\\n  \\n  d.className = \\\"w\\\";\\n  //d.id = id;\\n  d.setAttribute(\\\"w-id\\\", Jinja.global.uuid());\\n  d.setAttribute(\\\"objtype\\\", \\\"table\\\");\\n  d.dataset.objdata = Jinja.global.string(options);\\n  d.style.left = x + \\\"px\\\";\\n  d.style.top = y + \\\"px\\\";\\n  \\n  let html = `<table class=\\\"table\\\"><thead><tr><th><label>${options.table}</label></th></tr></thead><tbody>`;\\n  form.dbo.setWorkspace(options.jbatis);\\n  form.dbo.getColumns(options.table)\\n  .then(result=>{\\n    result.rows.forEach(row=>{\\n    \\thtml += `<tr><td>${row.COLUMN_NAME}</td></tr>`;\\t\\n  \\t});\\n    html += `</tbody></table>`;\\n    \\n    cont.innerHTML = (html+ \\\"<div class=\\\\\\\"ep\\\\\\\"></div>\\\");\\n    form.diagram.instance.getContainer().appendChild(d);\\n    form.diagram.initNode(d);\\n    \\n  });\\n  \\n  \\n  \\n  return d;\\n};  \\n\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n  form.diagram.fromJSON(body.diagram||{});};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> Jinja.global.string({\\n  \\\"diagram\\\": form.diagram.toJSON()\\n});\\n\\n\\nform.excute = async function() {\\n  let body = form.getSource();\\n  try{\\n\\t\\tlet json = Jinja.global.json(body);\\n    console.log(\\\"json excute\\\", json);\\n    $topMessage(\\\"정상입니다.\\\");\\n  } catch(ex){\\n    alert(\\\"JSON구조에 문제가 있습니다.\\\\n\\\"+ex);  \\n  }\\n}\\n\\nform.destroy = ()=>{}\\n\"\r\n}","URI":"app.640.erd.studio","TYPE":"page"},{"NAME":"app.640.extlib.studi","BODY":"{\n  \"uuid\": \"a2d3b1556-194a-4e20-a771-3fdbe5377728\",\n  \"html\": \"<div class=\\\"btn-group tool-bar\\\" role=\\\"group\\\" aria-label=\\\"...\\\">\\n  <button class=\\\"btn btn-link btn-sm\\\" jj-command=\\\"builder\\\">Builder</button>\\n</div>\\n<div class=\\\"flex3box d-flex flex-row h-100\\\">\\n  <div jj-id=\\\"leftEdit\\\">\\n    <jj-code-editor jj-id=\\\"scriptEditor\\\" data-mode=\\\"javascript\\\" data-theme=\\\"eclipse\\\"></jj-code-editor>\\n  </div>\\n  <div class=\\\"flex-grow-1\\\">\\n    <jj-code-editor jj-id=\\\"lessEditor\\\" data-mode=\\\"less\\\" data-theme=\\\"eclipse\\\"></jj-code-editor>\\n  </div>\\n</div>\\n\",\n  \"less\": \"article{\\n  display:flex;\\n  flex-direction: column;\\n  height: 100%;\\n  >.tool-bar{\\n    flex: none;\\n    display: inline-block;\\n  }\\n  >.flex3box {\\n    flex-grow:1;\\n    display:flex;\\n    flex-direction: row;\\n\\n    [jj-id=\\\"leftEdit\\\"]{\\n      position: relative;\\n      width: 50%;\\n      padding-right:5px;\\n      .resizer:hover{\\n        background-color: #ccc;\\n      }\\n    }    \\n  }\\n}\\n\",\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body);\\n  form.lessEditor.value   = body.less||body.css;\\n  form.scriptEditor.value = body.script;\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = (bTest)=>{\\n  debugger;\\n  let less = form.lessEditor.value;\\n  return Jinja.global.string({\\n    \\\"html\\\": \\\"\\\",\\t\\n    \\\"css\\\": less,\\t\\n    \\\"less\\\":less,\\t\\n    \\\"script\\\": form.scriptEditor.value\\t\\n  });\\n}\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.XXgetSource = (bTest)=>{\\n  \\n  let less = form.lessEditor.value;\\n  return Jinja.dom.lessThemeCss(less)\\n    .then(css=> Jinja.global.string({\\n    \\\"html\\\": \\\"\\\",\\t\\n    \\\"css\\\": css,\\t\\n    \\\"less\\\":less,\\t\\n    \\\"script\\\": form.scriptEditor.value\\t\\n  }))\\n    .catch(ex=>{\\n    if (bTest){}\\n    else {\\n      console.error(ex);\\n    }\\n  });\\n}\\n\\nform.builder = ()=>{\\n  alert('실험하다');\\n}\\n\\nform.excute = async function() {\\n  form.getSource(true)\\n    .then(body=>$topMessage(\\\"LESS 2 CSS Complete\\\"))\\n    .catch(ex=>{\\n    let msg = `\\nLESS 2 CSS Convert Error\\nmessage: ${ex.message}\\nline: ${ex.line}\\ncolumn: ${ex.column}\\n`;\\n    $topMessage(msg);\\n    console.log(\\\"Component verifyCss\\\",ex);\\n  });\\n\\n  //Jinja.dom.verifyScript(body.script)\\n  let script = `\\n(function(app){\\n'use strict';\\n\\n${body.script}\\n\\n$topMessage(\\\"Script verify Complete\\\");\\n}).call(Jinja)\\n`;\\n  let libScript = document.createElement('script');\\n  libScript.type = 'text/javascript'; \\n  libScript.text = script;\\n  Jinja.appendChild(libScript);\\n};\\n\\nnew JJRresizable(form.leftEdit, {\\n  \\\"handles\\\":\\\"e\\\"\\n});   \"\n}","URI":"app.640.extlib.studio","TYPE":"page"},{"NAME":"app.640.formapp.runtime","BODY":"{\n  \"uuid\": \"a9b84d9c5-1556-4fd9-b3ec-4901bf260ce5\",\n  \"html\": \"<div class=\\\"app-toolbar mb-1 ml-2 mr-2 mt-1\\\">\\n  <div class=\\\"btn-group-sm mb-1 role-developer role-editor\\\" role=\\\"groupa\\\">\\n    <button jj-command=\\\"__save__\\\" hidden  type=\\\"button\\\" class=\\\"btn  btn-outline-success\\\"><i class=\\\"fa fa-save\\\"></i> Save</button>\\n    <button jj-command=\\\"__delete__\\\" hidden  type=\\\"button\\\" class=\\\"btn btn-outline-danger\\\"><i class=\\\"fa fa-remove\\\"></i> Delete</button>\\n    <button jj-command=\\\"#\\\" hidden type=\\\"button\\\" class=\\\"btn btn-outline-primary\\\"><i class=\\\"far fa-copy\\\"></i> Copy</button>\\n  </div>\\n  <div hidden class=\\\"btn-group-sm mb-1 role-developer role-editor\\\" role=\\\"groupa\\\">\\n    <button jj-command=\\\"__approval__('요청')\\\" hidden  type=\\\"button\\\" class=\\\"btn  btn-outline-info approval approval_req \\\"><i class=\\\"fa fa-location-arrow\\\"></i> Request</button>\\n    <button jj-command=\\\"__approval__('취소')\\\" hidden  type=\\\"button\\\" class=\\\"btn  btn-outline-info approval approval_cns\\\"><i class=\\\"fa fa fa-reply\\\"></i> Cancellation</button>\\n    <button jj-command=\\\"__approval__('반려')\\\" hidden  type=\\\"button\\\" class=\\\"btn btn-outline-purple  approval approval_rej\\\"><i class=\\\"fa fa-mail-reply-all\\\"></i> Rejection</button>\\n    <button jj-command=\\\"__approval__('승인')\\\" hidden  type=\\\"button\\\" class=\\\"btn btn-outline-purple  approval approval_apr\\\"><i class=\\\"fa fa fa-paper-plane\\\"></i> Approval</button>\\n  </div>\\n  \\n  <div class=\\\"form-group row\\\">\\n      <div class=\\\"input-group col-12\\\">\\n        <input type=\\\"search\\\" jj-id=\\\"searchEl\\\" class=\\\"form-control\\\" placeholder=\\\"Search Text\\\" aria-label=\\\"Recipient's username\\\" aria-describedby=\\\"basic-addon2\\\">\\n        <div class=\\\"input-group-append\\\">\\n          <button jj-command=\\\"__list__\\\" type=\\\"button\\\"  class=\\\"mr-2 btn btn-outline-primary\\\"><i class=\\\"fa fa-search\\\"></i> Search</button>\\n\\t\\t\\t    <button jj-command=\\\"__filterOn__\\\"  type=\\\"button\\\"  class=\\\"mr-2 btn btn-primary\\\"><i class=\\\"fa fa-filter\\\"></i></button>\\n\\t\\t\\t    <button jj-command=\\\"__new__\\\"  type=\\\"button\\\"  class=\\\"btn btn-outline-purple\\\"><i class=\\\"fa fa-file-o\\\"></i> Add</button>\\n\\t\\t\\t    <button jj-command=\\\"__excel__\\\"  type=\\\"button\\\"  class=\\\"btn btn-outline-purple\\\"><i class=\\\"fas fa-download\\\"></i> Excel</button>\\n          <button jj-command=\\\"__link__\\\"  type=\\\"button\\\"  class=\\\"btn btn-outline-purple\\\"><i class=\\\"fas fa-link\\\"></i> link</button>\\n          <button jj-command=\\\"__embed__\\\"  type=\\\"button\\\"  class=\\\"btn btn-outline-purple\\\"><i class=\\\"fas fa-anchor\\\"></i> embed</button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n<div class=\\\"app-body\\\">\\n  <div class=\\\"app-table d-flex justify-content-center\\\">\\n    <div class=\\\"app-list\\\">\\n    <jj-app-filter jj-id=\\\"__filter__\\\" hidden></jj-app-filter>\\n    <jj-app-grid jj-id=\\\"__dataGrid__\\\"></jj-app-grid>\\n\\n    <div class=\\\"alert alert-light row-count\\\" role=\\\"alert\\\">\\n      ${data.listCount}\\n      <button hidden class=\\\"btn btn-info\\\" jj-command=\\\"__piVot__\\\">\\n        Pivot Table\\n      </button>\\n    </div>\\n  </div>\\n  </div>\\n  <div class=\\\"d-flex justify-content-center\\\">\\n      <jj-data-form jj-id=\\\"__dataForm__\\\" class=\\\"app-from inactive\\\"></jj-data-form>\\n\\n  </div>\\n</div> \\n\",\n  \"less\": \"& > article{\\n  //padding-right: 1rem!important;\\n  //overflow:visible!important;\\n  padding-right: 12px!important;\\n  >.app-toolbar{\\n    display: flex;\\n    -webkit-box-pack: justify!important;\\n    -ms-flex-pack: justify!important;\\n    justify-content: space-between!important;  \\t\\n  }\\n  >.app-body{\\n    .app-list .row-count{\\n      border-radius:0;\\n      padding: 5px 1rem;\\n      font-size: small;   \\n    }\\n  }\\n}\\n\\njj-data-form, .jj-data-form {\\n//   background-color: white;\\n  padding-top: 10px;\\n  border-radius: 3px;\\n\\n  //   display: -webkit-box;\\n  //   display: -ms-flexbox;\\n  //   display: flex;\\n  //   -ms-flex-wrap: wrap;\\n  //   flex-wrap: wrap;\\n  //   align-content: flex-start;\\n  //   margin-right: 0!important;\\n  //   margin-left: 0!important;\\n  &.inactive{\\n    * {\\n      pointer-events: none;\\n    }\\n    &::before{\\n      display: block;\\n      content:\\\"Click on the list and enter it.\\\";\\n      text-align: center;\\n      font-size:18px;\\n      width: 100%;\\n      color: var(--danger);\\n    }\\n  }\\n  >* {\\n    float: left;\\n    width:100%;\\n  }\\n  .tab-content>.tab-pane.active {\\n    display: inline-block;\\n    width: 100%;\\n  }        \\n  .tab-content {\\n    background-color: var(--white);\\n  }  \\n  jj-item-button {\\n    margin-top: 1.8rem;\\n  }     \\n}\\n\\njj-app-grid table > tbody{\\n  background-color: white;\\n  color: black;  \\n  > tr.selected {\\n    background-color: var(--gray) !important;\\n    color: var(--white) !important;\\n  }\\n}\\n\\n.btn-group>.dropdown-toggle{\\n  visibility:hidden;\\n}\\n\\njj-app-filter .list-group-item{\\n  background-color: #3bafda!important;\\n  code{\\n    color:#000!important;\\n  }\\n}\\n\\njj-app-grid > .grid-warp > table > tbody > tr.selected {\\n  background-color: var(--gray) !important;\\n  color: var(--white) !important;\\n}\\n\\njj-app-grid > .fix-grid-warp > table > tbody > tr.selected {\\n  background-color: var(--gray) !important;\\n  color: var(--white) !important;\\n}\\n\\n.app-list{\\n  width:99%;\\n}\",\n  \"script\": \"/**\\n * 페이지는 내장명령과 동일하기 때문에\\n * 공통의 로직만 구현한다\\n * workspaceMeta.options.links.linkAppUri\\n */\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\n\\nlet __tableUrl__;\\n\\nform.__datainfo__ = {\\n  \\\"workspace\\\":\\\"\\\",\\n  \\\"table\\\":\\\"\\\",\\n  \\\"keyField\\\":\\\"\\\",\\n  \\\"uri\\\": \\\"\\\",\\n  \\\"keyValue\\\":\\\"\\\"\\n};\\n\\nform.__link__=()=>{\\n  if(workspaceMeta.options.links.linkAppUri){\\n  \\talert(workspaceMeta.options.links.linkAppUri+\\\"?q=\\\"+form.fileInfo.ID);\\n  } else {\\n    alert(\\\"The value of links.linkAppUri does not exist in the workspace settings information.\\\");\\n  }\\n}\\nform.__embed__=()=>{\\n  if(workspaceMeta.options.links.linkAppUri){\\n    let html = `&lt;iframe \\\\n\\n src=&quot;https://myapps.appspeed.net/apps/includeApps?q=${form.fileInfo.ID}&quot;\\n width=&quot;100%&quot; height=&quot;450&quot;\\n style=&quot;border:0;&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;\\n`\\n  \\talert(html);\\n    Jinja.store.clipBoard(html);\\n  } else {\\n    alert(\\\"The value of links.linkAppUri does not exist in the workspace settings information.\\\");\\n  }\\n}\\n\\nform.__config__={\\n  \\\"data\\\":{\\n    \\\"list\\\":[],\\n    \\\"sorts\\\":[],\\n    \\\"listCount\\\":0,\\n    \\\"info\\\": {}\\n  }\\n};\\n\\n\\n// form.__dataGrid__.updateData([\\n//   {\\\"col1\\\": \\\"data1\\\", \\\"col2\\\": \\\"data2\\\"}\\n// ])\\n\\nform.searchEl.addEventListener(\\\"keydown\\\", e=>{\\n  if(e.keyCode==13){\\n    form.__dataGrid__.list(form.searchEl.value);\\n  }\\n})\\n\\nform.__dataGrid__.addEventListener(\\\"trClick\\\", e=>{\\n  let key = e.detail.row[form.__datainfo__.keyField];\\n  //form.read(key);\\n  form.__config__.data.info = e.detail.row;\\n  form.__dataForm__.classList.remove('inactive');\\n})\\n\\nform.__dataGrid__.addEventListener(\\\"tableChange\\\", e=>{\\n  let msg =`\\nNumber of data: ${e.detail.crud.length},\\nSelected:${e.detail.crud.check} \\nAdded:${e.detail.crud.C} \\nModified:${e.detail.crud.U} \\n`;\\n  form.__config__.data.listCount= msg;\\n  form.querySelector(`[jj-command=\\\"__save__\\\"]`).hidden = ((e.detail.crud.C + e.detail.crud.U) == 0);\\n  form.querySelector(`[jj-command=\\\"__delete__\\\"]`).hidden = e.detail.crud.check == 0;\\n  \\n  form.querySelector(`.approval_req`).hidden = e.detail.crud.check == 0;\\n  form.querySelector(`.approval_cns`).hidden = e.detail.crud.check == 0;\\n  form.querySelector(`.approval_rej`).hidden = e.detail.crud.check == 0;\\n  form.querySelector(`.approval_apr`).hidden = e.detail.crud.check == 0;\\n\\n\\n})\\n\\nform.__filter__.addEventListener(\\\"changeFilter\\\", e=>{\\n  form.__dataGrid__.list(e.detail.filter);\\n});  \\n\\n\\nform.__dataForm__.addEventListener(\\\"input\\\", e=>{\\n  form.__dataGrid__.refresh();\\n})\\n\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n  \\n  if(!body.columns){\\n    alert(\\\"FORM이 정상적으로 저장되지 않았습니다. 폼수정을 통해서 수정해주시기 바랍니다\\\");\\n    form.querySelector('article').hidden = true;\\n    return;\\n  }\\n  \\n  if(workspaceMeta.options.appInfo.jbatisId){\\n    body.datainfo.workspace = workspaceMeta.options.appInfo.jbatisId;\\n  }  \\n  form.body = body;\\n\\n//   if(body.forminfo) __formSet__(body);\\n\\n//   form.__dataForm__.innerHTML= body.html;\\n//   form.bindCss(body);\\n//   form.bindScript(body);\\n\\n  /** \\n   * 리스트가 설정된 경우만 동작\\n   */\\n  if(body.columns.length){\\n    __tableSet__(body);\\n    //     __readSet__(body);\\n  } else {\\n    form.querySelector('.btn-group').hidden = true;\\n    form.querySelector('.app-list').hidden = true;\\n  }\\n\\n  if(body.forminfo) __formSet__(body);\\n\\n  form.__dataForm__.innerHTML= body.html;\\n  form.bindCss(body);\\n  form.bindScript(body);\\n  \\n  new JJReact(form, form.__config__);\\n\\n};\\n\\nform.__piVot__ =()=>{\\n  JJFormModal.open(\\\"pivotView.640.uc\\\", {\\n    data: form.__dataGrid__.getData(),\\n    gridEl: form.__dataGrid__\\n  })\\n}\\n\\nfunction __formSet__(body){\\n  if(body.forminfo.className){\\n    form.__dataForm__.classList.add(body.forminfo.className);\\n  }\\n  if(body.forminfo.labelWidth){\\n    form.__dataForm__.dataset.labelWidth= body.forminfo.labelWidth;\\n  }\\n}\\n\\n\\n\\n// 폼을 구성을 마친뒤에 react설정을 실시한다\\nfunction __tableSet__(body){\\n  let colModel = [];\\n  body.columns.forEach(item=>{\\n    colModel.push({\\n      \\\"label\\\": item.COLUMN_LABEL, \\n      \\\"field\\\":item.COLUMN_NAME,\\n      \\\"domain\\\":item.COLUMN_DOMAIN,\\n      \\\"code\\\":item.COLUMN_CODE,\\n      \\\"width\\\":item.COLUMN_WIDTH ? item.COLUMN_WIDTH+'px':'100px',\\n      \\\"isHiddenColumn\\\": !(item.COLUMN_SHOW==\\\"true\\\")\\n    });\\n  })\\n\\n  // 만일 서버기반의 코드가 있다면 코드정보로 생성하고 \\n  // 그리드를 초기화 한다.\\n  if(body.lookupColumns && Object.keys(body.lookupColumns)){\\n\\n    let promiseArr = [];\\n    Object.keys(body.lookupColumns).forEach(key=>{\\n\\t    promiseArr.push(Jinja.code.applinkCodeSet(body.lookupColumns[key]));\\n      \\n      if(colModel.filter(col=>col.field==key).length==1){\\n        colModel.filter(col=>col.field==key)[0].code = body.lookupColumns[key];\\n      }\\n    })\\n\\n    Promise.all(promiseArr).then((values) => {\\n      form.__dataGrid__.init({\\n        \\\"autoFind\\\": true,\\n        \\\"fixColIndex\\\":2,  \\n        \\\"dataSource\\\":{\\n          \\\"workspace\\\": body.datainfo.workspace,\\n          \\\"table\\\": body.datainfo.table,\\n          \\\"keyField\\\": body.datainfo.keyField,\\n          \\\"displayField\\\":body.datainfo.displayField||body.datainfo.keyField,\\n          \\\"sorts\\\": body.sorts||[],\\n          \\\"searchs\\\": body.searchs||[]\\n        },\\n        \\\"colModel\\\":colModel,\\n        //\\\"lookupColumns\\\": body.lookupColumns\\n      })\\n\\n    });  \\n\\n\\n\\n  } \\n  else {\\n    form.__dataGrid__.init({\\n      \\\"autoFind\\\": true,\\n      \\\"fixColIndex\\\":2,  \\n      \\\"dataSource\\\":{\\n        \\\"workspace\\\": body.datainfo.workspace,\\n        \\\"table\\\": body.datainfo.table,\\n        \\\"keyField\\\": body.datainfo.keyField,\\n        \\\"displayField\\\":body.datainfo.displayField||body.datainfo.keyField,\\n        \\\"sorts\\\": body.sorts||[],\\n        \\\"searchs\\\": body.searchs||[]\\n      },\\n      \\\"colModel\\\":colModel,\\n      \\\"lookupColumns\\\": body.lookupColumns\\n    })\\n\\n  }\\n\\n\\n\\n\\n  form.__filter__.init({\\n    \\\"colModel\\\":colModel,\\n    \\\"dataGrid\\\":form.__dataGrid__\\n  })\\n\\n\\n}\\n\\n\\n\\nform.__new__=()=>{\\n  form.__dataGrid__.appendRow();\\n}\\n\\nform.__list__=()=>{\\n  form.__dataGrid__.list(form.searchEl.value);\\n}\\n\\nform.__excel__=()=>{\\n  form.__dataGrid__.exportexcel(form.fileInfo.NAME);\\n}\\n\\nform.__save__=()=>{\\n  form.__dataGrid__.save()\\n    .then(()=>alert(\\\"Saved\\\"));\\n}\\n\\nform.__filterOn__=()=>{\\n  form.__filter__.hidden = !form.__filter__.hidden;\\n}\\n\\nform.__delete__=()=>{\\n  form.__dataGrid__.delete()\\n    .then(()=>alert(\\\"Deleted\\\"));\\n}\\n\\nform.__approval__=(status)=>{\\n  let rows = form.__dataGrid__.getData();\\n  let selectedRows = rows.filter(row=>row._checked);\\n          \\n  if(selectedRows.length){\\n    let promiseList =[];\\n    let sendData = {\\n      \\\"APPV_STATUS\\\": status\\n    };\\n    selectedRows.forEach(row=>{\\n      let keyValue = row[form.body.datainfo.keyField];\\n      let svcUri ;\\n      if([\\\"Request\\\",\\\"Cancellation\\\"].includes(status)){\\n      \\tsvcUri = `/v7/jbatis/${form.body.datainfo.workspace}/rest/approval/req/${form.body.datainfo.table}/${form.body.datainfo.keyField}/${keyValue}`;\\n      } else {\\n      \\tsvcUri = `/v7/jbatis/${form.body.datainfo.workspace}/rest/approval/sign/${form.body.datainfo.table}/${form.body.datainfo.keyField}/${keyValue}`;\\n      }\\n      promiseList.push(Jinja.ajax.patch(svcUri, sendData ));\\n    })\\n    Promise.all(promiseList).then(results=>{\\n      form.__list__();\\n    })      \\n  }\\n  \\n  \\n  \\n}\"\n}","URI":"app.640.formapp.runtime","TYPE":"page"},{"NAME":"app.640.formapp.studio","BODY":"{\n  \"uuid\": \"a35f9b1dd-cdf6-41ab-835d-9fda6d94e12b\",\n  \"html\": \"<div jj-id=\\\"editForm\\\" class=\\\"edit-article bg-white\\\">\\n\\n  <div class=\\\"edit-body\\\">\\n    <side jj-id=\\\"sideLeft\\\" class=\\\"mr-1 bg-light pt-1\\\">\\n      <div class=\\\"d-flex justify-content-center row\\\">\\n        <div class=\\\"btn-group w-75 pt-2 mb-2 d-flex justify-content-center col-10 pr-1 pl-1\\\" role=\\\"group\\\" aria-label=\\\"Basic example\\\">\\n          <button jj-command=\\\"clear\\\" class=\\\"btn btn-secondary\\\" aria-command=\\\"save\\\" title=\\\"Clear all form item\\\"><i class=\\\"far fa-trash-alt d-block\\\" aria-hidden=\\\"true\\\"></i> Clear form</button>\\n          <button jj-command=\\\"deleteNode\\\" class=\\\"btn btn-secondary\\\" aria-command=\\\"save\\\" title=\\\"Remove form item\\\"><i class=\\\"fas fa-times d-block\\\" aria-hidden=\\\"true\\\"></i> Remove this</button>\\n          <button jj-command=\\\"appSave\\\" class=\\\"btn btn-primary\\\" aria-command=\\\"save\\\" title=\\\"Form Save\\\"><i class=\\\"far fa-save\\\" aria-hidden=\\\"true\\\"></i> Save</button>\\n        </div>\\n      </div>\\n\\n      <jj-form-include class=\\\"header-none\\\" uri=\\\"jj-item-field.uc\\\"></jj-form-include>\\n    </side>\\n    <article class=\\\"mt-2\\\">\\n      <div class=\\\"code-tabContent jj-tabs-wrap\\\">\\n        <ul class=\\\"nav nav-tabs jj-tabs\\\">\\n          <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link active\\\" data-target=\\\"tab0\\\" href=\\\"#\\\">form</a></li>\\n          <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link\\\" data-target=\\\"tab1\\\" href=\\\"#\\\">script</a></li>\\n          <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link\\\" data-target=\\\"tab2\\\" href=\\\"#\\\">less</a></li>\\n          <!-- \\n          <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link\\\" data-target=\\\"tab4\\\" href=\\\"#\\\">bizModel</a></li>\\n          <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link\\\" data-target=\\\"tab5\\\" href=\\\"#\\\">List</a></li>\\n          <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link\\\" data-target=\\\"tab3\\\" href=\\\"#\\\">html</a></li>\\n           -->\\n        </ul>\\n        <div class=\\\"tab-content p-0 border-0\\\">\\n          <div role=\\\"tabpanel\\\" data-target=\\\"tab0\\\" class=\\\"tab-pane active overflow-hidden\\\">\\n            <jj-vhtml-editor class=\\\"jj-data-form row\\\" jj-id=\\\"vhtmlEditor\\\"></jj-vhtml-editor>\\n          </div>\\n          <div role=\\\"tabpanel\\\" data-target=\\\"tab1\\\" class=\\\"tab-pane active\\\">\\n            <jj-code-editor data-mode=\\\"javascript\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"scriptEditor\\\"></jj-code-editor>\\n          </div>\\n          <div role=\\\"tabpanel\\\" data-target=\\\"tab2\\\" class=\\\"tab-pane active\\\">\\n            <jj-code-editor data-mode=\\\"less\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"lessEditor\\\"></jj-code-editor>\\n          </div>\\n          <!--           \\n          <div role=\\\"tabpanel\\\" data-target=\\\"tab3\\\" class=\\\"tab-pane active\\\">\\n            <div class=\\\"btn-group\\\">\\n              <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"exportHtml\\\"><i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> export HTML</button>\\n              <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"importHtml\\\"><i class=\\\"fa fa-upload\\\" aria-hidden=\\\"true\\\"></i> import HTML</button>\\n            </div>\\n            <jj-code-editor data-mode=\\\"html\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"htmlEditor\\\"></jj-code-editor>\\n          </div>\\n          <div role=\\\"tabpanel\\\" data-target=\\\"tab4\\\" class=\\\"tab-pane active\\\">\\n            <div class=\\\"btn-group\\\">\\n              <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"exportRule\\\"><i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> export Rule</button>\\n              <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"importRule\\\"><i class=\\\"fa fa-upload\\\" aria-hidden=\\\"true\\\"></i> import Rule</button>\\n            </div>\\n            <jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"ruleEditor\\\"></jj-code-editor>\\n          </div>\\n\\n          <div role=\\\"tabpanel\\\" data-target=\\\"tab5\\\" class=\\\"tab-pane active\\\">\\n            <h4>\\n              Lists:\\n            </h4>\\n            <ul jj-id=\\\"listColumns\\\" class=\\\"list-group list-colums\\\" j-for=\\\"row in data.lists\\\" j-page=300>\\n              <li class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-is-hidden-column=\\\"false\\\" data-index=\\\"${row._index}\\\" data-type='${row.COLUMN_TYPE}' data-label='${row.COLUMN_NAME}'>\\n                <i class=\\\"fa fa-code mr-1\\\" aria-hidden=\\\"true\\\"></i> ${row.COLUMN_NAME} / ${row.COLUMN_TYPE}\\n                <button j-method=\\\"removeRow(${row._index})\\\" type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\">\\n                  <span aria-hidden=\\\"true\\\">×</span>\\n                </button>\\n                <div >\\n                  type: \\n                  <select>\\n                    <option>text</option>\\n                    <option>textarea</option>\\n                    <option>select</option>\\n                    <option>radio</option>\\n                  </select>\\n                  readonly:\\n                  <input type=\\\"checkbox\\\" class=\\\"custom-toggle\\\">\\n                </div>\\n              </li>\\n            </ul>\\n\\n          </div>\\n           -->\\n        </div> \\n      </div>     \\n    </article>\\n    <side jj-id=\\\"sideRight\\\" class=\\\"ml-1 bg-light pt-2\\\">\\n\\n      <div class=\\\"edit-toolbar d-flex justify-content-end pr-2\\\">\\n\\n        <!--     <div class=\\\"btn-group float-right\\\" role=\\\"group\\\" aria-label=\\\"Basic example\\\">\\n      <button jj-command=\\\"formAttrShow\\\" class=\\\"btn btn-secondary btn-sm\\\" aria-command=\\\"save\\\" title=\\\"새로작성\\\"><i class=\\\"fa fa-file-o\\\" aria-hidden=\\\"true\\\"></i></button>\\n    </div> -->\\n      </div>\\n\\n      <div class=\\\"d-flex justify-content-center row setting-box\\\">\\n        <div class=\\\"attr-tabContent jj-tabs-wrap col-11\\\">\\n          <ul class=\\\"nav nav-tabs jj-tabs\\\">\\n            <li class=\\\"nav-item\\\"><a class=\\\"nav-link active\\\" href=\\\"#\\\">FIELD</a></li>\\n            <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\">GRID</a></li>\\n            <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\">FORM</a></li>\\n          </ul>\\n          <div class=\\\"tab-content d-flex justify-content-center border-0\\\"> \\n            <div role=\\\"tabpanel\\\" class=\\\"tab-pane active\\\">\\n              <jj-form-include jj-id=\\\"attrInc\\\" class=\\\"header-none\\\" uri=\\\"jj-item-attr.uc\\\"></jj-form-include>\\n            </div>\\n            <div role=\\\"tabpanel\\\" class=\\\"tab-pane \\\">\\n              <div jj-id=\\\"formInfo\\\" class=\\\"p-1 d-flex flex-column h-100\\\">\\n                <h5 jj-command=\\\"findTable\\\" >Source:</h5>\\n                <div>\\n                  <label>${data.datainfo.workspace}.${data.datainfo.table}.${data.datainfo.keyField}</label>\\n                </div>\\n                <h5>\\n                  Columns: <button hidden jj-command=\\\"tableSync\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-sm btn-rounded float-right\\\">Sync</button>\\n                </h5>\\n                <label>Modify(Double Click)</label>\\n                <ul jj-id=\\\"listColumns\\\" class=\\\"list-group  columns\\\" j-for=\\\"row in data.columns\\\" j-page=300>\\n                  <li class=\\\"list-group-item\\\" index='${row._index}'\\n                      draggable='true'\\n                      data-item='columns'\\n                      data-show='${row.COLUMN_SHOW||\\\"true\\\"}'\\n                      data-domain='${row.COLUMN_DOMAIN}'\\n                      data-label='${row.COLUMN_LABEL}'\\n                      data-name='${row.COLUMN_NAME}'\\n                      data-code='${row.COLUMN_CODE}'\\n                      data-width='${row.COLUMN_WIDTH}'\\n                      title=\\\"column:${row.COLUMN_NAME}\\\\n label:${row.COLUMN_LABEL}\\\\n type:${row.COLUMN_DOMAIN}\\\">\\n                    <i class=\\\"fa fa-exchange fa-rotate-90\\\"></i>${row.COLUMN_LABEL} / ${row.COLUMN_DOMAIN}\\n                    <i class=\\\"fa fa-show float-right\\\" aria-hidden=\\\"true\\\"></i>\\n                    <!-- \\n                  <div class=\\\"detail\\\">\\n                    <input type=\\\"text\\\" data-bind=\\\"row.COLUMN_CODE\\\">\\n                  </div>\\n                   -->\\n                  </li>\\n                </ul>\\n                <h5>Search:</h5>\\n                <ul jj-id=\\\"searchColumns\\\" class=\\\"list-group search\\\" j-for=\\\"row in data.searchs\\\" j-page=30>\\n                  <li class=\\\"list-group-item\\\" data-name='${row.COLUMN_NAME}' data-order-type='${row.ORDER_TYPE}'>\\n                    <i class=\\\"fa sort-bar fa-sort-alpha-asc\\\"></i>${row.COLUMN_NAME} / ${row.COLUMN_DOMAIN}\\n                    <i class=\\\"fa fa-remove float-right\\\" aria-hidden=\\\"true\\\"  jj-command=\\\"removeSearch('${row._index}')\\\"></i>\\n                  </li>\\n                </ul>\\n                <h5>Sort:</h5>\\n                <ul jj-id=\\\"sortColumns\\\" class=\\\"list-group sort\\\" j-for=\\\"row in data.sorts\\\" j-page=30>\\n                  <li class=\\\"list-group-item\\\" data-name='${row.COLUMN_NAME}' data-order-type='${row.ORDER_TYPE}'>\\n                    <i class=\\\"fa sort-bar fa-sort-alpha-asc\\\"></i>${row.COLUMN_NAME} / ${row.COLUMN_DOMAIN}\\n                    <i class=\\\"fa fa-remove float-right\\\" aria-hidden=\\\"true\\\" jj-command=\\\"removeSort('${row._index}')\\\"></i>\\n                  </li>\\n                </ul>\\n              </div>\\n            </div>\\n            <div role=\\\"tabpanel\\\" class=\\\"tab-pane \\\">\\n              <!--               <div class=\\\"form-attr\\\"> -->\\n              <!--                 <button jj-command=\\\"formAttrShow\\\" class=\\\"btn btn-secondary btn-sm\\\" aria-command=\\\"save\\\" title=\\\"새로작성\\\"><i class=\\\"fa fa-file-o\\\" aria-hidden=\\\"true\\\"></i></button> -->\\n\\n              <jj-data-form class=\\\"p-2\\\">\\n                <jj-item-text data-label=\\\"Title\\\" \\n                              data-type=\\\"text\\\" \\n                              data-bind=\\\"data.forminfo.title\\\" class=\\\"form-group\\\" required></jj-item-text>\\n                <jj-item-text data-label=\\\"Label Size\\\" \\n                              data-type=\\\"text\\\" \\n                              data-placeholder=\\\"Please enter in pixels. ex) 100px\\\"\\n                              data-bind=\\\"data.forminfo.labelWidth\\\" class=\\\"form-group\\\"></jj-item-text>\\n                <jj-item-select data-label=\\\"Form Type\\\" \\n                                data-code=\\\"form-basic,form-horizontal,form-box\\\"\\n                                data-bind=\\\"data.forminfo.className\\\" class=\\\"form-group\\\" required></jj-item-select>\\n              </jj-data-form>\\n\\n            </div>\\n          </div>\\n          <!--         </div> -->\\n        </div>\\n      </div>\\n\\n\\n    </side>\\n  </div>\\n</div>\\n<div class=\\\"view-article\\\"></div>\\n\\n\\n\",\n  \"less\": \"&>article{\\n  padding:0!important;\\n}\\n.edit-article{\\n  position: relative;\\n  height: 100%;\\n  overflow:hidden;\\n\\n  >.edit-toolbar{\\n    position: relative;\\n    padding: 4px;\\n    height:50px;\\n  }\\n  >.edit-body{\\n    position: absolute;\\n    top:0;\\n    bottom:0;\\n    left:0; \\n    right:0;\\n    display:flex;\\n    flex-direction: row;\\n\\n    >side{\\n      flex: none;\\n      &[jj-id=\\\"sideLeft\\\"]{\\n        width:300px;  \\n        background-color: white;\\n        overflow: hidden;\\n        display: flex;\\n        flex-direction: column;\\n        .d-flex{\\n          flex: none;\\n          \\n        }\\n        jj-form-include{\\n          flex-grow: 1;\\n          height:1%;\\n        }\\n      }\\n      &[jj-id=\\\"sideRight\\\"]{\\n        width:300px;  \\n      }\\n    }\\n    >article{\\n      flex-grow:1;\\n      jj-vhtml-editor{\\n        border:none;\\n        //         padding:10px;\\n        margin-left:0.2px;\\n        .edit-pane{\\n          overflow: hidden;\\n        }\\n        jj-resize-box{\\n          outline: 2px solid var(--blue);\\n        }\\n        .area-editor{\\n          display: inline-block;\\n          width: 100%;\\n          margin-bottom: 50px;\\n          min-height: 300px;\\n          height: auto;\\n          //           display: -webkit-box;\\n          //           display: -ms-flexbox;\\n          //           display: flex;\\n          //           -ms-flex-wrap: wrap;\\n          //           flex-wrap: wrap;\\n          //           align-content: flex-start;\\n          // \\t\\t\\t\\t\\twidth: 100%;\\n          //           [class*='col-']{\\n          //             float:left;\\n          //           }\\n          > * {\\n            float:left;\\n            width:100%;\\n          }  \\n\\n          jj-item-button {\\n            margin-top: 1.8rem;\\n          }          \\n\\n        } \\n\\n        .tab-content>.tab-pane.active {\\n          display: inline-block;\\n          width: 100%;\\n        }  \\n\\n        .tab-content>.tab-pane::empty{\\n          min-height:100px;\\n        }\\n\\n      }\\n\\n    }\\n\\n  }\\n  >.form-attr{\\n    position: absolute;\\n    top:0;\\n    bottom:0;\\n    width:350px;\\n    background-color: white;\\n    right:-400px;\\n    z-index:2;\\n  }\\n  &.side-on{\\n    >.form-attr{\\n      right:0;\\n    }\\n  }\\n}\\n.list-group.fields{\\n  height:100%;\\n  overflow:auto;\\n  .list-group-item{\\n    padding:3px;\\n    img{\\n      //    height:32px;\\n    }\\n  }\\n}\\n.list-group.columns{\\n  overflow: auto;\\n  .list-group-item {\\n    i.fa:last-child::before{\\n      content: \\\"\\\\f06e\\\";\\n    }\\n    &[data-show=\\\"false\\\"]{\\n      i.fa:last-child::before{\\n        content: \\\"\\\\f070\\\";    \\n      }\\n    }\\n  }\\n\\n}\\n.list-group.sort, .list-group.search{\\n  overflow: auto;\\n  min-height:100px;\\n  border: 1px solid #ccc;\\n}\\n.view-article{\\n  display: none;\\n  background-color: yellow;\\n  height: 100%;\\n}\\n\\n&.excute{\\n  .edit-article{\\n    display: none;\\n  }\\n  .view-article{\\n    display: block;\\n  }\\n}\\n\\n.header-none{\\n  padding-right:5px;\\n}\\n\\n.sideLeft{\\n  background: #ccc;\\n}\\n\\n.edit-body>.jj-tabs-wrap{\\n  height:80%;\\n}\\n\\n.jj-data-form{\\n  height:80%;\\n}\\n\\n.setting-box{\\n  height:99.5%;\\n}\",\n  \"script\": \"setTimeout(() => {\\n  form.querySelector(\\\".nav-link.active\\\").click();  \\n}, 300);\\n\\nlet dbo = new JJBatisDBA();\\n\\nform.config = {\\n  \\\"data\\\": {\\n    \\\"datainfo\\\": {\\n      \\\"workspace\\\": \\\"\\\",\\n      \\\"table\\\": \\\"\\\",\\n      \\\"keyField\\\": \\\"\\\"\\n    },\\n    \\\"columns\\\": [],\\n    \\\"sorts\\\": [],\\n    \\\"searchs\\\": [],\\n    \\\"lists\\\": [],\\n    \\\"keymap\\\": [],\\n    \\\"forminfo\\\": {\\n      \\\"title\\\": \\\"\\\",\\n      \\\"labelWidth\\\": \\\"\\\",\\n      \\\"className\\\": \\\"\\\",\\n    }\\n  },\\n  \\\"methods\\\": {\\n    \\\"removeRow\\\": function(index) {\\n      this.data.lists.removeIndex(index);\\n    }\\n  }\\n};\\n\\nnew JJReact(form.editForm, form.config);\\n\\nnew JJSortable(form.listColumns, {\\n  \\\"handle\\\": \\\".fa-exchange\\\"\\n});\\n\\nnew JJSortable(form.sortColumns, {\\n  \\\"handle\\\": \\\".sort-bar\\\"\\n});\\n\\nform.sideRight.addEventListener(\\\"dragstart\\\", e=> {\\n  if (!e.target.dataset.item) {\\n    e.stopImmediatePropagation(); /* 현재 테그의 이벤트도 중지하고 상위전달도 중지 */\\n    e.stopPropagation(); /* 이벤트 상위전파 취소 */\\n    e.preventDefault();\\n    return;\\n  }\\n  \\n  let exportHtml;\\n  let objType = \\\"columns\\\";\\n\\n  switch(e.target.dataset.domain) {\\n    case \\\"date\\\": \\n    case \\\"datetime\\\": \\n    case \\\"DATE\\\": \\n    case \\\"DATETIME\\\": \\n      exportHtml = `<jj-item-text data-label=\\\"${e.target.dataset.label}\\\" data-type=\\\"date\\\" data-bind=\\\"data.info.${e.target.dataset.name}\\\" class=\\\"form-group col-md-12\\\"></jj-item-text>`;\\n      break;\\n    case \\\"int\\\": \\n    case \\\"float\\\": \\n    case \\\"INT\\\": \\n    case \\\"FLOAT\\\": \\n      exportHtml = `<jj-item-text data-label=\\\"${e.target.dataset.label}\\\" data-type=\\\"number\\\" data-bind=\\\"data.info.${e.target.dataset.name}\\\" class=\\\"form-group col-md-12\\\"></jj-item-text>`;\\n      break;\\n    default: \\n      exportHtml = `<jj-item-text data-label=\\\"${e.target.dataset.label}\\\" data-type=\\\"text\\\" data-bind=\\\"data.info.${e.target.dataset.name}\\\" class=\\\"form-group col-md-12\\\"></jj-item-text>`;\\n      break;\\n  }\\n\\n  e.dataTransfer.setData(\\\"text/html\\\", exportHtml);\\n  e.dataTransfer.setData(\\\"text/json\\\", Jinja.global.string(e.target.dataset));\\n  e.dataTransfer.setData(\\\"objType/application\\\", objType);\\n});\\n\\nform.searchColumns.addEventListener(\\\"drop\\\", e => {\\n  e.preventDefault();\\n  \\n  let columnInfo = e.dataTransfer.getData(\\\"text/json\\\");\\n  \\n  if (columnInfo) columnInfo = Jinja.global.json(columnInfo);\\n  if (columnInfo && columnInfo.item==\\\"columns\\\") {\\n    form.config.data.searchs.push({\\n      \\\"COLUMN_NAME\\\": columnInfo.name,\\n      \\\"COLUMN_DOMAIN\\\": columnInfo.domain,\\n      \\\"SEARCH_TYPE\\\": \\\"LIKE\\\"\\n    });\\n  }\\n});\\n\\nform.searchColumns.addEventListener(\\\"dragover\\\", e => {\\n  e.preventDefault();  \\n});\\n\\nform.sortColumns.addEventListener(\\\"drop\\\", e => {\\n  e.preventDefault();\\n  \\n  let columnInfo = e.dataTransfer.getData(\\\"text/json\\\");\\n  \\n  if (columnInfo) columnInfo = Jinja.global.json(columnInfo);\\n  if (columnInfo && columnInfo.item == \\\"columns\\\") {\\n    form.config.data.sorts.push({\\n      \\\"COLUMN_NAME\\\": columnInfo.name,\\n      \\\"COLUMN_DOMAIN\\\": columnInfo.domain,\\n      \\\"ORDER_TYPE\\\": \\\"ASC\\\"\\n    });\\n  }\\n});\\n\\nform.sortColumns.addEventListener(\\\"dragover\\\", e => {\\n  e.preventDefault();\\n});\\n\\nform.listColumns.addEventListener(\\\"click\\\", e => {\\n  if (e.target.matches('.fa-show')) {\\n    if (e.target.parentElement.matches('[data-show=\\\"false\\\"]')) {\\n      e.target.parentElement.dataset.show = true;\\n    } else {\\n      e.target.parentElement.dataset.show = false;\\n    }\\n  }\\n});\\n\\nform.listColumns.addEventListener(\\\"dragover\\\", e => {\\n  e.preventDefault();\\n});\\n\\nform.listColumns.addEventListener(\\\"drop\\\", e => {\\n  let transData = e.dataTransfer.getData(\\\"text/json\\\");\\n  \\n  if (transData) {\\n    let data = Jinja.global.json(transData);\\n\\n    form.config.data.lists.push({\\n      \\\"COLUMN_LABEL\\\": data.label,\\n      \\\"COLUMN_NAME\\\": data.label,\\n      \\\"COLUMN_DOMAIN\\\": data.domain,\\n      \\\"COLUMN_WIDTH\\\": data.width\\n    });\\n  }\\n});\\n\\n/**\\n * drop 대상에 맞게 크기 조절\\n */\\nform.vhtmlEditor.on(\\\"dropAction\\\", function(e) {\\n  let result = e.dataTransfer.getData(\\\"text/html\\\");\\n  let objtype = e.dataTransfer.getData(\\\"objtype/application\\\");\\n  let domain = e.dataTransfer.getData(\\\"domain/application\\\");\\n  \\n  if (domain && form.config.data.datainfo.table) {\\n    form.vhtmlEditor.dropHolder.hidden = true;\\n\\t\\t\\n    return form.newColumn({\\n      'domain': domain\\n    }).then(data => {\\n      let elBox = document.createElement('div');\\n      \\n      elBox.innerHTML = result;\\n      \\n      elBox.lastElementChild.setAttribute('data-bind', 'data.info.' + data.COLUMNS[0].COLUMN_NAME);\\n      elBox.lastElementChild.setAttribute('data-label', data.COLUMNS[0].COLUMN_LABEL);\\n\\t\\t\\t\\n      if (data.COLUMNS[0].COLUMN_CODE) {\\n      \\telBox.lastElementChild.setAttribute('data-code', data.COLUMNS[0].COLUMN_CODE);\\n      }\\n\\n      result = elBox.innerHTML;\\n\\n      if (e.target.classList.contains('col-md-6')) {\\n        result = result.replace('col-md-12', 'col-md-6');\\n      } else if (e.target.classList.contains('col-md-4')) {\\n        result = result.replace('col-md-12', 'col-md-4');\\n      }\\n\\n      return result;\\n    });\\n  } else {\\n    if (e.target.classList.contains('col-md-6')) {\\n      result = result.replace('col-md-12', 'col-md-6');\\n    } else if (e.target.classList.contains('col-md-4')) {\\n      result = result.replace('col-md-12', 'col-md-4');\\n    }\\n  }\\n  \\n  //alert(\\\"드롭후에 결정하기\\\");\\n  return result;\\n});\\n\\nform.vhtmlEditor.addEventListener(\\\"selected\\\", e => {\\n  form.attrInc.getFieldOption(e.target);\\n});\\n\\nform.vhtmlEditor.addEventListener(\\\"unselected\\\", e => {\\n  form.attrInc.clearFieldOption();\\n});\\n\\nform.listColumns.addEventListener(\\\"dblclick\\\", e => {\\n  if (e.target.matches('.list-group-item')) {\\n    let index = e.target.getAttribute('index');\\n    let col = form.config.data.columns[index];\\n    \\n  \\tJJFormModal.open(\\\"modiColumn.640.uc\\\", {\\n  \\t\\t\\\"name\\\": col.COLUMN_NAME,\\n  \\t\\t\\\"label\\\": col.COLUMN_LABEL,\\n  \\t\\t\\\"domain\\\": col.COLUMN_DOMAIN,\\n      \\\"width\\\": col.COLUMN_WIDTH\\n    })\\n    .then(data => {\\n\\t\\t\\tcol.COLUMN_NAME = data.COLUMN_NAME;\\n\\t\\t\\tcol.COLUMN_LABEL = data.COLUMN_LABEL;\\n\\t\\t\\tcol.COLUMN_DOMAIN = data.COLUMN_DOMAIN;\\n      col.COLUMN_WIDTH = data.COLUMN_WIDTH;\\n    });\\n  }\\n})\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body || \\\"{}\\\");\\n  \\n  form.vhtmlEditor.value  = body.html || \\\"\\\";\\n  form.scriptEditor.value = body.script;\\n  form.lessEditor.value = body.less || body.css;\\n  //  form.ruleEditor.value = body.rule;\\n  form.config.data.forminfo = body.forminfo;\\n  \\n  if (body.datainfo) {\\n    form.config.data.datainfo = body.datainfo;\\n    form.config.data.sorts = body.sorts || [];\\n    form.config.data.searchs = body.searchs || [];\\n    form.config.data.keymap = body.keymap || [];\\n    form.config.data.columns = body.columns || [];\\n    \\n    if (form.config.data.columns.length == 0 && form.config.data.datainfo.table) {\\n      form.getColumns().then(() => {\\n        // 만일 엑셀변환으로 넘어온 경우라면\\n        let widthClass = \\\"col-md-12\\\";\\n        \\n        if (form.config.data.columns.length > 50) {\\n          widthClass = \\\"col-md-4\\\";\\n        }\\n        \\n        if (form.config.data.columns.length > 20) {\\n          widthClass = \\\"col-md-6\\\";\\n        }\\n\\n        form.config.data.columns.forEach(colum => {\\n          colum.COLUMN_LABEL = colum.COLUMN_NAME;\\n          \\n          let label = colum.COLUMN_NAME;\\n          let keymap = form.config.data.keymap.find(item=>item.COLUMN_NAME == colum.COLUMN_NAME);\\n          \\n          if (keymap) colum.COLUMN_LABEL = keymap.COLUMN_LABEL;\\n\\n          if (colum.COLUMN_SHOW == \\\"true\\\") {\\n            let html = `<jj-item-text data-label=\\\"${colum.COLUMN_LABEL}\\\"\\ndata-type=\\\"text\\\" data-bind=\\\"data.info.${colum.COLUMN_NAME}\\\" \\nclass=\\\"form-group ${widthClass}\\\"></jj-item-text>`;\\n            form.vhtmlEditor.editor.insertAdjacentHTML('beforeend', html);\\n          } \\n        });\\n      })\\n    }\\n  }\\n}\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\n/* less의 내용은 미리 css로 변환하여 처리함 */\\nform.getSource = () => {\\n  let lookupColumns = {};\\n  \\n  form.vhtmlEditor.querySelectorAll('[data-code]').forEach(el => {\\n    if(el.options && el.options.code && el.options.code.startsWith(\\\"APP.\\\")){\\n      let column = el.options.bind.split(\\\".\\\").pop();\\n      \\n      lookupColumns[column] = el.options.code;\\n    }\\n  })\\n  \\n  let columns = [];\\n  \\n  form.listColumns.childNodes.forEach(el => {\\n    columns.push({\\n      \\\"COLUMN_LABEL\\\": el.dataset.label,\\n      \\\"COLUMN_NAME\\\": el.dataset.name,\\n      \\\"COLUMN_DOMAIN\\\": el.dataset.domain,\\n      \\\"COLUMN_SHOW\\\": el.dataset.show,\\n      \\\"COLUMN_CODE\\\": el.dataset.code,\\n      \\\"COLUMN_WIDTH\\\": el.dataset.width\\n    });\\n  }) \\n  \\n  let result = {\\n    \\\"uuid\\\": Jinja.global.uuid(),\\n    \\\"html\\\": form.vhtmlEditor.value||\\\"\\\",\\t\\n    \\\"less\\\":form.lessEditor.value||\\\"\\\",\\t\\n    \\\"script\\\": form.scriptEditor.value||\\\"\\\",\\n    //    \\\"rule\\\": form.ruleEditor.value||\\\"\\\",\\n    \\\"forminfo\\\": form.config.data.forminfo,\\n    \\\"datainfo\\\": form.config.data.datainfo,\\n    \\\"keymap\\\": form.config.data.keymap,\\n    \\\"columns\\\": columns,\\n    \\\"sorts\\\": form.config.data.sorts,\\n    \\\"searchs\\\": form.config.data.searchs\\n  };\\n  \\n  // 룩업컬럼이 존재하는 경우에 처리함\\n  if(Object.keys(lookupColumns).length){\\n    result[\\\"lookupColumns\\\"] = lookupColumns;\\n  }\\n  \\n  return Jinja.global.string(result);\\n}\\n\\nform.formAttrShow = () => {\\n  form.editForm.classList.toggle('side-on');\\n}\\n\\nform.clear = () => {\\n  form.vhtmlEditor.clear();\\n}\\n\\nform.deleteNode = () => {\\n  form.vhtmlEditor.selectNodeRemove();\\n}\\n\\nform.removeSearch = (index) => {\\n  form.config.data.searchs.removeIndex(index);\\n}\\n\\nform.removeSort = (index) => {\\n  form.config.data.sorts.removeIndex(index);\\n}\\n\\nform.appSave=()=>{\\n  form.save().then(fileInfo => {\\n    if (fileInfo && fileInfo.BODY) {\\n      let body = JSON.parse(fileInfo.BODY);\\n    \\n      if (fileInfo.NAME != body.forminfo.title) {\\n        Jinja.driverApi.updateFileInfo(fileInfo.ID, {NAME: body.forminfo.title});\\n      }\\n    }\\n  });\\n  \\n}\\n\\nform.excute = () => {\\n  //현재가 태스트모드이면 디자인모드로 변환\\n  let isTestMode = form.classList.contains(\\\"excute\\\");\\n  \\n  if(form.querySelector('jj-form-excute')) {\\n    form.querySelector('jj-form-excute').$remove();\\n  }\\n\\n  if (isTestMode) {\\n    form.classList.remove(\\\"excute\\\");\\n  } else {\\n    form.classList.add(\\\"excute\\\");\\n    \\n    let body = form.getSource();\\n    let formEl = document.createElement(\\\"jj-form-excute\\\");\\n    \\n    form.querySelector('.view-article').appendChild(formEl);\\n    formEl.excuteLoad(Jinja.global.json(body));\\n    \\n    return formEl;\\n  }\\n}\\n\\nform.findTable = () => {\\n  return JJFormModal.open(\\\"getTable.640.uc\\\")\\n    .then(data => {\\n      form.config.data.datainfo.workspace = data.workspace;\\n      form.config.data.datainfo.table = data.table;\\n      form.config.data.datainfo.keyField = data.keyField;\\n      dbo.setWorkspace(form.config.data.datainfo.workspace);\\n    \\n      form.getColumns().then(() => {\\n        form.vhtmlEditor.editor.innerHTML = \\\"\\\";\\n      \\n        let widthClass = \\\"col-md-12\\\";\\n      \\n        if (form.config.data.columns.length > 50) {\\n          widthClass = \\\"col-md-4\\\";\\n        }\\n      \\n        if (form.config.data.columns.length > 20) {\\n          widthClass = \\\"col-md-6\\\";\\n        }\\n        \\n        form.config.data.columns.forEach(colum => {\\n          if (colum.COLUMN_SHOW == \\\"true\\\") {\\n            let html;\\n            \\n            switch(colum.COLUMN_DOMAIN) {\\n            case \\\"INT\\\":\\n            case \\\"FLOAT\\\":\\n\\t\\t          html = `<jj-item-text data-label=\\\"${colum.COLUMN_NAME}\\\" data-type=\\\"number\\\" data-bind=\\\"data.info.${colum.COLUMN_NAME}\\\" class=\\\"form-group ${widthClass}\\\"></jj-item-text>`;\\n              break;\\n            case \\\"DATE\\\":\\n            case \\\"DATETIME\\\":\\n\\t\\t          html = `<jj-item-text data-label=\\\"${colum.COLUMN_NAME}\\\" data-type=\\\"date\\\" data-bind=\\\"data.info.${colum.COLUMN_NAME}\\\" class=\\\"form-group ${widthClass}\\\"></jj-item-text>`;\\n              break;\\n            case \\\"MEMO\\\":\\n\\t\\t          html = `<jj-item-textarea data-label=\\\"${colum.COLUMN_NAME}\\\"  data-bind=\\\"data.info.${colum.COLUMN_NAME}\\\" class=\\\"form-group ${widthClass}\\\"></jj-item-textarea>`;\\n              break;\\n            default:\\n\\t\\t          html = `<jj-item-text data-label=\\\"${colum.COLUMN_NAME}\\\" data-type=\\\"text\\\" data-bind=\\\"data.info.${colum.COLUMN_NAME}\\\" class=\\\"form-group ${widthClass}\\\"></jj-item-text>`;\\n              break;\\n            }\\n          \\n            form.vhtmlEditor.editor.insertAdjacentHTML('beforeend', html);\\n          } \\n        });\\n      \\n        // 그리드 표시용 컬럼을 설정한다\\n        form.config.data.lists = form.config.data.columns;\\n      });\\n    });\\n}\\n\\nform.getColumns = () => {\\n  if (form.config.data.datainfo.workspace && form.config.data.datainfo.table) {\\n    return dbo.getColumns(form.config.data.datainfo.table)\\n      .then(data => form.config.data.columns = data.rows)\\n      .catch(() => {});\\n  } else {\\n    alert(\\\"Unable to get column information because DBO does not have the specified workspace or table name.\\\");\\n  }\\n}\\n\\nform.tableSync = () => {\\n  if (form.config.data.datainfo.workspace && form.config.data.datainfo.table) {\\n    return dbo.getColumns(form.config.data.datainfo.table)\\n      .then(data => {\\n        data.rows.forEach(row => {\\n          if (form.config.data.columns.some(col => {\\n            return col.COLUMN_NAME == row.COLUMN_NAME;\\n          })) {\\n            //alert(\\\"일치\\\");\\n          } else {\\n            alert(row.COLUMN_NAME+\\\": Added column discovery\\\");\\n            \\n            form.config.data.columns.push(row);\\n          }\\n        });\\n      })\\n      .catch(() => {});\\n  } else {\\n    alert(\\\"Unable to get column information because DBO does not have the specified workspace or table name.\\\");\\n  }\\n}\\n\\nform.newTable = () => {\\n  JJFormModal.open(\\\"addTable.640.uc\\\")\\n    .then(data => {\\n      let url = `/v61/jbatis/${form.config.data.datainfo.workspace}/table`;\\n      let sendData = {\\n        \\\"TABLE_NAME\\\": data.TABLE_NAME,\\n        \\\"KEY_FIELD\\\": data.KEY_FIELD,\\n        \\\"DISPLAY_FIELD\\\": data.DISPLAY_FIELD,\\n        \\\"COLUMNS\\\" : [\\n          //{\\\"COLUMN_NAME\\\": \\\"REG_DATE\\\", \\\"COLUMN_TYPE\\\": \\\"datetime\\\", \\\"COLUMN_LENGTH\\\": 10}\\n        ]\\n      };\\n\\n      Jinja.ajax.post(url, sendData).then(() => {\\n        form.config.data.datainfo.table = data.TABLE_NAME;\\n        form.config.data.datainfo.keyField = data.KEY_FIELD;\\n        \\n        form.getColumns();\\n    });\\n  });\\n};\\n\\nform.newColumn = (option) => {\\n  let sendData;\\n  let popUri = \\\"addColumn.640.uc\\\";\\n  \\n  if (option.domain == \\\"APPLINK\\\") {\\n    option.domain == \\\"VARCHAR\\\";\\n    popUri = \\\"addAppColumn.640.uc\\\";\\n  }\\n  \\n  return JJFormModal.open(popUri, option)\\n    .then(data => {\\n      sendData = {\\n        \\\"TABLE_NAME\\\": form.config.data.datainfo.table,\\n        \\\"COLUMNS\\\" : [\\n          { \\n            \\\"COLUMN_LABEL\\\": data.COLUMN_LABEL,\\n            \\\"COLUMN_NAME\\\": data.COLUMN_NAME,\\n            \\\"COLUMN_DOMAIN\\\": data.COLUMN_DOMAIN,\\n            \\\"COLUMN_CODE\\\": data.COLUMN_CODE,\\n            \\\"COLUMN_WIDTH\\\": data.COLUMN_WIDTH,\\n            \\\"COLUMN_SHOW\\\": true,\\n            \\\"_crud_\\\": \\\"C\\\"\\n          }\\n        ]\\n      };\\n\\n    return dbo.alterTable(sendData).then(() => {\\n      form.config.data.columns.push(sendData.COLUMNS[0]);\\n\\n      return sendData;\\n    });\\n  });\\n};\\n\"\n}","URI":"app.640.formapp.studio","TYPE":"page"},{"NAME":"app.640.hmi.runtime","BODY":"{\n  \"uuid\": \"1f5e3959-49ab-44cb-a8d6-2a2031f7e959\",\n  \"html\": \"<jj-hmi-diagram jj-id=\\\"diagram\\\" data-mode=\\\"runtime\\\"></jj-hmi-diagram>\\n\",\n  \"less\": \"&{\\n\\n  background-color: #38414a;\\n\\n\\n  jj-hmi-diagram{\\n    position: relative;\\n    background-color: #38414a;\\n    //border: 0;\\n    overflow:visible;\\n\\n    .w{\\n      padding: 0;\\n      border: 0;\\n      cursor: initial;\\n      -webkit-box-shadow: none;    \\n    }\\n  }\\n\\n}\\n\",\n  \"script\": \"/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n    삭제처리 코딩작업중\\n --------------------------------------------------------------------------------------------------- */\\n\\n/* 자원을 호출하고 해당 자원번호를 넘겨준다 */\\n// form.openId = (id) =>{\\n//   Jinja.studioV6Api.readResource(id)\\n//   .then(data =>{\\n//     form.fileInfo = data;\\n//     form.setSource(data.BODY);\\n//   });\\n// };\\n\\n\\nform.pageInfo = {};\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n  debugger;\\n  \\n  form.diagram.fromJSON(body.diagram||{})\\n  .then(()=>{\\n    form.bindCss(body);\\n    form._setElementId();\\n    form.bindScript(body);\\n\\n    form.pageInfo = body.pageInfo||{};\\n    showPageInfo(form.pageInfo);\\n  })\\n  \\n};\\n\\nform.who =()=>{\\n  alert(\\\"함수 호출이 가능ㅇ하게합니다\\\")\\n}\\n\\nfunction showPageInfo(){\\n  if(form.pageInfo.imageUri){\\n  \\tform.diagram.style.backgroundImage=`url(\\\"${form.pageInfo.imageUri }\\\")`;\\n  }\\n  form.diagram.style.width= (form.pageInfo.width||\\\"1200\\\")+'px';\\n  form.diagram.style.height= (form.pageInfo.height||\\\"800\\\")+'px';\\n  \\n}\\n\"\n}","URI":"app.640.hmi.runtime","TYPE":"page"},{"NAME":"app.640.hmi.studio","BODY":"{\n  \"uuid\": \"97525caa-1ca7-4c42-bad7-291cee0a6ff0\",\n  \"html\": \"<div class=\\\"edit-article\\\">\\n  <div class=\\\"edit-toolbar\\\">\\n    <button jj-command=\\\"clear\\\" class=\\\"btn btn-secondary btn-sm\\\" aria-command=\\\"save\\\" title=\\\"새로작성\\\"><i class=\\\"fa fa-file-o\\\" aria-hidden=\\\"true\\\"></i></button>\\n    <button jj-command=\\\"deleteNode\\\" class=\\\"btn btn-secondary btn-sm\\\" aria-command=\\\"save\\\" title=\\\"아이템삭제\\\"><i class=\\\"fa fa-remove\\\" aria-hidden=\\\"true\\\"></i></button>\\n    <button jj-command=\\\"zIndex('up')\\\" class=\\\"btn btn-secondary btn-sm\\\" title=\\\"위로\\\">위로</button>\\n    <button jj-command=\\\"zIndex('down')\\\" class=\\\"btn btn-secondary btn-sm\\\" title=\\\"아래로\\\">아래</button>\\n    <button jj-command=\\\"noMove\\\" class=\\\"btn btn-secondary btn-sm\\\" title=\\\"위치고정\\\">고정</button>\\n    <button jj-command=\\\"copyNode\\\" class=\\\"btn btn-secondary btn-sm\\\" title=\\\"아이템복사\\\">복사</button>\\n  </div> \\n\\n  <div class=\\\"edit-body\\\"> \\n    <side jj-id=\\\"sideLeft\\\">\\n      <div class=\\\"list-group jj-active\\\" jj-id=\\\"nodes\\\"></div>\\n    </side>\\n    <article>\\n      <div class=\\\"code-tabContent\\\">\\n        <ul class=\\\"nav nav-tabs jj-tabs\\\">\\n          <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link active\\\" data-target=\\\"diagram\\\" href=\\\"#\\\">작화</a></li>\\n          <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link\\\" data-target=\\\"script\\\" href=\\\"#\\\">스크립트</a></li>\\n          <li hidden class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link\\\" data-target=\\\"less\\\" href=\\\"#\\\">less</a></li>\\n          <li hidden class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link\\\" data-target=\\\"bizModel\\\" href=\\\"#\\\">bizModel</a></li>\\n        </ul>\\n        <div class=\\\"tab-content\\\">\\n          <div role=\\\"tabpanel\\\" data-target=\\\"diagram\\\" class=\\\"tab-pane active diagram-wrap\\\">\\n\\t\\t\\t\\t    <jj-hmi-diagram jj-id=\\\"diagram\\\"></jj-hmi-diagram>\\n          </div>\\n          <div role=\\\"tabpanel\\\" data-target=\\\"script\\\" class=\\\"tab-pane active\\\">\\n            <jj-code-editor data-mode=\\\"javascript\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"scriptEditor\\\"></jj-code-editor>\\n          </div>\\n          <div role=\\\"tabpanel\\\" data-target=\\\"less\\\" class=\\\"tab-pane active\\\">\\n            <jj-code-editor data-mode=\\\"less\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"lessEditor\\\"></jj-code-editor>\\n          </div>\\n          <div role=\\\"tabpanel\\\" data-target=\\\"bizModel\\\" class=\\\"tab-pane active\\\">\\n            <jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"ruleEditor\\\"></jj-code-editor>\\n          </div>\\n        </div>\\n      </div>     \\n    </article>\\n    <side  jj-id=\\\"sideRight\\\">\\n      <div  hidden>\\n      <jj-attribute jj-id=\\\"attribute\\\"></jj-attribute>\\n      <button jj-command=\\\"changeImage\\\" class=\\\"btn btn-secondary btn-sm\\\" title=\\\"위치고정\\\">이미지변경</button>\\n      <br>\\n      <button jj-command=\\\"align('top')\\\" class=\\\"btn btn-secondary btn-sm\\\" \\n              title=\\\"위치고정\\\"><i class=\\\"fa fa-step-backward fa-rotate-90\\\"></i></button>\\n      <button jj-command=\\\"align('top')\\\" class=\\\"btn btn-secondary btn-sm\\\" \\n              title=\\\"위치고정\\\"><i class=\\\"fa fa-step-backward fa-rotate-270\\\"></i></button>\\n      <button jj-command=\\\"align('top')\\\" class=\\\"btn btn-secondary btn-sm\\\" \\n              title=\\\"위치고정\\\"><i class=\\\"fa fa-step-backward\\\"></i></button>\\n      <button jj-command=\\\"align('top')\\\" class=\\\"btn btn-secondary btn-sm\\\" \\n              title=\\\"위치고정\\\"><i class=\\\"fa fa-step-backward fa-rotate-180\\\"></i></button>\\n        \\n      </div>\\n      <h5>Form</h5>\\n      <button class=\\\"btn btn-info\\\" jj-command=\\\"changeBgImage\\\">배경이미지</button>\\n      <input type=\\\"number\\\" jj-id=\\\"viewWidth\\\" title=\\\"width\\\" value=1200>\\n      <input type=\\\"number\\\" jj-id=\\\"vieweHeight\\\" title=\\\"height\\\"value=800>\\n      <button class=\\\"btn btn-info\\\" jj-command=\\\"changeViewSize\\\">크기조정</button>\\n      \\n      <h5>ITEMS</h5>\\n      <jj-tree jj-id=\\\"itemTree\\\"></jj-tree>\\n      \\n    </side>\\n  </div>\\n</div>\\n\",\n  \"less\": \".edit-article{\\n  display:flex;\\n  flex-direction: column;\\n  height:100%;\\n  >.edit-toolbar{\\n    padding: 3px;\\n    flex: none;\\n  }\\n  >.edit-body{\\n    flex-grow:1;\\n    display:flex;\\n    flex-direction: row;\\n    overflow: hidden;\\n    >side{\\n      width:200px;\\n      flex: none;\\n      overflow: auto;\\n\\n      [jj-id=\\\"nodes\\\"]{\\n        .list-group-item{\\n          i.fa:first-child{\\n            pointer-events: none;\\n          }\\n          i.fa:last-child:hover{\\n            color: red;\\n          }\\n        }\\n      }\\n    }\\n    >article{\\n      flex-grow:1;\\n      >.code-tabContent{\\n        height: 100%;\\n        display:flex;\\n        flex-direction: column;\\n\\n        >ul.nav{\\n          flex: none;\\n        }\\n        >div.tab-content{\\n          flex-grow:1;\\n          padding: 0;\\n          height: 1rem;\\n          >.tab-pane{\\n            height: 100%;  \\n          }\\n\\n          .diagram-wrap{\\n            background-color: var(--gray);\\n            padding: 1rem;\\n            overflow:auto;\\n            \\n            >jj-hmi-diagram{\\n              width: 1200px;\\n              height: 800px;\\n              margin: 0 auto;    \\n            }\\n          }\\n        }\\n      }\\n    }\\n    [jj-id=\\\"itemTree\\\"]{\\n      >ul>li{ padding-left: 0.2rem;}\\n    }\\n  }\\n\\n}\\n\",\n  \"script\": \"// new JJRresizable(form.sideLeft, {\\\"handles\\\":\\\"e\\\"});   \\nform.pageInfo = {};\\n\\nform.diagram.addEventListener(\\\"selected\\\", e=>{\\n  let nodeEl = e.detail.node;\\n  form.attribute.activeNode(nodeEl, true);\\n})\\n\\nform.addEventListener(\\\"dragstart\\\", e=>{\\n  e.dataTransfer.setData(\\\"text/html\\\", e.target.innerHTML);\\n  if(e.target.parentElement.itemData){\\n    e.dataTransfer.setData(\\\"diagram-type\\\", e.target.parentElement.itemData.type);\\n    e.dataTransfer.setData(\\\"hmi-element\\\", e.target.parentElement.itemData.element);\\n  }\\n\\n  if(e.target.dataset.diagramType){\\n    e.dataTransfer.setData(\\\"diagram-type\\\", e.target.dataset.diagramType);\\n  }\\n\\n  if(e.target.dataset.hmiElement){\\n    e.dataTransfer.setData(\\\"hmi-element\\\", e.target.dataset.hmiElement);  \\n  }\\n});\\nform.copyNode=()=>{\\n  form.diagram.copyNode();\\n}\\nform.deleteNode=()=>{\\n  form.diagram.deleteNode();\\n}\\n\\nform.zIndex=(p)=>{\\n  form.diagram.zIndex(p); \\n}\\nform.noMove=()=>{\\n  form.diagram.noMove();\\n}\\n\\nform.changeImage=()=>{\\n  form.diagram.changeImage();\\n}\\nform.align=(arr)=>{\\n  form.diagram.align(arr);\\n}\\n\\nform.clear=()=>{\\n  form.diagram.clear();\\n}\\n\\nform.changeBgImage=()=>{\\n  JJFormModal.open(\\\"sysImage.640.uc\\\")\\n    .then(result=>{\\n    form.pageInfo.imageUri = result.srcUrl;\\n    showPageInfo();\\n  })  \\n    .catch(ex=>{});\\n}\\nform.changeViewSize=()=>{\\n  form.pageInfo.width = form.viewWidth.value || 1200;\\n  form.pageInfo.height = form.vieweHeight.value || 800;\\n  showPageInfo();\\n}\\n\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n\\n  form.diagram.fromJSON(body.diagram||{})\\n  .then(()=>getNodeList());\\n  \\n  form.scriptEditor.value = body.script;\\n  form.lessEditor.value = body.less||body.css;\\n  form.ruleEditor.value = body.rule;\\n  form.pageInfo = body.pageInfo||{};\\n  showPageInfo(form.pageInfo);\\n};\\n\\nfunction showPageInfo(){\\n  if(form.pageInfo.imageUri){\\n  \\tform.diagram.style.backgroundImage=`url(\\\"${form.pageInfo.imageUri }\\\")`;\\n  }\\n  form.diagram.style.width= (form.pageInfo.width||\\\"1200\\\")+'px';\\n  form.diagram.style.height= (form.pageInfo.height||\\\"800\\\")+'px';\\n  \\n  form.viewWidth.value = form.diagram.offsetWidth;\\n  form.vieweHeight.value = form.diagram.offsetHeight;\\n  \\n}\\n\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\n/* less의 내용은 미리 css로 변환하여 처리함 */\\nform.getSource=()=>{\\n  let uuid = Jinja.global.uuid();\\n  let less = form.lessEditor.value;\\n\\n  return Jinja.dom.lessFileIdCss(less, form.fileInfo.ID)\\n    .then(css=> Jinja.global.string({\\n    \\\"uuid\\\": uuid,\\n    \\\"diagram\\\": form.diagram.toJSON(),\\n    \\\"html\\\": \\\"\\\",\\t\\n    \\\"css\\\": css,\\t\\n    \\\"less\\\":less,\\t\\n    \\\"script\\\": form.scriptEditor.value,\\n    \\\"rule\\\": form.ruleEditor.value,\\n    \\\"pageInfo\\\": form.pageInfo\\n\\n  }))\\n    .catch(ex=>{\\n    console.error(ex)\\n  });\\n}\\n\\nform.excute = function() {};\\n\\nlet jons =[\\n  { \\\"ID\\\": \\\"icon\\\", \\\"NAME\\\": \\\"icon\\\", \\\"type\\\": \\\"node\\\", \\\"element\\\": \\\"jj-hmi-icon\\\" },\\n  { \\\"ID\\\": \\\"device\\\", \\\"NAME\\\": \\\"device\\\", \\\"type\\\": \\\"node\\\", \\\"element\\\": \\\"jj-hmi-device\\\" },\\n  { \\\"ID\\\": \\\"digital\\\", \\\"NAME\\\": \\\"digital\\\", \\\"type\\\": \\\"node\\\", \\\"element\\\": \\\"jj-hmi-digital\\\" },\\n  { \\\"ID\\\": \\\"pad\\\", \\\"NAME\\\": \\\"pad\\\", \\\"type\\\": \\\"node\\\", \\\"element\\\": \\\"jj-hmi-pad\\\" },\\n  { \\\"ID\\\": \\\"dial\\\", \\\"NAME\\\": \\\"dial\\\", \\\"type\\\": \\\"node\\\", \\\"element\\\": \\\"jj-hmi-dial\\\" },\\n  { \\\"ID\\\": \\\"image\\\", \\\"NAME\\\": \\\"image\\\", \\\"type\\\": \\\"node\\\", \\\"element\\\": \\\"jj-hmi-image\\\" },\\n  { \\\"ID\\\": \\\"html\\\", \\\"NAME\\\": \\\"html\\\", \\\"type\\\": \\\"node\\\", \\\"element\\\": \\\"jj-hmi-html\\\" },\\n  { \\\"ID\\\": \\\"realChart\\\", \\\"NAME\\\": \\\"realChart\\\", \\\"type\\\": \\\"node\\\", \\\"element\\\": \\\"jj-real-chart\\\" },\\n  { \\\"ID\\\": \\\"line\\\", \\\"NAME\\\": \\\"line\\\", \\\"type\\\": \\\"node\\\", \\\"element\\\": \\\"jj-hmi-line\\\" }\\n];\\n\\nform.itemTree.fromJson(jons);\\n\\nform.addEventListener(\\\"changeedit\\\", e=>{\\n  if (e.detail.mode == \\\"hmi\\\"){\\n    getNodeList()\\n  }\\n})\\n\\nform.nodes.addEventListener(\\\"click\\\", e=>{\\n  if(e.target.matches('.fa-thumb-tack')){\\n    form.diagram.noMove(e.target.parentElement.wEl);\\n  } else {\\n  \\tform.diagram.selectNode(e.target.wEl);\\n  }\\n  \\n})\\n\\nfunction getNodeList(){\\n  \\n  form.nodes.$empty();\\n\\n  let nodes = form.diagram.getNodes();\\n\\n  nodes.forEach(node=>{\\n    let nodeEl = document.createElement('a');\\n    nodeEl.setAttribute(\\\"class\\\", \\\"list-group-item d-flex justify-content-between w-node\\\");\\n    let firstI = document.createElement('i');\\n    firstI.setAttribute(\\\"class\\\", \\\"fa fa-th-large\\\");\\n    let name = node.el.getAttribute(\\\"name\\\") || node.hmiElement;\\n\\t\\tfirstI.appendChild(document.createTextNode(name));\\n    nodeEl.appendChild(firstI);\\n    let lastI = document.createElement('i');\\n    lastI.setAttribute(\\\"class\\\", \\\"fa fa-thumb-tack\\\");\\n    nodeEl.appendChild(lastI);\\n    \\n    if(!node.w.matches('.no-move')){\\n      lastI.classList.add(\\\"fa-rotate-90\\\");\\n    }\\n    \\n    nodeEl.wEl = node.w;\\n    form.nodes.appendChild(nodeEl);\\n  })\\n\\n}\"\n}","URI":"app.640.hmi.studio","TYPE":"page"},{"NAME":"app.640.html.runtime","BODY":"{\r\n  \"html\": \"<div jj-id=\\\"viewer\\\"></div>\\n\",\r\n  \"less\": \"\",\r\n  \"script\": \"from.setSource = (body)=> this.formBodyEl.innerHTML = body;\\n\",\r\n  \"css\": \"2a824fcd-824d-4272-bef6-3fa95e718c9d\"\r\n}","URI":"app.640.html.runtime","TYPE":"page"},{"NAME":"app.640.html.studio","BODY":"{\r\n  \"html\": \"<jj-code-editor data-mode=\\\"html\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"editor\\\"></jj-code-editor>\\n\",\r\n  \"less\": \"jj-code-editor{\\n  height: 100%;\\n}\",\r\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body) => form.editor.value = body;\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> form.editor.value;\\n\\nform.excute = async function() {\\n  let body = form.getSource();\\n  try{\\n\\t\\t//Jinja.dom.verifyCss(body);\\n    $topMessage(\\\"정상입니다.\\\");\\n  } catch(ex){\\n    alert(\\\"구조에 문제가 있습니다.\\\\n\\\"+ex);  \\n  }  \\n\\n}\",\r\n  \"css\": \"438f2ab0-2d3c-4da1-866f-3f6a657b7cc0\"\r\n}","URI":"app.640.html.studio","TYPE":"page"},{"NAME":"app.640.image.runtime","BODY":"{\n  \"uuid\": \"aef9e13c9-a07f-4acb-a78d-8974ed19a232\",\n  \"html\": \"<div class=\\\"container-fluid\\\">\\n  <!-- Filter -->\\n  <div class=\\\"row mt-2\\\">\\n    <div hidden class=\\\"col-12\\\">\\n      <div class=\\\"text-center filter-menu\\\">\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item active\\\" data-rel=\\\"all\\\">All</a>\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item\\\" data-rel=\\\"web\\\">Web Design</a>\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item\\\" data-rel=\\\"graphic\\\">Graphic Design</a>\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item\\\" data-rel=\\\"illustrator\\\">Illustrator</a>\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item\\\" data-rel=\\\"photography\\\">Photography</a>\\n      </div>\\n    </div>\\n  </div>\\n  <!-- end row-->\\n\\n  <div jj-id=\\\"folderImages\\\" class=\\\"row filterable-content\\\"></div>\\n  <!-- end row -->\\n</div>  \\n\\n\\n\\n\\n\",\n  \"less\": \"[jj-id=\\\"folderImages\\\"]{\\n align-content: flex-start; \\n}\",\n  \"script\": \"/*jshint sub:true*/ \\nconst API_VERSION = workspaceMeta.options.appInfo.apiVersion||\\\"v61\\\";\\nconst CDN_VERVER = workspaceMeta.options.appInfo.cdnServer||\\\"\\\";\\n\\nform.setSource = (data)=>{\\n  form.folderImages.$empty();  \\n  \\n  Jinja.ajax.post(`/${API_VERSION}/driver/file/${form.fileInfo.ID}/all`)\\n    .then(data=>{\\n    data.rows.splice(0,1);\\n    data.rows.forEach(row => {\\n      var html = `\\n    <div data-file-id=\\\"${row.ID}\\\" class=\\\"col-sm-6 col-xl-3 filter-item all web illustrator\\\">\\n      <div class=\\\"gal-box\\\">\\n        <a class=\\\"image-popup\\\">\\n          <img src=\\\"${CDN_VERVER}${row.URI}\\\" class=\\\"img-fluid\\\"  alt=\\\"${row.NAME}\\\" title=\\\"${row.NAME}\\\">\\n        </a>\\n        <div class=\\\"gall-info\\\">\\n          <h4 class=\\\"font-16 mt-0\\\">${row.NAME}</h4>\\n          <a href=\\\"javascript: void(0);\\\">\\n            <img src=\\\"${CDN_VERVER}/repository/systemImages/team/1.jpg\\\" alt=\\\"user-img\\\" class=\\\"rounded-circle\\\" height=\\\"24\\\">\\n            <span class=\\\"text-muted ml-1 imgsize\\\">${row.type}</span>\\n          </a>\\n          <a href=\\\"javascript: void(0);\\\" class=\\\"gal-like-btn\\\"><i class=\\\"mdi mdi-heart-outline text-muted\\\"></i></a>\\n        </div>\\n      </div>\\n    </div>\\n`;\\n\\n      Jinja.dom.append(form.folderImages, html);\\t\\t\\n    });\\n    \\n\\t\\tform.imgSizeCal();    \\n  })\\n  .catch(ex=>{\\n     alert(Jinja.global.string(ex));\\n  })\\n  ;\\n};\\n\\n/**\\n * 이미지의 크기를 표시함\\n * 이미지가 로드되는 시간을 보장하기 위해서 500 딜레이 시킴\\n */\\nform.imgSizeCal=()=>{\\n  setTimeout(()=>{\\n    form.folderImages.querySelectorAll('img.img-fluid').forEach(el=>{\\n      let sizeText = `W:${el.naturalWidth}px, H:${el.naturalHeight}px`;\\n      el.closest('.gal-box').querySelector('.imgsize').innerText = sizeText;\\n    });\\n  },500)\\n}\\n\\n/**\\n*\\t이미지 확대보기\\n*/\\nform.folderImages.addEventListener(\\\"dblclick\\\", e => {\\n  let current, rows = [];\\n  form.folderImages.querySelectorAll(\\\"img.img-fluid\\\").forEach(el=>{\\n    rows.push({ \\n      \\\"url\\\": el.src,\\n      \\\"cur\\\": el.src==e.target.src?'active':''\\n    })\\n  });\\n  JJHee.open(\\\"app610.image-full-slider.view\\\",{ \\n    \\\"search\\\":{\\n      \\\"rows\\\":rows,\\n      \\\"current\\\":current\\n    },  \\n    isFull: true\\n  })    \\n    .then(result=>{})\\n    .catch(ex=>{})\\n});\\n\\n\\n\\n    \"\n}","URI":"app.640.image.runtime","TYPE":"page"},{"NAME":"app.640.image.studio","BODY":"{\n  \"uuid\": \"af2bfe9e3-6295-4be5-b12a-8881e457ba7a\",\n  \"html\": \"<div class=\\\"container-fluid\\\">\\n  <!-- start page title -->\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"page-title-box\\\">\\n        <div class=\\\"page-title-right\\\">\\n          <input jj-id=\\\"fileAction\\\" type=\\\"file\\\" multiple=\\\"\\\" hidden>\\n          <div class=\\\"btn-group pull-right\\\" role=\\\"group\\\" aria-label=\\\"...\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-rounded btn-success btn-sm\\\" \\n                    jj-command=\\\"fileUpload\\\">\\n              <span hidden class=\\\"spinner-border spinner-border-sm mr-1\\\" role=\\\"status1\\\" aria-hidden=\\\"true\\\"></span>\\n              <i class=\\\"fa fa-cloud-upload\\\" aria-hidden=\\\"true\\\"></i> Upload</button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-rounded btn-secondary\\\"  btn-sm jj-command=\\\"fileRemove\\\"><i class=\\\"fa fa-close\\\" aria-hidden=\\\"true\\\"></i> delete</button>\\n          </div>\\n        </div>\\n        <h4 class=\\\"page-title\\\">Gallery</h4>\\n      </div>\\n    </div>\\n  </div>     \\n  <!-- end page title --> \\n\\n  <!-- Filter -->\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12\\\">\\n      <div class=\\\"text-center filter-menu\\\">\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item active\\\" data-rel=\\\"all\\\">All</a>\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item\\\" data-rel=\\\"web\\\">Web Design</a>\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item\\\" data-rel=\\\"graphic\\\">Graphic Design</a>\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item\\\" data-rel=\\\"illustrator\\\">Illustrator</a>\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"filter-menu-item\\\" data-rel=\\\"photography\\\">Photography</a>\\n      </div>\\n    </div>\\n  </div>\\n  <!-- end row-->\\n\\n  <div jj-id=\\\"folderImages\\\" class=\\\"row filterable-content\\\"></div>\\n  <!-- end row -->\\n</div>  \\n\\n\\n\\n\\n\",\n  \"less\": \"[jj-id=\\\"folderImages\\\"]{\\n  min-height: 500px;  \\n  &.win-drag{\\n    background-color: yellow;\\n  }\\n  \\n} \\n\",\n  \"script\": \"/*jshint sub:true*/ \\nconst API_VERSION = workspaceMeta.options.appInfo.apiVersion||\\\"v61\\\";\\nconst CDN_VERVER = workspaceMeta.options.appInfo.cdnServer||\\\"\\\";\\nnew JJSelector(form.folderImages, {\\n  \\\"item\\\":  \\\".gal-box\\\"\\n}); \\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=>{}; \\n\\n/**\\n * 이미지가 로드되면 사이즈를 계산함\\n */\\n\\nform.setSource = (data)=>{\\n  form.folderImages.$empty();  \\n  Jinja.ajax.post(`/${API_VERSION}/driver/file/${form.fileInfo.ID}/all`)\\n    .then(data=>{\\n    data.rows.splice(0,1);\\n    data.rows.forEach(row => Jinja.dom.append(form.folderImages, form.renderItem(row)));\\t\\t\\n    \\n    form.imgSizeCal();    \\n  });\\n};\\n\\nform.renderItem=(row)=>{\\n  return `\\n<div data-file-id=\\\"${row.ID}\\\" class=\\\"col-sm-6 col-xl-3 filter-item all web illustrator\\\">\\n<div class=\\\"gal-box\\\">\\n<a class=\\\"image-popup\\\">\\n<img src=\\\"${CDN_VERVER}${row.URI}\\\" class=\\\"img-fluid\\\" alt=\\\"${row.NAME}\\\" title=\\\"${row.NAME}\\\">\\n</a>\\n<div class=\\\"gall-info\\\">\\n<h4 class=\\\"font-16 mt-0\\\" >${row.NAME}</h4>\\n<a href=\\\"javascript: void(0);\\\">\\n<img src=\\\"${CDN_VERVER}/repository/systemImages/team/1.jpg\\\" alt=\\\"user-img\\\" class=\\\"rounded-circle\\\" height=\\\"24\\\">\\n<span class=\\\"imgsize text-muted ml-1\\\"></span>\\n</a>\\n<a href=\\\"javascript: void(0);\\\" class=\\\"gal-like-btn\\\"><i class=\\\"mdi mdi-heart-outline text-muted\\\"></i></a>\\n</div>\\n</div>\\n</div>\\n`;\\n\\n}\\n\\n/**\\n * 이미지의 크기를 표시함\\n * 이미지가 로드되는 시간을 보장하기 위해서 500 딜레이 시킴\\n */\\nform.imgSizeCal=()=>{\\n  setTimeout(()=>{\\n    form.folderImages.querySelectorAll('img.img-fluid').forEach(el=>{\\n      let sizeText = `W:${el.naturalWidth}px, H:${el.naturalHeight}px`;\\n      el.closest('.gal-box').querySelector('.imgsize').innerText = sizeText;\\n    });\\n  },500)\\n}\\n\\n/* 자원을 저장하는 함수 */\\nform.save = ()=>{\\n  $topMessage(\\\"이미지는 실시간으로 저장되기 때문에 별도의 저장은 필요없습니다.\\\");\\n};\\n\\n\\nform.fileUpload = function() {\\n  form.fileAction.click();\\n};\\n\\n/**\\n*\\t선택된 파일삭제\\n*/\\nform.fileRemove = function() {\\n  Jinja.confirm.delete(`선택한 이미지를 삭제할까요?`)\\n    .then(result=>{\\n    if(result == \\\"YES\\\"){\\n      form.folderImages.querySelectorAll(\\\".selected\\\").forEach(el=>{\\n        let targetEl = el.parentElement;\\n        let targetFileId = targetEl.dataset.fileId;\\n        Jinja.ajax.delete(`/${API_VERSION}/driver/file/${targetFileId}`)\\n          .then(data=>targetEl.$remove())\\n          .catch(result=>Jinja.confirm.info(`삭제가 실패하였습니다.\\\\n${result.error.message}`))\\n      })\\n    }\\n  });\\n    \\n};\\n\\n\\n/**\\n*\\t파일업로드\\n*/\\nform.fileAction.addEventListener(\\\"change\\\", e => {\\n  var rlt = [], img ;\\n  fileUpload(form.fileAction.files);    \\t\\n});\\n\\n/**\\n*\\t이미지 확대보기\\n*/\\nform.folderImages.addEventListener(\\\"dblclick\\\", e => {\\n  let current, rows = [];\\n  form.folderImages.querySelectorAll(\\\"img\\\").forEach(el=>rows.push({\\\"url\\\": el.src}));\\n  if (e.target.tagName==\\\"IMG\\\"){\\n    current = e.target.src;\\n  } else {\\n    current = rows[0].url;\\n  }\\n  JJFormFull.open('image-full-slider.uc', {\\n    \\\"rows\\\":rows,\\n    \\\"current\\\":current\\n  });\\n});\\n\\nform.folderImages.addEventListener(\\\"dragover\\\", e => {\\n  e.preventDefault();\\n  form.folderImages.classList.add(\\\"win-drag\\\");\\n});\\nform.folderImages.addEventListener(\\\"dragleave\\\", e => form.folderImages.classList.remove(\\\"win-drag\\\"));\\nform.folderImages.addEventListener(\\\"drop\\\", e => {\\n  e.stopPropagation();\\n  e.preventDefault();\\n  var data = e.dataTransfer;\\n\\n  if (data.types[0] == \\\"Files\\\") {\\n    fileUpload(data.files);    \\t\\n  } else {\\n    fileLinkload(event.dataTransfer.getData('url'));    \\t\\n  }\\n\\n  form.folderImages.classList.remove(\\\"win-drag\\\");\\n\\n});\\n\\nfunction fileUpload(files){\\n  Jinja.ajax.imageUploadApps(files)  \\n    .then(response => {\\n    response.rows.forEach(row => {\\n      let fileInfo = {\\n        \\\"ID\\\": row.fileId,\\n        \\\"PARENT_ID\\\": form.fileInfo.ID,\\n        \\\"TYPE\\\":\\\"file\\\",\\n        \\\"NAME\\\": row.fileName,\\n        \\\"URI\\\":row.path+row.fileId,\\n        \\\"LOCKER\\\": null,\\n        \\\"VERSION\\\":1,\\n      };\\n\\n      Jinja.ajax.post(`/${API_VERSION}/driver/file`,fileInfo)\\n        .then(data=>{\\n        Jinja.dom.append(form.folderImages, form.renderItem(fileInfo));\\t\\t\\n        \\n\\t\\t    form.imgSizeCal();    \\n        \\n      });\\n\\n    });\\n    \\n    //change이벤트가 적용되도록 값을지운다\\n    form.fileAction.value = \\\"\\\";\\n  })\\n    .catch(error => console.error('Error:', error));\\n}\\n\\nfunction fileLinkload(url){\\n  let fileId = Jinja.global.uuid();\\n  let newApp = {\\n    \\\"ID\\\": fileId,\\n    \\\"PARENT_ID\\\": form.fileInfo.ID,\\n    \\\"WORKSPACE_ID\\\": form.fileInfo.WORKSPACE_ID,\\n    \\\"TYPE\\\":\\\"file\\\",\\n    \\\"NAME\\\": \\\"url upload \\\",\\n    \\\"URI\\\":url,\\n    \\\"LOCKER\\\": Jinja.uo.USER_ID,\\n    \\\"VERSION\\\":1,\\n  };\\n\\n  Jinja.studioV6Api.createFile(newApp)\\n    .then(data=>{\\n    var html = `\\n<div class=\\\"j-card\\\" data-file-id=\\\"${newApp.ID}\\\">\\n<div class=\\\"image-warp\\\">\\n<img class=\\\"card-img-top img-responsive\\\" src=\\\"${newApp.URI}\\\" alt=\\\"Card image cap\\\">\\t\\n</div>\\n<div class=\\\"card-body\\\">\\n<h5 class=\\\"card-title text-nowrap\\\" title=\\\"${newApp.NAME}\\\">${newApp.NAME}</h5>\\n<p class=\\\"card-text\\\" title=\\\"${newApp.TYPE}\\\">\\n${newApp.TYPE||\\\"\\\"}\\n</p>\\n</div>\\n</div>\\n`;\\n\\n    Jinja.dom.append(form.folderImages, html);\\t\\t\\n\\n  });\\n}\\n\\nfunction showImage(rows){\\n  rows.forEach(row => {\\n    row.URI = row.path+row.fileId;\\n    var html = form.renderItem(row)\\n\\n    Jinja.dom.append(form.folderImages, form.renderItem(row));\\t\\t\\n  });\\n}\\n\"\n}","URI":"app.640.image.studio","TYPE":"page"},{"NAME":"app.640.javascript.studio","BODY":"{\r\n  \"html\": \"<jj-code-editor data-mode=\\\"javascript\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"editor\\\"></jj-code-editor>\\n\",\r\n  \"less\": \"jj-code-editor{\\n  height: 100%;\\n}\",\r\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>form.editor.value = body;\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> form.editor.value;\\n\\nform.excute = async function() {\\n  let body = form.getSource();\\n  try{\\n\\t\\t//Jinja.dom.verifyCss(body);\\n    $topMessage(\\\"정상입니다.\\\");\\n  } catch(ex){\\n    alert(\\\"구조에 문제가 있습니다.\\\\n\\\"+ex);  \\n  }  \\n\\n}\",\r\n  \"uuid\": \"97d940e5-8e56-4405-944c-9921c26e8c0b\"\r\n}","URI":"app.640.javascript.studio","TYPE":"page"},{"NAME":"app.640.json.studio","BODY":"{\r\n  \"html\": \"<jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"editor\\\"></jj-code-editor>\\n\",\r\n  \"less\": \"\",\r\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>form.editor.value = body;\\n\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=>form.editor.value;\\n\\nform.excute = async function() {\\n  let body = from.getSource();\\n  try{\\n\\t\\tlet json = Jinja.global.json(body);\\n    console.log(\\\"json excute\\\", json);\\n    $topMessage(\\\"정상입니다.\\\");\\n  } catch(ex){\\n    alert(\\\"JSON구조에 문제가 있습니다.\\\\n\\\"+ex);  \\n  }\\n}\",\r\n  \"uuid\": \"01d57d91-03e1-4900-a645-72ba2291f6a8\"\r\n}","URI":"app.640.json.studio","TYPE":"page"},{"NAME":"app.640.less.studio","BODY":"{\r\n  \"html\": \"<jj-code-editor data-mode=\\\"less\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"editor\\\"></jj-code-editor>\\n\",\r\n  \"less\": \"jj-code-editor{\\n  height: 100%;\\n}\",\r\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body) => form.editor.value = body;\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> form.editor.value;\\n\\nform.excute = async function() {\\n  let body = form.getSource();\\n  try{\\n\\t\\tJinja.dom.verifyCss(body);\\n    $topMessage(\\\"정상입니다.\\\");\\n  } catch(ex){\\n    alert(\\\"구조에 문제가 있습니다.\\\\n\\\"+ex);  \\n  }  \\n\\n}\",\r\n  \"uuid\": \"cab5fa47-1a59-4d7d-ad95-5cd1c5fde569\"\r\n}","URI":"app.640.less.studio","TYPE":"page"},{"NAME":"app.640.menu.runtime","BODY":"{\n  \"uuid\": \"a19670a55-83cb-4584-92a2-57cf5ee4a0f5\",\n  \"html\": \"<div class=\\\"container-fluid\\\">\\n  <div class=\\\"btn-toolbar mb-2\\\" role=\\\"toolbar\\\" aria-label=\\\"Toolbar with button groups\\\">\\n    <div class=\\\"btn-group mr-2\\\" role=\\\"group\\\" aria-label=\\\"Second group\\\">\\n      <button jj-command=\\\"addRoot\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i> Add</button>\\n      <button jj-command=\\\"addChild\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\"><i class=\\\"fa fa-plus-square\\\" aria-hidden=\\\"true\\\"></i> Child</button>\\n    </div>\\n    <div class=\\\"btn-group mr-2\\\" role=\\\"group\\\" aria-label=\\\"First group\\\">\\n      <button jj-command=\\\"clear\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\"><i class=\\\"fa fa-square\\\" aria-hidden=\\\"true\\\"></i> Clear</button>\\n      <button jj-command=\\\"removeItem\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\"><i class=\\\"fa fa-remove\\\" aria-hidden=\\\"true\\\"></i> Remove</button>\\n    </div>\\n    <div class=\\\"btn-group mr-2\\\" role=\\\"group\\\" aria-label=\\\"First group\\\">\\n      <button jj-command=\\\"save\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\"><i class=\\\"fa fa-save\\\" aria-hidden=\\\"true\\\"></i> Save</button>\\n    </div>\\n  </div>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <div class=\\\"card h-100\\\">\\n        <div class=\\\"card-header\\\">\\n          메뉴구조\\n        </div>\\n        <div class=\\\"card-body\\\">\\n          <jj-tree jj-id=\\\"menuTree\\\" class=\\\"guide-line\\\"></jj-tree>\\n        </div>\\n      </div>\\n\\n    </div>\\n    <div class=\\\"col-md-8\\\" jj-id=\\\"menuForm\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-header\\\">\\n          메뉴상세\\n        </div>\\n        <div class=\\\"card-body p-2\\\">\\n          <jj-data-form>\\n            <jj-item-text class=\\\"col-md-12\\\" data-label=\\\"TITLE\\\" data-type=\\\"text\\\" data-bind=\\\"data.info.title\\\"></jj-item-text>\\n            <jj-item-text class=\\\"col-md-12\\\" data-label=\\\"LINK\\\" data-type=\\\"text\\\" data-bind=\\\"data.info.href\\\"></jj-item-text>\\n            <jj-item-icon class=\\\"col-md-6\\\" data-label=\\\"ICON\\\" data-bind=\\\"data.info.icon\\\"></jj-item-icon>\\n            <jj-item-select class=\\\"col-md-6\\\" data-label=\\\"LINK TARGET\\\" data-bind=\\\"data.info.target\\\" data-code=\\\",_blank,_self,_parent,_top\\\"></jj-item-select>\\n          </jj-data-form>\\n        </div>\\n      </div> \\n      \\n      <div class=\\\"card mb-0\\\">\\n        <div class=\\\"card-header\\\">\\n          Role:\\n        </div>\\n        <div class=\\\"card-body\\\">\\n          <table jj-id=\\\"roleTable\\\" class=\\\"table xtable-hover text-center table-sm bg-white\\\">\\n            <thead class=\\\"thead-light\\\">\\n              <tr>\\n                <th scope=\\\"col\\\">#</th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('ALL','-1')\\\" href=\\\"#\\\">ROLE_NAME</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('READ','-1')\\\" href=\\\"#\\\">읽기</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('SAVE','-1')\\\" href=\\\"#\\\">쓰기</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('DELETE','-1')\\\" href=\\\"#\\\">삭제</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('CREATE','-1')\\\" href=\\\"#\\\">생성</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('EXPORT','-1')\\\" href=\\\"#\\\">출력</a></th>\\n              </tr>\\n            </thead>\\n            <tbody class=\\\"jj-active\\\" j-for=\\\"row in data.role\\\" j-page=30>\\n              <tr>\\n                <th scope=\\\"row\\\">${row._index+1}</th>\\n                <td><a jj-command=\\\"RoleAll('ROW','${row._index}')\\\" href=\\\"#\\\">\\n                  ${row.ROLE_NAME}</a></td>\\n                <td><jj-item-check data-bind=\\\"row.READ\\\"></jj-item-check></td>\\n                <td><jj-item-check data-bind=\\\"row.SAVE\\\"></jj-item-check></td>\\n                <td><jj-item-check data-bind=\\\"row.DELETE\\\"></jj-item-check></td>\\n                <td><jj-item-check data-bind=\\\"row.CREATE\\\"></jj-item-check></td>\\n                <td><jj-item-check data-bind=\\\"row.EXPORT\\\"></jj-item-check></td>\\n              </tr>\\n            </tbody>\\n          </table>\\n        </div>\\n      </div>\\n\\n    </div>\\n  </div>  \\n\\n\",\n  \"less\": \"[jj-id=\\\"menuUl\\\"]{\\n  padding:16px;\\n}\\njj-tree{\\n  height:auto!important;\\n}\\njj-item-check{\\n  margin-bottom:0!important;\\n  .check-label{\\n    margin:0!important;\\n  }\\n}\\n[jj-id=\\\"roleTable\\\"]{\\n  tbody tr{\\n    line-height: 2rem!important;\\n  }\\n}\",\n  \"script\": \"// 폼에서 변경된 사항을 감지하기 위해서 react적용함\\nform.config={\\n  \\\"data\\\":{\\n    \\\"info\\\":{\\n      \\\"title\\\":\\\"메뉴제목\\\",\\n      \\\"icon\\\":\\\"\\\",\\n      \\\"href\\\":\\\"\\\",\\n      \\\"target\\\":\\\"\\\"\\n    },\\n    \\\"role\\\":[]\\n  },\\n  \\\"watchs\\\": {\\n    \\\"_data_\\\": (obj, key, oldVal, newVal)=>{\\n      form.menuTree.updateSelectItem();\\n    }\\n  }\\n};\\n\\nform.menuBody ={\\n  \\\"brand\\\": {\\n    \\\"title\\\":\\\"\\\",\\n    \\\"image\\\":\\\"\\\",\\n    \\\"href\\\": \\\"\\\",\\n    \\\"theme\\\": \\\"basic\\\",\\n    \\\"class\\\": \\\"nav navbar-nav navbar-right\\\"\\n  },\\n  \\\"items\\\":[]\\n};    \\n\\nform.bo = new JJReact(form.menuForm, form.config);\\n\\n\\nObject.assign(form.menuTree.options, {\\n  \\\"displayField\\\": \\\"title\\\",\\n  \\\"keyField\\\": \\\"menuId\\\",\\n  \\\"isEdit\\\": true,\\n  \\\"isIcon\\\": true,\\n  \\\"isFolderOnly\\\": false,\\n  \\\"addOn\\\": []\\n});\\n\\nform.menuTree.addEventListener(\\\"treeClick\\\", e=>{\\n  form.config.data.info = e.detail.data;\\n  /**\\n   * 롤 정보가 있으면 테이블에 바인딩\\n   */\\n\\n  if(form.config.data.info.role){\\n    let menuRole = Jinja.global.json(form.config.data.info.role);\\n    form.config.data.role = form._role.map(row=>{\\n      //메뉴에 해당롤 정보가 있다면\\n      let findMr = menuRole.find(mr=>mr.ROLE_ID == row.ROLE_ID)||{};\\n      return Object.assign(row,{\\n        \\\"READ\\\": findMr.READ || false,\\n        \\\"SAVE\\\": findMr.SAVE || false,\\n        \\\"DELETE\\\": findMr.DELETE || false,\\n        \\\"CREATE\\\": findMr.CREATE || false,\\n        \\\"EXPORT\\\": findMr.EXPORT || false\\n      })\\n    })\\n  } \\n  else {\\n    form.config.data.role = form._role.map(row=>{\\n      return Object.assign(row,{\\n        \\\"READ\\\": false,\\n        \\\"SAVE\\\": false,\\n        \\\"DELETE\\\": false,\\n        \\\"CREATE\\\": false,\\n        \\\"EXPORT\\\": false\\n      });\\n    });\\n  }\\n})\\n\\nform.roleTable.addEventListener(\\\"input\\\", e=>{\\n  //console.log(form.config.data.role);\\n  form.config.data.info.role = Jinja.global.string(form.config.data.role);\\n})\\n\\n\\nform.RoleAll=(type, rowIndex)=>{\\n  let checkVal = true;\\n  if (type == \\\"ROW\\\"){\\n    checkVal = !form.config.data.role[rowIndex].READ;\\n    form.config.data.role[rowIndex].READ = checkVal;\\n    form.config.data.role[rowIndex].SAVE = checkVal;\\n    form.config.data.role[rowIndex].DELETE = checkVal;\\n    form.config.data.role[rowIndex].CREATE = checkVal;\\n    form.config.data.role[rowIndex].EXPORT = checkVal;\\n  } \\n  else if ([\\\"READ\\\",\\\"SAVE\\\",\\\"DELETE\\\",\\\"CREATE\\\",\\\"EXPORT\\\"].includes(type)){\\n\\t\\tcheckVal = !form.config.data.role[0][type];\\n    form.config.data.role.forEach(row=>{\\n      row[type] = checkVal;\\n    })\\n  } else {\\n    checkVal = !form.config.data.role[0][\\\"READ\\\"];\\n    form.config.data.role.forEach(row=>{\\n      row[\\\"READ\\\"] = checkVal;\\n      row[\\\"SAVE\\\"] = checkVal;\\n      row[\\\"DELETE\\\"] = checkVal;\\n      row[\\\"CREATE\\\"] = checkVal;\\n      row[\\\"EXPORT\\\"] = checkVal;\\n    })\\n    \\n  }\\n  \\n  form.config.data.info.role = Jinja.global.string(form.config.data.role);\\n}\\n/* 외부에서 drop이 된 경우\\n \\\"detail\\\":{\\n \\t\\\"dropLi\\\": this.dropItem,\\n \\t\\\"dataTransfer\\\": e.dataTransfer\\n  },\\n*/\\nform.menuTree.addEventListener(\\\"treeExtDrop\\\", e=>{\\n  let dropObject = e.detail.dataTransfer.getData(\\\"objectclass\\\");\\n  let dropKey = e.detail.dataTransfer.getData(\\\"key\\\");\\n  let textInfo = e.detail.dataTransfer.getData(\\\"appspeed/fileinfo\\\");\\n  let pathInfo;\\n\\n  if(textInfo) {\\n    pathInfo = Jinja.global.json(textInfo);\\n    let itemData = {\\n      \\\"menuId\\\": Jinja.global.uuid(),\\n      \\\"title\\\":pathInfo.NAME,\\n      \\\"icon\\\":null,\\n      \\\"href\\\":\\\"/\\\"+pathInfo.PATH.split('/').slice(1).join('/'),\\n      \\\"target\\\":null\\n    };\\n    form.menuTree.dropChildItem(itemData, e.detail.dropLi, e.detail.position);\\n  } else {\\n\\n    //if(dropObject==\\\"resource\\\" && dropKey){\\n    if(dropKey){\\n      Jinja.driverApi.selectResourcePathInfo(dropKey).then(pathInfo=>{\\n        let itemData = {\\n          \\\"menuId\\\": Jinja.global.uuid(),\\n          \\\"title\\\":pathInfo.NAME,\\n          \\\"icon\\\":null,\\n          \\\"href\\\":\\\"/\\\"+pathInfo.PATH.split('/').slice(1).join('/'),\\n          \\\"target\\\":null\\n        };\\n        form.menuTree.dropChildItem(itemData, e.detail.dropLi, e.detail.position);\\n      })\\n    }\\n  }\\n});\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  if(body){\\n    form.menuBody = Jinja.global.json(body||\\\"{}\\\");  \\n  }\\n  form.menuTree.fromJson(form.menuBody.items);\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=>{\\n  form.menuBody.items = form.menuTree.toJson();\\n  return Jinja.global.string(form.menuBody)\\n}\\n\\n\\n/**\\n * 메뉴툴바 함수들\\n */\\nform.clear=()=>form.menuTree.clear();\\nform.removeItem=()=>form.menuTree.removeSelectItem();\\n\\nform.addRoot=()=>form.menuTree.addItem({\\n  \\\"menuId\\\": Jinja.global.uuid(),\\n  \\\"title\\\": \\\"new Menu\\\"\\n});\\n\\nform.addChild=()=>form.menuTree.addChildItem({\\n  \\\"menuId\\\": Jinja.global.uuid(),\\n  \\\"title\\\": \\\"new Menu\\\"\\n});  \\n\\nform.save=()=>{\\n  form.fileInfo.BODY = form.getSource();\\n\\n  return Jinja.driverApi.updateFileBody(form.fileInfo.ID,\\n                                        form.fileInfo.BODY,\\n                                        form.fileInfo.VERSION) \\n    .then(data => {\\n    form.fileInfo.VERSION = parseInt(form.fileInfo.VERSION) + 1;\\n\\n    $topMessage('저장되었습니다.');\\n\\n    return form.fileInfo;\\n  })\\n    .catch(ex => {\\n    alert(`잠김이나 버전문제로 저장이 불가능합니다.\\\\n${ex}`);\\n  });\\n}\\n\\n\\nif(Jinja.code.codes.jj_role){\\n  form._role = Jinja.code.codes.jj_role.map(cd=>{\\n    return {\\n      \\\"ROLE_ID\\\": cd.CODE,\\n      \\\"ROLE_NAME\\\": cd.NAME\\n    }\\n  });\\n}\\n\"\n}","URI":"app.640.menu.runtime","TYPE":"page"},{"NAME":"app.640.menu.studio","BODY":"{\n  \"uuid\": \"a67fb0b3d-89f6-4155-98f3-fc4b4bc23f66\",\n  \"html\": \"<div class=\\\"container-fluid\\\">\\n  <div class=\\\"btn-toolbar mb-2\\\" role=\\\"toolbar\\\" aria-label=\\\"Toolbar with button groups\\\">\\n    <div class=\\\"btn-group mr-2\\\" role=\\\"group\\\" aria-label=\\\"Second group\\\">\\n      <button jj-command=\\\"addRoot\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i> Add</button>\\n      <button jj-command=\\\"addChild\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\"><i class=\\\"fa fa-plus-square\\\" aria-hidden=\\\"true\\\"></i> Child</button>\\n    </div>\\n    <div class=\\\"btn-group mr-2\\\" role=\\\"group\\\" aria-label=\\\"First group\\\">\\n      <button jj-command=\\\"clear\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\"><i class=\\\"fa fa-square\\\" aria-hidden=\\\"true\\\"></i> Clear</button>\\n      <button jj-command=\\\"removeItem\\\" type=\\\"button\\\" class=\\\"btn btn-secondary\\\"><i class=\\\"fa fa-remove\\\" aria-hidden=\\\"true\\\"></i> Remove</button>\\n    </div>\\n  </div>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-4\\\">\\n      <div class=\\\"card h-100\\\">\\n        <div class=\\\"card-header\\\">\\n          메뉴구조\\n        </div>\\n        <div class=\\\"card-body\\\">\\n          <jj-tree jj-id=\\\"menuTree\\\" class=\\\"guide-line\\\"></jj-tree>\\n        </div>\\n      </div>\\n\\n    </div>\\n    <div jj-id=\\\"menuForm\\\" class=\\\"col-md-8\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-header\\\">\\n          메뉴상세\\n        </div>\\n        <div class=\\\"card-body p-2\\\">\\n          <jj-data-form>\\n            <jj-item-text class=\\\"col-md-12\\\" data-label=\\\"TITLE\\\" data-type=\\\"text\\\" data-bind=\\\"data.info.title\\\"></jj-item-text>\\n            <jj-item-text class=\\\"col-md-12\\\" data-label=\\\"LINK\\\" data-type=\\\"text\\\" data-bind=\\\"data.info.href\\\"></jj-item-text>\\n            <jj-item-icon class=\\\"col-md-6\\\" data-label=\\\"ICON\\\" data-bind=\\\"data.info.icon\\\"></jj-item-icon>\\n            <jj-item-select class=\\\"col-md-6\\\" data-label=\\\"LINK TARGET\\\" data-bind=\\\"data.info.target\\\" data-code=\\\",_blank,_self,_parent,_top\\\"></jj-item-select>\\n          </jj-data-form>\\n        </div>\\n      </div> \\n      <div class=\\\"card mb-0\\\">\\n        <div class=\\\"card-header\\\">\\n          Role:\\n        </div>\\n        <div class=\\\"card-body\\\">\\n          <table jj-id=\\\"roleTable\\\" class=\\\"table xtable-hover text-center table-sm bg-white\\\">\\n            <thead class=\\\"thead-light\\\">\\n              <tr>\\n                <th scope=\\\"col\\\">#</th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('ALL','-1')\\\" href=\\\"#\\\">ROLE_NAME</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('READ','-1')\\\" href=\\\"#\\\">읽기</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('SAVE','-1')\\\" href=\\\"#\\\">쓰기</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('DELETE','-1')\\\" href=\\\"#\\\">삭제</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('CREATE','-1')\\\" href=\\\"#\\\">생성</a></th>\\n                <th scope=\\\"col\\\"><a jj-command=\\\"RoleAll('EXPORT','-1')\\\" href=\\\"#\\\">출력</a></th>\\n              </tr>\\n            </thead>\\n            <tbody class=\\\"jj-active\\\" j-for=\\\"row in data.role\\\" j-page=30>\\n              <tr>\\n                <th scope=\\\"row\\\">${row._index+1}</th>\\n                <td><a jj-command=\\\"RoleAll('ROW','${row._index}')\\\" href=\\\"#\\\">\\n                  ${row.ROLE_NAME}</a></td>\\n                <td><jj-item-check data-bind=\\\"row.READ\\\"></jj-item-check></td>\\n                <td><jj-item-check data-bind=\\\"row.SAVE\\\"></jj-item-check></td>\\n                <td><jj-item-check data-bind=\\\"row.DELETE\\\"></jj-item-check></td>\\n                <td><jj-item-check data-bind=\\\"row.CREATE\\\"></jj-item-check></td>\\n                <td><jj-item-check data-bind=\\\"row.EXPORT\\\"></jj-item-check></td>\\n              </tr>\\n            </tbody>\\n          </table>\\n        </div>\\n      </div>\\n    </div>\\n  </div>  \\n\\n\",\n  \"less\": \"[jj-id=\\\"menuUl\\\"]{\\n  padding:16px;\\n}\\njj-tree{\\n  height:auto!important;\\n}\\njj-item-check{\\n  margin-bottom:0!important;\\n  .check-label{\\n    margin:0!important;\\n  }\\n}\\n[jj-id=\\\"roleTable\\\"]{\\n  tbody tr{\\n    line-height: 2rem!important;\\n  }\\n}\",\n  \"script\": \"// 폼에서 변경된 사항을 감지하기 위해서 react적용함\\nform.config={\\n  \\\"data\\\":{\\n    \\\"info\\\":{\\n      \\\"title\\\":\\\"메뉴제목\\\",\\n      \\\"icon\\\":\\\"\\\",\\n      \\\"href\\\":\\\"\\\",\\n      \\\"target\\\":\\\"\\\"\\n    },\\n    \\\"role\\\":[]\\n  },\\n  \\\"watchs\\\": {\\n    \\\"_data_\\\": (obj, key, oldVal, newVal)=>{\\n      form.menuTree.updateSelectItem();\\n    }\\n  }\\n};\\n\\nform.menuBody ={\\n  \\\"brand\\\": {\\n    \\\"title\\\":\\\"\\\",\\n    \\\"image\\\":\\\"\\\",\\n    \\\"href\\\": \\\"\\\",\\n    \\\"theme\\\": \\\"basic\\\",\\n    \\\"class\\\": \\\"nav navbar-nav navbar-right\\\"\\n  },\\n  \\\"items\\\":[]\\n};    \\n\\nform.bo = new JJReact(form.menuForm, form.config);\\n\\nObject.assign(form.menuTree.options, {\\n  \\\"displayField\\\": \\\"title\\\",\\n  \\\"keyField\\\": \\\"menuId\\\",\\n  \\\"isEdit\\\": true,\\n  \\\"isIcon\\\": true,\\n  \\\"isFolderOnly\\\": false,\\n  \\\"addOn\\\": []\\n});\\n\\nform.menuTree.addEventListener(\\\"treeClick\\\", e=>{\\n  form.config.data.info = e.detail.data;\\n  /**\\n   * 롤 정보가 있으면 테이블에 바인딩\\n   */\\n  if(!Jinja.code.codes.jj_role) return;\\n  if(form.config.data.info.role){\\n    let menuRole = Jinja.global.json(form.config.data.info.role);\\n    form.config.data.role = form._role.map(row=>{\\n      //메뉴에 해당롤 정보가 있다면\\n      let findMr = menuRole.find(mr=>mr.ROLE_ID == row.ROLE_ID)||{};\\n      return Object.assign(row,{\\n        \\\"READ\\\": findMr.READ || false,\\n        \\\"SAVE\\\": findMr.SAVE || false,\\n        \\\"DELETE\\\": findMr.DELETE || false,\\n        \\\"CREATE\\\": findMr.CREATE || false,\\n        \\\"EXPORT\\\": findMr.EXPORT || false\\n      })\\n    })\\n  } \\n  else {\\n    form.config.data.role = form._role.map(row=>{\\n      return Object.assign(row,{\\n        \\\"READ\\\": false,\\n        \\\"SAVE\\\": false,\\n        \\\"DELETE\\\": false,\\n        \\\"CREATE\\\": false,\\n        \\\"EXPORT\\\": false\\n      });\\n    });\\n  }\\n\\n})\\n\\n\\nform.roleTable.addEventListener(\\\"input\\\", e=>{\\n  //console.log(form.config.data.role);\\n  form.config.data.info.role = Jinja.global.string(form.config.data.role);\\n})\\n\\n\\nform.RoleAll=(type, rowIndex)=>{\\n  if(!Jinja.code.codes.jj_role) return;\\n  let checkVal = true;\\n  if (type == \\\"ROW\\\"){\\n    checkVal = !form.config.data.role[rowIndex].READ;\\n    form.config.data.role[rowIndex].READ = checkVal;\\n    form.config.data.role[rowIndex].SAVE = checkVal;\\n    form.config.data.role[rowIndex].DELETE = checkVal;\\n    form.config.data.role[rowIndex].CREATE = checkVal;\\n    form.config.data.role[rowIndex].EXPORT = checkVal;\\n  } \\n  else if ([\\\"READ\\\",\\\"SAVE\\\",\\\"DELETE\\\",\\\"CREATE\\\",\\\"EXPORT\\\"].includes(type)){\\n\\t\\tcheckVal = !form.config.data.role[0][type];\\n    form.config.data.role.forEach(row=>{\\n      row[type] = checkVal;\\n    })\\n  } else {\\n    checkVal = !form.config.data.role[0][\\\"READ\\\"];\\n    form.config.data.role.forEach(row=>{\\n      row[\\\"READ\\\"] = checkVal;\\n      row[\\\"SAVE\\\"] = checkVal;\\n      row[\\\"DELETE\\\"] = checkVal;\\n      row[\\\"CREATE\\\"] = checkVal;\\n      row[\\\"EXPORT\\\"] = checkVal;\\n    })\\n    \\n  }\\n  \\n  form.config.data.info.role = Jinja.global.string(form.config.data.role);\\n}\\n/* 외부에서 drop이 된 경우\\n \\\"detail\\\":{\\n \\t\\\"dropLi\\\": this.dropItem,\\n \\t\\\"dataTransfer\\\": e.dataTransfer\\n  },\\n*/\\nform.menuTree.addEventListener(\\\"treeExtDrop\\\", e=>{\\n  let dropObject = e.detail.dataTransfer.getData(\\\"objectclass\\\");\\n  let dropKey = e.detail.dataTransfer.getData(\\\"key\\\");\\n  let textInfo = e.detail.dataTransfer.getData(\\\"appspeed/fileinfo\\\");\\n  let pathInfo;\\n\\n  if(textInfo) {\\n    pathInfo = Jinja.global.json(textInfo);\\n    let itemData = {\\n      \\\"menuId\\\": Jinja.global.uuid(),\\n      \\\"title\\\":pathInfo.NAME,\\n      \\\"icon\\\":null,\\n      \\\"href\\\":\\\"/\\\"+pathInfo.PATH.split('/').slice(1).join('/'),\\n      \\\"target\\\":null\\n    };\\n    form.menuTree.dropChildItem(itemData, e.detail.dropLi, e.detail.position);\\n  } else {\\n\\n    //if(dropObject==\\\"resource\\\" && dropKey){\\n    if(dropKey){\\n      Jinja.driverApi.selectResourcePathInfo(dropKey).then(pathInfo=>{\\n        let itemData = {\\n          \\\"menuId\\\": Jinja.global.uuid(),\\n          \\\"title\\\":pathInfo.NAME,\\n          \\\"icon\\\":null,\\n          \\\"href\\\":\\\"/\\\"+pathInfo.PATH.split('/').slice(1).join('/'),\\n          \\\"target\\\":null\\n        };\\n        form.menuTree.dropChildItem(itemData, e.detail.dropLi, e.detail.position);\\n      })\\n    }\\n  }\\n});\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  if(body){\\n    form.menuBody = Jinja.global.json(body||\\\"{}\\\");  \\n  }\\n  form.menuTree.fromJson(form.menuBody.items);\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=>{\\n  form.menuBody.items = form.menuTree.toJson();\\n  return Jinja.global.string(form.menuBody)\\n}\\n\\n\\n/**\\n * 메뉴툴바 함수들\\n */\\nform.clear=()=>form.menuTree.clear();\\nform.removeItem=()=>form.menuTree.removeSelectItem();\\n\\nform.addRoot=()=>form.menuTree.addItem({\\n  \\\"menuId\\\": Jinja.global.uuid(),\\n  \\\"title\\\": \\\"new Menu\\\"\\n});\\n\\nform.addChild=()=>form.menuTree.addChildItem({\\n  \\\"menuId\\\": Jinja.global.uuid(),\\n  \\\"title\\\": \\\"new Menu\\\"\\n});  \\n\\n\\nif(Jinja.code.codes.jj_role){\\n  form._role = Jinja.code.codes.jj_role.map(cd=>{\\n    return {\\n      \\\"ROLE_ID\\\": cd.CODE,\\n      \\\"ROLE_NAME\\\": cd.NAME\\n    }\\n  });\\n}\\n\"\n}","URI":"app.640.menu.studio","TYPE":"page"},{"NAME":"app.640.package.studio","BODY":"{\n  \"uuid\": \"cd0f9420-e7ab-41a7-b58b-a224a7175b0c\",\n  \"html\": \"<div class=\\\"btn-group tool-bar\\\" role=\\\"group\\\" aria-label=\\\"...\\\">\\n  <button class=\\\"btn btn-link btn-sm\\\" jj-command=\\\"builder\\\">\\n  <i class=\\\"spinner-border-sm\\\"></i>Builder \\n  </button>\\n</div>\\n<div class=\\\"flex3box d-flex flex-row h-100\\\">\\n  <div class=\\\"editWarp\\\" jj-id=\\\"jsonEditorWrap\\\">\\n    <jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"jsonEditor\\\"></jj-code-editor>  \\n  </div>\\n  <div class=\\\"editWarp flex-grow-1 javascript\\\">\\n    <jj-code-editor data-mode=\\\"javascript\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"javascriptEditor\\\"></jj-code-editor>\\n  </div>\\n  <div class=\\\"editWarp flex-grow-1 css\\\">\\n    <jj-code-editor data-mode=\\\"css\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"cssEditor\\\"></jj-code-editor>\\n  </div>\\n</div>\\t\\n\\n\",\n  \"less\": \"article{\\n  display:flex;\\n  flex-direction: column;\\n  >.tool-bar{\\n    flex: none;\\n    display: inline-block;\\n  }\\n  .flex3box {\\n    flex-grow:1;\\n    display:flex;\\n    flex-direction: row;\\n    > .editWarp {\\n      margin-right:10px;\\n      flex-grow:1;\\n      height:100%;\\n      jj-code-editor{\\n        height:100%;\\n      }\\n\\n      &[jj-id=\\\"jsonEditorWrap\\\"]{\\n        flex: none;\\n        position: relative;\\n        width: 50%;\\n        padding-right:5px;\\n        .resizer:hover{\\n          background-color: #ccc;\\n        }\\n      }\\n\\n    }\\n  }\\n\\n}\\n\\n\",\n  \"script\": \"/*jshint sub:true*/ \\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nconst API_VERSION = workspaceMeta.options.appInfo.apiVersion||\\\"v61\\\";\\nform.setSource = (data)=>form.jsonEditor.value = data;\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> form.jsonEditor.value; \\n\\nnew JJRresizable(form.jsonEditorWrap, {\\n  \\\"handles\\\":\\\"e\\\"\\n});   \\n\\n\\nform.jsonEditor._onDrop = (editor,e)=>{\\n    let dropJson \\t\\t= e.dataTransfer.getData(\\\"text/json\\\");\\n    var coords = editor.coordsChar({\\n      left: e.x,\\n      top: e.y\\n    });\\n    editor.replaceRange(dropJson, coords);\\n    e.preventDefault();\\n  }\\n\\n\\n\\nform.builder =(e)=>{\\n    e.target.querySelector(`.spinner-border-sm`).classList.add('spinner-border');\\n  let URI = form.fileInfo[\\\"URI\\\"];\\n  let body = Jinja.global.json(form.jsonEditor.value);\\n  \\n\\tlet builderUrl = body.isExtPackage?`/${API_VERSION}/package/extpkg/${URI}`:`/${API_VERSION}/package/apppkg/${URI}`;\\n\\n  form.javascriptEditor.value = \\\"\\\";\\n  form.cssEditor.value = \\\"\\\";\\n  \\n  form.save()\\n    .then(saveResult=>Jinja.ajax.post(builderUrl))\\n  \\t.then(result=>{\\n      form.javascriptEditor.value = result.script;\\n      form.cssEditor.value = result.css;\\n        e.target.querySelector(`.spinner-border-sm`).classList.remove('spinner-border');\\n  });\\n};\\n\\n\"\n}","URI":"app.640.package.studio","TYPE":"page"},{"NAME":"app.640.page.runtime","BODY":"{\n  \"uuid\": \"aa9931e4d-718f-4230-853c-256b9a514f82\",\n  \"html\": \"\",\n  \"less\": \"\",\n  \"script\": \"/**\\n * 페이지는 내장명령과 동일하기 때문에\\n * 공통의 로직만 구현한다\\n */\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n  \\n  form.bindHtml(body);\\n  form.bindCss(body);\\n  form.bindScript(body);\\n};\"\n}","URI":"app.640.page.runtime","TYPE":"page"},{"NAME":"app.640.page.studio","BODY":"{\r\n    \"uuid\": \"c0981fc9-62a6-454a-ab2a-e6125a8e76c7\",\r\n    \"html\": \"<jj-div4box jj-id=\\\"div4box\\\"></jj-div4box>\",\r\n    \"css\": \"\",\r\n    \"less\": \"\",\r\n    \"script\": \"\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource=(body)=>{\\n  form.div4box.value = body;\\n}\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\n/* less의 내용은 미리 css로 변환하여 처리함 */\\nform.getSource=()=>{\\n  let body = form.div4box.value;\\n  body.uuid = Jinja.global.uuid();\\n\\n  return Jinja.global.string(body);\\n}\\n\\nform.excute=()=>{\\n  form.div4box.excute();\\n}\"\r\n}","URI":"app.640.page.studio","TYPE":"page"},{"NAME":"app.640.sql.studio","BODY":"{\n  \"uuid\": \"a02875279-7d11-429a-b9fc-e2052a4b3a39\",\n  \"html\": \"<div class=\\\"flex3box d-flex flex-column h-100\\\">\\n  <section jj-id=\\\"sqlSection\\\" class=\\\"section sql-section\\\">\\n    <div jj-id=\\\"editWarp\\\">\\n      <jj-code-editor data-mode=\\\"sql\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"queryEditor\\\"></jj-code-editor>\\n    </div>\\n\\n    <div jj-id=\\\"formInfo\\\" class=\\\"p-1\\\">\\n      <button jj-command=\\\"findTable\\\" class=\\\"btn btn-purple\\\"> \\n        <i class=\\\"fa fa-table mr-1\\\" aria-hidden=\\\"true\\\"></i>DataSource \\n      </button>\\n      <button jj-command=\\\"excute\\\" class=\\\"btn btn-purple\\\"> \\n        <i class=\\\"fa fa-table mr-1\\\" aria-hidden=\\\"true\\\"></i>Excute \\n      </button>\\n      <button jj-command=\\\"excuteSelect\\\" class=\\\"btn btn-purple\\\"> \\n        <i class=\\\"fa fa-table mr-1\\\" aria-hidden=\\\"true\\\"></i>ExcuteSelect \\n      </button>\\n      <jj-item-text data-label=\\\"workspace\\\" data-type=\\\"text\\\" data-readonly=\\\"true\\\" data-bind=\\\"data.datainfo.workspace\\\" data-render=\\\"jj-item\\\" class=\\\"form-group jj-hitem\\\"></jj-item-text>\\n      <jj-item-text data-label=\\\"table\\\" data-type=\\\"text\\\"  data-readonly=\\\"true\\\" data-bind=\\\"data.datainfo.table\\\" data-render=\\\"jj-item\\\" class=\\\"form-group jj-hitem\\\"></jj-item-text>\\n      <jj-item-text data-label=\\\"keyField\\\" data-type=\\\"text\\\"  data-readonly=\\\"true\\\" data-bind=\\\"data.datainfo.keyField\\\" data-render=\\\"jj-item\\\" class=\\\"form-group jj-hitem\\\"></jj-item-text>\\n      <div class=\\\"clearfix\\\"></div>\\n      <div class=\\\"btn-group\\\" role=\\\"group\\\" aria-label=\\\"query\\\">\\n        <button jj-command=\\\"makerSql('select')\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\">select</button>\\n        <button jj-command=\\\"makerSql('update')\\\" type=\\\"button\\\" class=\\\"btn btn-info btn-sm\\\">update</button>\\n        <button jj-command=\\\"makerSql('insert')\\\" type=\\\"button\\\" class=\\\"btn btn-warning btn-sm\\\">insert</button>\\n        <button jj-command=\\\"makerSql('delete')\\\" type=\\\"button\\\" class=\\\"btn btn-warning btn-sm\\\">delete</button>\\n      </div>\\n      <h5>Columns:</h5>\\n      <ul jj-id= \\\"lstColumns\\\" class=\\\"list-group colums\\\" j-for=\\\"row in data.colums\\\" j-page=300>\\n        <li class=\\\"list-group-item\\\" draggable=\\\"true\\\" data-item='columns' data-type='${row.COLUMN_TYPE}' data-label='${row.COLUMN_NAME}'>\\n          <i class=\\\"fa fa-code mr-1\\\" aria-hidden=\\\"true\\\"></i> ${row.COLUMN_NAME} / ${row.COLUMN_TYPE}\\n          <span class=\\\"badge badge-info badge-pill\\\">${row.NULLABLE}</span>\\n        </li>\\n      </ul>\\n    </div>\\n\\n  </section>\\n  <jj-query-result jj-id=\\\"queryResultBox\\\" style=\\\"height:300px;\\\"></jj-query-result>\\n\\n</div>\\n<button jj-command=\\\"download\\\" type=\\\"button\\\" class=\\\"btn btn-success waves-effect waves-light\\\" title=\\\"export Excel\\\"><i class=\\\"fa fa-file-excel-o\\\" aria-hidden=\\\"true\\\"></i></button>\",\n  \"less\": \"section.sql-section{\\n  position: relative;\\n  display: flex;\\n  height: 50%;\\n  padding-bottom:5px;\\n  \\n  [jj-id=\\\"editWarp\\\"]{\\n    flex-grow:1;\\n  }  \\n  [jj-id=\\\"formInfo\\\"]{\\n    width:300px;\\n    overflow: auto;\\n  }  \\n}\\n\\n[jj-command=\\\"download\\\"]{\\n  position: absolute;\\n  bottom:5px;\\n  right:5px;\\n  border-radius: 50%;\\n  padding: 10px 15px;\\n}\\n[jj-id= \\\"lstColumns\\\"]{\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  .badge {\\n    position: absolute;\\n    right: 5px;\\n    margin-top: 5px;\\n  }\\n}\",\n  \"script\": \"form.config = {\\n  \\\"data\\\": {\\n    \\\"datainfo\\\": {\\n      \\\"workspace\\\":\\\"\\\",\\n      \\\"table\\\":\\\"\\\",\\n      \\\"keyField\\\":\\\"\\\"\\n    },\\n    \\\"colums\\\":[]\\n  }\\n};\\n\\nform.dataRows = [];\\n\\nnew JJReact(form.formInfo, form.config);\\n\\nlet dao = new JJBatisDBA();\\n\\nnew JJRresizable(form.sqlSection, {\\n  \\\"handles\\\":\\\"s\\\"\\n});   \\n\\nform.setSource = (data) => {\\n  let body;\\n\\n  try {\\n    body = Jinja.global.json(data || \\\"{}\\\");  \\n    form.queryEditor.value = body.sql;\\n\\n    if(body.datainfo) {\\n      form.config.data.datainfo = body.datainfo;\\n      dao = new JJBatisDBA({\\n        \\\"workspace\\\":form.config.data.datainfo.workspace,\\n        \\\"tableName\\\": form.config.data.datainfo.table,\\n        \\\"keyField\\\": form.config.data.datainfo.keyField\\n      });\\n\\n      dao.getColumns()\\n        .then(data => form.config.data.colums = data.rows)\\n        .catch(() => {});\\n\\n    }\\n  } catch(e) {\\n    form.queryEditor.value = data;\\n  }\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = () => Jinja.global.string({\\n  \\\"sql\\\": form.queryEditor.value, \\n  \\\"datainfo\\\": form.config.data.datainfo\\n});\\n\\nform.findTable = () => {\\n  dao.findTable().then(data => {\\n    form.config.data.datainfo.workspace = data.workspace;\\n    form.config.data.datainfo.table = data.table;\\n    form.config.data.datainfo.keyField = data.keyField;\\n    form.config.data.colums = data.columns;\\n  });\\n}\\n\\nform.lstColumns.addEventListener(\\\"dragstart\\\", e => {\\n  e.dataTransfer.setData(\\\"text/html\\\", e.target.dataset.label);\\n});\\n\\nform.excuteSelect = (e) => {\\n  if(!form.config.data.datainfo.workspace) {\\n    alert(\\\"데이터 워크스페이스를 선택하세요.\\\");\\n    return;\\n  }\\n  let sqlComm = form.queryEditor.selectText();\\n dao.excuteNt(sqlComm)\\n    .then(result =>form.queryResultBox.showResult(result))\\n    .catch(error => form.queryResultBox.showMessage(`<h4>Excute Error</h4><t class=\\\"text-danger\\\">${error.options.message}</t>`));\\n\\n};\\nform.excute = (e) => {\\n  if(!form.config.data.datainfo.workspace) {\\n    alert(\\\"데이터 워크스페이스를 선택하세요.\\\");\\n    return;\\n  }\\n dao.excute(form.queryEditor.value)\\n    .then(result =>form.queryResultBox.showResult(result))\\n    .catch(error => form.queryResultBox.showMessage(`<h4>Excute Error</h4><t class=\\\"text-danger\\\">${error.options.message}</t>`));\\n\\n};\\n\\nform.download = (e) => {\\n  Jinja.global.exportHtmlTable(form.queryResultBox.querySelector('table'), form.dataRows, \\\"testSample\\\");\\n};\\n\\nform.makerSql = (crud) => {\\n  let sql;\\n\\n  switch(crud) {\\n    case \\\"update\\\":\\n      sql = dao.updateSql();\\n\\n      break;\\n    case \\\"insert\\\":\\n      sql = dao.insertSql();\\n\\n      break;\\n    case \\\"delete\\\":\\n      sql = dao.deleteSql();\\n\\n      break;\\n    default:\\n      sql = dao.selectSql();\\n\\n      break;\\n  }\\n\\n  form.queryEditor.value = sql;\\n}\\n\"\n}","URI":"app.640.sql.studio","TYPE":"page"},{"NAME":"app.640.text.studio","BODY":"{\r\n  \"html\": \"<jj-code-editor data-mode=\\\"text\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"editor\\\"></jj-code-editor>\\n\",\r\n  \"less\": \"jj-code-editor{\\n  height: 100%;\\n}\",\r\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  form.editor.value   = body;\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=>{\\n  return form.editor.value;\\n}\\n\\n\",\r\n  \"uuid\": \"1b989db2-9f0d-468a-93b2-d9abb5bc3279\"\r\n}","URI":"app.640.text.studio","TYPE":"page"},{"NAME":"app.640.theme.studio","BODY":"{\r\n  \"html\": \"<jj-div4box jj-id=\\\"div4box\\\" data-mode =\\\"show13\\\" data-is-theme=\\\"true\\\"></jj-div4box>\",\r\n  \"less\": \"\",\r\n  \"script\": \"\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource=(body)=>{\\n  form.div4box.value = body;\\n}\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\n/* less의 내용은 미리 css로 변환하여 처리함 */\\nform.getSource=()=>{\\n  return form.div4box.value;\\n}\\n\\nform.excute=()=>{\\n  form.div4box.excute();\\n}\",\r\n  \"uuid\": \"5b95d9aa-c435-4a64-b1e7-36b390d5fd4c\"\r\n}","URI":"app.640.theme.studio","TYPE":"page"},{"NAME":"app.640.vhtml.runtime","BODY":"{\r\n    \"uuid\": \"046f138a-bf41-4775-a305-72459f1fda67\",\r\n    \"html\": \"\",\r\n    \"css\": \"\",\r\n    \"less\": \"\",\r\n    \"script\": \"/**\\n * 페이지는 내장명령과 동일하기 때문에\\n * 공통의 로직만 구현한다\\n */\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n  \\n  form.bindHtml(body);\\n  form.bindCss(body);\\n  form.bindScript(body);\\n};\"\r\n}","URI":"app.640.vhtml.runtime","TYPE":"page"},{"NAME":"app.640.vhtml.studio","BODY":"{\r\n  \"uuid\": \"1a825a5b-119c-4bdd-b6d8-825a807c9aeb\",\r\n  \"html\": \"<jj-el-toolbar jj-id=\\\"toolbar\\\"></jj-el-toolbar>\\n<div class=\\\"vhtml-article\\\">\\n\\t<side class=\\\"vhtml-left\\\">\\n\\t\\t<jj-domtree jj-id=\\\"domtree\\\" class=\\\"guide-line\\\"></jj-domtree>\\n  </side>  \\n  <article>\\n    <div class=\\\"code-tabcontent\\\">\\n      <ul class=\\\"nav nav-tabs jj-tabs\\\">\\n        <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link vhtml active\\\" data-target=\\\"tab0\\\" href=\\\"#\\\">VHTML</a></li>\\n        <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link\\\" data-target=\\\"tab1\\\" href=\\\"#\\\">script</a></li>\\n        <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link \\\" data-target=\\\"tab2\\\" href=\\\"#\\\">less</a></li>\\n        <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link \\\" data-target=\\\"tab3\\\" href=\\\"#\\\">html</a></li>\\n        <li class=\\\"nav-item\\\" title=\\\"script\\\"><a class=\\\"nav-link \\\" data-target=\\\"tab4\\\" href=\\\"#\\\">bizModel</a></li>\\n      </ul>\\n      <div class=\\\"tab-content\\\">\\n        <div role=\\\"tabpanel\\\" data-target=\\\"tab0\\\" class=\\\"tab-pane active\\\">\\n\\t\\t\\t\\t\\t<jj-frame-editor jj-id=\\\"frameEditor\\\" class=\\\"jj-frame-viewer\\\"></jj-frame-editor>\\n        </div>\\n        <div role=\\\"tabpanel\\\" data-target=\\\"tab1\\\" class=\\\"tab-pane active\\\">\\n          <jj-code-editor data-mode=\\\"javascript\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"scriptEditor\\\"></jj-code-editor>\\n        </div>\\n        <div role=\\\"tabpanel\\\" data-target=\\\"tab2\\\" class=\\\"tab-pane active\\\">\\n          <div class=\\\"btn-group\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"cssApply\\\" ><i class=\\\"fa fa-upload\\\" aria-hidden=\\\"true\\\"></i> cssApply</button>\\n          </div>\\n          <jj-code-editor data-mode=\\\"less\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"lessEditor\\\"></jj-code-editor>\\n        </div>\\n        <div role=\\\"tabpanel\\\" data-target=\\\"tab3\\\" class=\\\"tab-pane active\\\">\\n          <div class=\\\"btn-group\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"exportHtml\\\"><i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> export HTML</button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"htmlApply\\\"><i class=\\\"fa fa-upload\\\" aria-hidden=\\\"true\\\"></i> import HTML</button>\\n          </div>\\n          <jj-code-editor data-mode=\\\"html\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"htmlEditor\\\"></jj-code-editor>\\n        </div>\\n        <div role=\\\"tabpanel\\\" data-target=\\\"tab4\\\" class=\\\"tab-pane active\\\">\\n          <div class=\\\"btn-group\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"exportRule\\\"><i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> export Rule</button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\" jj-command=\\\"importRule\\\"><i class=\\\"fa fa-upload\\\" aria-hidden=\\\"true\\\"></i> import Rule</button>\\n          </div>\\n          <jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"ruleEditor\\\"></jj-code-editor>\\n        </div>\\n      </div>\\n    </div>     \\n  </article>\\n\\t<side class=\\\"vhtml-right\\\">\\n    <jj-attribute jj-id=\\\"attribute\\\"></jj-attribute>\\n    <jj-style jj-id=\\\"styleTree\\\"></jj-style>\\n  </side>  \\n</div>\\n\",\r\n  \"less\": \"& > article{\\n  > jj-el-toolbar{\\n    height: 40px;\\n  }\\n  .vhtml-article{\\n    display:flex;\\n    flex-direction: row;\\n    position:absolute;\\n    top: 40px;\\n    left:0;\\n    right:0;\\n    bottom:0;\\n    >side{\\n      width:240px;\\n      flex: none;\\n      &.vhtml-right{\\n        overflow:auto;\\n      }\\n    }\\n    >article{\\n      flex-grow:1;\\n\\n      >.code-tabcontent{\\n        position:relative;\\n        height:100%;\\n        padding: 5px;\\n  \\t\\t\\tborder-left: 1px solid #ccc;\\n  \\t\\t\\tborder-right: 1px solid #ccc;\\n        \\n        >.nav-tabs{\\n          height:40px; \\n        }\\n        .tab-content{\\n          position: absolute;\\n          top:40px;\\n          bottom:5px;\\n\\t\\t      left: 5px;\\n    \\t\\t\\tright: 5px;\\n          padding: 0;\\n          >.tab-pane{\\n            height: 100%;\\n          }\\n        }\\n      }\\n      \\n      \\n    }\\n  }\\n}\\n\\n&.excute {\\n  >article{\\n    >jj-el-toolbar {\\n      display: none;\\n    }\\n    >.vhtml-article{\\n      top: 0;\\n      -webkit-transition: 0.4s;\\n      >.vhtml-left, >.vhtml-right{\\n        width:0;\\n        display:none;\\n      }\\n      >article >.code-tabcontent {\\n        >.nav-tabs{\\n        display: none;\\n        flex:none;\\n        }\\n        >.tab-content{\\n          top: 0;\\n          -webkit-transition: 0.4s;\\n        }\\n      }\\n    }\\n  }\\n\\n}\",\r\n  \"script\": \"/**\\n * codeeditor의 초기크기를 설정하기 위해서\\n * active 시킨것을 탭을 감추기위한 동작\\n */\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource=(body)=>{\\n  let fileBody = Jinja.global.json(body||\\\"{}\\\");\\n  //form.frameEditor.value = fileBody.html||\\\"\\\";\\n  form.frameEditor.setFileBody(fileBody);\\n  form.htmlEditor.value   = fileBody.html;\\n  form.scriptEditor.value = fileBody.script;\\n  form.lessEditor.value = fileBody.less;\\n  form.ruleEditor.value = fileBody.rule;\\n}\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\n/* less의 내용은 미리 css로 변환하여 처리함 */\\nform.getSource=()=>{\\n  return Jinja.global.string({\\n    \\\"uuid\\\": Jinja.global.uuid(),\\n    \\\"html\\\": Jinja.dom.exportCleaning(form.frameEditor.value),\\t\\n    \\\"less\\\": form.lessEditor.value,\\t\\n    \\\"script\\\": form.scriptEditor.value,\\n    \\\"rule\\\": form.ruleEditor.value\\n  });\\n}\\nlet isTestMode = false;\\nform.excute=()=>{\\n  //현재가 태스트모드이면 디자인모드로 변환\\n  if(isTestMode){\\n    form.classList.remove(\\\"excute\\\");\\n    form.frameEditor.editeMode();\\n    isTestMode = false;\\n  } else {\\n    form.querySelector(\\\".nav-link.vhtml\\\").click();  \\n    form.classList.add(\\\"excute\\\");\\n\\t  let body = Jinja.global.json(form.getSource());\\n  \\tform.frameEditor.excute(body);\\n    isTestMode = true;\\n  }\\n}\\n\\nform.cssApply=()=>{\\n\\tform.frameEditor.setBodyStyle(form.lessEditor.value);\\n}\\nform.htmlApply=()=>{\\n\\tform.frameEditor.value = form.htmlEditor.value;\\n}\\n\\n\\nform.frameEditor.addEventListener(\\\"excute\\\", e=>{\\n  form.excute();\\n});\\n\\nform.frameEditor.addEventListener(\\\"loadEditor\\\", e=>{\\n\\tform.domtree.setDom(e.detail.editor);\\n\\tform.toolbar.setEdit(form.frameEditor)\\n\\tform.domtree.setEdit(form.frameEditor);\\n\\n  setTimeout(()=>{\\n    form.querySelector(\\\".nav-link.active\\\").click();  \\n  },200)\\n  \\n})\\n\\nform.frameEditor.addEventListener(\\\"selected\\\", e=>{\\n\\n  let nodeEl = e.detail.editor;\\n  form.domtree.activeNode(nodeEl, true);\\n  form.attribute.activeNode(nodeEl, true);\\n  form.styleTree.activeNode(nodeEl, true);\\n  form.toolbar.activeNode(nodeEl, true);\\n})\\n\\nform.frameEditor.addEventListener(\\\"unselected\\\", e=>{\\n  form.domtree.activeNode();\\n  form.attribute.activeNode();\\n  form.styleTree.activeNode();\\n  form.toolbar.activeNode();\\n})\\n\\nform.domtree.addEventListener(\\\"treeClick\\\", e=>{\\n  let nodeEl = e.detail.data.nodeData;\\n  form.frameEditor.activeNode(nodeEl);\\n  form.attribute.activeNode(nodeEl, true);\\n  form.styleTree.activeNode(nodeEl, true);\\n})\\n\\n\"\r\n}","URI":"app.640.vhtml.studio","TYPE":"page"},{"NAME":"app.640.well.runtime","BODY":"{\r\n  \"html\": \"<div class=\\\"row\\\">\\n  <div class=\\\"col-12\\\">\\n    <div class=\\\"page-title-box\\\">\\n      <div class=\\\"page-title-right\\\">\\n        <ol class=\\\"breadcrumb m-0\\\">\\n          <li class=\\\"breadcrumb-item\\\"><a href=\\\"javascript: void(0);\\\">Minton</a></li>\\n          <li class=\\\"breadcrumb-item\\\"><a href=\\\"javascript: void(0);\\\">Apps</a></li>\\n          <li class=\\\"breadcrumb-item active\\\">Companies</li>\\n        </ol>\\n      </div>\\n      <h4 class=\\\"page-title\\\">${data.title}</h4>\\n    </div>\\n  </div>\\n</div>    \\n<div class=\\\"row\\\">\\n  <div class=\\\"col-12\\\">\\n    <div class=\\\"card-list\\\"  j-for=\\\"row in data.rows\\\" j-page=20000 pager=\\\"pager\\\">\\n      <div class=\\\"card\\\">\\n        <div class=\\\"card-header\\\">\\n          <h5 class=\\\"card-title\\\">\\n            <img img-src=\\\"/repository/users/${row.REG_USER_ID}\\\" \\n                 alt=\\\"${row.REG_USER_NAME}\\\" \\n                 style=\\\"width:34px;\\\"\\n                 onerror=\\\"this.src='/repository/systemImages/etc/user.jpg'\\\">\\n            <t>${row.REG_USER_NAME}</t><b>${row._index}</b>\\n            <t class=\\\"well-date\\\">${row.SHOW_DATE}</t>\\n            <div class=\\\"btn-group  pull-right\\\">\\n              <button type=\\\"button\\\" class=\\\"btn btn-link dropdown-toggle waves-effect waves-light\\\" data-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                <i class=\\\"fa fa-ellipsis-h\\\" aria-hidden=\\\"true\\\"></i>\\n              </button>\\n              <div class=\\\"dropdown-menu dropdown-menu-right\\\">\\n                <a jj-command=\\\"writeComment('${row.BOARD_ID}')\\\" class=\\\"dropdown-item\\\" href=\\\"#\\\">조회</a>\\n                <a jj-command=\\\"modiWell('${row.BOARD_ID}')\\\" class=\\\"dropdown-item\\\" href=\\\"#\\\">수정</a>\\n                <a j-method=\\\"delete('${row.BOARD_ID}',${row._index})\\\" class=\\\"dropdown-item\\\" href=\\\"#\\\">삭제</a>\\n              </div>\\n            </div>\\n          </h5>\\n        </div>\\n        <div class=\\\"card-body p-0\\\">\\n          <jj-div-editor class=\\\"well-body\\\" data-bind=\\\"row.BODY\\\"></jj-div-editor>\\n        </div>\\n        <img class=\\\"img-fluid ${row.IMAGE?'':'hidden'}\\\" \\n             onerror=\\\"this.src='/repository/systemImages/team/img1-md.jpg'\\\"\\n             data-bind=\\\"row.IMAGE\\\" alt=\\\"image\\\">\\n        <div class=\\\"card-body\\\">\\n          <div class=\\\"count-wrap pull-right\\\">\\n            <t jj-command=\\\"writeComment('${row.BOARD_ID}')\\\"><i class=\\\"fa fa-photo\\\" aria-hidden=\\\"true\\\"></i>${row.IMAGE_CNT}개 있음</t>\\n            <t jj-command=\\\"writeComment('${row.BOARD_ID}')\\\"><i class=\\\"fa fa-paperclip\\\" aria-hidden=\\\"true\\\"></i>${row.FILE_CNT}개 있음</t>\\n            <t jj-command=\\\"showReader('${row.BOARD_ID}')\\\"><i class=\\\"fa fa-eye\\\" aria-hidden=\\\"true\\\"></i>${row.READER_CNT}/4명 읽음</t>\\n          </div>\\n          <button class=\\\"btn btn-link btn-like ${row.LIKE_ME?'me':''} \\\" j-method=\\\"readerSend('${row.BOARD_ID}')\\\"><i class=\\\"fa fa-thumbs-o-up\\\" aria-hidden=\\\"true\\\"></i> 좋아요(${row.READER_CNT})</button>\\n          <button class=\\\"btn btn-link btn-comment  ${row.COMMENT_ME?'me':''}\\\" jj-command=\\\"writeComment('${row.BOARD_ID}')\\\"><i class=\\\"fa fa-comment-o\\\" aria-hidden=\\\"true\\\"></i> 댓글작성(${row.COMMENT_CNT})</button>\\n        </div>\\n        <div class=\\\"card-body\\\">\\n          <div class=\\\"inbox-widget\\\"  j-for=\\\"comment in row.COMMENT\\\" j-page=\\\"200\\\">\\n            <div class=\\\"inbox-item\\\" data-comment-id=\\\"${comment.COMMENT_ID}\\\" data-row-index=\\\"${comment._index}\\\">\\n              <a href=\\\"#\\\">\\n                <div class=\\\"inbox-item-img\\\">\\n                  <img img-src=\\\"/repository/users/${comment.REG_USER_ID}\\\" \\n                       alt=\\\"${comment.REG_USER_NAME}\\\" \\n                       class=\\\"img-thumbnail rounded-circle\\\"\\n                       style=\\\"width:34px;\\\"\\n                       onerror=\\\"this.src='/repository/systemImages/etc/user.jpg'\\\"></div>\\n                <p class=\\\"inbox-item-author\\\">${comment.REG_USER_NAME}\\n                \\t<span class=\\\"editToolbar\\\">\\n                    <button jj-command=\\\"editComment('${comment.COMMENT_ID}')\\\" class=\\\"btn btn-icon btn-sm waves-effect waves-light btn-warning\\\" title=\\\"수정\\\"><i class=\\\"fa fa-wrench\\\"></i> <div class=\\\"waves-ripple waves-rippling\\\" data-hold=\\\"1582310012681\\\" data-x=\\\"12.859375\\\" data-y=\\\"16.375\\\" data-scale=\\\"scale(1.26)\\\" data-translate=\\\"translate(0,0)\\\" style=\\\"top:16.375px;left:12.859375px;-webkit-transform:scale(1.26) translate(0,0);-moz-transform:scale(1.26) translate(0,0);-ms-transform:scale(1.26) translate(0,0);-o-transform:scale(1.26) translate(0,0);transform:scale(1.26) translate(0,0);opacity:1;-webkit-transition-duration:500ms;-moz-transition-duration:500ms;-o-transition-duration:500ms;transition-duration:500ms;\\\"></div></button>\\n                 \\t\\t<button jj-command=\\\"deleteComment('${comment.COMMENT_ID}')\\\" class=\\\"btn btn-icon btn-sm waves-effect waves-light btn-danger\\\" title=\\\"삭제\\\"><i class=\\\"fas fa-times\\\"></i> <div class=\\\"waves-ripple waves-rippling\\\" data-hold=\\\"1582310016713\\\" data-x=\\\"14.859375\\\" data-y=\\\"20.375\\\" data-scale=\\\"scale(1.17)\\\" data-translate=\\\"translate(0,0)\\\" style=\\\"top:20.375px;left:14.859375px;-webkit-transform:scale(1.17) translate(0,0);-moz-transform:scale(1.17) translate(0,0);-ms-transform:scale(1.17) translate(0,0);-o-transform:scale(1.17) translate(0,0);transform:scale(1.17) translate(0,0);opacity:1;-webkit-transition-duration:500ms;-moz-transition-duration:500ms;-o-transition-duration:500ms;transition-duration:500ms;\\\"></div></button>\\n                  </span>\\t\\n                </p>\\n                <jj-div-editor class=\\\"inbox-item-text\\\" data-bind=\\\"comment.BODY\\\"></jj-div-editor>\\n                <p class=\\\"inbox-item-date\\\">${comment.SHOW_DATE}</p>\\n              </a>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"card-footer\\\">\\n          <div class=\\\"comment-edit-wrap sm\\\" >\\n            <div class=\\\"comment-edit-box d-flex flex-row\\\">\\n              <jj-div-editor class=\\\"comment-body flex-grow-1\\\" contenteditable=\\\"true\\\" tabindex=\\\"0\\\" edit-target=\\\"${row.BOARD_ID}\\\"></jj-div-editor>  \\n              <button jj-command=\\\"commentSend('${row.BOARD_ID}',${row._index})\\\" class=\\\"btn btn-link  flex-grow-0 comment-edit-commit\\\" aria-label=\\\"commentSend\\\"> \\n                <i class=\\\"fa fa-plane\\\"></i>\\n              </button>\\n            </div>\\n          </div>  \\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>   \\n\\n<nav jj-id=\\\"menusm\\\" class=\\\"jj-icon-menu-toggle\\\" >\\n  <label class=\\\"menu-open-button jj-toggle\\\" data-target=\\\"self\\\">\\n    <i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i>\\n  </label>\\n  <a class=\\\"menu-item\\\" jj-command=\\\"newWell\\\"> <i class=\\\"fa fa-pencil\\\"></i><t>글쓰기</t></a>\\n  <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-coffee\\\"></i><t>save2</t></a>\\n  <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-heart\\\"></i><t>save3</t></a>\\n  <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-microphone\\\"></i><t>save4</t></a>\\n  <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-star\\\"></i><t>save5</t></a>\\n  <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-diamond\\\"></i><t>save6</t></a>\\n</nav>\\n\\n\",\r\n  \"less\": \"button *{\\n  pointer-events: none;\\n}\\n\\n.jj-icon-menu-toggle {\\n    position: fixed;\\n    bottom: 70px;\\n    right: 70px;\\n    left: auto;\\n}\\n\\nimg.hidden{\\n  display:none;\\n}\\n\\npre.card-text {\\n   margin: 0;\\n   padding: 5px;\\n   white-space: pre-line;\\n}\\n.comment-body, .comment-edit-commit{\\n  background-color: white;\\n}\\n\\n.btn-link.me{\\n  color: red!important;\\n}\\n.inbox-item{\\n  .editToolbar{ display: none}\\n  &:hover{\\n    .editToolbar{ display: inline-block}\\n  }\\n}\",\r\n  \"script\": \"/*jshint sub:true*/ \\n\\n/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n --------------------------------------------------------------------------------------------------- */\\nform.classList.add('onApp');\\nform.boardCateCd = \\\"\\\";\\nform.lastRegTime = null;\\n\\nform.config={\\n  \\\"data\\\":{\\n    \\\"findword\\\":\\\"\\\",\\n    \\\"title\\\": \\\"\\\",\\n    \\\"boardNote\\\":\\\"\\\",\\n    \\\"commentBody\\\":\\\"뎃글을달아주세요\\\",\\n    \\\"menuPath\\\":[\\n      {\\\"title\\\":\\\"home\\\", \\\"link\\\":\\\"#\\\"},\\n      {\\\"title\\\":\\\"compay\\\", \\\"link\\\":\\\"#\\\"},\\n      {\\\"title\\\":\\\"info\\\", \\\"link\\\":\\\"#\\\"}\\n    ],\\n    \\\"sseNotification\\\":[],\\n    \\\"rows\\\": []\\n  },\\n  \\\"methods\\\": {\\n    \\\"getSearch\\\": ()=>{\\n      let findWord = form.config.data.findword || \\\"ALL\\\";\\n      Jinja.ajax.get(`/v61/board/${form.boardCateCd}/search/${findWord}`,{\\n        \\\"FIELD\\\": \\\"TITLE\\\"\\n      })\\n        .then(result=>form.config.data.rows = result.rows)\\n        .then(result=>form.config.data.mode = \\\"list\\\")\\n    },\\n    \\\"showWellList\\\": (rows)=>{\\n      let showdatas = rows.map(row=>{\\n        row.USER_IMAGE = \\\"/repository/systemImages/etc/user.jpg\\\";\\n        row.SHOW_DATE = Jinja.global.dateFormat(new Date(row.REG_DATETIME), 'MM월dd일 ap hh:mm');\\n        let att = Jinja.global.json(row.ATT_FILES);\\n        row.FILE_CNT = att.files.length;\\n        row.IMAGE_CNT = att.images.length;\\n        row.COMMENT.forEach(comment=>{\\n          comment.SHOW_DATE = Jinja.global.dateFormat(new Date(comment.REG_DATETIME), 'MM월dd일 ap hh:mm');\\n        });\\n        \\n        return row;      \\n      });\\n\\n      showdatas.forEach(row=>form.config.data.rows.push(row));\\n      if(form.config.data.rows.length){\\n      \\tform.lastRegTime = new Date(form.config.data.rows[form.config.data.rows.length-1][\\\"REG_DATETIME\\\"]);\\n      }\\n\\n\\n    },\\n    \\\"getList\\\": ()=>{\\n      let getOption = {};\\n      if(form.lastRegTime){\\n        getOption[\\\"LAST_REGTIME\\\"] = form.lastRegTime;\\n      }\\n      return Jinja.ajax.get(`/v61/board/${form.boardCateCd}/well`, getOption)\\n        .then(result=>result.rows.filter((row,index)=>index<10))\\n        .then(rows=>this.config.methods.showWellList(rows));\\n      /*      \\n        .then(result=>form.config.data.rows = result.rows.map(row=>{\\n        row.USER_IMAGE = \\\"/repository/systemImages/etc/user.jpg\\\";\\n        row.SHOW_DATE = Jinja.global.dateFormat(new Date(row.REG_DATETIME), 'MM월dd일 ap hh:mm');\\n        let att = Jinja.global.json(row.ATT_FILES);\\n        row.FILE_CNT = Jinja.global.json(att.files).length;\\n        row.IMAGE_CNT = Jinja.global.json(att.images).length;\\n        return row;\\n      }))\\n*/      \\n    },\\n    \\\"readerSend\\\": async (boardId, e)=>{\\n      // 현재 좋아요 상태이면 reset 0 / 아니면 set 1을 넘긴다\\n      let likeScore = e.target.classList.contains('me')?0:1;\\n      let sendRlt = await Jinja.ajax.post(`/v61/board/${form.boardCateCd}/${boardId}/like/${likeScore}`);\\n      e.target.classList.toggle('me');\\n      Jinja.json.getRowsColFilter(form.config.data.rows, \\\"BOARD_ID\\\", boardId).forEach(row=>{\\n        row.READER_CNT += e.target.classList.contains('me')?1:-1;\\n      })\\n    },    \\n    \\\"delete\\\":(boardId, rowIndex)=>{\\n      debugger;\\n      if(Jinja.uo.USER_NAME == \\\"GUEST\\\"){\\n        alert(\\\"관리자권한이 필요합니다\\\");\\n        Jinja.auth.reqLogin();\\n      } else {\\n        Jinja.confirm.delete(`Delete OK?`)\\n          .then((chooice)=>{\\n          if(chooice === \\\"YES\\\"){\\n          Jinja.ajax.delete(`/v61/board/${form.boardCateCd}/${boardId}`)\\n            .then(result=>form.config.data.rows.removeIndex(rowIndex))\\n          }\\n        })\\n          .catch(()=>{});\\n      }\\n    },\\n  },\\n  \\\"watchs\\\": {\\n  },\\n  \\\"onLoad\\\":()=>{\\n    //form.config.methods.getList();\\n  }\\n};\\n\\nform.bo = new JJReact(form, form.config);\\n\\nform.deleteComment=(commentId)=>{\\n  Jinja.confirm.delete(`Delete OK?`)\\n    .then(()=>Jinja.ajax.delete(`/v61/board/comment/${commentId}`))\\n    .then(result=>form.querySelector(`[data-comment-id=\\\"${commentId}\\\"]`).remove())        \\n    .catch(()=>{});\\n}\\n\\nform.editComment=(commentId)=>{\\n \\n\\tlet edit = form.form.querySelector(`[data-comment-id=\\\"${commentId}\\\"] .inbox-item-text`);        \\n  let resultText;\\n  JJform.open(\\\"app610.editcomment.uc\\\",{ \\n    \\\"search\\\": edit.value,  \\n    \\\"position\\\": {\\n      \\\"width\\\": \\\"80%\\\"\\n    },\\n\\t  \\\"isEnterClose\\\": false,\\n  \\tisModal: true,\\n    isMoveable: true\\n  })    \\n    .then(result=>Jinja.ajax.patch(`/v61/board/comment/${commentId}`, {\\n      \\\"BODY\\\": result\\n    }); \\n    .then(result=>edit.value = resultText;\\n    .catch(ex=>{});  \\n}\\n\\n\\nform.newWell=()=>{\\n\\n  JJform.open(\\\"app610.editwell.uc\\\",{ \\n    \\\"search\\\":{\\n\\t    \\\"boardCateCd\\\":form.boardCateCd,\\n    },  \\n    \\\"position\\\": {\\n      \\\"width\\\": \\\"80%\\\"\\n    },\\n\\t  \\\"isEnterClose\\\": false,\\n  \\tisModal: true,\\n    isMoveable: true\\n  })    \\n    .then(result=>form.reopen())\\n    .catch(ex=>{})\\n}\\nform.modiWell=(boardId)=>{\\n\\n  JJform.open(\\\"app610.editwell.uc\\\",{ \\n    \\\"search\\\":{\\n    \\\"boardCateCd\\\":form.boardCateCd,\\n    \\\"boardId\\\": boardId\\n    },  \\n    \\\"isEnterClose\\\": false,\\n    isModal: true,\\n    isMoveable: true\\n  })    \\n    .then(result=>{\\n\\t    form.reopen();\\n  })\\n    .catch(ex=>{})\\n}\\nform.writeComment=(boardId)=>{\\n  JJform.open(\\\"app610.show.comment.uc\\\",{ \\n    \\\"search\\\":{\\n      \\\"boardCateCd\\\":form.boardCateCd,\\n      \\\"boardId\\\": boardId,\\n      \\\"hidenOk\\\": true\\n    },  \\n    \\\"position\\\": {\\n      \\\"width\\\": \\\"80%\\\"\\n    },\\n    \\\"isEnterClose\\\": false,\\n    isModal: true,\\n    isMoveable: true\\n  })    \\n    .then(result=>{\\n\\n  })\\n    .catch(ex=>{})\\n    \\n}\\n\\nform.showReader=(boardId)=>{\\n  \\n  JJform.open(\\\"app610.show.reader.uc\\\",{ \\n    \\\"search\\\":{\\n      \\\"boardCateCd\\\":form.boardCateCd,\\n      \\\"boardId\\\": boardId,\\n      \\\"hidenOk\\\": true\\n    },  \\n    \\\"position\\\": {\\n      \\\"width\\\": \\\"80%\\\"\\n    },\\n    \\\"isEnterClose\\\": false,\\n    isModal: true,\\n    isMoveable: true\\n  })    \\n    .then(result=>{\\n\\n  })\\n    .catch(ex=>{})\\n    \\n}\\n\\nlet last_known_scroll_position = 0;\\nlet ticking = false;\\nlet dataSearching = false;\\n\\nfunction doSomething(scroll_pos) {\\n  // scroll 위치에 대한 작업을 하세요\\n  let parentBottom = form.form.querySelector(\\\".content\\\").getBoundingClientRect().y + \\n      form.form.querySelector(\\\".content\\\").offsetHeight +\\n      200 ; // margin\\n\\n  if (form.loading.getBoundingClientRect().y < parentBottom){ //} Jinja.dom.isVisible(form.loading)){\\n    dataSearching = true;\\n    \\n    form.config.methods.getList()\\n      .then(()=>dataSearching = false);\\n    //  $topMessage(\\\"스크롤 발생함: \\\"+last_known_scroll_position);  \\n  }\\n}\\n\\n\\n\\nform.reopen = () =>{\\n  // 스크롤 서치를 방지하기 위해서 true 처리함\\n  dataSearching = true;\\n  form.config.data.rows = [];\\n  form.lastRegTime = null;\\n  form.config.methods.getList()\\n  .then(()=>dataSearching = false);\\n};\\n\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  body = Jinja.global.json(body||\\\"{}\\\");\\n\\n  form.boardCateCd = form.fileInfo.ID;  \\n  form.config.data.title = body.title; \\n  form.config.data.boardNote = body.boardNote; \\n  if(body.sideMenu){\\n    form.sideMenu.setAttribute(\\\"jj-uri\\\", body.sideMenu);\\n    form.form.querySelector(\\\"div.container main\\\").style.marginLeft=\\\"20px\\\";\\n  }\\n  form.config.methods.getList();\\n};\\n\\nform.event.on(\\\"keydown\\\", \\\".comment-body\\\", e=>{\\n  let keyMap =  Jinja.global.getEventKeyMap(e);\\n  if(keyMap === \\\"Enter\\\"){\\n    e.target.nextElementSibling.click();\\n  }\\n});\\n\\nform.commentSend=(boardId, rowIndex)=>{\\n  let commentData = {\\n    \\\"COMMENT_ID\\\": Jinja.global.uuid(),\\n    \\\"PARENT_TYPE\\\": \\\"BOARD\\\",\\n    \\\"PARENT_ID\\\":  boardId,\\n    \\\"BODY\\\": form.form.querySelector(`[edit-target=\\\"${boardId}\\\"]`).innerText\\n  }\\n  Jinja.ajax.post(`/v61/board/comment`,commentData)\\n    .then(()=>{\\n    let board = form.config.data.rows[rowIndex];\\n    board.COMMENT.push(Object.assign(commentData, {\\n      \\\"LIKE_CNT\\\": 0,\\n      \\\"ATT_FILES\\\": null,\\n      \\\"REG_DATETIME\\\": new Date(),\\n      \\\"REG_USER_ID\\\": Jinja.uo.USER_ID ,\\n      \\\"REG_USER_NAME\\\": Jinja.uo.USER_NAME,\\n      \\\"SHOW_DATE\\\": Jinja.global.dateFormat(new Date(), 'MM월dd일 ap hh:mm')\\n    }))\\n    form.form.querySelector(`[edit-target=\\\"${boardId}\\\"]`).innerText = \\\"\\\"; \\n  });\\n};\\n\\nform.refreshComment=(boardId)=>{\\n  let orgBoardRow = form.config.data.rows.filter(row=>row.BOARD_ID == boardId)[0];\\n  if(orgBoardRow){\\n    Jinja.ajax.get(`/module/board/v6/${form.boardCateCd}/${boardId}`)\\n      .then(result=>{\\n      result.COMMENT.forEach(comment=>{\\n        comment.SHOW_DATE = Jinja.global.dateFormat(new Date(comment.REG_DATETIME), 'MM월dd일 ap hh:mm');\\n      });\\n      orgBoardRow.COMMENT = result.COMMENT;\\n      orgBoardRow.READER_CNT = result.READER.length;\\n      orgBoardRow.COMMENT_CNT = result.COMMENT.length;\\n    });\\n  }\\n}\\n//form.openUri(\\\"a8db5b76-9ef4-412e-950a-87b72ae7c72f\\\");\",\r\n  \"uuid\": \"f27ca8ed-d668-4ae8-8706-acd00efa9dcd\"\r\n}","URI":"app.640.well.runtime","TYPE":"page"},{"NAME":"app.640.well.studio","BODY":"{\r\n  \"html\": \"<div class=\\\"row\\\">\\n  <div class=\\\"col-12\\\">\\n    <div class=\\\"card-box\\\">\\n      <div class=\\\"inbox-leftbar\\\" jj-id=\\\"form1\\\">\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"control-label\\\">Name:</label>\\n          <input data-bind=\\\"data.name\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"control-label\\\">Title:</label>\\n          <input data-bind=\\\"data.title\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"control-label\\\">boardNote:</label>\\n          <textarea data-bind=\\\"data.boardNote\\\" type=\\\"text\\\" class=\\\"form-control\\\"></textarea>\\n        </div>\\n      </div>\\n      <div class=\\\"inbox-rightbar\\\" jj-id=\\\"form2\\\">\\n        <div class=\\\"container\\\" board-mode=\\\"${data.mode}\\\">\\n          <section class=\\\"board-head\\\">\\n            <h2 class=\\\"\\\">${data.title} <small>${data.mode}</small></h2>\\n          </section>    \\n          <section class=\\\"board-list\\\">\\n            <div class=\\\"well-list\\\"  j-for=\\\"row in data.rows\\\" j-page=5 pager=\\\"pager\\\">\\n              <div class=\\\"well-card\\\">\\n                <div class=\\\"well-header\\\">\\n                  <t class=\\\"well-date\\\">${row.SHOW_DATE}</t>\\n                  <img src=\\\"/repository/users/${row.REG_USER_ID}\\\" \\n                       alt=\\\"${row.REG_USER_NAME}\\\" \\n                       onerror=\\\"this.src='/repository/systemImages/etc/user.jpg'\\\">\\n                  <t>${row.REG_USER_NAME}</t>\\n                </div>\\n              </div>\\n              <div class=\\\"well-body\\\">\\n                <img class=\\\"img-responsive\\\" src=\\\"/repository/systemImages/main/24.jpg\\\" alt=\\\"Card image cap\\\"  onerror=\\\"this.src='/repository/systemImages/team/img1-sm.jpg'\\\">\\n                <pre class=\\\"card-text\\\">\\n            ${row.BODY}\\n          </pre>\\n              </div>\\n              <div class=\\\"well-foot\\\">\\n                <a class=\\\"btn btn-primary btn-sm\\\">Go somewhere</a>\\n                <a class=\\\"btn btn-primary btn-sm\\\">Go somewhere</a>\\n              </div>\\n            </div>\\n\\n            <nav class=\\\"jj-icon-menu-toggle\\\">\\n              <label class=\\\"menu-open-button jj-toggle\\\" data-target=\\\"self\\\">\\n                <i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i>\\n              </label>\\n              <a class=\\\"menu-item\\\" j-method=\\\"setEdit\\\"> <i class=\\\"fa fa-pencil\\\"></i><t>글쓰기</t></a>\\n              <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-coffee\\\"></i><t>save2</t></a>\\n              <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-heart\\\"></i><t>save3</t></a>\\n              <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-microphone\\\"></i><t>save4</t></a>\\n              <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-star\\\"></i><t>save5</t></a>\\n              <a class=\\\"menu-item\\\"> <i class=\\\"fa fa-diamond\\\"></i><t>save6</t></a>\\n            </nav>\\n\\n          </section>\\n          <section class=\\\"board-view\\\">\\n            <p>\\n              <a j-method=\\\"viewMode('list')\\\">목록</a>\\n              <a j-method=\\\"setEdit\\\">수정</a>\\n              <a j-method=\\\"delete\\\">삭제</a>\\n            </p>\\n\\n            <h3>${data.info.TITLE}</h3>  \\n\\n\\n            <ul class=\\\"list-inline pull-right\\\">\\n              <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-thumbs-up\\\" aria-hidden=\\\"true\\\"></i><t>2.9천</t></a></li>\\n              <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-thumbs-down\\\" aria-hidden=\\\"true\\\"></i><t>460</t></a></li>\\n              <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-external-link\\\" aria-hidden=\\\"true\\\"></i><t>공유</t></a></li>\\n              <li class=\\\"list-inline-item\\\"><a href=\\\"#\\\" class=\\\"text-muted\\\"><i class=\\\"fa fa-plus-circle\\\" aria-hidden=\\\"true\\\"></i><t>저장</t></a></li>\\n              <li class=\\\"list-inline-item dropdown\\\">\\n                <a href=\\\"#\\\" class=\\\"dropdown-toggle text-muted\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"true\\\">\\n                  <i class=\\\"fa fa-ellipsis-h\\\" style=\\\"width: 11px;\\\"></i>\\n                </a>\\n                <ul class=\\\"dropdown-menu dropdown-menu-right\\\">\\n                  <li><a href=\\\"#\\\">Action</a></li>\\n                  <li><a href=\\\"#\\\">Another action</a></li>\\n                  <li><a href=\\\"#\\\">Something else here</a></li>\\n                  <li role=\\\"separator\\\" class=\\\"divider\\\"></li>\\n                  <li><a href=\\\"#\\\">Separated link</a></li>\\n                </ul>\\n\\n              </li>\\n            </ul>\\n\\n            <label>${data.info.TAG}</label>\\n            <p jj-id=\\\"viewBody\\\"></p>\\n            <div jj-id=\\\"attachView\\\"></div>\\n            <p>\\n              <a j-method=\\\"viewMode('list')\\\">목록</a>\\n              <a j-method=\\\"setEdit\\\">수정</a>\\n              <a j-method=\\\"delete\\\" class=\\\"${Jinja.uo.USER_NAME=='GUEST'?'hidden':'')\\\">삭제</a>\\n            </p>\\n          </section>\\n          <section class=\\\"board-edit\\\">\\n            <div class=\\\"board-box\\\">\\n              <div class=\\\"alert alert-info\\\" role=\\\"alert\\\">\\n                <span class=\\\"avatar\\\">\\n                  <img class=\\\"img-responsive img-circle\\\" src=\\\"https://studio600.appspeed.net/repository/systemImages/team/smkim3.jpg\\\" alt=\\\"...\\\" style=\\\"width:64px;\\\"  onerror=\\\"this.src='/repository/systemImages/team/img1-sm.jpg'\\\">\\n                </span>\\n                <label class=\\\"h4\\\">Some Message</label>\\n                <div class=\\\"dropdown\\\">\\n                  <button class=\\\"btn btn-default dropdown-toggle\\\" type=\\\"button\\\" id=\\\"dropdownMenu1\\\" data-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"true\\\">\\n                    <i class=\\\"fa fa-globe\\\" aria-hidden=\\\"true\\\"></i>   전체공개\\n                    <span class=\\\"caret\\\"></span>\\n                  </button>\\n                  <ul class=\\\"dropdown-menu\\\" aria-labelledby=\\\"dropdownMenu1\\\">\\n                    <li><a href=\\\"#\\\">Action</a></li>\\n                    <li><a href=\\\"#\\\">Another action</a></li>\\n                    <li><a href=\\\"#\\\">Something else here</a></li>\\n                    <li role=\\\"separator\\\" class=\\\"divider\\\"></li>\\n                    <li><a href=\\\"#\\\">Separated link</a></li>\\n                  </ul>\\n                </div>\\n              </div>\\n              <div class=\\\"board-edit\\\">\\n                <textarea data-bind=\\\"data.edit.BODY\\\" class=\\\"chat-text\\\" placeholder=\\\"무슨생각을 하세요\\\"></textarea>  \\n                <!--           <div class=\\\"chat-text\\\" contenteditable=\\\"true\\\" tabindex=0 placeholder=\\\"무슨생각을 하세요\\\"></div> -->\\n              </div>          \\n              <div class=\\\"form-group\\\">\\n                <label>TAG</label>\\n                <input data-bind=\\\"data.edit.TAG\\\" type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"TAG\\\">\\n              </div>\\n              <label>FILE</label>\\n              <button jj-command=\\\"fileAttach\\\" type=\\\"button\\\" class=\\\"btn btn-basic\\\"><i class=\\\"fa fa-paperclip\\\" aria-hidden=\\\"true\\\"></i> Attach</button>\\n              <div jj-id=\\\"attachEdit\\\"></div>\\n              <button class=\\\"btn btn-info\\\" j-method=\\\"createSend\\\">Send</button>\\n              <button class=\\\"btn btn-link\\\" j-method=\\\"editCancel\\\">Cancel</button>\\n            </div>\\n          </section>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>  \",\r\n  \"less\": \".board-list{\\n  position: relative;\\n  width:400px;\\n}\\n.well-card{\\n  .well-header{\\n    display: inline-block;\\n    width:100%;\\n    padding: 0 25px;\\n    padding: 0;\\n    height: 34px;\\n    font-size: 13px;\\n    line-height: 34px;\\n    overflow:hidden;\\n    img {\\n      float: left;\\n      margin: 0 10px 0 -25px;\\n      margin: 0;\\n      height: 34px;\\n      width: 34px;\\n      border-radius: 50%;\\n    }\\n    .well-date{\\n      float:right;\\n    }\\n\\n    t{\\n      display: block;\\n      width: auto;\\n    }\\n\\n\\n  }\\n\\n  .well-body{\\n\\n  }\\n  .well-foot{\\n    \\n  }\\n}\\n\\n    .chat-text {\\n     \\n      padding: 5px;\\n      border: none;\\n      font-size:14px;\\n    \\toverflow: hidden;\\n    }\\n\\n.board-note{\\n  padding-left: 0px;\\n  border-width: 1px 0px 1px;\\n  border-style: solid;\\n  border-color: initial;\\n  border-image: initial;\\n  padding-top: 5px;\\n  padding-bottom: 20px;\\n}\\n\\n[board-mode=\\\"list\\\"]{\\n  .board-list{  display: block; }\\n  .board-view{  display: none; }\\n  .board-edit{  display: none; }\\n}\\n[board-mode=\\\"view\\\"]{\\n  .board-list{  display: none; }\\n  .board-view{  display: block; }\\n  .board-edit{  display: none; }\\n}\\n[board-mode=\\\"edit\\\"]{\\n  .board-list{  display: none; }\\n  .board-view{  display: none; }\\n  .board-edit{  display: block; \\n    .board-box{\\n      height: 100%;\\n      display: flex;\\n      flex-direction: column;\\n\\n      >.alert{\\n        flex:none;\\n        margin:0;\\n      }\\n      >.board-edit{\\n        flex-grow:1;\\n        textarea {\\n          padding: 5px;\\n          border: none;\\n          font-size:18px;\\n          height:100%;\\n          width:100%;\\n          border: 1px solid #ccc;\\n          &::placeholder {\\n            color: #56bfb5;\\n            font-weight: bold;\\n          }\\n        }\\n        &:focus-within ~ * {\\n            display: none;\\n        }\\n      }\\n    }  \\n  \\n  }\\n  \\n  \\n}\\n\",\r\n  \"script\": \"/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n --------------------------------------------------------------------------------------------------- */\\nform.boardCateCd = \\\"\\\";\\nform.config={\\n  \\\"data\\\":{\\n    \\\"title\\\": \\\"New Well\\\",\\n    \\\"menuPath\\\":[\\n      {\\\"title\\\":\\\"home\\\", \\\"link\\\":\\\"#\\\"},\\n      {\\\"title\\\":\\\"compay\\\", \\\"link\\\":\\\"#\\\"},\\n      {\\\"title\\\":\\\"info\\\", \\\"link\\\":\\\"#\\\"}\\n    ],\\n    \\\"mode\\\": \\\"list\\\",\\n    \\\"info\\\":{\\n      \\\"TITLE\\\":\\\"\\\",\\n      \\\"BODY\\\":\\\"\\\",\\n      \\\"TAG\\\":\\\"\\\",\\n      \\\"ATT_FILES\\\":\\\"\\\"\\n    },\\n    \\\"edit\\\":{\\n      \\\"BOARD_ID\\\":\\\"\\\",\\n      \\\"TITLE\\\":\\\"\\\",\\n      \\\"BODY\\\":\\\"\\\",\\n      \\\"TAG\\\":\\\"\\\",\\n      \\\"ATT_FILES\\\":\\\"\\\"\\n    },\\n    \\\"rows\\\": [{\\n      \\\"TITLE\\\": \\\"제목1\\\"\\n    }]\\n  },\\n  \\\"methods\\\": {\\n    \\\"getList\\\": ()=>{\\n \\t\\t\\treturn Jinja.ajax.get(`/v61/board/${form.boardCateCd}`,{})\\n      .then(result=>form.config.data.rows = result.rows.map(row=>{\\n        row.USER_IMAGE = \\\"/repository/systemImages/etc/user.jpg\\\";\\n        row.SHOW_DATE = Jinja.global.dateFormat(new Date(row.REG_DATETIME), 'MM월dd일 ap hh:mm')\\n        Jinja.ajax.getUser(row.REG_USER_ID)\\n          .then(user=>row.USER_IMAGE = user.IMAGE);\\n        return row;\\n      }))\\n      .then(result=>form.config.data.mode = \\\"list\\\")\\n  \\t},\\n    \\\"getInfo\\\": (boardId)=>{\\n \\t\\t\\treturn Jinja.ajax.get(`/v61/board/${form.boardCateCd}/${boardId}`,{})\\n      .then(result=>{\\n        form.config.data.mode = \\\"view\\\";\\n        form.config.data.info = result;\\n        form.viewBody.innerHTML = result.BODY;\\n        form.viewfiles.value = result.ATT_FILES; \\n      });\\n  \\t},\\n    \\\"setEdit\\\":()=>{\\n      Object.assign(form.config.data.edit, form.config.data.info);\\n      $(form.wordEditor).summernote(\\\"code\\\", form.config.data.edit.BODY);\\n      form.config.data.mode = \\\"edit\\\";\\n    },\\n    \\\"createSend\\\":async ()=>{\\n      form.config.data.edit.ATT_FILES = await form.editfiles.value;\\n      //form.config.data.edit.BODY = $(form.wordEditor).summernote(\\\"code\\\");\\n      let sendRlt;\\n      if (form.config.data.edit.BOARD_ID){\\n        sendRlt = await Jinja.ajax.patch(`/v61/board/${form.boardCateCd}/${form.config.data.edit.BOARD_ID}`,form.config.data.edit);\\n      }\\n      else {\\n        sendRlt = await Jinja.ajax.post(`/v61/board/${form.boardCateCd}`,form.config.data.edit);\\n      }\\n      \\n      await form.config.methods.getList();\\n      //sendRlt.then(result=>form.config.methods.getList())\\n      //.then(result=>{\\n      \\n        form.config.data.edit.BOARD_ID = \\\"\\\";\\n        form.config.data.edit.TITLE = \\\"\\\";\\n        form.config.data.edit.TAG= \\\"\\\"; \\n        form.config.data.edit.BODY= \\\"\\\"; \\n      //})\\n    },\\n    \\\"delete\\\":()=>{\\n      if(Jinja.uo.USER_NAME == \\\"GUEST\\\"){\\n        alert(\\\"관리자권한이 필요합니다\\\");\\n        Jinja.auth.reqLogin();\\n      } else {\\n\\t\\t\\t\\tJinja.confirm.delete(`Delete OK?`)\\n  \\t\\t\\t.then(()=>{\\n          Jinja.ajax.delete(`/v61/board/${form.boardCateCd}/${form.config.data.info.BOARD_ID}`)\\n         .then(result=>form.config.methods.getList())\\n        })\\n      }\\n    },\\n    \\\"editCancel\\\":()=>{\\n        $(form.wordEditor).summernote(\\\"code\\\",\\\"\\\");\\n        form.config.data.edit.BOARD_ID = \\\"\\\";\\n        form.config.data.edit.TITLE = \\\"\\\";\\n        form.config.data.edit.TAG= \\\"\\\"; \\n        form.config.data.edit.BODY= \\\"\\\"; \\n        form.config.data.mode = \\\"list\\\";\\n      \\n    },\\n    \\\"viewMode\\\": (mode)=>form.config.data.mode= mode\\n  },\\n  \\\"watchs\\\": {\\n  },\\n  \\\"onLoad\\\":()=>{\\n    //form.config.methods.getList();\\n  }\\n};\\n\\nform.fileAttach=()=>{\\n  form.editfiles.attach();\\n}\\n\\nform.bo = new JJReact(form.form2, form.config);\\nform.editfiles = new JJAttach(form.attachEdit, {\\n  \\\"mode\\\": \\\"edit\\\"\\n});\\nform.viewfiles = new JJAttach(form.attachView);\\n\\nJinja.require.load(\\\"summernote-lite\\\")\\n  .then(()=>{\\n\\t$(form.wordEditor).summernote({ \\n\\t\\tHeight: 300,\\n\\t\\tminHeight: 200,\\n\\t\\tfocus: true \\n\\t});\\n});  \\n\\n\\n/* 자원을 호출하고 해당 자원번호를 넘겨준다 */\\n\\nform.boardConfig={\\n  \\\"data\\\": {\\n    \\\"name\\\": \\\"\\\",\\n    \\\"title\\\":\\\"\\\",\\n    \\\"boardNote\\\":\\\"\\\"\\n  }\\n}\\nform.boardBo = new JJReact(form.form1, form.boardConfig);\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n\\tbody = Jinja.global.json(body||\\\"{}\\\");\\n  Object.assign(form.boardConfig.data, body);\\n  form.excute();\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> Jinja.global.string(form.boardConfig.data);\\n\\nform.excute = async function() {\\n  form.boardCateCd = form.fileInfo.ID;  \\n  form.config.data.title = form.boardConfig.data.title;  \\n  form.config.data.boardNote = form.boardConfig.data.boardNote;  \\n  form.config.methods.getList();\\n};\\n\",\r\n  \"uuid\": \"bbc34807-ffb0-4230-8aa3-8ee407837b7e\"\r\n}","URI":"app.640.well.studio","TYPE":"page"},{"NAME":"app.640.word.runtime","BODY":"{\r\n    \"uuid\": \"94629858-e720-4c61-94d2-d2e868e67242\",\r\n    \"html\": \"<div class=\\\"container-fluid bg-white p-1\\\" jj-id=\\\"wordViewer\\\"></div>\\n\",\r\n    \"css\": \"\",\r\n    \"less\": \"\",\r\n    \"script\": \"form.setSource = (data)=>{\\n  form.wordViewer.innerHTML = data;\\n};\\n\\n\"\r\n}","URI":"app.640.word.runtime","TYPE":"page"},{"NAME":"app.640.word.studio","BODY":"{\r\n  \"uuid\": \"65117fcc-2421-4c86-aa5c-f48c765785cf\",\r\n  \"html\": \"<jj-summernote jj-id=\\\"wordEditor\\\" ></jj-summernote>\",\r\n  \"less\": \"[jj-id=\\\"wordEditor\\\"]{\\n  position: relative;\\n}\",\r\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (data)=>{\\n \\tform.wordEditor.setValue(data);\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> form.wordEditor.getValue();\\n\"\r\n}","URI":"app.640.word.studio","TYPE":"page"},{"NAME":"app.640.workspace.studio","BODY":"{\n  \"uuid\": \"a72ebcf70-7c9e-444f-89ce-bb5c620e99f3\",\n  \"html\": \"<div class=\\\"container\\\">\\n  <div class=\\\"alert alert-info m-t-15\\\" role=\\\"alert\\\">\\n    <h5 class=\\\"m-t-5\\\">워크스페이스 재 시작</h5>\\n    <p>사이트동작을 정지하거나 재 시작을 할수 있습니다.</p>\\n    <div class=\\\"btn-group\\\" role=\\\"group\\\" aria-label=\\\"...\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-sm btn-warning\\\" jj-command=\\\"stop\\\" XXjj-command=\\\"statusChangeWorkspace('stop')\\\"> <i class=\\\"fa fa-stop\\\"></i> Stop</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-sm btn-info\\\" jj-command=\\\"run\\\" XXjj-command=\\\"statusChangeWorkspace('run')\\\"> <i class=\\\"fa fa-play\\\"></i> Run</button>\\n      <button type=\\\"button\\\" class=\\\"btn btn-sm btn-primary\\\" jj-command=\\\"reset\\\" XXjj-command=\\\"statusChangeWorkspace('reset')\\\" >\\n        <i class=\\\"spinner-border-sm\\\"></i> \\n        <i class=\\\"fa fa-eject fa-rotate-90\\\"></i> Update Start</button>\\n    </div>\\n    <button class=\\\"btn btn-link\\\" type=\\\"button\\\" jj-command=\\\"openSite\\\"><i class=\\\"fa fa-globe\\\" aria-hidden=\\\"true\\\"></i> show Site</button>\\n  </div>\\n  <h5 class=\\\"jj-toggle\\\">패키지빌더 <i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i></h5>\\n  <div>\\n    <p>사이트관련 패키지를 새로 빌더합니다.</p>\\n    <p class=\\\"margin-top-15\\\">\\n      <button class=\\\"btn btn-warning\\\" type=\\\"button\\\"  jj-command=\\\"appBuilder\\\">\\n        <i class=\\\"spinner-border-sm\\\"></i> \\n        <i class=\\\"fa fa-cloud-upload\\\"></i> \\n        appBuilder</button>\\n      <button class=\\\"btn btn-warning\\\" type=\\\"button\\\"  jj-command=\\\"extBuilder\\\">\\n        <i class=\\\"spinner-border-sm\\\"></i> \\n        <i class=\\\"fa fa-cloud-upload\\\"></i> \\n        extBuilder</button>\\n    </p> \\n  </div>\\n  <hr>\\n  <h5 class=\\\"jj-toggle\\\">사이트 정지/시작 <i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i></h5>\\n  <div>\\n    <p>사이트 재시작 예정시간을 공지할수 있습니다.</p>\\n    <div class=\\\"form-group\\\">\\n      <label>Date</label>\\n      <input data-bind=\\\"data.coming.date\\\" type=\\\"datetime-local\\\" class=\\\"form-control\\\">\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label>TITLE</label>\\n      <input data-bind=\\\"data.coming.title\\\"  type=\\\"text\\\" class=\\\"form-control\\\">\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label>Message</label>\\n      <textarea data-bind=\\\"data.coming.message\\\"  class=\\\"form-control\\\" placeholder=\\\"Message\\\"></textarea>\\n    </div>\\n  </div>\\n  <hr>  \\n  <h5  class=\\\"jj-toggle\\\">폐쇄형사이트 사용자지정 <i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i></h5>\\n  <div>\\n    <p>일부사용자들에 한해서 사이트에 참여하도록 할수 있습니다.</p>\\n    <div class=\\\"btn-group\\\" role=\\\"group\\\" aria-label=\\\"...\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-sm btn-primary\\\" jj-command=\\\"workspaceUser\\\" title=\\\"user add\\\"> <i class=\\\"fa fa-users\\\"></i> 사용자지정</button>\\n    </div>\\n  </div>\\n  <hr>  \\n  <h5>사이트 설정사항</h5>\\n\\n  <div class=\\\"editWarp\\\">\\n    <jj-code-editor data-mode=\\\"json\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"jsonEditor\\\"></jj-code-editor>  \\n  </div>\\n</div>\\n\\n\",\n  \"less\": \".jj-toggle.on .fa-caret-down:before { content: \\\"\\\\F0D8\\\";}  \\n\\n[jj-id=\\\"editer\\\"]{\\n  height:300px;\\n}\\n\\n[jj-id=\\\"jsonEditor\\\"]{\\n  height:600px;\\n}\\n\\n.avatar:hover{\\n  outline: 2px solid red;\\n}\",\n  \"script\": \"/*jshint sub:true*/ \\n\\n/* --------------------------------------------------------------------------------------------------- \\n    지시변수 선언 \\n --------------------------------------------------------------------------------------------------- */\\nlet fileInfo;\\n\\nform.config={\\n  \\\"data\\\":{\\n    \\\"coming\\\":{\\n      \\\"title\\\":\\\"재 배포중입니다.\\\",\\n      \\\"date\\\":new Date(),\\n      \\\"message\\\":\\\"작업을 위해서 재 배포하고 잇습니다.\\\"\\n    },\\n    \\\"description\\\":\\\"\\\"\\n  }\\n};\\n\\nform.bo = new JJReact(form, form.config);\\n\\nform.statusChangeWorkspace =(status, isMute, e)=>{\\n  let URI = form.fileInfo[\\\"URI\\\"];\\n  if(status == \\\"reset\\\")  {\\n    form.versionUp(); \\n    return form.save()\\n      .then(result=>Jinja.ajax.patch(`/v61/workspace/${URI}/${status}`))\\n      .then(data=>{\\n      alert(status+\\\" Workspace\\\")\\n    })\\n      .catch(ex=>{\\n    });\\n  } \\n  else {\\n    return Jinja.ajax.patch(`/v61/workspace/${URI}/${status}`,{\\n      \\\"COMING_SOON\\\": Jinja.global.string(form.config.data.coming)\\n    })\\n      .then(data=>{\\n      alert(status+\\\" Workspace\\\")\\n    })\\n      .catch(ex=>{\\n    });\\n\\n  }\\n}\\n\\n\\n/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (data)=>{\\n  form.jsonEditor.value = data;\\n\\n  let body = Jinja.global.json(data);\\n\\n  let buildOption = {\\n    \\\"workspaceUri\\\": form.fileInfo.URI\\n  };\\n\\n\\n  if(body.docType){\\n    buildOption.appPackageUri = body.appInfo.appPackageUri;\\n    buildOption.extPackageUri = body.appInfo.extPackageUri;\\n    buildOption.compressDeploy = body.appInfo.compressDeploy;\\n  } \\n  else {\\n    buildOption.appPackageUri = body.appPackageUri;\\n    buildOption.extPackageUri = body.extPackageUri;\\n    buildOption.compressDeploy =  body.compressDeploy;\\n  }\\n\\n\\n  form.builder = new JJBuilder(buildOption)\\n}\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=> form.jsonEditor.value; \\n\\nform.complie = (e)=> Jinja.compiler.script(form.jsonEditor.getValue())\\n  .done(msg=> {\\n  $topMessage(Jinja.global.string(msg));\\n  $notification('AppSpeed 빌더 종료', {body: Jinja.global.string(msg)});\\n});\\n/* 소멸시에 자신에 맞는 변수를 해제하는 작업 */\\n/******************************************************************************\\n * App 배포작업용\\n */\\n\\nform.reset=()=>{\\n  form.versionUp(); \\n  form.save().then(()=>form.builder.reset());\\n}\\nform.start=()=>{\\n  form.builder.start();\\n}\\nform.stop=()=>{\\n  form.builder.stop(form.config.data.coming);\\n}\\n\\nform.versionUp=()=>{\\n  let body = Jinja.global.json(form.jsonEditor.value);\\n  let version = body.version;\\n  if (version){\\n    let arr = version.split(\\\".\\\");\\n    let lastNum = parseInt(arr[arr.length-1])+1;\\n    arr[arr.length-1] = lastNum;\\n    body.version = arr.join(\\\".\\\");\\n    form.jsonEditor.value = Jinja.global.string(body);\\n  }\\n}\\n\\nform.appBuilder =(e)=>{\\n  e.target.querySelector(`.spinner-border-sm`).classList.add('spinner-border');\\n\\n  form.builder.appBuilder().then(result=>{\\n    e.target.querySelector(`.spinner-border-sm`).classList.remove('spinner-border');\\n\\t\\tlet msg = \\\"빌더가 완료되었습니다\\\";\\n    alert(msg);\\n    $notification('AppSpeed 빌더 종료', {body: msg});\\n  }).catch(ex=>{\\n    e.target.querySelector(`.spinner-border-sm`).classList.remove('spinner-border');\\n  })\\n}\\n\\nform.extBuilder =(e)=>{\\n  e.target.querySelector(`.spinner-border-sm`).classList.add('spinner-border');\\n\\n  form.builder.extBuilder().then(result=>{\\n    e.target.querySelector(`.spinner-border-sm`).classList.remove('spinner-border');\\n\\t\\tlet msg = \\\"빌더가 완료되었습니다\\\";\\n    alert(msg);\\n    $notification('AppSpeed 빌더 종료', {body: msg});\\n  }).catch(ex=>{\\n    e.target.querySelector(`.spinner-border-sm`).classList.remove('spinner-border');\\n  })\\n}\\n\\nform.openSite = ()=>{\\n  let body = Jinja.global.json(form.jsonEditor.value);\\n  if(body && body.seo && body.seo.ogUrl){\\n    if(location.host.startsWith(\\\"dev\\\") && body.dev){\\n      objAssign(body, body.dev);\\n    }  \\n    var newWindow = window.open(\\\"about:blank\\\");\\n    newWindow.location.href = body.seo.ogUrl;\\t\\t\\t\\t\\n  } else {\\n    alert(\\\"body.seo.ogUrl에 해당 사이트의 Url을 파악할수 없습니다\\\");\\n  }\\n};\\t\\n\\nform.workspaceUser = ()=>{\\n  JJFormModal.open(\\\"workspaceUser.app640.uc\\\",{ \\n    \\\"uri\\\": form.fileInfo[\\\"URI\\\"]\\n  }\\n                  )\\n};\\n\\n\\n\\n\\nvar config = {\\n  \\\"data\\\" : {\\n    \\\"find\\\": \\\"\\\",\\n    \\\"minFileName\\\":\\\"\\\",\\n    \\\"info\\\":{},\\n    \\\"resources\\\":[],\\n    \\\"rows\\\":[],\\n    \\\"error\\\":[]\\n  }\\n};\\n\\n\"\n}","URI":"app.640.workspace.studio","TYPE":"page"},{"NAME":"app.640.yaml.studio","BODY":"{\r\n  \"uuid\": \"55ba7a8b-2bcd-45be-958c-c414175f1fef\",\r\n  \"html\": \"<jj-code-editor data-mode=\\\"yaml\\\" data-theme=\\\"eclipse\\\" jj-id=\\\"editor\\\"></jj-code-editor>\\n\",\r\n  \"less\": \"jj-code-editor{\\n  height: 100%;\\n}\",\r\n  \"script\": \"/* 정보를 모듈에 맞게 표시하는 루틴 */\\nform.setSource = (body)=>{\\n  form.editor.value   = body;\\n};\\n\\n/* 자원의 정보를 문자열로 최종정리해서 리턴함 */\\nform.getSource = ()=>{\\n  return form.editor.value;\\n}\\n\\n\"\r\n}","URI":"app.640.yaml.studio","TYPE":"page"},{"NAME":"auth.640.login.uc","BODY":"{\n  \"uuid\": \"a5d12e56b-cde6-4da5-90a9-5332fda9c305\",\n  \"html\": \"  <div class=\\\"container mt-4\\\">\\n    <div class=\\\"row justify-content-center\\\">\\n      <div class=\\\"col-md-8 col-lg-6 col-xl-5\\\">\\n        <div class=\\\"card\\\">\\n          <div class=\\\"card-body p-4\\\">\\n            <div class=\\\"text-center w-75 m-auto\\\">\\n              <h2 jj-id=\\\"siteUri\\\" class=\\\"XXtext-uppercase\\\"></h2>\\n              <p class=\\\"text-muted mb-4 mt-3\\\">Enter your email address and password to Application</p>\\n            </div>\\n\\n            <div class=\\\"form-group mb-3\\\">\\n              <label for=\\\"emailaddress\\\">Email address</label>\\n              <input class=\\\"form-control\\\" type=\\\"email\\\" id=\\\"email\\\" required=\\\"\\\" placeholder=\\\"Enter your email\\\" />\\n            </div>\\n\\n            <div class=\\\"form-group mb-3\\\">\\n              <label for=\\\"password\\\">Password</label>\\n              <input class=\\\"form-control\\\" type=\\\"password\\\" required=\\\"\\\" id=\\\"password\\\" placeholder=\\\"Enter your password\\\" />\\n            </div>\\n\\n            <div class=\\\"text-center mb-1\\\">\\n              <button class=\\\"btn btn-primary btn-block\\\" jj-command=\\\"submit\\\">Log In</button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\",\n  \"less\": \"\",\n  \"script\": \"\\n/* --------------------------------------------------------------------------------------------------- \\n    이벤트 정의\\n --------------------------------------------------------------------------------------------------- */\\nform.siteUri.innerText = workspaceMeta.options.seo.ogTitle;\\n\\nform.addEventListener('keydown', e => {\\n  if ('Enter' == Jinja.global.getEventKeyMap(e)) {\\n    form.submit();\\n  }\\n});\\n\\nform.submit = function () {\\n  Jinja.event.dispatch('JJLogin', {\\n    detail: {\\n      comCd: workspaceMeta.options.appInfo.comCd||'studio',\\n      id: form.email.value,\\n      pass: form.password.value\\n    }\\n  });\\n};\\n\\nJinja.event.add('jjAppStart', 'login.form', e => {\\n  form.remove();\\n});\\n\\n/* --------------------------------------------------------------------------------------------------- \\n    함수 정의\\n --------------------------------------------------------------------------------------------------- */\\n\"\n}","URI":"auth.640.login.uc","TYPE":"page"},{"NAME":"blank.640.theme","BODY":"{\r\n  \"uuid\": \"c48601b7-b49a-4f96-86be-1428bc169a8d\",\r\n  \"html\": \"<div class=\\\"mdi-container\\\"></div> \\n\",\r\n  \"less\": \"html, body{\\n  height:100%;\\n}\\n\\n.jj{\\n  .CodeMirror-hints{\\n    z-index:120;\\n  }\\n  .hidden{\\n    display:none!important;\\n  }\\n\\n  .mdi-container{\\n    height:100%;\\n    >.jj-form{\\n      background-color: #f5f6f8;\\n      border-radius: 0;\\n      overflow: hidden;\\n      >header{\\n        display:none;\\n      }\\n      >footer{\\n        display:none;\\n      }\\n      \\n    }\\n  }\\n  \\n  .modal-footer:empty{\\n    padding: 0rem;\\n  }\\n}\\n\\n\\n\",\r\n  \"script\": \"\"\r\n}","URI":"blank.640.theme","TYPE":"theme"},{"NAME":"launcher.640.api.info","BODY":"{\r\n\t\"name\": \"api\",\r\n\t\"label\": \"api\",\r\n\t\"icon\": \"fa-share-alt\",\r\n\t\"format\": \"resource\",\r\n\t\"studio\": \"app.640.api.studio\",\r\n\t\"runtime\": \"app.640.api.studio\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.api.info","TYPE":"json"},{"NAME":"launcher.640.board.info","BODY":"{\r\n\t\"name\": \"board\",\r\n\t\"label\": \"board\",\r\n\t\"icon\": \"fa-file-code-o\",\r\n\t\"format\": \"resource\",\r\n\t\"studio\": \"app.640.board.studio\",\r\n\t\"runtime\": \"app.640.board.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.board.info","TYPE":"json"},{"NAME":"launcher.640.calendar.info","BODY":"{\r\n\t\"name\": \"calendar\",\r\n\t\"label\": \"calendar\",\r\n\t\"icon\": \"fa-calendar\",\r\n\t\"format\": \"json\",\r\n\t\"studio\": \"app.640.calendar.studio\",\r\n\t\"runtime\": \"app.640.calendar.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.calendar.info","TYPE":"json"},{"NAME":"launcher.640.color.info","BODY":"{\r\n\t\"name\": \"color\",\r\n\t\"label\": \"color\",\r\n\t\"icon\": \"fa-dashboard\",\r\n\t\"format\": \"text\",\r\n\t\"studio\": \"app.640.color.studio\",\r\n\t\"runtime\": \"\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.color.info","TYPE":"json"},{"NAME":"launcher.640.component.info","BODY":"{\r\n\t\"name\": \"component\",\r\n\t\"label\": \"component\",\r\n\t\"icon\": \"fa-columns\",\r\n\t\"format\": \"resource\",\r\n\t\"studio\": \"app.640.component.studio\",\r\n\t\"runtime\": \"\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-columns\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"custom Element\",\r\n\t\t\t\t\"description\": \"사용자정의 컴포넌트\",\r\n\t\t\t\t\"icon\": \"fa-columns\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"Module Class\",\r\n\t\t\t\t\"description\": \"Application모듈\",\r\n\t\t\t\t\"icon\": \"fa-columns\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\r\n      \r\n\t\t]\r\n}\r\n","URI":"launcher.640.component.info","TYPE":"json"},{"NAME":"launcher.640.css.info","BODY":"{\r\n\t\"name\": \"css\",\r\n\t\"label\": \"css\",\r\n\t\"icon\": \"fa-copyright\",\r\n\t\"format\": \"css\",\r\n\t\"studio\": \"app.640.css.studio\",\r\n\t\"runtime\": \"app.640.css.studio\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.css.info","TYPE":"json"},{"NAME":"launcher.640.deploy.info","BODY":"{\r\n\t\"name\": \"deploy\",\r\n\t\"label\": \"deploy\",\r\n\t\"icon\": \"fa-gears\",\r\n\t\"format\": \"resource\",\r\n\t\"studio\": \"app.640.deploy.studio\",\r\n\t\"runtime\": \"app.640.deploy.studio\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-columns\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.deploy.info","TYPE":"json"},{"NAME":"launcher.640.diagram.info","BODY":"{\r\n\t\"name\": \"diagram\",\r\n\t\"label\": \"diagram\",\r\n\t\"icon\": \"fa-code-fork\",\r\n\t\"format\": \"json\",\r\n\t\"studio\": \"app.640.diagram.studio\",\r\n\t\"runtime\": \"app.640.diagram.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.diagram.info","TYPE":"json"},{"NAME":"launcher.640.erd.info","BODY":"{\r\n\t\"name\": \"erd\",\r\n\t\"label\": \"erd\",\r\n\t\"icon\": \"fa-code-fork\",\r\n\t\"format\": \"json\",\r\n\t\"studio\": \"app.640.erd.studio\",\r\n\t\"runtime\": \"app.640.erd.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.erd.info","TYPE":"json"},{"NAME":"launcher.lib.info","BODY":"{\n\t\"name\": \"extlib\",\n\t\"label\": \"extlib\",\n\t\"icon\": \"fa-columns\",\n\t\"format\": \"resource\",\n\t\"studio\": \"app.640.extlib.studio\",\n\t\"runtime\": \"\",\n\t\t\"template\": [\n\t\t\t{\n\t\t\t\t\"label\": \"blank\",\n\t\t\t\t\"description\": \"빈 페이지\",\n\t\t\t\t\"icon\": \"fa-columns\",\n\t\t\t\t\"uri\":\"\"\n\t\t\t}\n\t\t]\n}\n","URI":"launcher.640.extlib.info","TYPE":"json"},{"NAME":"launcher.640.formapp.info","BODY":"{\r\n\t\"name\": \"formapp\",\r\n\t\"label\": \"formapp\",\r\n\t\"icon\": \"fa-server\",\r\n\t\"format\": \"json\",\r\n\t\"studio\": \"app.640.formapp.studio\",\r\n\t\"runtime\": \"app.640.formapp.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-server\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.formapp.info","TYPE":"json"},{"NAME":"launcher.640.hmi.info","BODY":"{\r\n\t\"name\": \"hmi\",\r\n\t\"label\": \"hmi\",\r\n\t\"icon\": \"fa-magic\",\r\n\t\"format\": \"json\",\r\n\t\"studio\": \"app.640.hmi.studio\",\r\n\t\"runtime\": \"app.640.hmi.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 HMI페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.hmi.info","TYPE":"json"},{"NAME":"launcher.640.html.info","BODY":"{\r\n\t\"name\": \"html\",\r\n\t\"label\": \"html\",\r\n\t\"icon\": \"fa-file-code-o\",\r\n\t\"format\": \"json\",\r\n\t\"studio\": \"app.640.html.studio\",\r\n\t\"runtime\": \"app.640.html.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.html.info","TYPE":"json"},{"NAME":"launcher.640.image.info","BODY":"{\n\t\"name\": \"images\",\n\t\"label\": \"images\",\n\t\"icon\": \"fa-file-image-o\",\n\t\"format\": \"json\",\n\t\"studio\": \"app.640.image.studio\",\n\t\"runtime\": \"app.640.image.runtime\",\n\t\t\"template\": [\n\t\t\t{\n\t\t\t\t\"label\": \"blank\",\n\t\t\t\t\"description\": \"빈 페이지\",\n\t\t\t\t\"icon\": \"fa-file-code-o\",\n\t\t\t\t\"uri\":\"\"\n\t\t\t}\n\t\t]\n}\n","URI":"launcher.640.image.info","TYPE":"json"},{"NAME":"launcher.640.javascript.info","BODY":"{\r\n\t\"name\": \"javascript\",\r\n\t\"label\": \"javascript\",\r\n\t\"icon\": \"fa-file-text\",\r\n\t\"format\": \"javascript\",\r\n\t\"studio\": \"app.640.javascript.studio\",\r\n\t\"runtime\": \"app.640.javascript.studio\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.javascript.info","TYPE":"json"},{"NAME":"launcher.640.json.info","BODY":"{\r\n\t\"name\": \"json\",\r\n\t\"label\": \"json\",\r\n\t\"icon\": \"fa-bold\",\r\n\t\"format\": \"json\",\r\n\t\"studio\": \"app.640.json.studio\",\r\n\t\"runtime\": \"app.640.json.studio\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t]\t\r\n}\r\n","URI":"launcher.640.json.info","TYPE":"json"},{"NAME":"launcher.640.less.info","BODY":"{\r\n\t\"name\": \"less\",\r\n\t\"label\": \"less\",\r\n\t\"icon\": \"fa-lemon-o\",\r\n\t\"format\": \"less\",\r\n\t\"studio\": \"app.640.less.studio\",\r\n\t\"runtime\": \"app.640.less.studio\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.less.info","TYPE":"json"},{"NAME":"launcher.640.menu.info","BODY":"{\n\t\"name\": \"menu\",\n\t\"label\": \"menu\",\n\t\"icon\": \"fa-sitemap\",\n\t\"format\": \"json\",\n\t\"studio\": \"app.640.menu.studio\",\n\t\"runtime\": \"app.640.menu.runtime\",\n\t\t\"template\": [\n\t\t\t{\n\t\t\t\t\"label\": \"blank\",\n\t\t\t\t\"description\": \"빈 페이지\",\n\t\t\t\t\"icon\": \"fa-file-code-o\",\n\t\t\t\t\"uri\":\"\"\n\t\t\t}\n\t\t]\n}\n","URI":"launcher.640.menu.info","TYPE":"json"},{"NAME":"launcher.640.package.info","BODY":"{\r\n\t\"name\": \"package\",\r\n\t\"label\": \"package\",\r\n\t\"icon\": \"fa-shopping-basket\",\r\n\t\"format\": \"json\",\r\n\t\"studio\": \"app.640.package.studio\",\r\n\t\"runtime\": \"app.640.package.studio\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"basic\",\r\n\t\t\t\t\"description\": \"basic\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.package.info","TYPE":"json"},{"NAME":"launcher.640.page.info","BODY":"{\r\n\t\"name\": \"page\",\r\n\t\"label\": \"page\",\r\n\t\"icon\": \"fa-th-large\",\r\n\t\"format\": \"resource\",\r\n\t\"studio\": \"app.640.page.studio\",\r\n\t\"runtime\": \"app.640.page.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"다이얼로\",\r\n\t\t\t\t\"description\": \"다이얼로\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"getText.640.uc\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"심플리스트\",\r\n\t\t\t\t\"description\": \"심플리스트\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"pageBasicList.uc\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.page.info","TYPE":"json"},{"NAME":"launcher.640.sql.info","BODY":"{\n\t\"name\": \"sql\",\n\t\"label\": \"sql\",\n\t\"icon\": \"fa-database\",\n\t\"format\": \"resource\",\n\t\"studio\": \"app.640.sql.studio\",\n\t\"runtime\": \"app.640.sql.studio\",\n\t\t\"template\": [\n\t\t\t{\n\t\t\t\t\"label\": \"blank\",\n\t\t\t\t\"description\": \"빈 페이지\",\n\t\t\t\t\"icon\": \"fa-file-code-o\",\n\t\t\t\t\"uri\":\"\"\n\t\t\t}\n\t\t]\n}\n","URI":"launcher.640.sql.info","TYPE":"json"},{"NAME":"launcher.640.text.info","BODY":"{\r\n\t\"name\": \"text\",\r\n\t\"label\": \"text\",\r\n\t\"icon\": \"fa-file-text-o\",\r\n\t\"format\": \"text\",\r\n\t\"studio\": \"app.640.text.studio\",\r\n\t\"runtime\": \"app.640.text.studio\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.text.info","TYPE":"json"},{"NAME":"launcher.640.theme.info","BODY":"{\r\n\t\"name\": \"theme\",\r\n\t\"label\": \"theme\",\r\n\t\"icon\": \"fa-flag-checkered\",\r\n\t\"format\": \"resource\",\r\n\t\"studio\": \"app.640.theme.studio\",\r\n\t\"runtime\": \"\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.theme.info","TYPE":"json"},{"NAME":"launcher.640.vhtml.info","BODY":"{\r\n\t\"name\": \"vhtml\",\r\n\t\"label\": \"vhtml\",\r\n\t\"icon\": \"fa-object-group\",\r\n\t\"format\": \"resource\",\r\n\t\"studio\": \"app.640.vhtml.studio\",\r\n\t\"runtime\": \"app.640.vhtml.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.vhtml.info","TYPE":"json"},{"NAME":"launcher.640.well.info","BODY":"{\r\n\t\"name\": \"well\",\r\n\t\"label\": \"well\",\r\n\t\"icon\": \"fa-file-code-o\",\r\n\t\"format\": \"resource\",\r\n\t\"studio\": \"app.640.well.studio\",\r\n\t\"runtime\": \"app.640.well.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.well.info","TYPE":"json"},{"NAME":"launcher.640.word.info","BODY":"{\r\n\t\"name\": \"word\",\r\n\t\"label\": \"word\",\r\n\t\"icon\": \"fa-file-word-o\",\r\n\t\"format\": \"html\",\r\n\t\"studio\": \"app.640.word.studio\",\r\n\t\"runtime\": \"app.640.word.runtime\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.word.info","TYPE":"json"},{"NAME":"launcher.640.workspace.info","BODY":"{\n\t\"name\": \"workspace\",\n\t\"label\": \"workspace\",\n\t\"icon\": \"fa-cubes\",\n\t\"format\": \"json\",\n\t\"studio\": \"app.640.workspace.studio\",\n\t\"runtime\": \"app.640.workspace.studio\",\n\t\t\"template\": [\n\t\t\t{\n\t\t\t\t\"label\": \"basic\",\n\t\t\t\t\"description\": \"basic\",\n\t\t\t\t\"icon\": \"fa-file-code-o\",\n\t\t\t\t\"uri\":\"workspace.studio.610.basic\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"label\": \"myapps\",\n\t\t\t\t\"description\": \"myapps\",\n\t\t\t\t\"icon\": \"fa-file-code-o\",\n\t\t\t\t\"uri\":\"5fa6ef4b-2cf6-4946-83ac-5a1345dacd75\"\n\t\t\t}\n      \n\t\t]\n}\n","URI":"launcher.640.workspace.info","TYPE":"json"},{"NAME":"launcher.640.yaml.info","BODY":"{\r\n\t\"name\": \"yaml\",\r\n\t\"label\": \"yaml\",\r\n\t\"icon\": \"fa-file-text-o\",\r\n\t\"format\": \"text\",\r\n\t\"studio\": \"app.640.yaml.studio\",\r\n\t\"runtime\": \"app.640.yaml.studio\",\r\n\t\t\"template\": [\r\n\t\t\t{\r\n\t\t\t\t\"label\": \"blank\",\r\n\t\t\t\t\"description\": \"빈 페이지\",\r\n\t\t\t\t\"icon\": \"fa-file-code-o\",\r\n\t\t\t\t\"uri\":\"\"\r\n\t\t\t}\r\n\t\t]\r\n}\r\n","URI":"launcher.640.yaml.info","TYPE":"json"},{"NAME":"studioAll.710.uc","BODY":"{\n  \"uuid\": \"a54510866-8777-48dc-a865-e9b41fb64c49\",\n  \"html\": \"<div jj-id=\\\"studioBox\\\">\\n  <div jj-id=\\\"topMenu\\\" class=\\\"btn-toolbar d-flex bd-highlight\\\">\\n    <div class=\\\"btn-group p-1  bd-highlight\\\">\\n      <div class=\\\"btn-group dropdown\\\">\\n\\n        <!-- 관리자 설정 호출-->\\n\\n        <button jj-command=\\\"treeShow\\\" class=\\\"btn\\\"><i class=\\\"fa fa-bars\\\"></i></button>\\n\\n\\n        <!-- 만들기 메뉴 호출 -->\\n\\n        <button class=\\\"btn  dropdown-toggle\\\"  data-toggle=\\\"dropdown\\\">\\n          만들기\\n          <i class=\\\"mdi mdi-chevron-down\\\"></i>\\n        </button>\\n\\n        <div class=\\\"dropdown-menu dropdown-menu-right profile-dropdown\\\" x-placement=\\\"bottom-end\\\" \\n             style=\\\"position: absolute; transform: translate3d(-30px, 70px, 0px); top: 0px; left: 0px; will-change: transform; left:2rem!important;\\\">\\n\\n          <!-- item-->\\n          <a jj-command=\\\"newFile\\\" href=\\\"javascript:void(0);\\\" class=\\\"dropdown-item\\\">\\n            <i class=\\\"fe-file mr-1\\\"></i>\\n            <span>New File</span>\\n          </a>\\n\\n\\n          <!-- item-->\\n          <a jj-command=\\\"newFolder\\\" href=\\\"javascript:void(0);\\\" class=\\\"dropdown-item\\\">\\n            <i class=\\\"fe-folder mr-1\\\"></i>\\n            <span>New Folder</span>\\n          </a>\\n\\n          <!-- item-->\\n          <a jj-command=\\\"newProject\\\" href=\\\"javascript:void(0);\\\" class=\\\"dropdown-item\\\">\\n            <i class=\\\"fe-briefcase mr-1\\\"></i>\\n            <span>New Workspace</span>\\n          </a>\\n\\n\\n          <div class=\\\"dropdown-divider\\\"></div>\\n\\n          <!-- item-->\\n          <a jj-command=\\\"fullShow('configManager.uc')\\\" href=\\\"javascript:void(0);\\\" class=\\\"dropdown-item notify-item\\\">\\n            <i class=\\\"remixicon-logout-box-line\\\"></i>\\n            <span>설정</span>\\n          </a>\\n\\n        </div>\\n\\n        <!-- 만들기 메뉴 호출 끝-->\\n\\n      </div>\\n\\n      <!-- 활성탭 저장 -->\\n      <div class=\\\"btn-group dropdown\\\">\\n        <button jj-command=\\\"activeTabSave('save')\\\" class=\\\"btn  btn-save\\\">\\n          <i class=\\\"spinner-border-sm\\\"></i> \\n          <i class=\\\"fa fa-save\\\"></i> 저장\\n        </button>\\n        <button class=\\\"btn  dropdown-toggle\\\"  data-toggle=\\\"dropdown\\\">\\n          <i class=\\\"mdi mdi-chevron-down\\\"></i>\\n        </button>\\n        <div class=\\\"dropdown-menu dropdown-menu-right profile-dropdown\\\" x-placement=\\\"bottom-end\\\" \\n             style=\\\"position: absolute; transform: translate3d(-30px, 70px, 0px); top: 0px; left: 0px; will-change: transform; left:2rem!important;\\\">\\n\\n          <!-- item-->\\n          <a jj-command=\\\"activeTabSave('saveAs')\\\" href=\\\"javascript:void(0);\\\" class=\\\"dropdown-item\\\">\\n            <i class=\\\"fe-files\\\"></i>\\n            <span>새이름저장</span>\\n          </a>\\n\\n\\n          <!-- item-->\\n          <a jj-command=\\\"activeTabSave('remove')\\\" href=\\\"javascript:void(0);\\\" class=\\\"dropdown-item\\\">\\n            <i class=\\\"fe-remove\\\"></i>\\n            <span>삭제</span>\\n          </a>\\n\\n        </div>\\n      </div>\\n\\n      <!-- 활성탭 시험 -->\\n      <button jj-command=\\\"activeTabExcute\\\" class=\\\"btn\\\"><i class=\\\"fa fa-legal\\\"></i> 시험</button>\\n\\n    </div>\\n\\n    <div class=\\\"btn-group ml-auto p-1 bd-highlight\\\">\\n\\n\\n      <!-- 사용자박스 -->\\n\\n      <button class=\\\"btn  dropdown-toggle\\\"  data-toggle=\\\"dropdown\\\">\\n<!--          <img  jj-id=\\\"userImage\\\" src=\\\"https://cdn.appspeed.net:8444/repository/attaches/users/sBBDFC4D6-71D2-445F-865F-A8A58066490E\\\"\\n               onerror=\\\"this.src='https://cdn.appspeed.net:8444/repository/systemImages/etc/user.jpg'\\\"\\n               alt=\\\"user-image\\\" class=\\\"rounded-circle\\\"> -->\\n        <img src=\\\"https://cdn.appspeed.net:8444/repository/attaches/users/${Jinja.uo.USER_ID}\\\" class=\\\"mr-1 bg-primary avatar-sm rounded-circle\\\" alt=\\\"${Jinja.uo.USER_NAME}\\\">\\n        ${Jinja.uo.USER_NAME}\\n        <i class=\\\"mdi mdi-chevron-down\\\"></i>\\n      </button>\\n      <div class=\\\"dropdown-menu dropdown-menu-right profile-dropdown\\\" x-placement=\\\"bottom-end\\\"\\n           style=\\\"position: absolute; transform: translate3d(-30px, 70px, 0px); top: 0px; left: 0px; will-change: transform; right:2rem!important;\\\">\\n        <!-- item-->\\n        <div class=\\\"dropdown-header noti-title\\\">\\n          <h6 class=\\\"text-overflow m-0\\\">Welcome !</h6>\\n        </div>\\n\\n        <div class=\\\"dropdown-divider\\\"></div>\\n        \\n        <!-- item-->\\n        <a href=\\\"#\\\" jj-id=\\\"helpLink\\\" target=\\\"_blank\\\" class=\\\"dropdown-item\\\">\\n          <i class=\\\"fe-headphones mr-1\\\"></i>\\n          <span>Help &amp; Support</span>\\n        </a>\\n\\n        <!-- item-->\\n        <a href=\\\"#\\\" jj-id=\\\"accountLink\\\"  href=\\\"#\\\" class=\\\"dropdown-item notify-item\\\">\\n          <i class=\\\"remixicon-lock-line\\\"></i>\\n          <span>Account</span>\\n        </a>\\n        \\n        <div class=\\\"dropdown-divider\\\"></div>\\n\\n        <!-- item-->\\n        <a jj-command=\\\"fullShow('configManager.uc')\\\"   href=\\\"#\\\" class=\\\"dropdown-item notify-item\\\">\\n          <i class=\\\"remixicon-settings-3-line\\\"></i>\\n          <span>Settings</span>\\n        </a>\\n\\n        <div class=\\\"dropdown-divider\\\"></div>\\n\\n\\n        <!-- item-->\\n        <a jj-command=\\\"logout\\\" href=\\\"#\\\" class=\\\"dropdown-item notify-item\\\">\\n          <i class=\\\"remixicon-logout-box-line\\\"></i>\\n          <span>Logout</span>\\n        </a>\\n\\n      </div>\\n\\n      <!-- 사용자박스 끝-->\\n\\n      <!-- 도구상자호출-->\\n\\n      <button jj-command=\\\"minSize\\\" class=\\\"btn\\\" hidden><i class=\\\"fa fa-anchor\\\"></i> 감추기</button>\\n      <button jj-command=\\\"rightShow\\\" class=\\\"btn\\\"><i class=\\\"fa fa-plug\\\"></i></button>\\n\\n      <!-- 도구상자호출 끝-->\\n\\n    </div>\\n\\n  </div>\\n  <div class=\\\"file-box\\\">\\n    <!-- 파일목록 Tree -->\\n    <div jj-id=\\\"treeWrap\\\" class=\\\"tree-wrap d-flex flex-column\\\">\\n      <input jj-id=\\\"searchText\\\" type=\\\"search\\\"  class=\\\"form-control\\\" placeholder=\\\"Search name\\\">\\n      <jj-filetree jj-id=\\\"fileTree\\\" contextmenu class=\\\"flex-grow-1\\\"></jj-filetree>\\n    </div>\\n    <!-- 파일목록 Tree 끝 -->\\n\\n    <!-- 파일Tab -->\\n    <jj-studio-mdi jj-id=\\\"mditab\\\"></jj-studio-mdi>\\n    <!-- 파일Tab 끝 -->\\n\\n  </div>\\n\\n  <!-- right slider -->\\n  <div jj-id=\\\"rightBar\\\" class=\\\"right-bar\\\">\\n    <div class=\\\"right-base\\\">\\n      <div class=\\\"rightbar-title\\\">\\n        <a jj-command=\\\"rightShow\\\" href=\\\"#\\\" class=\\\"right-bar-toggle float-right\\\">\\n          <i class=\\\"fe-x noti-icon\\\"></i>\\n        </a>\\n        <h5 class=\\\"m-0 text-white\\\">Toolbar</h5>\\n      </div>\\n\\n\\n      <!-- user Box-->\\n      <div jj-id=\\\"userBox\\\" class=\\\"user-box\\\" hidden>\\n        <div class=\\\"user-img\\\">\\n          <img src=\\\"https://cdn.appspeed.net:8444/repository/attaches/users/${Jinja.uo.USER_ID}\\\"\\n               alt=\\\"${data.userName}\\\"  class=\\\"rounded-circle img-fluid\\\">\\n        </div>\\n        <a href=\\\"javascript: void(0);\\\">${data.userName}</a>\\n      </div>\\n\\n      <!-- 툴바 Tab-->\\n      <ul class=\\\"nav nav-pills bg-light nav-justified jj-tabs\\\">\\n        <li class=\\\"nav-item\\\">\\n          <a href=\\\"#tools\\\" data-toggle=\\\"tab\\\" aria-expanded=\\\"false\\\" class=\\\"nav-link rounded-0 active\\\">\\n            툴\\n          </a>\\n        </li>\\n        <li class=\\\"nav-item\\\">\\n          <a href=\\\"#home1\\\" data-toggle=\\\"tab\\\" aria-expanded=\\\"false\\\" class=\\\"nav-link rounded-0\\\">\\n            설정\\n          </a>\\n        </li>\\n      </ul>\\n\\n      <div class=\\\"tab-content p-2\\\">\\n        <div class=\\\"tab-pane  show active\\\" id=\\\"tools\\\">\\n          <button jj-command=\\\"sideShow('getKey.uc')\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            <i class=\\\"fa fa-adjust\\\" aria-hidden=\\\"true\\\"></i>\\n            getKey</button>\\n          <button jj-command=\\\"sideShow('htmlPart.app.640.uc')\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            <i class=\\\"fa fa-adjust\\\" aria-hidden=\\\"true\\\"></i>\\n            Html참조</button>\\n          <button jj-command=\\\"sideShow('codePart.app.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-primary btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            Code참조</button>\\n          <button jj-command=\\\"sideShow('sysImage.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            이미지 갤러리</button>\\n          <button jj-command=\\\"sideShow('infoIcon.app.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            아이콘 갤러리</button>\\n          <button jj-command=\\\"sideShow('camelConvert.app.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            camelConvert</button>\\n          <button jj-command=\\\"sideShow('encode.app.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            encodeConvert</button>\\n          <button jj-command=\\\"sideShow('intl.app.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            i18n</button>\\n          <button jj-command=\\\"sideShow('keyEvent.app.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            keyEvent</button>\\n          <button jj-command=\\\"sideShow('regexp.app.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            regexp</button>\\n          <button jj-command=\\\"sideShow('classNameDoc.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            className</button>\\n          <button jj-command=\\\"sideShow('sideTable.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            tables</button>\\n          <button jj-command=\\\"sideShow('myHistory.app.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            Backup History</button>\\n          <button jj-command=\\\"sideShow('myLastFile.app.640.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            Last Edit File</button>\\n          <button jj-command=\\\"sideShow('searchCode.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            Code Find</button>\\n          <button jj-command=\\\"sideShow('searchError.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            Error Find</button>\\n          <button jj-command=\\\"sideShow('searchWorkMeta.uc')\\\"  type=\\\"button\\\" class=\\\"btn btn-info btn-tool btn-sm btn-rounded width-md waves-effect waves-light\\\">\\n            WorkMeta</button>\\n\\n\\n        </div>\\n        <div class=\\\"tab-pane\\\" id=\\\"home1\\\">\\n          <div class=\\\"row mb-2\\\">\\n            <div class=\\\"col\\\">\\n              <h5 class=\\\"m-0 font-15\\\">Notifications</h5>\\n              <p class=\\\"text-muted\\\"><small>Do you need them?</small></p>\\n            </div>\\n            <div class=\\\"col-auto\\\">\\n              <div class=\\\"custom-control custom-switch mb-2\\\">\\n                <input type=\\\"checkbox\\\" class=\\\"custom-control-input\\\" id=\\\"tabswitch1\\\">\\n                <label class=\\\"custom-control-label\\\" for=\\\"tabswitch1\\\"></label>\\n              </div>\\n            </div> \\n          </div>\\n\\n\\n          <div class=\\\"row mb-2\\\">\\n            <div class=\\\"col\\\">\\n              <h5 class=\\\"m-0 font-15\\\">API Access</h5>\\n              <p class=\\\"text-muted\\\"><small>Enable/Disable access</small></p>\\n            </div> \\n            <div class=\\\"col-auto\\\">\\n              <div class=\\\"custom-control custom-switch mb-2\\\">\\n                <input type=\\\"checkbox\\\" class=\\\"custom-control-input\\\" checked=\\\"\\\" id=\\\"tabswitch2\\\">\\n                <label class=\\\"custom-control-label\\\" for=\\\"tabswitch2\\\"></label>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"row mb-2\\\">\\n            <div class=\\\"col\\\">\\n              <h5 class=\\\"m-0 font-15\\\">Auto Updates</h5>\\n              <p class=\\\"text-muted\\\"><small>Keep up to date</small></p>\\n            </div> \\n            <div class=\\\"col-auto\\\">\\n              <div class=\\\"custom-control custom-switch mb-2\\\">\\n                <input type=\\\"checkbox\\\" class=\\\"custom-control-input\\\" id=\\\"tabswitch3\\\">\\n                <label class=\\\"custom-control-label\\\" for=\\\"tabswitch3\\\"></label>\\n              </div>\\n            </div> \\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <!-- right slider 끝-->\\n\\n</div>\\n\",\n  \"less\": \"&{\\n  overflow:hidden;\\n  >article{\\n    top:0!important;\\n    padding: 0!important;\\n    overflow: hidden!important;\\n    height: 100%;\\n  }\\n}\\n\\n[jj-id=\\\"studioBox\\\"]{\\n  position: relative;\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  \\n  .btn-info.btn-tool, .btn-primary.btn-tool {\\n    width: 100%;\\n    margin-bottom: 5px;\\n  }\\n  \\n  >.btn-toolbar{\\n    flex: none;\\n    height: 55px;\\n\\t\\tbackground-color: var(--secondary);\\n    color: var(--gray);\\n    z-index:100010;\\n    \\n    .btn{\\n      padding: .28rem .8rem;\\n      font-size: .7875rem;\\n      line-height: 1.5;\\n      border-radius: .15rem;\\n      color: inherit;\\n      &:hover{\\n        color: var(--white);\\n      }\\n\\n    }\\n  }\\n  >.file-box{\\n    position: relative;\\n    flex-grow:1;\\n    display: flex;\\n    flex-direction: row;\\n    height: 100%;\\n    overflow: hidden;\\n    >.tree-wrap{\\n      width:240px;\\n      flex: none;\\n      position: relative!important;\\n      padding-right: 5px;\\n      height: 100%;\\n      overflow: hidden;      \\n      [jj-id=\\\"fileTree\\\"]{}\\n      .resizer{\\n        border-right: 5px solid #b3b3b3;      \\n      }\\n      &.tree-disabled{\\n        width:.0!important;\\n        overflow: visible;\\n      }\\n      [jj-id=\\\"searchText\\\"]{\\n        border-radius:0;\\n      }\\n\\n    }\\n    >jj-studio-mdi{\\n      flex-grow:1;\\n    }\\n  }\\n  .dropdown-toggle {\\n    padding: 0.28rem 0.4rem!important;\\n    margin-right: 5px;\\n  }\\n  .dropdown-menu{  \\n    position: absolute; \\n    will-change: transform; \\n    top: 0px; \\n    left: 0px; \\n    transform: translate3d(103px, 37px, 0px);\\n    .dropdown-item{\\n      cursor: pointer;\\n    }\\n  }\\n  .btn *{pointer-events: none;}\\n \\n}\\n\\n.right-bar{\\n  width: auto;\\n  display:flex;\\n  z-index: 110000;\\n  right: -150px;\\n  \\n  .right-base{\\n    width:150px;\\n    .rightbar-title {\\n       padding: 18px 15px;\\n       height: 55px;      \\n    }  \\n  }\\n\\n  .rightbar-title, jj-form-include > header{\\n    line-height: 55px;\\n    height: 55px;\\n  }\\n}\\n\\n.right-bar-enabled .right-bar{\\n  right: 0px;\\n}\\n\\n.do-lock{\\n  cursor: wait;\\n  pointer-events: none;\\n  background-color: var(--secondary)!important;\\n}\\n\\n.dropdown-toggle img {\\n    vertical-align: middle;\\n    border-style: none;\\n}\",\n  \"script\": \"form.config={\\n  \\\"data\\\":{\\n    \\\"userName\\\": Jinja.uo.USER_NAME,\\n    \\\"value\\\":\\\"\\\",\\n    \\\"helpLink\\\": DATA_TYPE.SystemLink.help,\\n    \\\"issueLink\\\": DATA_TYPE.SystemLink.issue\\n  }\\n};\\n\\ntry{\\n  form.helpLink.href = workspaceMeta.options.links.help;\\n  form.accountLink.href = workspaceMeta.options.links.account;\\n} catch(e){\\n  alert('일부 바로가기 링크가 누락되었습니다.\\\\n'+e );\\n}\\n\\n\\nnew JJReact(form.userBox, form.config);\\nnew JJReact(form.topMenu, form.config);\\n\\n//form.builder = new JJBuilder();\\n//form.builder.setWorkspace();\\n\\nform.fileTree.addEventListener(\\\"treeClick\\\", e=>{\\n  form.mditab.addFile(e.detail.key, e.detail.title);\\n})\\n\\n/**\\n * Search \\n */\\n// Search Enter \\nform.searchText.addEventListener(\\\"keyup\\\", e=>{\\n  if (e.keyCode == 13){\\n    //alert(form.searchText.value);\\n    form.fileTree.contains(form.searchText.value);\\n  }\\n})\\n// Search Cancel\\nform.searchText.addEventListener(\\\"input\\\", e=>{\\n  if (form.searchText.value == \\\"\\\"){\\n    form.fileTree.contains(form.searchText.value);\\n  }\\n})\\n\\n\\nform.fileTree.addEventListener(\\\"backupRestore\\\", e=>{\\n  form.mditab.findTab(e.detail.fileId)\\n    .linkForm.setSource(e.detail.body);\\n});  \\n\\nform.fileTree.addEventListener(\\\"fileDeleted\\\", e=>{\\n  form.mditab.removeTab(e.detail.fileId, true)\\n})\\n\\nnew JJRresizable(form.querySelector(\\\".tree-wrap\\\"), {\\n  \\\"handles\\\":\\\"e\\\"\\n});    \\n\\n// 폼의 상태에 따라서 툴바버턴의 상태를 조정함\\nform.addEventListener(\\\"activedTab\\\", e=>{\\n  if (e.detail.tab.matches(\\\".edited\\\")){\\n    form.querySelector(`.btn-save`).classList.add(\\\"btn-warning\\\");\\n  } else {\\n    form.querySelector(`.btn-save`).classList.remove(\\\"btn-warning\\\");\\n  }\\n});\\n\\nform.activeTabSave=(saveType)=>{\\n\\n  let tabForm = form.mditab.activeForm();\\n  if(tabForm) {\\n    \\tlet doBtn = form.topMenu.querySelector(`.spinner-border-sm`);\\n      doBtn.parentElement.classList.add('do-lock');\\n      doBtn.classList.add('spinner-border');\\n\\t\\t\\ttabForm.save(saveType).then(e=>{\\n        doBtn.classList.remove('spinner-border');\\n        doBtn.parentElement.classList.remove('do-lock');\\n      })\\n    \\t.catch(e=>{\\n       doBtn.classList.remove('spinner-border');\\n         doBtn.parentElement.classList.remove('do-lock')\\n      });  \\n  } \\n}\\n\\n\\nform.activeTabExcute=()=>{\\n  let tabForm = form.mditab.activeForm();\\n  if(tabForm) tabForm.excute();  \\n}\\n\\nform.newFile=()=>form.fileTree.newFile();\\n\\nform.newFolder=()=>form.fileTree.newFolder();\\n\\nform.newProject=()=>form.fileTree.newWorkspace();\\n\\nform.sideShow =(uri)=>{\\n  let newform = JJFormInclude.open(uri);\\n  form.rightBar.prepend(newform);\\n}\\nform.layerShow =(uri)=>{\\n  let newform = JJFormLayer.open(uri);\\n}\\n\\nform.fullShow =(uri)=>{\\n  let newform = JJFormFull.open(uri);\\n}\\n\\nform.minSize=()=>{\\n  form.style.display = \\\"none\\\"\\n}\\n\\nform.rightShow=()=>{\\n  form.studioBox.classList.toggle(\\\"right-bar-enabled\\\");\\n}\\n\\nform.treeShow=()=>{\\n  form.treeWrap.classList.toggle(\\\"tree-disabled\\\");\\n}\\n\\nform.appBuilder =(e)=>{\\n  let spinIcon = e.target.querySelector(`.spinner-border-sm`);\\n  spinIcon.classList.add('spinner-border');\\n  \\n\\tform.builder.appBuilder().then(result=>{\\n    spinIcon.classList.remove('spinner-border');\\n    alert(\\\"빌더가 완료되었습니다\\\");\\n  }).catch(ex=>{\\n    spinIcon.classList.remove('spinner-border');\\n  })\\n}\\n\\nform.reset =(e)=>form.builder.reset().then(result=>alert(\\\"서비스가 재 시작되었습니다\\\"));\\nform.stop =(e)=>form.builder.stop().then(result=>alert(\\\"서비스가 정지되었습니다\\\"));\\nform.start =(e)=>form.builder.start().then(result=>alert(\\\"서비스가 시작되었습니다\\\"));\\n\\nform.showWorkspaceInfo =(e)=>{\\n  Jinja.driverApi.getUri(location.host.split(\\\".\\\")[0]).then(fileInfo=>{\\n    form.mditab.addFile(fileInfo.ID, fileInfo.NAME);\\n  });  \\n}\\nform.logout=()=>{\\n\\tJinja.event.dispatch('JJLogout',\\\"studio.theme\\\",{\\\"detail\\\": Jinja.uo});  \\n}\\n\\n// Jinja.notification.setNotiBox(form.notiBox);\\n// Jinja.notification.addNotiBox(`<h2>안녕</h2>`);\"\n}","URI":"studioAll.710.uc","TYPE":"page"}],"domainRuleUri":null}
/* ==ext711.pkg.deploy================ */
/* ==app.font.class================ */
/* ==app.boot.class================ */
/* ==app.blue.class================ */
/* ==app.fontIcon.class================ */
/* ==app.less.class================ */
/* ==https://cdn.appspeed.net:8444/repository/assets/libs/less/less.min.js================ */
/*!
 * Less - Leaner CSS v3.9.0
 * http://lesscss.org
 *
 * Copyright (c) 2009-2018, Alexis Sellier <self@cloudhead.net>
 * Licensed under the Apache-2.0 License.
 *
 */

 /** * @license Apache-2.0
 */

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.less=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./utils").addDataAttr,e=a("./browser");b.exports=function(a,b){d(b,e.currentScript(a)),void 0===b.isFileProtocol&&(b.isFileProtocol=/^(file|(chrome|safari)(-extension)?|resource|qrc|app):/.test(a.location.protocol)),b.async=b.async||!1,b.fileAsync=b.fileAsync||!1,b.poll=b.poll||(b.isFileProtocol?1e3:1500),b.env=b.env||("127.0.0.1"==a.location.hostname||"0.0.0.0"==a.location.hostname||"localhost"==a.location.hostname||a.location.port&&a.location.port.length>0||b.isFileProtocol?"development":"production");var c=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(a.location.hash);c&&(b.dumpLineNumbers=c[1]),void 0===b.useFileCache&&(b.useFileCache=!0),void 0===b.onReady&&(b.onReady=!0),b.relativeUrls&&(b.rewriteUrls="all")}},{"./browser":3,"./utils":11}],2:[function(a,b,c){function d(a){a.filename&&console.warn(a),e.async||h.removeChild(i)}a("promise/polyfill");var e=a("../less/default-options")();if(window.less)for(key in window.less)window.less.hasOwnProperty(key)&&(e[key]=window.less[key]);a("./add-default-options")(window,e),e.plugins=e.plugins||[],window.LESS_PLUGINS&&(e.plugins=e.plugins.concat(window.LESS_PLUGINS));var f=b.exports=a("./index")(window,e);window.less=f;var g,h,i;e.onReady&&(/!watch/.test(window.location.hash)&&f.watch(),e.async||(g="body { display: none !important }",h=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style"),i.type="text/css",i.styleSheet?i.styleSheet.cssText=g:i.appendChild(document.createTextNode(g)),h.appendChild(i)),f.registerStylesheetsImmediately(),f.pageLoadFinished=f.refresh("development"===f.env).then(d,d))},{"../less/default-options":17,"./add-default-options":1,"./index":8,"promise/polyfill":104}],3:[function(a,b,c){var d=a("./utils");b.exports={createCSS:function(a,b,c){var e=c.href||"",f="less:"+(c.title||d.extractId(e)),g=a.getElementById(f),h=!1,i=a.createElement("style");i.setAttribute("type","text/css"),c.media&&i.setAttribute("media",c.media),i.id=f,i.styleSheet||(i.appendChild(a.createTextNode(b)),h=null!==g&&g.childNodes.length>0&&i.childNodes.length>0&&g.firstChild.nodeValue===i.firstChild.nodeValue);var j=a.getElementsByTagName("head")[0];if(null===g||h===!1){var k=c&&c.nextSibling||null;k?k.parentNode.insertBefore(i,k):j.appendChild(i)}if(g&&h===!1&&g.parentNode.removeChild(g),i.styleSheet)try{i.styleSheet.cssText=b}catch(l){throw new Error("Couldn't reassign styleSheet.cssText.")}},currentScript:function(a){var b=a.document;return b.currentScript||function(){var a=b.getElementsByTagName("script");return a[a.length-1]}()}}},{"./utils":11}],4:[function(a,b,c){b.exports=function(a,b,c){var d=null;if("development"!==b.env)try{d="undefined"==typeof a.localStorage?null:a.localStorage}catch(e){}return{setCSS:function(a,b,e,f){if(d){c.info("saving "+a+" to cache.");try{d.setItem(a,f),d.setItem(a+":timestamp",b),e&&d.setItem(a+":vars",JSON.stringify(e))}catch(g){c.error('failed to save "'+a+'" to local storage for caching.')}}},getCSS:function(a,b,c){var e=d&&d.getItem(a),f=d&&d.getItem(a+":timestamp"),g=d&&d.getItem(a+":vars");if(c=c||{},g=g||"{}",f&&b.lastModified&&new Date(b.lastModified).valueOf()===new Date(f).valueOf()&&JSON.stringify(c)===g)return e}}}},{}],5:[function(a,b,c){var d=a("./utils"),e=a("./browser");b.exports=function(a,b,c){function f(b,f){var g,h,i="less-error-message:"+d.extractId(f||""),j='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',k=a.document.createElement("div"),l=[],m=b.filename||f,n=m.match(/([^\/]+(\?.*)?)$/)[1];k.id=i,k.className="less-error-message",h="<h3>"+(b.type||"Syntax")+"Error: "+(b.message||"There is an error in your .less file")+'</h3><p>in <a href="'+m+'">'+n+"</a> ";var o=function(a,b,c){void 0!==a.extract[b]&&l.push(j.replace(/\{line\}/,(parseInt(a.line,10)||0)+(b-1)).replace(/\{class\}/,c).replace(/\{content\}/,a.extract[b]))};b.line&&(o(b,0,""),o(b,1,"line"),o(b,2,""),h+="on line "+b.line+", column "+(b.column+1)+":</p><ul>"+l.join("")+"</ul>"),b.stack&&(b.extract||c.logLevel>=4)&&(h+="<br/>Stack Trace</br />"+b.stack.split("\n").slice(1).join("<br/>")),k.innerHTML=h,e.createCSS(a.document,[".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),k.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"===c.env&&(g=setInterval(function(){var b=a.document,c=b.body;c&&(b.getElementById(i)?c.replaceChild(k,b.getElementById(i)):c.insertBefore(k,c.firstChild),clearInterval(g))},10))}function g(b){var c=a.document.getElementById("less-error-message:"+d.extractId(b));c&&c.parentNode.removeChild(c)}function h(a){}function i(a){c.errorReporting&&"html"!==c.errorReporting?"console"===c.errorReporting?h(a):"function"==typeof c.errorReporting&&c.errorReporting("remove",a):g(a)}function j(a,d){var e="{line} {content}",f=a.filename||d,g=[],h=(a.type||"Syntax")+"Error: "+(a.message||"There is an error in your .less file")+" in "+f,i=function(a,b,c){void 0!==a.extract[b]&&g.push(e.replace(/\{line\}/,(parseInt(a.line,10)||0)+(b-1)).replace(/\{class\}/,c).replace(/\{content\}/,a.extract[b]))};a.line&&(i(a,0,""),i(a,1,"line"),i(a,2,""),h+=" on line "+a.line+", column "+(a.column+1)+":\n"+g.join("\n")),a.stack&&(a.extract||c.logLevel>=4)&&(h+="\nStack Trace\n"+a.stack),b.logger.error(h)}function k(a,b){c.errorReporting&&"html"!==c.errorReporting?"console"===c.errorReporting?j(a,b):"function"==typeof c.errorReporting&&c.errorReporting("add",a,b):f(a,b)}return{add:k,remove:i}}},{"./browser":3,"./utils":11}],6:[function(a,b,c){b.exports=function(b,c){var d=a("../less/environment/abstract-file-manager.js"),e={},f=function(){};return f.prototype=new d,f.prototype.alwaysMakePathsAbsolute=function(){return!0},f.prototype.join=function(a,b){return a?this.extractUrlParts(b,a).path:b},f.prototype.doXHR=function(a,d,e,f){function g(b,c,d){b.status>=200&&b.status<300?c(b.responseText,b.getResponseHeader("Last-Modified")):"function"==typeof d&&d(b.status,a)}var h=new XMLHttpRequest,i=!b.isFileProtocol||b.fileAsync;"function"==typeof h.overrideMimeType&&h.overrideMimeType("text/css"),c.debug("XHR: Getting '"+a+"'"),h.open("GET",a,i),h.setRequestHeader("Accept",d||"text/x-less, text/css; q=0.9, */*; q=0.5"),h.send(null),b.isFileProtocol&&!b.fileAsync?0===h.status||h.status>=200&&h.status<300?e(h.responseText):f(h.status,a):i?h.onreadystatechange=function(){4==h.readyState&&g(h,e,f)}:g(h,e,f)},f.prototype.supports=function(a,b,c,d){return!0},f.prototype.clearFileCache=function(){e={}},f.prototype.loadFile=function(a,b,c,d){b&&!this.isPathAbsolute(a)&&(a=b+a),a=c.ext?this.tryAppendExtension(a,c.ext):a,c=c||{};var f=this.extractUrlParts(a,window.location.href),g=f.url,h=this;return new Promise(function(a,b){if(c.useFileCache&&e[g])try{var d=e[g];return a({contents:d,filename:g,webInfo:{lastModified:new Date}})}catch(f){return b({filename:g,message:"Error loading file "+g+" error was "+f.message})}h.doXHR(g,c.mime,function(b,c){e[g]=b,a({contents:b,filename:g,webInfo:{lastModified:c}})},function(a,c){b({type:"File",message:"'"+c+"' wasn't found ("+a+")",href:g})})})},f}},{"../less/environment/abstract-file-manager.js":18}],7:[function(a,b,c){b.exports=function(){function b(){throw{type:"Runtime",message:"Image size functions are not supported in browser version of less"}}var c=a("./../less/functions/function-registry"),d={"image-size":function(a){return b(this,a),-1},"image-width":function(a){return b(this,a),-1},"image-height":function(a){return b(this,a),-1}};c.addMultiple(d)}},{"./../less/functions/function-registry":27}],8:[function(a,b,c){var d=a("./utils").addDataAttr,e=a("./browser");b.exports=function(b,c){function f(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function g(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){var d=c.concat(Array.prototype.slice.call(arguments,0));return a.apply(b,d)}}function h(a){for(var b,d=l.getElementsByTagName("style"),e=0;e<d.length;e++)if(b=d[e],b.type.match(s)){var h=f(c);h.modifyVars=a;var i=b.innerHTML||"";h.filename=l.location.href.replace(/#.*$/,""),m.render(i,h,g(function(a,b,c){b?q.add(b,"inline"):(a.type="text/css",a.styleSheet?a.styleSheet.cssText=c.css:a.innerHTML=c.css)},null,b))}}function i(a,b,e,g,h){function i(c){var d=c.contents,f=c.filename,h=c.webInfo,i={currentDirectory:p.getPath(f),filename:f,rootFilename:f,rewriteUrls:j.rewriteUrls};if(i.entryPath=i.currentDirectory,i.rootpath=j.rootpath||i.currentDirectory,h){h.remaining=g;var k=r.getCSS(f,h,j.modifyVars);if(!e&&k)return h.local=!0,void b(null,k,d,a,h,f)}q.remove(f),j.rootFileInfo=i,m.render(d,j,function(c,e){c?(c.href=f,b(c)):(r.setCSS(a.href,h.lastModified,j.modifyVars,e.css),b(null,e.css,d,a,h,f))})}var j=f(c);d(j,a),j.mime=a.type,h&&(j.modifyVars=h),p.loadFile(a.href,null,j,n).then(function(a){i(a)})["catch"](function(a){console.log(a),b(a)})}function j(a,b,c){for(var d=0;d<m.sheets.length;d++)i(m.sheets[d],a,b,m.sheets.length-(d+1),c)}function k(){"development"===m.env&&(m.watchTimer=setInterval(function(){m.watchMode&&(p.clearFileCache(),j(function(a,c,d,f,g){a?q.add(a,a.href||f.href):c&&e.createCSS(b.document,c,f)}))},c.poll))}var l=b.document,m=a("../less")();m.options=c;var n=m.environment,o=a("./file-manager")(c,m.logger),p=new o;n.addFileManager(p),m.FileManager=o,m.PluginLoader=a("./plugin-loader"),a("./log-listener")(m,c);var q=a("./error-reporting")(b,m,c),r=m.cache=c.cache||a("./cache")(b,c,m.logger);a("./image-size")(m.environment),c.functions&&m.functions.functionRegistry.addMultiple(c.functions);var s=/^text\/(x-)?less$/;return m.watch=function(){return m.watchMode||(m.env="development",k()),this.watchMode=!0,!0},m.unwatch=function(){return clearInterval(m.watchTimer),this.watchMode=!1,!1},m.registerStylesheetsImmediately=function(){var a=l.getElementsByTagName("link");m.sheets=[];for(var b=0;b<a.length;b++)("stylesheet/less"===a[b].rel||a[b].rel.match(/stylesheet/)&&a[b].type.match(s))&&m.sheets.push(a[b])},m.registerStylesheets=function(){return new Promise(function(a,b){m.registerStylesheetsImmediately(),a()})},m.modifyVars=function(a){return m.refresh(!0,a,!1)},m.refresh=function(a,c,d){return(a||d)&&d!==!1&&p.clearFileCache(),new Promise(function(d,f){var g,i,k,l;g=i=new Date,l=m.sheets.length,0===l?(i=new Date,k=i-g,m.logger.info("Less has finished and no sheets were loaded."),d({startTime:g,endTime:i,totalMilliseconds:k,sheets:m.sheets.length})):j(function(a,c,h,j,n){return a?(q.add(a,a.href||j.href),void f(a)):(m.logger.info(n.local?"Loading "+j.href+" from cache.":"Rendered "+j.href+" successfully."),e.createCSS(b.document,c,j),m.logger.info("CSS for "+j.href+" generated in "+(new Date-i)+"ms"),l--,0===l&&(k=new Date-g,m.logger.info("Less has finished. CSS generated in "+k+"ms"),d({startTime:g,endTime:i,totalMilliseconds:k,sheets:m.sheets.length})),void(i=new Date))},a,c),h(c)})},m.refreshStyles=h,m}},{"../less":37,"./browser":3,"./cache":4,"./error-reporting":5,"./file-manager":6,"./image-size":7,"./log-listener":9,"./plugin-loader":10,"./utils":11}],9:[function(a,b,c){b.exports=function(a,b){var c=4,d=3,e=2,f=1;b.logLevel="undefined"!=typeof b.logLevel?b.logLevel:"development"===b.env?d:f,b.loggers||(b.loggers=[{debug:function(a){b.logLevel>=c&&console.log(a)},info:function(a){b.logLevel>=d&&console.log(a)},warn:function(a){b.logLevel>=e&&console.warn(a)},error:function(a){b.logLevel>=f&&console.error(a)}}]);for(var g=0;g<b.loggers.length;g++)a.logger.addListener(b.loggers[g])}},{}],10:[function(a,b,c){var d=a("../less/environment/abstract-plugin-loader.js"),e=function(a){this.less=a};e.prototype=new d,e.prototype.loadPlugin=function(a,b,c,d,e){return new Promise(function(f,g){e.loadFile(a,b,c,d).then(f)["catch"](g)})},b.exports=e},{"../less/environment/abstract-plugin-loader.js":19}],11:[function(a,b,c){b.exports={extractId:function(a){return a.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/[\?\&]livereload=\w+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")},addDataAttr:function(a,b){for(var c in b.dataset)if(b.dataset.hasOwnProperty(c))if("env"===c||"dumpLineNumbers"===c||"rootpath"===c||"errorReporting"===c)a[c]=b.dataset[c];else try{a[c]=JSON.parse(b.dataset[c])}catch(d){}}}},{}],12:[function(a,b,c){b.exports={Math:{ALWAYS:0,PARENS_DIVISION:1,PARENS:2,STRICT_LEGACY:3},RewriteUrls:{OFF:0,LOCAL:1,ALL:2}}},{}],13:[function(a,b,c){function d(a){return!/^(?:[a-z-]+:|\/|#)/i.test(a)}function e(a){return"."===a.charAt(0)}var f={};b.exports=f;var g=a("./constants"),h=function(a,b,c){if(a)for(var d=0;d<c.length;d++)a.hasOwnProperty(c[d])&&(b[c[d]]=a[c[d]])},i=["paths","rewriteUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","syncImport","chunkInput","mime","useFileCache","processImports","pluginManager"];f.Parse=function(a){h(a,this,i),"string"==typeof this.paths&&(this.paths=[this.paths])};var j=["paths","compress","ieCompat","math","strictUnits","sourceMap","importMultiple","urlArgs","javascriptEnabled","pluginManager","importantScope","rewriteUrls"];f.Eval=function(a,b){h(a,this,j),"string"==typeof this.paths&&(this.paths=[this.paths]),this.frames=b||[],this.importantScope=this.importantScope||[]},f.Eval.prototype.enterCalc=function(){this.calcStack||(this.calcStack=[]),this.calcStack.push(!0),this.inCalc=!0},f.Eval.prototype.exitCalc=function(){this.calcStack.pop(),this.calcStack||(this.inCalc=!1)},f.Eval.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},f.Eval.prototype.outOfParenthesis=function(){this.parensStack.pop()},f.Eval.prototype.inCalc=!1,f.Eval.prototype.mathOn=!0,f.Eval.prototype.isMathOn=function(a){return!!this.mathOn&&(!!("/"!==a||this.math===g.Math.ALWAYS||this.parensStack&&this.parensStack.length)&&(!(this.math>g.Math.PARENS_DIVISION)||this.parensStack&&this.parensStack.length))},f.Eval.prototype.pathRequiresRewrite=function(a){var b=this.rewriteUrls===g.RewriteUrls.LOCAL?e:d;return b(a)},f.Eval.prototype.rewritePath=function(a,b){var c;return b=b||"",c=this.normalizePath(b+a),e(a)&&d(b)&&e(c)===!1&&(c="./"+c),c},f.Eval.prototype.normalizePath=function(a){var b,c=a.split("/").reverse();for(a=[];0!==c.length;)switch(b=c.pop()){case".":break;case"..":0===a.length||".."===a[a.length-1]?a.push(b):a.pop();break;default:a.push(b)}return a.join("/")}},{"./constants":12}],14:[function(a,b,c){b.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],15:[function(a,b,c){b.exports={colors:a("./colors"),unitConversions:a("./unit-conversions")}},{"./colors":14,"./unit-conversions":16}],16:[function(a,b,c){b.exports={length:{m:1,cm:.01,mm:.001,"in":.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}}},{}],17:[function(a,b,c){b.exports=function(){return{javascriptEnabled:!1,depends:!1,compress:!1,lint:!1,paths:[],color:!0,strictImports:!1,insecure:!1,rootpath:"",rewriteUrls:!1,ieCompat:!1,math:0,strictUnits:!1,globalVars:null,modifyVars:null,urlArgs:""}}},{}],18:[function(a,b,c){var d=function(){};d.prototype.getPath=function(a){var b=a.lastIndexOf("?");return b>0&&(a=a.slice(0,b)),b=a.lastIndexOf("/"),b<0&&(b=a.lastIndexOf("\\")),b<0?"":a.slice(0,b+1)},d.prototype.tryAppendExtension=function(a,b){return/(\.[a-z]*$)|([\?;].*)$/.test(a)?a:a+b},d.prototype.tryAppendLessExtension=function(a){return this.tryAppendExtension(a,".less")},d.prototype.supportsSync=function(){return!1},d.prototype.alwaysMakePathsAbsolute=function(){return!1},d.prototype.isPathAbsolute=function(a){return/^(?:[a-z-]+:|\/|\\|#)/i.test(a)},d.prototype.join=function(a,b){return a?a+b:b},d.prototype.pathDiff=function(a,b){var c,d,e,f,g=this.extractUrlParts(a),h=this.extractUrlParts(b),i="";if(g.hostPart!==h.hostPart)return"";for(d=Math.max(h.directories.length,g.directories.length),c=0;c<d&&h.directories[c]===g.directories[c];c++);for(f=h.directories.slice(c),e=g.directories.slice(c),c=0;c<f.length-1;c++)i+="../";for(c=0;c<e.length-1;c++)i+=e[c]+"/";return i},d.prototype.extractUrlParts=function(a,b){var c,d,e=/^((?:[a-z-]+:)?\/{2}(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,f=a.match(e),g={},h=[],i=[];if(!f)throw new Error("Could not parse sheet href - '"+a+"'");if(b&&(!f[1]||f[2])){if(d=b.match(e),!d)throw new Error("Could not parse page url - '"+b+"'");f[1]=f[1]||d[1]||"",f[2]||(f[3]=d[3]+f[3])}if(f[3])for(h=f[3].replace(/\\/g,"/").split("/"),c=0;c<h.length;c++)".."===h[c]?i.pop():"."!==h[c]&&i.push(h[c]);return g.hostPart=f[1],g.directories=i,g.rawPath=(f[1]||"")+h.join("/"),g.path=(f[1]||"")+i.join("/"),g.filename=f[4],g.fileUrl=g.path+(f[4]||""),g.url=g.fileUrl+(f[5]||""),g},b.exports=d},{}],19:[function(a,b,c){var d=a("../functions/function-registry"),e=a("../less-error"),f=function(){this.require=function(){return null}};f.prototype.evalPlugin=function(a,b,c,f,g){var h,i,j,k,l,m,n;l=b.pluginManager,g&&(m="string"==typeof g?g:g.filename);var o=(new this.less.FileManager).extractUrlParts(m).filename;if(m&&(j=l.get(m))){if(n=this.trySetOptions(j,m,o,f))return n;try{j.use&&j.use.call(this.context,j)}catch(p){return p.message=p.message||"Error during @plugin call",new e(p,c,m)}return j}k={exports:{},pluginManager:l,fileInfo:g},i=d.create();var q=function(a){j=a};try{h=new Function("module","require","registerPlugin","functions","tree","less","fileInfo",a),h(k,this.require(m),q,i,this.less.tree,this.less,g)}catch(p){return new e(p,c,m)}if(j||(j=k.exports),j=this.validatePlugin(j,m,o),j instanceof e)return j;if(!j)return new e({message:"Not a valid plugin"},c,m);if(j.imports=c,j.filename=m,(!j.minVersion||this.compareVersion("3.0.0",j.minVersion)<0)&&(n=this.trySetOptions(j,m,o,f)))return n;if(l.addPlugin(j,g.filename,i),j.functions=i.getLocalFunctions(),n=this.trySetOptions(j,m,o,f))return n;try{j.use&&j.use.call(this.context,j)}catch(p){return p.message=p.message||"Error during @plugin call",new e(p,c,m)}return j},f.prototype.trySetOptions=function(a,b,c,d){if(d&&!a.setOptions)return new e({message:"Options have been provided but the plugin "+c+" does not support any options."});try{a.setOptions&&a.setOptions(d)}catch(f){return new e(f)}},f.prototype.validatePlugin=function(a,b,c){return a?("function"==typeof a&&(a=new a),a.minVersion&&this.compareVersion(a.minVersion,this.less.version)<0?new e({message:"Plugin "+c+" requires version "+this.versionToString(a.minVersion)}):a):null},f.prototype.compareVersion=function(a,b){"string"==typeof a&&(a=a.match(/^(\d+)\.?(\d+)?\.?(\d+)?/),a.shift());for(var c=0;c<a.length;c++)if(a[c]!==b[c])return parseInt(a[c])>parseInt(b[c])?-1:1;return 0},f.prototype.versionToString=function(a){for(var b="",c=0;c<a.length;c++)b+=(b?".":"")+a[c];return b},f.prototype.printUsage=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.printUsage&&c.printUsage()}},b.exports=f},{"../functions/function-registry":27,"../less-error":38}],20:[function(a,b,c){var d=a("../logger"),e=function(a,b){this.fileManagers=b||[],a=a||{};for(var c=["encodeBase64","mimeLookup","charsetLookup","getSourceMapGenerator"],d=[],e=d.concat(c),f=0;f<e.length;f++){var g=e[f],h=a[g];h?this[g]=h.bind(a):f<d.length&&this.warn("missing required function in environment - "+g)}};e.prototype.getFileManager=function(a,b,c,e,f){a||d.warn("getFileManager called with no filename.. Please report this issue. continuing."),null==b&&d.warn("getFileManager called with null directory.. Please report this issue. continuing.");var g=this.fileManagers;c.pluginManager&&(g=[].concat(g).concat(c.pluginManager.getFileManagers()));for(var h=g.length-1;h>=0;h--){var i=g[h];if(i[f?"supportsSync":"supports"](a,b,c,e))return i}return null},e.prototype.addFileManager=function(a){this.fileManagers.push(a)},e.prototype.clearFileManagers=function(){this.fileManagers=[]},b.exports=e},{"../logger":39}],21:[function(a,b,c){var d=a("./function-registry"),e=a("../tree/anonymous"),f=a("../tree/keyword");d.addMultiple({"boolean":function(a){return a?f.True:f.False},"if":function(a,b,c){return a?b:c||new e}})},{"../tree/anonymous":50,"../tree/keyword":70,"./function-registry":27}],22:[function(a,b,c){function d(a,b,c){var d,f,g,h,i=b.alpha,j=c.alpha,k=[];g=j+i*(1-j);for(var l=0;l<3;l++)d=b.rgb[l]/255,f=c.rgb[l]/255,h=a(d,f),g&&(h=(j*f+i*(d-j*(d+f-h)))/g),k[l]=255*h;return new e(k,g)}var e=a("../tree/color"),f=a("./function-registry"),g={multiply:function(a,b){return a*b},screen:function(a,b){return a+b-a*b},overlay:function(a,b){return a*=2,a<=1?g.multiply(a,b):g.screen(a-1,b)},softlight:function(a,b){var c=1,d=a;return b>.5&&(d=1,c=a>.25?Math.sqrt(a):((16*a-12)*a+4)*a),a-(1-2*b)*d*(c-a)},hardlight:function(a,b){return g.overlay(b,a)},difference:function(a,b){return Math.abs(a-b)},exclusion:function(a,b){return a+b-2*a*b},average:function(a,b){return(a+b)/2},negation:function(a,b){return 1-Math.abs(a+b-1)}};for(var h in g)g.hasOwnProperty(h)&&(d[h]=d.bind(null,g[h]));f.addMultiple(d)},{"../tree/color":55,"./function-registry":27}],23:[function(a,b,c){function d(a){return Math.min(1,Math.max(0,a))}function e(a,b){var c=h.hsla(b.h,b.s,b.l,b.a);if(c)return c.value=a.value&&/^(rgb|hsl)/.test(a.value)?a.value:"rgb",c}function f(a){if(a instanceof i)return parseFloat(a.unit.is("%")?a.value/100:a.value);if("number"==typeof a)return a;throw{type:"Argument",message:"color functions take numbers as parameters"}}function g(a,b){return a instanceof i&&a.unit.is("%")?parseFloat(a.value*b/100):f(a)}var h,i=a("../tree/dimension"),j=a("../tree/color"),k=a("../tree/quoted"),l=a("../tree/anonymous"),m=a("./function-registry");h={rgb:function(a,b,c){var d=h.rgba(a,b,c,1);if(d)return d.value="rgb",d},rgba:function(a,b,c,d){try{if(a instanceof j)return d=b?f(b):a.alpha,new j(a.rgb,d,"rgba");var e=[a,b,c].map(function(a){return g(a,255)});return d=f(d),new j(e,d,"rgba")}catch(h){}},hsl:function(a,b,c){var d=h.hsla(a,b,c,1);if(d)return d.value="hsl",d},hsla:function(a,b,c,e){function g(a){return a=a<0?a+1:a>1?a-1:a,6*a<1?h+(i-h)*a*6:2*a<1?i:3*a<2?h+(i-h)*(2/3-a)*6:h}try{if(a instanceof j)return e=b?f(b):a.alpha,new j(a.rgb,e,"hsla");var h,i;a=f(a)%360/360,b=d(f(b)),c=d(f(c)),e=d(f(e)),i=c<=.5?c*(b+1):c+b-c*b,h=2*c-i;var k=[255*g(a+1/3),255*g(a),255*g(a-1/3)];return e=f(e),new j(k,e,"hsla")}catch(l){}},hsv:function(a,b,c){return h.hsva(a,b,c,1)},hsva:function(a,b,c,d){a=f(a)%360/360*360,b=f(b),c=f(c),d=f(d);var e,g;e=Math.floor(a/60%6),g=a/60-e;var i=[c,c*(1-b),c*(1-g*b),c*(1-(1-g)*b)],j=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return h.rgba(255*i[j[e][0]],255*i[j[e][1]],255*i[j[e][2]],d)},hue:function(a){return new i(a.toHSL().h)},saturation:function(a){return new i(100*a.toHSL().s,"%")},lightness:function(a){return new i(100*a.toHSL().l,"%")},hsvhue:function(a){return new i(a.toHSV().h)},hsvsaturation:function(a){return new i(100*a.toHSV().s,"%")},hsvvalue:function(a){return new i(100*a.toHSV().v,"%")},red:function(a){return new i(a.rgb[0])},green:function(a){return new i(a.rgb[1])},blue:function(a){return new i(a.rgb[2])},alpha:function(a){return new i(a.toHSL().a)},luma:function(a){return new i(a.luma()*a.alpha*100,"%")},luminance:function(a){var b=.2126*a.rgb[0]/255+.7152*a.rgb[1]/255+.0722*a.rgb[2]/255;return new i(b*a.alpha*100,"%")},saturate:function(a,b,c){if(!a.rgb)return null;var f=a.toHSL();return f.s+="undefined"!=typeof c&&"relative"===c.value?f.s*b.value/100:b.value/100,f.s=d(f.s),e(a,f)},desaturate:function(a,b,c){var f=a.toHSL();return f.s-="undefined"!=typeof c&&"relative"===c.value?f.s*b.value/100:b.value/100,f.s=d(f.s),e(a,f)},lighten:function(a,b,c){var f=a.toHSL();return f.l+="undefined"!=typeof c&&"relative"===c.value?f.l*b.value/100:b.value/100,f.l=d(f.l),e(a,f)},darken:function(a,b,c){var f=a.toHSL();return f.l-="undefined"!=typeof c&&"relative"===c.value?f.l*b.value/100:b.value/100,f.l=d(f.l),e(a,f)},fadein:function(a,b,c){var f=a.toHSL();return f.a+="undefined"!=typeof c&&"relative"===c.value?f.a*b.value/100:b.value/100,f.a=d(f.a),e(a,f)},fadeout:function(a,b,c){var f=a.toHSL();return f.a-="undefined"!=typeof c&&"relative"===c.value?f.a*b.value/100:b.value/100,f.a=d(f.a),e(a,f)},fade:function(a,b){var c=a.toHSL();return c.a=b.value/100,c.a=d(c.a),e(a,c)},spin:function(a,b){var c=a.toHSL(),d=(c.h+b.value)%360;return c.h=d<0?360+d:d,e(a,c)},mix:function(a,b,c){a.toHSL&&b.toHSL||(console.log(b.type),console.dir(b)),c||(c=new i(50));var d=c.value/100,e=2*d-1,f=a.toHSL().a-b.toHSL().a,g=((e*f==-1?e:(e+f)/(1+e*f))+1)/2,h=1-g,k=[a.rgb[0]*g+b.rgb[0]*h,a.rgb[1]*g+b.rgb[1]*h,a.rgb[2]*g+b.rgb[2]*h],l=a.alpha*d+b.alpha*(1-d);return new j(k,l)},greyscale:function(a){return h.desaturate(a,new i(100))},contrast:function(a,b,c,d){if(!a.rgb)return null;if("undefined"==typeof c&&(c=h.rgba(255,255,255,1)),"undefined"==typeof b&&(b=h.rgba(0,0,0,1)),b.luma()>c.luma()){var e=c;c=b,b=e}return d="undefined"==typeof d?.43:f(d),a.luma()<d?c:b},argb:function(a){return new l(a.toARGB())},color:function(a){if(a instanceof k&&/^#([A-Fa-f0-9]{8}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3,4})$/i.test(a.value)){var b=a.value.slice(1);return new j(b,(void 0),"#"+b)}if(a instanceof j||(a=j.fromKeyword(a.value)))return a.value=void 0,a;throw{type:"Argument",message:"argument must be a color keyword or 3|4|6|8 digit hex e.g. #FFF"}},tint:function(a,b){return h.mix(h.rgb(255,255,255),a,b)},shade:function(a,b){return h.mix(h.rgb(0,0,0),a,b)}},m.addMultiple(h)},{"../tree/anonymous":50,"../tree/color":55,"../tree/dimension":62,"../tree/quoted":80,"./function-registry":27}],24:[function(a,b,c){b.exports=function(b){var c=a("../tree/quoted"),d=a("../tree/url"),e=a("../utils"),f=a("./function-registry"),g=function(a,b){return new d(b,a.index,a.currentFileInfo).eval(a.context)},h=a("../logger");f.add("data-uri",function(a,f){f||(f=a,a=null);var i=a&&a.value,j=f.value,k=this.currentFileInfo,l=k.rewriteUrls?k.currentDirectory:k.entryPath,m=j.indexOf("#"),n="";m!==-1&&(n=j.slice(m),j=j.slice(0,m));var o=e.clone(this.context);o.rawBuffer=!0;var p=b.getFileManager(j,l,o,b,!0);if(!p)return g(this,f);var q=!1;if(a)q=/;base64$/.test(i);else{if(i=b.mimeLookup(j),"image/svg+xml"===i)q=!1;else{var r=b.charsetLookup(i);q=["US-ASCII","UTF-8"].indexOf(r)<0}q&&(i+=";base64")}var s=p.loadFileSync(j,l,o,b);if(!s.contents)return h.warn("Skipped data-uri embedding of "+j+" because file not found"),g(this,f||a);var t=s.contents;if(q&&!b.encodeBase64)return g(this,f);t=q?b.encodeBase64(t):encodeURIComponent(t);var u="data:"+i+","+t+n,v=32768;return u.length>=v&&this.context.ieCompat!==!1?(h.warn("Skipped data-uri embedding of "+j+" because its size ("+u.length+" characters) exceeds IE8-safe "+v+" characters!"),g(this,f||a)):new d(new c('"'+u+'"',u,(!1),this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../logger":39,"../tree/quoted":80,"../tree/url":85,"../utils":89,"./function-registry":27}],25:[function(a,b,c){var d=a("../tree/keyword"),e=a("./function-registry"),f={eval:function(){var a=this.value_,b=this.error_;if(b)throw b;if(null!=a)return a?d.True:d.False},value:function(a){this.value_=a},error:function(a){this.error_=a},reset:function(){this.value_=this.error_=null}};e.add("default",f.eval.bind(f)),b.exports=f},{"../tree/keyword":70,"./function-registry":27}],26:[function(a,b,c){var d=a("../tree/expression"),e=function(a,b,c,d){this.name=a.toLowerCase(),this.index=c,this.context=b,this.currentFileInfo=d,this.func=b.frames[0].functionRegistry.get(this.name)};e.prototype.isValid=function(){return Boolean(this.func)},e.prototype.call=function(a){return Array.isArray(a)&&(a=a.filter(function(a){return"Comment"!==a.type}).map(function(a){if("Expression"===a.type){
var b=a.value.filter(function(a){return"Comment"!==a.type});return 1===b.length?b[0]:new d(b)}return a})),this.func.apply(this,a)},b.exports=e},{"../tree/expression":64}],27:[function(a,b,c){function d(a){return{_data:{},add:function(a,b){a=a.toLowerCase(),this._data.hasOwnProperty(a),this._data[a]=b},addMultiple:function(a){Object.keys(a).forEach(function(b){this.add(b,a[b])}.bind(this))},get:function(b){return this._data[b]||a&&a.get(b)},getLocalFunctions:function(){return this._data},inherit:function(){return d(this)},create:function(a){return d(a)}}}b.exports=d(null)},{}],28:[function(a,b,c){b.exports=function(b){var c={functionRegistry:a("./function-registry"),functionCaller:a("./function-caller")};return a("./boolean"),a("./default"),a("./color"),a("./color-blending"),a("./data-uri")(b),a("./list"),a("./math"),a("./number"),a("./string"),a("./svg")(b),a("./types"),c}},{"./boolean":21,"./color":23,"./color-blending":22,"./data-uri":24,"./default":25,"./function-caller":26,"./function-registry":27,"./list":29,"./math":31,"./number":32,"./string":33,"./svg":34,"./types":35}],29:[function(a,b,c){var d=a("../tree/comment"),e=a("../tree/dimension"),f=a("../tree/declaration"),g=a("../tree/expression"),h=a("../tree/ruleset"),i=a("../tree/selector"),j=a("../tree/element"),k=a("./function-registry"),l=function(a){var b=Array.isArray(a.value)?a.value:Array(a);return b};k.addMultiple({_SELF:function(a){return a},extract:function(a,b){return b=b.value-1,l(a)[b]},length:function(a){return new e(l(a).length)},range:function(a,b,c){var d,f,h=1,i=[];b?(f=b,d=a.value,c&&(h=c.value)):(d=1,f=a);for(var j=d;j<=f.value;j+=h)i.push(new e(j,f.unit));return new g(i)},each:function(a,b){var c,g,k=[];g=a.value?Array.isArray(a.value)?a.value:[a.value]:a.ruleset?a.ruleset.rules:a.rules?a.rules:Array.isArray(a)?a:[a];var l="@value",m="@key",n="@index";b.params?(l=b.params[0]&&b.params[0].name,m=b.params[1]&&b.params[1].name,n=b.params[2]&&b.params[2].name,b=b.rules):b=b.ruleset;for(var o=0;o<g.length;o++){var p,q,r=g[o];r instanceof f?(p="string"==typeof r.name?r.name:r.name[0].value,q=r.value):(p=new e(o+1),q=r),r instanceof d||(c=b.rules.slice(0),l&&c.push(new f(l,q,(!1),(!1),this.index,this.currentFileInfo)),n&&c.push(new f(n,new e(o+1),(!1),(!1),this.index,this.currentFileInfo)),m&&c.push(new f(m,p,(!1),(!1),this.index,this.currentFileInfo)),k.push(new h([new i([new j("","&")])],c,b.strictImports,b.visibilityInfo())))}return new h([new i([new j("","&")])],k,b.strictImports,b.visibilityInfo()).eval(this.context)}})},{"../tree/comment":57,"../tree/declaration":60,"../tree/dimension":62,"../tree/element":63,"../tree/expression":64,"../tree/ruleset":81,"../tree/selector":82,"./function-registry":27}],30:[function(a,b,c){var d=a("../tree/dimension"),e=function(){};e._math=function(a,b,c){if(!(c instanceof d))throw{type:"Argument",message:"argument must be a number"};return null==b?b=c.unit:c=c.unify(),new d(a(parseFloat(c.value)),b)},b.exports=e},{"../tree/dimension":62}],31:[function(a,b,c){var d=a("./function-registry"),e=a("./math-helper.js"),f={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"};for(var g in f)f.hasOwnProperty(g)&&(f[g]=e._math.bind(null,Math[g],f[g]));f.round=function(a,b){var c="undefined"==typeof b?0:b.value;return e._math(function(a){return a.toFixed(c)},null,a)},d.addMultiple(f)},{"./function-registry":27,"./math-helper.js":30}],32:[function(a,b,c){var d=a("../tree/dimension"),e=a("../tree/anonymous"),f=a("./function-registry"),g=a("./math-helper.js"),h=function(a,b){switch(b=Array.prototype.slice.call(b),b.length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var c,f,g,h,i,j,k,l,m=[],n={};for(c=0;c<b.length;c++)if(g=b[c],g instanceof d)if(h=""===g.unit.toString()&&void 0!==l?new d(g.value,l).unify():g.unify(),j=""===h.unit.toString()&&void 0!==k?k:h.unit.toString(),k=""!==j&&void 0===k||""!==j&&""===m[0].unify().unit.toString()?j:k,l=""!==j&&void 0===l?g.unit.toString():l,f=void 0!==n[""]&&""!==j&&j===k?n[""]:n[j],void 0!==f)i=""===m[f].unit.toString()&&void 0!==l?new d(m[f].value,l).unify():m[f].unify(),(a&&h.value<i.value||!a&&h.value>i.value)&&(m[f]=g);else{if(void 0!==k&&j!==k)throw{type:"Argument",message:"incompatible types"};n[j]=m.length,m.push(g)}else Array.isArray(b[c].value)&&Array.prototype.push.apply(b,Array.prototype.slice.call(b[c].value));return 1==m.length?m[0]:(b=m.map(function(a){return a.toCSS(this.context)}).join(this.context.compress?",":", "),new e((a?"min":"max")+"("+b+")"))};f.addMultiple({min:function(){return h(!0,arguments)},max:function(){return h(!1,arguments)},convert:function(a,b){return a.convertTo(b.value)},pi:function(){return new d(Math.PI)},mod:function(a,b){return new d(a.value%b.value,a.unit)},pow:function(a,b){if("number"==typeof a&&"number"==typeof b)a=new d(a),b=new d(b);else if(!(a instanceof d&&b instanceof d))throw{type:"Argument",message:"arguments must be numbers"};return new d(Math.pow(a.value,b.value),a.unit)},percentage:function(a){var b=g._math(function(a){return 100*a},"%",a);return b}})},{"../tree/anonymous":50,"../tree/dimension":62,"./function-registry":27,"./math-helper.js":30}],33:[function(a,b,c){var d=a("../tree/quoted"),e=a("../tree/anonymous"),f=a("../tree/javascript"),g=a("./function-registry");g.addMultiple({e:function(a){return new e(a instanceof f?a.evaluated:a.value)},escape:function(a){return new e(encodeURI(a.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},replace:function(a,b,c,e){var f=a.value;return c="Quoted"===c.type?c.value:c.toCSS(),f=f.replace(new RegExp(b.value,e?e.value:""),c),new d(a.quote||"",f,a.escaped)},"%":function(a){for(var b=Array.prototype.slice.call(arguments,1),c=a.value,e=0;e<b.length;e++)c=c.replace(/%[sda]/i,function(a){var c="Quoted"===b[e].type&&a.match(/s/i)?b[e].value:b[e].toCSS();return a.match(/[A-Z]$/)?encodeURIComponent(c):c});return c=c.replace(/%%/g,"%"),new d(a.quote||"",c,a.escaped)}})},{"../tree/anonymous":50,"../tree/javascript":68,"../tree/quoted":80,"./function-registry":27}],34:[function(a,b,c){b.exports=function(b){var c=a("../tree/dimension"),d=a("../tree/color"),e=a("../tree/expression"),f=a("../tree/quoted"),g=a("../tree/url"),h=a("./function-registry");h.add("svg-gradient",function(a){function b(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position] or direction, color list"}}var h,i,j,k,l,m,n,o,p="linear",q='x="0" y="0" width="1" height="1"',r={compress:!1},s=a.toCSS(r);switch(2==arguments.length?(arguments[1].value.length<2&&b(),h=arguments[1].value):arguments.length<3?b():h=Array.prototype.slice.call(arguments,1),s){case"to bottom":i='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"to right":i='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"to bottom right":i='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"to top right":i='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"ellipse":case"ellipse at center":p="radial",i='cx="50%" cy="50%" r="75%"',q='x="-50" y="-50" width="101" height="101"';break;default:throw{type:"Argument",message:"svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"}}for(j='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"><'+p+'Gradient id="g" '+i+">",k=0;k<h.length;k+=1)h[k]instanceof e?(l=h[k].value[0],m=h[k].value[1]):(l=h[k],m=void 0),l instanceof d&&((0===k||k+1===h.length)&&void 0===m||m instanceof c)||b(),n=m?m.toCSS(r):0===k?"0%":"100%",o=l.alpha,j+='<stop offset="'+n+'" stop-color="'+l.toRGB()+'"'+(o<1?' stop-opacity="'+o+'"':"")+"/>";return j+="</"+p+"Gradient><rect "+q+' fill="url(#g)" /></svg>',j=encodeURIComponent(j),j="data:image/svg+xml,"+j,new g(new f("'"+j+"'",j,(!1),this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../tree/color":55,"../tree/dimension":62,"../tree/expression":64,"../tree/quoted":80,"../tree/url":85,"./function-registry":27}],35:[function(a,b,c){var d=a("../tree/keyword"),e=a("../tree/detached-ruleset"),f=a("../tree/dimension"),g=a("../tree/color"),h=a("../tree/quoted"),i=a("../tree/anonymous"),j=a("../tree/url"),k=a("../tree/operation"),l=a("./function-registry"),m=function(a,b){return a instanceof b?d.True:d.False},n=function(a,b){if(void 0===b)throw{type:"Argument",message:"missing the required second argument to isunit."};if(b="string"==typeof b.value?b.value:b,"string"!=typeof b)throw{type:"Argument",message:"Second argument to isunit should be a unit or a string."};return a instanceof f&&a.unit.is(b)?d.True:d.False};l.addMultiple({isruleset:function(a){return m(a,e)},iscolor:function(a){return m(a,g)},isnumber:function(a){return m(a,f)},isstring:function(a){return m(a,h)},iskeyword:function(a){return m(a,d)},isurl:function(a){return m(a,j)},ispixel:function(a){return n(a,"px")},ispercentage:function(a){return n(a,"%")},isem:function(a){return n(a,"em")},isunit:n,unit:function(a,b){if(!(a instanceof f))throw{type:"Argument",message:"the first argument to unit must be a number"+(a instanceof k?". Have you forgotten parenthesis?":"")};return b=b?b instanceof d?b.value:b.toCSS():"",new f(a.value,b)},"get-unit":function(a){return new i(a.unit)}})},{"../tree/anonymous":50,"../tree/color":55,"../tree/detached-ruleset":61,"../tree/dimension":62,"../tree/keyword":70,"../tree/operation":77,"../tree/quoted":80,"../tree/url":85,"./function-registry":27}],36:[function(a,b,c){var d=a("./contexts"),e=a("./parser/parser"),f=a("./less-error"),g=a("./utils"),h=("undefined"==typeof Promise?a("promise"):Promise,a("./logger"));b.exports=function(a){var b=function(a,b,c){this.less=a,this.rootFilename=c.filename,this.paths=b.paths||[],this.contents={},this.contentsIgnoredChars={},this.mime=b.mime,this.error=null,this.context=b,this.queue=[],this.files={}};return b.prototype.push=function(b,c,i,j,k){var l=this,m=this.context.pluginManager.Loader;this.queue.push(b);var n=function(a,c,d){l.queue.splice(l.queue.indexOf(b),1);var e=d===l.rootFilename;j.optional&&a?(k(null,{rules:[]},!1,null),h.info("The file "+d+" was skipped because it was not found and the import was marked optional.")):(l.files[d]||j.inline||(l.files[d]={root:c,options:j}),a&&!l.error&&(l.error=a),k(a,c,e,d))},o={rewriteUrls:this.context.rewriteUrls,entryPath:i.entryPath,rootpath:i.rootpath,rootFilename:i.rootFilename},p=a.getFileManager(b,i.currentDirectory,this.context,a);if(!p)return void n({message:"Could not find a file-manager for "+b});var q,r=function(a){var b,c=a.filename,g=a.contents.replace(/^\uFEFF/,"");o.currentDirectory=p.getPath(c),o.rewriteUrls&&(o.rootpath=p.join(l.context.rootpath||"",p.pathDiff(o.currentDirectory,o.entryPath)),!p.isPathAbsolute(o.rootpath)&&p.alwaysMakePathsAbsolute()&&(o.rootpath=p.join(o.entryPath,o.rootpath))),o.filename=c;var h=new d.Parse(l.context);h.processImports=!1,l.contents[c]=g,(i.reference||j.reference)&&(o.reference=!0),j.isPlugin?(b=m.evalPlugin(g,h,l,j.pluginArgs,o),b instanceof f?n(b,null,c):n(null,b,c)):j.inline?n(null,g,c):!l.files[c]||l.files[c].options.multiple||j.multiple?new e(h,l,o).parse(g,function(a,b){n(a,b,c)}):n(null,l.files[c].root,c)},s=g.clone(this.context);c&&(s.ext=j.isPlugin?".js":".less"),q=j.isPlugin?m.loadPlugin(b,i.currentDirectory,s,a,p):p.loadFile(b,i.currentDirectory,s,a,function(a,b){a?n(a):r(b)}),q&&q.then(r,n)},b}},{"./contexts":13,"./less-error":38,"./logger":39,"./parser/parser":44,"./utils":89,promise:void 0}],37:[function(a,b,c){b.exports=function(b,c){var d,e,f,g,h,i,j={version:[3,9,0],data:a("./data"),tree:a("./tree"),Environment:h=a("./environment/environment"),AbstractFileManager:a("./environment/abstract-file-manager"),AbstractPluginLoader:a("./environment/abstract-plugin-loader"),environment:b=new h(b,c),visitors:a("./visitors"),Parser:a("./parser/parser"),functions:a("./functions")(b),contexts:a("./contexts"),SourceMapOutput:d=a("./source-map-output")(b),SourceMapBuilder:e=a("./source-map-builder")(d,b),ParseTree:f=a("./parse-tree")(e),ImportManager:g=a("./import-manager")(b),render:a("./render")(b,f,g),parse:a("./parse")(b,f,g),LessError:a("./less-error"),transformTree:a("./transform-tree"),utils:a("./utils"),PluginManager:a("./plugin-manager"),logger:a("./logger")},k=function(a){return function(){var b=Object.create(a.prototype);return a.apply(b,Array.prototype.slice.call(arguments,0)),b}},l=Object.create(j);for(var m in j.tree)if(i=j.tree[m],"function"==typeof i)l[m.toLowerCase()]=k(i);else{l[m]=Object.create(null);for(var n in i)l[m][n.toLowerCase()]=k(i[n])}return l}},{"./contexts":13,"./data":15,"./environment/abstract-file-manager":18,"./environment/abstract-plugin-loader":19,"./environment/environment":20,"./functions":28,"./import-manager":36,"./less-error":38,"./logger":39,"./parse":41,"./parse-tree":40,"./parser/parser":44,"./plugin-manager":45,"./render":46,"./source-map-builder":47,"./source-map-output":48,"./transform-tree":49,"./tree":67,"./utils":89,"./visitors":93}],38:[function(a,b,c){var d=a("./utils"),e=b.exports=function(a,b,c){Error.call(this);var e=a.filename||c;if(this.message=a.message,this.stack=a.stack,b&&e){var f=b.contents[e],g=d.getLocation(a.index,f),h=g.line,i=g.column,j=a.call&&d.getLocation(a.call,f).line,k=f?f.split("\n"):"";if(this.type=a.type||"Syntax",this.filename=e,this.index=a.index,this.line="number"==typeof h?h+1:null,this.column=i,!this.line&&this.stack){var l=this.stack.match(/(<anonymous>|Function):(\d+):(\d+)/);l&&(l[2]&&(this.line=parseInt(l[2])-2),l[3]&&(this.column=parseInt(l[3])))}this.callLine=j+1,this.callExtract=k[j],this.extract=[k[this.line-2],k[this.line-1],k[this.line]]}};if("undefined"==typeof Object.create){var f=function(){};f.prototype=Error.prototype,e.prototype=new f}else e.prototype=Object.create(Error.prototype);e.prototype.constructor=e,e.prototype.toString=function(a){a=a||{};var b="",c=this.extract||[],d=[],e=function(a){return a};if(a.stylize){var f=typeof a.stylize;if("function"!==f)throw Error("options.stylize should be a function, got a "+f+"!");e=a.stylize}if(null!==this.line){if("string"==typeof c[0]&&d.push(e(this.line-1+" "+c[0],"grey")),"string"==typeof c[1]){var g=this.line+" ";c[1]&&(g+=c[1].slice(0,this.column)+e(e(e(c[1].substr(this.column,1),"bold")+c[1].slice(this.column+1),"red"),"inverse")),d.push(g)}"string"==typeof c[2]&&d.push(e(this.line+1+" "+c[2],"grey")),d=d.join("\n")+e("","reset")+"\n"}return b+=e(this.type+"Error: "+this.message,"red"),this.filename&&(b+=e(" in ","red")+this.filename),this.line&&(b+=e(" on line "+this.line+", column "+(this.column+1)+":","grey")),b+="\n"+d,this.callLine&&(b+=e("from ","red")+(this.filename||"")+"/n",b+=e(this.callLine,"grey")+" "+this.callExtract+"/n"),b}},{"./utils":89}],39:[function(a,b,c){b.exports={error:function(a){this._fireEvent("error",a)},warn:function(a){this._fireEvent("warn",a)},info:function(a){this._fireEvent("info",a)},debug:function(a){this._fireEvent("debug",a)},addListener:function(a){this._listeners.push(a)},removeListener:function(a){for(var b=0;b<this._listeners.length;b++)if(this._listeners[b]===a)return void this._listeners.splice(b,1)},_fireEvent:function(a,b){for(var c=0;c<this._listeners.length;c++){var d=this._listeners[c][a];d&&d(b)}},_listeners:[]}},{}],40:[function(a,b,c){var d=a("./less-error"),e=a("./transform-tree"),f=a("./logger");b.exports=function(a){var b=function(a,b){this.root=a,this.imports=b};return b.prototype.toCSS=function(b){var c,g,h={};try{c=e(this.root,b)}catch(i){throw new d(i,this.imports)}try{var j=Boolean(b.compress);j&&f.warn("The compress option has been deprecated. We recommend you use a dedicated css minifier, for instance see less-plugin-clean-css.");var k={compress:j,dumpLineNumbers:b.dumpLineNumbers,strictUnits:Boolean(b.strictUnits),numPrecision:8};b.sourceMap?(g=new a(b.sourceMap),h.css=g.toCSS(c,k,this.imports)):h.css=c.toCSS(k)}catch(i){throw new d(i,this.imports)}if(b.pluginManager)for(var l=b.pluginManager.getPostProcessors(),m=0;m<l.length;m++)h.css=l[m].process(h.css,{sourceMap:g,options:b,imports:this.imports});b.sourceMap&&(h.map=g.getExternalSourceMap()),h.imports=[];for(var n in this.imports.files)this.imports.files.hasOwnProperty(n)&&n!==this.imports.rootFilename&&h.imports.push(n);return h},b}},{"./less-error":38,"./logger":39,"./transform-tree":49}],41:[function(a,b,c){var d,e=a("./contexts"),f=a("./parser/parser"),g=a("./plugin-manager"),h=a("./less-error"),i=a("./utils");b.exports=function(b,c,j){var k=function(b,c,l){if("function"==typeof c?(l=c,c=i.copyOptions(this.options,{})):c=i.copyOptions(this.options,c||{}),!l){d||(d="undefined"==typeof Promise?a("promise"):Promise);var m=this;return new d(function(a,d){k.call(m,b,c,function(b,c){b?d(b):a(c)})})}var n,o,p=new g(this,(!c.reUsePluginManager));if(c.pluginManager=p,n=new e.Parse(c),c.rootFileInfo)o=c.rootFileInfo;else{var q=c.filename||"input",r=q.replace(/[^\/\\]*$/,"");o={filename:q,rewriteUrls:n.rewriteUrls,rootpath:n.rootpath||"",currentDirectory:r,entryPath:r,rootFilename:q},o.rootpath&&"/"!==o.rootpath.slice(-1)&&(o.rootpath+="/")}var s=new j(this,n,o);this.importManager=s,c.plugins&&c.plugins.forEach(function(a){var b,c;if(a.fileContent){if(c=a.fileContent.replace(/^\uFEFF/,""),b=p.Loader.evalPlugin(c,n,s,a.options,a.filename),b instanceof h)return l(b)}else p.addPlugin(a)}),new f(n,s,o).parse(b,function(a,b){return a?l(a):void l(null,b,s,c)},c)};return k}},{"./contexts":13,"./less-error":38,"./parser/parser":44,"./plugin-manager":45,"./utils":89,promise:void 0}],42:[function(a,b,c){b.exports=function(a,b){function c(b){var c=h-q;c<512&&!b||!c||(p.push(a.slice(q,h+1)),q=h+1)}var d,e,f,g,h,i,j,k,l,m=a.length,n=0,o=0,p=[],q=0;for(h=0;h<m;h++)if(j=a.charCodeAt(h),!(j>=97&&j<=122||j<34))switch(j){case 40:o++,e=h;continue;case 41:if(--o<0)return b("missing opening `(`",h);continue;case 59:o||c();continue;case 123:n++,d=h;continue;case 125:if(--n<0)return b("missing opening `{`",h);n||o||c();continue;case 92:if(h<m-1){h++;continue}return b("unescaped `\\`",h);case 34:case 39:case 96:for(l=0,i=h,h+=1;h<m;h++)if(k=a.charCodeAt(h),!(k>96)){if(k==j){l=1;break}if(92==k){if(h==m-1)return b("unescaped `\\`",h);h++}}if(l)continue;return b("unmatched `"+String.fromCharCode(j)+"`",i);case 47:if(o||h==m-1)continue;if(k=a.charCodeAt(h+1),47==k)for(h+=2;h<m&&(k=a.charCodeAt(h),!(k<=13)||10!=k&&13!=k);h++);else if(42==k){for(f=i=h,h+=2;h<m-1&&(k=a.charCodeAt(h),125==k&&(g=h),42!=k||47!=a.charCodeAt(h+1));h++);if(h==m-1)return b("missing closing `*/`",i);h++}continue;case 42:if(h<m-1&&47==a.charCodeAt(h+1))return b("unmatched `/*`",h);continue}return 0!==n?f>d&&g>f?b("missing closing `}` or `*/`",d):b("missing closing `}`",d):0!==o?b("missing closing `)`",e):(c(!0),p)}},{}],43:[function(a,b,c){var d=a("./chunker");b.exports=function(){function a(d){for(var e,f,j,p=k.i,q=c,s=k.i-i,t=k.i+h.length-s,u=k.i+=d,v=b;k.i<t;k.i++){if(e=v.charCodeAt(k.i),k.autoCommentAbsorb&&e===r){if(f=v.charAt(k.i+1),"/"===f){j={index:k.i,isLineComment:!0};var w=v.indexOf("\n",k.i+2);w<0&&(w=t),k.i=w,j.text=v.substr(j.index,k.i-j.index),k.commentStore.push(j);continue}if("*"===f){var x=v.indexOf("*/",k.i+2);if(x>=0){j={index:k.i,text:v.substr(k.i,x+2-k.i),isLineComment:!1},k.i+=j.text.length-1,k.commentStore.push(j);continue}}break}if(e!==l&&e!==n&&e!==m&&e!==o)break}if(h=h.slice(d+k.i-u+s),i=k.i,!h.length){if(c<g.length-1)return h=g[++c],a(0),!0;k.finished=!0}return p!==k.i||q!==c}var b,c,e,f,g,h,i,j=[],k={},l=32,m=9,n=10,o=13,p=43,q=44,r=47,s=57;return k.save=function(){i=k.i,j.push({current:h,i:k.i,j:c})},k.restore=function(a){(k.i>e||k.i===e&&a&&!f)&&(e=k.i,f=a);var b=j.pop();h=b.current,i=k.i=b.i,c=b.j},k.forget=function(){j.pop()},k.isWhitespace=function(a){var c=k.i+(a||0),d=b.charCodeAt(c);return d===l||d===o||d===m||d===n},k.$re=function(b){k.i>i&&(h=h.slice(k.i-i),i=k.i);var c=b.exec(h);return c?(a(c[0].length),"string"==typeof c?c:1===c.length?c[0]:c):null},k.$char=function(c){return b.charAt(k.i)!==c?null:(a(1),c)},k.$str=function(c){for(var d=c.length,e=0;e<d;e++)if(b.charAt(k.i+e)!==c.charAt(e))return null;return a(d),c},k.$quoted=function(c){var d=c||k.i,e=b.charAt(d);if("'"===e||'"'===e){for(var f=b.length,g=d,h=1;h+g<f;h++){var i=b.charAt(h+g);switch(i){case"\\":h++;continue;case"\r":case"\n":break;case e:var j=b.substr(g,h+1);return c||0===c?[e,j]:(a(h+1),j)}}return null}},k.$parseUntil=function(c){var d,e="",f=null,g=!1,h=0,i=[],j=[],l=b.length,m=k.i,n=k.i,o=k.i,p=!0;d="string"==typeof c?function(a){return a===c}:function(a){return c.test(a)};do{var q,r=b.charAt(o);if(0===h&&d(r))f=b.substr(n,o-n),j.push(f?f:" "),f=j,a(o-m),p=!1;else{if(g){"*"===r&&"/"===b.charAt(o+1)&&(o++,h--,g=!1),o++;continue}switch(r){case"\\":o++,r=b.charAt(o),j.push(b.substr(n,o-n+1)),n=o+1;break;case"/":"*"===b.charAt(o+1)&&(o++,g=!0,h++);break;case"'":case'"':e=k.$quoted(o),e?(j.push(b.substr(n,o-n),e),o+=e[1].length-1,n=o+1):(a(o-m),f=r,p=!1);break;case"{":i.push("}"),h++;break;case"(":i.push(")"),h++;break;case"[":i.push("]"),h++;break;case"}":case")":case"]":var s=i.pop();r===s?h--:(a(o-m),f=s,p=!1)}o++,o>l&&(p=!1)}q=r}while(p);return f?f:null},k.autoCommentAbsorb=!0,k.commentStore=[],k.finished=!1,k.peek=function(a){if("string"==typeof a){for(var c=0;c<a.length;c++)if(b.charAt(k.i+c)!==a.charAt(c))return!1;return!0}return a.test(h)},k.peekChar=function(a){return b.charAt(k.i)===a},k.currentChar=function(){return b.charAt(k.i)},k.prevChar=function(){return b.charAt(k.i-1)},k.getInput=function(){return b},k.peekNotNumeric=function(){var a=b.charCodeAt(k.i);return a>s||a<p||a===r||a===q},k.start=function(f,j,l){b=f,k.i=c=i=e=0,g=j?d(f,l):[f],h=g[0],a(0)},k.end=function(){var a,c=k.i>=b.length;return k.i<e&&(a=f,k.i=e),{isFinished:c,furthest:k.i,furthestPossibleErrorMessage:a,furthestReachedEnd:k.i>=b.length-1,furthestChar:b[k.i]}},k}},{"./chunker":42}],44:[function(a,b,c){var d=a("../less-error"),e=a("../tree"),f=a("../visitors"),g=a("./parser-input"),h=a("../utils"),i=a("../functions/function-registry"),j=function k(a,b,c){function j(a,e){throw new d({index:q.i,filename:c.filename,type:e||"Syntax",message:a},b)}function l(a,b){var c=a instanceof Function?a.call(p):q.$re(a);return c?c:void j(b||("string"==typeof a?"expected '"+a+"' got '"+q.currentChar()+"'":"unexpected token"))}function m(a,b){return q.$char(a)?a:void j(b||"expected '"+a+"' got '"+q.currentChar()+"'")}function n(a){var b=c.filename;return{lineNumber:h.getLocation(a,q.getInput()).line+1,fileName:b}}function o(a,c,e,f,g){var h,i=[],j=q;try{j.start(a,!1,function(a,b){g({message:a,index:b+e})});for(var k,l,m=0;k=c[m];m++)l=j.i,h=p[k](),h?(h._index=l+e,h._fileInfo=f,i.push(h)):i.push(null);var n=j.end();n.isFinished?g(null,i):g(!0,null)}catch(o){throw new d({index:o.index+e,message:o.message},b,f.filename)}}var p,q=g();return{parserInput:q,imports:b,fileInfo:c,parseNode:o,parse:function(g,h,j){var l,m,n,o,p=null,r="";if(m=j&&j.globalVars?k.serializeVars(j.globalVars)+"\n":"",n=j&&j.modifyVars?"\n"+k.serializeVars(j.modifyVars):"",a.pluginManager)for(var s=a.pluginManager.getPreProcessors(),t=0;t<s.length;t++)g=s[t].process(g,{context:a,imports:b,fileInfo:c});(m||j&&j.banner)&&(r=(j&&j.banner?j.banner:"")+m,o=b.contentsIgnoredChars,o[c.filename]=o[c.filename]||0,o[c.filename]+=r.length),g=g.replace(/\r\n?/g,"\n"),g=r+g.replace(/^\uFEFF/,"")+n,b.contents[c.filename]=g;try{q.start(g,a.chunkInput,function(a,e){throw new d({index:e,type:"Parse",message:a,filename:c.filename},b)}),e.Node.prototype.parse=this,l=new e.Ruleset(null,this.parsers.primary()),e.Node.prototype.rootNode=l,l.root=!0,l.firstRoot=!0,l.functionRegistry=i.inherit()}catch(u){return h(new d(u,b,c.filename))}var v=q.end();if(!v.isFinished){var w=v.furthestPossibleErrorMessage;w||(w="Unrecognised input","}"===v.furthestChar?w+=". Possibly missing opening '{'":")"===v.furthestChar?w+=". Possibly missing opening '('":v.furthestReachedEnd&&(w+=". Possibly missing something")),p=new d({type:"Parse",message:w,index:v.furthest,filename:c.filename},b)}var x=function(a){return a=p||a||b.error,a?(a instanceof d||(a=new d(a,b,c.filename)),h(a)):h(null,l)};return a.processImports===!1?x():void new f.ImportVisitor(b,x).run(l)},parsers:p={primary:function(){for(var a,b=this.mixin,c=[];;){for(;;){if(a=this.comment(),!a)break;c.push(a)}if(q.finished)break;if(q.peek("}"))break;if(a=this.extendRule())c=c.concat(a);else if(a=b.definition()||this.declaration()||this.ruleset()||b.call(!1,!1)||this.variableCall()||this.entities.call()||this.atrule())c.push(a);else{for(var d=!1;q.$char(";");)d=!0;if(!d)break}}return c},comment:function(){if(q.commentStore.length){var a=q.commentStore.shift();return new e.Comment(a.text,a.isLineComment,a.index,c)}},entities:{mixinLookup:function(){return p.mixin.call(!0,!0)},quoted:function(a){var b,d=q.i,f=!1;if(q.save(),q.$char("~"))f=!0;else if(a)return void q.restore();return(b=q.$quoted())?(q.forget(),new e.Quoted(b.charAt(0),b.substr(1,b.length-2),f,d,c)):void q.restore()},keyword:function(){var a=q.$char("%")||q.$re(/^\[?(?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+\]?/);if(a)return e.Color.fromKeyword(a)||new e.Keyword(a)},call:function(){var a,b,d,f=q.i;if(!q.peek(/^url\(/i))return q.save(),(a=q.$re(/^([\w-]+|%|progid:[\w\.]+)\(/))?(a=a[1],d=this.customFuncCall(a),d&&(b=d.parse(),b&&d.stop)?(q.forget(),b):(b=this.arguments(b),q.$char(")")?(q.forget(),new e.Call(a,b,f,c)):void q.restore("Could not parse call arguments or missing ')'"))):void q.forget()},customFuncCall:function(a){function b(a,b){return{parse:a,stop:b}}function c(){return[l(p.condition,"expected condition")]}return{alpha:b(p.ieAlpha,!0),"boolean":b(c),"if":b(c)}[a.toLowerCase()]},arguments:function(a){var b,c,d=a||[],f=[];for(q.save();;){if(a)a=!1;else{if(c=p.detachedRuleset()||this.assignment()||p.expression(),!c)break;c.value&&1==c.value.length&&(c=c.value[0]),d.push(c)}q.$char(",")||(q.$char(";")||b)&&(b=!0,c=d.length<1?d[0]:new e.Value(d),f.push(c),d=[])}return q.forget(),b?f:d},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var a,b;return q.save(),(a=q.$re(/^\w+(?=\s?=)/i))&&q.$char("=")&&(b=p.entity())?(q.forget(),new e.Assignment(a,b)):void q.restore()},url:function(){var a,b=q.i;return q.autoCommentAbsorb=!1,q.$str("url(")?(a=this.quoted()||this.variable()||this.property()||q.$re(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",q.autoCommentAbsorb=!0,m(")"),new e.URL(null!=a.value||a instanceof e.Variable||a instanceof e.Property?a:new e.Anonymous(a,b),b,c)):void(q.autoCommentAbsorb=!0)},variable:function(){var a,b,d=q.i;if(q.save(),"@"===q.currentChar()&&(b=q.$re(/^@@?[\w-]+/))){if(a=q.currentChar(),"("===a||"["===a&&!q.prevChar().match(/^\s/)){var f=p.variableCall(b);if(f)return q.forget(),f}return q.forget(),new e.Variable(b,d,c)}q.restore()},variableCurly:function(){var a,b=q.i;if("@"===q.currentChar()&&(a=q.$re(/^@\{([\w-]+)\}/)))return new e.Variable("@"+a[1],b,c)},property:function(){var a,b=q.i;if("$"===q.currentChar()&&(a=q.$re(/^\$[\w-]+/)))return new e.Property(a,b,c)},propertyCurly:function(){var a,b=q.i;if("$"===q.currentChar()&&(a=q.$re(/^\$\{([\w-]+)\}/)))return new e.Property("$"+a[1],b,c)},color:function(){var a;if("#"===q.currentChar()&&(a=q.$re(/^#([A-Fa-f0-9]{8}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3,4})/)))return new e.Color(a[1],(void 0),a[0])},colorKeyword:function(){q.save();var a=q.autoCommentAbsorb;q.autoCommentAbsorb=!1;var b=q.$re(/^[_A-Za-z-][_A-Za-z0-9-]+/);if(q.autoCommentAbsorb=a,!b)return void q.forget();q.restore();var c=e.Color.fromKeyword(b);return c?(q.$str(b),c):void 0},dimension:function(){if(!q.peekNotNumeric()){var a=q.$re(/^([+-]?\d*\.?\d+)(%|[a-z_]+)?/i);return a?new e.Dimension(a[1],a[2]):void 0}},unicodeDescriptor:function(){var a;if(a=q.$re(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))return new e.UnicodeDescriptor(a[0])},javascript:function(){var a,b=q.i;q.save();var d=q.$char("~"),f=q.$char("`");return f?(a=q.$re(/^[^`]*`/))?(q.forget(),new e.JavaScript(a.substr(0,a.length-1),Boolean(d),b,c)):void q.restore("invalid javascript definition"):void q.restore()}},variable:function(){var a;if("@"===q.currentChar()&&(a=q.$re(/^(@[\w-]+)\s*:/)))return a[1]},variableCall:function(a){var b,d,f=q.i,g=!!a,h=a;if(q.save(),h||"@"===q.currentChar()&&(h=q.$re(/^(@[\w-]+)(\(\s*\))?/))){if(b=this.mixin.ruleLookups(),!b&&(g&&"()"!==q.$str("()")||"()"!==h[2]))return void q.restore("Missing '[...]' lookup in variable call");g||(h=h[1]),b&&p.important()&&(d=!0);var i=new e.VariableCall(h,f,c);return!g&&p.end()?(q.forget(),i):(q.forget(),new e.NamespaceValue(i,b,d,f,c))}q.restore()},extend:function(a){var b,d,f,g,h,i=q.i;if(q.$str(a?"&:extend(":":extend(")){do{for(f=null,b=null;!(f=q.$re(/^(all)(?=\s*(\)|,))/))&&(d=this.element());)b?b.push(d):b=[d];f=f&&f[1],b||j("Missing target selector for :extend()."),h=new e.Extend(new e.Selector(b),f,i,c),g?g.push(h):g=[h]}while(q.$char(","));return l(/^\)/),a&&l(/^;/),g}},extendRule:function(){return this.extend(!0)},mixin:{call:function(a,b){var d,f,g,h,i=q.currentChar(),j=!1,k=q.i;if("."===i||"#"===i){if(q.save(),f=this.elements()){if(q.$char("(")&&(g=this.args(!0).args,m(")"),h=!0),b!==!1&&(d=this.ruleLookups()),b===!0&&!d)return void q.restore();if(a&&!d&&!h)return void q.restore();if(!a&&p.important()&&(j=!0),a||p.end()){q.forget();var l=new e.mixin.Call(f,g,k,c,!d&&j);return d?new e.NamespaceValue(l,d,j):l}}q.restore()}},elements:function(){for(var a,b,d,f,g,h=/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/;;){if(g=q.i,b=q.$re(h),!b)break;f=new e.Element(d,b,(!1),g,c),a?a.push(f):a=[f],d=q.$char(">")}return a},args:function(a){var b,c,d,f,g,h,i,k=p.entities,l={args:null,variadic:!1},m=[],n=[],o=[],r=!0;for(q.save();;){if(a)h=p.detachedRuleset()||p.expression();else{if(q.commentStore.length=0,q.$str("...")){l.variadic=!0,q.$char(";")&&!b&&(b=!0),(b?n:o).push({variadic:!0});break}h=k.variable()||k.property()||k.literal()||k.keyword()||this.call(!0)}if(!h||!r)break;f=null,h.throwAwayComments&&h.throwAwayComments(),g=h;var s=null;if(a?h.value&&1==h.value.length&&(s=h.value[0]):s=h,s&&(s instanceof e.Variable||s instanceof e.Property))if(q.$char(":")){if(m.length>0&&(b&&j("Cannot mix ; and , as delimiter types"),c=!0),g=p.detachedRuleset()||p.expression(),!g){if(!a)return q.restore(),l.args=[],l;j("could not understand value for named argument")}f=d=s.name}else if(q.$str("...")){if(!a){l.variadic=!0,q.$char(";")&&!b&&(b=!0),(b?n:o).push({name:h.name,variadic:!0});break}i=!0}else a||(d=f=s.name,g=null);g&&m.push(g),o.push({name:f,value:g,expand:i}),q.$char(",")?r=!0:(r=";"===q.$char(";"),(r||b)&&(c&&j("Cannot mix ; and , as delimiter types"),b=!0,m.length>1&&(g=new e.Value(m)),n.push({name:d,value:g,expand:i}),d=null,m=[],c=!1))}return q.forget(),l.args=b?n:o,l},definition:function(){var a,b,c,d,f=[],g=!1;if(!("."!==q.currentChar()&&"#"!==q.currentChar()||q.peek(/^[^{]*\}/)))if(q.save(),b=q.$re(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){a=b[1];var h=this.args(!1);if(f=h.args,g=h.variadic,!q.$char(")"))return void q.restore("Missing closing ')'");if(q.commentStore.length=0,q.$str("when")&&(d=l(p.conditions,"expected condition")),c=p.block())return q.forget(),new e.mixin.Definition(a,f,c,d,g);q.restore()}else q.forget()},ruleLookups:function(){var a,b,c=[];if("["===q.currentChar()){for(;;){if(q.save(),b=null,a=this.lookupValue(),!a&&""!==a){q.restore();break}c.push(a),q.forget()}return c.length>0?c:void 0}},lookupValue:function(){if(q.save(),!q.$char("["))return void q.restore();var a=q.$re(/^(?:[@$]{0,2})[_a-zA-Z0-9-]*/);return q.$char("]")&&(a||""===a)?(q.forget(),a):void q.restore()}},entity:function(){var a=this.entities;return this.comment()||a.literal()||a.variable()||a.url()||a.property()||a.call()||a.keyword()||this.mixin.call(!0)||a.javascript()},end:function(){return q.$char(";")||q.peek("}")},ieAlpha:function(){var a;if(q.$re(/^opacity=/i))return a=q.$re(/^\d+/),a||(a=l(p.entities.variable,"Could not parse alpha"),
a="@{"+a.name.slice(1)+"}"),m(")"),new e.Quoted("","alpha(opacity="+a+")")},element:function(){var a,b,d,f=q.i;if(b=this.combinator(),a=q.$re(/^(?:\d+\.\d+|\d+)%/)||q.$re(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||q.$char("*")||q.$char("&")||this.attribute()||q.$re(/^\([^&()@]+\)/)||q.$re(/^[\.#:](?=@)/)||this.entities.variableCurly(),a||(q.save(),q.$char("(")?(d=this.selector(!1))&&q.$char(")")?(a=new e.Paren(d),q.forget()):q.restore("Missing closing ')'"):q.forget()),a)return new e.Element(b,a,a instanceof e.Variable,f,c)},combinator:function(){var a=q.currentChar();if("/"===a){q.save();var b=q.$re(/^\/[a-z]+\//i);if(b)return q.forget(),new e.Combinator(b);q.restore()}if(">"===a||"+"===a||"~"===a||"|"===a||"^"===a){for(q.i++,"^"===a&&"^"===q.currentChar()&&(a="^^",q.i++);q.isWhitespace();)q.i++;return new e.Combinator(a)}return new e.Combinator(q.isWhitespace(-1)?" ":null)},selector:function(a){var b,d,f,g,h,i,k,m=q.i;for(a=a!==!1;(a&&(d=this.extend())||a&&(i=q.$str("when"))||(g=this.element()))&&(i?k=l(this.conditions,"expected condition"):k?j("CSS guard can only be used at the end of selector"):d?h=h?h.concat(d):d:(h&&j("Extend can only be used at the end of selector"),f=q.currentChar(),b?b.push(g):b=[g],g=null),"{"!==f&&"}"!==f&&";"!==f&&","!==f&&")"!==f););return b?new e.Selector(b,h,k,m,c):void(h&&j("Extend must be used to extend a selector, it cannot be used on its own"))},selectors:function(){for(var a,b;;){if(a=this.selector(),!a)break;if(b?b.push(a):b=[a],q.commentStore.length=0,a.condition&&b.length>1&&j("Guards are only currently allowed on a single selector."),!q.$char(","))break;a.condition&&j("Guards are only currently allowed on a single selector."),q.commentStore.length=0}return b},attribute:function(){if(q.$char("[")){var a,b,c,d=this.entities;return(a=d.variableCurly())||(a=l(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),c=q.$re(/^[|~*$^]?=/),c&&(b=d.quoted()||q.$re(/^[0-9]+%/)||q.$re(/^[\w-]+/)||d.variableCurly()),m("]"),new e.Attribute(a,c,b)}},block:function(){var a;if(q.$char("{")&&(a=this.primary())&&q.$char("}"))return a},blockRuleset:function(){var a=this.block();return a&&(a=new e.Ruleset(null,a)),a},detachedRuleset:function(){var a,b,c;if(q.save(),q.$re(/^[.#]\(/)&&(a=this.mixin.args(!1),b=a.args,c=a.variadic,!q.$char(")")))return void q.restore();var d=this.blockRuleset();return d?(q.forget(),b?new e.mixin.Definition(null,b,d,null,c):new e.DetachedRuleset(d)):void q.restore()},ruleset:function(){var b,c,d;if(q.save(),a.dumpLineNumbers&&(d=n(q.i)),b=this.selectors(),b&&(c=this.block())){q.forget();var f=new e.Ruleset(b,c,a.strictImports);return a.dumpLineNumbers&&(f.debugInfo=d),f}q.restore()},declaration:function(){var a,b,d,f,g,h,i=q.i,j=q.currentChar();if("."!==j&&"#"!==j&&"&"!==j&&":"!==j)if(q.save(),a=this.variable()||this.ruleProperty()){if(h="string"==typeof a,h&&(b=this.detachedRuleset(),b&&(d=!0)),q.commentStore.length=0,!b){if(g=!h&&a.length>1&&a.pop().value,b=a[0].value&&"--"===a[0].value.slice(0,2)?this.permissiveValue():this.anonymousValue())return q.forget(),new e.Declaration(a,b,(!1),g,i,c);b||(b=this.value()),b?f=this.important():h&&(b=this.permissiveValue())}if(b&&(this.end()||d))return q.forget(),new e.Declaration(a,b,f,g,i,c);q.restore()}else q.restore()},anonymousValue:function(){var a=q.i,b=q.$re(/^([^.#@\$+\/'"*`(;{}-]*);/);if(b)return new e.Anonymous(b[1],a)},permissiveValue:function(a){function b(){var a=q.currentChar();return"string"==typeof i?a===i:i.test(a)}var d,f,g,h,i=a||";",k=q.i,l=[];if(!b()){h=[];do f=this.comment(),f?h.push(f):(f=this.entity(),f&&h.push(f));while(f);if(g=b(),h.length>0){if(h=new e.Expression(h),g)return h;l.push(h)," "===q.prevChar()&&l.push(new e.Anonymous(" ",k))}if(q.save(),h=q.$parseUntil(i)){if("string"==typeof h&&j("Expected '"+h+"'","Parse"),1===h.length&&" "===h[0])return q.forget(),new e.Anonymous("",k);var m;for(d=0;d<h.length;d++)if(m=h[d],Array.isArray(m))l.push(new e.Quoted(m[0],m[1],(!0),k,c));else{d===h.length-1&&(m=m.trim());var n=new e.Quoted("'",m,(!0),k,c);n.variableRegex=/@([\w-]+)/g,n.propRegex=/\$([\w-]+)/g,l.push(n)}return q.forget(),new e.Expression(l,(!0))}q.restore()}},"import":function(){var a,b,d=q.i,f=q.$re(/^@import?\s+/);if(f){var g=(f?this.importOptions():null)||{};if(a=this.entities.quoted()||this.entities.url())return b=this.mediaFeatures(),q.$char(";")||(q.i=d,j("missing semi-colon or unrecognised media features on import")),b=b&&new e.Value(b),new e.Import(a,b,g,d,c);q.i=d,j("malformed import statement")}},importOptions:function(){var a,b,c,d={};if(!q.$char("("))return null;do if(a=this.importOption()){switch(b=a,c=!0,b){case"css":b="less",c=!1;break;case"once":b="multiple",c=!1}if(d[b]=c,!q.$char(","))break}while(a);return m(")"),d},importOption:function(){var a=q.$re(/^(less|css|multiple|once|inline|reference|optional)/);if(a)return a[1]},mediaFeature:function(){var a,b,d=this.entities,f=[];q.save();do a=d.keyword()||d.variable()||d.mixinLookup(),a?f.push(a):q.$char("(")&&(b=this.property(),a=this.value(),q.$char(")")?b&&a?f.push(new e.Paren(new e.Declaration(b,a,null,null,q.i,c,(!0)))):a?f.push(new e.Paren(a)):j("badly formed media feature definition"):j("Missing closing ')'","Parse"));while(a);if(q.forget(),f.length>0)return new e.Expression(f)},mediaFeatures:function(){var a,b=this.entities,c=[];do if(a=this.mediaFeature()){if(c.push(a),!q.$char(","))break}else if(a=b.variable()||b.mixinLookup(),a&&(c.push(a),!q.$char(",")))break;while(a);return c.length>0?c:null},media:function(){var b,d,f,g,h=q.i;return a.dumpLineNumbers&&(g=n(h)),q.save(),q.$str("@media")?(b=this.mediaFeatures(),d=this.block(),d||j("media definitions require block statements after any features"),q.forget(),f=new e.Media(d,b,h,c),a.dumpLineNumbers&&(f.debugInfo=g),f):void q.restore()},plugin:function(){var a,b,d,f=q.i,g=q.$re(/^@plugin?\s+/);if(g){if(b=this.pluginArgs(),d=b?{pluginArgs:b,isPlugin:!0}:{isPlugin:!0},a=this.entities.quoted()||this.entities.url())return q.$char(";")||(q.i=f,j("missing semi-colon on @plugin")),new e.Import(a,null,d,f,c);q.i=f,j("malformed @plugin statement")}},pluginArgs:function(){if(q.save(),!q.$char("("))return q.restore(),null;var a=q.$re(/^\s*([^\);]+)\)\s*/);return a[1]?(q.forget(),a[1].trim()):(q.restore(),null)},atrule:function(){var b,d,f,g,h,i,k,l=q.i,m=!0,o=!0;if("@"===q.currentChar()){if(d=this["import"]()||this.plugin()||this.media())return d;if(q.save(),b=q.$re(/^@[a-z-]+/)){switch(g=b,"-"==b.charAt(1)&&b.indexOf("-",2)>0&&(g="@"+b.slice(b.indexOf("-",2)+1)),g){case"@charset":h=!0,m=!1;break;case"@namespace":i=!0,m=!1;break;case"@keyframes":case"@counter-style":h=!0;break;case"@document":case"@supports":k=!0,o=!1;break;default:k=!0}return q.commentStore.length=0,h?(d=this.entity(),d||j("expected "+b+" identifier")):i?(d=this.expression(),d||j("expected "+b+" expression")):k&&(d=this.permissiveValue(/^[{;]/),m="{"===q.currentChar(),d?d.value||(d=null):m||";"===q.currentChar()||j(b+" rule is missing block or ending semi-colon")),m&&(f=this.blockRuleset()),f||!m&&d&&q.$char(";")?(q.forget(),new e.AtRule(b,d,f,l,c,a.dumpLineNumbers?n(l):null,o)):void q.restore("at-rule options not recognised")}}},value:function(){var a,b=[],c=q.i;do if(a=this.expression(),a&&(b.push(a),!q.$char(",")))break;while(a);if(b.length>0)return new e.Value(b,c)},important:function(){if("!"===q.currentChar())return q.$re(/^! *important/)},sub:function(){var a,b;return q.save(),q.$char("(")?(a=this.addition(),a&&q.$char(")")?(q.forget(),b=new e.Expression([a]),b.parens=!0,b):void q.restore("Expected ')'")):void q.restore()},multiplication:function(){var a,b,c,d,f;if(a=this.operand()){for(f=q.isWhitespace(-1);;){if(q.peek(/^\/[*\/]/))break;if(q.save(),c=q.$char("/")||q.$char("*")||q.$str("./"),!c){q.forget();break}if(b=this.operand(),!b){q.restore();break}q.forget(),a.parensInOp=!0,b.parensInOp=!0,d=new e.Operation(c,[d||a,b],f),f=q.isWhitespace(-1)}return d||a}},addition:function(){var a,b,c,d,f;if(a=this.multiplication()){for(f=q.isWhitespace(-1);;){if(c=q.$re(/^[-+]\s+/)||!f&&(q.$char("+")||q.$char("-")),!c)break;if(b=this.multiplication(),!b)break;a.parensInOp=!0,b.parensInOp=!0,d=new e.Operation(c,[d||a,b],f),f=q.isWhitespace(-1)}return d||a}},conditions:function(){var a,b,c,d=q.i;if(a=this.condition(!0)){for(;;){if(!q.peek(/^,\s*(not\s*)?\(/)||!q.$char(","))break;if(b=this.condition(!0),!b)break;c=new e.Condition("or",c||a,b,d)}return c||a}},condition:function(a){function b(){return q.$str("or")}var c,d,f;if(c=this.conditionAnd(a)){if(d=b()){if(f=this.condition(a),!f)return;c=new e.Condition(d,c,f)}return c}},conditionAnd:function(a){function b(){var b=h.negatedCondition(a)||h.parenthesisCondition(a);return b||a?b:h.atomicCondition(a)}function c(){return q.$str("and")}var d,f,g,h=this;if(d=b()){if(f=c()){if(g=this.conditionAnd(a),!g)return;d=new e.Condition(f,d,g)}return d}},negatedCondition:function(a){if(q.$str("not")){var b=this.parenthesisCondition(a);return b&&(b.negate=!b.negate),b}},parenthesisCondition:function(a){function b(b){var c;return q.save(),(c=b.condition(a))&&q.$char(")")?(q.forget(),c):void q.restore()}var c;return q.save(),q.$str("(")?(c=b(this))?(q.forget(),c):(c=this.atomicCondition(a))?q.$char(")")?(q.forget(),c):void q.restore("expected ')' got '"+q.currentChar()+"'"):void q.restore():void q.restore()},atomicCondition:function(a){function b(){return this.addition()||h.keyword()||h.quoted()||h.mixinLookup()}var c,d,f,g,h=this.entities,i=q.i;if(b=b.bind(this),c=b())return q.$char(">")?g=q.$char("=")?">=":">":q.$char("<")?g=q.$char("=")?"<=":"<":q.$char("=")&&(g=q.$char(">")?"=>":q.$char("<")?"=<":"="),g?(d=b(),d?f=new e.Condition(g,c,d,i,(!1)):j("expected expression")):f=new e.Condition("=",c,new e.Keyword("true"),i,(!1)),f},operand:function(){var a,b=this.entities;q.peek(/^-[@\$\(]/)&&(a=q.$char("-"));var c=this.sub()||b.dimension()||b.color()||b.variable()||b.property()||b.call()||b.quoted(!0)||b.colorKeyword()||b.mixinLookup();return a&&(c.parensInOp=!0,c=new e.Negative(c)),c},expression:function(){var a,b,c=[],d=q.i;do a=this.comment(),a?c.push(a):(a=this.addition()||this.entity(),a&&(c.push(a),q.peek(/^\/[\/*]/)||(b=q.$char("/"),b&&c.push(new e.Anonymous(b,d)))));while(a);if(c.length>0)return new e.Expression(c)},property:function(){var a=q.$re(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);if(a)return a[1]},ruleProperty:function(){function a(a){var b=q.i,c=q.$re(a);if(c)return g.push(b),f.push(c[1])}var b,d,f=[],g=[];q.save();var h=q.$re(/^([_a-zA-Z0-9-]+)\s*:/);if(h)return f=[new e.Keyword(h[1])],q.forget(),f;for(a(/^(\*?)/);;)if(!a(/^((?:[\w-]+)|(?:[@\$]\{[\w-]+\}))/))break;if(f.length>1&&a(/^((?:\+_|\+)?)\s*:/)){for(q.forget(),""===f[0]&&(f.shift(),g.shift()),d=0;d<f.length;d++)b=f[d],f[d]="@"!==b.charAt(0)&&"$"!==b.charAt(0)?new e.Keyword(b):"@"===b.charAt(0)?new e.Variable("@"+b.slice(2,-1),g[d],c):new e.Property("$"+b.slice(2,-1),g[d],c);return f}q.restore()}}}};j.serializeVars=function(a){var b="";for(var c in a)if(Object.hasOwnProperty.call(a,c)){var d=a[c];b+=("@"===c[0]?"":"@")+c+": "+d+(";"===String(d).slice(-1)?"":";")}return b},b.exports=j},{"../functions/function-registry":27,"../less-error":38,"../tree":67,"../utils":89,"../visitors":93,"./parser-input":43}],45:[function(a,b,c){var d,e=function(a){this.less=a,this.visitors=[],this.preProcessors=[],this.postProcessors=[],this.installedPlugins=[],this.fileManagers=[],this.iterator=-1,this.pluginCache={},this.Loader=new a.PluginLoader(a)},f=function(a,b){return!b&&d||(d=new e(a)),d};e.prototype.addPlugins=function(a){if(a)for(var b=0;b<a.length;b++)this.addPlugin(a[b])},e.prototype.addPlugin=function(a,b,c){this.installedPlugins.push(a),b&&(this.pluginCache[b]=a),a.install&&a.install(this.less,this,c||this.less.functions.functionRegistry)},e.prototype.get=function(a){return this.pluginCache[a]},e.prototype.addVisitor=function(a){this.visitors.push(a)},e.prototype.addPreProcessor=function(a,b){var c;for(c=0;c<this.preProcessors.length&&!(this.preProcessors[c].priority>=b);c++);this.preProcessors.splice(c,0,{preProcessor:a,priority:b})},e.prototype.addPostProcessor=function(a,b){var c;for(c=0;c<this.postProcessors.length&&!(this.postProcessors[c].priority>=b);c++);this.postProcessors.splice(c,0,{postProcessor:a,priority:b})},e.prototype.addFileManager=function(a){this.fileManagers.push(a)},e.prototype.getPreProcessors=function(){for(var a=[],b=0;b<this.preProcessors.length;b++)a.push(this.preProcessors[b].preProcessor);return a},e.prototype.getPostProcessors=function(){for(var a=[],b=0;b<this.postProcessors.length;b++)a.push(this.postProcessors[b].postProcessor);return a},e.prototype.getVisitors=function(){return this.visitors},e.prototype.visitor=function(){var a=this;return{first:function(){return a.iterator=-1,a.visitors[a.iterator]},get:function(){return a.iterator+=1,a.visitors[a.iterator]}}},e.prototype.getFileManagers=function(){return this.fileManagers},b.exports=f},{}],46:[function(a,b,c){var d,e=a("./utils");b.exports=function(b,c,f){var g=function(b,f,h){if("function"==typeof f?(h=f,f=e.copyOptions(this.options,{})):f=e.copyOptions(this.options,f||{}),!h){d||(d="undefined"==typeof Promise?a("promise"):Promise);var i=this;return new d(function(a,c){g.call(i,b,f,function(b,d){b?c(b):a(d)})})}this.parse(b,f,function(a,b,d,e){if(a)return h(a);var f;try{var g=new c(b,d);f=g.toCSS(e)}catch(a){return h(a)}h(null,f)})};return g}},{"./utils":89,promise:void 0}],47:[function(a,b,c){b.exports=function(a,b){var c=function(a){this.options=a};return c.prototype.toCSS=function(b,c,d){var e=new a({contentsIgnoredCharsMap:d.contentsIgnoredChars,rootNode:b,contentsMap:d.contents,sourceMapFilename:this.options.sourceMapFilename,sourceMapURL:this.options.sourceMapURL,outputFilename:this.options.sourceMapOutputFilename,sourceMapBasepath:this.options.sourceMapBasepath,sourceMapRootpath:this.options.sourceMapRootpath,outputSourceFiles:this.options.outputSourceFiles,sourceMapGenerator:this.options.sourceMapGenerator,sourceMapFileInline:this.options.sourceMapFileInline}),f=e.toCSS(c);return this.sourceMap=e.sourceMap,this.sourceMapURL=e.sourceMapURL,this.options.sourceMapInputFilename&&(this.sourceMapInputFilename=e.normalizeFilename(this.options.sourceMapInputFilename)),void 0!==this.options.sourceMapBasepath&&void 0!==this.sourceMapURL&&(this.sourceMapURL=e.removeBasepath(this.sourceMapURL)),f+this.getCSSAppendage()},c.prototype.getCSSAppendage=function(){var a=this.sourceMapURL;if(this.options.sourceMapFileInline){if(void 0===this.sourceMap)return"";a="data:application/json;base64,"+b.encodeBase64(this.sourceMap)}return a?"/*# sourceMappingURL="+a+" */":""},c.prototype.getExternalSourceMap=function(){return this.sourceMap},c.prototype.setExternalSourceMap=function(a){this.sourceMap=a},c.prototype.isInline=function(){return this.options.sourceMapFileInline},c.prototype.getSourceMapURL=function(){return this.sourceMapURL},c.prototype.getOutputFilename=function(){return this.options.sourceMapOutputFilename},c.prototype.getInputFilename=function(){return this.sourceMapInputFilename},c}},{}],48:[function(a,b,c){b.exports=function(a){var b=function(b){this._css=[],this._rootNode=b.rootNode,this._contentsMap=b.contentsMap,this._contentsIgnoredCharsMap=b.contentsIgnoredCharsMap,b.sourceMapFilename&&(this._sourceMapFilename=b.sourceMapFilename.replace(/\\/g,"/")),this._outputFilename=b.outputFilename,this.sourceMapURL=b.sourceMapURL,b.sourceMapBasepath&&(this._sourceMapBasepath=b.sourceMapBasepath.replace(/\\/g,"/")),b.sourceMapRootpath?(this._sourceMapRootpath=b.sourceMapRootpath.replace(/\\/g,"/"),"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/")):this._sourceMapRootpath="",this._outputSourceFiles=b.outputSourceFiles,this._sourceMapGeneratorConstructor=a.getSourceMapGenerator(),this._lineNumber=0,this._column=0};return b.prototype.removeBasepath=function(a){return this._sourceMapBasepath&&0===a.indexOf(this._sourceMapBasepath)&&(a=a.substring(this._sourceMapBasepath.length),"\\"!==a.charAt(0)&&"/"!==a.charAt(0)||(a=a.substring(1))),a},b.prototype.normalizeFilename=function(a){return a=a.replace(/\\/g,"/"),a=this.removeBasepath(a),(this._sourceMapRootpath||"")+a},b.prototype.add=function(a,b,c,d){if(a){var e,f,g,h,i;if(b&&b.filename){var j=this._contentsMap[b.filename];this._contentsIgnoredCharsMap[b.filename]&&(c-=this._contentsIgnoredCharsMap[b.filename],c<0&&(c=0),j=j.slice(this._contentsIgnoredCharsMap[b.filename])),j=j.substring(0,c),f=j.split("\n"),h=f[f.length-1]}if(e=a.split("\n"),g=e[e.length-1],b&&b.filename)if(d)for(i=0;i<e.length;i++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+i+1,column:0===i?this._column:0},original:{line:f.length+i,column:0===i?h.length:0},source:this.normalizeFilename(b.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:f.length,column:h.length},source:this.normalizeFilename(b.filename)});1===e.length?this._column+=g.length:(this._lineNumber+=e.length-1,this._column=g.length),this._css.push(a)}},b.prototype.isEmpty=function(){return 0===this._css.length},b.prototype.toCSS=function(a){if(this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null}),this._outputSourceFiles)for(var b in this._contentsMap)if(this._contentsMap.hasOwnProperty(b)){var c=this._contentsMap[b];this._contentsIgnoredCharsMap[b]&&(c=c.slice(this._contentsIgnoredCharsMap[b])),this._sourceMapGenerator.setSourceContent(this.normalizeFilename(b),c)}if(this._rootNode.genCSS(a,this),this._css.length>0){var d,e=JSON.stringify(this._sourceMapGenerator.toJSON());this.sourceMapURL?d=this.sourceMapURL:this._sourceMapFilename&&(d=this._sourceMapFilename),this.sourceMapURL=d,this.sourceMap=e}return this._css.join("")},b}},{}],49:[function(a,b,c){var d=a("./contexts"),e=a("./visitors"),f=a("./tree");b.exports=function(a,b){b=b||{};var c,g=b.variables,h=new d.Eval(b);"object"!=typeof g||Array.isArray(g)||(g=Object.keys(g).map(function(a){var b=g[a];return b instanceof f.Value||(b instanceof f.Expression||(b=new f.Expression([b])),b=new f.Value([b])),new f.Declaration("@"+a,b,(!1),null,0)}),h.frames=[new f.Ruleset(null,g)]);var i,j,k=[new e.JoinSelectorVisitor,new e.MarkVisibleSelectorsVisitor((!0)),new e.ExtendVisitor,new e.ToCSSVisitor({compress:Boolean(b.compress)})],l=[];if(b.pluginManager){j=b.pluginManager.visitor();for(var m=0;m<2;m++)for(j.first();i=j.get();)i.isPreEvalVisitor?0!==m&&l.indexOf(i)!==-1||(l.push(i),i.run(a)):0!==m&&k.indexOf(i)!==-1||(i.isPreVisitor?k.unshift(i):k.push(i))}c=a.eval(h);for(var m=0;m<k.length;m++)k[m].run(c);if(b.pluginManager)for(j.first();i=j.get();)k.indexOf(i)===-1&&l.indexOf(i)===-1&&i.run(c);return c}},{"./contexts":13,"./tree":67,"./visitors":93}],50:[function(a,b,c){var d=a("./node"),e=function(a,b,c,d,e,f){this.value=a,this._index=b,this._fileInfo=c,this.mapLines=d,this.rulesetLike="undefined"!=typeof e&&e,this.allowRoot=!0,this.copyVisibilityInfo(f)};e.prototype=new d,e.prototype.type="Anonymous",e.prototype.eval=function(){return new e(this.value,this._index,this._fileInfo,this.mapLines,this.rulesetLike,this.visibilityInfo())},e.prototype.compare=function(a){return a.toCSS&&this.toCSS()===a.toCSS()?0:void 0},e.prototype.isRulesetLike=function(){return this.rulesetLike},e.prototype.genCSS=function(a,b){this.nodeVisible=Boolean(this.value),this.nodeVisible&&b.add(this.value,this._fileInfo,this._index,this.mapLines)},b.exports=e},{"./node":76}],51:[function(a,b,c){var d=a("./node"),e=function(a,b){this.key=a,this.value=b};e.prototype=new d,e.prototype.type="Assignment",e.prototype.accept=function(a){this.value=a.visit(this.value)},e.prototype.eval=function(a){return this.value.eval?new e(this.key,this.value.eval(a)):this},e.prototype.genCSS=function(a,b){b.add(this.key+"="),this.value.genCSS?this.value.genCSS(a,b):b.add(this.value)},b.exports=e},{"./node":76}],52:[function(a,b,c){var d=a("./node"),e=a("./selector"),f=a("./ruleset"),g=a("./anonymous"),h=function(a,b,c,f,h,i,j,k){var l;if(this.name=a,this.value=b instanceof d?b:b?new g(b):b,c){for(Array.isArray(c)?this.rules=c:(this.rules=[c],this.rules[0].selectors=new e([],null,null,f,h).createEmptySelectors()),l=0;l<this.rules.length;l++)this.rules[l].allowImports=!0;this.setParent(this.rules,this)}this._index=f,this._fileInfo=h,this.debugInfo=i,this.isRooted=j||!1,this.copyVisibilityInfo(k),this.allowRoot=!0};h.prototype=new d,h.prototype.type="AtRule",h.prototype.accept=function(a){var b=this.value,c=this.rules;c&&(this.rules=a.visitArray(c)),b&&(this.value=a.visit(b))},h.prototype.isRulesetLike=function(){return this.rules||!this.isCharset()},h.prototype.isCharset=function(){return"@charset"===this.name},h.prototype.genCSS=function(a,b){var c=this.value,d=this.rules;b.add(this.name,this.fileInfo(),this.getIndex()),c&&(b.add(" "),c.genCSS(a,b)),d?this.outputRuleset(a,b,d):b.add(";")},h.prototype.eval=function(a){var b,c,d=this.value,e=this.rules;return b=a.mediaPath,c=a.mediaBlocks,a.mediaPath=[],a.mediaBlocks=[],d&&(d=d.eval(a)),e&&(e=[e[0].eval(a)],e[0].root=!0),a.mediaPath=b,a.mediaBlocks=c,new h(this.name,d,e,this.getIndex(),this.fileInfo(),this.debugInfo,this.isRooted,this.visibilityInfo())},h.prototype.variable=function(a){if(this.rules)return f.prototype.variable.call(this.rules[0],a)},h.prototype.find=function(){if(this.rules)return f.prototype.find.apply(this.rules[0],arguments)},h.prototype.rulesets=function(){if(this.rules)return f.prototype.rulesets.apply(this.rules[0])},h.prototype.outputRuleset=function(a,b,c){var d,e=c.length;if(a.tabLevel=(0|a.tabLevel)+1,a.compress){for(b.add("{"),d=0;d<e;d++)c[d].genCSS(a,b);return b.add("}"),void a.tabLevel--}var f="\n"+Array(a.tabLevel).join("  "),g=f+"  ";if(e){for(b.add(" {"+g),c[0].genCSS(a,b),d=1;d<e;d++)b.add(g),c[d].genCSS(a,b);b.add(f+"}")}else b.add(" {"+f+"}");a.tabLevel--},b.exports=h},{"./anonymous":50,"./node":76,"./ruleset":81,"./selector":82}],53:[function(a,b,c){var d=a("./node"),e=function(a,b,c){this.key=a,this.op=b,this.value=c};e.prototype=new d,e.prototype.type="Attribute",e.prototype.eval=function(a){return new e(this.key.eval?this.key.eval(a):this.key,this.op,this.value&&this.value.eval?this.value.eval(a):this.value)},e.prototype.genCSS=function(a,b){b.add(this.toCSS(a))},e.prototype.toCSS=function(a){var b=this.key.toCSS?this.key.toCSS(a):this.key;return this.op&&(b+=this.op,b+=this.value.toCSS?this.value.toCSS(a):this.value),"["+b+"]"},b.exports=e},{"./node":76}],54:[function(a,b,c){var d=a("./node"),e=a("./anonymous"),f=a("../functions/function-caller"),g=function(a,b,c,d){this.name=a,this.args=b,this.calc="calc"===a,this._index=c,this._fileInfo=d};g.prototype=new d,g.prototype.type="Call",g.prototype.accept=function(a){this.args&&(this.args=a.visitArray(this.args))},g.prototype.eval=function(a){var b=a.mathOn;a.mathOn=!this.calc,(this.calc||a.inCalc)&&a.enterCalc();var c=this.args.map(function(b){return b.eval(a)});(this.calc||a.inCalc)&&a.exitCalc(),a.mathOn=b;var h,i=new f(this.name,a,this.getIndex(),this.fileInfo());if(i.isValid()){try{h=i.call(c)}catch(j){throw{type:j.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(j.message?": "+j.message:""),index:this.getIndex(),filename:this.fileInfo().filename,line:j.lineNumber,column:j.columnNumber}}if(null!==h&&void 0!==h)return h instanceof d||(h=new e(h&&h!==!0?h.toString():null)),h._index=this._index,h._fileInfo=this._fileInfo,h}return new g(this.name,c,this.getIndex(),this.fileInfo())},g.prototype.genCSS=function(a,b){b.add(this.name+"(",this.fileInfo(),this.getIndex());for(var c=0;c<this.args.length;c++)this.args[c].genCSS(a,b),c+1<this.args.length&&b.add(", ");b.add(")")},b.exports=g},{"../functions/function-caller":26,"./anonymous":50,"./node":76}],55:[function(a,b,c){function d(a,b){return Math.min(Math.max(a,0),b)}function e(a){return"#"+a.map(function(a){return a=d(Math.round(a),255),(a<16?"0":"")+a.toString(16)}).join("")}var f=a("./node"),g=a("../data/colors"),h=function(a,b,c){var d=this;Array.isArray(a)?this.rgb=a:a.length>=6?(this.rgb=[],a.match(/.{2}/g).map(function(a,b){b<3?d.rgb.push(parseInt(a,16)):d.alpha=parseInt(a,16)/255})):(this.rgb=[],a.split("").map(function(a,b){b<3?d.rgb.push(parseInt(a+a,16)):d.alpha=parseInt(a+a,16)/255})),this.alpha=this.alpha||("number"==typeof b?b:1),"undefined"!=typeof c&&(this.value=c)};h.prototype=new f,h.prototype.type="Color",h.prototype.luma=function(){var a=this.rgb[0]/255,b=this.rgb[1]/255,c=this.rgb[2]/255;return a=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),b=b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4),c=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),.2126*a+.7152*b+.0722*c},h.prototype.genCSS=function(a,b){b.add(this.toCSS(a))},h.prototype.toCSS=function(a,b){var c,e,f,g=a&&a.compress&&!b,h=[];if(e=this.fround(a,this.alpha),this.value)if(0===this.value.indexOf("rgb"))e<1&&(f="rgba");else{if(0!==this.value.indexOf("hsl"))return this.value;f=e<1?"hsla":"hsl"}else e<1&&(f="rgba");switch(f){case"rgba":h=this.rgb.map(function(a){return d(Math.round(a),255)}).concat(d(e,1));break;case"hsla":h.push(d(e,1));case"hsl":c=this.toHSL(),h=[this.fround(a,c.h),this.fround(a,100*c.s)+"%",this.fround(a,100*c.l)+"%"].concat(h)}if(f)return f+"("+h.join(","+(g?"":" "))+")";if(c=this.toRGB(),g){var i=c.split("");i[1]===i[2]&&i[3]===i[4]&&i[5]===i[6]&&(c="#"+i[1]+i[3]+i[5])}return c},h.prototype.operate=function(a,b,c){for(var d=new Array(3),e=this.alpha*(1-c.alpha)+c.alpha,f=0;f<3;f++)d[f]=this._operate(a,b,this.rgb[f],c.rgb[f]);return new h(d,e)},h.prototype.toRGB=function(){return e(this.rgb)},h.prototype.toHSL=function(){var a,b,c=this.rgb[0]/255,d=this.rgb[1]/255,e=this.rgb[2]/255,f=this.alpha,g=Math.max(c,d,e),h=Math.min(c,d,e),i=(g+h)/2,j=g-h;if(g===h)a=b=0;else{switch(b=i>.5?j/(2-g-h):j/(g+h),g){case c:a=(d-e)/j+(d<e?6:0);break;case d:a=(e-c)/j+2;break;case e:a=(c-d)/j+4}a/=6}return{h:360*a,s:b,l:i,a:f}},h.prototype.toHSV=function(){var a,b,c=this.rgb[0]/255,d=this.rgb[1]/255,e=this.rgb[2]/255,f=this.alpha,g=Math.max(c,d,e),h=Math.min(c,d,e),i=g,j=g-h;if(b=0===g?0:j/g,g===h)a=0;else{switch(g){case c:a=(d-e)/j+(d<e?6:0);break;case d:a=(e-c)/j+2;break;case e:a=(c-d)/j+4}a/=6}return{h:360*a,s:b,v:i,a:f}},h.prototype.toARGB=function(){return e([255*this.alpha].concat(this.rgb))},h.prototype.compare=function(a){return a.rgb&&a.rgb[0]===this.rgb[0]&&a.rgb[1]===this.rgb[1]&&a.rgb[2]===this.rgb[2]&&a.alpha===this.alpha?0:void 0},h.fromKeyword=function(a){var b,c=a.toLowerCase();if(g.hasOwnProperty(c)?b=new h(g[c].slice(1)):"transparent"===c&&(b=new h([0,0,0],0)),b)return b.value=a,b},b.exports=h},{"../data/colors":14,"./node":76}],56:[function(a,b,c){var d=a("./node"),e=function(a){" "===a?(this.value=" ",this.emptyOrWhitespace=!0):(this.value=a?a.trim():"",this.emptyOrWhitespace=""===this.value)};e.prototype=new d,e.prototype.type="Combinator";var f={"":!0," ":!0,"|":!0};e.prototype.genCSS=function(a,b){var c=a.compress||f[this.value]?"":" ";b.add(c+this.value+c)},b.exports=e},{"./node":76}],57:[function(a,b,c){var d=a("./node"),e=a("./debug-info"),f=function(a,b,c,d){this.value=a,this.isLineComment=b,this._index=c,this._fileInfo=d,this.allowRoot=!0};f.prototype=new d,f.prototype.type="Comment",f.prototype.genCSS=function(a,b){this.debugInfo&&b.add(e(a,this),this.fileInfo(),this.getIndex()),b.add(this.value)},f.prototype.isSilent=function(a){var b=a.compress&&"!"!==this.value[2];return this.isLineComment||b},b.exports=f},{"./debug-info":59,"./node":76}],58:[function(a,b,c){var d=a("./node"),e=function(a,b,c,d,e){this.op=a.trim(),this.lvalue=b,this.rvalue=c,this._index=d,this.negate=e};e.prototype=new d,e.prototype.type="Condition",e.prototype.accept=function(a){this.lvalue=a.visit(this.lvalue),this.rvalue=a.visit(this.rvalue)},e.prototype.eval=function(a){var b=function(a,b,c){switch(a){case"and":return b&&c;case"or":return b||c;default:switch(d.compare(b,c)){case-1:return"<"===a||"=<"===a||"<="===a;case 0:return"="===a||">="===a||"=<"===a||"<="===a;case 1:return">"===a||">="===a;default:return!1}}}(this.op,this.lvalue.eval(a),this.rvalue.eval(a));return this.negate?!b:b},b.exports=e},{"./node":76}],59:[function(a,b,c){var d=function(a,b,c){var e="";if(a.dumpLineNumbers&&!a.compress)switch(a.dumpLineNumbers){case"comments":e=d.asComment(b);break;case"mediaquery":e=d.asMediaQuery(b);break;case"all":e=d.asComment(b)+(c||"")+d.asMediaQuery(b)}return e};d.asComment=function(a){return"/* line "+a.debugInfo.lineNumber+", "+a.debugInfo.fileName+" */\n"},d.asMediaQuery=function(a){var b=a.debugInfo.fileName;return/^[a-z]+:\/\//i.test(b)||(b="file://"+b),"@media -sass-debug-info{filename{font-family:"+b.replace(/([.:\/\\])/g,function(a){return"\\"==a&&(a="/"),"\\"+a})+"}line{font-family:\\00003"+a.debugInfo.lineNumber+"}}\n"},b.exports=d},{}],60:[function(a,b,c){function d(a,b){var c,d="",e=b.length,f={add:function(a){d+=a}};for(c=0;c<e;c++)b[c].eval(a).genCSS(a,f);return d}var e=a("./node"),f=a("./value"),g=a("./keyword"),h=a("./anonymous"),i=a("../constants").Math,j=function(a,b,c,d,g,i,j,k){this.name=a,this.value=b instanceof e?b:new f([b?new h(b):null]),this.important=c?" "+c.trim():"",this.merge=d,this._index=g,this._fileInfo=i,this.inline=j||!1,this.variable=void 0!==k?k:a.charAt&&"@"===a.charAt(0),this.allowRoot=!0,this.setParent(this.value,this)};j.prototype=new e,j.prototype.type="Declaration",j.prototype.genCSS=function(a,b){b.add(this.name+(a.compress?":":": "),this.fileInfo(),this.getIndex());try{this.value.genCSS(a,b)}catch(c){throw c.index=this._index,c.filename=this._fileInfo.filename,c}b.add(this.important+(this.inline||a.lastRule&&a.compress?"":";"),this._fileInfo,this._index)},j.prototype.eval=function(a){var b,c,e=!1,f=this.name,h=this.variable;"string"!=typeof f&&(f=1===f.length&&f[0]instanceof g?f[0].value:d(a,f),h=!1),"font"===f&&a.math===i.ALWAYS&&(e=!0,b=a.math,a.math=i.PARENS_DIVISION);try{if(a.importantScope.push({}),c=this.value.eval(a),!this.variable&&"DetachedRuleset"===c.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.getIndex(),filename:this.fileInfo().filename};var k=this.important,l=a.importantScope.pop();return!k&&l.important&&(k=l.important),new j(f,c,k,this.merge,this.getIndex(),this.fileInfo(),this.inline,h)}catch(m){throw"number"!=typeof m.index&&(m.index=this.getIndex(),m.filename=this.fileInfo().filename),m}finally{e&&(a.math=b)}},j.prototype.makeImportant=function(){return new j(this.name,this.value,"!important",this.merge,this.getIndex(),this.fileInfo(),this.inline)},b.exports=j},{"../constants":12,"./anonymous":50,"./keyword":70,"./node":76,"./value":86}],61:[function(a,b,c){var d=a("./node"),e=a("../contexts"),f=a("../utils"),g=function(a,b){this.ruleset=a,this.frames=b,this.setParent(this.ruleset,this)};g.prototype=new d,g.prototype.type="DetachedRuleset",g.prototype.evalFirst=!0,g.prototype.accept=function(a){this.ruleset=a.visit(this.ruleset)},g.prototype.eval=function(a){var b=this.frames||f.copyArray(a.frames);return new g(this.ruleset,b)},g.prototype.callEval=function(a){return this.ruleset.eval(this.frames?new e.Eval(a,this.frames.concat(a.frames)):a)},b.exports=g},{"../contexts":13,"../utils":89,"./node":76}],62:[function(a,b,c){var d=a("./node"),e=a("../data/unit-conversions"),f=a("./unit"),g=a("./color"),h=function(a,b){if(this.value=parseFloat(a),isNaN(this.value))throw new Error("Dimension is not a number.");this.unit=b&&b instanceof f?b:new f(b?[b]:void 0),this.setParent(this.unit,this)};h.prototype=new d,h.prototype.type="Dimension",h.prototype.accept=function(a){this.unit=a.visit(this.unit)},h.prototype.eval=function(a){return this},h.prototype.toColor=function(){return new g([this.value,this.value,this.value])},h.prototype.genCSS=function(a,b){if(a&&a.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var c=this.fround(a,this.value),d=String(c);
if(0!==c&&c<1e-6&&c>-1e-6&&(d=c.toFixed(20).replace(/0+$/,"")),a&&a.compress){if(0===c&&this.unit.isLength())return void b.add(d);c>0&&c<1&&(d=d.substr(1))}b.add(d),this.unit.genCSS(a,b)},h.prototype.operate=function(a,b,c){var d=this._operate(a,b,this.value,c.value),e=this.unit.clone();if("+"===b||"-"===b)if(0===e.numerator.length&&0===e.denominator.length)e=c.unit.clone(),this.unit.backupUnit&&(e.backupUnit=this.unit.backupUnit);else if(0===c.unit.numerator.length&&0===e.denominator.length);else{if(c=c.convertTo(this.unit.usedUnits()),a.strictUnits&&c.unit.toString()!==e.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+e.toString()+"' and '"+c.unit.toString()+"'.");d=this._operate(a,b,this.value,c.value)}else"*"===b?(e.numerator=e.numerator.concat(c.unit.numerator).sort(),e.denominator=e.denominator.concat(c.unit.denominator).sort(),e.cancel()):"/"===b&&(e.numerator=e.numerator.concat(c.unit.denominator).sort(),e.denominator=e.denominator.concat(c.unit.numerator).sort(),e.cancel());return new h(d,e)},h.prototype.compare=function(a){var b,c;if(a instanceof h){if(this.unit.isEmpty()||a.unit.isEmpty())b=this,c=a;else if(b=this.unify(),c=a.unify(),0!==b.unit.compare(c.unit))return;return d.numericCompare(b.value,c.value)}},h.prototype.unify=function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})},h.prototype.convertTo=function(a){var b,c,d,f,g,i=this.value,j=this.unit.clone(),k={};if("string"==typeof a){for(b in e)e[b].hasOwnProperty(a)&&(k={},k[b]=a);a=k}g=function(a,b){return d.hasOwnProperty(a)?(b?i/=d[a]/d[f]:i*=d[a]/d[f],f):a};for(c in a)a.hasOwnProperty(c)&&(f=a[c],d=e[c],j.map(g));return j.cancel(),new h(i,j)},b.exports=h},{"../data/unit-conversions":16,"./color":55,"./node":76,"./unit":84}],63:[function(a,b,c){var d=a("./node"),e=a("./paren"),f=a("./combinator"),g=function(a,b,c,d,e,g){this.combinator=a instanceof f?a:new f(a),this.value="string"==typeof b?b.trim():b?b:"",this.isVariable=c,this._index=d,this._fileInfo=e,this.copyVisibilityInfo(g),this.setParent(this.combinator,this)};g.prototype=new d,g.prototype.type="Element",g.prototype.accept=function(a){var b=this.value;this.combinator=a.visit(this.combinator),"object"==typeof b&&(this.value=a.visit(b))},g.prototype.eval=function(a){return new g(this.combinator,this.value.eval?this.value.eval(a):this.value,this.isVariable,this.getIndex(),this.fileInfo(),this.visibilityInfo())},g.prototype.clone=function(){return new g(this.combinator,this.value,this.isVariable,this.getIndex(),this.fileInfo(),this.visibilityInfo())},g.prototype.genCSS=function(a,b){b.add(this.toCSS(a),this.fileInfo(),this.getIndex())},g.prototype.toCSS=function(a){a=a||{};var b=this.value,c=a.firstSelector;return b instanceof e&&(a.firstSelector=!0),b=b.toCSS?b.toCSS(a):b,a.firstSelector=c,""===b&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(a)+b},b.exports=g},{"./combinator":56,"./node":76,"./paren":78}],64:[function(a,b,c){var d=a("./node"),e=a("./paren"),f=a("./comment"),g=a("./dimension"),h=a("../constants").Math,i=function(a,b){if(this.value=a,this.noSpacing=b,!a)throw new Error("Expression requires an array parameter")};i.prototype=new d,i.prototype.type="Expression",i.prototype.accept=function(a){this.value=a.visitArray(this.value)},i.prototype.eval=function(a){var b,c=a.isMathOn(),d=this.parens&&(a.math!==h.STRICT_LEGACY||!this.parensInOp),f=!1;return d&&a.inParenthesis(),this.value.length>1?b=new i(this.value.map(function(b){return b.eval?b.eval(a):b}),this.noSpacing):1===this.value.length?(!this.value[0].parens||this.value[0].parensInOp||a.inCalc||(f=!0),b=this.value[0].eval(a)):b=this,d&&a.outOfParenthesis(),!this.parens||!this.parensInOp||c||f||b instanceof g||(b=new e(b)),b},i.prototype.genCSS=function(a,b){for(var c=0;c<this.value.length;c++)this.value[c].genCSS(a,b),!this.noSpacing&&c+1<this.value.length&&b.add(" ")},i.prototype.throwAwayComments=function(){this.value=this.value.filter(function(a){return!(a instanceof f)})},b.exports=i},{"../constants":12,"./comment":57,"./dimension":62,"./node":76,"./paren":78}],65:[function(a,b,c){var d=a("./node"),e=a("./selector"),f=function g(a,b,c,d,e){switch(this.selector=a,this.option=b,this.object_id=g.next_id++,this.parent_ids=[this.object_id],this._index=c,this._fileInfo=d,this.copyVisibilityInfo(e),this.allowRoot=!0,b){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}this.setParent(this.selector,this)};f.next_id=0,f.prototype=new d,f.prototype.type="Extend",f.prototype.accept=function(a){this.selector=a.visit(this.selector)},f.prototype.eval=function(a){return new f(this.selector.eval(a),this.option,this.getIndex(),this.fileInfo(),this.visibilityInfo())},f.prototype.clone=function(a){return new f(this.selector,this.option,this.getIndex(),this.fileInfo(),this.visibilityInfo())},f.prototype.findSelfSelectors=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b].elements,b>0&&c.length&&""===c[0].combinator.value&&(c[0].combinator.value=" "),d=d.concat(a[b].elements);this.selfSelectors=[new e(d)],this.selfSelectors[0].copyVisibilityInfo(this.visibilityInfo())},b.exports=f},{"./node":76,"./selector":82}],66:[function(a,b,c){var d=a("./node"),e=a("./media"),f=a("./url"),g=a("./quoted"),h=a("./ruleset"),i=a("./anonymous"),j=a("../utils"),k=a("../less-error"),l=function(a,b,c,d,e,f){if(this.options=c,this._index=d,this._fileInfo=e,this.path=a,this.features=b,this.allowRoot=!0,void 0!==this.options.less||this.options.inline)this.css=!this.options.less||this.options.inline;else{var g=this.getPath();g&&/[#\.\&\?]css([\?;].*)?$/.test(g)&&(this.css=!0)}this.copyVisibilityInfo(f),this.setParent(this.features,this),this.setParent(this.path,this)};l.prototype=new d,l.prototype.type="Import",l.prototype.accept=function(a){this.features&&(this.features=a.visit(this.features)),this.path=a.visit(this.path),this.options.isPlugin||this.options.inline||!this.root||(this.root=a.visit(this.root))},l.prototype.genCSS=function(a,b){this.css&&void 0===this.path._fileInfo.reference&&(b.add("@import ",this._fileInfo,this._index),this.path.genCSS(a,b),this.features&&(b.add(" "),this.features.genCSS(a,b)),b.add(";"))},l.prototype.getPath=function(){return this.path instanceof f?this.path.value.value:this.path.value},l.prototype.isVariableImport=function(){var a=this.path;return a instanceof f&&(a=a.value),!(a instanceof g)||a.containsVariables()},l.prototype.evalForImport=function(a){var b=this.path;return b instanceof f&&(b=b.value),new l(b.eval(a),this.features,this.options,this._index,this._fileInfo,this.visibilityInfo())},l.prototype.evalPath=function(a){var b=this.path.eval(a),c=this._fileInfo;if(!(b instanceof f)){var d=b.value;b.value=c&&d&&a.pathRequiresRewrite(d)?a.rewritePath(d,c.rootpath):a.normalizePath(b.value)}return b},l.prototype.eval=function(a){var b=this.doEval(a);return(this.options.reference||this.blocksVisibility())&&(b.length||0===b.length?b.forEach(function(a){a.addVisibilityBlock()}):b.addVisibilityBlock()),b},l.prototype.doEval=function(a){var b,c,d=this.features&&this.features.eval(a);if(this.options.isPlugin){if(this.root&&this.root.eval)try{this.root.eval(a)}catch(f){throw f.message="Plugin error during evaluation",new k(f,this.root.imports,this.root.filename)}return c=a.frames[0]&&a.frames[0].functionRegistry,c&&this.root&&this.root.functions&&c.addMultiple(this.root.functions),[]}if(this.skip&&("function"==typeof this.skip&&(this.skip=this.skip()),this.skip))return[];if(this.options.inline){var g=new i(this.root,0,{filename:this.importedFilename,reference:this.path._fileInfo&&this.path._fileInfo.reference},(!0),(!0));return this.features?new e([g],this.features.value):[g]}if(this.css){var m=new l(this.evalPath(a),d,this.options,this._index);if(!m.css&&this.error)throw this.error;return m}return b=new h(null,j.copyArray(this.root.rules)),b.evalImports(a),this.features?new e(b.rules,this.features.value):b.rules},b.exports=l},{"../less-error":38,"../utils":89,"./anonymous":50,"./media":71,"./node":76,"./quoted":80,"./ruleset":81,"./url":85}],67:[function(a,b,c){var d=Object.create(null);d.Node=a("./node"),d.Color=a("./color"),d.AtRule=a("./atrule"),d.DetachedRuleset=a("./detached-ruleset"),d.Operation=a("./operation"),d.Dimension=a("./dimension"),d.Unit=a("./unit"),d.Keyword=a("./keyword"),d.Variable=a("./variable"),d.Property=a("./property"),d.Ruleset=a("./ruleset"),d.Element=a("./element"),d.Attribute=a("./attribute"),d.Combinator=a("./combinator"),d.Selector=a("./selector"),d.Quoted=a("./quoted"),d.Expression=a("./expression"),d.Declaration=a("./declaration"),d.Call=a("./call"),d.URL=a("./url"),d.Import=a("./import"),d.mixin={Call:a("./mixin-call"),Definition:a("./mixin-definition")},d.Comment=a("./comment"),d.Anonymous=a("./anonymous"),d.Value=a("./value"),d.JavaScript=a("./javascript"),d.Assignment=a("./assignment"),d.Condition=a("./condition"),d.Paren=a("./paren"),d.Media=a("./media"),d.UnicodeDescriptor=a("./unicode-descriptor"),d.Negative=a("./negative"),d.Extend=a("./extend"),d.VariableCall=a("./variable-call"),d.NamespaceValue=a("./namespace-value"),b.exports=d},{"./anonymous":50,"./assignment":51,"./atrule":52,"./attribute":53,"./call":54,"./color":55,"./combinator":56,"./comment":57,"./condition":58,"./declaration":60,"./detached-ruleset":61,"./dimension":62,"./element":63,"./expression":64,"./extend":65,"./import":66,"./javascript":68,"./keyword":70,"./media":71,"./mixin-call":72,"./mixin-definition":73,"./namespace-value":74,"./negative":75,"./node":76,"./operation":77,"./paren":78,"./property":79,"./quoted":80,"./ruleset":81,"./selector":82,"./unicode-descriptor":83,"./unit":84,"./url":85,"./value":86,"./variable":88,"./variable-call":87}],68:[function(a,b,c){var d=a("./js-eval-node"),e=a("./dimension"),f=a("./quoted"),g=a("./anonymous"),h=function(a,b,c,d){this.escaped=b,this.expression=a,this._index=c,this._fileInfo=d};h.prototype=new d,h.prototype.type="JavaScript",h.prototype.eval=function(a){var b=this.evaluateJavaScript(this.expression,a),c=typeof b;return"number"!==c||isNaN(b)?"string"===c?new f('"'+b+'"',b,this.escaped,this._index):new g(Array.isArray(b)?b.join(", "):b):new e(b)},b.exports=h},{"./anonymous":50,"./dimension":62,"./js-eval-node":69,"./quoted":80}],69:[function(a,b,c){var d=a("./node"),e=a("./variable"),f=function(){};f.prototype=new d,f.prototype.evaluateJavaScript=function(a,b){var c,d=this,f={};if(!b.javascriptEnabled)throw{message:"Inline JavaScript is not enabled. Is it set in your options?",filename:this.fileInfo().filename,index:this.getIndex()};a=a.replace(/@\{([\w-]+)\}/g,function(a,c){return d.jsify(new e("@"+c,d.getIndex(),d.fileInfo()).eval(b))});try{a=new Function("return ("+a+")")}catch(g){throw{message:"JavaScript evaluation error: "+g.message+" from `"+a+"`",filename:this.fileInfo().filename,index:this.getIndex()}}var h=b.frames[0].variables();for(var i in h)h.hasOwnProperty(i)&&(f[i.slice(1)]={value:h[i].value,toJS:function(){return this.value.eval(b).toCSS()}});try{c=a.call(f)}catch(g){throw{message:"JavaScript evaluation error: '"+g.name+": "+g.message.replace(/["]/g,"'")+"'",filename:this.fileInfo().filename,index:this.getIndex()}}return c},f.prototype.jsify=function(a){return Array.isArray(a.value)&&a.value.length>1?"["+a.value.map(function(a){return a.toCSS()}).join(", ")+"]":a.toCSS()},b.exports=f},{"./node":76,"./variable":88}],70:[function(a,b,c){var d=a("./node"),e=function(a){this.value=a};e.prototype=new d,e.prototype.type="Keyword",e.prototype.genCSS=function(a,b){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};b.add(this.value)},e.True=new e("true"),e.False=new e("false"),b.exports=e},{"./node":76}],71:[function(a,b,c){var d=a("./ruleset"),e=a("./value"),f=a("./selector"),g=a("./anonymous"),h=a("./expression"),i=a("./atrule"),j=a("../utils"),k=function(a,b,c,g,h){this._index=c,this._fileInfo=g;var i=new f([],null,null,this._index,this._fileInfo).createEmptySelectors();this.features=new e(b),this.rules=[new d(i,a)],this.rules[0].allowImports=!0,this.copyVisibilityInfo(h),this.allowRoot=!0,this.setParent(i,this),this.setParent(this.features,this),this.setParent(this.rules,this)};k.prototype=new i,k.prototype.type="Media",k.prototype.isRulesetLike=function(){return!0},k.prototype.accept=function(a){this.features&&(this.features=a.visit(this.features)),this.rules&&(this.rules=a.visitArray(this.rules))},k.prototype.genCSS=function(a,b){b.add("@media ",this._fileInfo,this._index),this.features.genCSS(a,b),this.outputRuleset(a,b,this.rules)},k.prototype.eval=function(a){a.mediaBlocks||(a.mediaBlocks=[],a.mediaPath=[]);var b=new k(null,[],this._index,this._fileInfo,this.visibilityInfo());return this.debugInfo&&(this.rules[0].debugInfo=this.debugInfo,b.debugInfo=this.debugInfo),b.features=this.features.eval(a),a.mediaPath.push(b),a.mediaBlocks.push(b),this.rules[0].functionRegistry=a.frames[0].functionRegistry.inherit(),a.frames.unshift(this.rules[0]),b.rules=[this.rules[0].eval(a)],a.frames.shift(),a.mediaPath.pop(),0===a.mediaPath.length?b.evalTop(a):b.evalNested(a)},k.prototype.evalTop=function(a){var b=this;if(a.mediaBlocks.length>1){var c=new f([],null,null,this.getIndex(),this.fileInfo()).createEmptySelectors();b=new d(c,a.mediaBlocks),b.multiMedia=!0,b.copyVisibilityInfo(this.visibilityInfo()),this.setParent(b,this)}return delete a.mediaBlocks,delete a.mediaPath,b},k.prototype.evalNested=function(a){var b,c,f=a.mediaPath.concat([this]);for(b=0;b<f.length;b++)c=f[b].features instanceof e?f[b].features.value:f[b].features,f[b]=Array.isArray(c)?c:[c];return this.features=new e(this.permute(f).map(function(a){for(a=a.map(function(a){return a.toCSS?a:new g(a)}),b=a.length-1;b>0;b--)a.splice(b,0,new g("and"));return new h(a)})),this.setParent(this.features,this),new d([],[])},k.prototype.permute=function(a){if(0===a.length)return[];if(1===a.length)return a[0];for(var b=[],c=this.permute(a.slice(1)),d=0;d<c.length;d++)for(var e=0;e<a[0].length;e++)b.push([a[0][e]].concat(c[d]));return b},k.prototype.bubbleSelectors=function(a){a&&(this.rules=[new d(j.copyArray(a),[this.rules[0]])],this.setParent(this.rules,this))},b.exports=k},{"../utils":89,"./anonymous":50,"./atrule":52,"./expression":64,"./ruleset":81,"./selector":82,"./value":86}],72:[function(a,b,c){var d=a("./node"),e=a("./selector"),f=a("./mixin-definition"),g=a("../functions/default"),h=function(a,b,c,d,f){this.selector=new e(a),this.arguments=b||[],this._index=c,this._fileInfo=d,this.important=f,this.allowRoot=!0,this.setParent(this.selector,this)};h.prototype=new d,h.prototype.type="MixinCall",h.prototype.accept=function(a){this.selector&&(this.selector=a.visit(this.selector)),this.arguments.length&&(this.arguments=a.visitArray(this.arguments))},h.prototype.eval=function(a){function b(b,c){var d,e,f;for(d=0;d<2;d++){for(x[d]=!0,g.value(d),e=0;e<c.length&&x[d];e++)f=c[e],f.matchCondition&&(x[d]=x[d]&&f.matchCondition(null,a));b.matchCondition&&(x[d]=x[d]&&b.matchCondition(t,a))}return x[0]||x[1]?x[0]!=x[1]?x[1]?A:B:z:y}var c,d,e,h,i,j,k,l,m,n,o,p,q,r,s,t=[],u=[],v=!1,w=[],x=[],y=-1,z=0,A=1,B=2;for(this.selector=this.selector.eval(a),j=0;j<this.arguments.length;j++)if(h=this.arguments[j],i=h.value.eval(a),h.expand&&Array.isArray(i.value))for(i=i.value,k=0;k<i.length;k++)t.push({value:i[k]});else t.push({name:h.name,value:i});for(s=function(b){return b.matchArgs(null,a)},j=0;j<a.frames.length;j++)if((c=a.frames[j].find(this.selector,null,s)).length>0){for(n=!0,k=0;k<c.length;k++){for(d=c[k].rule,e=c[k].path,m=!1,l=0;l<a.frames.length;l++)if(!(d instanceof f)&&d===(a.frames[l].originalRuleset||a.frames[l])){m=!0;break}m||d.matchArgs(t,a)&&(o={mixin:d,group:b(d,e)},o.group!==y&&w.push(o),v=!0)}for(g.reset(),q=[0,0,0],k=0;k<w.length;k++)q[w[k].group]++;if(q[z]>0)p=B;else if(p=A,q[A]+q[B]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `"+this.format(t)+"`",index:this.getIndex(),filename:this.fileInfo().filename};for(k=0;k<w.length;k++)if(o=w[k].group,o===z||o===p)try{d=w[k].mixin,d instanceof f||(r=d.originalRuleset||d,d=new f("",[],d.rules,null,(!1),null,r.visibilityInfo()),d.originalRuleset=r);var C=d.evalCall(a,t,this.important).rules;this._setVisibilityToReplacement(C),Array.prototype.push.apply(u,C)}catch(D){throw{message:D.message,index:this.getIndex(),filename:this.fileInfo().filename,stack:D.stack}}if(v)return u}throw n?{type:"Runtime",message:"No matching definition was found for `"+this.format(t)+"`",index:this.getIndex(),filename:this.fileInfo().filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.getIndex(),filename:this.fileInfo().filename}},h.prototype._setVisibilityToReplacement=function(a){var b,c;if(this.blocksVisibility())for(b=0;b<a.length;b++)c=a[b],c.addVisibilityBlock()},h.prototype.format=function(a){return this.selector.toCSS().trim()+"("+(a?a.map(function(a){var b="";return a.name&&(b+=a.name+":"),b+=a.value.toCSS?a.value.toCSS():"???"}).join(", "):"")+")"},b.exports=h},{"../functions/default":25,"./mixin-definition":73,"./node":76,"./selector":82}],73:[function(a,b,c){var d=a("./selector"),e=a("./element"),f=a("./ruleset"),g=a("./declaration"),h=a("./detached-ruleset"),i=a("./expression"),j=a("../contexts"),k=a("../utils"),l=function(a,b,c,f,g,h,i){this.name=a||"anonymous mixin",this.selectors=[new d([new e(null,a,(!1),this._index,this._fileInfo)])],this.params=b,this.condition=f,this.variadic=g,this.arity=b.length,this.rules=c,this._lookups={};var j=[];this.required=b.reduce(function(a,b){return!b.name||b.name&&!b.value?a+1:(j.push(b.name),a)},0),this.optionalParameters=j,this.frames=h,this.copyVisibilityInfo(i),this.allowRoot=!0};l.prototype=new f,l.prototype.type="MixinDefinition",l.prototype.evalFirst=!0,l.prototype.accept=function(a){this.params&&this.params.length&&(this.params=a.visitArray(this.params)),this.rules=a.visitArray(this.rules),this.condition&&(this.condition=a.visit(this.condition))},l.prototype.evalParams=function(a,b,c,d){var e,l,m,n,o,p,q,r,s=new f(null,null),t=k.copyArray(this.params),u=0;if(b.frames&&b.frames[0]&&b.frames[0].functionRegistry&&(s.functionRegistry=b.frames[0].functionRegistry.inherit()),b=new j.Eval(b,[s].concat(b.frames)),c)for(c=k.copyArray(c),u=c.length,m=0;m<u;m++)if(l=c[m],p=l&&l.name){for(q=!1,n=0;n<t.length;n++)if(!d[n]&&p===t[n].name){d[n]=l.value.eval(a),s.prependRule(new g(p,l.value.eval(a))),q=!0;break}if(q){c.splice(m,1),m--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+c[m].name+" not found"}}for(r=0,m=0;m<t.length;m++)if(!d[m]){if(l=c&&c[r],p=t[m].name)if(t[m].variadic){for(e=[],n=r;n<u;n++)e.push(c[n].value.eval(a));s.prependRule(new g(p,new i(e).eval(a)))}else{if(o=l&&l.value)o=Array.isArray(o)?new h(new f("",o)):o.eval(a);else{if(!t[m].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+u+" for "+this.arity+")"};o=t[m].value.eval(b),s.resetCache()}s.prependRule(new g(p,o)),d[m]=o}if(t[m].variadic&&c)for(n=r;n<u;n++)d[n]=c[n].value.eval(a);r++}return s},l.prototype.makeImportant=function(){var a=this.rules?this.rules.map(function(a){return a.makeImportant?a.makeImportant(!0):a}):this.rules,b=new l(this.name,this.params,a,this.condition,this.variadic,this.frames);return b},l.prototype.eval=function(a){return new l(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||k.copyArray(a.frames))},l.prototype.evalCall=function(a,b,c){var d,e,h=[],l=this.frames?this.frames.concat(a.frames):a.frames,m=this.evalParams(a,new j.Eval(a,l),b,h);return m.prependRule(new g("@arguments",new i(h).eval(a))),d=k.copyArray(this.rules),e=new f(null,d),e.originalRuleset=this,e=e.eval(new j.Eval(a,[this,m].concat(l))),c&&(e=e.makeImportant()),e},l.prototype.matchCondition=function(a,b){return!(this.condition&&!this.condition.eval(new j.Eval(b,[this.evalParams(b,new j.Eval(b,this.frames?this.frames.concat(b.frames):b.frames),a,[])].concat(this.frames||[]).concat(b.frames))))},l.prototype.matchArgs=function(a,b){var c,d=a&&a.length||0,e=this.optionalParameters,f=a?a.reduce(function(a,b){return e.indexOf(b.name)<0?a+1:a},0):0;if(this.variadic){if(f<this.required-1)return!1}else{if(f<this.required)return!1;if(d>this.params.length)return!1}c=Math.min(f,this.arity);for(var g=0;g<c;g++)if(!this.params[g].name&&!this.params[g].variadic&&a[g].value.eval(b).toCSS()!=this.params[g].value.eval(b).toCSS())return!1;return!0},b.exports=l},{"../contexts":13,"../utils":89,"./declaration":60,"./detached-ruleset":61,"./element":63,"./expression":64,"./ruleset":81,"./selector":82}],74:[function(a,b,c){var d=a("./node"),e=a("./variable"),f=a("./ruleset"),g=a("./selector"),h=function(a,b,c,d,e){this.value=a,this.lookups=b,this.important=c,this._index=d,this._fileInfo=e};h.prototype=new d,h.prototype.type="NamespaceValue",h.prototype.eval=function(a){var b,c,d=this.value.eval(a);for(b=0;b<this.lookups.length;b++){if(c=this.lookups[b],Array.isArray(d)&&(d=new f([new g],d)),""===c)d=d.lastDeclaration();else if("@"===c.charAt(0)){if("@"===c.charAt(1)&&(c="@"+new e(c.substr(1)).eval(a).value),d.variables&&(d=d.variable(c)),!d)throw{type:"Name",message:"variable "+c+" not found",filename:this.fileInfo().filename,index:this.getIndex()}}else{if(c="$@"===c.substring(0,2)?"$"+new e(c.substr(1)).eval(a).value:"$"===c.charAt(0)?c:"$"+c,d.properties&&(d=d.property(c)),!d)throw{type:"Name",message:'property "'+c.substr(1)+'" not found',filename:this.fileInfo().filename,index:this.getIndex()};d=d[d.length-1]}d.value&&(d=d.eval(a).value),d.ruleset&&(d=d.ruleset.eval(a))}return d},b.exports=h},{"./node":76,"./ruleset":81,"./selector":82,"./variable":88}],75:[function(a,b,c){var d=a("./node"),e=a("./operation"),f=a("./dimension"),g=function(a){this.value=a};g.prototype=new d,g.prototype.type="Negative",g.prototype.genCSS=function(a,b){b.add("-"),this.value.genCSS(a,b)},g.prototype.eval=function(a){return a.isMathOn()?new e("*",[new f((-1)),this.value]).eval(a):new g(this.value.eval(a))},b.exports=g},{"./dimension":62,"./node":76,"./operation":77}],76:[function(a,b,c){var d=function(){this.parent=null,this.visibilityBlocks=void 0,this.nodeVisible=void 0,this.rootNode=null,this.parsed=null;var a=this;Object.defineProperty(this,"currentFileInfo",{get:function(){return a.fileInfo()}}),Object.defineProperty(this,"index",{get:function(){return a.getIndex()}})};d.prototype.setParent=function(a,b){function c(a){a&&a instanceof d&&(a.parent=b)}Array.isArray(a)?a.forEach(c):c(a)},d.prototype.getIndex=function(){return this._index||this.parent&&this.parent.getIndex()||0},d.prototype.fileInfo=function(){return this._fileInfo||this.parent&&this.parent.fileInfo()||{}},d.prototype.isRulesetLike=function(){return!1},d.prototype.toCSS=function(a){var b=[];return this.genCSS(a,{add:function(a,c,d){b.push(a)},isEmpty:function(){return 0===b.length}}),b.join("")},d.prototype.genCSS=function(a,b){b.add(this.value)},d.prototype.accept=function(a){this.value=a.visit(this.value)},d.prototype.eval=function(){return this},d.prototype._operate=function(a,b,c,d){switch(b){case"+":return c+d;case"-":return c-d;case"*":return c*d;case"/":return c/d}},d.prototype.fround=function(a,b){var c=a&&a.numPrecision;return c?Number((b+2e-16).toFixed(c)):b},d.compare=function(a,b){if(a.compare&&"Quoted"!==b.type&&"Anonymous"!==b.type)return a.compare(b);if(b.compare)return-b.compare(a);if(a.type===b.type){if(a=a.value,b=b.value,!Array.isArray(a))return a===b?0:void 0;if(a.length===b.length){for(var c=0;c<a.length;c++)if(0!==d.compare(a[c],b[c]))return;return 0}}},d.numericCompare=function(a,b){return a<b?-1:a===b?0:a>b?1:void 0},d.prototype.blocksVisibility=function(){return null==this.visibilityBlocks&&(this.visibilityBlocks=0),0!==this.visibilityBlocks},d.prototype.addVisibilityBlock=function(){null==this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks+1},d.prototype.removeVisibilityBlock=function(){null==this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks-1},d.prototype.ensureVisibility=function(){this.nodeVisible=!0},d.prototype.ensureInvisibility=function(){this.nodeVisible=!1},d.prototype.isVisible=function(){return this.nodeVisible},d.prototype.visibilityInfo=function(){return{visibilityBlocks:this.visibilityBlocks,nodeVisible:this.nodeVisible}},d.prototype.copyVisibilityInfo=function(a){a&&(this.visibilityBlocks=a.visibilityBlocks,this.nodeVisible=a.nodeVisible)},b.exports=d},{}],77:[function(a,b,c){var d=a("./node"),e=a("./color"),f=a("./dimension"),g=a("../constants").Math,h=function(a,b,c){this.op=a.trim(),this.operands=b,this.isSpaced=c};h.prototype=new d,h.prototype.type="Operation",h.prototype.accept=function(a){this.operands=a.visit(this.operands)},h.prototype.eval=function(a){var b,c=this.operands[0].eval(a),d=this.operands[1].eval(a);if(a.isMathOn(this.op)){if(b="./"===this.op?"/":this.op,c instanceof f&&d instanceof e&&(c=c.toColor()),d instanceof f&&c instanceof e&&(d=d.toColor()),!c.operate){if(c instanceof h&&"/"===c.op&&a.math===g.PARENS_DIVISION)return new h(this.op,[c,d],this.isSpaced);throw{type:"Operation",message:"Operation on an invalid type"}}return c.operate(a,b,d)}return new h(this.op,[c,d],this.isSpaced)},h.prototype.genCSS=function(a,b){this.operands[0].genCSS(a,b),this.isSpaced&&b.add(" "),b.add(this.op),this.isSpaced&&b.add(" "),this.operands[1].genCSS(a,b)},b.exports=h},{"../constants":12,"./color":55,"./dimension":62,"./node":76}],78:[function(a,b,c){var d=a("./node"),e=function(a){this.value=a};e.prototype=new d,e.prototype.type="Paren",e.prototype.genCSS=function(a,b){b.add("("),this.value.genCSS(a,b),b.add(")")},e.prototype.eval=function(a){return new e(this.value.eval(a))},b.exports=e},{"./node":76}],79:[function(a,b,c){var d=a("./node"),e=a("./declaration"),f=function(a,b,c){this.name=a,this._index=b,this._fileInfo=c};f.prototype=new d,f.prototype.type="Property",f.prototype.eval=function(a){var b,c=this.name,d=a.pluginManager.less.visitors.ToCSSVisitor.prototype._mergeRules;if(this.evaluating)throw{type:"Name",message:"Recursive property reference for "+c,filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,b=this.find(a.frames,function(b){var f,g=b.property(c);if(g){for(var h=0;h<g.length;h++)f=g[h],g[h]=new e(f.name,f.value,f.important,f.merge,f.index,f.currentFileInfo,f.inline,f.variable);if(d(g),f=g[g.length-1],f.important){var i=a.importantScope[a.importantScope.length-1];i.important=f.important}return f=f.value.eval(a)}}))return this.evaluating=!1,b;throw{type:"Name",message:"Property '"+c+"' is undefined",filename:this.currentFileInfo.filename,index:this.index}},f.prototype.find=function(a,b){for(var c,d=0;d<a.length;d++)if(c=b.call(a,a[d]))return c;return null},b.exports=f},{"./declaration":60,"./node":76}],80:[function(a,b,c){var d=a("./node"),e=a("./variable"),f=a("./property"),g=function(a,b,c,d,e){this.escaped=null==c||c,this.value=b||"",this.quote=a.charAt(0),this._index=d,this._fileInfo=e,this.variableRegex=/@\{([\w-]+)\}/g,this.propRegex=/\$\{([\w-]+)\}/g};g.prototype=new d,g.prototype.type="Quoted",g.prototype.genCSS=function(a,b){this.escaped||b.add(this.quote,this.fileInfo(),this.getIndex()),b.add(this.value),this.escaped||b.add(this.quote)},g.prototype.containsVariables=function(){return this.value.match(this.variableRegex)},g.prototype.eval=function(a){function b(a,b,c){var d=a;do a=d,d=a.replace(b,c);while(a!==d);return d}var c=this,d=this.value,h=function(b,d){var f=new e("@"+d,c.getIndex(),c.fileInfo()).eval(a,!0);return f instanceof g?f.value:f.toCSS()},i=function(b,d){var e=new f("$"+d,c.getIndex(),c.fileInfo()).eval(a,!0);return e instanceof g?e.value:e.toCSS()};return d=b(d,this.variableRegex,h),d=b(d,this.propRegex,i),new g(this.quote+d+this.quote,d,this.escaped,this.getIndex(),this.fileInfo())},g.prototype.compare=function(a){return"Quoted"!==a.type||this.escaped||a.escaped?a.toCSS&&this.toCSS()===a.toCSS()?0:void 0:d.numericCompare(this.value,a.value)},b.exports=g},{"./node":76,"./property":79,"./variable":88}],81:[function(a,b,c){var d=a("./node"),e=a("./declaration"),f=a("./keyword"),g=a("./comment"),h=a("./paren"),i=a("./selector"),j=a("./element"),k=a("./anonymous"),l=a("../contexts"),m=a("../functions/function-registry"),n=a("../functions/default"),o=a("./debug-info"),p=a("../utils"),q=function(a,b,c,d){this.selectors=a,this.rules=b,this._lookups={},this._variables=null,this._properties=null,this.strictImports=c,this.copyVisibilityInfo(d),this.allowRoot=!0,this.setParent(this.selectors,this),this.setParent(this.rules,this)};q.prototype=new d,q.prototype.type="Ruleset",q.prototype.isRuleset=!0,q.prototype.isRulesetLike=function(){return!0},q.prototype.accept=function(a){this.paths?this.paths=a.visitArray(this.paths,!0):this.selectors&&(this.selectors=a.visitArray(this.selectors)),this.rules&&this.rules.length&&(this.rules=a.visitArray(this.rules))},q.prototype.eval=function(a){var b,c,f,g,h,i=!1;if(this.selectors&&(c=this.selectors.length)){for(b=new Array(c),n.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"}),g=0;g<c;g++){f=this.selectors[g].eval(a);for(var j=0;j<f.elements.length;j++)if(f.elements[j].isVariable){h=!0;break}b[g]=f,f.evaldCondition&&(i=!0)}if(h){var k=new Array(c);for(g=0;g<c;g++)f=b[g],k[g]=f.toCSS(a);this.parse.parseNode(k.join(","),["selectors"],b[0].getIndex(),b[0].fileInfo(),function(a,c){c&&(b=p.flattenArray(c))})}n.reset()}else i=!0;var l,o,r=this.rules?p.copyArray(this.rules):null,s=new q(b,r,this.strictImports,this.visibilityInfo());s.originalRuleset=this,s.root=this.root,s.firstRoot=this.firstRoot,s.allowImports=this.allowImports,this.debugInfo&&(s.debugInfo=this.debugInfo),i||(r.length=0),s.functionRegistry=function(a){for(var b,c=0,d=a.length;c!==d;++c)if(b=a[c].functionRegistry)return b;return m}(a.frames).inherit();var t=a.frames;t.unshift(s);var u=a.selectors;u||(a.selectors=u=[]),u.unshift(this.selectors),(s.root||s.allowImports||!s.strictImports)&&s.evalImports(a);var v=s.rules;for(g=0;l=v[g];g++)l.evalFirst&&(v[g]=l.eval(a));var w=a.mediaBlocks&&a.mediaBlocks.length||0;for(g=0;l=v[g];g++)"MixinCall"===l.type?(r=l.eval(a).filter(function(a){return!(a instanceof e&&a.variable)||!s.variable(a.name)}),v.splice.apply(v,[g,1].concat(r)),g+=r.length-1,s.resetCache()):"VariableCall"===l.type&&(r=l.eval(a).rules.filter(function(a){return!(a instanceof e&&a.variable)}),v.splice.apply(v,[g,1].concat(r)),g+=r.length-1,s.resetCache());for(g=0;l=v[g];g++)l.evalFirst||(v[g]=l=l.eval?l.eval(a):l);for(g=0;l=v[g];g++)if(l instanceof q&&l.selectors&&1===l.selectors.length&&l.selectors[0]&&l.selectors[0].isJustParentSelector()){v.splice(g--,1);for(var j=0;o=l.rules[j];j++)o instanceof d&&(o.copyVisibilityInfo(l.visibilityInfo()),o instanceof e&&o.variable||v.splice(++g,0,o))}if(t.shift(),u.shift(),a.mediaBlocks)for(g=w;g<a.mediaBlocks.length;g++)a.mediaBlocks[g].bubbleSelectors(b);return s},q.prototype.evalImports=function(a){var b,c,d=this.rules;if(d)for(b=0;b<d.length;b++)"Import"===d[b].type&&(c=d[b].eval(a),c&&(c.length||0===c.length)?(d.splice.apply(d,[b,1].concat(c)),b+=c.length-1):d.splice(b,1,c),this.resetCache())},q.prototype.makeImportant=function(){var a=new q(this.selectors,this.rules.map(function(a){return a.makeImportant?a.makeImportant():a}),this.strictImports,this.visibilityInfo());return a},q.prototype.matchArgs=function(a){return!a||0===a.length},q.prototype.matchCondition=function(a,b){var c=this.selectors[this.selectors.length-1];return!!c.evaldCondition&&!(c.condition&&!c.condition.eval(new l.Eval(b,b.frames)))},q.prototype.resetCache=function(){this._rulesets=null,this._variables=null,this._properties=null,this._lookups={}},q.prototype.variables=function(){return this._variables||(this._variables=this.rules?this.rules.reduce(function(a,b){if(b instanceof e&&b.variable===!0&&(a[b.name]=b),"Import"===b.type&&b.root&&b.root.variables){var c=b.root.variables();
for(var d in c)c.hasOwnProperty(d)&&(a[d]=b.root.variable(d))}return a},{}):{}),this._variables},q.prototype.properties=function(){return this._properties||(this._properties=this.rules?this.rules.reduce(function(a,b){if(b instanceof e&&b.variable!==!0){var c=1===b.name.length&&b.name[0]instanceof f?b.name[0].value:b.name;a["$"+c]?a["$"+c].push(b):a["$"+c]=[b]}return a},{}):{}),this._properties},q.prototype.variable=function(a){var b=this.variables()[a];if(b)return this.parseValue(b)},q.prototype.property=function(a){var b=this.properties()[a];if(b)return this.parseValue(b)},q.prototype.lastDeclaration=function(){for(var a=this.rules.length;a>0;a--){var b=this.rules[a-1];if(b instanceof e)return this.parseValue(b)}},q.prototype.parseValue=function(a){function b(a){return a.value instanceof k&&!a.parsed?("string"==typeof a.value.value?this.parse.parseNode(a.value.value,["value","important"],a.value.getIndex(),a.fileInfo(),function(b,c){b&&(a.parsed=!0),c&&(a.value=c[0],a.important=c[1]||"",a.parsed=!0)}):a.parsed=!0,a):a}var c=this;if(Array.isArray(a)){var d=[];return a.forEach(function(a){d.push(b.call(c,a))}),d}return b.call(c,a)},q.prototype.rulesets=function(){if(!this.rules)return[];var a,b,c=[],d=this.rules;for(a=0;b=d[a];a++)b.isRuleset&&c.push(b);return c},q.prototype.prependRule=function(a){var b=this.rules;b?b.unshift(a):this.rules=[a],this.setParent(a,this)},q.prototype.find=function(a,b,c){b=b||this;var d,e,f=[],g=a.toCSS();return g in this._lookups?this._lookups[g]:(this.rulesets().forEach(function(g){if(g!==b)for(var h=0;h<g.selectors.length;h++)if(d=a.match(g.selectors[h])){if(a.elements.length>d){if(!c||c(g)){e=g.find(new i(a.elements.slice(d)),b,c);for(var j=0;j<e.length;++j)e[j].path.push(g);Array.prototype.push.apply(f,e)}}else f.push({rule:g,path:[]});break}}),this._lookups[g]=f,f)},q.prototype.genCSS=function(a,b){var c,d,e,f,h,i=[],j=[];a.tabLevel=a.tabLevel||0,this.root||a.tabLevel++;var k,l=a.compress?"":Array(a.tabLevel+1).join("  "),m=a.compress?"":Array(a.tabLevel).join("  "),n=0,p=0;for(c=0;f=this.rules[c];c++)f instanceof g?(p===c&&p++,j.push(f)):f.isCharset&&f.isCharset()?(j.splice(n,0,f),n++,p++):"Import"===f.type?(j.splice(p,0,f),p++):j.push(f);if(j=i.concat(j),!this.root){e=o(a,this,m),e&&(b.add(e),b.add(m));var q,r=this.paths,s=r.length;for(k=a.compress?",":",\n"+m,c=0;c<s;c++)if(h=r[c],q=h.length)for(c>0&&b.add(k),a.firstSelector=!0,h[0].genCSS(a,b),a.firstSelector=!1,d=1;d<q;d++)h[d].genCSS(a,b);b.add((a.compress?"{":" {\n")+l)}for(c=0;f=j[c];c++){c+1===j.length&&(a.lastRule=!0);var t=a.lastRule;f.isRulesetLike(f)&&(a.lastRule=!1),f.genCSS?f.genCSS(a,b):f.value&&b.add(f.value.toString()),a.lastRule=t,!a.lastRule&&f.isVisible()?b.add(a.compress?"":"\n"+l):a.lastRule=!1}this.root||(b.add(a.compress?"}":"\n"+m+"}"),a.tabLevel--),b.isEmpty()||a.compress||!this.firstRoot||b.add("\n")},q.prototype.joinSelectors=function(a,b,c){for(var d=0;d<c.length;d++)this.joinSelector(a,b,c[d])},q.prototype.joinSelector=function(a,b,c){function d(a,b){var c,d;if(0===a.length)c=new h(a[0]);else{var e=new Array(a.length);for(d=0;d<a.length;d++)e[d]=new j(null,a[d],b.isVariable,b._index,b._fileInfo);c=new h(new i(e))}return c}function e(a,b){var c,d;return c=new j(null,a,b.isVariable,b._index,b._fileInfo),d=new i([c])}function f(a,b,c,d){var e,f,g;if(e=[],a.length>0?(e=p.copyArray(a),f=e.pop(),g=d.createDerived(p.copyArray(f.elements))):g=d.createDerived([]),b.length>0){var h=c.combinator,i=b[0].elements[0];h.emptyOrWhitespace&&!i.combinator.emptyOrWhitespace&&(h=i.combinator),g.elements.push(new j(h,i.value,c.isVariable,c._index,c._fileInfo)),g.elements=g.elements.concat(b[0].elements.slice(1))}if(0!==g.elements.length&&e.push(g),b.length>1){var k=b.slice(1);k=k.map(function(a){return a.createDerived(a.elements,[])}),e=e.concat(k)}return e}function g(a,b,c,d,e){var g;for(g=0;g<a.length;g++){var h=f(a[g],b,c,d);e.push(h)}return e}function k(a,b){var c,d;if(0!==a.length){if(0===b.length)return void b.push([new i(a)]);for(c=0;d=b[c];c++)d.length>0?d[d.length-1]=d[d.length-1].createDerived(d[d.length-1].elements.concat(a)):d.push(new i(a))}}function l(a,b,c){function m(a){var b;return a.value instanceof h?(b=a.value.value,b instanceof i?b:null):null}var n,o,p,q,r,s,t,u,v,w,x=!1;for(q=[],r=[[]],n=0;u=c.elements[n];n++)if("&"!==u.value){var y=m(u);if(null!=y){k(q,r);var z,A=[],B=[];for(z=l(A,b,y),x=x||z,p=0;p<A.length;p++){var C=e(d(A[p],u),u);g(r,[C],u,c,B)}r=B,q=[]}else q.push(u)}else{for(x=!0,s=[],k(q,r),o=0;o<r.length;o++)if(t=r[o],0===b.length)t.length>0&&t[0].elements.push(new j(u.combinator,"",u.isVariable,u._index,u._fileInfo)),s.push(t);else for(p=0;p<b.length;p++){var D=f(t,b[p],u,c);s.push(D)}r=s,q=[]}for(k(q,r),n=0;n<r.length;n++)v=r[n].length,v>0&&(a.push(r[n]),w=r[n][v-1],r[n][v-1]=w.createDerived(w.elements,c.extendList));return x}function m(a,b){var c=b.createDerived(b.elements,b.extendList,b.evaldCondition);return c.copyVisibilityInfo(a),c}var n,o,q;if(o=[],q=l(o,b,c),!q)if(b.length>0)for(o=[],n=0;n<b.length;n++){var r=b[n].map(m.bind(this,c.visibilityInfo()));r.push(c),o.push(r)}else o=[[c]];for(n=0;n<o.length;n++)a.push(o[n])},b.exports=q},{"../contexts":13,"../functions/default":25,"../functions/function-registry":27,"../utils":89,"./anonymous":50,"./comment":57,"./debug-info":59,"./declaration":60,"./element":63,"./keyword":70,"./node":76,"./paren":78,"./selector":82}],82:[function(a,b,c){var d=a("./node"),e=a("./element"),f=a("../less-error"),g=function(a,b,c,d,e,f){this.extendList=b,this.condition=c,this.evaldCondition=!c,this._index=d,this._fileInfo=e,this.elements=this.getElements(a),this.mixinElements_=void 0,this.copyVisibilityInfo(f),this.setParent(this.elements,this)};g.prototype=new d,g.prototype.type="Selector",g.prototype.accept=function(a){this.elements&&(this.elements=a.visitArray(this.elements)),this.extendList&&(this.extendList=a.visitArray(this.extendList)),this.condition&&(this.condition=a.visit(this.condition))},g.prototype.createDerived=function(a,b,c){a=this.getElements(a);var d=new g(a,b||this.extendList,null,this.getIndex(),this.fileInfo(),this.visibilityInfo());return d.evaldCondition=null!=c?c:this.evaldCondition,d.mediaEmpty=this.mediaEmpty,d},g.prototype.getElements=function(a){return a?("string"==typeof a&&this.parse.parseNode(a,["selector"],this._index,this._fileInfo,function(b,c){if(b)throw new f({index:b.index,message:b.message},this.parse.imports,this._fileInfo.filename);a=c[0].elements}),a):[new e("","&",(!1),this._index,this._fileInfo)]},g.prototype.createEmptySelectors=function(){var a=new e("","&",(!1),this._index,this._fileInfo),b=[new g([a],null,null,this._index,this._fileInfo)];return b[0].mediaEmpty=!0,b},g.prototype.match=function(a){var b,c,d=this.elements,e=d.length;if(a=a.mixinElements(),b=a.length,0===b||e<b)return 0;for(c=0;c<b;c++)if(d[c].value!==a[c])return 0;return b},g.prototype.mixinElements=function(){if(this.mixinElements_)return this.mixinElements_;var a=this.elements.map(function(a){return a.combinator.value+(a.value.value||a.value)}).join("").match(/[,&#\*\.\w-]([\w-]|(\\.))*/g);return a?"&"===a[0]&&a.shift():a=[],this.mixinElements_=a},g.prototype.isJustParentSelector=function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},g.prototype.eval=function(a){var b=this.condition&&this.condition.eval(a),c=this.elements,d=this.extendList;return c=c&&c.map(function(b){return b.eval(a)}),d=d&&d.map(function(b){return b.eval(a)}),this.createDerived(c,d,b)},g.prototype.genCSS=function(a,b){var c,d;for(a&&a.firstSelector||""!==this.elements[0].combinator.value||b.add(" ",this.fileInfo(),this.getIndex()),c=0;c<this.elements.length;c++)d=this.elements[c],d.genCSS(a,b)},g.prototype.getIsOutput=function(){return this.evaldCondition},b.exports=g},{"../less-error":38,"./element":63,"./node":76}],83:[function(a,b,c){var d=a("./node"),e=function(a){this.value=a};e.prototype=new d,e.prototype.type="UnicodeDescriptor",b.exports=e},{"./node":76}],84:[function(a,b,c){var d=a("./node"),e=a("../data/unit-conversions"),f=a("../utils"),g=function(a,b,c){this.numerator=a?f.copyArray(a).sort():[],this.denominator=b?f.copyArray(b).sort():[],c?this.backupUnit=c:a&&a.length&&(this.backupUnit=a[0])};g.prototype=new d,g.prototype.type="Unit",g.prototype.clone=function(){return new g(f.copyArray(this.numerator),f.copyArray(this.denominator),this.backupUnit)},g.prototype.genCSS=function(a,b){var c=a&&a.strictUnits;1===this.numerator.length?b.add(this.numerator[0]):!c&&this.backupUnit?b.add(this.backupUnit):!c&&this.denominator.length&&b.add(this.denominator[0])},g.prototype.toString=function(){var a,b=this.numerator.join("*");for(a=0;a<this.denominator.length;a++)b+="/"+this.denominator[a];return b},g.prototype.compare=function(a){return this.is(a.toString())?0:void 0},g.prototype.is=function(a){return this.toString().toUpperCase()===a.toUpperCase()},g.prototype.isLength=function(){return RegExp("^(px|em|ex|ch|rem|in|cm|mm|pc|pt|ex|vw|vh|vmin|vmax)$","gi").test(this.toCSS())},g.prototype.isEmpty=function(){return 0===this.numerator.length&&0===this.denominator.length},g.prototype.isSingular=function(){return this.numerator.length<=1&&0===this.denominator.length},g.prototype.map=function(a){var b;for(b=0;b<this.numerator.length;b++)this.numerator[b]=a(this.numerator[b],!1);for(b=0;b<this.denominator.length;b++)this.denominator[b]=a(this.denominator[b],!0)},g.prototype.usedUnits=function(){var a,b,c,d={};b=function(b){return a.hasOwnProperty(b)&&!d[c]&&(d[c]=b),b};for(c in e)e.hasOwnProperty(c)&&(a=e[c],this.map(b));return d},g.prototype.cancel=function(){var a,b,c={};for(b=0;b<this.numerator.length;b++)a=this.numerator[b],c[a]=(c[a]||0)+1;for(b=0;b<this.denominator.length;b++)a=this.denominator[b],c[a]=(c[a]||0)-1;this.numerator=[],this.denominator=[];for(a in c)if(c.hasOwnProperty(a)){var d=c[a];if(d>0)for(b=0;b<d;b++)this.numerator.push(a);else if(d<0)for(b=0;b<-d;b++)this.denominator.push(a)}this.numerator.sort(),this.denominator.sort()},b.exports=g},{"../data/unit-conversions":16,"../utils":89,"./node":76}],85:[function(a,b,c){function d(a){return a.replace(/[\(\)'"\s]/g,function(a){return"\\"+a})}var e=a("./node"),f=function(a,b,c,d){this.value=a,this._index=b,this._fileInfo=c,this.isEvald=d};f.prototype=new e,f.prototype.type="Url",f.prototype.accept=function(a){this.value=a.visit(this.value)},f.prototype.genCSS=function(a,b){b.add("url("),this.value.genCSS(a,b),b.add(")")},f.prototype.eval=function(a){var b,c=this.value.eval(a);if(!this.isEvald&&(b=this.fileInfo()&&this.fileInfo().rootpath,"string"==typeof b&&"string"==typeof c.value&&a.pathRequiresRewrite(c.value)?(c.quote||(b=d(b)),c.value=a.rewritePath(c.value,b)):c.value=a.normalizePath(c.value),a.urlArgs&&!c.value.match(/^\s*data:/))){var e=c.value.indexOf("?")===-1?"?":"&",g=e+a.urlArgs;c.value.indexOf("#")!==-1?c.value=c.value.replace("#",g+"#"):c.value+=g}return new f(c,this.getIndex(),this.fileInfo(),(!0))},b.exports=f},{"./node":76}],86:[function(a,b,c){var d=a("./node"),e=function(a){if(!a)throw new Error("Value requires an array argument");this.value=Array.isArray(a)?a:[a]};e.prototype=new d,e.prototype.type="Value",e.prototype.accept=function(a){this.value&&(this.value=a.visitArray(this.value))},e.prototype.eval=function(a){return 1===this.value.length?this.value[0].eval(a):new e(this.value.map(function(b){return b.eval(a)}))},e.prototype.genCSS=function(a,b){var c;for(c=0;c<this.value.length;c++)this.value[c].genCSS(a,b),c+1<this.value.length&&b.add(a&&a.compress?",":", ")},b.exports=e},{"./node":76}],87:[function(a,b,c){var d=a("./node"),e=a("./variable"),f=a("./ruleset"),g=a("./detached-ruleset"),h=a("../less-error"),i=function(a,b,c){this.variable=a,this._index=b,this._fileInfo=c,this.allowRoot=!0};i.prototype=new d,i.prototype.type="VariableCall",i.prototype.eval=function(a){var b,c=new e(this.variable,this.getIndex(),this.fileInfo()).eval(a),d=new h({message:"Could not evaluate variable call "+this.variable});if(!c.ruleset){if(c.rules)b=c;else if(Array.isArray(c))b=new f("",c);else{if(!Array.isArray(c.value))throw d;b=new f("",c.value)}c=new g(b)}if(c.ruleset)return c.callEval(a);throw d},b.exports=i},{"../less-error":38,"./detached-ruleset":61,"./node":76,"./ruleset":81,"./variable":88}],88:[function(a,b,c){var d=a("./node"),e=a("./call"),f=function(a,b,c){this.name=a,this._index=b,this._fileInfo=c};f.prototype=new d,f.prototype.type="Variable",f.prototype.eval=function(a){var b,c=this.name;if(0===c.indexOf("@@")&&(c="@"+new f(c.slice(1),this.getIndex(),this.fileInfo()).eval(a).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+c,filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,b=this.find(a.frames,function(b){var d=b.variable(c);if(d){if(d.important){var f=a.importantScope[a.importantScope.length-1];f.important=d.important}return a.inCalc?new e("_SELF",[d.value]).eval(a):d.value.eval(a)}}))return this.evaluating=!1,b;throw{type:"Name",message:"variable "+c+" is undefined",filename:this.fileInfo().filename,index:this.getIndex()}},f.prototype.find=function(a,b){for(var c,d=0;d<a.length;d++)if(c=b.call(a,a[d]))return c;return null},b.exports=f},{"./call":54,"./node":76}],89:[function(a,b,c){var d=a("./constants"),e=a("clone"),f={getLocation:function(a,b){for(var c=a+1,d=null,e=-1;--c>=0&&"\n"!==b.charAt(c);)e++;return"number"==typeof a&&(d=(b.slice(0,a).match(/\n/g)||"").length),{line:d,column:e}},copyArray:function(a){var b,c=a.length,d=new Array(c);for(b=0;b<c;b++)d[b]=a[b];return d},clone:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},copyOptions:function(a,b){if(b&&b._defaults)return b;var c=f.defaults(a,b);if(c.strictMath&&(c.math=d.Math.STRICT_LEGACY),c.relativeUrls&&(c.rewriteUrls=d.RewriteUrls.ALL),"string"==typeof c.math)switch(c.math.toLowerCase()){case"always":c.math=d.Math.ALWAYS;break;case"parens-division":c.math=d.Math.PARENS_DIVISION;break;case"strict":case"parens":c.math=d.Math.PARENS;break;case"strict-legacy":c.math=d.Math.STRICT_LEGACY}if("string"==typeof c.rewriteUrls)switch(c.rewriteUrls.toLowerCase()){case"off":c.rewriteUrls=d.RewriteUrls.OFF;break;case"local":c.rewriteUrls=d.RewriteUrls.LOCAL;break;case"all":c.rewriteUrls=d.RewriteUrls.ALL}return c},defaults:function(a,b){var c=b||{};if(!b._defaults){c={};var d=e(a);c._defaults=d;var f=b?e(b):{};Object.assign(c,d,f)}return c},merge:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},flattenArray:function(a,b){b=b||[];for(var c=0,d=a.length;c<d;c++){var e=a[c];Array.isArray(e)?f.flattenArray(e,b):void 0!==e&&b.push(e)}return b}};b.exports=f},{"./constants":12,clone:100}],90:[function(a,b,c){var d=a("../tree"),e=a("./visitor"),f=a("../logger"),g=a("../utils"),h=function(){this._visitor=new e(this),this.contexts=[],this.allExtendsStack=[[]]};h.prototype={run:function(a){return a=this._visitor.visit(a),a.allExtends=this.allExtendsStack[0],a},visitDeclaration:function(a,b){b.visitDeeper=!1},visitMixinDefinition:function(a,b){b.visitDeeper=!1},visitRuleset:function(a,b){if(!a.root){var c,e,f,h,i=[],j=a.rules,k=j?j.length:0;for(c=0;c<k;c++)a.rules[c]instanceof d.Extend&&(i.push(j[c]),a.extendOnEveryPath=!0);var l=a.paths;for(c=0;c<l.length;c++){var m=l[c],n=m[m.length-1],o=n.extendList;for(h=o?g.copyArray(o).concat(i):i,h&&(h=h.map(function(a){return a.clone()})),e=0;e<h.length;e++)this.foundExtends=!0,f=h[e],f.findSelfSelectors(m),f.ruleset=a,0===e&&(f.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(f)}this.contexts.push(a.selectors)}},visitRulesetOut:function(a){a.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(a,b){a.allExtends=[],this.allExtendsStack.push(a.allExtends)},visitMediaOut:function(a){this.allExtendsStack.length=this.allExtendsStack.length-1},visitAtRule:function(a,b){a.allExtends=[],this.allExtendsStack.push(a.allExtends)},visitAtRuleOut:function(a){this.allExtendsStack.length=this.allExtendsStack.length-1}};var i=function(){this._visitor=new e(this)};i.prototype={run:function(a){var b=new h;if(this.extendIndices={},b.run(a),!b.foundExtends)return a;a.allExtends=a.allExtends.concat(this.doExtendChaining(a.allExtends,a.allExtends)),this.allExtendsStack=[a.allExtends];var c=this._visitor.visit(a);return this.checkExtendsForNonMatched(a.allExtends),c},checkExtendsForNonMatched:function(a){var b=this.extendIndices;a.filter(function(a){return!a.hasFoundMatches&&1==a.parent_ids.length}).forEach(function(a){var c="_unknown_";try{c=a.selector.toCSS({})}catch(d){}b[a.index+" "+c]||(b[a.index+" "+c]=!0,f.warn("extend '"+c+"' has no matches"))})},doExtendChaining:function(a,b,c){var e,f,g,h,i,j,k,l,m=[],n=this;for(c=c||0,e=0;e<a.length;e++)for(f=0;f<b.length;f++)j=a[e],k=b[f],j.parent_ids.indexOf(k.object_id)>=0||(i=[k.selfSelectors[0]],g=n.findMatch(j,i),g.length&&(j.hasFoundMatches=!0,j.selfSelectors.forEach(function(a){var b=k.visibilityInfo();h=n.extendSelector(g,i,a,j.isVisible()),l=new d.Extend(k.selector,k.option,0,k.fileInfo(),b),l.selfSelectors=h,h[h.length-1].extendList=[l],m.push(l),l.ruleset=k.ruleset,l.parent_ids=l.parent_ids.concat(k.parent_ids,j.parent_ids),k.firstExtendOnThisSelectorPath&&(l.firstExtendOnThisSelectorPath=!0,k.ruleset.paths.push(h))})));if(m.length){if(this.extendChainCount++,c>100){var o="{unable to calculate}",p="{unable to calculate}";try{o=m[0].selfSelectors[0].toCSS(),p=m[0].selector.toCSS()}catch(q){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+o+":extend("+p+")"}}return m.concat(n.doExtendChaining(m,b,c+1))}return m},visitDeclaration:function(a,b){b.visitDeeper=!1},visitMixinDefinition:function(a,b){b.visitDeeper=!1},visitSelector:function(a,b){b.visitDeeper=!1},visitRuleset:function(a,b){if(!a.root){var c,d,e,f,g=this.allExtendsStack[this.allExtendsStack.length-1],h=[],i=this;for(e=0;e<g.length;e++)for(d=0;d<a.paths.length;d++)if(f=a.paths[d],!a.extendOnEveryPath){var j=f[f.length-1].extendList;j&&j.length||(c=this.findMatch(g[e],f),c.length&&(g[e].hasFoundMatches=!0,g[e].selfSelectors.forEach(function(a){var b;b=i.extendSelector(c,f,a,g[e].isVisible()),h.push(b)})))}a.paths=a.paths.concat(h)}},findMatch:function(a,b){var c,d,e,f,g,h,i,j=this,k=a.selector.elements,l=[],m=[];for(c=0;c<b.length;c++)for(d=b[c],e=0;e<d.elements.length;e++)for(f=d.elements[e],(a.allowBefore||0===c&&0===e)&&l.push({pathIndex:c,index:e,matched:0,initialCombinator:f.combinator}),h=0;h<l.length;h++)i=l[h],g=f.combinator.value,""===g&&0===e&&(g=" "),!j.isElementValuesEqual(k[i.matched].value,f.value)||i.matched>0&&k[i.matched].combinator.value!==g?i=null:i.matched++,i&&(i.finished=i.matched===k.length,i.finished&&!a.allowAfter&&(e+1<d.elements.length||c+1<b.length)&&(i=null)),i?i.finished&&(i.length=k.length,i.endPathIndex=c,i.endPathElementIndex=e+1,l.length=0,m.push(i)):(l.splice(h,1),h--);return m},isElementValuesEqual:function(a,b){if("string"==typeof a||"string"==typeof b)return a===b;if(a instanceof d.Attribute)return a.op===b.op&&a.key===b.key&&(a.value&&b.value?(a=a.value.value||a.value,b=b.value.value||b.value,a===b):!a.value&&!b.value);if(a=a.value,b=b.value,a instanceof d.Selector){if(!(b instanceof d.Selector)||a.elements.length!==b.elements.length)return!1;for(var c=0;c<a.elements.length;c++){if(a.elements[c].combinator.value!==b.elements[c].combinator.value&&(0!==c||(a.elements[c].combinator.value||" ")!==(b.elements[c].combinator.value||" ")))return!1;if(!this.isElementValuesEqual(a.elements[c].value,b.elements[c].value))return!1}return!0}return!1},extendSelector:function(a,b,c,e){var f,g,h,i,j,k=0,l=0,m=[];for(f=0;f<a.length;f++)i=a[f],g=b[i.pathIndex],h=new d.Element(i.initialCombinator,c.elements[0].value,c.elements[0].isVariable,c.elements[0].getIndex(),c.elements[0].fileInfo()),i.pathIndex>k&&l>0&&(m[m.length-1].elements=m[m.length-1].elements.concat(b[k].elements.slice(l)),l=0,k++),j=g.elements.slice(l,i.index).concat([h]).concat(c.elements.slice(1)),k===i.pathIndex&&f>0?m[m.length-1].elements=m[m.length-1].elements.concat(j):(m=m.concat(b.slice(k,i.pathIndex)),m.push(new d.Selector(j))),k=i.endPathIndex,l=i.endPathElementIndex,l>=b[k].elements.length&&(l=0,k++);return k<b.length&&l>0&&(m[m.length-1].elements=m[m.length-1].elements.concat(b[k].elements.slice(l)),k++),m=m.concat(b.slice(k,b.length)),m=m.map(function(a){var b=a.createDerived(a.elements);return e?b.ensureVisibility():b.ensureInvisibility(),b})},visitMedia:function(a,b){var c=a.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);c=c.concat(this.doExtendChaining(c,a.allExtends)),this.allExtendsStack.push(c)},visitMediaOut:function(a){var b=this.allExtendsStack.length-1;this.allExtendsStack.length=b},visitAtRule:function(a,b){var c=a.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);c=c.concat(this.doExtendChaining(c,a.allExtends)),this.allExtendsStack.push(c)},visitAtRuleOut:function(a){var b=this.allExtendsStack.length-1;this.allExtendsStack.length=b}},b.exports=i},{"../logger":39,"../tree":67,"../utils":89,"./visitor":97}],91:[function(a,b,c){function d(a){this.imports=[],this.variableImports=[],this._onSequencerEmpty=a,this._currentDepth=0}d.prototype.addImport=function(a){var b=this,c={callback:a,args:null,isReady:!1};return this.imports.push(c),function(){c.args=Array.prototype.slice.call(arguments,0),c.isReady=!0,b.tryRun()}},d.prototype.addVariableImport=function(a){this.variableImports.push(a)},d.prototype.tryRun=function(){this._currentDepth++;try{for(;;){for(;this.imports.length>0;){var a=this.imports[0];if(!a.isReady)return;this.imports=this.imports.slice(1),a.callback.apply(null,a.args)}if(0===this.variableImports.length)break;var b=this.variableImports[0];this.variableImports=this.variableImports.slice(1),b()}}finally{this._currentDepth--}0===this._currentDepth&&this._onSequencerEmpty&&this._onSequencerEmpty()},b.exports=d},{}],92:[function(a,b,c){var d=a("../contexts"),e=a("./visitor"),f=a("./import-sequencer"),g=a("../utils"),h=function(a,b){this._visitor=new e(this),this._importer=a,this._finish=b,this.context=new d.Eval,this.importCount=0,this.onceFileDetectionMap={},this.recursionDetector={},this._sequencer=new f(this._onSequencerEmpty.bind(this))};h.prototype={isReplacing:!1,run:function(a){try{this._visitor.visit(a)}catch(b){this.error=b}this.isFinished=!0,this._sequencer.tryRun()},_onSequencerEmpty:function(){this.isFinished&&this._finish(this.error)},visitImport:function(a,b){var c=a.options.inline;if(!a.css||c){var e=new d.Eval(this.context,g.copyArray(this.context.frames)),f=e.frames[0];this.importCount++,a.isVariableImport()?this._sequencer.addVariableImport(this.processImportNode.bind(this,a,e,f)):this.processImportNode(a,e,f)}b.visitDeeper=!1},processImportNode:function(a,b,c){var d,e=a.options.inline;try{d=a.evalForImport(b)}catch(f){f.filename||(f.index=a.getIndex(),f.filename=a.fileInfo().filename),a.css=!0,a.error=f}if(!d||d.css&&!e)this.importCount--,this.isFinished&&this._sequencer.tryRun();else{d.options.multiple&&(b.importMultiple=!0);for(var g=void 0===d.css,h=0;h<c.rules.length;h++)if(c.rules[h]===a){c.rules[h]=d;break}var i=this.onImported.bind(this,d,b),j=this._sequencer.addImport(i);this._importer.push(d.getPath(),g,d.fileInfo(),d.options,j)}},onImported:function(a,b,c,d,e,f){c&&(c.filename||(c.index=a.getIndex(),c.filename=a.fileInfo().filename),this.error=c);var g=this,h=a.options.inline,i=a.options.isPlugin,j=a.options.optional,k=e||f in g.recursionDetector;if(b.importMultiple||(a.skip=!!k||function(){return f in g.onceFileDetectionMap||(g.onceFileDetectionMap[f]=!0,!1)}),!f&&j&&(a.skip=!0),d&&(a.root=d,a.importedFilename=f,!h&&!i&&(b.importMultiple||!k))){g.recursionDetector[f]=!0;var l=this.context;this.context=b;try{this._visitor.visit(d)}catch(c){this.error=c}this.context=l}g.importCount--,g.isFinished&&g._sequencer.tryRun()},visitDeclaration:function(a,b){"DetachedRuleset"===a.value.type?this.context.frames.unshift(a):b.visitDeeper=!1},visitDeclarationOut:function(a){"DetachedRuleset"===a.value.type&&this.context.frames.shift()},visitAtRule:function(a,b){this.context.frames.unshift(a)},visitAtRuleOut:function(a){this.context.frames.shift()},visitMixinDefinition:function(a,b){this.context.frames.unshift(a)},visitMixinDefinitionOut:function(a){this.context.frames.shift()},visitRuleset:function(a,b){this.context.frames.unshift(a)},visitRulesetOut:function(a){this.context.frames.shift()},visitMedia:function(a,b){this.context.frames.unshift(a.rules[0])},visitMediaOut:function(a){this.context.frames.shift()}},b.exports=h},{"../contexts":13,"../utils":89,"./import-sequencer":91,"./visitor":97}],93:[function(a,b,c){var d={Visitor:a("./visitor"),ImportVisitor:a("./import-visitor"),MarkVisibleSelectorsVisitor:a("./set-tree-visibility-visitor"),ExtendVisitor:a("./extend-visitor"),JoinSelectorVisitor:a("./join-selector-visitor"),ToCSSVisitor:a("./to-css-visitor")};b.exports=d},{"./extend-visitor":90,"./import-visitor":92,"./join-selector-visitor":94,"./set-tree-visibility-visitor":95,"./to-css-visitor":96,"./visitor":97}],94:[function(a,b,c){var d=a("./visitor"),e=function(){this.contexts=[[]],this._visitor=new d(this)};e.prototype={run:function(a){return this._visitor.visit(a)},visitDeclaration:function(a,b){b.visitDeeper=!1},visitMixinDefinition:function(a,b){b.visitDeeper=!1},visitRuleset:function(a,b){var c,d=this.contexts[this.contexts.length-1],e=[];this.contexts.push(e),a.root||(c=a.selectors,c&&(c=c.filter(function(a){return a.getIsOutput()}),a.selectors=c.length?c:c=null,c&&a.joinSelectors(e,d,c)),c||(a.rules=null),a.paths=e)},visitRulesetOut:function(a){this.contexts.length=this.contexts.length-1},visitMedia:function(a,b){var c=this.contexts[this.contexts.length-1];a.rules[0].root=0===c.length||c[0].multiMedia},visitAtRule:function(a,b){var c=this.contexts[this.contexts.length-1];a.rules&&a.rules.length&&(a.rules[0].root=a.isRooted||0===c.length||null)}},b.exports=e},{"./visitor":97}],95:[function(a,b,c){var d=function(a){this.visible=a};d.prototype.run=function(a){this.visit(a)},d.prototype.visitArray=function(a){if(!a)return a;var b,c=a.length;for(b=0;b<c;b++)this.visit(a[b]);return a},d.prototype.visit=function(a){return a?a.constructor===Array?this.visitArray(a):!a.blocksVisibility||a.blocksVisibility()?a:(this.visible?a.ensureVisibility():a.ensureInvisibility(),a.accept(this),a):a},b.exports=d},{}],96:[function(a,b,c){var d=a("../tree"),e=a("./visitor"),f=function(a){this._visitor=new e(this),this._context=a};f.prototype={containsSilentNonBlockedChild:function(a){var b;if(!a)return!1;for(var c=0;c<a.length;c++)if(b=a[c],b.isSilent&&b.isSilent(this._context)&&!b.blocksVisibility())return!0;return!1},keepOnlyVisibleChilds:function(a){a&&a.rules&&(a.rules=a.rules.filter(function(a){return a.isVisible()}))},isEmpty:function(a){return!a||!a.rules||0===a.rules.length},hasVisibleSelector:function(a){return!(!a||!a.paths)&&a.paths.length>0},resolveVisibility:function(a,b){if(!a.blocksVisibility()){if(this.isEmpty(a)&&!this.containsSilentNonBlockedChild(b))return;return a}var c=a.rules[0];if(this.keepOnlyVisibleChilds(c),!this.isEmpty(c))return a.ensureVisibility(),a.removeVisibilityBlock(),a},isVisibleRuleset:function(a){return!!a.firstRoot||!this.isEmpty(a)&&!(!a.root&&!this.hasVisibleSelector(a))}};var g=function(a){this._visitor=new e(this),this._context=a,this.utils=new f(a)};g.prototype={isReplacing:!0,run:function(a){return this._visitor.visit(a)},visitDeclaration:function(a,b){if(!a.blocksVisibility()&&!a.variable)return a},visitMixinDefinition:function(a,b){a.frames=[]},visitExtend:function(a,b){},visitComment:function(a,b){if(!a.blocksVisibility()&&!a.isSilent(this._context))return a},visitMedia:function(a,b){var c=a.rules[0].rules;return a.accept(this._visitor),b.visitDeeper=!1,this.utils.resolveVisibility(a,c)},visitImport:function(a,b){if(!a.blocksVisibility())return a},visitAtRule:function(a,b){return a.rules&&a.rules.length?this.visitAtRuleWithBody(a,b):this.visitAtRuleWithoutBody(a,b)},visitAnonymous:function(a,b){if(!a.blocksVisibility())return a.accept(this._visitor),a},visitAtRuleWithBody:function(a,b){function c(a){var b=a.rules;return 1===b.length&&(!b[0].paths||0===b[0].paths.length)}function d(a){var b=a.rules;return c(a)?b[0].rules:b}var e=d(a);return a.accept(this._visitor),b.visitDeeper=!1,this.utils.isEmpty(a)||this._mergeRules(a.rules[0].rules),this.utils.resolveVisibility(a,e)},visitAtRuleWithoutBody:function(a,b){if(!a.blocksVisibility()){if("@charset"===a.name){if(this.charset){if(a.debugInfo){var c=new d.Comment("/* "+a.toCSS(this._context).replace(/\n/g,"")+" */\n");return c.debugInfo=a.debugInfo,this._visitor.visit(c)}return}this.charset=!0}return a}},checkValidNodes:function(a,b){if(a)for(var c=0;c<a.length;c++){var e=a[c];if(b&&e instanceof d.Declaration&&!e.variable)throw{message:"Properties must be inside selector blocks. They cannot be in the root",index:e.getIndex(),filename:e.fileInfo()&&e.fileInfo().filename};if(e instanceof d.Call)throw{message:"Function '"+e.name+"' is undefined",index:e.getIndex(),filename:e.fileInfo()&&e.fileInfo().filename};if(e.type&&!e.allowRoot)throw{message:e.type+" node returned by a function is not valid here",index:e.getIndex(),filename:e.fileInfo()&&e.fileInfo().filename}}},visitRuleset:function(a,b){var c,d=[];if(this.checkValidNodes(a.rules,a.firstRoot),a.root)a.accept(this._visitor),b.visitDeeper=!1;else{this._compileRulesetPaths(a);for(var e=a.rules,f=e?e.length:0,g=0;g<f;)c=e[g],c&&c.rules?(d.push(this._visitor.visit(c)),e.splice(g,1),f--):g++;f>0?a.accept(this._visitor):a.rules=null,b.visitDeeper=!1}return a.rules&&(this._mergeRules(a.rules),this._removeDuplicateRules(a.rules)),this.utils.isVisibleRuleset(a)&&(a.ensureVisibility(),d.splice(0,0,a)),1===d.length?d[0]:d},_compileRulesetPaths:function(a){a.paths&&(a.paths=a.paths.filter(function(a){var b;for(" "===a[0].elements[0].combinator.value&&(a[0].elements[0].combinator=new d.Combinator("")),b=0;b<a.length;b++)if(a[b].isVisible()&&a[b].getIsOutput())return!0;return!1}))},_removeDuplicateRules:function(a){if(a){var b,c,e,f={};for(e=a.length-1;e>=0;e--)if(c=a[e],c instanceof d.Declaration)if(f[c.name]){b=f[c.name],b instanceof d.Declaration&&(b=f[c.name]=[f[c.name].toCSS(this._context)]);var g=c.toCSS(this._context);b.indexOf(g)!==-1?a.splice(e,1):b.push(g)}else f[c.name]=c}},_mergeRules:function(a){if(a){for(var b={},c=[],e=0;e<a.length;e++){var f=a[e];if(f.merge){var g=f.name;b[g]?a.splice(e--,1):c.push(b[g]=[]),b[g].push(f)}}c.forEach(function(a){if(a.length>0){var b=a[0],c=[],e=[new d.Expression(c)];a.forEach(function(a){"+"===a.merge&&c.length>0&&e.push(new d.Expression(c=[])),c.push(a.value),b.important=b.important||a.important}),b.value=new d.Value(e)}})}}},b.exports=g},{"../tree":67,"./visitor":97}],97:[function(a,b,c){function d(a){return a}function e(a,b){var c,d;for(c in a)switch(d=a[c],typeof d){case"function":d.prototype&&d.prototype.type&&(d.prototype.typeIndex=b++);break;case"object":b=e(d,b)}return b}var f=a("../tree"),g={visitDeeper:!0},h=!1,i=function(a){this._implementation=a,this._visitInCache={},this._visitOutCache={},h||(e(f,1),h=!0)};i.prototype={visit:function(a){if(!a)return a;var b=a.typeIndex;if(!b)return a.value&&a.value.typeIndex&&this.visit(a.value),a;var c,e=this._implementation,f=this._visitInCache[b],h=this._visitOutCache[b],i=g;if(i.visitDeeper=!0,f||(c="visit"+a.type,f=e[c]||d,h=e[c+"Out"]||d,this._visitInCache[b]=f,this._visitOutCache[b]=h),f!==d){var j=f.call(e,a,i);a&&e.isReplacing&&(a=j)}return i.visitDeeper&&a&&a.accept&&a.accept(this),h!=d&&h.call(e,a),a},visitArray:function(a,b){if(!a)return a;var c,d=a.length;if(b||!this._implementation.isReplacing){for(c=0;c<d;c++)this.visit(a[c]);return a}var e=[];for(c=0;c<d;c++){var f=this.visit(a[c]);void 0!==f&&(f.splice?f.length&&this.flatten(f,e):e.push(f))}return e;
},flatten:function(a,b){b||(b=[]);var c,d,e,f,g,h;for(d=0,c=a.length;d<c;d++)if(e=a[d],void 0!==e)if(e.splice)for(g=0,f=e.length;g<f;g++)h=e[g],void 0!==h&&(h.splice?h.length&&this.flatten(h,b):b.push(h));else b.push(e);return b}},b.exports=i},{"../tree":67}],98:[function(a,b,c){"use strict";function d(){if(i.length)throw i.shift()}function e(a){var b;b=h.length?h.pop():new f,b.task=a,g(b)}function f(){this.task=null}var g=a("./raw"),h=[],i=[],j=g.makeRequestCallFromTimer(d);b.exports=e,f.prototype.call=function(){try{this.task.call()}catch(a){e.onerror?e.onerror(a):(i.push(a),j())}finally{this.task=null,h[h.length]=this}}},{"./raw":99}],99:[function(a,b,c){(function(a){"use strict";function c(a){h.length||(g(),i=!0),h[h.length]=a}function d(){for(;j<h.length;){var a=j;if(j+=1,h[a].call(),j>k){for(var b=0,c=h.length-j;b<c;b++)h[b]=h[b+j];h.length-=j,j=0}}h.length=0,j=0,i=!1}function e(a){var b=1,c=new m(a),d=document.createTextNode("");return c.observe(d,{characterData:!0}),function(){b=-b,d.data=b}}function f(a){return function(){function b(){clearTimeout(c),clearInterval(d),a()}var c=setTimeout(b,0),d=setInterval(b,50)}}b.exports=c;var g,h=[],i=!1,j=0,k=1024,l="undefined"!=typeof a?a:self,m=l.MutationObserver||l.WebKitMutationObserver;g="function"==typeof m?e(d):f(d),c.requestFlush=g,c.makeRequestCallFromTimer=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],100:[function(a,b,c){var d=function(){"use strict";function a(a,b){return null!=b&&a instanceof b}function b(c,d,e,f,i){function l(c,e){if(null===c)return null;if(0===e)return c;var p,q;if("object"!=typeof c)return c;if(a(c,h))p=new h;else if(a(c,j))p=new j;else if(a(c,k))p=new k(function(a,b){c.then(function(b){a(l(b,e-1))},function(a){b(l(a,e-1))})});else if(b.__isArray(c))p=[];else if(b.__isRegExp(c))p=new RegExp(c.source,g(c)),c.lastIndex&&(p.lastIndex=c.lastIndex);else if(b.__isDate(c))p=new Date(c.getTime());else{if(o&&Buffer.isBuffer(c))return p=Buffer.allocUnsafe?Buffer.allocUnsafe(c.length):new Buffer(c.length),c.copy(p),p;a(c,Error)?p=Object.create(c):"undefined"==typeof f?(q=Object.getPrototypeOf(c),p=Object.create(q)):(p=Object.create(f),q=f)}if(d){var r=m.indexOf(c);if(r!=-1)return n[r];m.push(c),n.push(p)}a(c,h)&&c.forEach(function(a,b){var c=l(b,e-1),d=l(a,e-1);p.set(c,d)}),a(c,j)&&c.forEach(function(a){var b=l(a,e-1);p.add(b)});for(var s in c){var t;q&&(t=Object.getOwnPropertyDescriptor(q,s)),t&&null==t.set||(p[s]=l(c[s],e-1))}if(Object.getOwnPropertySymbols)for(var u=Object.getOwnPropertySymbols(c),s=0;s<u.length;s++){var v=u[s],w=Object.getOwnPropertyDescriptor(c,v);(!w||w.enumerable||i)&&(p[v]=l(c[v],e-1),w.enumerable||Object.defineProperty(p,v,{enumerable:!1}))}if(i)for(var x=Object.getOwnPropertyNames(c),s=0;s<x.length;s++){var y=x[s],w=Object.getOwnPropertyDescriptor(c,y);w&&w.enumerable||(p[y]=l(c[y],e-1),Object.defineProperty(p,y,{enumerable:!1}))}return p}"object"==typeof d&&(e=d.depth,f=d.prototype,i=d.includeNonEnumerable,d=d.circular);var m=[],n=[],o="undefined"!=typeof Buffer;return"undefined"==typeof d&&(d=!0),"undefined"==typeof e&&(e=1/0),l(c,e)}function c(a){return Object.prototype.toString.call(a)}function d(a){return"object"==typeof a&&"[object Date]"===c(a)}function e(a){return"object"==typeof a&&"[object Array]"===c(a)}function f(a){return"object"==typeof a&&"[object RegExp]"===c(a)}function g(a){var b="";return a.global&&(b+="g"),a.ignoreCase&&(b+="i"),a.multiline&&(b+="m"),b}var h;try{h=Map}catch(i){h=function(){}}var j;try{j=Set}catch(i){j=function(){}}var k;try{k=Promise}catch(i){k=function(){}}return b.clonePrototype=function(a){if(null===a)return null;var b=function(){};return b.prototype=a,new b},b.__objToStr=c,b.__isDate=d,b.__isArray=e,b.__isRegExp=f,b.__getRegExpFlags=g,b}();"object"==typeof b&&b.exports&&(b.exports=d)},{}],101:[function(a,b,c){"use strict";function d(){}function e(a){try{return a.then}catch(b){return r=b,s}}function f(a,b){try{return a(b)}catch(c){return r=c,s}}function g(a,b,c){try{a(b,c)}catch(d){return r=d,s}}function h(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,a!==d&&p(a,this)}function i(a,b,c){return new a.constructor(function(e,f){var g=new h(d);g.then(e,f),j(a,new o(b,c,g))})}function j(a,b){for(;3===a._65;)a=a._55;return h._37&&h._37(a),0===a._65?0===a._40?(a._40=1,void(a._72=b)):1===a._40?(a._40=2,void(a._72=[a._72,b])):void a._72.push(b):void k(a,b)}function k(a,b){q(function(){var c=1===a._65?b.onFulfilled:b.onRejected;if(null===c)return void(1===a._65?l(b.promise,a._55):m(b.promise,a._55));var d=f(c,a._55);d===s?m(b.promise,r):l(b.promise,d)})}function l(a,b){if(b===a)return m(a,new TypeError("A promise cannot be resolved with itself."));if(b&&("object"==typeof b||"function"==typeof b)){var c=e(b);if(c===s)return m(a,r);if(c===a.then&&b instanceof h)return a._65=3,a._55=b,void n(a);if("function"==typeof c)return void p(c.bind(b),a)}a._65=1,a._55=b,n(a)}function m(a,b){a._65=2,a._55=b,h._87&&h._87(a,b),n(a)}function n(a){if(1===a._40&&(j(a,a._72),a._72=null),2===a._40){for(var b=0;b<a._72.length;b++)j(a,a._72[b]);a._72=null}}function o(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function p(a,b){var c=!1,d=g(a,function(a){c||(c=!0,l(b,a))},function(a){c||(c=!0,m(b,a))});c||d!==s||(c=!0,m(b,r))}var q=a("asap/raw"),r=null,s={};b.exports=h,h._37=null,h._87=null,h._61=d,h.prototype.then=function(a,b){if(this.constructor!==h)return i(this,a,b);var c=new h(d);return j(this,new o(a,b,c)),c}},{"asap/raw":99}],102:[function(a,b,c){"use strict";function d(a){var b=new e(e._61);return b._65=1,b._55=a,b}var e=a("./core.js");b.exports=e;var f=d(!0),g=d(!1),h=d(null),i=d(void 0),j=d(0),k=d("");e.resolve=function(a){if(a instanceof e)return a;if(null===a)return h;if(void 0===a)return i;if(a===!0)return f;if(a===!1)return g;if(0===a)return j;if(""===a)return k;if("object"==typeof a||"function"==typeof a)try{var b=a.then;if("function"==typeof b)return new e(b.bind(a))}catch(c){return new e(function(a,b){b(c)})}return d(a)},e.all=function(a){var b=Array.prototype.slice.call(a);return new e(function(a,c){function d(g,h){if(h&&("object"==typeof h||"function"==typeof h)){if(h instanceof e&&h.then===e.prototype.then){for(;3===h._65;)h=h._55;return 1===h._65?d(g,h._55):(2===h._65&&c(h._55),void h.then(function(a){d(g,a)},c))}var i=h.then;if("function"==typeof i){var j=new e(i.bind(h));return void j.then(function(a){d(g,a)},c)}}b[g]=h,0===--f&&a(b)}if(0===b.length)return a([]);for(var f=b.length,g=0;g<b.length;g++)d(g,b[g])})},e.reject=function(a){return new e(function(b,c){c(a)})},e.race=function(a){return new e(function(b,c){a.forEach(function(a){e.resolve(a).then(b,c)})})},e.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":101}],103:[function(a,b,c){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(a,b){var c=arguments.length?this.then.apply(this,arguments):this;c.then(null,function(a){setTimeout(function(){throw a},0)})})},{}],104:[function(a,b,c){a("asap");"undefined"==typeof Promise&&(Promise=a("./lib/core.js"),a("./lib/es6-extensions.js")),a("./polyfill-done.js")},{"./lib/core.js":101,"./lib/es6-extensions.js":102,"./polyfill-done.js":103,asap:98}]},{},[2])(2)});
/* ==Core.710.pkg.deploy================ */
/* ==JJInit.640.class================ */
/**
 * @classdesc JJ 모듈 관리를 위한 클래스
 */
class JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      activeAop: false,
      version: '640'
    };
  }

  /**
   * @desc 모듈을 생성한다.
   * @example -
   */
  _render() {}

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {}

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {}

  /**
   * @desc AopException 이벤트를 처리한다.
   * @example -
   */
  _onAopException() {
    let extFunctions = ['constructor', 'value'];

    Object.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach(
      propertyName => {
        if (
          !extFunctions.includes(propertyName) &&
          typeof this[propertyName] == 'function'
        ) {
          let orgName = '_org_' + propertyName;

          this[orgName] = this[propertyName];

          Object.defineProperty(this, orgName, {
            enumerable: false,
            configurable: false
          });

          this[propertyName] = (...params) => {
            try {
              return this[orgName](...params);
            } catch (ex) {
              if (ex.constructor.name == 'JJAopException') {
                throw new JJAopException(propertyName, this, ex);
              } else if (ex.constructor.name == 'JJBizStop') {
                throw new JJBizStop(ex);
              } else {
                throw new JJAopException(propertyName, this, ex);
              }
            }
          };
        }
      }
    );
  }

  /**
   * @desc 생성자
   * @param {Object} - 기본 옵션
   * @example -
   */
  constructor(options) {
    this.options = Object.assign(this._defaultOption(), options);
    this._render();
    this._setEvent();
    this.init();
  }

  /**
   * @desc 옵션을 설정한다.
   * @param {Object} - 대상 옵션
   * @return {Object} - 변경된 옵션
   * @example -
   */
  setOptions(options) {
    Object.assign(this.options, options);

    return this.options;
  }

  /**
   * @desc 모듈을 초기화한다.
   * @param {Object} - 기본 옵션
   * @example -
   */
  init(options) {}

  /**
   * @desc 모듈을 삭제한다.
   * @example -
   */
  destroy() {
    this._clearEvent();
  }
}

/**
 * @classdesc JJ 엘리먼트 관리를 위한 클래스
 */
class JJElement extends HTMLElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      require: [],
      activeAop: false,
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {}

  /**
   * @desc 폼의 이벤트를 설정한다.
   * @example -
   */
  _setFromEvent() {}

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {}

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {}

  /**
   * @desc jj-id, id 속성을 가진 엘리먼트를 설정한다.
   * @example -
   */
  _setElementId() {
    this.querySelectorAll('[jj-id],[id]').forEach(el => {
      let id = el.id || el.getAttribute('jj-id');

      if (id) {
        this[id] = el;
      }
    });
  }

  /**
   * @desc 엘리먼트의 jj-commend에서 메소드와 파라미터를 추출하여 등록한다.
   * @param {String} - 대상 커멘드 문자열
   * @param {Event} - 이벤트
   * @example -
   */
  _cmdParaApply(cmdString, event) {
    const methodReg = new RegExp(/\w+|\(.+\)/, 'gm');
    const paraReg = new RegExp(/[a-zA-Z0-9가-힣-%/#._() ]+/, 'gm');

    let method, paras;
    let methodSplit = cmdString.match(methodReg);

    if (methodSplit) {
      method = methodSplit[0];

      if (this[method]) {
        //event.preventDefault();
        event.stopPropagation();
        event.stopImmediatePropagation();

        let para = methodSplit[1];

        if (para) {
          para = para.startsWith('(') ? para.substr(1, 200) : para;
          para = para.endsWith(')') ? para.substr(0, para.length - 1) : para;
          paras = para.match(paraReg).map(p => {
            let ret;

            switch (p) {
              case 'e':
                ret = event;

                break;
              case 'null':
                ret = null;

                break;
              default:
                ret = p;
            }

            return ret;
          });

          paras.push(event);

          Reflect.apply(this[method], this, paras);
        } else {
          Reflect.apply(this[method], this, [event]);
        }
      }
    }
  }

  /**
   * @desc AopException 이벤트를 처리한다.
   * @throw {JJAopException|JJBizStop} - 이벤트 처리에 대한 예외
   * @return {Function} - 지정된 함수 호출
   * @example -
   */
  _onAopException() {
    let extFunctions = ['constructor', 'value'];

    Object.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach(
      propertyName => {
        if (
          !extFunctions.includes(propertyName) &&
          typeof this[propertyName] == 'function'
        ) {
          let orgName = '_org_' + propertyName;

          this[orgName] = this[propertyName];

          Object.defineProperty(this, orgName, {
            enumerable: false,
            configurable: false
          });

          this[propertyName] = (...params) => {
            try {
              return this[orgName](...params);
            } catch (ex) {
              if (ex.constructor.name == 'JJAopException') {
                throw new JJAopException(propertyName, this, ex);
              } else if (ex.constructor.name == 'JJBizStop') {
                throw new JJBizStop(ex);
              } else {
                throw new JJAopException(propertyName, this, ex);
              }
            }
          };
        }
      }
    );
  }

  /**
   * @desc 엘리먼트를 삭제한다.
   * @example -
   */
  _destroy() {
    this._clearEvent();
    this.$empty();
  }

  /**
   * @desc 생성자
   * @example -
   */
  constructor() {
    super();
    this.options = Object.assign(this._defaultOption(), this.dataset);

    if (this.options.activeAop) {
      this._onAopException();
    }

    this.requirePromise = new Promise((resolv, reject) => {
      this.requireResolv = resolv;
    });

    if (this.options.require) {
      Promise.all(
        this.options.require.map(item => Jinja.require.load(item))
      ).then(values => this.requireResolv(values));
    }
  }

  /**
   * @desc 엘리먼트 옵션을 설정한다.
   * @param {Object} - 대상 옵션
   * @return {Object} - 변경된 옵션
   * @example -
   */
  setOptions(options) {
    Object.assign(this.options, options);
    return this.options;
  }

  /**
   * @desc 엘리먼트를 초기화한다.
   * @example -
   */
  init() {}

  /**
   * @desc 엘리먼트를 삭제한다.
   * @example -
   */
  destroy() {
    this.remove();
  }

  /**
   * @desc 돔연결 이벤트 콜백을 처리한다.
   * @example -
   */
  connectedCallback() {
    this.containerForm = this.closest(`.jj-form`);
    this._render();
    this._setElementId();
    this._setFromEvent();
    this._setEvent();
    this.init();
  }

  /**
   * @desc 엘리먼트를 Dom에 연결해제 후처리를 한다.
   * @example -
   */
  disconnectedCallback() {
    this._destroy();
  }

  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {}

  /**
   * @desc 엘리먼트 위치이동 이벤트 콜백을 처리한다.
   * @param {Document} - 이전문서
   * @param {Document} - 대상문서
   * @example -
   */
  adoptedCallback(oldDoc, newDoc) {}
}

/**
 * @classdesc JJ 컴포넌트 관리를 위한 클래스
 */
class JJElComponent {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      activeAop: false,
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @example -
   */
  _render() {}

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {}

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {}

  /**
   * @desc AopException 발생시 후처리를 한다.
   * @throw {JJAopException|JJBizStop} - 
   * @return {} - 
   * @example -
   */
  _onAopException() {
    let extFunctions = ['constructor', 'value'];

    Object.getOwnPropertyNames(Object.getPrototypeOf(this)).forEach(
      propertyName => {
        if (
          !extFunctions.includes(propertyName) &&
          typeof this[propertyName] == 'function'
        ) {
          let orgName = '_org_' + propertyName;

          this[orgName] = this[propertyName];

          Object.defineProperty(this, orgName, {
            enumerable: false,
            configurable: false
          });

          this[propertyName] = (...params) => {
            try {
              return this[orgName](...params);
            } catch (ex) {
              if (ex.constructor.name == 'JJAopException') {
                throw new JJAopException(propertyName, this, ex);
              } else if (ex.constructor.name == 'JJBizStop') {
                throw new JJBizStop(ex);
              } else {
                throw new JJAopException(propertyName, this, ex);
              }
            }
          };
        }
      }
    );
  }

  /**
   * @desc 생성자
   * @param {Element} - 대상 엘리먼트
   * @param {Object} - 옵션
   * @example -
   */
  constructor(el, options) {
    this.options = Object.assign(this._defaultOption(), options);

    if (this.options.activeAop) {
      this._onAopException();
    }

    this.el = el;

    this._render();
    this._setEvent();
    this.init();
  }

  /**
   * @desc 옵션을 설정한다.
   * @param {Object} - 옵션
   * @return {Object} - 변경된 옵션
   * @example -
   */
  setOptions(options) {
    Object.assign(this.options, options);

    return this.options;
  }

  /**
   * @desc 컴포넌트를 초기화한다.
   * @example -
   */
  init() {}

  /**
   * @desc 컴포넌트를 삭제한다.
   * @example -
   */
  destroy() {
    this._clearEvent();
    this.el = null;
  }
}

/**
 * @classdesc Aop 예외처리 관리를 위한 클래스
 */
class JJAopException extends Error {
  /**
   * @desc 생성자
   * @param {Function} - 대상 메소드
   * @param {Class} - 대상 클래스
   * @param {...*} - 기타 파라미터
   * @example -
   */
  constructor(method, sourceClass, ...params) {
    super(...params);

    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, JJAopException);
    }

    this.innerEx = params[0];
    this.method = method;
    this.sourceClass = sourceClass;
  }
}
/* ==JJApplication.640.class================ */

/**
 * @constant {Class} Jinja - 모듈을 담을 객체
 */
var Jinja;

if (!APP_MODE) {
  /**
   * @constant {String} - 어플리케이션 모드 구분값
   */
  var APP_MODE = new URL(document.location).searchParams.get('m') || 'run';
}

/**
 * @constant {String} - 디버깅 모드 구분값
 */
const DEBUG_MODE = new URL(document.location).searchParams.get('d') == 'y';

/**
 * @constant {String} - 어드민 모드 구분값
 */
const ADMIN_MODE = new URL(document.location).searchParams.get('a') == 'n';

/**
 * @constant {String} - 리로드 주기 구분값
 */
const RELOAD_CYCLE = new URL(document.location).searchParams.get('r');

/**
 * @constant {String} CDN_SERVER - CDN 서버 경로
 */
const CDN_SERVER = '';

/**
 * @constant {String} - 권한 구분값
 * @default admin,dba
 */
const ROLE = 'admin,dba';

/**
 * 개발모드 설정정보 
 */
if(location.host.startsWith("dev") && workspaceMeta.options.dev){
  objAssign(workspaceMeta.options, workspaceMeta.options.dev);
}
 
function objAssign(comp, obj){
  Object.keys(obj).forEach(key=>{
    
    if(typeof(comp[key]) == "string"){
      comp[key] = obj[key];
    } else if(Array.isArray(comp[key])){
      comp[key] = obj[key];
    } else {
      objAssign(comp[key], obj[key]);
    }
  })
}


/**
 * @classdesc 어플리케이션 관리를 위한 클래스
 */
class JJApplication extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   */
  _defaultOption() {
    return {
      moduleOption: {},
      objClass: 'jj',
      appDomain: workspaceMeta.options.appInfo.siteDomain,
      activeAop: false,
      version: '640'
    };
  }

  /**
   * @desc 어플리케이션을 초기화한다.
   * @example -
   */
  init() {
    this.classList.add(this.options.objClass);
    
    this.Jinja = Jinja = this;
    this.modulePromise = {};
    this.modulePromiseResolv = {};
    if(workspaceMeta.options.appInfo.siteDomain){
      document.domain = workspaceMeta.options.appInfo.siteDomain||"appspeed.net";
    }    
    if(workspaceMeta.options.style && workspaceMeta.options.style.colorClass){
      this.classList.add(workspaceMeta.options.style.colorClass);
    }
  }

  /**
   * @desc 지정한 모듈을 추가한다.
   * @param {String} - 모듈명 
   * @param {Class} - 모듈
   * @param {Object} - 옵션
   * @example -
   */
  addModule(name, moduleClass, options) {
    let _options = Object.assign(
      {
        app: this,
        moduleName: name,
      },
      this.options.moduleOption[name],
      options
    );

    if (_options.dependency) {
      if (!this.modulePromise[_options.dependency]) {
        this.modulePromise[_options.dependency] = new Promise(
          (resolv, reject) => {
            this.modulePromiseResolv[_options.dependency] = resolv;
          }
        );
      }

      this.modulePromise[_options.dependency].then(() => {
        this[name] = new moduleClass(_options);

        if (this.modulePromiseResolv[name]) {
          this.modulePromiseResolv[name]();
        }
      });
    } else {
      this[name] = new moduleClass(_options);

      if (this.modulePromiseResolv[name]) {
        this.modulePromiseResolv[name]();
      }
    }
  }

  /**
   * @desc 지정한 모듈을 삭제한다.
   * @param {String} - 모듈명
   * @example -
   */
  removeModule(name) {
    this[name].destroy();
  }

  /**
   * 설정된 파일경로가 있거나 시작이 [/] 인경우에 cdn서버의 패스로 전환
   */
  getCdnPath(path){
    let result = workspaceMeta.options.appInfo.cdnServer||"";
    
    if (path.startsWith("/")){
      result = result.concat(path);
    } else if(!path){
      result = result;
    } else {
      result = path;
    }
    return result;
  }
}


customElements.define('jj-application', JJApplication);


if (!Jinja) {
  let el = document.createElement('jj-application');

  document.body.appendChild(el);
}
/* ==JJLog.640.class================ */

/**
 * @classdesc JJ 로그 관리를 위한 클래스
 */
class JJLog extends JJModule {
  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._consolLogwarn();

    this.oldDebug = console.debug;
    this.oldInfo = console.info;
    this.oldWarn = console.warn;
    this.oldError = console.error;
    this.oldLog = console.log;

    console.debug = this._debug.bind(this);
    console.info = this._info.bind(this);
    console.warn = this._warn.bind(this);
    console.error = this._error.bind(this);
    console.log = this._log.bind(this);

    console.todo = this._todo.bind(this);

    this.options.isActive = true;
  }

  /**
   * @desc console창에 AppSpeed 불법사용 경고 문구를 출력한다.
   * @example -
   */
  _consolLogwarn() {
    console.info(
      '%c AppSpeed의 소스를 이용하거나 개발모드에서 복사하는 행위는 불법으로 간주합니다.',
      'background: red; color: yellow; font-size: x-large'
    );
  }

  /**
   * @desc JJLog 헤더 정보를 반환한다.
   * @return {Array} - 로그 헤더 정보
   * @example -
   */
  _logHead() {
    return [new Date().toLocaleString(), location.href];
  }

  /**
   * @desc JJLog debug 로그를 남긴다.
   * @param {...*} - 기타 파라미터
   * @example -
   */
  _debug(...params) {
    this.oldDebug.apply(console, params);

    console.trace();
  }

  /**
   * @desc JJLog info 로그를 남긴다.
   * @param {...*} - 기타 파라미터
   * @example -
   */
  _info(...params) {
    if (this.options.isActive) {
      this.oldInfo.apply(console, params);
    }
  }

  /**
   * @desc JJLog warn 로그를 남긴다.
   * @param {...*} - 기타 파라미터
   * @example -
   */
  _warn(...params) {
    if (this.options.isActive) {
      console.group();

      this.oldInfo.apply(console, this._logHead());
      this.oldWarn.apply(console, params);

      console.trace();
      console.groupEnd();
    }
  }

  /**
   * @desc JJLog error 로그를 남긴다.
   * @param {...*} - 기타 파라미터
   * @example -
   */
  _error(...params) {
    if (params[0].type == 'jjHeeClose') return;

    console.group();

    this.oldInfo.apply(console, this._logHead());
    this.oldError.apply(console, params);

    console.groupEnd();
  }

  /**
   * @desc JJLog log 로그를 남긴다.
   * @param {...*} - 기타 파라미터
   * @example -
   */
  _log(...params) {
    this.oldLog.apply(console, params);
  }

  /**
   * @desc JJLog log 로그를 남기고 Alert창을 호출한다.
   * @param {...*} - 기타 파라미터
   * @example -
   */
  _alert(...params) {
    if (this.options.isActive) {
      this._log(params);
      this.oldAlert.apply(window, [params.join('\n')]);
    }
  }

  /**
   * @desc todo 내용을 warn 로그로 남긴다.
   * @param {...*} - 기타 파라미터
   * @example -
   */
  _todo(...params) {
    if (this.options.isActive) {
      console.group();

      this.oldInfo.apply(console, this._logHead());
      this.oldWarn.apply(console, params);

      console.trace();
      console.groupEnd();
    }
  }

  /**
   * @desc JJLog의 활성화여부를 설정한다.
   * @param {Boolean} - 활성화여부
   * @example -
   */
  setActive(isActive) {
    this.options.isActive = isActive;
  }

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJLog');
  }
}

Jinja.addModule('log', JJLog);
/* ==JJEvent.640.class================ */

/**
 * @classdesc 이벤트 관리를 위한 클래스
 */
class JJEvent extends JJModule {
  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._events = {};
    this._eventTarget = Jinja || document.body;
  }

  /**
   * @desc 이벤트가 발생하여 등록된 리스너를 찾아서 전달한다.
   * @param {String} - 이벤트 유형
   * @param {String} - 핸들러명
   * @param {Object} - 이벤트 데이터
   * @param {Object} - 이벤트 옵션
   * @example -
   */
  dispatch(eventType, handleName, eventData, eventOption) {
    if (this._events[eventType] === undefined) {
      //console.error(`EventMap:event()\n 이벤트[${eventType}]를 ${handleName}가 발생하려는데 등록된 리스너가 없어서 발생시키지 않았습니다.`);

      return;
    }

    if (typeof handleName == 'string') {
      //console.info(`EventMap:event()\n 이벤트[${eventType}]를 ${handleName}가 발생하였습니다.`);

      this.getEventTarget(eventType).dispatchEvent(
        new CustomEvent(eventType, eventData, eventOption)
      );
    } else if (handleName === undefined) {
      console.debug(`EventMap:event()\n 이벤트[${eventType}]를 알수없는 이름으로 발생하였습니다.`);

      this.getEventTarget(eventType).dispatchEvent(
        new CustomEvent(eventType, eventData, eventOption)
      );
    } else if (typeof handleName == 'object') {
      console.debug(`EventMap:event()\n 이벤트[${eventType}]를 알수없는 이름으로 발생하였습니다.`);

      eventOption = eventData;
      eventData = handleName;

      this.getEventTarget(eventType).dispatchEvent(
        new CustomEvent(eventType, eventData, eventOption)
      );
    }
  }

  /**
   * @desc 이벤트 대상을 반환한다.
   * @param {String} - 이벤트 유형
   * @return {Element} - 이벤트 대상
   * @example -
   */
  getEventTarget(eventType) {
    if (['popstate', 'hashchange', 'message'].includes(eventType)) {
      return window;
    } else {
      return this._eventTarget;
    }
  }

  /**
   * @desc 이벤트 리스너를 반환한다.
   * @param {String} - 이벤트 유형
   * @param {String} - 핸들러명
   * @return {function} - 이벤트 리스너
   * @example -
   */
  get(eventType, handleName) {
    if (this._events[eventType]) {
      return this._events[eventType].get(handleName);
    } else {
      return null;
    }
  }

  /**
   * @desc 이벤트 리스너를 등록한다.
   * @param {String} - 이벤트 유형
   * @param {String} - 핸들러명
   * @param {function} - 핸들러
   * @param {Boolean} - 수정여부
   * @example -
   */
  add(eventType, handleName, handler, isUpdate) {
    if (!this._events[eventType]) {
      this._events[eventType] = new Map();

      this.getEventTarget(eventType).addEventListener(eventType, e => {
        for (let [handeName, handler] of this._events[eventType]) {
          if (e.cancelBubble) {
          } else {
            handler(e);
          }
        }
      },
      {
        passive: false,
        once: false,
        capture: true
      });
    } else {
      if (this._events[eventType].has(handleName) && !isUpdate) {
        if (!['edit', 'open'].includes(APP_MODE)) {
          console.error(`EventMap:add()\n 등록된 이벤트 ${eventType}의 핸들러 [${handleName}]을 중복 등록 요청이 취소되었습니다..`);
        }

        return;
      }
    }

    this._events[eventType].set(handleName, handler);
  }

  /**
   * @desc 이벤트 리스너를 삭제한다.
   * @param {String} - 이벤트 유형
   * @param {String} - 핸들러명
   * @example -
   */
  remove(eventType, handleName) {
    if (handleName) {
      this._events[eventType].delete(handleName);
    } else {
      this._events[eventType].clear();
    }
  }

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJEvent');
  }
}

Jinja.addModule('event', JJEvent);
/* ==JJStore.640.class================ */

/**
 * @classdesc JJ Storage 관리를 위한 클래스
 */
class JJStore extends JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61"
    };
  }    
  /**
   * @desc 스토리지를 초기화한다.
   * @example -
   */
  _render() {
    this._dataMap = new Map();
    this._myMemory = {};
  }

  /**
   * @desc 개인변수를 기록함
   * @param {String} - 키
   * @param {String} - 데이터
   * @example - Jinja.store.setMymemory("개발모드", "100")
   * 
   */
  setMymemory(key, value){
    if (Jinja.uo.USER_ID){
      let itemKey = "mymemory"+ Jinja.uo.USER_ID;
      this._myMemory[key] = value;
      localStorage.setItem(itemKey, Jinja.global.string(this._myMemory));
    }
  }
  /**
   * @desc 개인변수를 읽어옮
   * @param {String} - 키
   * @param {String} - 초기데이터
   * @return {*} - 데이터
   * @example - Jinja.store.getMymemory("개발모드")
   */
  getMymemory(key, defValue){
    let result;
    result = this._myMemory[key];
    if(result === undefined && defValue !== undefined){
      result = defValue;
      this.setMymemory(key, defValue);
    }
    return result;
  }
  /**
   * @desc 시작시 개인변수를 로컬스토리지에서 읽어옮
   * @example -
   */
  loadMymemory(){
    if (Jinja.uo && Jinja.uo.USER_ID){
      let itemKey = "mymemory"+ Jinja.uo.USER_ID;
      try{
        if(localStorage.getItem(itemKey)){
          this._myMemory = Jinja.global.json(localStorage.getItem(itemKey))||{};
        }
      }
      catch(e){
        this._myMemory = {};
      }  
    }
  }
  
  /**
   * @desc 지정한 데이터를 localStorage에 저장한다.
   * @param {String} - 키
   * @return {*} - 데이터
   * @example -
   */
  localStorage(key, data) {
    if (key.endsWith('.deploy')) return;

    if (data === undefined) {
      return localStorage.getItem(key);
    } else {
      localStorage.setItem(key, data);
    }
  }

  /**
   * @desc 지정한 키의 localStorage 데이터를 삭제한다.
   * @param {String} - 키
   * @example -
   */
  localStorageClear(key) {
    if (key) {
      localStorage.removeItem(key);
    } else {
      localStorage.clear();
    }
  }

  /**
   * @desc _dataMap 데이터를 저장하거나 반환한다.
   * @param {String} - 키
   * @return {*} - 데이터
   * @example -
   */
  dataMap(key, data) {
    if (data === undefined) {
      return this._dataMap.get(key);
    } else {
      this._dataMap.set(key, data);
    }
  }

  /**
   * @desc 지정한 키의 _dataMap 데이터를 삭제한다.
   * @param {String} - 키
   * @example -
   */
  dataMapClear(key) {
    this._dataMap.clear(key);
  }

  /**
   * @desc 지정한 쿠키를 조회, 생성, 수정, 삭제한다.
   * @param {String} - 쿠키명
   * @param {Object} - 데이터
   * @param {Number} - 만료기간
   * @return {String} - 쿠키값
   * @example -
   */
  cookie(key, data, expireTime) {
    if (data === undefined) {
      return decodeURI(
        document.cookie.replace(
          new RegExp(`(?:(?:^|.*;\\s*)${key}\\s*\\=\\s*([^;]*).*$)|^.*$`),
          '$1'
        )
      );
    } else {
      data = Jinja.global.string(data);

      if (expireTime) {
        let cur = new Date();

        cur.setDate(cur.getDate() + expireTime);

        document.cookie = `${encodeURI(key)}=${encodeURI(data)}; path=/; expires=${cur.toGMTString()};`;
      } else {
        document.cookie = `${encodeURI(key)}=${encodeURI(data)}; path=/;`;
      }
    }
  }

  /**
   * @desc 지정한 쿠키를 삭제한다.
   * @param {String} - 쿠키명
   * @example -
   */
  cookieClear(key) {
    let cur = new Date();

    cur.setDate(cur.getDate() - 1);

    document.cookie = `${encodeURI(key)}= ; expires=${cur.toGMTString()}; path=/`;
  }

  /**
   * @desc 인증 쿠키를 반환한다.
   * @return {String} - 쿠키값
   * @example -
   */
  getAuthCookie() {
    let workspace;
    let keyName;
//     if(this.options.apiVersion == "v61"){
//       workspace = `${document.location.pathname.split('/')[2]}`;
//     }
//     else if(document.location.host.split(".")[1] == "appspeed" && document.location.host.split(".")[0].startsWith("dev710-")) {
//       workspace = document.location.host.split(".")[0].replace("dev710-","");
//     }
//     else if(document.location.host.split(".")[1] == "appspeed") {
//       workspace = document.location.host.split(".")[0];
//     }
		if(this.options.apiVersion == "v61"){
      if (document.location.pathname.split('/')[1] == "apps"){
        workspace = document.location.pathname.split('/')[2];
      } else if(document.location.host.split(".")[0].startsWith("dev710-")){
        workspace = document.location.host.split(".")[0].replace("dev710-","");
      } else if(document.location.host.split(".")[1] == "appspeed"){
        workspace = document.location.host.split(".")[0];
      } else {
        workspace = "studio";
      }
    	keyName = `${workspace}_${this.options.apiVersion}_${location.port || '80'}`;
    } else {
			keyName = workspaceMeta.options.appInfo.cookie||`testappspeed`;      
    }    
    
    return this.cookie(keyName);
  }

  /**
   * @desc 클립보드 데이터를 저장하거나 반환한다.
   * @param {*} - 대상 데이터
   * @return {*} - 클립보드 데이터
   * @example -
   */
  clipBoard(data) {
    if (data) {
      if (window.clipboardData) {
        window.clipboardData.setData('Text', text);
      } else if (navigator.clipboard) {
        navigator.clipboard.writeText(data);
      } else {
        Jinja.clipboardData = data;
      }
    } else {
      if (window.clipboardData) {
        return window.clipboardData.getData('Text');
      } else if (navigator.clipboard) {
        return navigator.clipboard.readText();
      } else {
        return Jinja.clipboardData;
      }
    }
  }

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJStore');
  }
}

Jinja.addModule('store', JJStore);

Jinja.event.add("jjAppStart", "store.getMymemory", e=>{
  Jinja.store.loadMymemory();
});

/* ==JJAjax.640.class================ */

/**
 * @classdesc 비동기 통신관리를 위한 클래스
 */
class JJAjax extends JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      "workspaceJbatisId": workspaceMeta.options.appInfo.jbatisId,
      "ajaxOption": {
        "method": '',
        "credentials": 'same-origin',
        "headers": {
          "Accept": 'application/json; charset=UTF-8',
          'Content-type': 'application/json; charset=UTF-8',
          "Authorization": workspaceMeta.token || ''
        }
      }
    };
  }

  /**
   * @desc 비동기화 네트워크 통신을 한다.
   * @param {String} - URL
   * @param {Object} - 옵션
   * @throws {JJAjaxException} - 통신오류 메세지
   * @return {Promiss} - 실행결과
   * @example -
   */
  _fetch(url, options) {
    let ajaxOption = Object.assign({}, this.options.ajaxOption, options);

    return fetch(url, ajaxOption)
      .then(response => {
      return Promise.all([response.ok, response.json()]);
    })
      .then(([responseOk, body]) => {
      if (responseOk) {
        return body;
      } else {
        throw body;
      }
    })
      .catch(ex => {
      if (ex.error) {
        throw new JJAjaxException(ex.error);
      } else {
        console.error(ex);
      }
    });
  }

  init(){
    this.resourceCache ={};
    this.launcherCache ={};
    this.pathCache ={};

    //     Jinja.event.add("jjAppStart", "ajax.CacheStart", e=>{

    //       if(workspaceMeta.options.appInfo.homeFolderId){

    //         this.excute(`getRecursiveID.sql`, {
    //           "id": workspaceMeta.options.appInfo.homeFolderId
    //         })
    //           .then(result=>{
    //           let appsUri = "" ;
    //           if(document.location.pathname.split("/")[1] == "apps"){
    //             appsUri = "/apps/"+document.location.pathname.split("/")[2];
    //           }
    //           result.rows.forEach(row=>{
    //             this.resourceCache[row.URI]=row;
    //             if(["page", "vhtml"].includes(row.TYPE)){
    //               row.DEPTH_NAME =  "/" +row.DEPTH_NAME.split("/").slice(1).join("/");
    //               let _path = appsUri+ row.DEPTH_NAME;
    //               this.pathCache[_path]=row;
    //             }
    //           })
    //         })
    //       }
    //       let resources = [
    //         "launcher.640.color.info",
    //         "launcher.640.well.info",
    //         "launcher.640.board.info",
    //         "launcher.640.sql.info",
    //         "launcher.640.api.info",
    //         "launcher.640.text.info",
    //         "launcher.640.calendar.info",
    //         "launcher.640.less.info",
    //         "launcher.640.javascript.info",
    //         "launcher.640.erd.info",
    //         "launcher.640.diagram.info",
    //         "launcher.640.html.info",
    //         "launcher.640.css.info",
    //         "launcher.640.theme.info",
    //         "launcher.640.deploy.info",
    //         "launcher.640.page.info",
    //         "launcher.640.component.info",
    //         "launcher.640.json.info",
    //         "launcher.640.word.info",
    //         "launcher.640.image.info",
    //         "launcher.640.vhtml.info",
    //         "launcher.640.workspace.info",
    //         "launcher.640.package.info",
    //         "launcher.640.menu.info",
    //         "launcher.640.formapp.info",
    //         "launcher.640.hmi.info",
    //         "launcher.640.yaml.info"  
    //       ];

    //       this.getResources(resources)
    //         .then(result=>{
    //         let urls = [];
    //         result.rows.forEach(row=>{
    //           this.resourceCache[row.URI] = row;
    //           row._body = Jinja.global.json(row.BODY);

    //           if(row._body.studio) 	urls.push(row._body.studio);
    //           if(row._body.runtime) urls.push(row._body.runtime);

    //           this.launcherCache[row._body.name] = row._body;
    //         })

    //         return urls;
    //       })
    //         .then(urls=>this.getResources(urls))
    //         .then(result=>result.rows.forEach(row=>this.resourceCache[row.URI]=row))
    //     });
  }


  /**
   * @desc 비동기화 네트워크 통신으로 데이터를 조회한다.
   * @param {String} - URL
   * @param {Object} - 조회 조건
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  get(url, data, options) {
    return this._fetch(
      Jinja.global.map2getPara(url, data),
      Object.assign(
        {
          method: 'GET'
        },
        options
      )
    );
  }

  /**
   * @desc 비동기화 네트워크 통신으로 데이터를 저장한다.
   * @param {String} - URL
   * @param {Object} - 데이터
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  post(url, data, options) {
    return this._fetch(
      url,
      Object.assign(
        {
          method: 'POST',
          body: Jinja.global.string(data) || '{}'
        },
        options
      )
    );
  }

  /**
   * @desc 비동기화 네트워크 통신으로 데이터를 수정한다.
   * @param {String} - URL
   * @param {Object} - 데이터
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  patch(url, data, options) {
    return this._fetch(
      url,
      Object.assign(
        {
          method: 'PATCH',
          body: Jinja.global.string(data) || '{}'
        },
        options
      )
    );
  }

  /**
   * @desc 비동기화 네트워크 통신으로 데이터를 삭제한다.
   * @param {String} - URL
   * @param {Object} - 데이터
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  delete(url, data, options) {
    return this._fetch(
      Jinja.global.map2getPara(url, data),
      Object.assign(
        {
          method: 'DELETE'
        },
        options
      )
    );
  }

  getCsv(url, options){
//     return fetch(url)
//     .then(responseObj=>responseObj.text())
    

    
    let ajaxOption = Object.assign({}, this.options.ajaxOption, {
          method: 'GET'
        }, options);

    return fetch(url, ajaxOption)
      .then(response => {
      return Promise.all([response.ok, response.text()]);
    })
      .then(([responseOk, body]) => {
      if (responseOk) {
        return body;
      } else {
        throw body;
      }
    })
      .catch(ex => {
      if (ex.error) {
        throw new JJAjaxException(ex.error);
      } else {
        console.error(ex);
      }
    });    
  }
  
  /**
   * @desc 지정한 파일을 조회하여 JSON 데이터로 반환한다.
   * @param {String} - URI
   * @return {Promiss} - 실행결과
   * @example -
   */
  getJson(uri) {
    return this.get(`/${this.options.apiVersion}/site/fileUri/${uri}`);
  }


  excute(uri, para){
    return this.post(`/${this.options.apiVersion}/jbatis/studio/excute/get/${uri}`, para)
      .catch(e=>{
      let msg = `ajax excute "${uri}" 실행이 실패하였습니다.`;
      if(e.constructor.name == "JJAjaxException"){
        msg += "<br>"
        msg += e.options.message
      }
      alert(msg);
    })
  }

  getResourceUri(uri){
    return this.post(`/${this.options.apiVersion}/site/resource/${uri}`)
      .catch(e=>{
      let msg = `ajax excute "${uri}" 실행이 실패하였습니다.`;
      if(e.constructor.name == "JJAjaxException"){
        msg += "<br>"
        msg += e.options.message
      }
      alert(msg);
    })
  }

  getJsonFileUri(uri, options){
    let url = `/${this.options.apiVersion}/site/fileUri/${uri}`;
    let ajaxOption = Object.assign({}, 
        this.options.ajaxOption,
        {
      		method: 'GET'
    		},
				options);
    
    return fetch(url, ajaxOption)
      .then(response => {
      return Promise.all([response.ok, response.text()]);
    })
      .then(([responseOk, body]) => {
      if (responseOk) {
        return Jinja.global.json(body);
      } else {
        throw body;
      }
    })
      .catch(ex => {
      let msg = `ajax excute "${uri}" 실행이 실패하였습니다.`;
      if(e.constructor.name == "JJAjaxException"){
        msg += "<br>"
        msg += e.options.message
      }
      alert(msg);
    });
  }  


  getResources(resources){
    return  this.excute('getResource.sql', {
      "uri": resources
    })
      .catch(e=>{
      let msg = `ajax excute "${uri}" 실행이 실패하였습니다.`;
      if(e.constructor.name == "JJAjaxException"){
        msg += "<br>"
        msg += e.options.message
      }
      alert(msg);
    })
  }  


  /**
   * @desc 외부 네트워크 통신을 한다.(method : get)
   * @param {String} - URL
   * @param {Object} - 조회조건
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  proxyGet(url, data, option) {
    data.url = url;

    let defaultOption = {
      method: 'POST',
      credentials: 'same-origin',
      headers: {
        Accept: 'application/json; charset=UTF-8',
        'Content-type': 'application/json; charset=UTF-8'
      },
      body: Jinja.global.string(data)
    };

    Object.assign(defaultOption, option);

    return this._fetch(`/${this.options.apiVersion}/proxy/get`, defaultOption);
  }

  /**
   * @desc 외부 네트워크 통신을 한다.(method : post)
   * @param {String} - URL
   * @param {Object} - 데이터
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  proxyPost(url, data, option) {
    data.url = url;

    let defaultOption = {
      method: 'POST',
      credentials: 'same-origin',
      headers: {
        Accept: 'application/json; charset=UTF-8',
        'Content-type': 'application/json; charset=UTF-8'
      },
      body: Jinja.global.string(data)
    };

    Object.assign(defaultOption, option);

    return this._fetch(`/${this.options.apiVersion}/proxy/post`, defaultOption);
  }

  /**
   * @see {@link https://github.com/camsong/fetch-jsonp|GitHub}
   * @licence MIT
   * @desc JSONP 네트워크 통신을 한다.
   * @param {String} - URL
   * @param {Object} - 데이터
   * @param {Object} - 옵션
   * @return {Promise} - 실행결과
   * @example -
   */
  fetchJsonp(_url, data = {}, options = {}) {
    const defaultOptions = {
      timeout: 5000,
      jsonpCallback: 'jsoncallback',
      jsonpCallbackFunction: null
    };

    let url = _url;
    const timeout = options.timeout || defaultOptions.timeout;
    const jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;

    if (data) {
      if (!url.endsWith('?')) url += '?';

      url += Object.keys(data)
        .map(function (k) {
        return encodeURIComponent(k) + '=' + encodeURIComponent(data[k]);
      })
        .join('&');
    }

    let timeoutId;

    return new Promise((resolve, reject) => {
      const callbackFunction =
            options.jsonpCallbackFunction || this.generateCallbackFunction();
      const scriptId = `${jsonpCallback}_${callbackFunction}`;

      window[callbackFunction] = response => {
        resolve(Promise.resolve(response));
        if (timeoutId) clearTimeout(timeoutId);
        this.removeScript(scriptId);
        this.clearFunction(callbackFunction);
      };

      url += url.indexOf('?') === -1 ? '?' : '&';

      const jsonpScript = document.createElement('script');

      jsonpScript.setAttribute('src', `${url}${jsonpCallback}=${callbackFunction}`);

      if (options.charset) {
        jsonpScript.setAttribute('charset', options.charset);
      }

      jsonpScript.id = scriptId;

      document.getElementsByTagName('head')[0].appendChild(jsonpScript);

      timeoutId = setTimeout(() => {
        reject(new Error(`JSONP request to ${_url} timed out`));

        this.clearFunction(callbackFunction);
        this.removeScript(scriptId);

        window[callbackFunction] = () => {
          this.clearFunction(callbackFunction);
        };
      }, timeout);

      jsonpScript.onerror = () => {
        reject(new Error(`JSONP request to ${_url} failed`));

        this.clearFunction(callbackFunction);
        this.removeScript(scriptId);

        if (timeoutId) clearTimeout(timeoutId);
      };
    });
  }

  /**
   * @desc 콜백함수를 생성한다.
   * @example -
   */
  generateCallbackFunction() {
    return `jsonp_${Date.now()}_${Math.ceil(Math.random() * 100000)}`;
  }

  /**
   * @desc 지정한 함수를 삭제한다.
   * @param {String} - 함수명
   * @example -
   *  toavmfdadf
   * asdfasf
   */
  clearFunction(name) {
    try {
      delete window[name];
    } catch (e) {
      window[name] = undefined;
    }
  }

  /**
   * @desc 지정한 스크립트를 삭제한다.
   * @param {String} - 대상아이디
   * @example -
   */
  removeScript(id) {
    const script = document.getElementById(id);

    if (script) {
      document.getElementsByTagName('head')[0].removeChild(script);
    }
  }

  /**
   * @desc 이미지를 업로드한다.
   * @param {File} 파일 목록
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  imageUpload(files, options) {
    let url = `/${this.options.apiVersion}/driver/upload/create`;
    let formData = new FormData();

    for (let index in files) {
      let file = files[index];

      formData.append('file[' + index + ']', file);
    }

    let defaultOption = {
      method: 'POST',
      credentials: 'same-origin',
      headers: {
        Accept: 'application/json; charset=UTF-8',
        Authorization: workspaceMeta.options.otp || ''
      },
      body: formData
    };

    Object.assign(defaultOption, options);

    return this._fetch(url, defaultOption);
  }

  /**
   * @desc 이미지를 업로드한다.
   * @param {File} 파일 목록
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  imageUploadApps(files, options) {
    let workspace = workspaceMeta.options.appInfo.workspaceUri;
    


    if(!workspace) {
      alert('워크스페이스가 설정되지 않았습니다.');

      return false;
    }

    let url = `/apps/${workspace}/${this.options.apiVersion}/driver/upload/create`;
    let formData = new FormData();
    
    for (let index in files) {
      let file = files[index];

      formData.append('file[' + index + ']', file);
    }

    let defaultOption = {
      method: 'POST',
      credentials: 'same-origin',
      headers: {
        Accept: 'application/json; charset=UTF-8',
        Authorization: workspaceMeta.options.otp || ''
      },
      body: formData
    };

    Object.assign(defaultOption, options);

    return this._fetch(url, defaultOption);
  }

  /**
   * @desc 사용자 사진을 업로드한다.
   * @param {File} 파일
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  myImageUpload(files, options) {
    let url = `/${this.options.apiVersion}/driver/upload/myimage`;
    let formData = new FormData();

    formData.append('file[0]', files[0]);

    let defaultOption = {
      method: 'POST',
      credentials: 'same-origin',
      headers: {
        Accept: 'application/json; charset=UTF-8',
        Authorization: workspaceMeta.options.otp || ''
      },
      body: formData
    };

    Object.assign(defaultOption, options);

    return this._fetch(url, defaultOption);
  }

  /**
   * @desc 엑셀파일을 업로드한다.
   * @param {String} - URL
   * @param {File} - 파일목록
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  excelUpload(url, files, options) {
    let formData = new FormData();

    for (let index in files) {
      let file = files[index];

      formData.append('file[' + index + ']', file);
    }

    let defaultOption = {
      method: 'POST',
      credentials: 'same-origin',
      headers: {
        Accept: 'application/json; charset=UTF-8',
        Authorization: workspaceMeta.options.otp || '',
      },
      body: formData,
    };

    Object.assign(defaultOption, options);

    return this._fetch(url, defaultOption);
  }

  /**
   * @desc 지정한 웹페이지의 정보를(meta) 조회한다.
   * @param {String} - URL
   * @param {String} - 데이터 케릭터셋
   * @return {Object} - 웹페이지정보
   * @example -
   */
  getLinkInfo(url, charset) {
    charset = charset || 'utf-8';
    charset = charset.toLowerCase();

    let result = {
      url: url,
      charset: charset,
      title: '',
      description: '',
      image: '',
      iframe: ''
    };

    return this.post('/v61/proxy/getWebPage', {
      url: url,
      charset: charset
    })
      .then(data => {
      let charset = getTag(/<meta(?=.*charset(\s+)?=(\s+)?['"]?([^"')]*))/gm,data.result);

      if (charset) {
        charset = charset.toLowerCase();

        if (charset != charset) {
          return this.getLinkInfo(url, charset);
        }
      }

      if (data.result.length < 10000) {
        result.iframe = getTag(/(?=.*iframe)(?=.*allowfullscreen).*src="([^")]*)"/gm, data.result);

        if (result.iframe) {
          if (result.iframe.startsWith('http')) {
          } else {
            result.iframe = getHost(url) + iframe;
          }

          return this.getLinkInfo(result.iframe, charset);
        }
      }

      result.title = getTag(/<title>([^<]+)<\/title>/gm, data.result);

      if (!result.title) {
        title = getTag(/<meta(\s+)property(\s+)?=(\s+)?"og\:title"(\s+)?content(\s+)?=(\s+)?"([^")]*)"/gm, data.result);
      }

      if (!result.title) {
        result.title = getTag(/meta\sname\=\"title\"\scontent="([^"]*)"/gm,data.result);
      }

      if (!result.title) {
        result.title = getTag(/<meta(?=.*og\:title)(?=.*content(\s+)?\=(\s+)?"([^")]*))/gm, data.result);
      }

      if (!result.title) {
        result.title = getTag(/<title>([^<]+)<\/title>/gm, data.result);
      }

      result.description = getTag(/meta\sname\=\"description\"\scontent="([^"]*)"/gm, data.result);

      if (!result.description) {
        result.description = getTag(/<meta(?=.*og\:description)(?=.*content(\s+)?\=(\s+)?"([^")]*))/gm, data.result);
      }

      result.image = getTag(/<meta(\s+)property(\s+)?=(\s+)?"og\:image"(\s+)?content(\s+)?=(\s+)?"([^")]*)"/gm, data.result);

      if (!result.image) {
        result.image = getTag(/<meta(?=.*og\:image)(?=.*content(\s+)?\=(\s+)?"([^")]*))/gm, data.result);
      }

      if (result.image) {
        if (result.image.startsWith('http')) {
        } else {
          result.image = getHost(result.url) + result.image;
        }
      }

      result.html = `<div class="media">`;

      if (result.image) {
        result.html += `<img class="img-responsive" src="${result.image}">`;
      }

      result.html += `<div class="media-body">`;
      result.html += `<h4 class="media-heading"><a href="${result.url}" target="_blank">${result.title}</a></h4>`;

      if (result.description) {
        result.html += `<p>${result.description}</p>`;
      }

      result.html += `</div>`;
      result.html += `</div>`;

      return result;
    })
      .catch(ex => {
      return ex;
    });

    function getHost(url) {
      return url.split('/').splice(0, 3).join('/');
    }

    function getTag(regex, text) {
      let result, m;

      while ((m = regex.exec(text)) !== null) {
        if (m.index === regex.lastIndex) {
          regex.lastIndex++;
        }

        m.forEach((match, groupIndex) => {
          if (
            groupIndex > 0 &&
            !result &&
            match &&
            match.trim() &&
            match != 'undefined'
          ) {
            result = match;
          }
        });
      }

      return decode(result);
    }

    function decode(text) {
      let result = text;

      if (text) {
        let textarea = document.createElement('textarea');

        textarea.innerHTML = text;
        result = textarea.value;
      }

      return result;
    }
  }


  /**
   * 워크스페이스 기본 JBatis연결을 통한 Ajax처리
   * 워크스페이스를 지정하는 문제를 공통으로 처리함 해결함
   */

  
  jBatisRestSearch(table, para){
    let uri = `/v7/jbatis/${this.options.workspaceJbatisId}/rest/${table}`;
    return this.get(uri, para)
      .catch(e=>{
      if(e.constructor.name == "JJAjaxException"){
        e.options.message = `ajax excute "${uri}" 실행이 실패하였습니다. <br> ${e.options.message}`
        throw new JJAjaxException(e.options);
      } else {
        throw new Error(`ajax excute "${uri}" 실행이 실패하였습니다. <br> ${e.message}`);
      }
    })
  }

  jBatisRestGet(table, keyField, keyValue){
    let uri = `/${this.options.apiVersion}/jbatis/${this.options.workspaceJbatisId}/rest/${table}/${keyField}/${keyValue}`;
    return this.get(uri)
      .catch(e=>{
      if(e.constructor.name == "JJAjaxException"){
        e.options.message = `ajax excute "${uri}" 실행이 실패하였습니다. <br> ${e.options.message}`
        throw new JJAjaxException(e.options);
      } else {
        throw new Error(`ajax excute "${uri}" 실행이 실패하였습니다. <br> ${e.message}`);
      }
    })
  }

  jBatisMultirows(para){
    let uri = `/${this.options.apiVersion}/jbatis/${this.options.workspaceJbatisId}/rest/multirows`;
    return this.post(uri, para)
      .catch(e=>{
      if(e.constructor.name == "JJAjaxException"){
        e.options.message = `ajax excute "${uri}" 실행이 실패하였습니다. <br> ${e.options.message}`
        throw new JJAjaxException(e.options);
      } else {
        throw new Error(`ajax excute "${uri}" 실행이 실패하였습니다. <br> ${e.message}`);
      }
    })
  }
  
  jBatisSvcExcute(fileUri, para){
    let uri = `/${this.options.apiVersion}/jbatis/${this.options.workspaceJbatisId}/excute/get/${fileUri}`;
    return this.post(uri, para)
      .catch(e=>{
      if(e.constructor.name == "JJAjaxException"){
        e.options.message = `ajax excute "${uri}" 실행이 실패하였습니다. <br> ${e.options.message}`
        throw new JJAjaxException(e.options);
      } else {
        throw new Error(`ajax excute "${uri}" 실행이 실패하였습니다. <br> ${e.message}`);
      }
      

      //alert(msg);
      //throw new Error(msg);
    })
  }  
  
  setAuthorization(token){
    this.options.ajaxOption.headers.Authorization = token;
  }
  /**
   * @desc 모듈명을 반환한다.
   * @example -
   */
  who() {
    alert('JJAjax');
  }
}

Jinja.addModule('ajax', JJAjax);
/* ==JJDom.640.class================ */

/**
 * @classdesc Dom 관리를 위한 클래스
 */
class JJDom extends JJModule {
  /**
   * @desc selectors에 매칭되는 가장가까운 상위객체를 반환한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Element} - 조건 셀렉터
   * @param {Element} - 최상위 엘리먼트
   * @return {Element} - 가장 가까운 상위 엘리먼트
   * @example -
   */
  closest(el, selectors, root) {
    let elem = el;
    let result;

    for (; elem && elem !== (root || this.options.app.el); elem = elem.parentNode) {
      if (!elem.matches) break;
      if (elem.matches(selectors) ) {
        result = elem;
        
        break;						
      }
    }

    return result;
  }

  /**
   * @desc selectors에 매칭되는 모든 상위객체를 반환한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Element} - 조건 셀렉터
   * @param {Element} - 최상위 엘리먼트
   * @return {Array} - 상위객체 목록
   * @example -
   */
  closestAll(el, selectors, root) {
    let elem = el;
    let result = [];

    for (; elem && elem !== (root || this.options.app.el); elem = elem.parentNode) {
      if (elem.matches(selectors)) {
        result.push(elem);
      }
    }

    return result;
  }

  /**
   * @desc 상위객체 목록을 반환한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Element} - 최상위 엘리먼트
   * @param {Element} - 조건 셀렉터
   * @return {Array} - 상위객체 목록
   * @example -
   */
  parents(el, root, selectors) {
    let elem = el;
    let result = [];

    for (
      ;
      elem && elem !== (root || this.options.app.el);
      elem = elem.parentElement
    ) {
      if (selectors) {
        if (elem.matches(selectors)) {
          result.push(elem);
        }
      } else {
        result.push(elem);
      }
    }

    return result.reverse();
  }

  /**
   * @desc 엘리먼트 안의 가장 첫번째 자식으로 추가한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Element} - 추가할 Html
   * @return {Element} - 추가된 엘리먼트
   * @example -
   */
  prepend(el, html) {
    el.insertAdjacentHTML('afterbegin', html);

    return el.firstElementChild;
  }

  /**
   * @desc 엘리먼트 안의 가장 마지막 자식으로 추가한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Element} - 추가할 Html
   * @return {Element} - 추가된 엘리먼트
   * @example -
   */
  append(el, html) {
    el.insertAdjacentHTML('beforeend', html);

    return el.lastElementChild;
  }

  /**
   * @desc 엘리먼트 앞에 추가한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Element} - 추가할 Html
   * @return {Element} - 추가된 엘리먼트
   * @example -
   */
  before(el, html) {
    el.insertAdjacentHTML('beforebegin', html);

    return el.before;
  }

  /**
   * @desc 엘리먼트 뒤에 추가한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Element} - 추가할 Html
   * @return {Element} - 추가된 엘리먼트
   * @example -
   */
  after(el, html) {
    el.insertAdjacentHTML('afterend', html);

    return el.after;
  }

  /**
   * @desc 엘리먼트를 삭제한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  remove(el) {
    if (el) {
      this.empty(el);

      el.remove();
    }
  }

  /**
   * @desc 엘리먼트의 자식을 모두 삭제한다.
   * @param {Element} - 대상 엘리먼트
   * @return {Element} - 변경된 엘리먼트
   * @example -
   */
  empty(el) {
    if (el) {
      while (el.firstChild) {
        if (el.firstChild.childNodes.length > 0) {
          this.empty(el.firstChild);
        }

        el.removeChild(el.firstChild);
      }
    }

    return el;
  }

  /**
   * @desc 엘리먼트에 고유 식별자 아이디를 부여한다.
   * @param {Element} - 대상 엘리먼트
   * @return {Element} - 변경된 엘리먼트
   * @example -
   */
  uuid(el) {
    el.id = Jinja.global.uuid();

    return el;
  }

  /**
   * @desc 엘리먼트가 상위엘리먼트에서 위치하는 순번을 반환한다.
   * @param {Element} - 대상 엘리먼트
   * @return {Number} - 순번
   * @example -
   */
  findIndex(el, child) {
    let result = -1;
    let nodeIndex = 0;
    let node = el.firstElementChild;

    if (node == child) {
      result = nodeIndex;
    } else {
      node = node.nextElementSibling;

      nodeIndex++;

      while (node) {
        if (node == child) {
          result = nodeIndex;

          break;
        }

        node = node.nextElementSibling;

        nodeIndex++;
      }
    }

    return result;
  }

  /**
   * @desc 엘리먼트의 Visible 여부를 반환한다.
   * @param {Element} - 대상 엘리먼트
   * @return {Boolean} - Visible 여부
   * @example -
   */
  isVisible(el) {
    while (el) {
      if (el === document) {
        return true;
      }

      let $style = window.getComputedStyle(el, null);

      if (!el) {
        return false;
      } else if (!$style) {
        return false;
      } else if ($style.display === 'none') {
        return false;
      } else if ($style.visibility === 'hidden') {
        return false;
      } else if (+$style.opacity === 0) {
        return false;
      } else if (
        ($style.display === 'block' || $style.display === 'inline-block') &&
        $style.height === '0px' &&
        $style.overflow === 'hidden'
      ) {
        return false;
      } else {
        return $style.position === 'fixed' || this.isVisible(el.parentNode);
      }
    }
  }

  /**
   * @desc 엘리먼트의 목록 중에서 Visible 상태인 목록을 반환한다.
   * @param {Array} - 대상 엘리먼트 목록
   * @return {Array} - Visible 상태인 엘리먼트 목록
   * @example -
   */
  visibleList(elList) {
    return Array.prototype.slice.call(elList).filter(el => this.isVisible(el));
  }

  /**
   * @desc 엘리먼트 자식들 중에서 지정한 조건에 맞고 Visible 상태인 목록을 반환한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Element} - 조건 셀렉터
   * @return {Array} - Visible 상태인 엘리먼트 목록
   * @example -
   */
  visibleFilter(el, match) {
    let result = [];

    el.querySelectorAll(match).forEach(el => {
      if (this.isVisible(el)) {
        result.push(el);
      }
    });

    return result;
  }

  /**
   * @desc 키보드 이동같이 객체를 이동할때 스크롤 범위를 벗어나면 자동으로 보이는 위치까지 이동시켜준다.
   * @param {Element} - 부모 엘리먼트
   * @param {Element} - 대상 엘리먼트
   * @param {Number} - 여백 라인수
   * @return {} - 
   * @example -
   */
  visibleScroll(parent, selectEl, offsetRows) {
    offsetRows = offsetRows || 3;

    if (
      selectEl.offsetTop + selectEl.offsetHeight * offsetRows > parent.offsetHeight + parent.scrollTop
    ) {
      parent.scrollTop = selectEl.offsetTop + selectEl.offsetHeight * offsetRows - parent.offsetHeight;
    } else if (
      selectEl.offsetTop + selectEl.offsetHeight - selectEl.offsetHeight * offsetRows < parent.scrollTop
    ) {
      parent.scrollTop = selectEl.offsetTop + selectEl.offsetHeight - selectEl.offsetHeight * offsetRows;
    }
  }

  /**
   * @desc 엘리먼트의 위치정보를 반환한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Element} - 
   * @param {Element} - 
   * @return {Object} - 엘리먼트 위치정보
   * @example -
   */
  position(el, containment, coverEl) {
    if (!containment) containment = Jinja;

    let x = el.getBoundingClientRect().x;
    let y = el.getBoundingClientRect().y + containment.scrollTop;
    let y2 = el.getBoundingClientRect().y - containment.scrollTop;
    let y3 =
      el.getBoundingClientRect().y - containment.getBoundingClientRect().y;

    let w = window.getComputedStyle(el).width;

    w = el.offsetWidth;

    let h = el.offsetHeight;

    if (coverEl) {
      coverEl.style.top = y + 'px';
      coverEl.style.left = x + 'px';
      coverEl.style.width = w + 'px';
      coverEl.style.height = h + 'px';
      coverEl.style.display = 'block';
    }

    return {
      x: x,
      y: y,
      y2: y2,
      y3: y3,
      w: w,
      h: h,
      containment: containment
    };
  }

  /**
   * @desc 포지션 값을 반환한다.
   * @param {Event} - Drop 이벤트
   * @param {Element} - 대상 엘리먼트
   * @param {Object} - 대상 Object
   * @param {Number} - 기준값
   * @return {Object} - 포지션 정보
   * @example -
   */
  dropPosition(dropEvent, target, targetObject, abs) {
    let dropPosition = 'inner';
    let x = target.getBoundingClientRect().x - targetObject.getBoundingClientRect().x;
    let y = target.getBoundingClientRect().y - targetObject.getBoundingClientRect().y;
    let h = target.offsetHeight;
    let w = target.offsetWidth;
    let h2 = dropEvent.clientY - target.getBoundingClientRect().y;
    let w2 = dropEvent.clientX - targetObject.getBoundingClientRect().x - x;
    let py = h2 / h;
    let px = w2 / w;
    
    if (!abs) abs = 6;

    if (h2 < abs) {
      dropPosition = 'top';
    } else if (h - h2 < abs) {
      dropPosition = 'bottom';
    } else {
      dropPosition = 'inner';
    }

    return dropPosition;
  }

  /**
   * @desc 이벤트의 위치정보를 반환한다.
   * @param {Event} - 이벤트
   * @return {Object} - 이벤트 위치정보
   * @example -
   */
  getEventPoint(event) {
    var point = {};

    if (event.changedTouches) {
      point.x = event.changedTouches[0].clientX;
      point.y = event.changedTouches[0].clientY;
    } else if (event.targetTouches) {
      point.x = event.targetTouches[0].clientX;
      point.y = event.targetTouches[0].clientY;
    } else if (event.button == 0) {
      point.x = event.clientX;
      point.y = event.clientY;
    }

    return point;
  }

  /**
   * @desc Object의 jj-controller 에서 메소드와 파라미터를 추출하여 등록한다.
   * @param {String} - controller 목록
   * @param {Event} - 이벤트
   * @param {Object} - 대상 Object
   * @example -
   */
  ctrlParaApply(cmdString, event, obj) {
    const methodReg = new RegExp(/\w+|\(.+\)/, 'gm');
    const paraReg = new RegExp(/[a-zA-Z0-9가-힣-%#.:_() ]+/, 'gm');

    let method, paras;
    let methodSplit = cmdString.match(methodReg);

    if (methodSplit) {
      method = methodSplit[0];

      let para = methodSplit[1];

      if (para) {
        para = para.startsWith('(') ? para.substr(1, 200) : para;
        para = para.endsWith(')') ? para.substr(0, para.length - 1) : para;
        paras = para.match(paraReg).map(p => {
          let ret;

          switch (p) {
            case 'e':
              ret = event;

              break;
            case 'null':
              ret = null;

              break;
            default:
              ret = p;
          }

          return ret;
        });

        if (obj['controller']) {
          Reflect.apply(obj['controller'], obj, [method, paras, event]);
        }
      } else {
        if (obj['controller']) {
          Reflect.apply(obj['controller'], obj, [method, event]);
        }
      }
    }
  }

  /**
   * @desc Object의 jj-commend 에서 메소드와 파라미터를 추출하여 등록한다.
   * @param {String} - commend 목록
   * @param {Event} - 이벤트
   * @param {Object} - 대상 Object
   * @example -
   */
  cmdParaApply(cmdString, event, obj) {
    const methodReg = new RegExp(/\w+|\(.+\)/, 'gm');
    const paraReg = new RegExp(/[a-zA-Z0-9가-힣-%#._() ]+/, 'gm');

    let method, paras;
    let methodSplit = cmdString.match(methodReg);

    if (methodSplit) {
      method = methodSplit[0];

      if (obj[method]) {
        let para = methodSplit[1];

        if (para) {
          para = para.startsWith('(') ? para.substr(1, 200) : para;
          para = para.endsWith(')') ? para.substr(0, para.length - 1) : para;
          paras = para.match(paraReg).map(p => {
            let ret;

            switch (p) {
              case 'e':
                ret = event;

                break;
              case 'null':
                ret = null;

                break;
              default:
                ret = p;
            }

            return ret;
          });

          paras.push(event);

          Reflect.apply(obj[method], obj, paras);
        } else {
          Reflect.apply(obj[method], obj, [event]);
        }
      }
    }
  }

  /**
   * @desc 컨텍스트메뉴를 생성한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Object} - 메뉴 정보
   * @example -
   */
  contextMenu(el, menus) {
    el.addEventListener('j-tabholder', e => {
      e.stopImmediatePropagation();
      e.stopPropagation();
      e.preventDefault();

      let elem = e.target, contextTarget = '';
      let html = `<div class="jj-context-menu" tabindex=0 ><ul class="dropdown-menu" >`;
      let keys = Object.keys(menus), keyLength = keys.length, loopX = 0;

      while (loopX < keyLength) {
        let key = keys[loopX], data = menus[key];

        if (data.label == 'divider') {
          html += `<li class="divider"></li>`;
        } else {
          html += `<li context-command="${data.command || key}" class=" ${data.class}" jj-data-lan="${data.lan}" jj-data-target="${data.target}">`;
          html += `<a><i class="fa ${data.icon}" aria-hidden="true"></i>${data.label}</a>`;
          html += `</li>`;
        }

        loopX++;
      }

      html += `</ul></div>`;

      if (Jinja.querySelector('.jj-context-menu')) {
        Jinja.querySelector('.jj-context-menu').remove();
      }

      Jinja.insertAdjacentHTML('afterbegin', html);

      let contextEl = Jinja.querySelector('.jj-context-menu');

      contextEl.style.top = e.detail.startY + 'px';
      contextEl.style.left = e.detail.startX + 'px';
      contextEl.focus();

      if (Jinja.offsetHeight < contextEl.offsetHeight + contextEl.offsetTop) {
        contextEl.style.top =
          Jinja.offsetHeight - contextEl.offsetHeight - 10 + 'px';
      }

      if (Jinja.offsetWidth < contextEl.offsetWidth + contextEl.offsetLeft) {
        contextEl.style.left =
          Jinja.offsetWidth - contextEl.offsetWidth - 10 + 'px';
      }

      el.dispatchEvent(
        new CustomEvent('activeContext', {
          detail: e,
        })
      );

      contextEl.addEventListener('focusout', e => {
        window.setTimeout(() => {
          contextEl.remove();
        }, 10);
      });

      contextEl.addEventListener('click', e => {
        let elem = e.target;

        for (; elem && elem !== document; elem = elem.parentNode) {
          if (elem.matches('[context-command]')) {
            let contextCommand = elem.getAttribute('context-command');

            el.dispatchEvent(
              new CustomEvent('clickContext', {
                detail: contextCommand,
              })
            );

            break;
          }
        }

        window.setTimeout(() => {
          contextEl.remove();
        }, 10);
      });
    });
  }

  /**
   * @desc "html에서 지정된 객체를 삭제한 후 반환한다.
   * 지정된 객체 : jj-include, jj-hee, [data-render], .jj-hitem"
   * @param {} - 
   * @return {} - 
   * @example -
   */
  exportCleaning(html) {
    let exportDiv = document.createElement('div');

    exportDiv.innerHTML = html;

    exportDiv.querySelectorAll('jj-include').forEach(el => el.$empty());
    exportDiv.querySelectorAll('jj-hee').forEach(el => el.$empty());
    exportDiv.querySelectorAll('[data-render]').forEach(el => el.$empty());
    exportDiv.querySelectorAll('.jj-hitem').forEach(el => el.$empty());

    return exportDiv.innerHTML;
  }

  /**
   * @desc html을 압축한다.
   * @param {html} - 대상 html 정보
   * @example -
   */
  htmlCompress(html) {
    return html.replace(/\n/g, '').replace(/\s{2,}/g, ' ');
  }

  /**
   * @desc 탭 엘리먼트에 탭을 추가한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tabAddTab(el) {
    let tabEl = el.$closest('.jj-tabs');

    if (!tabEl) {
      alert('작업할 탭을 찾지 못합니다.');

      return;
    }

    return JJHee.open('getText.610.uc', {
      position: {
        width: '50%',
      },
      isModal: true,
      isMoveable: true,
    }).then(result => {
      let menuHtml = 
      `<li class="nav-item">` +
      `<a data-target="${result}" data-toggle="tab" aria-expanded="false" class="nav-link">` +
      `<span class="d-inline-block d-sm-none"><i class="fa fa-home"></i></span>` +
      `<span class="d-none d-sm-inline-block">${result}</span>` +
      `</a>` +
      `</li>`;

      let panelHtml = 
      `<div class="tab-pane" data-target="${result}">` +
      `<p>${result}... Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim.</p>` +
      `</div>`;

      Jinja.dom.append(tabEl, menuHtml);
      Jinja.dom.append(tabEl.nextElementSibling, panelHtml);
    });
  }

  /**
   * @desc 탭 엘리먼트에 탭을 삭제한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tabRemoveTab(el) {
    let tabEl = el.$closest('.jj-tabs');

    if (!tabEl) {
      alert('작업할 탭을 찾지 못합니다.');

      return;
    }

    let activeEl = tabEl.querySelector('.nav-link.active');

    if (activeEl) {
      Jinja.confirm
        .delete(`${activeEl.innerText} 탭을 삭제합니까?`)
        .then(chooice => {
          if (chooice == 'YES') {
            activeEl.parentElement.$remove();

            let panel = tabEl.nextElementSibling.querySelector(
              '.tab-pane.active'
            );

            if (panel) panel.$remove();

            tabEl.querySelector('.nav-link').click();
          }
        });
    } else {
      alert('선택된 탭이 없어서 삭제되지 않았습니다.');

      return;
    }
  }

  /**
   * @desc 활성화된 탭에 아이콘을 표출한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tabShowIcon(el) {
    let tabEl = el.$closest('.jj-tabs');

    if (!tabEl) {
      alert('작업할 탭을 찾지 못합니다.');

      return;
    } else {
      let activeIconEl = tabEl.querySelector('.nav-link.active i.fa');

      if (activeIconEl) {
        activeIconEl.parentElement.classList.remove('d-sm-none');
        activeIconEl.parentElement.classList.add('d-none');
      } else {
        JJHee.open('getIcon.610.uc', {
          search: {},
          position: {
            width: '80%',
          },
          isModal: true,
          isMoveable: true,
        })
          .then(result => {
            let html = `<span class="d-inline-block d-none"><i class="fa ${result.class}"></i></span>`;
            Jinja.dom.prepend(tabEl.querySelector('.nav-link.active'), html);
          })
          .catch(ex => {});
      }
    }
  }

  /**
   * @desc 활성화된 탭에 아이콘을 숨긴다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tabHiddenIcon(el) {
    let tabEl = el.$closest('.jj-tabs');

    if (!tabEl) {
      alert('작업할 탭을 찾지 못합니다.');

      return;
    } else {
      let activeIconEl = tabEl.querySelector('.nav-link.active i.fa');

      if (activeIconEl) {
        activeIconEl.parentElement.classList.add('d-sm-none');
        activeIconEl.parentElement.classList.remove('d-none');
      }
    }
  }

  /**
   * @desc 테이블 행을 삽입한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tableInsertRow(el) {
    let tr = el.$closest('tr');
    let newTr = tr.cloneNode(true);

    tr.after(newTr);
  }

  /**
   * @desc 테이블 행을 병합한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tableMeargeRow(el) {
    let tableEl = el.$closest('table');
    let tr;
    let tdIndex = Jinja.dom.findIndex(el.parentElement, el);
    let colspan = parseInt(el.getAttribute('colspan')) || 1;
    let rowspan = parseInt(el.getAttribute('rowspan')) || 1;

    rowspan += 1;

    for (let r = 0; r < rowspan; r++) {
      if (tr) tr = tr.nextElementSibling;
      else tr = el.$closest('tr');

      if (tr) {
        for (let c = 0; c < colspan; c++) {
          if (tr.children[tdIndex + c]) {
            tr.children[tdIndex + c].hidden = true;
          }
        }
      }
    }

    el.hidden = false;
    el.setAttribute('colspan', colspan);
    el.setAttribute('rowspan', rowspan);
    el.click();
  }

  /**
   * @desc 테이블 행을 삭제한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tableRemoveRow(el) {
    let tr = el.$closest('tr');
    let next = tr.nextElementSibling;

    tr.$remove();

    if (next) {
      next.children[0].click();
    }
  }

  /**
   * @desc 테이블 열을 삽입한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tableInsertCol(el) {
    let tableEl = el.$closest('table');
    let tdIndex = Jinja.dom.findIndex(el.parentElement, el);

    if (tableEl.querySelector('colgroup')) {
      let colEl = tableEl.querySelector('colgroup').children[tdIndex];
      let newCol = colEl.cloneNode(true);

      colEl.after(newCol);
    }

    tableEl.querySelectorAll('thead tr').forEach(tr => {
      let thEl = tr.children[tdIndex];
      let newTh = thEl.cloneNode(true);

      newTh.classList.remove('selected');
      thEl.after(newTh);
    });

    tableEl.querySelectorAll('tbody tr').forEach(tr => {
      let tdEl = tr.children[tdIndex];
      let newTd = tdEl.cloneNode(true);

      newTd.classList.remove('selected');
      tdEl.after(newTd);
    });
  }

  /**
   * @desc 테이블 열을 병합한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tableMeargeCol(el) {
    let tableEl = el.$closest('table');
    let tr;
    let tdIndex = Jinja.dom.findIndex(el.parentElement, el);
    let colspan = parseInt(el.getAttribute('colspan')) || 1;
    let rowspan = parseInt(el.getAttribute('rowspan')) || 1;

    colspan += 1;

    for (let r = 0; r < rowspan; r++) {
      if (tr) tr = tr.nextElementSibling;
      else tr = el.$closest('tr');

      if (tr) {
        for (let c = 0; c < colspan; c++) {
          if (tr.children[tdIndex + c]) {
            tr.children[tdIndex + c].hidden = true;
          }
        }
      }
    }

    el.hidden = false;
    el.setAttribute('colspan', colspan);
    el.setAttribute('rowspan', rowspan);
    el.click();
  }

  /**
   * @desc 테이블 열을 삭제한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tableRemoveCol(el) {
    let tableEl = el.$closest('table');
    let tdIndex = Jinja.dom.findIndex(el.parentElement, el);
    let next = el.nextElementSibling;

    if (tableEl.querySelector('colgroup')) {
      tableEl.querySelector('colgroup').children[tdIndex].remove();
    }

    tableEl.querySelectorAll('thead tr').forEach(tr => {
      let thEl = tr.children[tdIndex].remove();
    });

    tableEl.querySelectorAll('tbody tr').forEach(tr => {
      let tdEl = tr.children[tdIndex].remove();
    });

    if (next) {
      next.click();
    }
  }

  /**
   * @desc 테이블 병합을 취소한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  tableMeargeCancel(el) {
    let tableEl = el.$closest('table');
    let tr;
    let tdIndex = Jinja.dom.findIndex(el.parentElement, el);
    let colspan = parseInt(el.getAttribute('colspan')) || 1;
    let rowspan = parseInt(el.getAttribute('rowspan')) || 1;

    for (let r = 0; r < rowspan; r++) {
      if (tr) tr = tr.nextElementSibling;
      else tr = el.$closest('tr');

      if (tr) {
        for (let c = 0; c < colspan; c++) {
          if (tr.children[tdIndex + c]) {
            tr.children[tdIndex + c].hidden = false;
          }
        }
      }
    }

    el.removeAttribute('colspan');
    el.removeAttribute('rowspan');
    el.click();
  }

  /**
   * @desc 엘리먼트의 이미지를 변경한다.
   * @param {Element} - 대상 엘리먼트
   * @return {Obejct} - 이미지 정보
   * @example -
   */
  changeImage(el) {
    return JJHee.open('getImage.610.uc', {
      search: {},
      position: {
        width: '80%',
      },
      isModal: true,
      isMoveable: true,
    })
      .then(result => {
        if (el) {
          el.src = result.images[0];
        }

        return result.images;
      })
      .catch(ex => console.error(ex));
  }

  /**
   * @async
   * @desc 엘리먼트의 배경이미지를 변경한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  async changeBackImage(el) {
    let result = await JJModal602.show('ui60.dialog.getImage.uc');

    el.style.backgroundImage = `url(${result[0]})`;
  }

  /**
   * @desc 엘리먼트의 아이콘을 변경한다.
   * @param {Element} - 대상 엘리먼트
   * @return {Obejct} - 아이콘 정보
   * @example -
   */
  changeIcon(el) {
    JJHee.open('getIcon.610.uc', {
      search: {},
      position: {
        width: '80%',
      },
      isModal: true,
      isMoveable: true,
    })
      .then(result => {
        if (el) {
          el.classList.forEach(item => {
            if (item.startsWith('fa-')) {
              if (
                !['fa-1x', 'fa-2x', 'fa-3x', 'fa-4x', 'fa-5x'].includes(item)
              ) {
                el.classList.remove(item);
              }
            }
          });

          el.classList.add(result.class);
        }

        return result;
      })
      .catch(ex => {});
  }

  /**
   * @desc 엘리먼트의 태그명을 변경한다.
   * @param {Element} - 대상 엘리먼트
   * @return {Element} - 변경된 엘리먼트
   * @example -
   */
  changeTag(el, tagName) {
    let newEl = document.createElement(tagName);
    
    for (let i = 0; i < el.attributes.length; i++) {
      newEl.setAttribute(el.attributes[i].name, el.attributes[i].value);
    }
    
    var children = el.childNodes;
    
    for (let i = 0; i < children.length; i++) {
      newEl.appendChild(children[i]);
    }
    
    el.before(newEl);
    el.remove();

    return newEl;
  }

  /**
   * @async
   * @desc 유튜브 주소를 변경한다.
   * @param {Element} - 대상 엘리먼트
   * @return {Obejct} - 유튜브 주소 정보
   * @example -
   */
  async changeYouTube(el) {
    JJHee.open('getYouTube.610.uc', {
      search: {},
      position: {
        width: '80%',
      },
      isModal: true,
      isMoveable: true,
    })
      .then(result => {
        if (el) {
          el.querySelector('iframe').src = result.url;
        }

        return result;
      })
      .catch(ex => {});
  }

  /**
   * @async
   * @desc 엘리먼트의 앞에 아이콘을 추가한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  async insertIcon(el) {
    let result = await JJModal602.show('ui60.dialog.getIcon.uc');
    let icon = document.createElement('i');

    icon.classList.add('fa');
    icon.classList.add(result.class);

    let selObj = el.ownerDocument.getSelection();
    let node = selObj.anchorNode;

    if (node) {
      let bf = selObj.anchorNode.data.substr(0, selObj.anchorOffset);
      let ft = selObj.anchorNode.data.substr(selObj.focusOffset);

      node.before(document.createTextNode(bf));
      node.before(icon);
      node.before(document.createTextNode(ft));
      node.remove();
    } else {
      el.insertBefore(icon, el.childNodes[0]);
    }
  }

  /**
   * @async
   * @desc 엘리먼트의 앞에 텍스트를 추가한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  async insertText(el) {
    let selObj = el.ownerDocument.getSelection();
    let selText = selObj.toString();
    let node = selObj.anchorNode;
    let bf = selObj.anchorNode.data.substr(0, selObj.anchorOffset);
    let ft = selObj.anchorNode.data.substr(selObj.focusOffset);

    let n = document.createElement('t');
    let t = document.createTextNode(selText);

    n.appendChild(t);
    n.style.color = 'red';

    if (el.isContentEditable) {
      node.before(document.createTextNode(bf));
      node.before(n);
      node.before(document.createTextNode(ft));
      node.remove();
    }
  }

  /**
   * @async
   * @desc 엘리먼트의 앞에 앵커태그를 추가한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  async insertLink(el, fileId) {
    JJHee.open('getLinkPage.610.uc', {
      search: {
        fileId: fileId,
      },
      position: {
        width: '80%',
      },
      isModal: true,
      isMoveable: true,
    })
      .then(result => {
        let linkEl;

        let selObj = el.ownerDocument.getSelection();
        let selText = selObj.toString();

        if (el.isContentEditable && selText) {
          let node = selObj.anchorNode;
          let bf = selObj.anchorNode.data.substr(0, selObj.anchorOffset);
          let ft = selObj.anchorNode.data.substr(selObj.focusOffset);

          linkEl = document.createElement('a');

          let t = document.createTextNode(data.title);

          linkEl.appendChild(t);
          linkEl.style.color = 'red';

          if (el.isContentEditable) {
            node.before(document.createTextNode(bf));
            node.before(linkEl);
            node.before(document.createTextNode(ft));
            node.remove();
          }
        } else {
          linkEl = el.$closest('a');

          if (!linkEl) {
            linkEl = document.createElement('a');
            el.after(linkEl);
            linkEl.appendChild(el);
          }
        }

        linkEl.title = result.fileInfo.NAME;
        linkEl.href = result.value;
      })
      .catch(ex => {});
  }

  /**
   * @desc 앵커태그의 링크 정보를 삭제한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  unLink(el) {
    let linkEl = el.$closest('a');

    if (linkEl) {
      linkEl.removeAttribute('href');
      linkEl.removeAttribute('target');
    } else {
      $topMessage("링크해제를 위한 'A'테그를 찾을 수 없습니다.");
    }
  }

  /**
   * @async
   * @desc 색상 팔렛트를 설정한다.
   * @param {String} - 색상 팔렛트 정보
   * @example -
   */
  async setColorSheme(schemeLess) {
    schemeLess = `.jj{ \n ${schemeLess} \n }`;

    let result = await Jinja.dom.less2css(schemeLess);

    if (document.querySelector('[jj-uc-id="ui60.appColor.less"] style')) {
      document.querySelector(
        '[jj-uc-id="ui60.appColor.less"] style'
      ).innerText = result;
    }
    // 운영신규
    else if (document.querySelector('[jj-uc-id="ui60.color"]')) {
      document.querySelector('[jj-uc-id="ui60.color"]').innerText = result;
    }
    // 운영갱신
    else {
      let newStyle = `<style jj-uc-id="ui60.color">${result}</style>`;

      Jinja.insertAdjacentHTML('afterbegin', newStyle);
    }

    // 반영된 결과를 서버에 반영한다
    let colorUri = workspaceMeta.WORKSPACE.colorUri || 'ui602.color.scheme.less';
    let colorFileInfo = await Jinja.resource.getUri(colorUri);

    await Jinja.studioV6Api.updateFileBody(colorFileInfo.ID, schemeLess);
  }

  /**
   * @desc 엘리먼트의 스타일을 일괄적용한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  setStyle(el, obj) {
    let keys = Object.keys(obj), keyLength = keys.length, loopX = 0;

    while (loopX < keyLength) {
      let key = keys[loopX], data = obj[key];

      el.style[key] = data;

      loopX++;
    }
  }

  /**
   * @desc less 데이터를 css 데이터로 반환한다.
   * @param {String} - Less 데이터
   * @return {String} - CSS 데이터
   * @example -
   */
  _lessRender(lessCss) {
    return less
      .render(lessCss)
      .then(output => {
        return output.css;
      })
      .catch(error => {});
  }

  /**
   * @desc less 데이터를 css 데이터로 변환시 오류 여부를 반환한다.
   * @param {String} - Less 데이터
   * @return {String} - CSS 데이터
   * @example -
   */
  verifyCss(source) {
    return this._lessRender(source);
  }

  /**
   * @async
   * @desc less 데이터를 css 데이터로 반환한다.
   * @param {String} - Less 데이터
   * @param {String} - 고유 식별자 아이디
   * @return {String} - CSS 데이터
   * @example -
   */
  async less2css(source, uuid) {
    let lessCss;

    if (uuid) {
      lessCss = `[jj-uuid="${uuid}"] {${Jinja.lessRuleset || ''}${source || ''}}`;
    } else {
      lessCss = `.jj {${source || ''}}`;
    }

    if (less) {
      let output = await less.render(lessCss);

      if (output) {
        return output.css;
      } else {
        return source;
      }
    } else {
      return source;
    }
  }

  /**
   * @desc 지정한 uuid에 해당하는 less 데이터를 css 데이터로 반환한다.
   * @param {String} - Less 데이터
   * @param {String} - 고유 식별자 아이디
   * @return {String} - CSS 데이터
   * @example -
   */
  lessUUIDcss(source, uuid) {
    let lessCss = `[jj-uuid="${uuid}"] {${Jinja.lessRuleset || ''}${source || ''}}`;

    return this._lessRender(lessCss);
  }

  /**
   * @desc 지정한 fileId에 해당하는 less 데이터를 css 데이터로 반환한다.
   * @param {String} - Less 데이터
   * @param {String} - 필드 아이디
   * @return {String} - CSS 데이터
   * @example -
   */
  lessFileIdCss(source, fileId) {
    let lessCss = `[jj-fileid="${fileId}"] {${Jinja.lessRuleset || ''}${source || ''}}`;

    return this._lessRender(lessCss);
  }

  /**
   * @desc .jj 클래스에 해당하는 less 데이터를 css 데이터로 반환한다.
   * @param {String} - Less 데이터
   * @return {String} - CSS 데이터
   * @example -
   */
  lessJJcss(source) {
    let lessCss = `.jj {${Jinja.lessRuleset || ''}${source || ''}}`;

    return this._lessRender(lessCss);
  }

  /**
   * @desc less 데이터를 css 데이터로 반환한다.
   * @param {String} - Less 데이터
   * @return {String} - CSS 데이터
   * @example -
   */
  lessThemeCss(source) {
    let lessCss = `${Jinja.lessRuleset || ''}${source || ''}`;

    return less
      .render(lessCss)
      .then(output => {
        return output.css;
      })
      .catch(error => {});
  }

  /**
   * @async
   * @desc less 데이터를 css 데이터로 반환한다.
   * @param {} - 
   * @return {} - 
   * @example -
   */
  async lessNoFramework(source) {
    return this._lessRender(source);
  }

  /**
   * @desc 스타일 노드를 생성한다.
   * @param {Element} - 대상 엘리먼트
   * @return {String} - 스타일 정보
   * @example -
   */
  createStyleNode(el, css) {
    let style = document.createElement('style');

    style.type = 'text/css';
    style.setAttribute('rel', 'stylesheet');
    style.appendChild(document.createTextNode(css || ''));

    el.appendChild(style);
  }

  /**
   * @desc 스크립트 노드를 생성한다.
   * @param {Element} - 대상 엘리먼트
   * @return {String} - 스크립트 정보
   * @example -
   */
  createScriptNode(el, script) {
    return new Promise((resolve, reject) => {
      let scriptNode = document.createElement('script');

      scriptNode.appendChild(document.createTextNode(script));
      scriptNode.onload = () => resolve(scriptNode);

      el.appendChild(scriptNode);

      resolve(scriptNode);
    });
  }

  /**
   * @desc page file 오픈시 초기화 작업을 실행한다.
   * @param {Element} - 대상 엘리먼트
   * @param {String} - 고유 식별자 아이디
   * @example -
   */
  pageBefore(hee, uuid) {
    // 테마 페이지인 경우는 JJ컨텐츠 영역에 바로 생성하기 때문에 jj-uuid가 존재하지 않을수 있음
    hee.form.querySelectorAll('[_pageBefore-init').forEach(el => {
      if (el.pageBeforeInit) el.pageBeforeInit();
    });

    hee.form.querySelectorAll('[jj-id]').forEach(el => (hee[el.getAttribute('jj-id')] = el));
    hee.form.querySelectorAll('[id]').forEach(el => (hee[el.getAttribute('id')] = el));

    hee.form.addEventListener('click', e => {
      if (this.closest(e.target, '[jj-command]')) {
        e.preventDefault();
        e.stopPropagation();

        let target = this.closest(e.target, '[jj-command]');
        let cmdString = target.getAttribute('jj-command');

        this.cmdParaApply(cmdString, e, hee);
      }

      if (this.closest(e.target, '[jj-controller]')) {
        e.preventDefault();
        e.stopPropagation();

        let target = this.closest(e.target, '[jj-controller]');
        let cmdString = target.getAttribute('jj-controller');

        this.ctrlParaApply(cmdString, e, hee);
      }
    });
  }

  /**
   * @desc 엘리먼트에 속성을 클래스를 추가한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Array} - 추가 클래스 목록
   * @example -
   */
  classAdd(el, arr) {
    arr.forEach(name => el.classList.add(name));
  }

  /**
   * @desc 엘리먼트에 속성을 클래스를 삭제한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Array} - 삭제 클래스 목록
   * @example -
   */
  classRemove(el, arr) {
    arr.forEach(name => el.classList.remove(name));
  }

  /**
   * @desc 엘리먼트에 속성을 클래스를 추가, 삭제한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Array} - 삭제 클래스 목록
   * @param {Array} - 추가 클래스
   * @example -
   */
  classRemoveAdd(el, arr, addClass) {
    arr.forEach(name => {
      if (name) el.classList.remove(name);
    });
    if (addClass) el.classList.add(addClass);
  }

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJDom');
  }
}

Jinja.addModule('dom', JJDom);

if (!Element.prototype.$classAdd) {
  Element.prototype.$classAdd = function (arr) {
    return Jinja.dom.classAdd(this, arr);
  };
}

if (!Element.prototype.$classRemove) {
  Element.prototype.$classRemove = function (arr) {
    return Jinja.dom.classRemove(this, arr);
  };
}

if (!Element.prototype.$classRemoveAdd) {
  Element.prototype.$classRemoveAdd = function (arr, addClass) {
    return Jinja.dom.classRemoveAdd(this, arr, addClass);
  };
}

if (!Element.prototype.$remove) {
  Element.prototype.$remove = function () {
    return Jinja.dom.remove(this);
  };
}

if (!Element.prototype.$empty) {
  Element.prototype.$empty = function () {
    return Jinja.dom.empty(this);
  };
}

if (!Element.prototype.$parentAll) {
  Element.prototype.$parentAll = function (selector, root) {
    return Jinja.dom.parents(this, root, selector);
  };
}

if (!Element.prototype.$closest) {
  Element.prototype.$closest = function (matches, root) {
    return Jinja.dom.closest(this, matches, root);
  };
}

if (!Element.prototype.$uuid) {
  Element.prototype.$uuid = function () {
    return Jinja.dom.uuid(this);
  };
}
/* ==JJRequire.640.class================ */

/**
 * @classdesc JJ Require 관리를 위한 클래스
 */
class JJRequire extends JJModule {
  
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61"
    };
  }      
  /**
   * @desc 내부 변수를 설정한다.
   * @example -
   */
  _setEvent() {
    this.metadb = {
      libs: workspaceMeta.requireConfig || {},
      loadStatus: false,
      loadQueue: {}
    };

    this._appendEl = Jinja || document.body;
    this._autoLoad();
  }

  /**
   * @desc 어플리케이션 설치정보에 등록된 라이브러리를 자동으로 내려 받는다.
   * @example -
   */
  _autoLoad() {
    let keys = Object.keys(this.metadb.libs), keyLength = keys.length, loopX = 0;

    while (loopX < keyLength) {
      let key = keys[loopX], data = this.metadb.libs[key];

      if (data.status == 'loaded') {
        this.metadb.loadQueue[key] = {
          status: 'loaded',
          actions: []
        };
      } else if (data.status == 'auto') {
        this.load(key);
      }

      loopX++;
    }

    this.metadb.loadStatus = true;
  }

  /**
   * @async
   * @desc 지정한 라이브러리를 페이지에 추가한다.
   * @param {String} - 대상 라이브러리명
   * @param {String} - 대상 라이브러리
   * @throw {JJBizException} - 비즈니스 예외
   * @return {Promiss} - 라이브러리 추가 상태
   * @example -
   */
  async load(name, libs) {
    if (!navigator.onLine) {
      console.error(`Require.load() \n 현재 네트웤이 사용할수 없어 모듈[${name}] 을 로드 할수 없습니다.`);

      throw `Require.load() \n 현재 네트웤이 사용할수 없어 모듈[${name}] 을 로드 할수 없습니다.`;
    }

    if (!this.metadb.libs[name] && !libs) {
      throw new JJBizException(null, name + ' require libs not found');
    } else if (!this.metadb.libs[name] && libs) {
      this.metadb.libs[name] = libs;
    }

    if (this.metadb.loadQueue[name]) {
      return this.metadb.loadQueue[name];
    } else {
      this.metadb.loadQueue[name] = new Promise(async (resolve, reject) => {
        let cssFiles = this.metadb.libs[name].css;

        if (cssFiles && cssFiles.length > 0) {
          for (let i = 0; i <= cssFiles.length; i++) {
            let cssFile = this.metadb.libs[name].css[i];

            if (cssFile) {
              await this.appendChildStyle(cssFile);
            }
          }
        }

        let jsFiles = this.metadb.libs[name].js;

        if (jsFiles && jsFiles.length > 0) {
          for (let i = 0; i <= jsFiles.length; i++) {
            let jsFile = this.metadb.libs[name].js[i];

            if (jsFile) {
              await this.appendChildScript(jsFile);
            }
          }
        }

        let componentFiles = this.metadb.libs[name].component;

        if (componentFiles && componentFiles.length > 0) {
          for (let i = 0; i <= componentFiles.length; i++) {
            let componentUri = this.metadb.libs[name].component[i];

            if (componentUri) {
              await this.appendChildComponent(componentUri);
            }
          }
        }

        resolve('OK');
      });

      return this.metadb.loadQueue[name];
    }
  }

  /**
   * @async
   * @desc 지정한 스타일 파일을 페이지에 추가한다.
   * @param {String} - 대상 스타일 경로
   * @example -
   */
  async appendChildStyle(cssPath) {
    return new Promise((resolve, reject) => {
      let arr = cssPath.split('|');
      let libStyle = document.createElement('link');

      libStyle.type = 'text/css';
      libStyle.rel = 'stylesheet';
      libStyle.href = Jinja.getCdnPath(arr[0]);

      if (arr.length === 2) {
        libStyle.media = arr[1];
      }

      libStyle.onload = () => resolve('OK');
      libStyle.onerror = ex => reject(ex);

      this._appendEl.appendChild(libStyle);
    });
  }

  /**
   * @async
   * @desc 지정한 자바스크립트 파일을 페이지에 추가한다.
   * @param {String} - 대상 자바스크립트 경로
   * @example -
   */
  async appendChildScript(jsPath) {
    return new Promise((resolve, reject) => {
      let script = document.createElement('script');

      script.src = Jinja.getCdnPath(jsPath);
      script.onload = () => resolve('OK');
      script.onerror = ex => reject(ex);

      this._appendEl.appendChild(script);
    });
  }

  /**
   * @async
   * @desc 지정한 컴포넌트를 페이지에 추가한다.
   * @param {String} - 대상 컴포넌트 URI
   * @return {Promise} - 추가결과
   * @example -
   */
  async appendChildComponent(uri) {
    return new Promise((resolve, reject) => {
      Jinja.ajax.getResourceUri(uri)
        .then(result => {
          let component = Jinja.global.json(result.BODY);

          if (component.css) {
            let oldCss = this._appendEl.querySelector(`[component="${uri}"]`);

            if (oldCss) {
              oldCss.remove();
            }

            let style = document.createElement('style');

            style.type = 'text/css';
            style.setAttribute('rel', 'stylesheet');
            style.setAttribute('component', uri);
            style.appendChild(document.createTextNode(component.css || ''));

            this._appendEl.appendChild(style);
          }

          if (component.script) {
            let scriptNode = document.createElement('script');

            scriptNode.appendChild(document.createTextNode(component.script));

            this._appendEl.appendChild(scriptNode);

            scriptNode.remove();
          }

          resolve('OK');
        })
        .catch(ex => reject(ex));
    });
  }

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJRequire');
  }
}

Jinja.addModule('require', JJRequire);
/* ==JJException.640.class================ */

/**
 * @classdesc 예외처리 관리를 위한 클래스
 */
class JJException extends JJModule {
  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    window.addEventListener('error', e => {
      this._actionDo(e.error[4] || e.error);

      return false;
    });

    window.addEventListener('unhandledrejection', e => {
      this._actionDo(e.reason);
    });

    window.addEventListener('rejectionhandled', e => {
      console.error(e.error);
    });
  }

  /**
   * @desc 오류객체를 식별하고 관련 후처리를 실시한다.
   * @param {Exception} - 오류객체
   * @example -
   */
  _actionDo(error) {
    if (error instanceof JJBizStop) {
      return;
    }

    if (error instanceof TypeError) {
      console.log(error.stack.split('\n').map(text => text.trim()));

      alert(error.constructor.name + '\n' + error.message);
    } else if (error instanceof JJAopException) {
      let errMap = [];
      let rootError = error;

      while (rootError) {
        errMap.push(
          rootError.sourceClass.constructor.name + '.' + rootError.method
        );

        if (rootError.innerEx instanceof JJAopException) {
          rootError = rootError.innerEx;
        } else {
          rootError = null;
        }
      }

      alert(
        error.constructor.name +
        '\n' +
        error.message +
        '\n class : ' +
        errMap.join(' > ')
      );

      if (error instanceof JJBizException) {
        if (Error.captureStackTrace) {}
      }
    } else if (error instanceof JJBizException) {
      alert(error.constructor.name + '\n' + error.message);
    } else if (error instanceof JJAjaxException) {
      if (error.options.errorNumber == 40350) { // 토큰 종료에러
        Jinja.confirm.info(`인증이 만료되었습니다.\n ${error.constructor.name + '\n' + error.options.message}\n 재 로그인이 필요합니다`)
          .then(() =>location.reload());
      } else {
      	alert(error.constructor.name + '\n' + error.options.message);
      }
    } else {
      alert('정의되지않은 오류' + '\n' + error);
    }
  }

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJException');
  }
}

Jinja.addModule('exception', JJException);

/**
 * @classdesc 비즈니스 정지 예외처리 관리를 위한 클래스
 */
class JJBizStop extends Error {
  constructor(message, ...params) {
    super(...params);
    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, JJBizStop);
    }

    this.message = message;
    this.date = new Date();
  }  
}

/**
 * @classdesc 비즈니스 로직 예외처리 관리를 위한 클래스
 */
class JJBizException extends Error {
  /**
   * @desc 생성자
   * @param {Number} - 에러번호
   * @param {...*} - 기타 파라미터
   */
  constructor(errorNumber, ...params) {
    super(...params);

    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, JJBizException);
    }

    this.errorNumber = errorNumber;
    this.date = new Date();
  }
}

/**
 * @classdesc 비동기 통신 예외처리 관리를 위한 클래스
 */
class JJAjaxException extends Error {
  /**
   * @desc 생성자
   * @param {...*} - 기타 파라미터
   */
  constructor(...params) {
    super(...params);

    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, JJAjaxException);
    }

    let defaultOption = {
      errorNumber: parseInt(params[0].code),
      message: params[0].message,
      sqlText: params[0].sqlText,
      sqlParameter: params[0].sqlParameter,
      venderCode: params[0].venderCode,
      exceptionType: params[0].exceptionType,
      innerEx: params[0],
      trace: params[0].trace,
      source: '',
      sourceLine: '',
      function: '',
      stack: [],
      actionCode: '',
      actionMessage: '',
      auctionUrl: '',
      descipt: ''
    };

    this.options = Object.assign(defaultOption, params[0]);
  }
}
/* ==JJFinal.640.class================ */

/**
 * @classdesc Final 관리를 위한 클래스
 */
class JJFinal extends JJModule {
  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJFinal');
  }
}
/* ==JJGlobal.640.class================ */

/**
 * @classdesc 전역 유틸리티 함수 관리를 위한 클래스
 */
class JJGlobal extends JJModule {
  /**
   * @desc 지정한 데이터를 문자열로 반환한다.
   * @param {*} - 대상 데이터
   * @return {String} - 문자열 데이터
   * @example -
   */
  string(val) {
    if (val === undefined || val === null) {
      return null;
    }

    if (val instanceof Date) {
      return val.toJSON();
    } else if (typeof val == 'object') {
      if (val.tagName) {
        return 'object[element]:' + val.tagName + '.' + val.classList.value;
      } else {
        return JSON.stringify(val, null, 2);
      }
    } else {
      if (val) {
        return String(val);
      } else {
        return val;
      }
    }
  }

  /**
   * @desc 지정한 데이터를 정수로 반환한다.
   * @param {*} - 대상 데이터
   * @return {Number} - 정수 데이터
   * @example -
   */
  int(val) {
    return parseInt(val);
  }

  /**
   * @desc 지정한 데이터를 실수로 반환한다.
   * @param {*} - 대상 데이터
   * @return {Number} - 실수 데이터
   * @example -
   */
  float(val) {
    return parseFloat(val);
  }

  /**
   * @desc 지정한 문자열을 JSON 데이터로 반환한다.
   * @param {String} - 대상 문자열
   * @return {Object} - JSON 데이터
   * @example -
   */
  json(val) {
    let result = {};

    if (val) {
      if ('string' == typeof val) {
        result = JSON.parse(val);
      } else {
        result = val;
      }
    }

    return result;
  }

  /**
   * @desc 데이터 타입을 반환한다.
   * @param {*} - 대상 데이터
   * @return {String} - 데이터 타입
   * @example -
   */
  type(val) {
    return typeof val;
  }



  /**
   * @desc 지정한 데이터가 정수형인지 여부를 반환한다.
   * @param {*} - 대상 데이터
   * @return {Boolean} - 정수형 여부
   * @example -
   */
  isInt(val) {
    return !isNaN(val) && Number.isInteger(parseInt(val));
  }

  /**
   * @desc 지정한 데이터가 날짜형인지 여부를 반환한다.
   * @param {*} - 대상 데이터
   * @return {Boolean} - 날짜형 여부
   * @example -
   */
  isDate(val) {
    let result = false;

    if (val instanceof Date) result = true;

    return result;
  }

  CSVToArray( strData, strDelimiter ){
    // Check to see if the delimiter is defined. If not,
    // then default to comma.
    strDelimiter = (strDelimiter || ",");

    // Create a regular expression to parse the CSV values.
    let objPattern = new RegExp(
      (
        // Delimiters.
        "(\\" + strDelimiter + "|\\r?\\n|\\r|^)" +

        // Quoted fields.
        "(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|" +

        // Standard fields.
        "([^\"\\" + strDelimiter + "\\r\\n]*))"
      ),
      "gi"
    );


    // Create an array to hold our data. Give the array
    // a default empty first row.
    let arrData = [[]];

    // Create an array to hold our individual pattern
    // matching groups.
    let arrMatches = null;


    // Keep looping over the regular expression matches
    // until we can no longer find a match.
    while (arrMatches = objPattern.exec( strData )){

      // Get the delimiter that was found.
      let strMatchedDelimiter = arrMatches[ 1 ];

      // Check to see if the given delimiter has a length
      // (is not the start of string) and if it matches
      // field delimiter. If id does not, then we know
      // that this delimiter is a row delimiter.
      if (
        strMatchedDelimiter.length &&
        strMatchedDelimiter !== strDelimiter
      ){

        // Since we have reached a new row of data,
        // add an empty row to our data array.
        arrData.push( [] );

      }

      let strMatchedValue;

      // Now that we have our delimiter out of the way,
      // let's check to see which kind of value we
      // captured (quoted or unquoted).
      if (arrMatches[ 2 ]){

        // We found a quoted value. When we capture
        // this value, unescape any double quotes.
        strMatchedValue = arrMatches[ 2 ].replace(
          new RegExp( "\"\"", "g" ),
          "\""
        );

      } else {

        // We found a non-quoted value.
        strMatchedValue = arrMatches[ 3 ];

      }


      // Now that we have our value string, let's add
      // it to the data array.
      arrData[ arrData.length - 1 ].push( strMatchedValue );
    }

    // Return the parsed data.
    return( arrData );
  } 

  /**
   * @desc 고유 식별자 아이디를 생성 반환한다.
   * @return {String} - 고유 식별자 아이디
   * @example -
   */
  uuid() {
    let d = new Date().getTime();

    if (window.performance && typeof window.performance.now === 'function') {
      d += performance.now();
    }

    let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(
      /[xy]/g,
      function (c) {
        let r = (d + Math.random() * 16) % 16 | 0;

        d = Math.floor(d / 16);

        return (c == 'x' ? r : (r & 0x3) | 0x8).toString(16);
      }
    );

    return 'a'+uuid;
  }

  /**
   * @desc JSON 데이터를 CSV 데이터로 변환하여 반환한다.
   * @param {Array} - 대상 JSON 데이터
   * @return {String} - CSV 데이터
   * @example -
   */
  json2csv(objArr) {
    let array = typeof objArr != 'object' ? JSON.parse(objArr) : objArr;
    let str = '';
    let line = '';
    let head = array[0];

    for (let index in array[0]) {
      if (index.substring(0, 1) != '_') {
        line += index + ',';
      }
    }

    line = line.slice(0, -1);
    str += line + '\r\n';

    for (let i = 0; i < array.length; i++) {
      let line = '';

      for (let index in array[i]) {
        if (index.substring(0, 1) != '_') {
          let val = array[i][index];

          if (val == null || val == undefined) {
            val = '';
          }

          line += val + ',';
        }
      }

      line = line.slice(0, -1);
      str += line + '\r\n';
    }

    return str;
  }

  /**
   * @desc JSON 데이터를 HTML 문자열로 변환하여 반환한다.
   * @param {Array} - 대상 JSON 데이터
   * @return {String} - HTML 문자열
   * @example -
   * 출력제한 기능을 부여한다
   */
  json2html(rows, options) {
    options = options || {};
    if(!rows || rows.length ==0){
      return `<h4>No Data</h4>`;
    }
    let bodyHtml = '<table>';

    bodyHtml += '<thead><tr>';

    let htmlRows, headers, columns = options.cols || Object.keys(rows[0]);
    // 만일 임의로 컬럼순서를 랜더링한다면 시스템컬럼은 뒤로 보내게 한다
    if(options.sysColumnRight && !options.cols){
      let sysColumn = ["KEY_ID","REG_DATETIME","REG_USER_ID","REG_USER_NAME"
                       ,"EDT_DATETIME","EDT_USER_ID","EDT_USER_NAME"
                       ,"OWNER_ID","OWNER_NAME"
                       ,"APPV_ID","APPV_NAME","APPV_STATUS","APPV_REQ_DATETIME","APPV_DATETIME"];

      let showColumns = [];
      let showSysColumns = [];
      columns.forEach(col=>{
        if(sysColumn.includes(col)){
          showSysColumns.push(col);
        } else {
          showColumns.push(col);
        }
      })
      columns = showColumns.concat(showSysColumns);
    }


    headers = options.heads || columns;
    htmlRows = rows;

    /** 랜더링을 모든 Row를 하게 되면 시스템이 정지할수 있어서 권장 50건만 진행함) */
    if (options.maxLength) {
      htmlRows = rows.slice(0, options.maxLength);
    }


    headers.forEach(key => (bodyHtml += '<th>' + key + '</th>'));

    bodyHtml += '</tr></thead><tbody>';

    htmlRows.forEach((row, index) => {
      let tr = '<tr>';

      for (let c = 0; c < columns.length; c++) {
        let column = columns[c];
        let txt = row[column];
        if (typeof(txt)=="number"){
          switch(options.numFormat){
            case "INT":
              tr += '<td class="text-right">' + txt.$toIntFormat() + '</td>';
              break;
            case "FLOAT":
              tr += '<td class="text-right">' + txt.$toFloatFormat() + '</td>';
              break;
            default:
              tr += '<td class="text-right">' + txt + '</td>';
              break;
          }
        } else {
          tr += '<td>' + txt + '</td>';  
        }

      }

      tr += '</tr>';
      bodyHtml += tr;
    });

    bodyHtml += '</tbody></table>';

    return bodyHtml;
  }

  /**
   * @desc JSON 데이터를 get통신하기 위해서 URL로 변환하여 반환한다.
   * @param {String} - URL
   * @return {Object} - JSON 데이터
   * @example -
   */
  map2getPara(url, data) {
    let result = url;

    if (data) {
      result += '?';
      result += Object.keys(data)
        .map(k => {
        return (
          encodeURIComponent(k) +
          '=' +
          encodeURIComponent(this.string(data[k]))
        );
      })
        .join('&');
    }

    return result;
  }

  /**
   * @desc 지정한 데이터가 Null값인 경우 빈문자열을 반환한다.
   * @param {*} - 대상 데이터
   * @return {*} - 빈문자열|데이터
   * @example -
   */
  nullSpace(val) {
    if (val === null) return '';
    else if (val === undefined) return '';
    else return val;
  }

  /**
   * @desc 지정한 JSON 데이터를 CSV 파일로 다운로드 한다.
   * @param {Array} - 대상 JSON 데이터
   * @param {String} - 파일제목
   * @param {Number} - 컬럼개수
   * @param {Number} - 헤더개수
   * @example -
   */
  exportCSV(JSONData, ReportTitle, cols, heads) {
    let rows = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;
    let CSV = '', row = '';

    CSV += ReportTitle + '\r\n\n';

    let columns = cols || Object.keys(rows[0]);
    let headers = heads || columns;



    CSV += headers.join(',') + '\r\n';

    rows.forEach(row=>{
      columns.forEach(col=>CSV += row[col]+',')
      CSV += '\r\n';
    })


    let fileName = 'MyReport_';

    fileName += ReportTitle.replace(/ /g, '_');

    let uri =
        'data:application/csv;charset=utf-8,%EF%BB%BF' + encodeURIComponent(CSV);
    let link = document.createElement('a');

    link.href = uri;
    link.style = 'visibility:hidden';
    link.download = fileName + '.csv';

    document.body.appendChild(link);

    link.click();

    document.body.removeChild(link);
  }

  XexportCSV(JSONData, ReportTitle, cols, heads) {
    let arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;
    let CSV = '', row = '';

    CSV += ReportTitle + '\r\n\n';

    let columns = cols || Object.keys(arrData[0]);
    let headers = heads || columns;

    row = '';

    for (let index in headers[0]) {
      row += index + ',';
    }

    CSV += row + '\r\n';

    for (let i = 0; i < arrData.length; i++) {
      row = '';

      for (let col in columns) {
        row += '"' + arrData[i][col] + '",';
      }

      row.slice(0, row.length - 1);

      CSV += row + '\r\n';
    }

    if (CSV === '') {
      alert('Invalid data');

      return;
    }

    let fileName = 'MyReport_';

    fileName += ReportTitle.replace(/ /g, '_');

    let uri =
        'data:application/csv;charset=utf-8,%EF%BB%BF' + encodeURIComponent(CSV);
    let link = document.createElement('a');

    link.href = uri;
    link.style = 'visibility:hidden';
    link.download = fileName + '.csv';

    document.body.appendChild(link);

    link.click();

    document.body.removeChild(link);
  }

  exportJson(JSONData, fileName) {
    let body = this.string(JSONData);	
    fileName = fileName||"export";

    let uri = 'data:application/json;charset=utf-8,%EF%BB%BF' + encodeURIComponent(body);
    let link = document.createElement('a');

    link.href = uri;
    link.style = 'visibility:hidden';
    link.download = fileName + '.jdf';

    document.body.appendChild(link);

    link.click();

    document.body.removeChild(link);
  }


  /**
   * @desc 지정한 HTML Table 데이터를 엑셀 파일로 다운로드 한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Array} - 대상 데이터
   * @param {String} - 제목
   * @param {Number} - 컬럼개수
   * @param {Number} - 헤더개수
   * @example -
   */
  exportHtmlTable(tableEl, dataset, title, cols, heads) {
    let exportDiv = document.createElement('div');

    exportDiv.classList.add('hidden');

    let caption = document.createElement('h2');
		title = title||"분석";
    caption.appendChild(document.createTextNode(title));

    exportDiv.appendChild(caption);
    exportDiv.appendChild(tableEl.cloneNode(true));

    exportDiv.querySelectorAll('thead th').forEach(el => {
      el.style.backgroundColor = '#e1eaf8';
      el.style.color = 'black';
    });

    exportDiv.querySelectorAll('table').forEach(el => {
      el.setAttribute('border', '1');
    });

    exportDiv.querySelector('tbody').innerHTML = json2excelHtml(dataset, cols);

    let htmltable = exportDiv.innerHTML;

    var excelFile =
        `<html xml:lang='en-US' xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:excel' xmlns='http://www.w3.org/TR/REC-html40'>` +
        `<head>` +
        `<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />` +
        `<!--[if gte mso 9]>` +
        `<xml>` +
        `<x:ExcelWorkbook>` +
        `<x:ExcelWorksheets>` +
        `<x:ExcelWorksheet>` +
        `<x:Name>` +
        `{worksheet}` +
        `</x:Name>` +
        `<x:WorksheetOptions>` +
        `<x:DisplayGridlines/>` +
        `</x:WorksheetOptions>` +
        `</x:ExcelWorksheet>` +
        `</x:ExcelWorksheets>` +
        `</x:ExcelWorkbook>` +
        `</xml>` +
        `<![endif]-->` +
        `</head>` +
        `<body>` +
        htmltable.replace(/"/g, "'") +
        `</body>` +
        `</html>`;

    let uri = 'data:application/vnd.ms-excel;base64,';
    let ctx = {
      worksheet: '출력',
      table: htmltable
    };

    uri = uri + base64(format(excelFile, ctx));
    uri = uri.replace('data:application/vnd.ms-excel;base64,', '');
    uri = decodeURIComponent(escape(window.atob(uri)));

    let blob = new Blob([uri], {
      type: 'application/vnd.ms-excel'
    });

    uri = window.URL.createObjectURL(blob);

    let link = document.createElement('a');

    link.href = uri;
    link.style = 'visibility:hidden';
    link.download = title+(new Date()).$toFormat('yymmdd-HHmm')+'.xls';

    document.body.appendChild(link);

    link.click();

    document.body.removeChild(link);

    exportDiv.remove();

    function json2excelHtml(dataset, cols, heads) {
      let bodyHtml = ``;

      cols = cols || Object.keys(dataset[0]); 	
      dataset.forEach(row => {
        let tr = `<tr>`;

        cols.forEach(col => {
          let txt = row[col];

          tr += `<td>${txt}</td>`;
        });

        tr += `</tr>`;

        bodyHtml += tr;
      });

      return bodyHtml;
    }

    function format(s, c) {
      return s.replace(/{(\w+)}/g, function (m, p) {
        return c[p];
      });
    }

    function base64(s) {
      return window.btoa(unescape(encodeURIComponent(s)));
    }
  }

  /**
   * @desc 지정한 데이터를 CamelCase 형대로 변환하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  camelCase(val) {
    return val
      .toLowerCase()
      .replace(/[-_]+/g, ' ')
      .replace(/[^\w\s]/g, '')
      .replace(/ (.)/g, function ($1) {
      return $1.toUpperCase();
    })
      .replace(/ /g, '');
  }

  /**
   * @desc 지정한 데이터에서 "_"를 구분자로하여 CamelCase 형태로 변환하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  columnToCamelCase(val) {
    if (val.indexOf('_') < 0) return val;
    else
      return val.toLowerCase().replace(/[_]([a-z])/g, function (match) {
        return match[1].toUpperCase();
      });
  }

  /**
   * @desc 지정한 데이터에서 CamelCase 형태를 "_"를 단어 구분자로 변환하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  camelCaseToColumn(val) {
    return val.replace(/[A-Z]/g, function (match) {
      return '_' + match.toUpperCase();
    })
      .toUpperCase();
  }

  /**
   * @desc 지정한 데이터에서 "-" 또는 "_"를 구분자로하여 CamelCase 형태로 변환하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  hyphenToCamelCase(val) {
    return val.replace(/[-_]([a-z])/g, function (match) {
      return match[1].toUpperCase();
    });
  }

  /**
   * @desc 지정한 데이터에서 CamelCase 형태를 "-"를 단어 구분자로 변환하여 반환한다.
   * @param {String} - 대상 문자열
   * @param {String} - 구분자
   * @return {String} - 변경된 문자열
   * @example -
   */
  camelCaseToHyphen(val, dlm) {
    return val.replace(/[A-Z]/g, function (match) {
      return (dlm || '-') + match.toLowerCase();
    });
  }

  /**
   * @desc 지정한 데이터에서 "data-" 다음 나오는 문자열을 "-" 또는 "_"를 구분자로하여 CamelCase 형태로 변환하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  attributeToCamelCase(val) {
    return hyphenToCamelCase(val.replace(/^(data-)?(.*)/, '$2'));
  }

  /**
   * @desc 지정한 데이터에서 CamelCase 형태를 "-"를 단어 구분자로 변환하고 "data-" 문자열 뒤에 붙여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  camelCaseToAttribute(val) {
    return 'data-' + camelCaseToHyphen(val);
  }

  /**
   * @desc 지정한 데이터에서 url 전송시 문제가 되는 문자를 이스케이프 문자로 변환하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  encodeURI(val) {
    return encodeURIComponent(val);
  }

  /**
   * @desc 지정한 데이터에서 encodeURI로 변환된 이스케이프 문자를 복원하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  decodeURI(val) {
    return decodeURIComponent(val);
  }

  /**
   * @desc 지정한 데이터에서 html 출력시 문제가 되는 문자를 이스케이프 문자로 변환하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  encodeHtml(val) {
    let htmlSpecialCharsRegEx = /[<>\r\n"']/gm;
    let htmlSpecialCharsPlaceHolders = {
      '<': 'lt;',
      '>': 'gt;',
      '\r': '#13;\r',
      '\n': '#10;',
      '"': 'quot;',
      "'": 'apos;',
    };

    return val.replace(htmlSpecialCharsRegEx, function (match) {
      return '&' + htmlSpecialCharsPlaceHolders[match];
    });
  }

  /**
   * @desc 지정한 데이터에서 편집기 출력시 문제가 되는 문자를 이스케이프 문자로 변환하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - 변경된 문자열
   * @example -
   */
  encodeAce(val) {
    let htmlSpecialCharsRegEx = /[<>\n"']/gm;
    let htmlSpecialCharsPlaceHolders = {
      '<': '&lt;',
      '>': '&gt;',
      '\n': '\n',
      '"': '&quot;',
      "'": '&apos;',
    };

    return val.replace(htmlSpecialCharsRegEx, function (match) {
      return htmlSpecialCharsPlaceHolders[match];
    });
  }

  /**
   * @desc 지정한 Object 데이터를 JSON 데이터로 변환하여 반환한다.
   * @param {Object} - 대상 데이터
   * @param {Number} - JSON 데이터의 깊이(최대 3)
   * @return {Object} - JSON 데이터
   * @example -
   */
  object2Json(obj, lvl) {
    let ret = {};

    lvl = lvl === undefined ? 1 : lvl + 1;

    if (lvl > 4) return ret;
    if (obj.tagName) return ret;

    let keys = Object.keys(obj).sort();

    if (keys.length === 0) return ret;

    keys.forEach((k, i) => {
      let _obj = obj[k], _ty = typeof _obj;

      if (Array.isArray(_obj)) _ty = 'array';

      if (_obj && _obj.constructor.name == 'MAP') return;

      if (['_'].indexOf(k) >= 0 || _obj == null || _obj == undefined) {
      } else {
        switch (_ty) {
          case 'array':
            ret[k] = 'TypedArray';

            break;
          case 'object':
            if (!Object.is(_obj, Jinja)) {
              ret[k] = this.object2Json(_obj, lvl);

              if (!_obj.tagName) {
                Jinja.global.getAllMethods(_obj).forEach(
                  fnName =>
                  (ret[k][fnName] = {
                    '!type': 'fn()'
                  })
                );
              }
            }

            break;
          case 'function':
            ret[k] = {
              '!type': 'fn()'
            };

            break;
          default:
            ret[k] = _ty;

            break;
        }
      }
    });

    return ret;
  }

  /**
   * @desc 지정한 엘리먼트 데이터를 JSON 데이터로 변환하여 반환한다.
   * @param {Element} - 대상 엘리먼트
   * @return {Array} - JSON 데이터
   * @example -
   */
  dom2Json(el) {
    let result = [];

    for (let i = 0; i < el.children.length; i++) {
      let node = el.children[i];

      if ([1, 2, 3].includes(node.nodeType)) {
        let newItem = {
          label: this.domTreeLabel(node),
          nodeData: node
        };

        result.push(newItem);

        if (node.matches('[data-render]')) {
        } else if (node.tagName == 'SVG') {
        } else if (node.children.length) {
          newItem.items = this.dom2Json(node);
        }
      }
    }

    return result;
  }

  /**
   * @desc 지정한 Tree 엘리먼트의 노드의 라벨을 반환한다.
   * @param {Element} - 대상 엘리먼트
   * @return {String} - 노드라벨
   * @example -
   */
  domTreeLabel(el) {
    let result = ``;

    if ([1, 2, 3].includes(el.nodeType)) {
      let tagName = el.tagName || `#TEXT`;
      let codeText = ``;

      if (el.getAttribute('jj-id')) {
        codeText = `#${el.getAttribute('jj-id')}`;
      }

      if (el.getAttribute('class')) {
        codeText = `[${el.getAttribute('class')}]`;
      }

      if (el.getAttribute('data-render') && el.getAttribute('data-type')) {
        tagName = `${tagName}:${el.getAttribute('data-type')}`;
      }

      result = `${tagName} ${codeText}`;
    }

    return result;
  }

  /**
   * @desc 지정한 JSON 데이터를 Grid HTML로 반환한다.
   * @param {Array} - 대상 데이터
   * @param {Array} - 컬럼명 목록
   * @param {Array} - 헤더명 목록
   * @param {Object} - 옵션
   * @return {} - 
   * @example -
   */
  json2Grid(rows, cols, heads, options) {
    options = options || {};

    let numberFormat = options.numberFormat || '';
    let columns = cols || Object.keys(rows[0]);
    let headers = heads || columns;
    let sumData = {};

    let tableHtml = `<table><colgroup>`;
    let headHtml = ``;
    let bodyHtml = ``;
    let footHtml = ``;

    columns.forEach((key, index) => {
      let colWidth = 100;

      if (options.colWidths) {
        colWidth = options.colWidths[index] || colWidth;
      }

      tableHtml += `<col style="width: ${colWidth}px;">`;
    });

    tableHtml += `</colGroup>`;

    headHtml += `<thead><tr>`;
    headers.forEach(key => (headHtml += `<th>${key}</th>`));
    headHtml += `</tr></thead>`;

    bodyHtml += `<tbody>`;

    rows.forEach(row => {
      let tr = `<tr>`;

      for (let c = 0; c < columns.length; c++) {
        let column = columns[c];
        let data = row[column];

        if (options.sumData && options.sumData.includes(column)) {
          sumData[column] = sumData[column] || 0;
          sumData[column] += data;
        }

        switch (typeof data) {
          case 'number':
            switch (numberFormat) {
              case 'int':
                tr += `<td class="num">${data.$toIntFormat()}</td>`;

                break;
              case 'float':
                tr += `<td class="num">${data.$toFloatFormat()}</td>`;

                break;
              default:
                tr += `<td>${data}</td>`;

                break;
            }

            break;
          default:
            tr += `<td>${data}</td>`;

            break;
        }
      }

      tr += `</tr>`;
      bodyHtml += tr;
    });

    bodyHtml += `</tbody>`;

    if (options.isSum) {
      footHtml += `<thead class="sum"><tr>`;

      columns.forEach(column => {
        if (options.sumData && options.sumData.includes(column)) {
          footHtml += `<td class="num">` + (sumData[column] || 0).$toFloatFormat() + `</td>`;
        } else {
          footHtml += `<td></td>`;
        }
      });

      footHtml += `</tr></thead>`;
    }

    tableHtml += headHtml;
    tableHtml += footHtml;
    tableHtml += bodyHtml;
    tableHtml += '</table>';

    return tableHtml;
  }

  /**
   * @desc 지정한 JSON 데이터를 Pivot하여 반환한다.
   * @param {Array} - 대상 데이터
   * @param {Array} - 생성할 컬럼 목록
   * @param {Array} - 기준항목
   * @param {String} - Key항목
   * @param {String} - Value항목
   * @return {} - 
   * @example -
   */
  jsonPivot(dataset, displayColumns, pivotItems, pivotColumn, dataColumn) {
    let result = [];

    dataset.forEach(row => {
      let index = result.findIndex((item, index) => {
        let equlCnt = 0;

        displayColumns.forEach(col => {
          if (row[col] == item[col]) {
            equlCnt++;
          }
        });

        return equlCnt == displayColumns.length;
      });

      if (index >= 0) {
        result[index][row[pivotColumn]] += row[dataColumn];
      } else {
        let newItem = {};

        displayColumns.forEach(col => {
          newItem[col] = row[col];
        });

        pivotItems.forEach(pivotItem => {
          if (pivotItem == row[pivotColumn]) {
            newItem[pivotItem] = (newItem[pivotItem] || 0) + row[dataColumn];
          } else {
            newItem[pivotItem] = 0;
          }
        });

        result.push(newItem);
      }
    });

    return result;
  }

  row2tree(dataset, rootValue, parentField, keyField, sortField, childsName) {
    childsName = childsName || 'subRows';

    let tree = {};

    if (rootValue == 'row') {
      rootValue = dataset[0][keyField];
    }

    let selRows;

    try {
      selRows = dataset.filter(function (row) {
        return row[parentField] === rootValue;
      });

      if (sortField) {
        selRows = selRows.sort(function (a, b) {
          return (a[sortField] || '') > b[sortField || '']
            ? 1
          : (a[sortField] || '') < (b[sortField] || '')
            ? -1
          : 0;
        });
      }
    } catch (ex) {
      alert(ex.message);
    }

    tree = selRows;

    try {
      selRows.forEach((pR, pI) => {
        let _sub = this.row2tree(dataset, pR[keyField], parentField, keyField, sortField, childsName);

        if (_sub.length > 0) {
          pR[childsName] = _sub;
        } else {
          pR[childsName] = [];
        }
      });
    } catch (ex) {
      alert(ex.message);
    }

    return tree;
  }  

  /**
   * @desc 지정한 데이터를 CRUD형으로 변환하여 반환한다.
   * @param {Array|Object} - 대상 데이터
   * @return {Array|Object} - 변경된 데이터
   * @example -
   */
  setCRUD(obj, defVal) {
    let _this = this;

    if (Array.isArray(obj)) {
      obj.forEach(function (row, index) {
        _this.setCRUD(row, {
          _rno_: index + 1,
        });
      });

      return obj;
    } else {
      return Object.assign(
        obj,
        {
          "_crud_": "R",
          "_select_": false,
          "_active_": false,
          "_rno_": 0,
          "_changeData_": {}
        },
        defVal
      );
    }
  }

  /**
   * @desc 지정한 rows 데이터에서 변경된 row 목록을 반환한다.
   * @param {Array} - 대상 데이터
   * @return {Array} - 변경된 데이터
   * @example -
   */
  getChangeCRUD(rows) {
    return rows.filter(row => {
      return 'CUD'.indexOf(row['_crud_']) >= 0;
    });
  }

  /**
   * @desc 지정한 row 데이터에서 변경된 데이터를 key, vlaue형태로 반환한다.
   * @param {Object} - 대상 데이터
   * @return {Object} - 변경된 데이터
   * @example -
   */
  getChangeData(row) {
    let result = {};

    if (row._crud_ == 'C') {
      let keys = Object.keys(row), keyLength = keys.length, loopX = 0;

      while (loopX < keyLength) {
        let key = keys[loopX], data = row[key];

        if (key.startsWith('_')) {
        } else {
          result[key] = data;
        }

        loopX++;
      }
    } else {
      let keys = Object.keys(row['_changeData_']), keyLength = keys.length, loopX = 0;

      while (loopX < keyLength) {
        let key = keys[loopX], data = row['_changeData_'][key];

        if (data['old'] != data['val']) {
          result[key] = data['val'];
        }

        loopX++;
      }
    }

    return result;
  }

  /**
   * @desc 지정한 rows 데이터에 신규 row를 추가한다.
   * @param {Array} - 대상 데이터
   * @param {Object} - 추가할 데이터
   * @example -
   */
  addCRUDrow(rows, addRow) {
    addRow = Object.assign(addRow, {
      _crud_: 'C',
      _rno_: rows.length,
      _changeData_: {}
    });

    rows.push(addRow);
  }

  /**
   * @desc 지정한 rows 데이터에서 지정한 row의 변경사항을 초기화한다.
   * @param {Array} - 대상 데이터
   * @param {Object} - 삭제할 데이터
   * @example -
   */
  deleteCRUDrow(rows, deleteRow) {
    if (deleteRow._crud_ == 'C') {
      if (confirm('해당자료를 삭제합니까?'))
        rows.splice(config.data.rows.indexOf(deleteRow), 1);
    } else if (deleteRow._crud_ == 'D') {
      deleteRow._crud_ = 'R';

      if (Object.keys(deleteRow._changeData_).length > 0) {
        deleteRow._crud_ = 'U';
      }
    } else {
      deleteRow._crud_ = 'D';
    }
  }

  /**
   * @desc 지정한 rows 데이터에서 지정한 순번에 해당하는 row의 변경사항을 초기화한다.
   * @param {Array} - 대상 데이터
   * @param {Number} - 데이터 순번
   * @example -
   */
  deleteCRUDrowID(rows, rIndex) {
    let deleteRow = config.data.rows[rIndex];

    this.deleteCRUDrow(rows, deleteRow);
  }

  /**
   * @desc 지정한 row 데이터에 지정한 항목을 추가한다.
   * @param {Object} - 대상 데이터
   * @param {String} - 추가할 항목
   * @param {*} - 추가할 값
   * @example -
   */
  addCRUDCol(row, field, value) {
    let old = row[field] || null;

    row[field] = value;
    row['_changeData_'][field] = {
      old: old,
      val: value
    };
  }

  /**
   * @desc 지정한 rows 데이터에서 선택된 row의 변경사항을 초기화한다.
   * @param {Array} - 대상 데이터
   * @example -
   */
  deleteCRUD(rows) {
    for (let i = rows.length - 1; i >= 0; i--) {
      let row = rows[i];

      if (row._select_ === true) {
        if (row._crud_ == 'C') {
          rows.splice(i, 1);
        } else if (row._crud_ == 'D') {
          row._crud_ = 'R';

          if (Object.keys(row._changeData_).length > 0) {
            row._crud_ = 'U';
          }
        } else {
          row._crud_ = 'D';
        }
      }
    }
  }

  /**
   * @desc 지정한 rows 컬럼을 배열로 가져온다.
   * @param {Array} - 대상 데이터
   * @example -
   */  
  tableColArray(rows, col){
    let result =[];
    rows.forEach(row=>result.push(row[col]));
    return result;
  }

  /**
   * @desc 지정한 rows 컬럼의 최대값을.
   * @param {Array} - 대상 데이터
   * @example -
   * https://programmingsummaries.tistory.com/108
   */  
  tableColMax(rows, col){
    let result = 0;
    rows.forEach(row=>result = Math.max(result, row[col]));
    return result;
  }  

  /**
   * @desc 지정한 rows 컬럼의 최소값을 가져온다
   * @param {Array} - 대상 데이터
   * @example -
   */  
  tableColMin(rows, col){
    let result = 0;
    rows.forEach(row=>result = Math.min(result, row[col]));
    return result;
  }  

  /**
   * @desc 지정한 Object의 _crud_, _select_, _rno_, _changeData_ 항목을 삭제한다.
   * @param {Array|Obejct} - 대상 데이터
   * @return {Obejct} - 변경된 rows 데이터
   * @example -
   */
  clearCRUD(obj) {
    let _this = this;

    if (Array.isArray(obj)) {
      obj.forEach(function (row, index) {
        f1(row);
      });

      return obj;
    } else {
      return f1(obj);
    }

    function f1(row) {
      delete row._crud_;
      delete row._select_;
      delete row._rno_;
      delete row._changeData_;

      return row;
    }
  }

  /**
   * @desc 지정한 Object의 모든 Value 값을 삭제한다.
   * @param {Obejct} - 대상 데이터
   * @example -
   */
  clearObj(obj) {
    let keys = Object.keys(obj), keyLength = keys.length, loopX = 0;

    while (loopX < keyLength) {
      let key = keys[loopX];

      if (Array.isArray(obj[key])) {
        obj[key].splice(0, obj[key].length);
      } else if (typeof obj[key] == 'object') {
        Jinja.json.clearObj(obj[key]);
      } else {
        obj[key] = null;
      }

      loopX++;
    }
  }

  /**
   * @desc 지정한 Object의 삭제 Object를 제외한 Object를 삭제한다.
   * @param {Obejct} - 대상 데이터
   * @example -
   */
  dataClean(obj) {
    let _this = this;
    let curKeys = [];

    if (obj) {
      curKeys = Object.keys(obj).sort();
    }

    let curKeyCount = curKeys.length;

    for (let i = curKeyCount - 1; i >= 0; i--) {
      if (['_changeData_', '_crud_'].indexOf(curKeys[i]) >= 0) {
        if (obj['_crud_'] == 'D') {
        } else {
          delete obj[curKeys[i]];
        }
      } else {
        let curType = typeof obj[curKeys[i]];

        if (curType === 'object' && obj[curKeys[i]] && !(curKeys[i] instanceof Date)) {
          if (Object.keys(obj[curKeys[i]]).length > 0) {
            _this.dataClean(obj[curKeys[i]], obj);
          }
        }
      }
    }
  }

  /**
   * @desc 지정한 rows 데이터에서 삭제 row를 삭제하고 모든 row의 CRUD 항목을 초기화한다.
   * @param {Array} - rows 데이터
   * @return {Array} - 변경된 rows 데이터
   * @example -
   */
  dataRowsClean(rows) {
    for (let i = rows.length - 1; i >= 0; i--) {
      if (rows[i]._crud_ == 'D') {
        rows.splice(i, 1);
      }
    }

    this.setCRUD(rows);
  }

  /**
   * @desc 지정한 rows 데이터를 지정한 keys의 값을 기준으로 재정렬한다.
   * @param {Array} - rows 데이터
   * @param {Object} - keys 데이터
   * @return {Array} - 변경된 rows 데이터
   * @example -
   */
  sortRows(rows, keys) {
    keys = keys || {};

    let obLen = function (obj) {
      let size = 0, key;

      for (key in obj) {
        if (obj.hasOwnProperty(key)) size++;
      }

      return size;
    };

    let obIx = function (obj, ix) {
      let size = 0, key;

      for (key in obj) {
        if (obj.hasOwnProperty(key)) {
          if (size == ix) return key;

          size++;
        }
      }

      return false;
    };

    let multiSort = function (a, b, d) {
      d = d !== null ? d : 1;

      if (a == b) return 0;

      return a > b ? 1 * d : -1 * d;
    };

    let KL = obLen(keys);
    let newarr = rows.slice(0);

    if (!KL) {
      return newarr.sort(multiSort);
    }

    for (let k in keys) {
      if (keys[k]) keys[k] = keys[k].toLowerCase();

      keys[k] = keys[k] == 'desc' || keys[k] == -1 ? -1 : keys[k] == 'skip' || keys[k] === 0 ? 0 : 1;
    }

    newarr.sort(function (a, b) {
      let sorted = 0, ix = 0;

      while (sorted === 0 && ix < KL) {
        let k = obIx(keys, ix);

        if (k) {
          let dir = keys[k];

          sorted = multiSort(a[k], b[k], dir);

          ix++;
        }
      }

      return sorted;
    });

    return newarr;
  }

  /**
   * @desc 지정한 배열에서 지정한 값의 위치를 변경한다.
   * @param {Array} - 대상 배열
   * @param {Number} - 변경전 순번
   * @param {Number} - 변경후 순번
   * @return {Array} - 변경된 배열
   * @example -
   */
  arrMove(arr, old_index, new_index) {
    if (old_index < new_index) {
      new_index++;
    }

    let so = arr[old_index];

    arr.splice(old_index, 1);
    arr.splice(new_index, 0, so);

    return arr;
  }

  /**
   * @desc 지정한 오브젝트의 모든 메소드 목록을 반환한다.
   * @param {Object} - 대상 오브젝트
   * @return {Array} - 메소드 목록
   * @example -
   */
  getAllMethods(obj) {
    let props = [];

    try {
      do {
        const l = Object.getOwnPropertyNames(obj)
        .concat(Object.getOwnPropertySymbols(obj).map(s => s.toString()))
        .sort()
        .filter(
          (p, i, arr) =>
          typeof obj[p] === 'function' &&
          p !== 'constructor' &&
          (i == 0 || p !== arr[i - 1]) &&
          props.indexOf(p) === -1
        );

        props = props.concat(l);
      } while ((obj = Object.getPrototypeOf(obj)) && Object.getPrototypeOf(obj));

      return props;
    } catch (ex) {
      return props;
    }
  }

  mergeTableCell(table, cellIndexs){

    let spanTr = null;
    let spanTd = null;
    let spanCount = 1;
    let spanText = null;

    table.querySelectorAll(`[rowspan], [hidden]`).forEach(el=>{
      el.removeAttribute('rowspan');
      el.removeAttribute('hidden');
    })

    if (typeof(cellIndexs)=="number"){
      cellIndexs = [cellIndexs];
    }
    cellIndexs.forEach(cellIndex=>{
      table.querySelectorAll(`tbody tr`).forEach(tr=>{
        if (tr.childNodes[cellIndex]){
          if(!spanTr ){
            spanTr = tr;
            spanTd = spanTr.childNodes[cellIndex];
            spanText = spanTd.innerText;
            spanCount = 1;
          }
          else {
            if(spanText == tr.childNodes[cellIndex].innerText){
              spanCount++;
              spanTd.setAttribute('rowspan', spanCount);
              tr.childNodes[cellIndex].hidden = true
            }
            else {
              spanTr = tr;
              spanTd = spanTr.childNodes[cellIndex];
              spanText = spanTd.innerText;
              spanCount = 1;
            }
          }
        }
      })
    })


  }

  /**
   * @desc 지정한 두 연도 사이의 연도 목록을 반환한다.
   * @param {String} - 시작년 문자열
   * @param {String} - 종료년 문자열
   * @return {Array} - 년 목록
   * @example -
   */
  getCategoriesYear(from, to) {
    let result = [];

    from = parseInt(from);
    to = parseInt(to);

    for (; from <= to; from++) {
      result.push(from.toString());
    }

    return result;
  }

  /**
   * @desc 지정한 두 월 사이의 월(yyyyMM) 목록을 반환한다.
   * @param {String} - 시작월 문자열
   * @param {String} - 종료월 문자열
   * @return {Array} - 월(yyyyMM) 목록
   * @example -
   */
  getCategoriesMonth(from, to) {
    let result = [];

    from = new Date(from + '-01');
    to = new Date(to + '-01');

    for (; from <= to; from.$addMonth(1)) {
      result.push(from.$toFormat('yyyyMM'));
    }

    return result;
  }

  /**
   * @desc 지정한 두 일자 사이의 일자(yyyyMMdd) 목록을 반환한다.
   * @param {String} - 시작일자 문자열
   * @param {String} - 종료일자 문자열
   * @return {Array} - 일자(yyyyMMdd) 목록
   * @example -
   */
  getCategoriesDay(from, to) {
    let result = [];

    from = new Date(from);
    to = new Date(to);

    for (; from <= to; from.$addDate(1)) {
      result.push(from.$toFormat('yyyyMMdd'));
    }

    return result;
  }

  /**
   * @desc 지정한 두 월 사이의 월(yyyy/MM) 목록을 반환한다.
   * @param {String} - 시작월 문자열
   * @param {String} - 종료월 문자열
   * @return {Array} - 월(yyyy/MM) 목록
   * @example -
   */
  getHeadMonth(from, to) {
    let result = [];

    from = new Date(from + '-01');
    to = new Date(to + '-01');

    for (; from <= to; from.$addMonth(1)) {
      result.push(from.$toFormat('yyyy/MM'));
    }

    return result;
  }

  /**
   * @desc 지정한 두 일자 사이의 일자(MM/dd) 목록을 반환한다.
   * @param {String} - 시작일자 문자열
   * @param {String} - 종료일자 문자열
   * @return {Array} - 일자(MM/dd) 목록
   * @example -
   */
  getHeadDay(from, to) {
    let result = [];

    from = new Date(from);
    to = new Date(to);

    for (; from <= to; from.$addDate(1)) {
      result.push(from.$toFormat('MM/dd'));
    }

    return result;
  }

  getDates(from, to) {
    let result = [];

    from = new Date(from);
    to = new Date(to);

    for (; from <= to; from.$addDate(1)) {
      result.push(new Date(from));
    }

    return result;
  }  
  /**
   * @desc 지정한 문자열 데이터를 데이트 타입으로 반환한다.
   * @param {String} - 문자열
   * @return {Date} - 데이터
   * @example -
   */
  string2date(dt) {
    let result = new Date(
      dt.substr(0, 4) +
      '-' +
      dt.substr(4, 2) +
      '-' +
      dt.substr(6, 2) +
      ' ' +
      dt.substr(8, 2) +
      ':' +
      dt.substr(10, 2)
    );

    return result;
  }

  /**
   * @desc 지정한 데이트 타입 데이터를 문자열로 반환한다.
   * @param {Date} - 데이터
   * @return {String} - 문자열
   * @example -
   */
  datetime2string(dt) {
    return dt
      .replaceAll('-', '')
      .replaceAll('T', '')
      .replaceAll(':', '')
      .substr(0, 12);
  }

  /**
   * @desc 키보드 이벤트의 키상태를 문자열로 반환한다.
   * @param {Event} - 이벤트
   * @return {String} - 이벤트 키상태 문자열
   * @example -
   */
  getEventKeyMap(e) {
    let keyMap = [];

    if (e.ctrlKey) {
      keyMap.push('Ctrl');
    }

    if (e.altKey) {
      keyMap.push('Alt');
    }

    if (e.shiftKey) {
      keyMap.push('Shift');
    }

    switch (e.keyCode) {
      case 8:
        keyMap.push('Back');

        break;
      case 9:
        keyMap.push('Tab');

        break;
      case 13:
        keyMap.push('Enter');

        break;
      case 27:
        keyMap.push('Esc');

        break;
      case 32:
        keyMap.push('Space');

        break;
      case 33:
        keyMap.push('PgUp');

        break;
      case 34:
        keyMap.push('PgDn');

        break;
      case 35:
        keyMap.push('End');

        break;
      case 36:
        keyMap.push('Home');

        break;
      case 37:
        keyMap.push('Left');

        break;
      case 38:
        keyMap.push('Up');

        break;
      case 39:
        keyMap.push('Right');

        break;
      case 40:
        keyMap.push('Down');

        break;
      case 45:
        keyMap.push('Insert');

        break;
      case 46:
        keyMap.push('Delete');

        break;
      default: {
        if (e.key) {
          keyMap.push(e.key.toUpperCase());
        }

        break;
      }
    }

    return keyMap.join('-');
  }

  /**
   * @desc Shortcut Icon을 변경한다.
   * @param {String} - 아이콘 URL
   * @example -
   */
  changeShortcutIcon(iconUrl) {
    document.querySelector("link[rel='shortcut icon']").href = iconUrl;
  }

  /**
   * @desc 숫자를 한글문자열로 변환하기 (예: 유튜트조회수)
   * @param {num} - 숫자
   * @return {String} - 한글표현숫자
   * @example - convertInt2han(1234) 
   *          - 1.234천회
   */
  convertInt2han(num) {
    let result;

    if(count < 1000) {
      result = `${num} 회`;

    } else if(count < 10000){
      result = `${num / 1000} 천회`;

    } else {
      result = `${num / 10000} 만회`;
    }

    return result;
  }

  capture(el,bWatermark) {
    let txtMark  = "AppSpeed.640";

    return new Promise((resolve, reject)=>{
      Jinja.require.load('html2canvas')
        .then(e =>html2canvas(el, {
        onrendered: function (canvas) {

          let ctx = canvas.getContext("2d");       // get 2D context of canvas

          ctx.textBaseline = "top";                // start with drawing text from top
          ctx.font = "24px sans-serif";            // set a font and size
          ctx.textAlign = "center";     
          ctx.fillStyle = "rgb(200,0,0,0.2)"; 
          if(bWatermark && Jinja.bWatermark){
            ctx.fillText(txtMark,canvas.width/2, canvas.height/2);              
          }

        }
      }))
        .then(canvas=>{
        let img = canvas.toDataURL("image/png");
        resolve(img);
      });
    });
  }  

  uiCapture(el, title){
    return this.capture(el,true)
      .then(img =>JJFormModal.open("uiCapture.uc", {
      "image": img,
      "fileName": title+'.png' 
    }));
  }

  clone(obj){
    let result = null;
    if (obj){
      result =  this.json(this.string(obj));
    }
    return result;
  }


  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJGlobal');
  }
}

Jinja.addModule('global', JJGlobal);

String.prototype.replaceAll = function (find, replace) {
  return this.replace(new RegExp(find, 'g'), replace);
};

Number.prototype.$between = function (from, to) {
  return this >= from && this <= to;
};

Date.prototype.$addDate = function (num) {
  this.setDate(this.getDate() + num);
};

Date.prototype.$addMonth = function (num) {
  this.setMonth(this.getMonth() + num);
};

Date.prototype.$addYear = function (num) {
  this.setYear(this.getYear() + num);
};
Date.prototype.$dayDiff = function (date) {
  return (this-date) / 1000/3600/24;
};


function MD5() {    
  'use strict';

  /*
		* Add integers, wrapping at 2^32. This uses 16-bit operations internally
		* to work around bugs in some JS interpreters.
		*/
  function safe_add(x, y) {
    var lsw = (x & 0xFFFF) + (y & 0xFFFF),
        msw = (x >> 16) + (y >> 16) + (lsw >> 16);
    return (msw << 16) | (lsw & 0xFFFF);
  }

  /*
		* Bitwise rotate a 32-bit number to the left.
		*/
  function bit_rol(num, cnt) {
    return (num << cnt) | (num >>> (32 - cnt));
  }

  /*
		* These functions implement the four basic operations the algorithm uses.
		*/
  function md5_cmn(q, a, b, x, s, t) {
    return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);
  }
  function md5_ff(a, b, c, d, x, s, t) {
    return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);
  }
  function md5_gg(a, b, c, d, x, s, t) {
    return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);
  }
  function md5_hh(a, b, c, d, x, s, t) {
    return md5_cmn(b ^ c ^ d, a, b, x, s, t);
  }
  function md5_ii(a, b, c, d, x, s, t) {
    return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);
  }

  /*
		* Calculate the MD5 of an array of little-endian words, and a bit length.
		*/
  function binl_md5(x, len) {
    /* append padding */
    x[len >> 5] |= 0x80 << ((len) % 32);
    x[(((len + 64) >>> 9) << 4) + 14] = len;

    var i, olda, oldb, oldc, oldd,
        a = 1732584193,
        b = -271733879,
        c = -1732584194,
        d = 271733878;

    for (i = 0; i < x.length; i += 16) {
      olda = a;
      oldb = b;
      oldc = c;
      oldd = d;

      a = md5_ff(a, b, c, d, x[i], 7, -680876936);
      d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);
      c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);
      b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);
      a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);
      d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);
      c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);
      b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);
      a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);
      d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);
      c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);
      b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);
      a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);
      d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);
      c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);
      b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);

      a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);
      d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);
      c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);
      b = md5_gg(b, c, d, a, x[i], 20, -373897302);
      a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);
      d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);
      c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);
      b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);
      a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);
      d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);
      c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);
      b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);
      a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);
      d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);
      c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);
      b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);

      a = md5_hh(a, b, c, d, x[i + 5], 4, -378558);
      d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);
      c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);
      b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);
      a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);
      d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);
      c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);
      b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);
      a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);
      d = md5_hh(d, a, b, c, x[i], 11, -358537222);
      c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);
      b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);
      a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);
      d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);
      c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);
      b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);

      a = md5_ii(a, b, c, d, x[i], 6, -198630844);
      d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);
      c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);
      b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);
      a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);
      d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);
      c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);
      b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);
      a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);
      d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);
      c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);
      b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);
      a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);
      d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);
      c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);
      b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);

      a = safe_add(a, olda);
      b = safe_add(b, oldb);
      c = safe_add(c, oldc);
      d = safe_add(d, oldd);
    }
    return [a, b, c, d];
  }

  /*
		* Convert an array of little-endian words to a string
		*/
  function binl2rstr(input) {
    var i,
        output = '';
    for (i = 0; i < input.length * 32; i += 8) {
      output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);
    }
    return output;
  }

  /*
		* Convert a raw string to an array of little-endian words
		* Characters >255 have their high-byte silently ignored.
		*/
  function rstr2binl(input) {
    var i,
        output = [];
    output[(input.length >> 2) - 1] = undefined;
    for (i = 0; i < output.length; i += 1) {
      output[i] = 0;
    }
    for (i = 0; i < input.length * 8; i += 8) {
      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);
    }
    return output;
  }

  /*
		* Calculate the MD5 of a raw string
		*/
  function rstr_md5(s) {
    return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));
  }

  /*
		* Calculate the HMAC-MD5, of a key and some data (raw strings)
		*/
  function rstr_hmac_md5(key, data) {
    var i,
        bkey = rstr2binl(key),
        ipad = [],
        opad = [],
        hash;
    ipad[15] = opad[15] = undefined;
    if (bkey.length > 16) {
      bkey = binl_md5(bkey, key.length * 8);
    }
    for (i = 0; i < 16; i += 1) {
      ipad[i] = bkey[i] ^ 0x36363636;
      opad[i] = bkey[i] ^ 0x5C5C5C5C;
    }
    hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);
    return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));
  }

  /*
		* Convert a raw string to a hex string
		*/
  function rstr2hex(input) {
    var hex_tab = '0123456789abcdef',
        output = '',
        x,
        i;
    for (i = 0; i < input.length; i += 1) {
      x = input.charCodeAt(i);
      output += hex_tab.charAt((x >>> 4) & 0x0F) +
        hex_tab.charAt(x & 0x0F);
    }
    return output;
  }

  /*
		* Encode a string as utf-8
		*/
  function str2rstr_utf8(input) {
    return unescape(encodeURIComponent(input));
  }

  /*
		* Take string arguments and return either raw or hex encoded strings
		*/
  function raw_md5(s) {
    return rstr_md5(str2rstr_utf8(s));
  }
  function hex_md5(s) {
    return rstr2hex(raw_md5(s));
  }
  function raw_hmac_md5(k, d) {
    return rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d));
  }
  function hex_hmac_md5(k, d) {
    return rstr2hex(raw_hmac_md5(k, d));
  }

  this.md5 = function(string, key, raw) {
    if (!key) {
      if (!raw) {
        return hex_md5(string);
      } else {
        return raw_md5(string);
      }
    }
    if (!raw) {
      return hex_hmac_md5(key, string);
    } else {
      return raw_hmac_md5(key, string);
    }
  }
}

Jinja.global.md = new MD5();
/* ==JJI18n.640.class================ */

/**
 * @classdesc 국제화 관리를 위한 클래스
 */
class JJI18n extends JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      "locale": workspaceMeta.options.locale || 'ko-KR',
      "timeZone": workspaceMeta.options.timeZone || 'Asia/Seoul',
      "currency": workspaceMeta.options.currency || 'KRW',
      "weekName": ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'],
      "ampm": ['오전', '오후'],
      "timeUnit": ['초', '분', '시간', '일', '개월', '년'],
      "beforeAfter": ['전', '후']
    };
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.numberFormat = new Intl.NumberFormat(this.options.locale, {});

    this.currencyFormat = new Intl.NumberFormat(this.options.locale, {
      style: 'currency',
      currency: this.options.currency,
      minimumFractionDigits: 3,
      maximumFractionDigits: 3
    });

    this.percentFormat = new Intl.NumberFormat(this.options.locale, {
      style: 'percent',
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    });

    this.floatFormat = new Intl.NumberFormat(this.options.locale, {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    });

    this.intFormat = new Intl.NumberFormat(this.options.locale, {
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    });
  }

  /**
   * @desc 현재 브라우저의 언어코드를 반환한다.
   * @return {String} - 브라우저 언어코드
   * @example -
   */
  getBrowseCode() {
    let languages =
        (navigator.languages && navigator.languages[0]) ||
        navigator.language ||
        navigator.userLanguage;

    return languages.substr(0, 2);
  }

  /**
   * @desc 데이터베이스에 입력된 지역코드정보 목록을 반환한다.
   * @return {Array} - 지역코드정보 목록
   * @example -
   */
  getLocaleCode() {
    let d = new Date();

    return Jinja.ajax.getJsonFileUri('countries.json').then(data => {
      let arCountries = [];

      data.forEach(item => {
        try {
          arCountries.push({
            name: `${item.name} [${item.nativeName}] ${item.languages[0]['iso639_1']}-${item.alpha2Code}`,
            language: item.languages[0]['iso639_1'],
            country: item.alpha2Code,
            locale: item.languages[0]['iso639_1'] + '-' + item.alpha2Code,
            format: d.toLocaleString(
              item.languages[0]['iso639_1'] + '-' + item.alpha2Code
            )
          });
        } catch (ex) {
          arCountries.push({
            name: `${item.name} [${item.nativeName}] ${item.languages[0]['iso639_1']}-${item.alpha2Code}`,
            language: item.languages[0]['iso639_1'],
            country: item.alpha2Code,
            locale: item.languages[0]['iso639_1'] + '-' + item.alpha2Code,
            format: null
          });
        }
      });

      arCountries = Jinja.global.sortRows(arCountries, {
        name: 'asc'
      });

      return arCountries;
    });
  }

  /**
   * @desc 현재 브라우저의 표준시 코드를 반환한다.
   * @return {String} - 표준시 코드
   * @example -
   */
  getTimezone() {
    return Intl.DateTimeFormat().resolvedOptions().timeZone;
  }

  /**
   * @desc 데이터베이스에 입력된 표준시코드정보 목록을 반환한다.
   * @return {Array} - 표준시코드정보 목록
   * @example -
   */
  getTimezoneCode() {
    return Jinja.ajax.getJsonFileUri('timezone.json').then(data => {
      let arTimeZone = [];

      data.forEach(item => {
        item.utc.forEach(utc => {
          arTimeZone.push({
            name: item.text + ':' + utc,
            code: utc,
            offset: item.offset
          });
        });
      });

      arTimeZone = Jinja.global.sortRows(arTimeZone, {
        offset: 'asc'
      });

      return arTimeZone;
    });
  }

  /**
   * @desc 현재 브라우저의 표준시 명칭을 반환한다.
   * @return {String} - 표준시 명칭
   * @example -
   */
  getTimezoneName() {
    const today = new Date();
    const short = today.toLocaleDateString(undefined);
    const full = today.toLocaleDateString(undefined, {timeZoneName: 'long'});
    const shortIndex = full.indexOf(short);

    if (shortIndex >= 0) {
      const trimmed = full.substring(0, shortIndex) + full.substring(shortIndex + short.length);

      return trimmed.replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g, '');
    } else {
      return full;
    }
  }

  /**
   * @desc DateTime 옵션을 반환한다.
   * @return {Object} - DateTime 옵션
   * @example -
   */
  getDateTimeOptions() {
    return {
      locale: this.options.locale || this.options.locale,
      timeZone: this.options.timeZone || this.options.timeZone
    };
  }

  /**
   * @desc DateTime 옵션을 설정한다.
   * @param {Object} - 옵션
   * @example -
   */
  setDateTimeOptions(options) {
    this.options.locale = options.locale || this.options.locale;
    this.options.timeZone = options.timeZone || this.options.timeZone;
  }

  /**
   * @desc 지정한 날짜를 지정한 날짜포멧으로 반환한다.
   * @param {Date} - 대상 날짜
   * @param {String} - 날짜포멧
   * @return {String} - 포멧팅된 날짜 문자열
   * @example -
   */
  dateFormat(d, format) {
    if (!d.valueOf()) return '';
    if (!format) format = 'yyyy-MM-dd';

    let h;

    return format.replace(/(yyyy|yy|MM|dd|E|hh|mm|ss|ap)/gi, $1 => {
      switch ($1) {
        case 'yyyy':
          return d.getFullYear();
        case 'yy':
          return (d.getFullYear() % 1000).toString().padStart(2, '0');
        case 'MM':
          return (d.getMonth() + 1).toString().padStart(2, '0');
        case 'dd':
          return d.getDate().toString().padStart(2, '0');
        case 'E':
          return this.options.weekName[d.getDay()];
        case 'HH':
          return d.getHours().toString().padStart(2, '0');
        case 'hh':
          return ((h = d.getHours() % 12) ? h : 12).toString().padStart(2, '0');
        case 'mm':
          return d.getMinutes().toString().padStart(2, '0');
        case 'ss':
          return d.getSeconds().toString().padStart(2, '0');
        case 'ap':
          return d.getHours() < 12
            ? this.options.ampm[0]
          : this.options.ampm[1];
        default:
          return $1;
      }
    });
  }

  /**
   * @desc 지정한 두날짜의 차이를 반환한다.
   * @param {Date} - 시작일자
   * @param {Date} - 종료일자
   * @return {String} - 두날짜 차이
   * @example -
   */
  dateDiff(d1, d2) {
    if (!d1.valueOf()) return '';
    if (!d2) d2 = new Date();

    let before = d1 - d2 < 0 ? this.options.beforeAfter[0] : this.options.beforeAfter[1];
    let diff = Math.abs((d1 - d2) / 1000);

    if (diff < 60)
      // 초단위변경
      return parseInt(diff) + '' + this.options.timeUnit[0] + before;
    else if (diff < 60 * 60)
      // 분단위변경
      return parseInt(diff / 60) + '' + this.options.timeUnit[1] + before;
    else if (diff < 60 * 60 * 24)
      // 시간단위변경
      return (
        parseInt(diff / (60 * 60)) + '' + this.options.timeUnit[2] + before
      );
    else if (diff < 60 * 60 * 24 * 30)
      // 일
      return (
        parseInt(diff / (60 * 60 * 24)) + '' + this.options.timeUnit[3] + before
      );
    else if (diff < 60 * 60 * 24 * 30 * 12)
      // 개월
      return (
        parseInt(diff / (60 * 60 * 24 * 30)) + '' + this.options.timeUnit[4] + before
      );
  }

  /**
   * @desc 지정한 값의 날짜 여부를 반환한다.
   * @param {*} - 대상 날짜값
   * @return {Boolean} - 날짜여부
   * @example -
   */
  isDate(val) {
    let result = false;

    if (val instanceof Date) result = true;

    return result;
  }

  /**
   * @desc 지정한 날짜를 지정한 지역, 표준시 기준으로 반환한다.
   * @param {Date} - 대상 날짜 데이터
   * @param {String} - 지역
   * @return {String} - 포멧팅된 날짜 문자열
   * @example -
   */
  timezoneFormat(d, locale, timezone) {
    if (!locale) locale = this.options.locale || this.options.locale;
    if (!timezone) timezone = this.options.timeZone || this.options.timeZone;

    try {
      return d.toLocaleString(locale, {
        timeZone: timezone
      });
    } catch (ex) {
      return '';
    }
  }

  /**
   * @desc 현재 시간을 지정한 표준시 기준으로 반환한다.
   * @param {String} - 지정 표준시
   * @return {Object} - 현재시간 표준시정보
   * @example -
   */
  timezoneClock(timezone) {
    let d = new Date();

    return {
      hour:
      d.toLocaleString('default', {
        hour: 'numeric',
        hour12: false,
        timeZone: timezone
      }).replace(/[^0-9]/g, "") * 1,
      minute:
      d.toLocaleString('default', {
        minute: 'numeric',
        hour12: false,
        timeZone: timezone
      }).replace(/[^0-9]/g, "") * 1,
      second:
      d.toLocaleString('default', {
        second: 'numeric',
        hour12: false,
        timeZone: timezone
      }).replace(/[^0-9]/g, "") * 1,
    };
  }

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJI18n');
  }
}

Jinja.addModule('i18n', JJI18n);

if (!Date.prototype.$toFormat) {
  Date.prototype.$toFormat = function (format) {
    return Jinja.i18n.dateFormat(this, format);
  };
}

if (!Date.prototype.$toTimezoneFormat) {
  Date.prototype.$toTimezoneFormat = function (locale, timezone) {
    return Jinja.i18n.timezoneFormat(this, locale, timezone);
  };
}

if (!Date.prototype.$toTimezoneFormat) {
  Date.prototype.$toTimezoneFormat = function (locale, timezone) {
    return Jinja.i18n.timezoneFormat(this, locale, timezone);
  };
}

if (!Number.prototype.$toPercentFormat) {
  Number.prototype.$toPercentFormat = function () {
    return Jinja.i18n.percentFormat.format(this);
  };
}

if (!Number.prototype.$toCurrencyFormat) {
  Number.prototype.$toCurrencyFormat = function () {
    return Jinja.i18n.currencyFormat.format(this);
  };
}

if (!Number.prototype.$toFloatFormat) {
  Number.prototype.$toFloatFormat = function () {
    return Jinja.i18n.floatFormat.format(this);
  };
}

if (!Number.prototype.$toIntFormat) {
  Number.prototype.$toIntFormat = function () {
    return Jinja.i18n.intFormat.format(this);
  };
}
/* ==JJConfirm.640.class================ */

/**
 * @classdesc 대화창 관리를 위한 클래스
 */
class JJConfirm extends JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      success: 'alert-success',
      info: 'alert-info',
      warning: 'alert-warning',
      danger: 'alert-danger',
      version: '620'
    };
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.oldAlert = window.alert;
    this.oldConfirm = window.confirm;
    this.oldPrompt = window.prompt;

    window.alert = this._alert.bind(this);
    window.confirm = this._confirm.bind(this);
    window.prompt = this._prompt.bind(this);
  }

  /**
   * @desc JJConfirm alert 대화상자를 호출한다.
   * window alert 함수를 대체하기 위한 함수이다.
   * @param {...*} - 대화상자 정보
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  _alert(...args) {
    return this.info(args[0]);
  }

  /**
   * @desc JJConfirm confirm 대화상자를 호출한다.
   * window confirm 함수를 대체하기 위한 함수이다.
   * @param {...*} - 대화상자 정보
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  _confirm(...args) {
    return new Promise((resolv, reject) => {
      let result = this.oldConfirm.apply(window, args);

      resolv(result);
    });
  }

  /**
   * @desc JJConfirm prompt 대화상자를 호출한다.
   * window prompt 함수를 대체한다.
   * @param {...*} - 대화상자 정보
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  _prompt(...args) {
    return new Promise((resolv, reject) => {
      let result = this.oldPrompt.apply(window, args);

      resolv(result);
    });
  }

  /**
   * @desc 입력 받은 html을 Modal 팝업으로 생성하고 후처리 작업을 실행한다.
   * @param {Element} - 팝업 Html
   * @return {Promise} - 팝업 호출 결과
   * @example -
   */
  _showMessage(msgHtml) {
    let modalWarp = document.createElement('div');
    let modal = document.createElement('div');

    modalWarp.classList.add('modal-wrap');
    modal.classList.add('jj-modal');
    modal.classList.add('ribbon');
    modal.innerHTML = msgHtml;

    modalWarp.appendChild(modal);

    Jinja.appendChild(modalWarp);

    modal.querySelector(`[autofocus]`).focus();

    return new Promise((resolve, reject) => {
      modalWarp.addEventListener('click', e => {
        if (e.target.matches('.modal-wrap')) {
          modalWarp.remove();
        } else if (e.target.matches(`[data-return]`)) {
          resolve(e.target.getAttribute('data-return'));

          modalWarp.remove();
        } else if (e.target.matches(`[data-close]`)) {
          reject();

          modalWarp.remove();
        }
      });

      modalWarp.addEventListener('keydown', e => {
        if (e.keyCode === 27) {
          reject();

          modalWarp.remove();
        }
      });
    });
  }

  /**
   * @desc Aelrt 대화상자를 호출한다.
   * @param {String} - 메세지 내용
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  info(msg) {
    let html =
      `<div class="alert alert-info text-center">` +
      `<h4>Infomation</h4>` +
      `<p>${msg}</p>` +
      `<p class="margin-top-15">` +
      `<button class="btn btn-link" data-return="Close" autofocus>Close</button>` +
      `</p>` +
      `</div>`;

    return this._showMessage(html);
  }

  /**
   * @desc Create 대화상자를 호출한다.
   * @param {String} - 메세지 내용
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  new(msg) {
    let html =
      `<div class="alert alert-danger text-center">` +
      `<h4>Create</h4>` +
      `<p>${msg || 'Want to new date?'}</p>` +
      `<p class="margin-top-15">` +
      `<button class="btn btn-primary" type="button" data-return="YES" autofocus>Yes</button>` +
      `<button class="btn btn-link" type="button" data-close="NO">No</button>` +
      `</p>` +
      `</div>`;

    return this._showMessage(html);
  }

  /**
   * @desc Update 대화상자를 호출한다.
   * @param {String} - 메세지 내용
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  update(msg) {
    let html =
      `<div class="alert alert-danger text-center">` +
      `<h4>Update</h4>` +
      `<p>${msg || 'Want to update?'}</p>` +
      `<p class="margin-top-15">` +
      `<button class="btn btn-primary" type="button" data-return="YES" autofocus>Yes</button>` +
      `<button class="btn btn-link" type="button" data-close="NO">No</button>` +
      `</p>` +
      `</div>`;

    return this._showMessage(html);
  }

  /**
   * @desc Delete 대화상자를 호출한다.
   * @param {String} - 메세지 내용
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  delete(msg) {
    let html =
      `<div class="alert alert-danger text-center">` +
      `<h4>Delete</h4>` +
      `<p>${msg || 'Want to delete?'}</p>` +
      `<p class="margin-top-15">` +
      `<button class="btn btn-primary" type="button" data-return="YES" autofocus>Yes</button>` +
      `<button class="btn btn-link" type="button" data-close="NO">No</button>` +
      `</p>` +
      `</div>`;

    return this._showMessage(html);
  }

  /**
   * @desc Save 대화상자를 호출한다.
   * @param {String} - 메세지 내용
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  save(msg) {
    let html =
      `<div class="alert alert-danger text-center">` +
      `<h4>Save</h4>` +
      `<p>${msg || 'Want to save?'}</p>` +
      `<p class="margin-top-15">` +
      `<button class="btn btn-primary" type="button" data-return="YES" autofocus>Yes</button>` +
      `<button class="btn btn-link" type="button" data-close="NO">No</button>` +
      `</p>` +
      `</div>`;

    return this._showMessage(html);
  }
  
  /**
   * @desc Save 대화상자를 호출한다.
   * @param {String} - 메세지 내용
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  saveYesNo(msg) {
    let html =
      `<div class="alert alert-danger text-center">` +
      `<h4>Save</h4>` +
      `<p>${msg || 'Want to save?'}</p>` +
      `<p class="margin-top-15">` +
      `<button class="btn btn-primary" type="button" data-return="YES" autofocus>Yes</button>` +
      `<button class="btn btn-link" type="button" data-return="NO">No</button>` +
      `</p>` +
      `</div>`;

    return this._showMessage(html);
  }

  /**
   * @desc Save 대화상자를 호출한다.
   * @param {String} - 메세지 내용
   * @return {Promise} - 대화상자 호출 결과
   * @example -
   */
  yesNo(msg) {
    let html =
      `<div class="alert alert-danger text-center">` +
      `<h4>Infomation</h4>` +
      `<p>${msg || 'Want to save?'}</p>` +
      `<p class="margin-top-15">` +
      `<button class="btn btn-primary" type="button" data-return="YES" autofocus>Yes</button>` +
      `<button class="btn btn-link" type="button" data-return="NO">No</button>` +
      `</p>` +
      `</div>`;

    return this._showMessage(html);
  }  
  /**
   * @desc 화면 상단에 alert 메시지를 호출한다.
   * @param {String} - 메세지 내용
   * @param {Object} - 옵션
   * @example -
   */
  topMessage(msg, opt) {
    let topMessageBox;

    msg = Jinja.global.string(msg);

    if (!msg) return;

    msg = msg.replaceAll('\n', '<br />');

    let msgOptions = {
      showTime: 2000,
      messageType: 'Infomation',
      message: '무궁화꽃이피었습니다.',
      class: this.options.warning,
      icon: 'fa-clock-o'
    };

    Object.assign(msgOptions, opt);

    if (msg) {
      msgOptions.message = msg;
    }

    let html =
      `<div class="alert topMessage animated" role="alert">` +
      `<i class="fa ${msgOptions.icon}"></i>` +
      `<strong>${msgOptions.messageType}</strong>` +
      `<t>${msgOptions.message}</t>` +
      `${msgOptions.showTime === 0 ? '<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>' : ''}` +
      `</div>`;

    topMessageBox = document.body.querySelector('.topMessageBox');

    if (!topMessageBox) {
      Jinja.insertAdjacentHTML('afterbegin', `<div class="topMessageBox"></div>`);

      topMessageBox = document.body.querySelector('.topMessageBox');
    }

    topMessageBox.insertAdjacentHTML('afterbegin', html);

    let newEl = topMessageBox.querySelector('.topMessage:first-child');

    if (msgOptions.showTime) {
      window.setTimeout(e => {
        Jinja.dom.empty(newEl.remove());
      }, msgOptions.showTime);
    }
  }

  /**
   * @desc Toast 메시지를 호출한다.
   * @param {String} - 메세지 내용
   * @param {Object} - 옵션
   * @example -
   */
  toastMessage(msg, opt) {
    msg = Jinja.global.string(msg);

    if (!msg) return;

    msg = msg.replaceAll('\n', '<br />');

    let msgOptions = {
      showTime: 10000,
      messageType: 'Infomation',
      message: '무궁화꽃이피었습니다.',
      fromUserId: '',
      fromUserName: '',
      class: this.options.warning,
      icon: 'fa-clock-o'
    };
    Object.assign(msgOptions, opt);

    if (msg) {
      msgOptions.message = msg;
    }

    let html =
      `<div class="toast fade show" role="alert" aria-live="assertive" aria-atomic="true" data-toggle="toast">` +
      `<div class="toast-header">` +
//      `<img src="/repository/users/${msgOptions.fromUserId}" onerror="this.src='/repository/systemImages/team/img1-sm.jpg' alt="brand-logo" height="28" class="mr-1 rounded">` +
      `<strong class="mr-auto">${msgOptions.fromUserName}</strong>` +
      `<small>${new Date().$toFormat('HH:mm:ss')}</small>` +
      `<button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">` +
      `<span aria-hidden="true">×</span>` +
      `</button>` +
      `</div>` +
      `<div class="toast-body">${msgOptions.message}</div>` +
      `</div>`;

    let toastMessageBox = Jinja.querySelector('.toastMessageBox');

    if (!toastMessageBox) {
      toastMessageBox = Jinja.dom.append(
        Jinja,
        `<div class="toastMessageBox"></div>`
      );
    }

    let newEl = Jinja.dom.prepend(toastMessageBox, html);

    window.setTimeout(e => {
      newEl.$remove();
    }, msgOptions.showTime);
  }

  /**
   * @desc window alert 대화상자를 호출한다.
   * @param {...*} - alert 정보
   * @example -
   */
  alert(...args) {
    Jinja.confirm.oldAlert.apply(window, args);
  }

  notification(msg, opt) {
    if(Jinja.notification){
    	Jinja.notification.show(msg, opt);
    }
  }
  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJConfirm');
  }
}

Jinja.addModule('confirm', JJConfirm);

var $topMessage = Jinja.confirm.topMessage.bind(Jinja.confirm);
var $tosta = Jinja.confirm.toastMessage.bind(Jinja.confirm);
var $notification = Jinja.confirm.notification.bind(Jinja.confirm);
/* ==JJContextmenu.640.class================ */

/**
 * @classdesc Cntext Menu 관리를 위한 클래스
 */
class JJContextmenu extends JJModule {
  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.menuEl = document.createElement('div');
    this.menuEl.classList.add('jj-context-menu');
    this.menuEl.setAttribute('tabindex', '-1');
    this.menuEl.hidden = true;

    Jinja.appendChild(this.menuEl);
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.menuEl.addEventListener('click', e => {
      if (e.target.matches('a')) {
        this.targetEl.dispatchEvent(
          new CustomEvent('jjContextMenuclick', {
            detail: {
              target: e.target,
              context: this.contextEvent,
              menu: e.target.dataset.menu
            },
            bubbles: true
          })
        );

        this.menuEl.hidden = true;
      }
    });

    this.menuEl.addEventListener('focusout', e => {
      this.menuEl.hidden = true;
    });

    this.menuEl.addEventListener('keydown', e => {
      e.preventDefault();
    });
  }

  /**
   * @desc 대상 엘리먼트를 재생성 한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Event} - 이벤트
   * @param {Object} - 메뉴정보
   * @example -
   */
  render(el, event, menus) {
    this.targetEl = el;
    this.contextEvent = event;

    if (menus) {
      let html = ``;

      menus.forEach(data => {
        if (data.label == 'divider') {
          html += `<div class="divider"></div>`;
        } else {
          html += `<a data-menu="${data.command}"><i class="fa ${data.icon}"></i><t>${data.label}</t></a>`;
        }
      });

      this.menuEl.innerHTML = html;
    }

    this.menuEl.hidden = false;
    this.menuEl.style.top = event.pageY + 'px';
    this.menuEl.style.left = event.pageX + 'px';

    if (
      this.menuEl.offsetTop + this.menuEl.offsetHeight >
      document.body.offsetHeight
    ) {
      this.menuEl.style.top =
        document.body.offsetHeight - this.menuEl.offsetHeight - 50 + 'px';
    }

    this.menuEl.focus();
  }

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJContextmenu');
  }
}

Jinja.addModule('context', JJContextmenu);
/* ==JJCode.640.class================ */

/**
 * @classdesc 코드관리를 위한 클래스
 */
class JJCode extends JJModule {

  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "codeNotFoundSpace": workspaceMeta.options.policy.codeNotFoundSpace || false,
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61"
    };
  }  

  /**
   * @desc 코드정보를 초기화한다.
   * @example -
   */
  init() {
    this.codes = {};
  }

  /**
   * @desc 코드그룹을 반환한다.
   * @param {String} - 코드그룹
   * @return {Array} - 코그정보 목록
   * @example -
   */
  getGroup(group) {
    return this.codes[group] || [];
  }

  /**
   * @desc 코드그룹을 설정한다.
   * @param {String} - 코드그룹
   * @param {Array} - 코드정보 목록
   * @return {Array} - 코드정보 목록
   * @example -
   */
  setGroup(group, rows) {
    this.codes[group] = rows;

    return rows;
  }

  /**
   * @desc 코드를 추가한다.
   * @param {String} - 코드그룹
   * @param {Object} - 코드정보
   * @example -
   */
  addCode(group, row) {
    if (this.codes[group]) {
      this.codes[group].push(row);
    } else {
      this.codes[group] = [row];
    }
  }

  /**
   * @desc 코드셋을 반환한다.
   * @param {String} - 코드그룹
   * @param {String} - 코드
   * @return {Object} - 코드정보
   * @example -
   */
  getCodeSet(group, code) {
    let result = '';

    if (this.codes[group]) {
      result = this.codes[group].filter(item => item.CODE == code)[0];
    }

    return result || {};
  }

  /**
   * @desc 코드명을 반환한다.
   * @param {String} - 그룹코드
   * @param {String} - 코드
   * @return {String} - 코드명
   * @example -
   */
  getCodeName(group, code) {
    let result = '';

    if (this.codes[group]) {
      let find = this.codes[group].filter(item => item.CODE == code)
      if(find.length > 0){
        result = find[0].NAME;
      } else if(this.options.codeNotFoundSpace){
        result = '';
      } else {
        result = code;
      }
    }
		
    return result;
  }

  /**
   * @desc 지정한 엘리먼트에 코드그룹을 바인딩 한다.
   * @param {Element} - 대상 엘리먼트
   * @param {String} - 코드그룹
   * @param {Boolean} - 빈항목 생성여부
   * @example -
   */
  bindSelectEl(el, group, isSpace) {
    let rows = this.getGroup(group);

    if (isSpace) {
      rows.splice(0, 0, {
        CODE: '',
        NAME: '-선택-'
      });
    }

    if (el.bindCode) {
      el.bindCode(rows);
    } else {
      Jinja.dom.empty(el);

      rows.forEach(row => {
        let option = document.createElement('option');

        option.appendChild(document.createTextNode(row.NAME));
        option.value = row.CODE;

        el.appendChild(option);
      });
    }
  }

  applinkCode(appLinkCode) {
    return new Promise((resolve, reject) => {
      if(Jinja.code.codes[appLinkCode]){
        resolve({
          "rows": Jinja.code.codes[appLinkCode]
        });
      }     
      let tableSplit = appLinkCode.split(".");
      let restUrl = `/${this.options.apiVersion}/jbatis/${tableSplit[1]}/rest/${tableSplit[2]}?field=${tableSplit[3]},${tableSplit[4]}&order=${tableSplit[4]}`; 
      Jinja.ajax.get(restUrl)
      	.then(result=>resolve(result))
        .catch(ex=>{ 
        console.log(appLinkCode +"코드 바인딩에 실패하였습니다");
        reject();
      });
    })
  }

  /**
   * App정보를 코드로 내려받아서 정리함
   */
  applinkCodeSet(appLinkCode) {
    return new Promise((resolve, reject) => {
      if(Jinja.code.codes[appLinkCode]){
        resolve(Jinja.code.getGroup(appLinkCode));
      } 
      else {
        let tableSplit = appLinkCode.split(".");
        let restUrl = `/${this.options.apiVersion}/jbatis/${tableSplit[1]}/rest/${tableSplit[2]}?field=${tableSplit[3]},${tableSplit[4]}&order=${tableSplit[4]}`; 
        Jinja.ajax.get(restUrl).then(result=>{
          // APP코드인 경우는 이름순으로 정렬해준다
          let sortOption ={};
          sortOption[tableSplit[4]] = "asc";
          let sortRows = Jinja.global.sortRows(result.rows, sortOption);
          
          let codeRows =[];
          sortRows.forEach(row=>{
            codeRows.push({
              "CODE": row[tableSplit[3]], 
              "NAME": row[tableSplit[4]] 
            });
          });
          this.setGroup(appLinkCode, codeRows);
          resolve(Jinja.code.getGroup(appLinkCode));
        })
          .catch(ex=>{ 
          console.log(appLinkCode +"코드 바인딩에 실패하였습니다");
          reject();
        });
      }
    })
  }

  applinkSelectEl(el, appLinkCode, isSpace) {
    //const code = "APP.studio.JJ_CODE.CODE_NO.CODE_NAME";
    Jinja.dom.empty(el);
    if (isSpace) {
      let option = document.createElement('option');

      option.appendChild(document.createTextNode('-선택-'));
      option.value = "";
      el.appendChild(option);

    }
    let tableSplit = appLinkCode.split(".");
    let restUrl = `/${this.options.apiVersion}/jbatis/${tableSplit[1]}/rest/${tableSplit[2]}?field=${tableSplit[3]},${tableSplit[4]}&order=${tableSplit[4]}`; 
    return Jinja.ajax.get(restUrl).then(result => {

      result.rows.forEach(row => {
        let option = document.createElement('option');

        option.appendChild(document.createTextNode(row[tableSplit[4]]));
        option.value = row[tableSplit[3]];
        el.appendChild(option);
      });
    })
      .catch(ex=>{ console.log(appLinkCode +"코드 바인딩에 실패하였습니다")});

  }


  /**
   * @desc 모듈명을 반환한다.
   * @example -
   */
  who() {
    alert('JJCode');
  }
}

Jinja.addModule('code', JJCode);

/** Application이 시작하면 기본 코드를 내려온다 */
Jinja.event.add("jjUserStart", "code.getCodeList", e=>{
  if(workspaceMeta.options.appInfo.codeUri){
    Jinja.ajax.excute(workspaceMeta.options.appInfo.codeUri, {
      "JBATIS_ID": workspaceMeta.options.appInfo.jbatisId
    })
      .then(result=>{
      Object.keys(result).forEach(tableNo=>{
        result[tableNo].rows.forEach(row=>{
          Jinja.code.addCode(row["GROUP_ID"], row);
        })
      })
    })
  }
});


Jinja.code.colors = {
  area4: ['#bfe1ff', '#326aab', '#f4a21a', '#dddddd'],
  blue5: ['#bfe1ff', '#abd0eb', '#79a6ce', '#326aab', '#0f3f78'],
  cat5: ['#326aab', '#0f3f78', '#dd4752', '#06726c', '#c6c6c6'],
  green5: ['#99d3d0', '#73c6c2', '#2c9691', '#06726c', '#084a47'],
  green5s: ['#0f3f78', '#326aab', '#79a6ce', '#bfe1ff', '#aaaaa9'],
  pie5: ['#326aab', '#06726c', '#bd121e', '#b3b9be', '#F4A21A'],
  plan2: ['#c6c6c6', '#326aab'],
  red5: ['#ecb9bd', '#f59ca2', '#dd4752', '#bd121e', '#8d0000'],
  red5s: ['#8d0000', '#bd121e', '#dd4752', '#f59ca2', '#ecb9bd'],
  sky5: ['#DAE5F0', '#B5CBE1', '#90B1D2', '#6B97C3', '#467eb5'],
  yellow5: ['#F37711', '#F4A21A', '#F8CA56', '#FDE399', '#FDF2DF']
};

/* ==JJDataType.640.class================ */
var DATA_TYPE={
    "domain": [
      { "CODE": "VARCHAR",  "NAME": "문자", "DBTYPE": "VARCHAR", "LENGTH": 200  ,"ELEMENT": "jj-item-text"},
      { "CODE": "INT",      "NAME": "정수", "DBTYPE": "INT",      "LENGTH": 4    ,"ELEMENT": "jj-item-text"},
      { "CODE": "FLOAT",    "NAME": "실수", "DBTYPE": "FLOAT",    "LENGTH": 8    ,"ELEMENT": "jj-item-text"},
      { "CODE": "DATE",     "NAME": "날짜", "DBTYPE": "DATE",     "LENGTH": 4    ,"ELEMENT": "jj-item-text"},
      { "CODE": "DATETIME", "NAME": "일시", "DBTYPE": "DATETIME", "LENGTH": 8    ,"ELEMENT": "jj-item-text"},
      { "CODE": "TIME",     "NAME": "시간", "DBTYPE": "VARCHAR", "LENGTH": 20   ,"ELEMENT": "jj-item-text"},
      { "CODE": "BIT",      "NAME": "체크", "DBTYPE": "VARCHAR", "LENGTH": 1    ,"ELEMENT": "jj-item-check"},
      { "CODE": "MEMO",     "NAME": "메모", "DBTYPE": "VARCHAR", "LENGTH": 2000 ,"ELEMENT": "jj-item-textarea"},
      { "CODE": "CLOB",     "NAME": "본문", "DBTYPE": "CLOB",     "LENGTH": 20000,"ELEMENT": "jj-item-textarea"}
    ],
    "SystemColumnKey":[
      "APPV_DATETIME",
      "APPV_ID",
      "APPV_NAME",
      "APPV_REQ_DATETIME",
      "APPV_STATUS",
      "OWNER_ID",
      "OWNER_NAME",
      "REG_DATE",
      "REG_DATETIME",
      "REG_USER",
      "REG_USER_ID",
      "REG_USER_NAME",
      "EDT_DATE",
      "EDT_DATETIME",
      "EDT_USER",
      "EDT_USER_ID",
      "EDT_USER_NAME",
      "COM_CD",
      "CELL_INDEX",
      "REG_DTTM",
      "REG_USER_ID",
      "REG_IP",
      "PROC_DTTM",
      "PROC_USER_ID",
      "PROC_IP",
      "KEY_ID",
      "UUID"
    ],
  	"SystemLink":{
      "help": "https://www.appspeed.net:8893/apps/help",
      "issue": "https://gitlab.fems.cf/fems-studio/femsjsdoc/-/issues" 
    }
}/* ==JJTest.640.class================ */

/**
 * @classdesc JJ 테스트 관리를 위한 클래스
 */
class JJTest extends JJModule {
  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    window.addEventListener('message', e => {
      let method = e.data.method;
      let sender = e.data.sender;

      if (sender == window.location.origin) return;

      // 외부에서 FrameView에서 실행할때 호출됨
      switch(method){
        case "excuteLoad":
          const formClass = `jj-form-excute`;

          let body = Jinja.global.json(e.data.fileBody);

          if (Jinja.querySelector(formClass)) {
            Jinja.querySelector(formClass).remove();
          }

          let formEl = document.createElement(formClass);

          Jinja.appendChild(formEl);

          formEl.addEventListener("formError", e2=>{
            e.source.postMessage({
              "method": "formError",
              "sender": e.data.sender,
              "viewId": e.data.viewId,
              "data": e2.detail
            }, e.origin);            
          });
          formEl.excuteLoad(body, e.data.isTheme, e.data.viewId);
          break;
          
        case "formError":
          Jinja.event.dispatch("Framwview.formError","studioV6Api.createFile", {
            "detail": {
              "viewId": e.data.viewId,
              "data": e.data.data
            }
          });	      
          break;
          
        default:
          break;
      }
    });
  }

  /**
   * @desc 지정한 컨텐츠를 jj-form-excute 엘리먼트에 출력한다.
   * @param {String} - 컨텐츠 문자열
   * @example -
   */
  doForm(content) {
    const formClass = `jj-form-excute`;

    let body = Jinja.global.json(content);

    if (Jinja.querySelector(formClass)) {
      Jinja.querySelector(formClass).remove();
    }

    let formEl = document.createElement(formClass);

    Jinja.appendChild(formEl);

    formEl.excuteLoad(body);
  }

  /**
   * @desc 지정한 컨텐츠를 jj-form 엘리먼트에 출력한다.
   * @param {String} - 컨텐츠 문자열
   * @example -
   */
  doHtml(content) {
    let body = Jinja.global.json(content);

    Jinja.querySelector('jj-form').bodyLoad(body);
  }

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJTest');
  }
}

Jinja.addModule('test', JJTest);
/* ==SDK.710.pkg.deploy================ */
/* ==JJBuilder.640.class================ */

/**
 * @classdesc 어플리케이션 빌드 관리를 위한 클래스
 */
class JJBuilder extends JJModule {

  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      "workspaceUri": "",
      "appPackageUri": "",
      "extPackageUri": "",
      "compressDeploy": false,
      "version": "640"
    };
  }

  /**
   * @desc 워크스페이스 정보를 설정한다.
   * @example -
   */
  setWorkspace(workspaceUri) {
    this.options.workspaceUri = workspaceUri || location.href.split('/apps/')[1].split('/')[0];

    Jinja.driverApi.getUri(this.options.workspaceUri).then(fileInfo => {
      if (fileInfo.BODY.appInfo) {
        this.options.appPackageUri = fileInfo.BODY.appInfo.appPackageUri;
        this.options.extPackageUri = fileInfo.BODY.appInfo.extPackageUri;
        this.options.compressDeploy = fileInfo.BODY.appInfo.compressDeploy;
      } else {
        this.options.appPackageUri = fileInfo.BODY.appPackageUri;
        this.options.extPackageUri = fileInfo.BODY.extPackageUri;
        this.options.compressDeploy = fileInfo.BODY.compressDeploy;
      }
    });
  }

  /**
   * @desc 워크스페이스를 시작한다.
   * @return {Promise} - 워크스페이스 시작 Promise
   * @example -
   */
  start() {
    return Jinja.ajax.patch(`/${this.options.apiVersion}/workspace/${this.options.workspaceUri}/start`);
  }

  /**
   * @desc 워크스페이스를 정지한다.
   * @param {} - 
   * @return {Promise} - 워크스페이스 정지 Promise
   * @example -
   */
  stop(msg) {
    msg = Jinja.global.string(msg);
    return Jinja.ajax.patch(`/${this.options.apiVersion}/workspace/${this.options.workspaceUri}/stop`,{COMING_SOON: msg});
  }

  /**
   * @desc 워크스페이스를 재시작한다.
   * @return {Promise} - 워크스페이스 재시작 Promise
   * @example -
   */
  reset() {
    return Jinja.ajax.patch(`/${this.options.apiVersion}/workspace/${this.options.workspaceUri}/reset`);
  }

  /**
   * @desc 어플리케이션 패키지를 생성한다.
   * @return {Promise} - 어플리케이션 패키지 생성 Promise
   * @example -
   */
  appBuilder() {
    return Jinja.ajax.post(`/${this.options.apiVersion}/package/apppkg/${this.options.appPackageUri}`, {
        compress: this.options.compressDeploy
      })
      .then(result => Jinja.ajax.patch(`/${this.options.apiVersion}/workspace/${this.options.workspaceUri}/reset`));
  }

  /**
   * @desc 외부 라이브러리 패키지를 생성한다.
   * @return {Promise} - 외부 라이브러리 패키지 생성 Promise
   * @example -
   */
  extBuilder() {
    return Jinja.ajax
      .post(`/${this.options.apiVersion}/package/extpkg/${this.options.extPackageUri}`)
      .then(result => Jinja.ajax.patch(`/${this.options.apiVersion}/workspace/${this.options.workspaceUri}/reset`));
  }

  /**
   * @desc 새로운 브라우저 창으로 사이트 연다.
   * @example -
   */
  openSite() {
    let newWindow = window.open('about:blank');
    let hrefArr = location.href.split("/");

    newWindow.location.href = `${hrefArr[0]}//${hrefArr[2]}/apps/${this.options.workspaceUri}`;
  }
}
/* ==JJDriverApi.640.class================ */

/**
 * @classdesc 리소스파일 관리를 위한 클래스
 */
class JJDriverApi extends JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this.uriCache = {};
    workspaceMeta.cacheResources.forEach(resource=>{
            resource.BODY = Jinja.global.json(resource.BODY);
            this.uriCache[resource.URI] = resource;
    });
    return {
      "useResourceCache": workspaceMeta.options.pwa.useResourceCache||false,
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      "accountSite": 'https://accounts.appspeed.net',
      "routeType": 'pjax' // mix, hash, pjax
    };
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {}

  /**
   * @desc 지정한 row 데이터에 TYPE_ICON 데이터를 추가하여 반환한다.
   * @param {Object} - 대상 데이터
   * @return {Object} - 변경된 데이터
   * @example -
   */
  _typeIcon(row) {
    switch (row.TYPE) {
      case 'folder':
        row.SORT_NAME = 'A' + row.NAME;
        row.TYPE_ICON = row.ICON || Jinja.launcher.getLauncherIcon(row.TYPE) || 'fa-folder';

        break;
      default:
        row.SORT_NAME = 'F' + row.NAME;
        row.TYPE_ICON = row.ICON || Jinja.launcher.getLauncherIcon(row.TYPE) || 'fa-book';

        break;
    }

    return row;
  }

  /**
   * @desc 지정한 rows 데이터를 트리 데이터로 변환하여 반환한다.
   * @param {Array} - 대상 데이터
   * @param {String} - 재귀호출 상위기준값
   * @param {String} - 키필드명
   * @param {String} - 상위키필드명
   * @param {String} - 정렬키
   * @param {String} - 하위노드집합명
   * @return {Obejct} - 트리 오브젝트
   * @example -
   */
  _row2tree(rows, pv, pPN, pFN, pSo, pSubName) {
    pSubName = pSubName || 'subRows';

    let tree = {};

    if (pv === undefined) pv = null;
    if (pPN === undefined) pPN = '_ID';
    if (pFN === undefined) pFN = '_PID';
    if (pSo === undefined) pSo = 'SortNo';
    if (pv == 'row') pv = rows[0][pFN];

    let selRows;

    try {
      selRows = rows.filter(function (row) {
        return row[pFN] === pv;
      });

      if (pSo) {
        selRows = selRows.sort(function (a, b) {
          return (a[pSo] || '') > b[pSo || ''] ? 1 : (a[pSo] || '') < (b[pSo] || '') ? -1 : 0;
        });
      }
    } catch (e) {
      alert(e.message);
    }

    tree = selRows;

    try {
      selRows.forEach((pR, pI) => {
        let _sub = this._row2tree(rows, pR[pPN], pPN, pFN, pSo, pSubName);

        if (_sub.length > 0) {
          pR[pSubName] = _sub;
        } else {
          pR[pSubName] = [];
        }
      });
    } catch (e) {
      alert(e.message);
    }

    return tree;
  }

  /**
   * @desc 사용자가 접근 가능한 모든 파일목록을 조회하여 트리 데이터 형태로 반환한다.
   * @return {Object} - 파일목록 트리
   * @example -
   */
  getMyResource() {
    return Jinja.ajax.get(`/${this.options.apiVersion}/driver/file/myfiles`).then(data => {
      data.rows.map(row => this._typeIcon(row));

      return this._row2tree(
        data.rows,
        '0',
        'ID',
        'PARENT_ID',
        'SORT_NAME',
        'items'
      );
    });
  }

  /**
   * @desc 지정한 폴더의 하위 데이터를 트리 데이터 형태로 반환한다.
   * @param {String} - 폴더 아이디
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  getTreeByFolderId(folderId, option) {
    return Jinja.ajax
      .post(`/${this.options.apiVersion}/driver/file/${folderId}/all`, option || {})
      .then(data => {
      data.rows.map(row => this._typeIcon(row));

      return this._row2tree(
        data.rows,
        folderId,
        'ID',
        'PARENT_ID',
        'SORT_NAME',
        'items'
      );
    });
  }

  /**
   * @desc 지정한 폴더의 하위 데이터를 트리 데이터 형태로 반환한다.
   * @param {String} - 폴더 아이디
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  getFilesByFolderId(folderId, option) {
    return Jinja.ajax
      .post(`/${this.options.apiVersion}/driver/file/${folderId}/all`, option || {});
  }
  
  /**
   * @desc 지정한 파일URI에 해당하는 파일정보를 반환한다.
   * @param {String} - 파일URI
   * @return {Promiss} - 실행결과
   * @example -
   */
  getUri(uri) {
    return new Promise((resolv, reject)=>{
      if(this.options.useResourceCache){
        if(this.uriCache[uri]){
           resolv(this.uriCache[uri]);
        } else {
          Jinja.ajax.get(`/${this.options.apiVersion}/site/resource/${uri}`)
            .then(data => {
            data.BODY = Jinja.global.json(data.BODY);
            this.uriCache[uri] = data;
            resolv(this.uriCache[uri]);
          });
        }
      } 
      else {
        Jinja.ajax.get(`/${this.options.apiVersion}/site/resource/${uri}`)
          .then(data => {
          data.BODY = Jinja.global.json(data.BODY);
          resolv(data);
        });
      }
    });
  }

  /**
   * @desc 지정한 파일경로에 해당하는 파일정보를 반환한다.
   * @param {String} - 파일경로
   * @return {Promiss} - 실행결과
   * @example -
   */
  getFilePath(filePath) {
    let url = `/${this.options.apiVersion}/site/resource/path`;

    if (filePath.startsWith('/apps/')) {
      let bb = filePath.split('/');
      let prePath = bb.splice(0, 3);

      filePath = '/' + bb.join('/');
      url = prePath.join('/') + url;
    }

    return Jinja.ajax.get(url, { q: filePath });
  }

  /**
   * @desc 나의 워크스페이스 목록을 반환한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  myWorkspaces() {
    return Jinja.ajax.get(`/${this.options.apiVersion}/driver/share/myworkspace`);
  }

  /**
   * @desc 나의 공유 폴더 목록을 반환한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  myShareFolder() {
    return Jinja.ajax.get(`/${this.options.apiVersion}/driver/share/my`);
  }

  roleWorkspaceUser(){
    return Jinja.ajax.post(`/${this.options.apiVersion}/jbatis/studio/excute/get/roleWorkspaceUser.sql`,{
      "APP_URI": workspaceMeta.options.appInfo.workspaceUri,
      "ROLE_USER_ID": Jinja.uo.USER_ID
    })
      .then(result=>{
      if(!result.rows[0] || !result.rows[0].ROLE_USER_NAME){
        throw result;
        //alert("해당워크스페이스의 권한이 없습니다");
        //form.destroy();
      } else {
        return result.rows;
      }
    })
      .catch(ex=>{
      //alert("해당워크스페이스의 권한이 없습니다");
      //form.destroy();
      throw "destroy";
    })  

  }


  /**
   * @desc 나의 공유폴더정보를 수정한다.
   * @param {Object} - 공유폴더정보
   * @return {Promiss} - 실행결과
   * @example -
   */
  myShareUpdate(shareInfo) {
    return Jinja.ajax.patch(
      `/${this.options.apiVersion}/driver/share/${shareInfo.ID}/user/${Jinja.uo.USER_ID}`,
      shareInfo
    );
  }

  /**
   * @desc 특정파일을 기준으로 최상위 폴더 파일 아이디를 반환한다.
   * @param {String} - 기준 파일아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  selectResourcePathInfo(fileId) {
    return Jinja.ajax.get(`/${this.options.apiVersion}/driver/file/${fileId}/rootinfo`);
  }

  /**
   * @desc 지정한 폴더아이디를 기준으로 폴더 정보를 조회한다.
   * @param {String} - 폴더아이디
   * @param {String} - 파일유형
   * @param {String} - 조회조건
   * @param {String} - 필드아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  selectFolderSearch(folderId, type, find, field) {
    let url = `/${this.options.apiVersion}/driver/file/search`;
    let option = {};

    if (find) option['q'] = find;
    if (field) option['field'] = field;
    if (type) option['type'] = type;

    return Jinja.ajax.get(url, option);
  }

  /**
   * @desc 지정한 파일아이디에 대한 변경이력을 반환한다.
   * @param {String} - 파일아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  getFileBackupHistory(fileId) {
    return Jinja.ajax.get(`/${this.options.apiVersion}/driver/backup/file/${fileId}`);
  }

  /**
   * @desc 지정한 백업아이디에 대한 백업정보를 반환한다.
   * @param {String} - 백업아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  getFileBackupBody(backupId) {
    return Jinja.ajax.get(`/${this.options.apiVersion}/driver/backup/${backupId}`);
  }

  /**
   * @desc 지정한 파일정보를 백업한다.
   * @param {Object} - 파일정보
   * @return {Promiss} - 실행결과
   * @example -
   */
  setFileBackup(fileInfo) {
    let sendData = {
      BACKUP_ID: Jinja.global.uuid(),
      RESOURCE_ID: fileInfo.ID,
      TYPE: fileInfo.TYPE,
      BODY: fileInfo.BODY,
      ICON: fileInfo.ICON,
      VERSION: fileInfo.VERSION,
      NAME: fileInfo.NAME,
      URI: fileInfo.URI,
      DESCRIPTION: Date().toLocaleString() + ' user backup'
    };

    return Jinja.ajax.post(`/backup/v6/resource`, sendData);
  }

  /**
   * @desc 지정한 파일정보를 백업한다. 저장시 파일잠금으로 저장을 못할 경우 실행한다.
   * @param {Object} - 파일정보
   * @return {Promiss} - 실행결과
   * @example -
   */
  backupFile(fileInfo) {
    let sendData = {
      BACKUP_ID: Jinja.global.uuid(),
      RESOURCE_ID: fileInfo.ID,
      TYPE: fileInfo.TYPE,
      BODY: fileInfo.BODY,
      ICON: fileInfo.ICON,
      VERSION: fileInfo.VERSION,
      NAME: fileInfo.NAME + ' : ' + Jinja.uo.USER_NAME + ' 저장 중 잠김상태로 작업파일 보관백업',
      URI: fileInfo.URI,
      DESCRIPTION: Jinja.uo.USER_NAME + ' 저장 중 잠김상태로 작업파일 보관백업'
    };

    return Jinja.ajax.post(`/backup/v6/resource`, sendData).then(data => {
      $topMessage('백업되었습니다');
    });
  }

  /**
   * @desc 내가 잠근 자원목록을 반환한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  locksResource() {
    return Jinja.ajax.get(`/${this.options.apiVersion}/driver/lock/myfiles`);
  }

  /**
   * @desc 지정한 파일아이디를 잠금 처리한다.
   * @param {String} - 파일아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  lockResource(fileId) {
    return Jinja.ajax.patch(`/${this.options.apiVersion}/driver/lock/${fileId}`);
  }

  /**
   * @desc 지정한 파일아이디를 잠금 해제 처리한다.
   * @param {String} - 파일아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  unlockResource(fileId) {
    return Jinja.ajax.patch(`/${this.options.apiVersion}/driver/lock/${fileId}/unlock`);
  }

  /**
   * @desc 지정한 파일아이디의 잠금 해제 요청을 발생한다.(PUSH)
   * @param {String} - 파일아이디
   * @param {String} - 잠금한 사용자아이디
   * @param {String} - 파일명
   * @example -
   */
  unlockReqResource(fileId, toLocker, fileName) {
    if (workspaceMeta.WORKSPACE.usePush) {
      Jinja.push
        .topicPost('studio602-unlockReq', fileId, {
        reqId: Jinja.uo.USER_ID,
        reqName: Jinja.uo.USER_NAME,
        toLocker: toLocker,
        fileName: fileName
      })
        .then(result => $topMessage('해제 요청을 발생했습니다.'));
    }
  }

  /**
   * @desc 지정한 파일 아이디의 잠금 해제 요청을 발생한다.(SSE)
   * @param {String} - 파일아이디
   * @param {String} - 잠금한 사용자아이디
   * @param {String} - 파일명
   * @return {Promiss} - 실행결과
   * @example -
   */
  unlockReqPeer(fileId, toLocker, fileName) {
    return Jinja.ajax
      .post(`/${this.options.apiVersion}/notification/sse/peer`, {
      message: {
        NOTI_CODE: '203',
        TITLE: '잠김해제요청드립니다.',
        BODY: {
          from: Jinja.uo.USER_NAME,
          file: fileName
        },
        PARENT_TYPE: 'STUDIO',
        PARENT_ID: fileId,
        USER_ID: toLocker
      },
    })
      .then(result => $topMessage('해제 요청을 발생했습니다.'));
  }

  /**
   * @desc 지정한 파일 아이디에 대한 정보를 반환한다.
   * @param {String} - 파일아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  readFile(fileId) {
    return Jinja.ajax.get(`/${this.options.apiVersion}/driver/file/${fileId}`);
  }

  /**
   * @desc 지정한 파일정보를 생성한다.
   * @param {Object} - 파일정보
   * @return {Promiss} - 실행결과
   * @example -
   */
  createFile(fileInfo) {
    return Jinja.ajax.post(`/${this.options.apiVersion}/driver/file`, fileInfo).then(data => {
      if (data && fileInfo.TYPE != 'file') {
        Jinja.event.dispatch('studio.newFile', 'studioV6Api.createFile', {
          detail: fileInfo
        });
      }

      return fileInfo;
    });
  }


  /**
   * @desc 지정한 파일의 BODY 정보를 수정한다.
   * @param {Object} - 파일정보
   * @return {Promiss} - 실행결과
   * @example -
   */
  updateFile(fileInfo) {
    let fileId = fileInfo.ID;
    let body = fileInfo.BODY;
    let version = fileInfo.VERSION;

    return this.updateFileBody(fileInfo.ID, fileInfo.BODY, fileInfo.VERSION)
      .then(data => {
      fileInfo.VERSION = parseInt(fileInfo.VERSION) + 1;
      fileInfo.LOCKER_ID = Jinja.uo.USER_ID;
      fileInfo.LOCKER_NAME = Jinja.uo.USER_NAME;

      Jinja.store.localStorageClear('EditCache:' + fileInfo.ID);
      Jinja.event.dispatch('studio.unChangeFile', 'StudioV6Api.updateFile', {detail: fileInfo});
      Jinja.event.dispatch('studio.updateFileBody', 'StudioV6Api.updateFile', { detail: fileInfo });

      $topMessage('저장되었습니다');
    })
      .catch(ex => {
      Jinja.confirm
        .save(
        `잠김이나 버전문제로 저장이 불가능합니다.\n작업파일을 백업하시겠습니까?`
      )
        .then(() => this.backupFile(fileInfo))
        .catch(() =>{});
    });
  }

  /**
   * @desc 지정한 파일을 닫기 위한 작업을 실행한다.
   * @param {Object} - 파일정보
   * @example -
   */
  closeFile(fileInfo) {
    let fileId = fileInfo.ID;
    let localStorageId = 'EditCache:' + fileId;
    let cacheBody = Jinja.store.localStorage(localStorageId);

    if (cacheBody) {
      Jinja.confirm.save('변경된 자료가 있습니다. 저장하시겠습니까?').then(() => this.updateFile(fileInfo));
    }
  }

  /**
   * @desc 지정한 파일의 변경 처리를 실행한다.
   * @param {Object} - 파일정보
   * @example -
   */
  changeFile(fileInfo) {
    Jinja.store.localStorage('EditCache:' + fileInfo.ID, Jinja.global.string(fileInfo));
    Jinja.event.dispatch('studio.changeFile', 'StudioV6Api.changeFile', {detail: fileInfo});
  }

  /**
   * @desc 지정한 파일의 기본정보를 수정한다.
   * @param {String} - 파일아이디
   * @param {Object} - 파일정보
   * @return {Promiss} - 실행결과
   * @example -
   */
  updateFileInfo(fileId, fileInfo) {
    return Jinja.ajax
      .patch(`/${this.options.apiVersion}/driver/file/${fileId}`, fileInfo)
      .then(result => {
      fileInfo.ID = fileId;

      Jinja.event.dispatch(
        'studio.updateFileInfo',
        'studioV6Api.updateFileInfo',
        { detail: fileInfo }
      );

      return fileInfo;
    });
  }

  /**
   * @desc 지정한 파일의 BODY 정보를 수정한다.
   * @param {String} - 파일아이디
   * @param {Object} - 파일본문
   * @param {Number} - 버전
   * @return {Promiss} - 실행결과
   * @example -
   */
  updateFileBody(fileId, fileBody, version) {
    return Jinja.ajax.patch(`/${this.options.apiVersion}/driver/file/${fileId}/body`, {
      VERSION: version,
      BODY: fileBody
    });
  }

  importFileBody(fileId, fileBody, version) {
    return Jinja.ajax.patch(`/${this.options.apiVersion}/driver/file/${fileId}/import`, {
      VERSION: version,
      BODY: fileBody
    });
  }

  /**
   * @desc 지정한 파일 아이디의 파일정보를 지정한 폴더하위에 생성한다.
   * @param {String} - 파일아이디
   * @param {String} - 폴더아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  copyFile(fileId, copyFolder) {
    return Jinja.ajax.patch(`/${this.options.apiVersion}/driver/file/${fileId}/copy`, {
      COPY_FOLDER: copyFolder
    });
  }

  /**
   * @desc 지정한 파일아이디의 파일정보의 상위폴더를 지정한 폴더로 변경한다.
   * @param {String} - 파일아이디
   * @param {String} - 폴더아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  moveFile(fileId, moveFolder) {
    return Jinja.ajax.patch(`/${this.options.apiVersion}/driver/file/${fileId}/move`, {
      MOVE_FOLDER: moveFolder
    });
  }

  /**
   * @desc 지정한 파일아이디에 대한 파일정보를 삭제한다.
   * @param {String} - 파일아이디
   * @param {Boolean} - 삭제 대화상자 표출여부
   * @return {Promiss} - 실행결과
   * @example -
   */
  trashFile(fileId, noConfirm) {
    let result;

    if (noConfirm) {
      return Jinja.ajax
        .delete(`/${this.options.apiVersion}/driver/file/${fileId}`)
        .then(data => {
        Jinja.event.dispatch('studio.trashFile', 'studioV6Api.trashFile', {
          detail: { ileId: fileId }
        });

        return true;
      })
        .catch(() =>
               Jinja.confirm.info(`삭제가 실패하였습니다.\n${result.error.message}`)
              );
    } else {
      return Jinja.confirm
        .delete(`Delete OK?`)
        .then(() => Jinja.ajax.delete(`/${this.options.apiVersion}/driver/file/${fileId}`))
        .then(() =>
              Jinja.event.dispatch('studio.trashFile', 'studioV6Api.trashFile', {
        detail: { fileId: fileId }
      })
             )
        .catch(result =>
               Jinja.confirm.info(`삭제가 실패하였습니다.\n${result.error.message}`)
              );
    }
  }

  /**
   * @desc 워크스페이스 설정화면을 호출하고 결과를 파일로 생성한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  formNewWorkspace() {
    let sendData;

    return JJFormModal.open('newWorkspace.app.640.uc')
      .then(result => {
      sendData = {
        "WORKSPACE_ID": Jinja.global.uuid(),
        "URI": result.uri,
        "NAME": result.name,
        "DESCRIPTION": result.description
      };

      return Jinja.ajax.post(`/${this.options.apiVersion}/workspace`, sendData);
    })
      .then(result => sendData);
  }

  /**
   * @desc 스토어 설정화면을 호출하고 결과를 지정한 폴더하위의 파일로 생성한다.
   * @param {String} - 폴더아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  storeNewFile(folderId) {
    return JJFormModal.open('getStore.640.uc').then(result =>
                                                    this.createFile({
      PARENT_ID: folderId,
      ID: Jinja.global.uuid(),
      TYPE: result['TYPE'],
      NAME: result['NAME'],
      URI: Jinja.global.uuid(),
      ICON: result['ICON'],
      BODY: result['BODY'],
      DESCRIPTION: result['DESCRIPTION'],
      TEMPLITE: result['TYPEPAGE'],
      LOCKER: Jinja.uo.USER_ID,
      VERSION: 1
    })
                                                   );
  }

  /**
   * @desc 폴더 설정화면을 호출하고 결과를 지정한 폴더하위의 파일로 생성한다.
   * @param {String} - 폴더아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  formNewFolder(folderId) {
    return JJFormModal.open('infoFile.app.640.uc', {
      name: '',
      uri: Jinja.global.uuid(),
      id: Jinja.global.uuid(),
      type: 'folder'
    }).then(result =>
            this.createFile({
      PARENT_ID: folderId,
      ID: result.id,
      TYPE: 'folder',
      NAME: result.name,
      URI: result.uri
    })
           );
  }

  /**
   * @desc 페이지 설정화면을 호출하고 결과를 지정한 폴더하위의 파일로 생성한다.
   * @param {String} - 폴더아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  formNewFile(folderId) {
    return JJFormModal.open("newFile.app.640.uc")
      .then(result=>{
      let fileInfo= {
        "PARENT_ID": folderId,
        "ID": result["ID"],
        "TYPE":result["TYPE"],
        "NAME":result["NAME"],
        "URI":result["URI"],
        "ICON":result["ICON"],
        "DESCRIPTION":result["DESCRIPTION"],
        "TEMPLITE":"",
        "LOCKER": Jinja.uo.USER_ID,
        "VERSION":1
      };

      return new Promise((resolv, reject)=>{
        if(result["TYPEPAGE"]){
          Jinja.ajax.get(`/${this.options.apiVersion}/site/resource/${result["TYPEPAGE"]}`)
            .then(data =>{
            fileInfo.BODY = data.BODY;
            resolv(fileInfo);
          })
            .catch(data =>resolv(fileInfo));
        } else {
          return resolv(fileInfo);
        }
      });
    })
      .then(fileInfo=>this.createFile(fileInfo));
  }

  /**
   * @desc 지정한 파일의 파일정보를 수정한다.
   * @param {String} - 폴더아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  formInfoFile(fileInfo) {
    let sendData;

    return JJFormModal.open('infomation.app.640.uc', {
      fileInfo: fileInfo
    }).then(fileInfoUpdate => this.updateFileInfo(fileInfo.ID, fileInfoUpdate));
  }

  /**
   * @desc 지정한 파일의 이름을 수정한다.
   * @param {String} - 폴더아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  formRenameFile(fileInfo) {
    let sendData;

    return JJFormModal.open('infoFile.app.640.uc', {
      name: fileInfo.NAME,
      uri: fileInfo.URI,
      id: fileInfo.ID,
      type: fileInfo.TYPE
    }).then(result =>
            this.updateFileInfo(fileInfo.ID, {
      NAME: result['name'],
      URI: result['uri']
    })
           );
  }

  /**
   * @desc 백업 화면을 호출한다.
   * @param {String} - 폴더아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  formBackupInfo(fileInfo) {
    return JJFormModal.open('backup.app.640.uc', {
      fileInfo: fileInfo
    });
  }

  /**
   * @desc 폴더 공유 설정화면을 호출한다.
   * @param {String} - 폴더아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  folderShare(fileInfo) {
    return JJFormModal.open('member.app.640.uc', {
      fileInfo: fileInfo
    });
  }

  /**
   * @desc 지정한 파일아이디의 이력화면을 호출한다.
   * @param {String} - 파일아이디
   * @example -
   */
  myHistory(fileId) {
    JJModal602.show('app602.history.uc');
  }

  /**
   * @async
   * @desc 파일 조회화면을 호출한다.
   * @example -
   */
  async findFile() {
    JJModal602.show('app602.findFile.uc');
  }

  /**
   * @desc 지정한 사용자에게 메시지를 발송한다.(SSE)
   * @param {String} - 대상 사용자아이디
   * @param {String} - 메세지 제목
   * @return {Promiss} - 실행결과
   * @example -
   */
  sendMessageSsePeer(toUserId, Message) {
    return Jinja.ajax
      .post(`/${this.options.apiVersion}/notification/sse/peer`, {
      message: {
        NOTI_CODE: '301',
        TITLE: Message,
        BODY: {
          fromUserId: Jinja.uo.USER_ID,
          fromUserName: Jinja.uo.USER_NAME
        },
        USER_ID: toUserId
      },
    })
      .then(result => $topMessage('메시지를 발송했습니다.'));
  }

  uriCheck(uri){
    return Jinja.ajax.get(`/${this.options.apiVersion}/workspaceExistYn/${uri}`)
      .then(data => {
      if (data.YN == 'Y') {
        return true
      } else {
        return false
      }
    })
      .catch(data => {
      console.error(data);
      alert('JJDriverApi.uriCheck오류가 발생 했습니다.');
    });
  }

	/**
	 * 워크스페이스 URI의 중복여부를 체크하는 이벤트를 설정함
	 */
  uriDoubleCheck(el){
    el.addEventListener('keyup', e => {
      el.setCustomValidity("");
      if(el.checkValidity()){
        this.uriCheck(el.value).then(check=>{
          el.setCustomValidity(check?"이미존재하는 주소입니다":"")
        })
      }
    });
  }  

  /**
   * @desc 모듈명을 반환한다.
   */
  who() {
    alert('JJDriverApi');
  }
}

Jinja.addModule('driverApi', JJDriverApi);
/* ==JJGlobalEvent.640.class================ */

/**
 * @global
 * @event click:jj-active
 * @desc globalEvent.jj-active 클릭 이벤트
 */
Jinja.event.add('click', 'globalEvent.jj-active', e => {
  if (e.target.matches('.jj-active[j-for] *')) {
    return;
  }

  if (e.target.matches('.jj-active *')) {
    let ul = Jinja.dom.closest(e.target, '.jj-active');

    ul.querySelectorAll('.jj-active > .active').forEach(el =>
      el.classList.remove('active')
    );

    Jinja.dom.closest(e.target, '.jj-active > *').classList.add('active');
  }
});

/**
 * @global
 * @event click:jj-command
 * @desc [jj-command] 클릭 이벤트
 */
Jinja.event.add('click', '[jj-command]', e => {
  let form, cmdEl;
  if (
    e.target.matches('xjj-studio-form [jj-command], xjj-studio-form [jj-command] *')
  ) {
    form = e.target.closest('jj-studio-form');
    cmdEl = e.target.closest('[jj-command]');
  } else if (
    e.target.matches('.jj-form [jj-command], .jj-form [jj-command] *')
  ) {
    form = e.target.closest('.jj-form');
    cmdEl = e.target.closest('[jj-command]');
  } else if (
    e.target.matches('jj-theme [jj-command], jj-theme [jj-command] *')
  ) {
    form = e.target.closest('jj-theme');
    cmdEl = e.target.closest('[jj-command]');
  }

  if (form && cmdEl) {
    e.stopImmediatePropagation();
    e.stopPropagation();

    let cmdString = cmdEl.getAttribute('jj-command');

    if (cmdString) {
      form._cmdParaApply(cmdString, e);
    }
  }
});

/**
 * @global
 * @event click:jj-toggle
 * @desc JJToggle.constructor 클릭 이벤트
 */
Jinja.event.add('click', 'JJToggle.constructor', e => {
  if (e.target.matches('.jj-toggle, .jj-toggle *')) {
    let targetQuery = e.target.closest('.jj-toggle').dataset.target;
    let targetEl;

    if (targetQuery === 'self') {
      targetEl = e.target;
    } else if (targetQuery) {
      let page = e.target.closest('[jj-uuid]');

      if (page) {
        targetEl = page.querySelector(targetQuery);
      }
    } else {
      targetEl = e.target.nextElementSibling;
    }

    if (targetEl) {
      targetEl.classList.toggle('show');

      if (!Object.is(targetEl, e.target)) {
        e.target.classList.toggle('show');
      }
    } else {
      alert('토글대상을 찾을수 없습니다');
    }
  }
});

/**
 * @global
 * @event click:jj-toggle
 * @desc JJToggle.constructor 클릭 이벤트
 */
Jinja.event.add('click', 'JJHidden.constructor', e => {
  if (e.target.matches('.jj-hidden')) {
    e.target.classList.toggle('on');
  }
});
/**
 * @global
 * @event click:jj-logout
 * @desc JJLogout.constructor 클릭 이벤트
 */
Jinja.event.add('click', 'JJLogout.constructor', e => {
  if (e.target.matches('.jj-logout')) {
    Jinja.event.dispatch('JJLogout', 'studio.theme', { detail: Jinja.uo });
  }
});


/**
 * @global
 * @event click:jj-dropdown
 * @desc globalEvent.jj-dropdown 클릭 이벤트
 */
Jinja.event.add('click', 'globalEvent.jj-dropdown', e => {
  let dropEl = e.target.parentElement;
  let dropMenu = e.target.nextElementSibling;

  if (e.target.matches('.dropdown-toggle')) {
    let dropEl = e.target.parentElement;
    let dropMenu = e.target.nextElementSibling;

    dropEl.setAttribute('tabindex', -1);
    dropEl.classList.add('show');
    dropMenu.classList.add('show');
    dropMenu.focus();

    dropEl.addEventListener('focusout', onfocusout);

    if (dropEl.querySelector('.dropdown-menu')) {
      dropEl.querySelector('.dropdown-menu').addEventListener('click', onClick);
    }
  }

  function onfocusout(e) {
    if (!dropEl.contains(e.relatedTarget)) {
      dropEl.classList.remove('show');
      dropMenu.classList.remove('show');
      dropEl.removeEventListener('focusout', onfocusout);

      if (dropEl.querySelector('.dropdown-menu')) {
        dropEl.querySelector('.dropdown-menu').removeEventListener('click', onClick);
      }
    }
  }

  function onClick(e) {
    if (
      e.target.matches(
        '.dropdown-item:not(.dropdown-toggle), .dropdown-item:not(.dropdown-toggle) *'
      )
    ) {
      dropEl.classList.remove('show');
      dropMenu.classList.remove('show');
      dropEl.removeEventListener('focusout', onfocusout);

      if (dropEl.querySelector('.dropdown-menu')) {
        dropEl.querySelector('.dropdown-menu').removeEventListener('click', onClick);
      }
    }
  }
});

/**
 * @global
 * @event click:close
 * @desc globalEvent.close 클릭 이벤트
 */
Jinja.event.add('click', 'globalEvent.close', e => {
  if (e.target.matches('.close[data-dismiss]')) {
    let closeTarget = Jinja.dom.closest(e.target, '.' + e.target.dataset.dismiss);

    if (closeTarget) closeTarget.$remove();
  }
});
/* ==w3c.color.640.class================ */
/* w3color.js ver.1.18 by w3schools.com (Do not remove this line)*/
(function () {
function w3color(color, elmnt) {
  if (!(this instanceof w3color)) { return new w3color(color, elmnt); }
  if (typeof color == "object") {return color; }
  this.attachValues(toColorObject(color));
  if (elmnt) {elmnt.style.backgroundColor = this.toRgbString();}
}
w3color.prototype = {
  toRgbString : function () {
    return "rgb(" + this.red + ", " + this.green + ", " + this.blue + ")";
  },
  toRgbaString : function () {
    return "rgba(" + this.red + ", " + this.green + ", " + this.blue + ", " + this.opacity + ")";
  },
  toHwbString : function () {
    return "hwb(" + this.hue + ", " + Math.round(this.whiteness * 100) + "%, " + Math.round(this.blackness * 100) + "%)";
  },
  toHwbStringDecimal : function () {
    return "hwb(" + this.hue + ", " + this.whiteness + ", " + this.blackness + ")";
  },
  toHwbaString : function () {
    return "hwba(" + this.hue + ", " + Math.round(this.whiteness * 100) + "%, " + Math.round(this.blackness * 100) + "%, " + this.opacity + ")";
  },
  toHslString : function () {
    return "hsl(" + this.hue + ", " + Math.round(this.sat * 100) + "%, " + Math.round(this.lightness * 100) + "%)";
  },
  toHslStringDecimal : function () {
    return "hsl(" + this.hue + ", " + this.sat + ", " + this.lightness + ")";
  },
  toHslaString : function () {
    return "hsla(" + this.hue + ", " + Math.round(this.sat * 100) + "%, " + Math.round(this.lightness * 100) + "%, " + this.opacity + ")";
  },
  toCmykString : function () {
    return "cmyk(" + Math.round(this.cyan * 100) + "%, " + Math.round(this.magenta * 100) + "%, " + Math.round(this.yellow * 100) + "%, " + Math.round(this.black * 100) + "%)";
  },
  toCmykStringDecimal : function () {
    return "cmyk(" + this.cyan + ", " + this.magenta + ", " + this.yellow + ", " + this.black + ")";
  },
  toNcolString : function () {
    return this.ncol + ", " + Math.round(this.whiteness * 100) + "%, " + Math.round(this.blackness * 100) + "%";
  },
  toNcolStringDecimal : function () {
    return this.ncol + ", " + this.whiteness + ", " + this.blackness;
  },
  toNcolaString : function () {
    return this.ncol + ", " + Math.round(this.whiteness * 100) + "%, " + Math.round(this.blackness * 100) + "%, " + this.opacity;
  },
  toName : function () {
    var r, g, b, colorhexs = getColorArr('hexs');
    for (i = 0; i < colorhexs.length; i++) {
      r = parseInt(colorhexs[i].substr(0,2), 16);
      g = parseInt(colorhexs[i].substr(2,2), 16);
      b = parseInt(colorhexs[i].substr(4,2), 16);
      if (this.red == r && this.green == g && this.blue == b) {
        return getColorArr('names')[i];
      }
    }
    return "";
  },
  toHexString : function () {
    var r = toHex(this.red);
    var g = toHex(this.green);
    var b = toHex(this.blue);
    return "#" +  r + g + b;
  },
  toRgb : function () {
    return {r : this.red, g : this.green, b : this.blue, a : this.opacity};
  },
  toHsl : function () {
    return {h : this.hue, s : this.sat, l : this.lightness, a : this.opacity};
  },
  toHwb : function () {
    return {h : this.hue, w : this.whiteness, b : this.blackness, a : this.opacity};
  },
  toCmyk : function () {
    return {c : this.cyan, m : this.magenta, y : this.yellow, k : this.black, a : this.opacity};
  },
  toNcol : function () {
    return {ncol : this.ncol, w : this.whiteness, b : this.blackness, a : this.opacity};
  },
  isDark : function (n) {
    var m = (n || 128);
    return (((this.red * 299 + this.green * 587 + this.blue * 114) / 1000) < m);
  },
  saturate : function (n) {
    var x, rgb, color;
    x = (n / 100 || 0.1);
    this.sat += x;
    if (this.sat > 1) {this.sat = 1;}
    rgb = hslToRgb(this.hue, this.sat, this.lightness);
    color = colorObject(rgb, this.opacity, this.hue, this.sat);
    this.attachValues(color);
  },
  desaturate : function (n) {
    var x, rgb, color;
    x = (n / 100 || 0.1);
    this.sat -= x;
    if (this.sat < 0) {this.sat = 0;}
    rgb = hslToRgb(this.hue, this.sat, this.lightness);
    color = colorObject(rgb, this.opacity, this.hue, this.sat);
    this.attachValues(color);
  },
  lighter : function (n) {
    var x, rgb, color;
    x = (n / 100 || 0.1);
    this.lightness += x;
    if (this.lightness > 1) {this.lightness = 1;}
    rgb = hslToRgb(this.hue, this.sat, this.lightness);
    color = colorObject(rgb, this.opacity, this.hue, this.sat);
    this.attachValues(color);
  },
  darker : function (n) {
    var x, rgb, color;
    x = (n / 100 || 0.1);
    this.lightness -= x;
    if (this.lightness < 0) {this.lightness = 0;}
    rgb = hslToRgb(this.hue, this.sat, this.lightness);
    color = colorObject(rgb, this.opacity, this.hue, this.sat);
    this.attachValues(color);
  },
  attachValues : function(color) {
    this.red = color.red;
    this.green = color.green;
    this.blue = color.blue;
    this.hue = color.hue;
    this.sat = color.sat;
    this.lightness = color.lightness;
    this.whiteness = color.whiteness;
    this.blackness = color.blackness;
    this.cyan = color.cyan;
    this.magenta = color.magenta;
    this.yellow = color.yellow;
    this.black = color.black;
    this.ncol = color.ncol;
    this.opacity = color.opacity;
    this.valid = color.valid;
  }
};
function toColorObject(c) {
  var x, y, typ, arr = [], arrlength, i, opacity, match, a, hue, sat, rgb, colornames = [], colorhexs = [];
  c = w3trim(c.toLowerCase());
  x = c.substr(0,1).toUpperCase();
  y = c.substr(1);
  a = 1;
  if ((x == "R" || x == "Y" || x == "G" || x == "C" || x == "B" || x == "M" || x == "W") && !isNaN(y)) {
    if (c.length == 6 && c.indexOf(",") == -1) {
    } else {
      c = "ncol(" + c + ")";
    }
  }
  if (c.length != 3 && c.length != 6 && !isNaN(c)) {c = "ncol(" + c + ")";}
  if (c.indexOf(",") > 0 && c.indexOf("(") == -1) {c = "ncol(" + c + ")";}  
  if (c.substr(0, 3) == "rgb" || c.substr(0, 3) == "hsl" || c.substr(0, 3) == "hwb" || c.substr(0, 4) == "ncol" || c.substr(0, 4) == "cmyk") {
    if (c.substr(0, 4) == "ncol") {
      if (c.split(",").length == 4 && c.indexOf("ncola") == -1) {
        c = c.replace("ncol", "ncola");
      }
      typ = "ncol";
      c = c.substr(4);
    } else if (c.substr(0, 4) == "cmyk") {
      typ = "cmyk";
      c = c.substr(4);
    } else {
      typ = c.substr(0, 3);
      c = c.substr(3);
    }
    arrlength = 3;
    opacity = false;
    if (c.substr(0, 1).toLowerCase() == "a") {
      arrlength = 4;
      opacity = true;
      c = c.substr(1);
    } else if (typ == "cmyk") {
      arrlength = 4;
      if (c.split(",").length == 5) {
        arrlength = 5;
        opacity = true;
      }
    }
    c = c.replace("(", "");
    c = c.replace(")", "");
    arr = c.split(",");
    if (typ == "rgb") {
      if (arr.length != arrlength) {
        return emptyObject();
      }
      for (i = 0; i < arrlength; i++) {
        if (arr[i] == "" || arr[i] == " ") {arr[i] = "0"; }
        if (arr[i].indexOf("%") > -1) {
          arr[i] = arr[i].replace("%", "");
          arr[i] = Number(arr[i] / 100);
          if (i < 3 ) {arr[i] = Math.round(arr[i] * 255);}
        }
        if (isNaN(arr[i])) {return emptyObject(); }
        if (parseInt(arr[i]) > 255) {arr[i] = 255; }
        if (i < 3) {arr[i] = parseInt(arr[i]);}
        if (i == 3 && Number(arr[i]) > 1) {arr[i] = 1;}
      }
      rgb = {r : arr[0], g : arr[1], b : arr[2]};
      if (opacity == true) {a = Number(arr[3]);}
    }
    if (typ == "hsl" || typ == "hwb" || typ == "ncol") {
      while (arr.length < arrlength) {arr.push("0"); }
      if (typ == "hsl" || typ == "hwb") {
        if (parseInt(arr[0]) >= 360) {arr[0] = 0; }
      }
      for (i = 1; i < arrlength; i++) {
        if (arr[i].indexOf("%") > -1) {
          arr[i] = arr[i].replace("%", "");
          arr[i] = Number(arr[i]);
          if (isNaN(arr[i])) {return emptyObject(); }
          arr[i] = arr[i] / 100;
        } else {
          arr[i] = Number(arr[i]);
        }
        if (Number(arr[i]) > 1) {arr[i] = 1;}
        if (Number(arr[i]) < 0) {arr[i] = 0;}
      }
      if (typ == "hsl") {rgb = hslToRgb(arr[0], arr[1], arr[2]); hue = Number(arr[0]); sat = Number(arr[1]);}
      if (typ == "hwb") {rgb = hwbToRgb(arr[0], arr[1], arr[2]);}
      if (typ == "ncol") {rgb = ncolToRgb(arr[0], arr[1], arr[2]);}
      if (opacity == true) {a = Number(arr[3]);}
    }
    if (typ == "cmyk") {
      while (arr.length < arrlength) {arr.push("0"); }
      for (i = 0; i < arrlength; i++) {
        if (arr[i].indexOf("%") > -1) {
          arr[i] = arr[i].replace("%", "");
          arr[i] = Number(arr[i]);
          if (isNaN(arr[i])) {return emptyObject(); }
          arr[i] = arr[i] / 100;
        } else {
          arr[i] = Number(arr[i]);
        }
        if (Number(arr[i]) > 1) {arr[i] = 1;}
        if (Number(arr[i]) < 0) {arr[i] = 0;}
      }
      rgb = cmykToRgb(arr[0], arr[1], arr[2], arr[3]);
      if (opacity == true) {a = Number(arr[4]);}
    }
  } else if (c.substr(0, 3) == "ncs") {
    rgb = ncsToRgb(c);
  } else {
    match = false;
    colornames = getColorArr('names');
    for (i = 0; i < colornames.length; i++) {
      if (c.toLowerCase() == colornames[i].toLowerCase()) {
        colorhexs = getColorArr('hexs');
        match = true;
        rgb = {
          r : parseInt(colorhexs[i].substr(0,2), 16),
          g : parseInt(colorhexs[i].substr(2,2), 16),
          b : parseInt(colorhexs[i].substr(4,2), 16)
        };
        break;
      }
    }
    if (match == false) {
      c = c.replace("#", "");
      if (c.length == 3) {c = c.substr(0,1) + c.substr(0,1) + c.substr(1,1) + c.substr(1,1) + c.substr(2,1) + c.substr(2,1);}
      for (i = 0; i < c.length; i++) {
        if (!isHex(c.substr(i, 1))) {return emptyObject(); }
      }
      arr[0] = parseInt(c.substr(0,2), 16);
      arr[1] = parseInt(c.substr(2,2), 16);
      arr[2] = parseInt(c.substr(4,2), 16);
      for (i = 0; i < 3; i++) {
        if (isNaN(arr[i])) {return emptyObject(); }
      }
      rgb = {
        r : arr[0],
        g : arr[1],
        b : arr[2]
      };
    }
  }
  return colorObject(rgb, a, hue, sat);
}
function colorObject(rgb, a, h, s) {
  var hsl, hwb, cmyk, ncol, color, hue, sat;
  if (!rgb) {return emptyObject();}
  if (!a) {a = 1;}
  hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
  hwb = rgbToHwb(rgb.r, rgb.g, rgb.b);
  cmyk = rgbToCmyk(rgb.r, rgb.g, rgb.b);
  hue = (h || hsl.h);
  sat = (s || hsl.s);   
  ncol = hueToNcol(hue);
  color = {
    red : rgb.r,
    green : rgb.g,
    blue : rgb.b,
    hue : hue,
    sat : sat,
    lightness : hsl.l,
    whiteness : hwb.w,
    blackness : hwb.b,
    cyan : cmyk.c,
    magenta : cmyk.m,
    yellow : cmyk.y,
    black : cmyk.k,
    ncol : ncol,
    opacity : a,
    valid : true
  };
  color = roundDecimals(color);
  return color;
}
function emptyObject() {
  return {
    red : 0,
    green : 0,
    blue : 0,
    hue : 0,
    sat : 0,
    lightness : 0,
    whiteness : 0,
    blackness : 0,
    cyan : 0,
    magenta : 0,
    yellow : 0,
    black : 0,
    ncol : "R",
    opacity : 1,
    valid : false
  };
}
function getColorArr(x) {
  if (x == "names") {return ['AliceBlue','AntiqueWhite','Aqua','Aquamarine','Azure','Beige','Bisque','Black','BlanchedAlmond','Blue','BlueViolet','Brown','BurlyWood','CadetBlue','Chartreuse','Chocolate','Coral','CornflowerBlue','Cornsilk','Crimson','Cyan','DarkBlue','DarkCyan','DarkGoldenRod','DarkGray','DarkGrey','DarkGreen','DarkKhaki','DarkMagenta','DarkOliveGreen','DarkOrange','DarkOrchid','DarkRed','DarkSalmon','DarkSeaGreen','DarkSlateBlue','DarkSlateGray','DarkSlateGrey','DarkTurquoise','DarkViolet','DeepPink','DeepSkyBlue','DimGray','DimGrey','DodgerBlue','FireBrick','FloralWhite','ForestGreen','Fuchsia','Gainsboro','GhostWhite','Gold','GoldenRod','Gray','Grey','Green','GreenYellow','HoneyDew','HotPink','IndianRed','Indigo','Ivory','Khaki','Lavender','LavenderBlush','LawnGreen','LemonChiffon','LightBlue','LightCoral','LightCyan','LightGoldenRodYellow','LightGray','LightGrey','LightGreen','LightPink','LightSalmon','LightSeaGreen','LightSkyBlue','LightSlateGray','LightSlateGrey','LightSteelBlue','LightYellow','Lime','LimeGreen','Linen','Magenta','Maroon','MediumAquaMarine','MediumBlue','MediumOrchid','MediumPurple','MediumSeaGreen','MediumSlateBlue','MediumSpringGreen','MediumTurquoise','MediumVioletRed','MidnightBlue','MintCream','MistyRose','Moccasin','NavajoWhite','Navy','OldLace','Olive','OliveDrab','Orange','OrangeRed','Orchid','PaleGoldenRod','PaleGreen','PaleTurquoise','PaleVioletRed','PapayaWhip','PeachPuff','Peru','Pink','Plum','PowderBlue','Purple','RebeccaPurple','Red','RosyBrown','RoyalBlue','SaddleBrown','Salmon','SandyBrown','SeaGreen','SeaShell','Sienna','Silver','SkyBlue','SlateBlue','SlateGray','SlateGrey','Snow','SpringGreen','SteelBlue','Tan','Teal','Thistle','Tomato','Turquoise','Violet','Wheat','White','WhiteSmoke','Yellow','YellowGreen']; }
  if (x == "hexs") {return ['f0f8ff','faebd7','00ffff','7fffd4','f0ffff','f5f5dc','ffe4c4','000000','ffebcd','0000ff','8a2be2','a52a2a','deb887','5f9ea0','7fff00','d2691e','ff7f50','6495ed','fff8dc','dc143c','00ffff','00008b','008b8b','b8860b','a9a9a9','a9a9a9','006400','bdb76b','8b008b','556b2f','ff8c00','9932cc','8b0000','e9967a','8fbc8f','483d8b','2f4f4f','2f4f4f','00ced1','9400d3','ff1493','00bfff','696969','696969','1e90ff','b22222','fffaf0','228b22','ff00ff','dcdcdc','f8f8ff','ffd700','daa520','808080','808080','008000','adff2f','f0fff0','ff69b4','cd5c5c','4b0082','fffff0','f0e68c','e6e6fa','fff0f5','7cfc00','fffacd','add8e6','f08080','e0ffff','fafad2','d3d3d3','d3d3d3','90ee90','ffb6c1','ffa07a','20b2aa','87cefa','778899','778899','b0c4de','ffffe0','00ff00','32cd32','faf0e6','ff00ff','800000','66cdaa','0000cd','ba55d3','9370db','3cb371','7b68ee','00fa9a','48d1cc','c71585','191970','f5fffa','ffe4e1','ffe4b5','ffdead','000080','fdf5e6','808000','6b8e23','ffa500','ff4500','da70d6','eee8aa','98fb98','afeeee','db7093','ffefd5','ffdab9','cd853f','ffc0cb','dda0dd','b0e0e6','800080','663399','ff0000','bc8f8f','4169e1','8b4513','fa8072','f4a460','2e8b57','fff5ee','a0522d','c0c0c0','87ceeb','6a5acd','708090','708090','fffafa','00ff7f','4682b4','d2b48c','008080','d8bfd8','ff6347','40e0d0','ee82ee','f5deb3','ffffff','f5f5f5','ffff00','9acd32']; }
}
function roundDecimals(c) {
  c.red = Number(c.red.toFixed(0));
  c.green = Number(c.green.toFixed(0));
  c.blue = Number(c.blue.toFixed(0));
  c.hue = Number(c.hue.toFixed(0));
  c.sat = Number(c.sat.toFixed(2));
  c.lightness = Number(c.lightness.toFixed(2));
  c.whiteness = Number(c.whiteness.toFixed(2));
  c.blackness = Number(c.blackness.toFixed(2));
  c.cyan = Number(c.cyan.toFixed(2));  
  c.magenta = Number(c.magenta.toFixed(2));
  c.yellow = Number(c.yellow.toFixed(2));
  c.black = Number(c.black.toFixed(2));
  c.ncol = c.ncol.substr(0, 1) + Math.round(Number(c.ncol.substr(1)));
  c.opacity = Number(c.opacity.toFixed(2));
  return c;
}
function hslToRgb(hue, sat, light) {
  var t1, t2, r, g, b;
  hue = hue / 60;
  if ( light <= 0.5 ) {
    t2 = light * (sat + 1);
  } else {
    t2 = light + sat - (light * sat);
  }
  t1 = light * 2 - t2;
  r = hueToRgb(t1, t2, hue + 2) * 255;
  g = hueToRgb(t1, t2, hue) * 255;
  b = hueToRgb(t1, t2, hue - 2) * 255;
  return {r : r, g : g, b : b};
}
function hueToRgb(t1, t2, hue) {
  if (hue < 0) hue += 6;
  if (hue >= 6) hue -= 6;
  if (hue < 1) return (t2 - t1) * hue + t1;
  else if(hue < 3) return t2;
  else if(hue < 4) return (t2 - t1) * (4 - hue) + t1;
  else return t1;
}
function hwbToRgb(hue, white, black) {
  var i, rgb, rgbArr = [], tot;
  rgb = hslToRgb(hue, 1, 0.50);
  rgbArr[0] = rgb.r / 255;
  rgbArr[1] = rgb.g / 255;
  rgbArr[2] = rgb.b / 255;
  tot = white + black;
  if (tot > 1) {
    white = Number((white / tot).toFixed(2));
    black = Number((black / tot).toFixed(2));
  }
  for (i = 0; i < 3; i++) {
    rgbArr[i] *= (1 - (white) - (black));
    rgbArr[i] += (white);
    rgbArr[i] = Number(rgbArr[i] * 255);
  }
  return {r : rgbArr[0], g : rgbArr[1], b : rgbArr[2] };
}
function cmykToRgb(c, m, y, k) {
  var r, g, b;
  r = 255 - ((Math.min(1, c * (1 - k) + k)) * 255);
  g = 255 - ((Math.min(1, m * (1 - k) + k)) * 255);
  b = 255 - ((Math.min(1, y * (1 - k) + k)) * 255);
  return {r : r, g : g, b : b};
}
function ncolToRgb(ncol, white, black) {
  var letter, percent, h, w, b;
  h = ncol;
  if (isNaN(ncol.substr(0,1))) {
    letter = ncol.substr(0,1).toUpperCase();
    percent = ncol.substr(1);
    if (percent == "") {percent = 0;}
    percent = Number(percent);
    if (isNaN(percent)) {return false;}
    if (letter == "R") {h = 0 + (percent * 0.6);}
    if (letter == "Y") {h = 60 + (percent * 0.6);}
    if (letter == "G") {h = 120 + (percent * 0.6);}
    if (letter == "C") {h = 180 + (percent * 0.6);}
    if (letter == "B") {h = 240 + (percent * 0.6);}
    if (letter == "M") {h = 300 + (percent * 0.6);}
    if (letter == "W") {
      h = 0;
      white = 1 - (percent / 100);
      black = (percent / 100);
    }
  }
  return hwbToRgb(h, white, black);
}
function hueToNcol(hue) {
  while (hue >= 360) {
    hue = hue - 360;
  }
  if (hue < 60) {return "R" + (hue / 0.6); }
  if (hue < 120) {return "Y" + ((hue - 60) / 0.6); }
  if (hue < 180) {return "G" + ((hue - 120) / 0.6); }
  if (hue < 240) {return "C" + ((hue - 180) / 0.6); }
  if (hue < 300) {return "B" + ((hue - 240) / 0.6); }
  if (hue < 360) {return "M" + ((hue - 300) / 0.6); }
}
function ncsToRgb(ncs){
  var black, chroma, bc, percent, black1, chroma1, red1, factor1, blue1, red1, red2, green2, blue2, max, factor2, grey, r, g, b; 
  ncs = w3trim(ncs).toUpperCase();
  ncs = ncs.replace("(", "");
  ncs = ncs.replace(")", "");
  ncs = ncs.replace("NCS", "NCS ");
  ncs = ncs.replace(/  /g, " ");  
  if (ncs.indexOf("NCS") == -1) {ncs = "NCS " + ncs;}
  ncs = ncs.match(/^(?:NCS|NCS\sS)\s(\d{2})(\d{2})-(N|[A-Z])(\d{2})?([A-Z])?$/);
  if (ncs === null) return false;
  black = parseInt(ncs[1], 10);
  chroma = parseInt(ncs[2], 10);
  bc = ncs[3];
  if (bc != "N" && bc != "Y" && bc != "R" && bc != "B" && bc != "G") {return false;}
  percent = parseInt(ncs[4], 10) || 0;
  if (bc !== 'N') {
    black1 = (1.05 * black - 5.25);
    chroma1 = chroma;
    if (bc === 'Y' && percent <= 60) {
      red1 = 1;
    } else if (( bc === 'Y' && percent > 60) || ( bc === 'R' && percent <= 80)) {
      if (bc === 'Y') {
        factor1 = percent - 60;
      } else {
        factor1 = percent + 40;
      }
      red1 = ((Math.sqrt(14884 - Math.pow(factor1, 2))) - 22) / 100;
    } else if ((bc === 'R' && percent > 80) || (bc === 'B')) {
      red1 = 0;
    } else if (bc === 'G') {
      factor1 = (percent - 170);
      red1 = ((Math.sqrt(33800 - Math.pow(factor1, 2))) - 70) / 100;
    }
    if (bc === 'Y' && percent <= 80) {
      blue1 = 0;
    } else if (( bc === 'Y' && percent > 80) || ( bc === 'R' && percent <= 60)) {
      if (bc ==='Y') {
        factor1 = (percent - 80) + 20.5;
      } else {
        factor1 = (percent + 20) + 20.5;
      }
      blue1 = (104 - (Math.sqrt(11236 - Math.pow(factor1, 2)))) / 100;
    } else if ((bc === 'R' && percent > 60) || ( bc === 'B' && percent <= 80)) {
      if (bc ==='R') {
        factor1 = (percent - 60) - 60;
      } else {
        factor1 = (percent + 40) - 60;
      }
      blue1 = ((Math.sqrt(10000 - Math.pow(factor1, 2))) - 10) / 100;
    } else if (( bc === 'B' && percent > 80) || ( bc === 'G' && percent <= 40)) {
      if (bc === 'B') {
        factor1 = (percent - 80) - 131;
      } else {
        factor1 = (percent + 20) - 131;
      }
      blue1 = (122 - (Math.sqrt(19881 - Math.pow(factor1, 2)))) / 100;
    } else if (bc === 'G' && percent > 40) {
      blue1 = 0;
    }
    if (bc === 'Y') {
      green1 = (85 - 17/20 * percent) / 100;
    } else if (bc === 'R' && percent <= 60) {
      green1 = 0;
    } else if (bc === 'R' && percent > 60) {
      factor1 = (percent - 60) + 35;
      green1 = (67.5 - (Math.sqrt(5776 - Math.pow(factor1, 2)))) / 100;
    } else if (bc === 'B' && percent <= 60) {
      factor1 = (1*percent - 68.5);
      green1 = (6.5 + (Math.sqrt(7044.5 - Math.pow(factor1, 2)))) / 100;
    } else if ((bc === 'B' && percent > 60) || ( bc === 'G' && percent <= 60)) {
      green1 = 0.9;
    } else if (bc === 'G' && percent > 60) {
      factor1 = (percent - 60);
      green1 = (90 - (1/8 * factor1)) / 100;
    }
    factor1 = (red1 + green1 + blue1)/3;
    red2 = ((factor1 - red1) * (100 - chroma1) / 100) + red1;
    green2 = ((factor1 - green1) * (100 - chroma1) / 100) + green1;
    blue2 = ((factor1 - blue1) * (100 - chroma1) / 100) + blue1;
    if (red2 > green2 && red2 > blue2) {
      max = red2;
    } else if (green2 > red2 && green2 > blue2) {
      max = green2;
    } else if (blue2 > red2 && blue2 > green2) {
      max = blue2;
    } else {
      max = (red2 + green2 + blue2) / 3;
    }
    factor2 = 1 / max;
    r = parseInt((red2 * factor2 * (100 - black1) / 100) * 255, 10);
    g = parseInt((green2 * factor2 * (100 - black1) / 100) * 255, 10);
    b = parseInt((blue2 * factor2 * (100 - black1) / 100) * 255, 10);
    if (r > 255) {r = 255;}
    if (g > 255) {g = 255;}
    if (b > 255) {b = 255;}
    if (r < 0) {r = 0;}
    if (g < 0) {g = 0;}
    if (b < 0) {b = 0;}
  } else {
    grey = parseInt((1 - black / 100) * 255, 10);
    if (grey > 255) {grey = 255;}
    if (grey < 0) {grey = 0;}
    r = grey;
    g = grey;
    b = grey;
  }
  return {
    r : r,
    g : g,
    b : b
  };
}
function rgbToHsl(r, g, b) {
  var min, max, i, l, s, maxcolor, h, rgb = [];
  rgb[0] = r / 255;
  rgb[1] = g / 255;
  rgb[2] = b / 255;
  min = rgb[0];
  max = rgb[0];
  maxcolor = 0;
  for (i = 0; i < rgb.length - 1; i++) {
    if (rgb[i + 1] <= min) {min = rgb[i + 1];}
    if (rgb[i + 1] >= max) {max = rgb[i + 1];maxcolor = i + 1;}
  }
  if (maxcolor == 0) {
    h = (rgb[1] - rgb[2]) / (max - min);
  }
  if (maxcolor == 1) {
    h = 2 + (rgb[2] - rgb[0]) / (max - min);
  }
  if (maxcolor == 2) {
    h = 4 + (rgb[0] - rgb[1]) / (max - min);
  }
  if (isNaN(h)) {h = 0;}
  h = h * 60;
  if (h < 0) {h = h + 360; }
  l = (min + max) / 2;
  if (min == max) {
    s = 0;
  } else {
    if (l < 0.5) {
      s = (max - min) / (max + min);
    } else {
      s = (max - min) / (2 - max - min);
    }
  }
  s = s;
  return {h : h, s : s, l : l};
}
function rgbToHwb(r, g, b) {
  var h, w, bl;
  r = r / 255;
  g = g / 255;
  b = b / 255;
  max = Math.max(r, g, b);
  min = Math.min(r, g, b);
  chroma = max - min;
  if (chroma == 0) {
    h = 0;
  } else if (r == max) {
    h = (((g - b) / chroma) % 6) * 360;
  } else if (g == max) {
    h = ((((b - r) / chroma) + 2) % 6) * 360;
  } else {
    h = ((((r - g) / chroma) + 4) % 6) * 360;
  }
  w = min;
  bl = 1 - max;
  return {h : h, w : w, b : bl};
}
function rgbToCmyk(r, g, b) {
  var c, m, y, k;
  r = r / 255;
  g = g / 255;
  b = b / 255;
  max = Math.max(r, g, b);
  k = 1 - max;
  if (k == 1) {
    c = 0;
    m = 0;
    y = 0;
  } else {
    c = (1 - r - k) / (1 - k);
    m = (1 - g - k) / (1 - k);
    y = (1 - b - k) / (1 - k);
  }
  return {c : c, m : m, y : y, k : k};
}
function toHex(n) {
  var hex = n.toString(16);
  while (hex.length < 2) {hex = "0" + hex; }
  return hex;
}
function cl(x) {
  console.log(x);
}
function w3trim(x) {
  return x.replace(/^\s+|\s+$/g, '');
}
function isHex(x) {
  return ('0123456789ABCDEFabcdef'.indexOf(x) > -1);
}
window.w3color = w3color;

})();

function w3SetColorsByAttribute() {
  var z, i, att;
  z = document.getElementsByTagName("*");
  for (i = 0; i < z.length; i++) {
    att = z[i].getAttribute("data-w3-color");
    if (att) {
      z[i].style.backgroundColor = w3color(att).toRgbString();      
    }
  }
}/* ==jj-role.class================ */
class JJRole {
  constructor(options) {
    this.options = Object.assign(this._defaultOption(), options);
    this._render();
    this._setEvent();
    this.init();
  }


  _defaultOption() {
    return {
      "jbatisId": workspaceMeta.options.appInfo.jbatisId,
      version: '610'
    };
  }  

  _render(){}

  _setEvent(){}

  init(){}

  findTextList(text){
    let params = {
      "JBATIS_ID": this.options.jbatisId
    };

    if (text) params.ROLE_NAME= '%'+text+'%';

    return Jinja.ajax.excute('searchRole.sql', params)
      .then(result =>result.rows)
      .catch(ex=>{});
  }

  readKeyId(keyId){
    let params = {
      "ROLE_ID": keyId,
      "JBATIS_ID": this.options.jbatisId
    };

    return Jinja.ajax.excute('readRole.sql', params)
      .then(result=>result.rows[0])
      .catch(ex=>{});
  }  

  deleteKeyId(keyId){
    let params = {
      "ROLE_ID": keyId,
      "JBATIS_ID": this.options.jbatisId
    };

    return Jinja.confirm.delete('삭제하시겠습니까?')
      .then(() =>Jinja.ajax.excute('deleteRole.sql', params))
      .then(result=>this.findTextList())  
      .catch(ex=>{});
  }  

  updateKeyId(fields){
    fields.JBATIS_ID = this.options.jbatisId;

    return Jinja.ajax.excute('updateRole.sql', fields )
      .then(result => this.findTextList())
      .catch(ex=>{});
  }

  createKeyId(fields){
    fields.JBATIS_ID = this.options.jbatisId;
    return Jinja.ajax.excute('createRole.sql', fields )
      .then(result => this.findTextList())
      .catch(ex=>{});
  }


}/* ==JJMultitenancyApi.710.class================ */

/**
 * STUDIO 공통 클래스 위한 클래스
 * 공통모듈을 테넌트별로 적용하기 위한 공통모듈
 */
class JJMultitenancyApi extends JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "jbatisId": workspaceMeta.options.appInfo.jbatisId,
      "version": "710"
    };
  }
  
  _setEvent() {}
  
  /**
   * 공통코드 적용을 위한 함수
   */
  getComcode(groupId){
    return Jinja.ajax.excute(`searchCode.sql`, {
      "JBATIS_ID": this.options.jbatisId,
      "GROUP_ID": groupId
    })
    .then(result =>result.rows);
  }
  
  setComcode(sendData){
    // 회사별로 전송규칙을 일원화 시킴
		sendData.forEach(item=>{
			item.table = "jj_code";
			item.keyField = "CODE_ID";
      if(item.crud == "C"){
        item.field.WORKSPACE_ID = this.options.jbatisId;
      }
    })    
    return Jinja.ajax.post(`/v7/jbatis/studio/rest/multirows`, {
      "rows": sendData
    })    
  }
}

Jinja.addModule('tenancyApi', JJMultitenancyApi);

Jinja.tenancyApi.role = new JJRole();
/* ==SPA.710.pkg.deploy================ */
/* ==JJRoute.640.class================ */

/**
 * @classdesc Route 모듈관리를 위한 클래스<br><br>
 * 앱에서 페이지간 이동방법은 [a] 테그를 클릭, 히스토리, 백버튼 프로그램이 있다.<br><br>
 * 이 이동상황을 감지하고 원래의 동작을 정지시킨 후 변경된 이동상황을 
 * 검사하여 원하는 ajax로 구현할 수 있다.<br>
 * Route모듈은 변경에 대한 상황을 감지하고 ajax로 이동해야할 URI를 구하고
 * URI로 이동할수 있는 jjRouteDoUri, jjRouteDoHome 이벤트를 발생시킨다.
 */
class JJRoute extends JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 옵션
   * @example -
   */
  _defaultOption() {
    return {
      routeType: 'pjax' // mix, hash, pjax
    };
  }

  /**
   * @desc 파일경로를 ajax용 파일URI로 변환하여 반환한다.
   * @param {String} - 파일경로
   * @param {String} - 제목
   * @return {Promiss} - 변환결과
   * @example -
   */
  _filePath2URI(path, title) {
    
    if(!path) return;
    
    path = decodeURIComponent(path);
    
    let filePath = path.replace(location.origin,"");    
    filePath = filePath.split("?")[0];
    return new Promise((resolv, reject)=>{
      if(["/",""].includes(filePath)){
        resolv("home");
        //Jinja.theme.openHome();  
        this.goHome();
      } else {
        let cachFile = Jinja.ajax.pathCache[filePath];
        if(cachFile){
          history.pushState({path}, null, path);
          Jinja.theme.openFileInfo(cachFile,title,path);  
          resolv(cachFile)
        }
        else {
          /*
           * 진행중인 페이지 호출이 있으면 정지한다
           */
					if(this.lastPath) return;
          
          Jinja.driverApi.getFilePath(filePath).then(fileInfo=>{
            /**
             * 진행중인 페이지 호출을 초기화한다.
             */
            this.lastPath = null;
            /**
          * 파일을 실행하는 모듈
          */
            title = title || fileInfo["NAME"];
            history.pushState({path}, null, path);
            Jinja.theme.openFileInfo(fileInfo,title,path);  

            resolv(fileInfo)
          })
            .catch(result=>{
            //alert(`_filePath 2 URI\n ${path}의 파일이 없습니다.`);
            console.log(result);
            //reject(result)
          });
        }
      }
    });

  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    if (['mix', 'hash'].includes(this.options.routeType)) {
      Jinja.event.add('hashchange', 'hashchange.route.setEvent', e => {
        console.log('hashchange');

        e.preventDefault();
      });
    }

    if (['mix', 'pjax'].includes(this.options.routeType)) {
      Jinja.event.add('popstate', 'popstate.route.setEvent', e => {
        let path = location.origin;

        if (e.state) {
          path = e.state.path || e.state.filePath;
        }

        if (path) {
          e.preventDefault();

          console.log(`popstate : ${path}`);

          this._filePath2URI(path).then(fileInfo => {});
        }
      });
    }

    Jinja.event.add('click', 'route.setEvent', e => {
      let el = e.target.closest('a');
      if (!el) return;
      let elHref = el.getAttribute("href");      

      if (elHref && elHref.startsWith("http")) return;
      if (el.matches('[download],[target="_blank"]')) return;


      if (e.target.matches('.fa-remove') || 
          elHref == "#" || 
          e.target.matches('jj-vhtml-editor *')) {
        e.preventDefault();

        return;
      }




      if(elHref && elHref != '#' && elHref.startsWith('#')) {
        let form = el.closest('jj-form');

        if(form) {
          let target = form.querySelector(elHref);

          if(target) {
            target.scrollIntoView();

            e.preventDefault();

            return;
          }
        }
      }

      let path = el.href;
      let title = el.title;

      if (
        path.endsWith('#') ||
        path.endsWith('void(0)') ||
        path.includes('javascript') ||
        e.target.matches(`[data-toggle], [data-toggle] *`)
      ) {
        e.preventDefault();

        return;
      }

      if (path === location.href) {
        e.preventDefault();

        return;
      }

      if (path && path.startsWith(location.origin)) {
        e.preventDefault();

        let form = e.target.closest('jj-form');
        let jid = path.split('#')[1];
				
        // 만일 #테그에 의한 스크롤 이동이라면 스크롤만진행한다
        if (form && jid && ['mix', 'pjax'].includes(this.options.routeType)) {
          let node = form.querySelector("[jj-id='" + jid + "']");

          node.scrollIntoView({
            behavior: 'smooth',
            block: 'nearest',
            inline: 'start'
          });
        } else {
          this._filePath2URI(path, title).then(fileInfo => {
            //history.pushState({path}, null, path);
          });
        }
      }
    });
  }

  /**
   * @desc 지정한 파일경로로 URL을 변경한다.
   * @param {String} - 파일경로
   * @example -
   */
  href(path) {
    this._filePath2URI(path).then(fileInfo => {
      //history.pushState({path}, null, path);
    });
  }

  /**
   * @desc 워크스페이스 상황에 맞는 최상위로 이동
   * @param 
   * @example -
   */
  goHome(){
    let pathName = decodeURI(document.location.pathname)
    let path, pathArr = pathName.split("/");
    let filePath = "";
    if (pathArr[1] == "apps"){
      path = document.location.origin+"/apps/"+pathArr[2];
      filePath = pathArr.slice(1).join("/");
    } else {
      path = document.location.origin;
      filePath = pathArr.slice(1).join("/");
    }
    if(filePath){
    	history.pushState({ path }, null, path);
    }
  }

  /**
   * 시작주소줄로 시작하는 경우
   */
  goPathName(){
    let pathName = decodeURI(document.location.pathname)
    let pathArr = pathName.split("/");

    let filePath = "";
    if (pathArr[1] == "apps"){
      filePath = pathArr.slice(3).join("/");
    } else {
      filePath = pathArr.slice(1).join("/");
    }
    if(filePath && filePath != "dashboard"){
      //Jinja.route.href(document.location.pathname);
      
      Jinja.route.href(location.href);
    }
    
    return filePath;
  }  
  
  /**
   * @desc 모듈명을 반환한다.
   * @example -
   */
  who() {
    alert('JJRoute');
  }
}

Jinja.addModule('route', JJRoute);
/* ==JJLauncher.640.class================ */

/**
 * @classdesc Launcher용 폼객체관리를 위한 클래스
 */
class JJLauncher extends JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 옵션
   * @example -
   */
  _defaultOption() {
    return {
      version: '640'
    };
  }

  /**
   * @desc 런쳐의 값을 초기화한다.
   * @example -
   */
  _render() {
    this.launchers = {};
  }

  /**
   * @desc 런쳐를 초기화한다.
   * @example -
   */
  init() {
    if (workspaceMeta.options.launchers) {
      workspaceMeta.cacheResources.forEach(item => {
        if (workspaceMeta.options.launchers.includes(item.URI)) {
          let info;
          if(typeof(item.BODY)=="object"){
            info = item.BODY;
          } else {
            info = JSON.parse(item.BODY);
          }
          this.launchers[info.name] = info;
        }
      });
    }
  }

  /**
   * @desc 지정한 런처의 스튜디오명을 반환한다.
   * @param {String} - 런처명
   * @return {String} - 스튜디오명
   * @example -
   */
  getStudioUri(launcherName) {
    return this.launchers[launcherName] ? this.launchers[launcherName].studio : '';
  }

  /**
   * @desc 지정한 런처의 런타임명을 반환한다.
   * @param {String} - 런처명
   * @return {String} - 런타임명
   * @example -
   */
  getRuntimeUri(launcherName) {
    return this.launchers[launcherName] ? this.launchers[launcherName].runtime : '';
  }

  /**
   * @desc 지정한 런처의 아이콘명을 반환한다.
   * @param {String} - 런처명
   * @return {String} - 아이콘명
   * @example -
   */
  getLauncherIcon(launcherName) {
    return this.launchers[launcherName] ? this.launchers[launcherName].icon : '';
  }
  
  /**
   * @desc 모듈명을 반환한다.
   * @example -
   */
  who() {
    alert('JJLauncher');
  }
}

Jinja.addModule('launcher', JJLauncher);
/* ==JJForm.640.class================ */

/**
 * @classdesc 폼관리를 위한 클래스
 */
class JJForm extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 옵션
   * @example -
   */
  _defaultOption() {
    return {
      uri: '',
      formClass: '',
      useResizeObserver: true,
      resizeIntervalDuration: 100,
      animation: '',
      isEnterClose: false,
      isCloseDestroy: false,
      position: {},
      showFoot: true,
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.classList.add('jj-form');
    this.setAttribute('tabindex', -1);
    this.focus();

    this.innerHTML =`
<header class="header">
<h4 class="form-title">&nbsp</h4>
<button jj-command="remove" type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
</header>
<article class=""></article>
<footer class="">
<label class="footer-title"></label>
</footer>
`;


    //     this.innerHTML =
    //       `<header class="header">` +
    //       `<div class="page-title-right">` +
    //       `<button type="button" class="btn btn-secondary" jj-command="destroy">X</button>` +
    //       `</div>` +
    //       `<h4 class="page-title">&nbsp</h4>` +
    //       `</header>` +
    //       `<article></article>` +
    //       `<footer></footer>`;

    this.formTitleEl = this.querySelector('.form-title');
    this.formBodyEl = this.querySelector('article');
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._oResizeObserver = new ResizeObserver(entries => {
      if (this._resizeTimeout) {
        clearTimeout(this._resizeTimeout);

        this._resizeTimeout = null;
      }

      this._resizeTimeout = setTimeout(e => {
        this.doResize();

        clearTimeout(this._resizeTimeout);

        this._resizeTimeout = null;
      }, this.options.resizeIntervalDuration);
    });

    this._oResizeObserver.observe(this);
  }

  /**
   * @desc 폼을 삭제한다.
   * @example -
   */
  _destroy() {
    super._destroy();

    if (this._oResizeObserver) this._oResizeObserver.disconnect();
    if (this._oMover) this._oMover.destroy();
    if (this._oResizer) this._oResizer.destroy();
    if (this._resizeTimeout) clearTimeout(this._resizeTimeout);

    this._resizeTimeout = null;
    this._oResizeObserver = null;
    this.formClose();
  }

  /**
   * @static
   * @memberof JJForm
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ['jj-uri', 'moveable', 'resizable'];
  }

  /**
   * @desc 옵션을 설정한다.
   * @param {Object} - 옵션
   * @example -
   */
  setOptions(options) {
    Object.assign(this.options, options);

    if (this.options.formClass) this.classList.add(this.options.formClass);
  }

  /**
   * @desc 제목을 설정한다.
   * @param {String} - 제목
   * @example -
   */
  setTitle(title) {
    this.formTitleEl.innerText = title;
  }

  active(){}
  /**
   * @desc 모달에서 사용할 바닥글을 넣는다
   * @param {String} - 제목
   * @example -
   */
  setFootHtml(html) {
    let el = this.querySelector(`footer .footer-title`);
    if (el) el.innerHTML = html;
  }

  /**
   * @desc 폼을 삭제한다.
   * @example -
   */
  destroy() {
    this.dispatchEvent(
      new CustomEvent('formDestroy', {
        detail: {
          form: this
        },
        bubbles: true
      })
    );

    this.$empty();
    this.remove();
  }

  /**
   * @desc 폼시작시 실행한다.
   * @param {Object} - 파라미터
   * @example -
   */
  formLoad(params) {}

  /**
   * @desc 폼종료시 실행한다.
   * @example -
   */
  formClose() {}

  /**
   * @desc 폼 크기 변경시 실행한다.
   * @example -
   */
  doResize() {}

  promiseDo(method, ...para){
    this.requirePromise
      .then(()=>this[method](...para)); 
  }
  /**
   * @desc 지정한 파일정보에 대한 폼을 생성한다.
   * @param {Object} - 파일정보
   * @param {Object} - 파라미터
   * @param {String} - 제목
   * @return {Promiss} - 생성결과
   * @example -
   */
  openFileInfo(fileInfo, params, title) {
    this.fileInfo = fileInfo;
    this.options.uri = fileInfo.URI;
    this.setTitle(title || fileInfo.NAME);

    const launcherUri = Jinja.launcher.getRuntimeUri(fileInfo.TYPE);

    return (
      Jinja.driverApi
      .getUri(launcherUri)
      .then(launcherInfo => {
        if (
          launcherInfo.BODY.less &&
          !Jinja.querySelector(`style[launcher="${launcherUri}"]`)
        ) {
          let styleEl = document.createElement('style');
          styleEl.type = 'text/css';
          styleEl.setAttribute('rel', 'stylesheet');
          styleEl.setAttribute('launcher', launcherUri);
          Jinja.appendChild(styleEl);

          let lessCss = `[launcher="${launcherUri}"]{ ${Jinja.lessRuleset || ''} ${launcherInfo.BODY.less || ''} }`;

          less
            .render(lessCss)
            .then(output =>
                  styleEl.appendChild(document.createTextNode(output.css))
                 )
            .catch(error => console.error(error));
        }

        this.setAttribute('launcher', launcherUri);
        this.formBodyEl.innerHTML = launcherInfo.BODY.html;
        this._setElementId();

        if (launcherInfo.BODY.script) {
          try {
            new Function('form', launcherInfo.BODY.script)(this);
          } catch (ex) {
            console.error(ex);
            switch(ex.name){
              case "TypeError":
              case "ReferenceError":
                let regex = new RegExp(/<anonymous>:(\d+):(\d+)/);
                let match = ex.stack.match(regex);

                let result ={
                  "message": ex.message,
                  "line": parseInt(match[1])-2,
                  "col": parseInt(match[2]),
                  "inner": ex,
                  "fileInfo":fileInfo
                };

                this.dispatchEvent(new CustomEvent("formError", {
                  "detail":result,
                  "bubbles": true
                }));

                let sourceLine = fileInfo.script.split('\n')[result.line-1];
                if (sourceLine){
                  sourceLine = sourceLine.trim();
                  alert(`
                    <h4>Source: ${sourceLine}</h4>
                    <p>
                    <strong>Message: ${result.message}</strong><br>
                    ErrorType: ${ex.name}<br>
                    Source Line: ${result.line}<br>
                    <b>Stack</b>:<br>
                      ${ex.stack.split('\n').join('<br>')}
                    </p>
                  `);
                } else {
                  alert(`
                    <h4>Source: ${sourceLine}</h4>
                    <p>
                    <strong>Message: ${result.message}</strong><br>
                    ErrorType: ${ex.name}<br>
                    Source Line: ${result.line}<br>
                    <b>Stack</b>:<br>
                      ${ex.stack.split('\n').join('<br>')}
                    </p>
                  `);
                }
                break;

              case "SyntaxError":
                  alert(`
                    <h4>스크립트 문장 오류</h4>
                    <p>
                    <strong>Message: ${ex.message}</strong><br>
                    ErrorType: ${ex.name}<br>
                    </p>
                  `);
                break;

              default:
                  alert(`
                    <h4>정의되지않은 오류</h4>
                    <p>
                    <strong>Message: ${ex.message}</strong><br>
                    ErrorType: ${ex.name}<br>
                    </p>
                  `);
                break;
            }
          }
        }
      })
      .then(() => this.setSource(fileInfo.BODY))
      .then(()=>{
        this.requireResolv(fileInfo);
        this.formLoad(params);
        // 시작시 임의 입력요소로 포커스를 이동한다.
        this.dispatchEvent(new CustomEvent("formLoad", {
          "detail":{
            "form": this
          },
          "bubbles": true
        }));

      })  
    );
  }

  /**
   * @desc 지정한 파일URI에 대한 폼을 생성한다.
   * @param {String} - 파일URI
   * @param {Object} - 파라미터
   * @param {String} - 제목
   * @throw {JJBizException} - 파일정보 조회 오류
   * @example -
   */
  openUri(uri, params, title) {
    Jinja.driverApi
      .getUri(uri)
      .then(fileInfo => this.openFileInfo(fileInfo, params, title))
      .catch(ex => {
      throw new JJBizException(null, `${uri} 실행오류\n${ex}`);
    });
  }

  /** 폼이 로드되면 자동으로 포커스를 설정한다 */
  __focus__(){
    let el = this.querySelector('[autofocus]');
    if(el) el.focus();
  }
  
  /**
   * @desc 지정한 파일URI 폼의 존재여부를 반환한다.
   * @param {String} - 파일URI
   * @return {Boolean} - 존재여부
   * @example -
   */
  isUri(uri) {
    if (this.fileInfo.URI === uri) {
      this.focus();

      return true;
    } else {
      return false;
    }
  }

  /**
   * @desc 지정한 파일 body정보의 엘리먼트를 폼에 바인딩한다.
   * @param {Object} - 파일 body정보
   * @example -
   */
  bindHtml(body) {
    this.formBodyEl.innerHTML = body.html;
    this._setElementId();
  }

  /**
   * @desc 지정한 파일 body정보의 자바스크립트를 폼에 바인딩한다.
   * @param {Object} - 파일 body정보
   * @example -
   */
  bindScript(body) {
    try {
      let doScript = body.script;

      if (workspaceMeta.options.appInfo.formDebuggerEmpty) {
        doScript = doScript.replaceAll('debug' + 'ger;', '  ');
      }

      new Function('form', doScript)(this);
    } catch (ex) {
        
        let result ={
          "message": ex.message,
          "inner": ex
        };
        
        switch(ex.name){
          case "TypeError":
          case "ReferenceError":
            let regex = new RegExp(/<anonymous>:(\d+):(\d+)/);
            let match = ex.stack.match(regex);
            
          	result.line= parseInt(match[1])-2;
          	result.col= parseInt(match[2]);

            let sourceLine = body.script.split('\n')[result.line-1];
            if (sourceLine){
              sourceLine = sourceLine.trim();
              alert(`
                <h4>Source: ${sourceLine}</h4>
                <p>
                <strong>Message: ${result.message}</strong><br>
                ErrorType: ${ex.name}<br>
                Source Line: ${result.line}<br>
                </p>`);
            } else {
              alert(`
                <h4>Source: ${sourceLine}</h4>
                <p>
                <strong>Message: ${result.message}</strong><br>
                ErrorType: ${ex.name}<br>
                Source Line: ${result.line}<br>
								<b>Stack</b>:<br>
									${ex.stack.split('\n').join('<br>')}
                </p>`);
            }
            break;
            
          case "SyntaxError":
              alert(`
								<h4>스크립트 문장 오류</h4>
                <p>
                <strong>Message: ${ex.message}</strong><br>
                ErrorType: ${ex.name}<br>
                </p>`);
            break;

          default:
              alert(`
								<h4>정의되지않은 오류</h4>
                <p>
                <strong>Message: ${ex.message}</strong><br>
                ErrorType: ${ex.name}<br>
                </p>`);
            break;
        }

        this.dispatchEvent(new CustomEvent("formError", {
          "detail":result,
          "bubbles": true
        }));
    
    }
  }

  /**
   * @desc 지정한 파일 body정보의 스타일를 폼에 바인딩한다.
   * @param {Object} - 파일 body정보
   * @example -
   */
  bindCss(body) {
    this.setAttribute('fileid', this.fileInfo.ID);

    let styleEl = document.createElement('style');

    styleEl.type = 'text/css';
    styleEl.setAttribute('rel', 'stylesheet');

    this.appendChild(styleEl);

    let lessCss = `[fileid="${this.fileInfo.ID}"]{ ${Jinja.lessRuleset || ''} ${body.less || ''} }`;

    less
      .render(lessCss)
      .then(output => styleEl.appendChild(document.createTextNode(output.css)))
      .catch(error => console.error(error));
  }

  /**
   * @desc 모달버턴활성동작을 위한 데이터 폼을 연결시킴
   * @param {dataform} - jj-data-form 객체
   * @example - 모달박스 시험환경을 위해서 유지함
   */
  setDataForm(dataform){}

}

customElements.define('jj-form', JJForm);
/* ==JJFormFull.640.class================ */

/**
 * @classdesc Full사이즈용 폼객체관리를 위한 클래스
 */
class JJFormFull extends JJForm {
  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {}

  /**
   * @static
   * @desc 지정한 파일URI 정보를 전체화면 폼으로 생성한다.
   * @param {String} - 파일URI
   * @param {Object} - 파라미터
   * @return {Element} - 폼 엘리먼트
   * @example -
   */
  static open(uri, params) {
    let formEl = document.createElement('jj-form-full');

    formEl.classList.add('full');

    Jinja.appendChild(formEl);

    formEl.openUri(uri, params);

    return formEl;
  }

  /**
   * @static
   * @desc 지정한 파일URI 정보를 전체화면 폼으로 생성한다.
   * @param {String} - 파일URI
   * @param {Object} - 파라미터
   * @example -
   */
  static openAuth(uri, params) {
    if (Jinja.uo.USER_ID == 'GUEST') {
      JJFormModal.open(
        'auth.640.login.uc',
        {},
        {
          formClass: 'hidden-footer'
        }
      );

      Jinja.event.add('jjAppStart', 'formfull.openAuth', e => {
        this.open(uri, params);
      });
    } else {
      this.open(uri, params);
    }
  }

  /**
   * @desc 지정한 데이터를 반환하고 폼을 삭제한다.
   * @param {Object} - 데이터
   * @example -
   */
  modalClose(data) {
    this.dispatchEvent(
      new CustomEvent('formReturn', {
        detail: data
      })
    );

    this.remove();
  }

  /**
   * @desc 지정한 데이터를 반환하고 모달창을 닫는다.
   * @param {Object} - 데이터
   * @return {Object} - 데이터
   * @example -
   */
  return(data) {
    return this.modalClose(data);
  }
}

customElements.define('jj-form-full', JJFormFull);
/* ==JJFormInclude.640.class================ */

/**
 * @classdesc Include용 폼객체관리를 위한 클래스
 */
class JJFormInclude extends JJForm {
  
  init() {
    super.init();
    let uri = this.getAttribute("uri");
    if(uri){
    	this.openUri(uri);
    }
  }

  /**
   * @desc 폼으로 삭제한다.
   * @example -
   */
  destroy() {
    super.destroy();
    this.$empty();
    this.remove();
  }

  /**
   * @static
   * @desc 지정한 파일URI 정보를 Include 폼으로 생성한다.
   * @param {String} - 파일URI
   * @param {Object} - 파라미터
   * @return {Element} - 폼 엘리먼트
   * @example -
   */
  static open(uri, params) {
    let formEl = document.createElement('jj-form-include');

    Jinja.appendChild(formEl);

    formEl.openUri(uri, params);

    return formEl;
  }

}

customElements.define('jj-form-include', JJFormInclude);
/* ==JJFormLayer.640.class================ */

/**
 * @global
 * @member {let} - 최종 레이어폼 순번
 */
let __lastLayerFormIndex__ = 101;

/**
 * @classdesc Layer용 폼객체관리를 위한 클래스
 */
class JJFormLayer extends JJForm {
  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('focusin', e => {
      if (parseInt(this.style.zIndex || 1) < __lastLayerFormIndex__) {
        __lastLayerFormIndex__++;

        this.style.zIndex = __lastLayerFormIndex__;
      }
    },
    {
      capture: true
    });

    this._oResizer = new JJRresizable(this, {
      handles: 'n,e,s,w,ne,se,sw,nw'
    });

    this._oMover = new JJMoveable(this, {
      handles: ['e', 'n', 's'],
      handleEl: '.header, .header *',
      cancelEl: '.left *, .right *, .jj-modal-ok, .jj-modal-cancel '
    });

    this._oResizeObserver = new ResizeObserver(entries => {
      if (this._resizeTimeout) {
        clearTimeout(this._resizeTimeout);

        this._resizeTimeout = null;
      }

      this._resizeTimeout = setTimeout(e => {
        this.doResize();

        clearTimeout(this._resizeTimeout);

        this._resizeTimeout = null;
      }, this.options.resizeIntervalDuration);
    });

    this._oResizeObserver.observe(this);
  }

  /**
   * @static
   * @desc 지정한 파일URI 정보를 Include 폼으로 생성한다.
   * @param {String} - 파일URI
   * @param {Object} - 파라미터
   * @return {Element} - 폼 엘리먼트
   * @example -
   */
  static open(uri, params) {
    let formEl = document.createElement('jj-form-layer');

    Jinja.appendChild(formEl);

    formEl.openUri(uri, params);

    return formEl;
  }
}

customElements.define('jj-form-layer', JJFormLayer);
/* ==JJFormModal.640.class================ */

/**
 * @classdesc Modal용 폼객체관리를 위한 클래스
 */
class JJFormModal extends JJForm {

  _defaultOption() {
    return {
      uri: '',
      formClass: '',
      useResizeObserver: true,
      resizeIntervalDuration: 100,
      animation: '',
      isEnterClose: true,
      isCloseDestroy: false,
      isCloseOnly: false,
      position: {},
      showFoot: true,
      version: '640'
    };
  }  
  
  /**
   * @desc 모달 폼을 생성한다.
   * @example -
   */
  _render() {
    this.classList.add('jj-form');
    this.classList.add('modal-content');

    this.innerHTML =`
<header class="header modal-header">
<h4 class="modal-title">&nbsp</h4>
<button jj-command="remove" type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
</header>
<article class="modal-body"></article>
<footer class="modal-footer">
<label class="footer-title"></label>
<div class="" role="group" aria-label="footer button">
<button type="button" class="btn btn-light" jj-command="remove">Close</button>
<button type="button" class="btn btn-primary" jj-command="modalOk">OK</button>
</div>
</footer>
`;

    this.formTitleEl = this.querySelector('.modal-title');
    this.formBodyEl = this.querySelector('article');
    this.formFootEl = this.querySelector('footer');
    this.btnModalOk = this.querySelector('footer [jj-command="modalOk"]');
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('keydown', e => {
      let keyMap = Jinja.global.getEventKeyMap(e);

      switch (keyMap) {
        case 'Enter':
          if(this.options.isEnterClose){
          	if(this.btnModalOk.disabled) return;
	          if(this.checkValidForm && !this.checkValidForm.checkValidity()) return;
          
          	this.modalOk(e);
          }

          break;
        case 'Esc':
          this.remove();

          break;
      }
    });

    this._oResizer = new JJRresizable(this, {
      handles: 'n,e,s,w,ne,se,sw,nw'
    });

    this._oMover = new JJMoveable(this, {
      handles: ['e', 'n', 's'],
      handleEl: '.header, .header *',
      cancelEl: '.left *, .right *, .jj-modal-ok, .jj-modal-cancel '
    });

    this._oResizeObserver = new ResizeObserver(entries => {
      if (this._resizeTimeout) {
        clearTimeout(this._resizeTimeout);

        this._resizeTimeout = null;
      }

      this._resizeTimeout = setTimeout(e => {
        this.doResize();

        clearTimeout(this._resizeTimeout);

        this._resizeTimeout = null;
      }, this.options.resizeIntervalDuration);
    });

    this._oResizeObserver.observe(this);
  }

  /**
   * @desc 폼을 삭제한다.
   * @example -
   */
  _destroy() {
    super._destroy();

    this.wrapEl.remove();
  }

  /**
   * @desc 옵션을 설정한다.
   * @param {Object} - 옵션
   * @example -
   */
  setOptions(options) {
    super.setOptions(options);
    
    if(this.options.isCloseOnly){
      this.btnModalOk.remove();
    }
    
  }

  /**
   * @desc 지정한 파일정보에 대한 모달 폼을 생성한다.
   * @param {Object} - 파일정보
   * @param {Ojbect} - 파라미터
   * @param {String} - 제목
   * @return {Promise} - 생성결과
   * @example -
   */
  openFileInfo(fileInfo, params, title) {
    return super.openFileInfo(fileInfo, params, title).then(result => {
      const compStyle = window.getComputedStyle(this);

      if (compStyle.width) {
        this.style.width = this.offsetWidth;
      } else {
        this.style.width = this.parentElement.offsetWidth * 0.8 + 'px';
      }

      this.style.left = (this.parentElement.offsetWidth - this.offsetWidth) / 2 + 'px';

      if (compStyle.height) {
        this.style.height = this.offsetHeight;
      } else {
        this.style.height = this.parentElement.offsetHeight * 0.6 + 'px';
      }

      this.style.top = this.parentElement.offsetHeight * 0.1 + 'px';
      this.style.visibility = 'visible';
			this.__focus__();
      return result;
    });
  }

  /**
   * @desc 지정한 파일URI 정보를 모달 폼으로 생성한다.
   * @param {String} - 파일URI
   * @param {Object} - 파라미터
   * @param {Obejct} - 옵션
   * @return {Promise} - 생성결과
   * @example -
   */
  static open(uri, params, options) {
    return new Promise((resolve, reject) => {
      Jinja.driverApi.getUri(uri).then(fileInfo => {
        let modalWrapEl = document.createElement('div');

        modalWrapEl.classList.add('modal-wrap');

        Jinja.appendChild(modalWrapEl);

        let formEl = document.createElement('jj-form-modal');

        formEl.wrapEl = modalWrapEl;

        modalWrapEl.appendChild(formEl);

        if (options) {
          formEl.setOptions(options);
          formEl.openFileInfo(fileInfo, params, options.title);
        } else {
          formEl.openFileInfo(fileInfo, params);
        }

        formEl.addEventListener('formReturn', e => {
          resolve(e.detail);

          formEl.remove();
        });

      })
        .catch(ex => {
        throw new JJBizException(null, `${uri}: 파일정보가 없습니다\n${ex}`);
      });
    });
  }

  static openInfo(uri, params, options) {
    options = options || {};
    options.formClass = "modal-info";
    return JJFormModal.open(uri, params, options);
  }
  static openClose(uri, params, options) {
    options = options || {};
    options.formClass = "modal-close";
    return JJFormModal.open(uri, params, options);
  }

  /**
   * @desc 지정한 데이터를 반환하는 이벤트를 생성한다.
   * @param {Object} - 데이터
   * @example -
   */
  return(data) {
    this.dispatchEvent(
      new CustomEvent('formReturn', {
        detail: data
      })
    );
  }

  /**
   * @desc 모달버턴활성동작을 위한 데이터 폼을 연결시킴
   * @param {dataform} - jj-data-form 객체
   * @example -
   */
  setDataForm(dataform){
    if(dataform && dataform.checkValidity){
      this.checkValidForm = dataform;
      // 버턴을 비활성시킴    
      this.btnModalOk.disabled=true;
      // 입력이 발생할때마다 버턴을 활성을 점검함
      this.addEventListener("input", e=>{
        this.btnModalOk.disabled=!this.checkValidForm.checkValidity();
      })    
    }
  }


  /**
   * @desc true 반환하는 이벤트를 생성한다.
   * @example -
   */
  modalOk() {
    this.return(true);
  }
}

customElements.define('jj-form-modal', JJFormModal);
/* ==JJTheme.640.class================ */

/**
 * @classdesc 테마관리를 위한 클래스
 */
class JJTheme extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 옵션
   * @example -
   */
  _defaultOption() {
    return {
      themeMdiUri:
      workspaceMeta.options.themeMdiUri ||
      (workspaceMeta.options.appInfo ? workspaceMeta.options.appInfo.themeMdiUri : null),
      startUri:
      workspaceMeta.options.startUri ||
      (workspaceMeta.options.appInfo ? workspaceMeta.options.appInfo.startUri : null),
      homeIsEmpty: false,
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    return Jinja.driverApi
      .getUri(this.options.themeMdiUri)
      .then(fileInfo => {
      let body = fileInfo.BODY;

      this.setAttribute('tabindex', -1);
      this.setAttribute('jj-uuid', body.uuid);

      this.innerHTML = body.html;

      this._setElementId();

      let styleEl = document.createElement('style');

      styleEl.type = 'text/css';
      styleEl.setAttribute('rel', 'stylesheet');

      this.appendChild(styleEl);

      less.render(` ${Jinja.lessRuleset || ''} ${body.less || ''} `)
        .then(output =>
              styleEl.appendChild(document.createTextNode(output.css))
             )
        .catch(error => console.error(error));

      new Function('form', body.script)(this);

      this.mdiContainer = this.querySelector('.mdi-container') || this.mdiContainer;
      this.mdiTabs = this.querySelector('.mdi-tabs ul') || this.mdiTabs;

      if (this.mdiTabs) this.mdiTabs.$empty();

      this.formLoad();

      // 브라우즈 경로줄에 표시된 페이지가 없고 
      // 시작페이시 설정이 있으면 시작페이지 실행
      if(!Jinja.route.goPathName() && this.options.startUri){
        this.openUri(this.options.startUri);
      }

      return fileInfo;
    })
      .catch(ex => {
      throw new JJBizException(null, `${this.options.themeMdiUri} 테마폼 실행오류\n${ex}`);
    });
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('click', e => {
      if (this.mdiTabs && e.target.matches('.mdi-tabs .nav-link .fa-remove')) {
        e.preventDefault();
        e.stopPropagation();

        this._removeUriForm(e.target.parentElement.dataset.uri);

        e.target.parentElement.parentElement.remove();

        let fistTab = this.mdiTabs.querySelector('.nav-link');

        if (fistTab) {
          fistTab.click();
        } 
        else {
          let path;
          let appsPath = document.location.pathname.split('/');
          if (appsPath[1] == 'apps') {
            path = document.location.origin + '/apps/' + document.location.pathname.split('/')[2];
          } else {
            path = document.location.origin
          }
          history.pushState({ path }, null, path);
        }
      }

      if (this.mdiTabs && e.target.matches('.mdi-tabs .close-all-tab')){
        e.preventDefault();  
        e.stopPropagation();
        this._removeAllForm();
      }      

    });
  }

  /**
   * @desc 전체탭을 닫습니다
   * @example -
   */
  _removeAllForm(){
    Jinja.confirm.yesNo("전체 탭을 닫으시겠습니까?")
      .then(e=>{
      if(e=="NO")return;

      if(this.mdiTabs) this.mdiTabs.$empty();
      this.mdiContainer.querySelectorAll(`jj-form`).forEach(form=>{
        form.destroy();
      })
      let path;
      let appsPath = document.location.pathname.split('/');
      if (appsPath[1] == 'apps') {
        path = document.location.origin + '/apps/' + document.location.pathname.split('/')[2];
      } else {
        path = document.location.origin
      }
      history.pushState({ path }, null, path);    

    })
      .catch(e=>{})
  }

  /**
   * @desc 지정한 파일URI 폼을 삭제한다.
   * @param {String} - 파일URI
   * @example -
   */
  _removeUriForm(uri) {
    if (!uri) return;

    this.mdiContainer.querySelectorAll(`jj-form`).forEach(form => {
      if (form.isUri(uri)) {
        form.destroy();
      }
    });
  }

  /**
   * @static
   * @memberof JJForm
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return [];
  }

  /**
   * @desc 폼시작시 실행한다.
   * @param {Object} - 파라미터
   * @example -
   */
  formLoad(params) {}

  /**
   * @desc 현재 테마의 홈상태로 변경한다.
   * @example -
   */
  openHome() {
    this.isOpenHome = true;

    if (this.options.homeIsEmpty) {
      this.mdiContainer.querySelectorAll(`jj-form`).forEach(form => form.remove());
    } else {
      // location.href = '/';
    }

    this.isOpenHome = false;
  }

  /**
   * @desc 지정한 파일정보에 대한 폼을 생성한다.
   * @param {Object} - 파일정보
   * @param {String} - 제목
   * @return {Element} - 폼 엘리먼트
   * @example -
   */
  openFileInfo(fileInfo, title, path) {
    let formEl;
    this.mdiContainer.querySelectorAll(`jj-form`).forEach(form => {
      if (form.isUri(fileInfo.URI)) {
        //form.style.visibility = 'visible';
        form.hidden = false;
        formEl = form;
        return;
      } else {
        //form.style.visibility = 'hidden';
        form.hidden = true;
      }
    });
    if (this.mdiTabs) {
      this.mdiTabs.querySelectorAll('.nav-link.active').forEach(link => link.classList.remove('active'));
      let tab = this.mdiTabs.querySelector(`.nav-link[data-uri="${fileInfo.URI}"]`);

      if (tab) {
        tab.classList.add('active');

        if (tab.parentElement.offsetLeft > this.mdiTabs.offsetLeft + this.mdiTabs.offsetWidth) {
          this.mdiTabs.prepend(tab.parentElement);
        }

      }
    }

    if (formEl) {
      formEl.active(path);
    } 
    else {
      formEl = document.createElement('jj-form');

      this.mdiContainer.appendChild(formEl);

      formEl.openFileInfo(fileInfo, null, title);

      if (this.mdiTabs && title) {
        let tabLi = document.createElement('li');
        let liA = document.createElement('a');

        liA.setAttribute('class', 'nav-link active');
        liA.setAttribute('aria-expanded', 'true');

        let span = document.createElement('span');

        span.appendChild(document.createTextNode(title));

        let icon = document.createElement('i');

        icon.setAttribute('class', 'fa fa-remove');

        tabLi.appendChild(liA);

        liA.appendChild(span);
        liA.appendChild(icon);

        let appsPath = document.location.pathname.split('/');
        let path ;
        if (appsPath[1] == 'apps') {
          path = '/apps/' + appsPath[2] + fileInfo.DEPTH_NAME;

          liA.setAttribute('href', path);
          liA.setAttribute('data-uri', fileInfo.URI);
          liA.setAttribute('data-file-id', fileInfo.ID);
        } 
        else {
          path = fileInfo.DEPTH_NAME;

          liA.setAttribute('href', path);
          liA.setAttribute('data-uri', fileInfo.URI);
          liA.setAttribute('data-file-id', fileInfo.ID);

        }

        this.mdiTabs.prepend(tabLi);

        //liA.click();
      }

      return formEl;
    }
  }

  /**
   * @desc 지정한 파일URI 정보에 대한 폼을 생성한다.
   * @param {String} - 파일URI
   * @example -
   */
  openUri(uri) {
    Jinja.driverApi.getUri(uri).then(fileInfo => this.openFileInfo(fileInfo));
  }

  getActiveTab(){
    let result ={};
    let tabEl = Jinja.theme.mdiTabs.querySelector(`.nav-link.active`);
    if(tabEl){
      result.data = tabEl.dataset;
      result.el = tabEl;
      result.uri = tabEl.dataset.uri;
      result.fileId = tabEl.dataset.fileId;
      result.path = tabEl.getAttribute('href');
    } else {
      result = null;
    }
    return result;
  }

  refreshTab(tabInfo){
    let refreshForm = this.mdiContainer.querySelector(`jj-form[fileid="${tabInfo.fileId}"]`);
    if(refreshForm){
      refreshForm.remove();
      this.openUri(tabInfo.uri);
    }
  }

  static doTheme(uri, path) {
    // 테마시작 위치를 경로줄에 표시함
    if(path)	history.pushState({path}, null, path);

    if(Jinja.querySelector('jj-theme')){
      Jinja.querySelector('jj-theme').remove();
    }
    workspaceMeta.options.appInfo.themeMdiUri = uri;
    Jinja.theme = document.createElement('jj-theme');
    Jinja.appendChild(Jinja.theme);

  }

}

customElements.define('jj-theme', JJTheme);

/**
 * 테마를 실행하는 영역
 * 시험환경에서는 실행되지 않음
 * 만일 테스트뷰 상황이면 스타일만 취해서 적용시켜준다
 */
if (Jinja.hasAttribute('testable')) {
  if(workspaceMeta.options.appInfo.themeMdiUri){
    Jinja.driverApi.getUri(workspaceMeta.options.appInfo.themeMdiUri)
      .then(fileInfo => {
      let body = fileInfo.BODY;
      let styleEl = document.createElement('style');

      styleEl.type = 'text/css';
      styleEl.setAttribute('rel', 'stylesheet');
      styleEl.id = 'themeCss';

      Jinja.appendChild(styleEl);

      less.render(` ${Jinja.lessRuleset || ''} ${body.less || ''} `)
        .then(output =>styleEl.appendChild(document.createTextNode(output.css)))
        .catch(error => console.error(error));
    });
  }
}

else{
  Jinja.event.add('jjAppStart', 'theme.start', e => {

    // myapp 서비스 만들때
    // Guest로그인에서 테마가 생성되고
    // 사용자가 로그인하면 테마가 다시 실행되어
    // 이중으로 화면에 남는 문제가 있어서
    // 기존의 테마화면을 지우고 새로 생성하게함

    if(Jinja.querySelector('jj-theme')){
      Jinja.querySelector('jj-theme').remove();
    }

    Jinja.theme = document.createElement('jj-theme');
    Jinja.appendChild(Jinja.theme);


  });


  Jinja.event.add('jjUserStart', 'theme.start', e => {
    // 사용자가 시작할때 사용자의 권한을 기반으로 테마의 역할설정함
    // 역할종류 : READER, WRITER, DEVELOPER		    
    if(Jinja.uo.USER_ID != "GUEST") {
      Jinja.ajax.excute(`getWorkspaceOwnerRole.sql`)
        .then(result=>{
        if(result.rows[0]){
          workspaceMeta.role = result.rows[0];
          Jinja.setAttribute("user-role", workspaceMeta.role.ROLE);  
        } 
        else {
          Jinja.ajax.excute(`getWorkspaceUserRole.sql`)
            .then(result=>{
            if(result.rows[0]){
              workspaceMeta.role = result.rows[0];
              Jinja.setAttribute("user-role", workspaceMeta.role.ROLE);  
            } else {
              // 사용자의 역할정보를 찾을수 없을때 이벤트를 발생한다.
              Jinja.event.dispatch("jjUserWorkspaceRoleExist", "theme.start");
            }
          })
        }
      })

    }   
  });

}


/* ==JJStudioForm.640.class================ */

/**
 * @classdesc 런처의 studio타입 폼객체관리를 위한 클래스
 */
class JJStudioForm extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 옵션
   * @example -
   */
  _defaultOption() {
    return {
      useResizeObserver: true,
      resizeIntervalDuration: 100,
      animation: '',
      isEnterClose: false,
      isCloseDestroy: false,
      position: {},
      version: '640'
    };
  }

  /**
   * @desc 스튜디오폼을 생성한다.
   * @example -
   */
  _render() {
    this.classList.add('jj-form');
    this.innerHTML =
      `<header class="header">` +
      `<h4 class="page-title">&nbsp</h4>` +
      `</header>` +
      `<article></article>` +
      `<footer></footer>`;

    this.formTitleEl = this.querySelector('.page-title');
    this.formBodyEl = this.querySelector('article');
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
//    codeeditor의 검색에서 적용됨으로 이를 막음    
//     this.addEventListener('input', e => {
//       this.dispatchEvent(
//         new CustomEvent('changeedit', {
//           detail: {
//             mode: "input",
//             el: e.target
//           },
//           bubbles: true
//         })
//       );
//     });
    
    this.addEventListener('changeedit', e => {
      this.classList.add('edited');
      this.fileInfo.BODY = this.getSource();

      // 이미지 폴더는 Body가 없음
      if(!this.fileInfo.BODY) return;

      if (typeof this.fileInfo.BODY == 'string') {
        this.dispatchEvent(
          new CustomEvent('fileChanged', {
            detail: {
              fileInfo: this.fileInfo,
              form: this
            },
            bubbles: true
          })
        );
      } else {
        return this.fileInfo.BODY.then(body =>{
          this.fileInfo.BODY = body;
          this.dispatchEvent(
            new CustomEvent('fileChanged', {
              detail: {
                fileInfo: this.fileInfo,
                form: this
              },
              bubbles: true
            })
          );

        });
      }
    });

    this.addEventListener('keydown', e => {
      let keyMap = Jinja.global.getEventKeyMap(e);

      switch (keyMap) {
        case 'Ctrl-S':
          e.preventDefault();
          e.stopPropagation();

          this.save();

          break;
        case 'Ctrl-Enter':
          this.excute();

          break;
      }
    });
  }

  /**
   * @desc 스튜디오폼을 삭제한다.
   * @example -
   */
  _destroy() {
    super._destroy();

    if (this._oResizeObserver) this._oResizeObserver.disconnect();
    if (this._oMover) this._oMover.destroy();
    if (this._oResizer) this._oResizer.destroy();
    if (this._resizeTimeout) clearTimeout(this._resizeTimeout);

    this._resizeTimeout = null;
    this._oResizeObserver = null;

    if (this.wrapEl) {
      this.wrapEl.remove();
    }
  }

  /**
   * @desc 파일 body정보를 수정한다.
   * @param {Object} - 파일 body정보
   * @return {Promiss} - 수정결과
   * @example -
   */
  _updateFile(body) {
    this.fileInfo.BODY = body;

    return Jinja.driverApi.updateFileBody(this.fileInfo.ID, this.fileInfo.BODY, this.fileInfo.VERSION) 
      .then(data => {
        this.fileInfo.VERSION = parseInt(this.fileInfo.VERSION) + 1;
        this.classList.remove('edited');

        this.dispatchEvent(
          new CustomEvent('fileUpdated', {
            detail: {
              fileInfo: this.fileInfo,
              form: this
            },
            bubbles: true
          })
        );

        $topMessage('저장되었습니다.');

        return this.fileInfo;
      })
        .catch(ex => {
        alert(`잠김이나 버전문제로 저장이 불가능합니다.\n${ex}`);
      });
    }

    /**
   * @desc 파일 body정보를 새이름으로 저장한다.
   * @param {Object} - 파일 body정보
   * @return {Promiss} - 수정결과
   * @example -
   */
    _saveAsFile(body) {
      let newId = Jinja.global.uuid();
      let newfileInfo = {
        "PARENT_ID": this.fileInfo["PARENT_ID"],
        "ID": newId,
        "TYPE": this.fileInfo["TYPE"],
        "NAME": this.fileInfo["NAME"] +'_New',
        "URI": newId,
        "BODY": body,
        "ICON":"",
        "DESCRIPTION":"",
        "TEMPLITE":"",
        "LOCKER": Jinja.uo.USER_ID,
        "VERSION":1
      };

      return Jinja.driverApi.createFile(newfileInfo).then(data => {
        this.classList.remove('edited');
        this.fileInfo = newfileInfo;

        $topMessage('다른이름으로 저장되었습니다.');
        new CustomEvent('fileUpdated', {
          detail: {
            fileInfo: this.fileInfo,
            form: this
          },
          bubbles: true
        })


        //       if (data && newfileInfo.TYPE != 'file') {
        //         Jinja.event.dispatch('studio.newFile', 'studioV6Api.createFile', {
        //           detail: newfileInfo
        //         });
        //       }

        return this.fileInfo;
      });
    }
  

    
    /**
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Object} - 모니터링 할 속성 목록
   * @example -
   */
    static get observedAttributes() {
      return ['moveable', 'resizable'];
    }

    /**
   * @desc 폼을 로드한다.
   * @param {Object} - 파라미터
   * @example -
   */
    formLoad(params) {}

    /**
   * @desc 지정한 파일 body정보를 소스에 반영한다.
   * @param {Object} - 파일 body정보
   * @example -
   */
    setSource(body) {}

  	getSource(){}
    /**
   * @desc 스튜디오를 실행한다.
   * @example -
   */
    excute() {}

    /**
   * @desc 스튜디오를 변경사항을 반영한다.
   * @param {Event} - 이벤트
   * @example -
   */
    change(event) {}

    /**
   * @desc 지정한 파일아이디로 파일정보에 대한 폼을 생성한다.
   * @param {String} - 파일아이디
   * @param {String} - 제목
   * @example -
   */
    openId(fileId, title) {
      Jinja.driverApi.readFile(fileId).then(fileInfo => this.openFileInfo(fileInfo));
    }

    /**
   * @desc 지정한 파일정보에 대한 폼을 생성한다.
   * @param {Object} - 파일정보
   * @param {String} - 제목
   * @return {Promiss} - 생성결과
   * @example -
   */
    openFileInfo(fileInfo, title) {
      this.fileInfo = fileInfo;
      this.formTitleEl.innerText = title || fileInfo.NAME;

      const launcherUri = Jinja.launcher.getStudioUri(fileInfo.TYPE);

      return Jinja.driverApi
        .getUri(launcherUri)
        .then(launcherInfo => {
        if (launcherInfo.BODY.less && !Jinja.querySelector(`style[launcher="${launcherUri}"]`)) {
          let styleEl = document.createElement('style');

          styleEl.type = 'text/css';
          styleEl.setAttribute('rel', 'stylesheet');
          styleEl.setAttribute('launcher', launcherUri);

          Jinja.appendChild(styleEl);

          let lessCss = `[launcher="${launcherUri}"]{ ${Jinja.lessRuleset || ''} ${launcherInfo.BODY.less || ''} }`;

          less
            .render(lessCss)
            .then(output =>
                  styleEl.appendChild(document.createTextNode(output.css))
                 )
            .catch(error => console.error(error));
        }

        this.setAttribute('launcher', launcherUri);
        this.formBodyEl.innerHTML = launcherInfo.BODY.html;
        this._setElementId();

        if (launcherInfo.BODY.script) {
          try {
            new Function('form', launcherInfo.BODY.script)(this);
          } catch (ex) {
            console.error(ex);
          }
        }
      })
        .then(() => this.setSource(this.fileInfo.BODY));
    }

    /**
   * @desc 폼에서 소스를 추출하여 파일 컨텐츠를 수정한다.
   * @return {Promiss} - 수정결과
   * @example -
   */
    save(saveType) {
      let body = this.getSource();

      switch(saveType){
        case "saveAs": 
          if (typeof body == 'string') {
            return this._saveAsFile(body);
          } else {
            return body.then(body => this._saveAsFile(body)).catch(ex => console.error(ex));
          }
          break


        default:
          if (typeof body == 'string') {
            return this._updateFile(body);
          } else {
            return body.then(body => this._updateFile(body)).catch(ex => console.error(ex));
          }

      }

    }

    /**
   * @desc 지정한 파일URI 폼의 존재여부를 반환한다.
   * @param {String} - 파일URI
   * @return {Boolean} - 존재여부
   * @example -
   */
    isUri(uri) {
      if (this.options.uri === uri) {
        this.focus();

        return true;
      } else {
        return false;
      }
    }

  /**
   * @desc 모달버턴활성동작을 위한 데이터 폼을 연결시킴
   * @param {dataform} - jj-data-form 객체
   * @example - 모달박스 시험환경을 위해서 유지함
   */
  setDataForm(dataform){}

  /**
   * @desc 해당폼의 로컬스토리지에 저장된 데이터를 삭제한다.
   * @example -
   */
    cachClear() {
      Jinja.store.localStorageClear('Studio.Cache.' + this.fileInfo.ID);
    }
  }

  customElements.define('jj-studio-form', JJStudioForm);
/* ==JJStudioMDI.640.class================ */

/**
 * @classdesc 스튜디오의 MDI 탭관리를 위한 클래스
 */
class JJStudioMdiTab extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 옵션
   * @example -
   */
  _defaultOption() {
    this.__waitfile__ = [] ; // 이중 로딩을 방지하기위한 대기중 파일정보
    return {
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.innerHTML =
      `<div class='jj-inline'>` +
      `<div class="formtab"></div>` +
      `</div>` +
      `<div class="formset">` +
      `</div>`;

    this.formtab = this.querySelector('.formtab');
    this.formset = this.querySelector('.formset');

    this.addLocalFile();
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('click', e => {
      let tab;

      if (e.target.matches('.tab-item >t ')) {
        tab = e.target.parentElement;

        this._unActive();
        this._activeTab(tab);
      } else if (e.target.matches('.tab-item >i.fa-remove')) {
        this._closeTab(e.target.parentElement);
      }
    });

    this.addEventListener('contextmenu', e => {
      if (e.target.matches(`.tab-item t`)) {
        e.preventDefault();

        Jinja.context.render(this, e, [
          { command: 'close', label: '닫기', icon: 'fa-copy' },
          { command: 'closeAll', label: '전부닫기' },
          { label: 'divider' },
          { command: 'save', label: '저장', icon: 'fa-paste' },
          { command: 'saveAll', label: '전부저장', icon: 'fa-paste' },
          { label: 'divider' },
          { command: 'infoFile', label: '파일정보', icon: 'fa-address-card' },
          { command: 'activeTree', label: '폴더이동', icon: 'fa-motorcycle' }
        ]);
      }
    });

    this.addEventListener('jjContextMenuclick', e => {
      e.preventDefault();

      let contextMenu = e.detail.menu;
      let tab = e.detail.context.target.parentElement;

      switch (contextMenu) {
        case 'close':
          this._closeTab(tab);

          break;
        case 'closeAll':
          this._closeAll();

          break;
        case 'save':
          tab.linkForm.save();

          break;

        case 'infoFile':
          this._infoFile(tab);

          break;

        case 'activeTree':
          this._activeTree(tab);

          break;
        default:
          alert(contextMenu + '가 선택되었습니다.');

          break;
      }
    });

    this.addEventListener('fileChanged', e => {
      let form = e.detail.form;
      let fileInfo = e.detail.fileInfo;

      form.linkTab.classList.add('edited');

      Jinja.store.localStorage(
        'Studio.Cache.' + fileInfo.ID,
        Jinja.global.string(fileInfo)
      );

      this.dispatchEvent(
        new CustomEvent('activedTab', {
          detail: {
            tab: form.linkTab,
            form: form
          },
          bubbles: true
        })
      );
    });

    this.addEventListener('fileUpdated', e => {
      let form = e.detail.form;
      let fileInfo = e.detail.fileInfo;

      form.linkTab.classList.remove('edited');

      Jinja.store.localStorageClear('Studio.Cache.' + fileInfo.ID);

      this.dispatchEvent(
        new CustomEvent('activedTab', {
          detail: {
            tab: form.linkTab,
            form: form
          },
          bubbles: true
        })
      );
    });

    Jinja.event.add(
      'studio.updateFileInfo',
      'JJMdiTab._setEvent.updateFileInfo',
      e => {
        let tab = this.findTab(e.detail.ID);

        if (tab) {
          tab.querySelector('t').innerText = e.detail.NAME;
        }
      }
    );

    this.oSort = new JJSortable(this.formtab, {
      handle: 'i.movebar',
      cancel: 'i.fa-remove'
    });
  }

  /**
   * @desc 파일정보를 표시한다.
   * @param {Element} - 탭 엘리먼트
   * @example -
   */
  _infoFile(tab) {
    let fileId = tab.getAttribute('key');

    Jinja.driverApi.readFile(fileId)
      .then(fileInfo => Jinja.driverApi.formInfoFile(fileInfo))
      .then(fileInfo => {

      Jinja.event.dispatch(
        'studio.updateFileInfo',
        'studioV6Api.updateFileInfo',
        {
          detail: fileInfo
        }
      );
    });
  }

  /**
   * @desc 지정한 트리를 활성화 한다.
   * @param {Element} - 탭 엘리먼트
   * @example -
   */
  _activeTree(tab) {
    Jinja.event.dispatch('studio.activeTree', 'JJstudioMDI.setEvent', {
      detail: {
        fileId: tab.getAttribute('key'),
        tab: tab,
        form: tab.linkForm
      }
    });
  }

  /**
   * @desc 지정한 탭을 활성화 한다.
   * @param {Element} - 탭 엘리먼트
   * @example -
   */
  _activeTab(tab) {
    if (tab && !tab.matches('.active')) {
      this._unActive();

      tab.classList.add('active');
      tab.linkForm.classList.add('active');

      this.dispatchEvent(
        new CustomEvent('activedTab', {
          detail: {
            tab: tab,
            form: tab.linkForm
          },
          bubbles: true
        })
      );
    }
  }

  /**
   * @desc 지정한 탭을 비활성화 한다.
   * @example -
   */
  _unActive() {
    let activeTab = this.formtab.querySelector('.tab-item.active');

    if (activeTab) {
      activeTab.classList.remove('active');
      activeTab.linkForm.classList.remove('active');
    }
  }

  /**
   * @desc 수정되지 않은 탭을 일괄로 닫는다.
   * @param {Element} - 탭 엘리먼트
   * @example -
   */
  _closeAll(tab) {
    this.formtab.querySelectorAll('.tab-item').forEach(tab => {
      if (!tab.matches('.edited')) {
        this._closeTab(tab);
      }
    });
  }

  /**
   * @desc 지정한 탭을 닫는다.
   * @param {Element} - 탭 엘리먼트
   * @param {Boolean} - 승인여부
   * @example -
   */
  _closeTab(tab, confirm) {
    let nextTab;

    if (tab.matches('.active')) {
      nextTab = tab.nextElementSibling || tab.previousElementSibling;
    }

    if (confirm || !tab.matches('.edited')) {
      tab.linkForm.remove();
      tab.remove();

      if (nextTab) {
        this._activeTab(nextTab);
      }

      return;
    }

    if (tab.matches('.edited')) {
      Jinja.confirm
        .saveYesNo('변경된 내용을 저장하시겠습니까?')
        .then(chooice =>
              chooice == 'YES' ? tab.linkForm.save() : tab.linkForm.cachClear()
             )
        .then(() => this._closeTab(tab, true));
    }
  }

  /**
   * @desc 지정한 파일정보로 새로운 탭을 생성한다.
   * @param {Object} - 파일정보
   * @param {String} - 제목
   * @param {Boolean} - 로컬여부
   * @example -
   */
  _addFile(fileInfo, title, local) {
    let typeIcon = Jinja.launcher.getLauncherIcon(fileInfo.TYPE);

    this._unActive();

    let newform = document.createElement('jj-studio-form');

    newform.setAttribute('class', 'active');

    this.formset.appendChild(newform);

    newform.openFileInfo(fileInfo, title);

    let newtab = document.createElement('div');

    newtab.innerHTML = `<i class="movebar fa ${typeIcon}"></i><t>${title}</t> <i class="fa fa-remove"></i>`;

    newtab.setAttribute('class', 'tab-item active');
    newtab.setAttribute('key', fileInfo.ID);

    if (local) newtab.classList.add('edited');

    this.formtab.prepend(newtab);

    newtab.linkForm = newform;
    newform.linkTab = newtab;
  }

  /**
   * @static
   * @memberof JJForm
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return [];
  }

  /**
   * @desc 지정한 파일 아이디에 대한 탭을 생성하거나 활성화 한다.
   * @param {String} - 파일아이디
   * @param {String} - 제목
   * @example -
   */
  addFile(fileId, title) {
    let activeTab = this.findTab(fileId);

    if (activeTab) {
      this._activeTab(activeTab);

      return;
    } else {
      let fileInfo = Jinja.store.localStorage('Studio.Cache.' + fileId);

      if (fileInfo) {
        Jinja.confirm
          .update('작업중인 파일을 계속사용합니까?')
          .then(() => this._addFile(Jinja.global.json(fileInfo), title, true))
          .catch(() => {
          Jinja.store.localStorageClear('Studio.Cache.' + fileInfo.ID);
          if(!this.__waitfile__.includes(fileId)){ 
            this.__waitfile__.push(fileId);
            Jinja.driverApi
              .readFile(fileId)
              .then(fileInfo =>{
              this.__waitfile__.splice(this.__waitfile__.indexOf(fileId),1);
              this._addFile(fileInfo, title)
            });
          }
        });
      } else {
        if(!this.__waitfile__.includes(fileId)){ 
          this.__waitfile__.push(fileId);
          Jinja.driverApi
            .readFile(fileId)
            .then(fileInfo =>{
            this.__waitfile__.splice(this.__waitfile__.indexOf(fileId),1);
            this._addFile(fileInfo, title)
          });
        }
      }
    }
  }

  /**
   * @desc 로컬스토리지에 저장된 파일정보로 새로운 탭을 생성한다.
   * @example -
   */
  addLocalFile() {
    let delayTime = 0;

    Object.keys(localStorage).forEach(key => {
      if (key.startsWith('Studio.Cache.')) {
        let fileInfo = Jinja.store.localStorage(key);

        if (fileInfo) {
          fileInfo = Jinja.global.json(fileInfo);

          window.setTimeout(() => {
            this._addFile(fileInfo, fileInfo.NAME, true);
          }, delayTime);

          delayTime += 500;
        }
      }
    });
  }

  /**
   * @desc 현재 활성화된 탭을 반환한다.
   * @return {Element} - 폼 엘리먼트
   * @example -
   */
  activeForm() {
    let activeTab = this.formtab.querySelector('.tab-item.active');

    if (activeTab) {
      return activeTab.linkForm;
    }
  }

  /**
   * @desc 지정한 파일 아이디에 대한 탭을 반환한다.
   * @param {String} - 파일아이디
   * @param {Element} - 탭 엘리먼트
   * @example -
   */
  findTab(fileId) {
    return this.formtab.querySelector(`[key="${fileId}"]`);
  }

  /**
   * @desc 지정한 파일아이디에 대한 탭을 삭제한다.
   * @param {String} - 파일아이디
   * @param {Boolean} - 승인여부
   * @example -
   */
  removeTab(fileId, confirm) {
    let tab = this.findTab(fileId);

    if (tab) {
      this._closeTab(tab, confirm);
    }
  }
}

customElements.define('jj-studio-mdi', JJStudioMdiTab);
/* ==JJFormExcute.640.class================ */

/**
 * @classdesc 개발시험용 전용 폼객체관리를 위한 클래스
 */
class JJFormExcute extends JJForm {
  /**
   * @desc 개발테스트용 폼을 생성한다.
   * @example -
   */
  _render() {
    this.innerHTML =
      `<header class="header"></header>` +
      `<article></article>` +
      `<footer></footer>`;

    this.article = this.querySelector('article');
    this.classList.add('jj-form');
    this.classList.add('is-excute');
    this.setAttribute('tabindex', -1);
  }

  /**
   * @desc 개발테스트용 폼을 초기화한다.
   * @example -
   */
  _init() {
    this._render();
    this._setFromEvent();
  }

  /**
   * @desc 폼을 초기화 한다.
   * @example -
   */
  init() {}

  /**
   * @desc 제목을 설정한다.
   * @param {String} - 제목
   * @example -
   */
  setTitle(title) {}

  /**
   * @desc 지정한 파일정보를 개발테스트 전용 폼에 바인딩한다.
   * @param {Object} - 파일정보
   * @param {Boolean} - 테마여부
   * @example -
   */
  excuteLoad(fileInfo, isTheme, viewId) {
    this.setAttribute('jj-uuid', fileInfo.uuid);
    this.article.innerHTML = fileInfo.html;

    if (fileInfo.less && !Jinja.querySelector(`style[jj-uuid="${fileInfo.uuid}"]`)) {
      let styleEl = document.createElement('style');

      styleEl.type = 'text/css';
      styleEl.setAttribute('rel', 'stylesheet');
      styleEl.setAttribute('jj-uuid', fileInfo.uuid);

      this.appendChild(styleEl);

      let lessCss = ``;

      if (isTheme) {
        lessCss = ` ${Jinja.lessRuleset || ''} ${fileInfo.less || ''} `;
      } else {
        lessCss = `[jj-uuid="${fileInfo.uuid}"]{ ${Jinja.lessRuleset || ''} ${fileInfo.less || ''} }`;
      }

      less
        .render(lessCss)
        .then(output =>
              styleEl.appendChild(document.createTextNode(output.css))
             )
        .catch(error => console.error(error));
    }

    this._setElementId();

    if (fileInfo.script) {
      try {
        new Function('form', fileInfo.script)(this);
      } catch (ex) {
        // viewId가 없으면 싱크동작으로 간주하고 
        // 오류처리 동작을 실해하지 않는다
        if (!viewId) {
          return;
        }
        let showExcuteMsg, result ={
          "message": ex.message,
          "inner": ex,
          "fileInfo":fileInfo
        };
        
        switch(ex.name){
          case "TypeError":
          case "ReferenceError":
            let regex = new RegExp(/<anonymous>:(\d+):(\d+)/);
            let match = ex.stack.match(regex);
            
          	result.line= parseInt(match[1])-2;
          	result.col= parseInt(match[2]);

            let sourceLine = fileInfo.script.split('\n')[result.line-1];
            if (sourceLine){
              sourceLine = sourceLine.trim();
              showExcuteMsg = `
                <h4>Source: ${sourceLine}</h4>
                <p>
                <strong>Message: ${result.message}</strong><br>
                ErrorType: ${ex.name}<br>
                Source Line: ${result.line}<br>
                </p>`;
            } else {
              showExcuteMsg = `
                <h4>Source: ${sourceLine}</h4>
                <p>
                <strong>Message: ${result.message}</strong><br>
                ErrorType: ${ex.name}<br>
                Source Line: ${result.line}<br>
								<b>Stack</b>:<br>
									${ex.stack.split('\n').join('<br>')}
                </p>`;
            }
            break;
            
          case "SyntaxError":
              showExcuteMsg = `
								<h4>스크립트 문장 오류</h4>
                <p>
                <strong>Message: ${ex.message}</strong><br>
                ErrorType: ${ex.name}<br>
                </p>`;
            break;

          default:
              showExcuteMsg = `
								<h4>정의되지않은 오류</h4>
                <p>
                <strong>Message: ${ex.message}</strong><br>
                ErrorType: ${ex.name}<br>
                </p>`;
            break;
        }

        console.error(ex);
        alert(showExcuteMsg);
        this.dispatchEvent(new CustomEvent("formError", {
          "detail":result,
          "bubbles": true
        }));

      }
    }

    this.formLoad();
    this.__focus__();
    this.dispatchEvent(new CustomEvent("formLoad", {
      "detail":{
        "form": this
      },
      "bubbles": true
    }));

  }
  
  /** 폼이 로드되면 자동으로 포커스를 설정한다 */
  __focus__(){
    let el = this.querySelector('[autofocus]');
    if(el) el.focus();
  }  
}

customElements.define('jj-form-excute', JJFormExcute);
/* ==PWA.710.pkg.deploy================ */
/* ==Auth.640.class================ */

/**
 * @classdesc 권한관리를 위한 클래스<br><br>
 * ※ 인증처리철차<br>
 *  \- core에서 appLoad 이벤트가 발생한다.<br>
 *  \- Auth에서 init()를 실행한다.<br>
 *  \- 쿠키가 있으면 쿠키검사를 통해서 인증을 확인한다.<br>
 *  \- 쿠키가 없으면 doIframLogin 인증을 호출한다.<br>
 *  \- 아이프레임에서 window.message를 보낸다.<br>
 *  \- addEventListener('message' 에서 넘어온 쿠키를 재 확인한다.<br>
 *  \- 인증이 맞으면 JJLogin을 이벤트를 호출한다.<br>
 *  \- new CustomEvent('appStart')를 발생시킨다.<br>
 *  \- launcher에서 해당이벤트를 받아서 theme페이지를 호출한다.<br>
 */
class JJAuth  extends JJModule {
  
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 옵션
   * @example -
   */
  _defaultOption() {
    this.VERSION = '640';
    this.auth20Provider = {};
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      accountSite:
      workspaceMeta.options.loginWorkspaceUrl ||
      (workspaceMeta.options.login ? workspaceMeta.options.login.loginWorkspaceUrl : null),
      loginUri:
      workspaceMeta.options.loginUri ||
      (workspaceMeta.options.login ? workspaceMeta.options.login.loginUri : null),
      useGuest:
      workspaceMeta.options.useGuest ||
      (workspaceMeta.options.login ? workspaceMeta.options.login.useGuest : null),
      usePWA:
      workspaceMeta.options.usePWA ||
      (workspaceMeta.options.pwa ? workspaceMeta.options.pwa.usePWA : null)
    };

  }
  
  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    if (navigator.onLine) {
      if (this.options.usePWA) {
        Jinja.event.add('JJPWAUpgrade', 'Auth.constructor', e => {
          this.init();
        });
      }
    } 
    else {
      this._offLineLogin();

      window.addEventListener('online', e => {
        this.init();
      });
    }
    
    Jinja.event.add('JJLogout', 'Auth.setEvent', e => this._logOut());

    Jinja.event.add('JJLogin', 'Auth.setEvent', e => {
      let loginUri = `/${this.options.apiVersion}/account/studio/login`;

      if (e.detail.comCd) {
        loginUri = `/${this.options.apiVersion}/account/${e.detail.comCd}/login`;
      }

      Jinja.ajax.post(loginUri, {
        LOGIN_ID: e.detail.id,
        PASSWORD: Jinja.global.md.md5(e.detail.pass).toUpperCase()
      }).then(data => {
        if(data){
          
          Jinja.ajax.setAuthorization(data.token)
          Jinja.uo = data;
          workspaceMeta.token = data.token;
          Jinja.event.dispatch("jjAppStart", "Auth._setEvent");
          Jinja.event.dispatch("jjUserStart", "Auth._setEvent");
        } else {
          alert("계정과 암호를 확인해주세요.");
        }
      }).catch(error =>{
        alert("계정과 암호를 확인해주세요.");
        console.log('Request failed', error)
      });
    });

    Jinja.event.add('JJLockLogin', 'Auth.setEvent', e => {
        Jinja.ajax.post(`/${this.options.apiVersion}/account/login`, {
        LOGIN_ID: e.detail.id,
        PASSWORD: Jinja.global.md.md5(e.detail.pass).toUpperCase()
      }).then(data => {
        Jinja.uo = data;

        Jinja.event.dispatch('JJUnlock', 'Auth._setEvent');
      })
        .catch(error => console.log('Request failed', error));
    });

    window.addEventListener('message', e => {
      let method = e.data.method;
      let sender = e.data.sender;

      if (sender == window.location.origin) return;

      if (method == 'auth') {
        let cookie = e.data.body.cookie;

        if (cookie) {
          this.frame.remove();
          this.frame = null;
          this._cookieLogin(cookie);
        } else {
          location.href = this.options.accountSite + '?backurl=' + location.href + '?req=q';
        }
      }
    });
  }

  /**
   * @desc 쿠키 로그인을 한다.
   * @param {String} - 쿠키값
   * @example -
   */
  _cookieLogin(cookie) {
    Jinja.ajax
      .post(`/${this.options.apiVersion}/account/login/cookie`)
      .then(data => {
      Jinja.uo = data;

      Jinja.event.dispatch('jjAppStart', 'Auth.controller.cookieLogin');
      Jinja.event.dispatch("jjUserStart", "Auth._setEvent");
      
    })
      .catch(error => console.log('Request failed', error));
  }

  /**
   * @desc 쿠키 로그인을 한다.
   * @param {String} - 쿠키값
   * @example -
   */
  _tokenLogin(token) {
    debugger;
    Jinja.ajax.post(`/${this.options.apiVersion}/account/login/token`,{
      "token":token
    })
      .then(data => {
      location.href =  location.origin.concat(location.pathname);
      
//       Jinja.ajax.setAuthorization(token)
//       Jinja.uo = data;

//       Jinja.event.dispatch('jjAppStart', 'Auth.controller.cookieLogin');
//       Jinja.event.dispatch("jjUserStart", "Auth._setEvent");
      
    })
      .catch(error => console.log('Request failed', error));
  }  
  /**
   * @desc 오프라인 로그인을 한다.
   * @example -
   */
  _offLineLogin() {
    Jinja.uo = {
      USER_ID: 'OFF-LINE',
      USER_NAME: 'OFF-LINE',
      IMAGE: '/repository/systemImages/etc/user.jpg'
    };

    Jinja.event.dispatch('jjAppStart', 'Auth.controller.guestLogin');
  }

  /**
   * @desc 로그아웃을 한다.
   * @example -
   */
  _logOut() {
    Jinja.ajax.get(`/${this.options.apiVersion}/account/logout`).then(() => {
      Jinja.destroy();

      if (this.options.accountSite) {
        //location.href = this.options.accountSite+`?callback=${location.href}`;
        location.href = this.options.accountSite;
      } else {
        location.reload();
      }
    });
  }

  

  /**
   * @desc 인증모듈을 초기화한다.
   * @example -
   */
  init() {
    let token = new URL(document.location).searchParams.get('token');

    if (token) {
      //this.options.useGuest = false;
     this._tokenLogin(token);

    }
    else if (Jinja.store.getAuthCookie()) {
      let curCookie = Jinja.store.getAuthCookie();
      this._cookieLogin(Jinja.store.getAuthCookie());
    } 
    else if (workspaceMeta.userInfo) {
      // 세션의 사용자 정보를 기반으로 로그인을 진행함
      Jinja.uo = workspaceMeta.userInfo;
      setTimeout(e=>{
        Jinja.event.dispatch("jjAppStart", "Auth._setEvent");
        Jinja.event.dispatch("jjUserStart", "Auth._setEvent");
      },500);
      
    } 
    else if (this.options.useGuest) {
      Jinja.uo = {
        LOGIN_ID: 'GUEST',
        USER_ID: 'GUEST',
        USER_NAME: 'GUEST'
      };
      Jinja.event.dispatch('jjAppStart', 'Auth.controller.guestLogin');
    } 
    else if (this.options.loginUri) {
      //JJFormFull.open(this.options.loginUri, {});
      this.login();
    } 
    else if (this.options.accountSite) {
      location.href = this.options.accountSite+`?callback=${location.href}`;

//       if (this.options.accountSite && location.port != '443') {
//         this.options.accountSite += ':' + location.port;
//       }

//       this.frame = document.createElement('iframe');
//       this.frame.style.display = 'none';
//       this.frame.src = this.options.accountSite + '?m=auth';
//       this.frame.addEventListener('load', e => {});
//       this.options.app.el.appendChild(this.frame);
    }

    console.debug('Jinja.auth.640 모듈이 로드되었습니다.');
  }
  
  login(uri){
    uri = uri||this.options.loginUri;
    JJFormFull.open(uri, {});
  }
  
  logout(themeUri, path){
    if (path)	history.pushState({path}, null, path);
    
    if(themeUri){
    	workspaceMeta.options.appInfo.themeMdiUri =themeUri;
    }
    return this._logOut();
  }

  /**
   * @desc 인증모듈을 삭제한다.
   * @example -
   */
  destroy() {}

  /**
   * @desc 모듈명을 반환한다.
   * @example -
   */
  who() {
    alert('JJAuth');
  }
}

Jinja.addModule('auth', JJAuth);


/* ==JJServiceWorker.640.class================ */

/**
 * @classdesc 서비스워크 관리를 위한 클래스
 */
class JJServiceWorker extends JJModule {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 옵션
   * @example -
   */
  _defaultOption() {
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      "useSW": workspaceMeta.options.pwa.useSW
    };
  }
  
  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {}

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    if (['edit', 'open'].includes(APP_MODE)) {
      return false;
    }

    if (navigator.serviceWorker && this.options.useSW) {
      this.swInit();
    } else {
      Jinja.event.dispatch('JJPWAUpgrade', 'Auth.constructor');
    }
  }

  /**
   * @desc 서비스워크를 초기화한다.
   * @example -
   */
  swInit() {
    console.todo(
      '배포시 워크스페이스가 캐싱해제되어 개발모드로 갈 필요가 없도록 조치'
    );
    let serviceWorkerUrl = `/sw`;
    if(workspaceMeta.options.pwa.apps){
      serviceWorkerUrl = `/apps/${workspaceMeta.options.pwa.apps}/sw`;
    }
    navigator.serviceWorker.register(serviceWorkerUrl, {
    });

    navigator.serviceWorker.ready
      .then(registration => {
        this.registration = registration;

        return true;
      })
      .then(checkRlt => {
        if (checkRlt) {
          Jinja.event.dispatch('JJPWAUpgrade', 'JJServiceWorker.swInit');
        } else {
          this.reset();
        }
      });
  }

  /**
   * @desc 최신버전 여부를 반환한다.
   * @return {Promiss} - 최신버전 여부
   * @example -
   */
  versionCheck() {
    if (navigator.onLine) {
      return Jinja.ajax.get(`/version`).then(data => {
        if (workspaceMeta.options.version == data.result) {
          return true;
        } else {
          return false;
        }
      });
    } else {
      return new Promise.reject();
    }
  }

  /**
   * @desc 오프라인에 설정된 자료를 전부 지우고 새로고침한다.
   * @example -
   */
  reset() {
    if (this.registration) {
      this.registration.unregister().then(rlt => {
        console.todo(
          '배포시 워크스페이스가 캐싱해제되어 개발모드로 갈 필요가 없도록 조치'
        );

        location.reload(true);
      });
    } else {
      console.error('등록된 서비스정보를 파악할수 없어서 재 시작을 못했습니다.');
    }
  }
  
  /**
   * @desc 모듈명을 반환한다.
   * @example -
   */
  who() {
    alert('JJServiceWorker');
  }
}

/**
 * 어플리케이션 메니페스트 등록 
 * 서버방식으로 진행하기로 함
 */
// if(workspaceMeta.options.pwa.manifest){
//   let manifest =Jinja.global.string(workspaceMeta.options.pwa.manifest);

//   const blob = new Blob([manifest], {type: 'application/javascript'});

//   const manifestURL = URL.createObjectURL(blob);

//   var headID = document.getElementsByTagName('head')[0];
//   var link = document.createElement('link');
//   link.rel = 'manifest';
//   headID.appendChild(link);
//   link.setAttribute('href', manifestURL);
// }



Jinja.addModule('sw', JJServiceWorker);
/* ==Notification.640.class================ */

/**
 * @classdesc 알림 관리를 위한 클래스<br><br>
 * 모바일 구글은 설치가 되어야 Notification을 받을 수 있다.
 * 모바일은 serviceWork가 되어야 Notification을 받을 수 있다.
 */
class JJNotification {
  /**
   * @desc 생성자
   * @param {Object} - 옵션
   * @example -
   */
  constructor(options) {
    this.VERSION = '640';
    this.options = {};

    if (['edit', 'open'].includes(APP_MODE)) {
      return false;
    }

    Object.assign(this.options, options);

    if ('Notification' in window && workspaceMeta.options.pwa.useNoti) {
      this.init();
    }
  }

  _intro(){
    this.show('AppSpeed 시작합니다', {body: workspaceMeta.options.seo.ogDescription || '제품설명'});
  }
  
  /**
   * @desc 알림모듈을 초기화한다
   * @example -
   */
  init() {
    if (Notification.permission === 'granted') {
      this._intro();
    } else if (Notification.permission !== 'denied') {
      Notification.requestPermission().then(permission => {
        if (permission === 'granted') {
          this._intro();
        }
      });
    }
  }

  /**
   * @desc 서비스워크용 알림을 처리한다.
   * @param {String} - 제목
   * @param {Object} - 옵션
   * @example -
   */
  show(title, options) {
    console.todo(
      '서비스워크 동작상태에 따른 자동분기 처리로 메시지를 보낼수 있도록 개선필요함'
    );

    if (!workspaceMeta.options.useSW) {
      this.desktopShow(title, options);

      return;
    }

    let badge = '/repository/studio602/20191121/2da89eb8-29ca-4011-a80c-7d5557964076.png';
    let icon = '/repository/studio602/20191112/616bf0d5-96a6-47db-8e0d-4c9a1a170357.png';

    if (options.userId) {
      icon = '/repository/users/' + options.userId;
    }

    const defaultOption = {
      body: '',
      //badge: badge,
      //icon: icon,
      //image: workspaceMeta.options.ogImage,
      //sound: 'https://www.w3schools.com/html/horse.mp3',
      vibrate: 0,
      //silent: true,
      noscreen: false
    };

    if (typeof options == 'string') {
      options = {
        body: options
      };
    }

    Object.assign(defaultOption, options);

    if ('Notification' in window) {
      if (Notification.permission === 'granted') {
        this.serviceWorkNotification(title, defaultOption);
      } else if (Notification.permission == 'denied') {
        this.topMessageNotification(title, defaultOption);
      } else {
        Notification.requestPermission().then(permission => {
          if (permission === 'granted') {
            this.serviceWorkNotification(title, defaultOption);
          } else {
            this.topMessageNotification(title, defaultOption);
          }
        });
      }
    } else {
      this.topMessageNotification(title, defaultOption);
    }
  }

  /**
   * @desc PC용 알림을 처리한다.
   * @param {String} - 제목
   * @param {Object} - 옵션
   * @example -
   */
  desktopShow(title, options) {
    let badge = '/repository/studio602/20191121/2da89eb8-29ca-4011-a80c-7d5557964076.png';
    let icon = '/repository/studio602/20191112/616bf0d5-96a6-47db-8e0d-4c9a1a170357.png';

    if (options.userId) {
      icon = '/repository/users/' + options.userId;
    }

    const defaultOption = {
      body: '',
      //badge: badge,
      //icon: icon,
      //sound: 'https://www.w3schools.com/html/horse.mp3',
      vibrate: 0,
      noscreen: false
    };
		// silent 소음진동 제거
		// silent: true, 
		// 
    if (typeof options == 'string') {
      options = {
        body: options
      };
    }

    Object.assign(defaultOption, options);
		
    
    if (!('Notification' in window)) {
      alert('This browser does not support system notifications');
    } else if (Notification.permission === 'granted') {
      let notification = new Notification(title, defaultOption);
    } else if (Notification.permission !== 'denied') {
      Notification.requestPermission(function (permission) {
        if (permission === 'granted') {
          let notification = new Notification(title, defaultOption);
        }
      });
    }
  }

  /**
   * @desc 서비스 워크 설정을 통한 알림을 처리한다.
   * @param {String} - 제목
   * @param {Object} - 옵션
   * @example -
   */
  serviceWorkNotification(title, options) {
    alert(title);
//     navigator.serviceWorker.ready.then(registration =>
//      // registration.showNotification(title, options)
//     );
  }

  /**
   * @desc 일반 알림을 처리한다.
   * @param {String} - 제목
   * @param {Object} - 옵션
   * @example -
   */
  topMessageNotification(title, options) {
    console.log('sse Message consol log... : ' + title);
  }
  
  setNotiBox(el){
    this.notiBox = el;
  }
  addNotiBox(pHtml){
//     if(this.notiBox){
//       let html = `
//             <a href="javascript:void(0);" class="dropdown-item notify-item">
//               <div class="notify-icon">
//                 <i class="fa fa-user-circle" aria-hidden="true"></i>
// 							</div>
//               <p class="notify-details">Mario Drummond</p>
//               <p class="text-muted mb-0 user-msg">
//                 ${pHtml}
//               </p>
//             </a>
// `;
//     	Jinja.dom.prepend(this.notiBox, html);
//     }
  }
  
  /**
   * @desc 모듈명을 반환한다.
   * @example -
   */
  who() {
    alert('JJNotification');
  }
}

Jinja.addModule('notification', JJNotification);
/* ==ServerSentEvents.640.class================ */

/**
 * @classdesc SSE 관리를 위한 클래스
 */
class JJServerSentEvents extends JJModule{
//   /**
//    * @desc 생성자
//    * @param {Object} - 옵션
//    * @example -
//    */
//   constructor(options) {

//     Object.assign(this.options, options);

//     if (['edit', 'open'].includes(APP_MODE)) {
//       return false;
//     }

//   }

  _defaultOption() {
    this.VERSION = '640';
    this.options = {};
    this.messageRoute = {};
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61"
    };
  }
  
  _setEvent() {
    Jinja.event.add('jjAppStart', 'sse.setInit', this.appStart.bind(this));
    Jinja.event.add('JJLogout', 'sse.setInit', this.destroy.bind(this));
  }
  /**
   * @desc SSE모듈을 초기화한다.
   * @example -
   */
  init() {}
  /**
   * @desc jjAppStart 초기화한다.
   * @example -
   */
  appStart() {
    if (navigator.onLine && workspaceMeta.options.pwa.useSSE) {

      //https://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string
      let response =`
var sse;
try{
sse = new EventSource('https://www.appspeed.net:8893/${this.options.apiVersion}/notification/sse/connection');
} catch(e){
console.log(e);
};

sse.addEventListener("open", e => {
console.info("/${this.options.apiVersion}/notification/sse/connection");
});

sse.addEventListener("message", e=>{
self.postMessage({
"method": "SSE",
"body":  e.data
});
})

self.onmessage = function (msg) {
switch (msg.data.method) {
case 'close':
sse.close();  

console.log("SSE연결을 종료했습니다.");

break;
}
}
`;

      var blob;
      try {
        blob = new Blob([response], {type: 'application/javascript'});
      } catch (e) { // Backwards-compatibility
        window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
        blob = new BlobBuilder();
        blob.append(response);
        blob = blob.getBlob();
      }
      // Jinja.sseWellComm = new Worker(URL.createObjectURL(blob));


      Jinja.sseWellComm = new Worker('/sseworker');

      Jinja.sseWellComm.addEventListener('message', e => {
        if (e.data.method === 'SSE') {
          let msg;

          try {
            msg = Jinja.global.json(e.data.body);
          } catch (ex) {

          }
          switch (msg.NOTI_CODE) {
            case '100': {
//               Jinja.notification.show('APPSPEED602 SSE', {
//                 body: msg.MESSAGE
//               });

              break;
            }
            default: {
              break;
            }
          }

          if (this.messageRoute[msg.NOTI_CODE]) {
            this.messageRoute[msg.NOTI_CODE].forEach(item => {
              console.log('SSE messageRoute', msg.NOTI_CODE, msg, item);

              item.handler(msg);
            });
          }

          //           Jinja.notification.addNotiBox(`<h5>SSE</h5>
          // <pre>${Jinja.global.string(msg)}</pre>
          // `);
        }
      });

      Jinja.ajax.post(`/${this.options.apiVersion}/notification/topic/studio/user/${Jinja.uo.USER_ID}`);
    }
  }

  /**
   * @desc SSE모듈을 삭제한다.
   * @example -
   */
  destroy() {
    if (Jinja.sseWellComm) {
      Jinja.sseWellComm.postMessage({
        method: 'close'
      });
    }
  }

  /**
   * @desc 지정한 메시지 정보를 메시지 라우터에 추가한다.
   * @example -
   */
  addMessageRoute(messageCode, handleName, handler) {
    if (this.messageRoute[messageCode]) {
      this.messageRoute[messageCode].push({
        handleName: handleName,
        handler: handler
      });
    } else {
      this.messageRoute[messageCode] = [
        {
          handleName: handleName,
          handler: handler
        }
      ];
    }
  }
}

Jinja.addModule('sse', JJServerSentEvents);
/* ==ReactComp.710.pkg.deploy================ */
/* ==JJPagination.640.class================ */
/*jshint sub:true*/ 

class JJPagination extends HTMLElement {

  constructor(opt) {
    super();
    this.__customMessage = "";
    this.VERSION = "610";
    this.options = {
      "dataObj": null,
      "arrayLoop": null,
      "pageLength": 20,
      "pageBtnCount": 5,
      "pageSizes": [5,10,15,20,30,50,100]
    };

    Object.assign(this.options, this.dataset, opt);		

  }		

  setEvent(){
    this.clickHandler = this._onClick.bind(this);
    this.changeHandler = this._onChange.bind(this);
    this.addEventListener("click", this.clickHandler, false);		
    this.addEventListener("change", this.changeHandler, false)
  }

  _onClick(e){
    if(!this.options.dataObj) return;
    let movePage;
    let rowLength = this.options.dataObj.length;
    let totalPage = parseInt((rowLength+this.options.pageLength-1)/this.options.pageLength);
		/* 특정페이지로 이동 */
    
    if (e.target.dataset.pageNum){
      this.pagination.querySelectorAll("li.active").forEach(el=> el.classList.remove("active"));
      e.target.parentElement.classList.add("active");
      this.options.arrayLoop.gotoPage(e.target.dataset.pageNum);	

      this.spanRownum.innerHTML = `Showing 
<t class="t1">${e.target.dataset.pageNum}</t>
 to 
<t class="t1">${totalPage}</t>
 of 
<t class="t3">${rowLength}</t>
 entries 
<t class="custom-message">${this.__customMessage}</t>
`;

    } 
		/* 특정페이지로 이동 */
    else if(e.target.matches(".page-next:not(.disabled) *")){
      movePage = this.pagination.querySelector("li:nth-last-child(3) a[data-page-num]").dataset.pageNum;
      this.refresh(parseInt(movePage)+1);
      this.pagination.querySelector("li.page a").click();
    }
    else if(e.target.matches(".page-prev:not(.disabled) *")){
      movePage = this.pagination.querySelector("li.page a[data-page-num]").dataset.pageNum;
      movePage = Math.max(1, movePage - this.options.pageBtnCount);
      this.refresh(parseInt(movePage));
      this.pagination.querySelector("li:nth-last-child(3) a").click();
    }
    else if(e.target.matches(".page-home:not(.disabled) *")){
      movePage=1;
      this.refresh(movePage);
      this.pagination.querySelector("li.page a").click();
    }
    else if(e.target.matches(".page-last:not(.disabled), .page-last:not(.disabled) *")){
      movePage=totalPage-this.options.pageBtnCount+1;
      this.refresh(movePage);
      this.pagination.querySelector("li:nth-last-child(3) a").click();
    }
    else if(e.target.matches(".page-prev-sm")){
      movePage = this.startPage>1 ? this.startPage-1 : 1;
      this.refresh(movePage);
      this.options.arrayLoop.gotoPage(movePage);	

    }
    else if(e.target.matches(".page-next-sm")){
      movePage = this.startPage < this.options.pageLength ? this.startPage+1 : this.options.pageLength;
      this.refresh(movePage);
      this.options.arrayLoop.gotoPage(movePage);	
    }

    this.dispatchEvent(
      new CustomEvent('pageClick', {
        "detail": {
          "page": movePage,
          "loopEl": this.options.arrayLoop
        },
        "bubbles": true
      })
    );
    
  }
  _onChange(e){
    if(e.target.matches(`select`)){
      if(!this.options.arrayLoop) return;
      this.pagination.querySelectorAll("li.active")
        .forEach(el=> el.classList.remove("active"));
      let length = parseInt(e.target.value);
      this.options.pageLength = length;
      this.options.arrayLoop.changePagesize(length);	
      
      this.dispatchEvent(
        new CustomEvent('pageSizeChange', {
          "detail": {
            "pageSize": length,
            "loopEl": this.options.arrayLoop
          },
          "bubbles": true
        })
      );
      
    }
  }

  // 신규레코드 추가시 마지막 페이지를 보여주도록 한다.
  gotoEnd(){
    let rowLength = this.options.dataObj.length;
    let totalPage = parseInt((rowLength+this.options.pageLength-1)/this.options.pageLength);
    this.refresh(Math.max(1,totalPage-this.options.pageBtnCount+1));
    this.pagination.querySelectorAll("li.active").forEach(el=> el.classList.remove("active"));
    this.pagination.querySelector('[data-page-num="'+totalPage+'"]').parentElement.classList.add("active");
    this.spanRownum.innerHTML = `Showing 
<t class="t1">${totalPage}</t>
 to 
<t class="t1">${totalPage}</t>
 of 
<t class="t3">${rowLength}</t>
entries 
<t class="custom-message">${this.__customMessage}</t>
`;
    
    return this.pagination.querySelector('[data-page-num="'+totalPage+'"]');
    
  }
  
  getActivePage(){
    return this.pagination.querySelector("li.page.active a").dataset.pageNum;
  }
  setActivePage(pageNum){
    return this.pagination.querySelector(`li.page.active a[data-page-num="${pageNum}"]`).click();
  }
  
  // 레코드 삭제시 처리
  splice(removeIndex, length){
		
    let rowLength = this.options.dataObj.length;
    let totalPage = parseInt((rowLength+this.options.pageLength-1)/this.options.pageLength);
    if (this.pagination.querySelector("li.active a")){
      let curPage = parseInt(this.pagination.querySelector("li.active a").dataset.pageNum);  
      this.refresh(Math.max(1,totalPage-this.options.pageBtnCount+1));
      this.pagination.querySelectorAll("li.active").forEach(el=> el.classList.remove("active"));
      if (length == 1){
        if (this.pagination.querySelector('[data-page-num="'+curPage+'"]')) {
          this.pagination.querySelector('[data-page-num="'+curPage+'"]').parentElement.classList.add("active");
        } 
        else {
          curPage--;
          if(this.pagination.querySelector('[data-page-num="'+curPage+'"]')){
            this.pagination.querySelector('[data-page-num="'+curPage+'"]').click();
          }
        }			
        this.spanRownum.innerHTML = `Showing 
<t class="t1">${curPage}</t>
 to 
<t class="t1">${totalPage}</t>
 of 
<t class="t3">${rowLength}</t>
 entries 
<t class="custom-message">${this.__customMessage}</t>
`;
      }
    }
  }

  renderHtml(){
      
    this.setAttribute("data-render", "JJPagination");
    this.$empty();

    let _selectOptionHtml = ``;
    this.options.pageSizes.forEach(num=>{
      _selectOptionHtml += `<option value="${num}">${num}</option>\n`;
    });
    //_selectOptionHtml = ``;
    var html = `
<select class="form-control">${_selectOptionHtml}</select>
<span class="rownum">Showing 0 to 0 of 0 entries <t class="custom-message"></t></span>
<nav aria-label="..."> 
<ul class="pagination justify-content-center">
<li class="page-item page-home" aria-label="Home" title="Home" >
    <a class="page-link" href="#">
         <i class="fa fa-step-backward" aria-hidden="true"></i>
     </a>
</li>
<li class="page-item page-prev" aria-label="Previous" title="Previous">
    <a class="page-link" href="#">
       <i class="fa fa-chevron-left" aria-hidden="true"></i>
    </a>
</li>
<li class="page-item page-next" aria-label="Next" title="Next" >
    <a class="page-link"href="#">
      <i class="fa fa-chevron-right" aria-hidden="true"></i>
    </a>
</li>
<li class="page-item page-last" aria-label="Last" title="Last">
    <a class="page-link" href="#">
         <i class="fa fa-step-forward" aria-hidden="true"></i>
    </a>
</li>
</ul> 
</nav>
<nav aria-label="...">
<ul class="pager">
<li><a class="page-prev-sm" href="#"><i class="fa fa-angle-left" aria-hidden="true"></i></a></li>
<li><a class="page-next-sm" href="#"><i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
</ul>
</nav> 
`;

    Jinja.dom.append(this, html);		
    
    this.pagination = this.querySelector('ul.pagination');
    this.pageHome = this.querySelector('ul.pagination .page-home');
    this.pagePrev = this.querySelector('ul.pagination .page-prev');
    this.pageNext = this.querySelector('ul.pagination .page-next');
    this.pageLast = this.querySelector('ul.pagination .page-last');
    this.pagePrevSm = this.querySelector('ul.pagination .page-prev-sm');
    this.pageNextSm = this.querySelector('ul.pagination .page-next-sm');
    this.selPageSize = this.querySelector('select');
    this.spanRownum = this.querySelector('.rownum');

    
    // page버턴 구성하기
    for (let i=1; i <= this.options.pageBtnCount; i++) {
      let li = document.createElement("li");
      li.classList.add("page-item");
      li.classList.add("page");
      
      let a = document.createElement("a");
      a.classList.add("page-link");
      a.appendChild(document.createTextNode(i));
      a.dataset.pageNum = i;
      a.href = "#";
      li.appendChild(a);
      this.pageNext.before(li);
    }



    return html;
  }

  bindData(rows, arrayLoop){
    
    this.options.dataObj = rows;
    this.options.arrayLoop = arrayLoop;
    this.options.pageLength = arrayLoop.options.pageLength;
    this.selPageSize.value = this.options.pageLength;
    this.refresh();

    if(rows.length){
      this.classList.remove("no-data");
    } else {
      this.classList.add("no-data");
    }
  }

  customMessage(msg){
    this.__customMessage = msg;
    this.querySelector('t.custom-message').innerText = this.__customMessage;
  }
  
  refresh(startPage){
    
    this.pagination.querySelectorAll("li.active").forEach(el=> el.classList.remove("active"));
    this.startPage = parseInt(startPage) || 1;
    let rowLength = this.options.dataObj.length;
    let totalPage = parseInt((rowLength+this.options.pageLength-1)/this.options.pageLength);
    this.pagination.querySelectorAll("[data-page-num]").forEach((el,index) =>{
      let pageNum = this.startPage+index;
      if (index==0){
        el.parentElement.classList.add("active");	
        this.spanRownum.innerHTML = `Showing 
<t class="t1">${pageNum}</t>
 to 
<t class="t1">${totalPage}</t>
 of 
<t class="t3">${rowLength}</t>
 entries 
<t class="custom-message">${this.__customMessage}</t>
`;

      };
      el.textContent = pageNum;
      el.dataset.pageNum = pageNum;
      el.style.display = 'block';
      if(pageNum > totalPage){
        el.style.display = 'none';
        el.dataset.pageNum = 0;
        el.textContent = "";
      }
    });

    
    if (this.pagination.querySelector('[data-page-num="1"]') || rowLength ==0){
      this.pageHome.classList.add('disabled');
      this.pagePrev.classList.add('disabled');
    } else {
      this.pageHome.classList.remove('disabled');
      this.pagePrev.classList.remove('disabled');
    }

    if (this.pagination.querySelector('[data-page-num="'+totalPage+'"]')  || rowLength ==0){
      this.pageNext.classList.add('disabled');
      this.pageLast.classList.add('disabled');
    } else {
      this.pageNext.classList.remove('disabled');
      this.pageLast.classList.remove('disabled');
    }

  }	

  

  connectedCallback() {
    // DOM에 추가되었다. 렌더링 등의 처리를 하자.
    this.renderHtml();
    this.setEvent();
  }
  disconnectedCallback() {
    this.pagination = null;
    this.pageHome = null;
    this.pagePrev = null;
    this.pageNext = null;
    this.pageLast = null;
    this.pagePrevSm = null;
    this.pageNextSm = null;
    this.selPageSize = null;
    this.spanRownum = null;
    this.options = null;
    this.removeEventListener("click", this.clickHandler, false);		
    this.removeEventListener("change", this.changeHandler, false)

    //this.$empty();
    // DOM에서 제거되었다. 엘리먼트를 정리하는 일을 하자.
  }
  attributeChangedCallback(attrName, oldVal, newVal) {
    // 속성이 추가/제거/변경되었다.
    //this[attrName] = newVal;
  }
  adoptedCallback(oldDoc, newDoc) {
    // 다른 Document에서 옮겨져 왔음
  }

}

customElements.define('jj-pagination', JJPagination);	/* ==JJReact.640.class================ */

/**
 * @classdesc JJReact 관리를 위한 클래스<br><br>
 * 데이타셑은 옵저버로 생성하여 get/set을 오버라이딩 시킨다.<br>
 * 데이터 옵저버를 통해서 변화를 감지하게 된다.<br>
 * 새로운 데이타가 추가되면 타임옵져버는 이를 감지하여 get/set을 시킨다.<br><br>
 *
 * UI옵저버는 가상돔을 생성하여 관리한다.<br>
 * 내용이추가되면 가상돔을 통해서 이를 생성한다.<br><br>
 *
 * 템플릿 리터럴은 연산을 통하게 되며 관련된 데이타옵저버에 등록한다.<br>
 * 데이터 업저버는 등록된 템프릿리터럴을 인지하고 이를 업데이트한다.<br>
 *
 * 데이터 업저는 참조링크를 내장하고 리터럴 연산을 통해서 옵저버 문장을 만든다.<br>
 *
 * 리터럴 옵저버는 여러문장으로 구성된 내용을 구성된다.<br>
 * 리터럴노드 : {<br><br>
 * 
 *    리터럴문자열,<br>
 * 		[관련데이터셑]<br>
 * 		--------------<br><br>
 *
 *    파서()<br>
 *  }<br><br>
 *
 * 리터럴 속성:{<br>
 * <br>
 * }
 */
class JJReact {
  /**
   * @static
   * @desc 지정한 노드의 textContent에 지정한 값을 입력한다.<br>
   * 이미지 노드일 경우 src에 입력한다.
   * @param {Element} - 대상 노드
   * @param {*} - 값
   * @example -
   */
  static nodeText(node, val) {
    if (Jinja.global.isDate(val)) {
      val = Jinja.i18n.timezoneFormat(val);
    }
    if (node.tagName === 'IMG') {
      node.src = val;
    } else {

      if(node.parentElement && node.parentElement.$closest('jj-item-label')){
        node.parentElement.$closest('jj-item-label').dataBindSet(node, val);
      } else {
        node.textContent = val;  
      }
    }
  }

  /**
   * @static
   * @desc 지정한 노드의 속성에 지정한 값을 입력한다.<br>
   * @param {Element} - 대상 노드
   * @param {String} - 속성명
   * @param {*} - 값
   * @example -
   */
  static attrBind(node, attrName, val) {
    if (Jinja.global.isDate(val)) {
      val = Jinja.i18n.timezoneFormat(val);
    }

    if (node.tagName === 'IMG' && attrName === 'img-src') {
      node.setAttribute('src', val);
    } else {
      node.setAttribute(attrName, val);
    }
  }

  /**
   * @static
   * @desc 지정한 노드의 value에 지정한 값을 입력한다.<br>
   * 노드의 유형에 따라 값을 변환하여 입력한다.
   * @param {Element} - 대상 노드
   * @param {*} - 값
   * @example -
   * JJReact.nodeBind(node, val);
   */
  static nodeBind(node, val) {
    if(node.parentElement && node.parentElement.$closest('[data-bind-group]')){
      node.parentElement.$closest('[data-bind-group]').dataBind(node, val);
    } 
    else {

      if(Array.isArray(val)){
        node.value = val;
      } 
      else {

        if (node.dataset.type == 'date') {
          node.value = new Date(val).$toFormat('yyyy-MM-dd');
        } else if (node.dataset.type == 'datetime-local') {
          node.value = new Date(val).$toFormat('yyyy-MM-ddTHH:mm:ss');
          //  } else if (node.dataset.type == 'time') {
          //    node.value = new Date(val).$toFormat('HH:mm');
        } else if (Jinja.i18n.isDate(val)) {
          node.value = val.$toFormat('yyyy-MM-dd');
        } else {
          if (node.dataset.type == 'checkbox') {
            node.checked = val == 'true' || val === true ? true : false;
          } else {
            node.value = val;
          }
        }

        JJReact.onValidate(node);
      }
    }
  }

  /**
   * @static
   * @async
   * @desc 지정한 노드의 유효성 여부를 반환한다.
   * @param {Element} - 대상 노드
   * @return {Boolean} - 유효성 여부
   * @example -
   */
  static async onValidate(el) {
    let validResult = true;
    if(el.checkValidity) el.checkValidity();
    //     if (Jinja.validate) {
    //       return await Jinja.validate.checkValidity(el);
    //     }

    //     let pattern, formGroup, helpBlock;

    //     pattern = el.getAttribute('pattern');
    //     formGroup = el.$closest('.form-group');

    //     if (formGroup) helpBlock = formGroup.querySelector('.help-block');
    //     if (!el.setCustomValidity) return;

    //     el.setCustomValidity(``);

    //     validResult = el.checkValidity();

    //     if (validResult) {
    //       if (formGroup) {
    //         formGroup.classList.remove('has-error');

    //         if (helpBlock) helpBlock.innerText = '';
    //       } else {
    //         el.classList.remove('has-error');
    //         el.dataset.validationTitle = '';
    //         el.title = '';
    //       }
    //     }

    //     if (validResult && el.value && formGroup) {
    //       formGroup.classList.add('has-success');
    //     }

    //     if (!validResult) {
    //       if (formGroup) {
    //         formGroup.classList.add('has-error');
    //         formGroup.classList.remove('has-success');
    //       } else {
    //         el.classList.add('has-error');
    //         el.classList.remove('has-success');
    //       }
    //     }

    //     if (helpBlock) {
    //       helpBlock.innerText = el.validationMessage;
    //     } else {
    //       el.dataset.validationTitle = el.validationMessage;
    //       el.title = '';
    //     }

    return validResult;
  }

  /**
   * @static
   * @desc 지정한 노드의 유효성 확인 안내메세지 설정한다.
   * @param {Element} - 대상 노드
   * @param {String} - 안내메세지
   * @return {Boolean} - 유효성 여부
   * @example -
   */
  static setCustomValidity(el, msg) {
    let pattern, formGroup, helpBlock;
    let validResult = true;

    //     formGroup = el.$closest('.form-group');

    //     if (formGroup) helpBlock = formGroup.querySelector('.help-block');

    //     el.setCustomValidity(msg);

    //     if (msg) validResult = false;
    //     else validResult = el.checkValidity();

    //     if (validResult) {
    //       if (formGroup) {
    //         formGroup.classList.remove('has-error');

    //         if (helpBlock) helpBlock.innerText = '';
    //       } else {
    //         el.classList.remove('has-error');
    //         el.dataset.validationTitle = '';
    //         el.title = '';
    //       }
    //     }

    //     if (validResult && el.value && formGroup) {
    //       formGroup.classList.add('has-success');
    //     }

    //     if (!validResult) {
    //       if (formGroup) {
    //         formGroup.classList.add('has-error');
    //         formGroup.classList.remove('has-success');
    //       } else {
    //         el.classList.add('has-error');
    //         el.classList.remove('has-success');
    //       }
    //     }

    //     if (helpBlock) {
    //       helpBlock.innerText = el.validationMessage;
    //     } else {
    //       el.dataset.validationTitle = el.validationMessage;
    //       el.title = '';
    //     }

    return validResult;
  }

  /**
   * @desc 생성자
   * @param {Element} - 대상 노드
   * @param {Object} - 옵션
   * @example -
   */
  constructor(el, options) {
    this.VERSION = '640';
    this.element = el;
    this.options = {
      data: {},
      methods: {},
      watchs: {},
      onLoad: function () {}
    };
    this.nodes = {};
    this.element.classList.add('JJReact');
    this.sysKeyword = [
      '$dataWatch',
      '$revoke',
      '$parent',
      '_index',
      '_crud_',
      '_changeData_',
      'isProxy'
    ];

    if (options === undefined || options.data === undefined) {
      throw new Jinja.exception.jjException('error.3311', '옵션값이 부족함');
    }

    this.init(options);

    this.element.addEventListener('click', e => {
      if (!Object.is(Jinja.dom.closest(e.target, '.JJReact'), this.element))
        return;

      if (Jinja.dom.closest(e.target, '[j-method]')) {
        let target = Jinja.dom.closest(e.target, '[j-method]');
        let method = target.getAttribute('j-method');

        if (!target.parentElement.classList.contains('jj-active')) {
          e.stopPropagation();
        }

        const paten = '\\w+|\\(.+\\)';
        const expReg = new RegExp(paten, 'gm');

        let metsPara = method.match(expReg);

        if (metsPara) {
          try {
            let pMethod = metsPara[0];

            if (!this.options.methods[pMethod]) return;

            let pPara = metsPara[1];

            if (pPara) {
              pPara = pPara.startsWith('(') ? pPara.substr(1, 200) : pPara;
              pPara = pPara.endsWith(')')
                ? pPara.substr(0, pPara.length - 1)
              : pPara;
            }

            const paraSpExp = new RegExp(/[a-zA-Z0-9가-힣-%#. :_()]+/, 'gm');

            if (pPara && pPara.match(paraSpExp)) {
              let paras = pPara.match(paraSpExp).map(p => {
                let ret;

                switch (p) {
                  case 'e':
                    ret = e;

                    break;
                  case 'null':
                    ret = null;

                    break;
                  default:
                    ret = p;
                }

                return ret;
              });

              if (paras.length) {
                paras.push(e);
              } else {
                paras.push(undefined);
                paras.push(e);
              }

              Reflect.apply(this.options.methods[pMethod], this.options, paras);
            } else {
              let paras = [];

              paras.push(undefined);
              paras.push(e);

              Reflect.apply(this.options.methods[pMethod], this.options, paras);
            }
          } catch (ex) {
            alert(ex);
          }
        } else {
          Reflect.apply(this.options.methods[method], this.options, [e]);
        }
      }
    });

    let methodKeys;

    methodKeys = Object.keys(this.options.methods);

    for (let i = 0; i < methodKeys.length; i++) {
      let bindMethod = this.options.methods[methodKeys[i]];

      this.options.methods[methodKeys[i]] = bindMethod.bind(this.options);
    }

    methodKeys = Object.keys(this.options.watchs);

    for (let i = 0; i < methodKeys.length; i++) {
      let bindMethod = this.options.watchs[methodKeys[i]];

      this.options.watchs[methodKeys[i]] = bindMethod.bind(this.options);
    }

    if (this.options.onLoad) {
      this.options.onLoad = this.options.onLoad.bind(this.options);
      this.options.onLoad();
    }
  }

  /**
   * @desc 클래스를 초기화 한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    Object.assign(this.options, options);

    this.options.data = options.data = new Proxy(this.options.data, {
      get: (target, key) => Reflect.apply(this.proxyGet, this, [target, key]),
      set: (target, key, val) =>
      Reflect.apply(this.proxySet, this, [target, key, val]),
      deleteProperty: (target, key) =>
      Reflect.apply(this.proxyDel, this, [target, key])
    });

    this.defineUI(this.element);
  }

  /**
   * @desc 클래스를 삭제한다.
   * @example -
   */
  destroy() {
    this.options = null;
    this.nodes = null;
  }

  /**
   * @desc 지정한 객체에 와쳐기능을 추가한다.
   * @param {Object} - 대삭 객체
   * @example -
   */
  makeDataWatch(obj) {
    if (typeof obj == 'object') {
      obj.$dataWatch = new JJDataWatch(obj, this);

      Object.defineProperty(obj, '$dataWatch', {
        enumerable: false,
        configurable: false
      });
    }
  }

  /**
   * @desc 지정한 대상의 키에 해당하는 watchDetect를 설정한다.
   * @param {*} - 대상
   * @param {String} - 키
   * @param {*} - 이전값
   * @param {*} - 현재값
   * @example -
   */
  watchDetect(target, key, old, val) {
    if (this.options.watchs[key]) {
      Reflect.apply(this.options.watchs[key], this.options, [
        target,
        key,
        old,
        val
      ]);
    }

    if (this.options.watchs['_data_']) {
      Reflect.apply(this.options.watchs['_data_'], this.options, [
        target,
        key,
        old,
        val
      ]);
    }

    let nodes = this.nodes[key];

    if (nodes) {
      nodes.forEach(item => {
        let content = this.getLiteralValue(item.literal);
        //if (item.node.value === undefined) {
        if (item.node.nodeType == 3) {
          if (item.node.textContent != content) {
            JJReact.nodeText(item.node, content);
          }
        } else {
          if (item.node.value != content) {
            JJReact.nodeBind(item.node, content, target, key);
          }
        }
      });
    }
  }

  /**
   * @desc 지정한 문자열을 리터럴정보로 변환하여 반환한다.
   * @param {String} - 문자열
   * @return {Object} - 리터럴정보
   * @example -
   */
  getLiteralMap(textContent) {
    textContent = textContent.trim();

    let result = {
      literal: textContent,
      isDataBind: false,
      dataMap: []
    };

    let firstPath = '';

    if (!textContent.trim()) return result;
    if (!textContent.includes('${')) return result;

    const expReg = new RegExp(/\${.*?}/, 'gm');

    let markExtract = textContent.match(expReg);

    if (markExtract) {
      markExtract.forEach(markExp => {
        let dataExp = markExp.replace(
          new RegExp(/[.]\w+\(|\w+\(|[.][\$]\w+\(/, 'gm'),
          ' ('
        );

        const dataReg = new RegExp(
          /[a-zA-Z가-힣_'"][a-zA-Z0-9가-힣-_\[\]]*[a-zA-Z0-9가-힣-_.'"\[\]]+/,
          'gm'
        );

        dataExp.match(dataReg).forEach((path, index) => {
          if (index === 0) firstPath = path;

          let objMatechs = path.match(
            new RegExp(
              /.+(?=\.[a-zA-Z0-9가-힣_]+$|\[\d+\]$|\[\'\+\'\]$|\[\"\\.[a-zA-Z0-9가-힣_]\"\]$)|\.[a-zA-Z0-9가-힣_]+$|\[\d+\]$|\[\'\\.[a-zA-Z0-9가-힣_]\'\]$|\[\"\w+\"\]$/,
              'gm'
            )
          );

          if (objMatechs) {
            let objPath = objMatechs[0];
            let keyReg = new RegExp(
              /[a-zA-Z0-9가-힣_]+|\.~\[a-zA-Z0-9가-힣_]+|[a-zA-Z0-9가-힣_]+\[\d+\]|[a-zA-Z0-9가-힣_]+\[\'[a-zA-Z0-9가-힣_]+\'\]|[a-zA-Z0-9가-힣_]+\[\"[a-zA-Z0-9가-힣_]+\"\]/,
              'gm'
            );
            let keyName = objMatechs[1].match(keyReg)[0];

            if (objPath != 'Jinja') {
              result.dataMap.push({
                objPath: objPath,
                key: keyName
              });
            }
          } else {
            result.dataMap.push({
              objPath: path
            });
          }
        });
      });
    }

    if (result.dataMap.length === 1) {
      result.isDataBind = result.literal == '${' + firstPath + '}';
    }

    return result;
  }

  /**
   * @desc 지정한 문자열을 리터럴바인드정보로 변환하여 반환한다.
   * @param {String} - 문자열
   * @return {Object} - 리터럴정보
   * @example -
   */
  getLiteralBindMap(textContent) {
    let result;
    let objReg = new RegExp(
      /.+(?=\.[a-zA-Z0-9가-힣_]+$|\[\d+\]$|\[\'\+\'\]$|\[\"\\.[a-zA-Z0-9가-힣_]\"\]$)|\.[a-zA-Z0-9가-힣_]+$|\[\d+\]$|\[\'\\.[a-zA-Z0-9가-힣_]\'\]$|\[\"\w+\"\]$/,
      'gm'
    );
    let objMatechs = textContent.match(objReg);

    if (objMatechs) {
      let objPath = objMatechs[0];
      let keyReg = new RegExp(
        /[a-zA-Z0-9가-힣_]+|\.~\[a-zA-Z0-9가-힣_]+|[a-zA-Z0-9가-힣_]+\[\d+\]|[a-zA-Z0-9가-힣_]+\[\'[a-zA-Z0-9가-힣_]+\'\]|[a-zA-Z0-9가-힣_]+\[\"[a-zA-Z0-9가-힣_]+\"\]/,
        'gm'
      );
      let keyName = objMatechs[1].match(keyReg)[0];

      result = {
        literal: '${' + textContent + '}',
        isDataBind: true,
        dataMap: [{ objPath: objPath, key: keyName }]
      };
    }

    return result;
  }

  /**
   * @desc 지정한 리터럴정보에서 리터럴값을 추출하여 반환한다.
   * @param {Object} - 리터럴정보
   * @return {String} - 리터럴값
   * @example -
   */
  getLiteralValue(data) {
    let result = '';

    if(data.bindArray && data.bindArray.length > 1){
      result = [];
      data.bindArray.forEach(arrData =>{
        result.push(new Function('data', 'return ' + '`' + arrData.literal + '`')(
          this.options.data
        ));

      })

    } else {
      try {
        result = new Function('data', 'return ' + '`' + data.literal + '`')(
          this.options.data
        );
      } catch (ex) {}
      if (result == 'undefined') {
        result = '';
      }

    }




    return Jinja.global.nullSpace(result);
  }

  /**
   * @desc 지정한 객체에 원본 객체의 데이터를 복사한다.
   * @param {Object} - 대상 객체
   * @param {Object} - 원본 객체
   * @example -
   */
  objectAssign(to, from) {
    if (to === null || to === undefined) return;
    if (!to.$dataWatch) this.makeDataWatch(to);
    if (Array.isArray(to) && Array.isArray(from)) {
      to.$dataWatch.dataObj.reset(from);

      return;
    }
    if (!from.$dataWatch) this.makeDataWatch(from);

    let oldData = {};

    for (let key in to) {
      oldData[key] = to[key];
    }

    this.objectClean(to);

    let fData;

    for (let key in from) {
      fData = from[key];

      if (this.sysKeyword.includes(key)) {
        to[key] = fData;
      } else if (fData && typeof fData == 'object') {
        if (!to.hasOwnProperty(key)) {
          if (Array.isArray(fData)) to[key] = [];
          else to[key] = {};
        }

        this.objectAssign(to[key], fData);
      } else {
        to[key] = from[key];
      }
    }

    for (let key in from) {
      if (!this.sysKeyword.includes(key)) {
        to.$dataWatch.nodeChange(key, oldData[key], from[key], true);
      }
    }

    if (from.$dataWatch) {
      from.$dataWatch.addChildDataWatch(to.$dataWatch);
    }
  }

  /**
   * @desc 지정한 객체의 데이터를 삭제한다.
   * @param {Object} - 대상 객체
   * @example -
   */
  objectClean(obj) {
    if (!obj) return;
    if (!obj.$dataWatch) this.makeDataWatch(obj);
    if (obj.$dataWatch.parentDataWatch) {
      obj.$dataWatch.parentDataWatch.removeChildDataWatch(obj.$dataWatch);
    }

    if (Array.isArray(obj)) {
      obj.splice(0, obj.length);
    } else {
      for (let i in obj) {
        if (this.sysKeyword.includes(i)) {
          obj[i] = '_changeData_' == i ? {} : null;
        } else {
          let data = obj[i];

          if (typeof data == 'object') {
            this.objectClean(data);
          } else {
            let old = obj[i];

            obj[i] = null;
          }
        }
      }
    }
  }

  /**
   * @desc 지정한 키의 노드정보를 설정한다.
   * @param {String} - 키
   * @param {Object} - 노드정보
   * @param {*} - 리터럴값
   * @example -
   */
  setNode(key, node, literal) {
    let item = { node: node, literal: literal };
    let items = this.nodes[key];

    if (items && items.length) {
      if (items.some(item => item.node == node)) {
      } else {
        items.push(item);
      }
    } else {
      this.nodes[key] = [item];
    }
  }

  /**
   * @desc 지정한 키에 해당하는 노드 데이터를 삭제한다.
   * @param {String} - 키
   * @example -
   */
  clearNode(key) {
    let items = this.nodes[key];

    if (items && items.length) {
      this.nodes[key] = [];
    }
  }

  /**
   * @desc 지정한 노드를 바인딩 처리한다.
   * @param {Element} - 대상 노드
   * @example -
   */
  defineUI(el) {
    let loopEl = el.querySelector('[j-for]');

    while (loopEl) {
      new JJArrayLoop({
        el: loopEl,
        react: this
      });

      loopEl = el.querySelector('[j-for]');
    }

    this.defineUIForm(el);
  }

  /**
   * @desc 지정한 노드에서 바인딩할 내용을 추출하여 바인딩한다.
   * @param {Element} - 대상 노드
   * @example -
   */
  defineUIForm(node) {
    if (['STYLE', 'SCRIPT'].includes(node.tagName)) return;

    if (node.nodeType == 3 && node.textContent.trim()) {
      let d = this.getLiteralMap(node.textContent.trim());

      if (d.dataMap.length) {
        d.dataMap.forEach(pathInfo => {
          let dataObj, objPath = pathInfo.objPath, key = pathInfo.key;

          this.setNode(key, node, d);

          try {
            dataObj = new Function('data', 'return ' + objPath)(
              this.options.data
            );

            if (dataObj.$dataWatch) {
              dataObj.$dataWatch.setNodeText(key, node, d);
            }
          } catch (ex) {
            console.info(
              `객체가 생성되지 않은 ${node.textContent} 참조입니다.`
            );
          }
        });

        let content = this.getLiteralValue(d);

        JJReact.nodeText(node, content || node.textContent);
      }
    } else if (node.nodeType == 1) {
      if (node.hasAttributes()) {
        let attrs = node.attributes;

        for (let i = attrs.length - 1; i >= 0; i--) {
          let attrName = attrs[i].name;
          let attrValue = attrs[i].value;

          if (attrName == 'data-bind' && attrValue) {
            //             let d = this.getLiteralBindMap(attrValue);
            //             if(attrValue.split(",").length > 1){
            //               d = attrValue.split(",").map(attrVal=>this.getLiteralBindMap(attrVal))
            //             }

            let  dArr = attrValue.split(",").map(attrVal=>this.getLiteralBindMap(attrVal));

            dArr.forEach(d=>{
              d.bindArray = dArr;
              if (d.dataMap.length) {

                //if (node.value === undefined) {
                if (node.nodeType == 3) {

                  d.dataMap.forEach(pathInfo => {
                    let dataObj, objPath = pathInfo.objPath, key = pathInfo.key;

                    dataObj = new Function('data', 'return ' + objPath)(
                      this.options.data
                    );

                    try {
                      dataObj.$dataWatch.setNodeText(key, node, d);
                    } catch (ex) {
                      console.info(
                        `객체가 생성되지 않은 ${attrValue} 참조입니다.`
                      );
                    }
                  });

                  //let content = this.getLiteralValue(d);

                  //JJReact.nodeText(node, content);
                } 
                else {
                  d.dataMap.forEach(pathInfo => {
                    let dataObj, objPath = pathInfo.objPath, key = pathInfo.key;

                    dataObj = new Function('data', 'return ' + objPath)(
                      this.options.data
                    );

                    try {
                      dataObj.$dataWatch.setNodeBind(key, node, d);
                    } catch (ex) {
                      console.info(
                        `객체가 생성되지 않은 ${attrValue} 참조입니다.`
                      );
                    }
                  });

                  //let content = this.getLiteralValue(d);

                  //JJReact.nodeBind(node, content);
                  //JJReact.nodeBind(item.node, content, target, key);
                }
              }

              node.removeAttribute('data-bind');              
            })

          } 
          else if (attrValue) {
            let d = this.getLiteralMap(attrValue);

            if (d.dataMap.length) {
              d.dataMap.forEach(pathInfo => {
                let dataObj, objPath = pathInfo.objPath, key = pathInfo.key;

                dataObj = new Function('data', 'return ' + objPath)(
                  this.options.data
                );

                try {
                  dataObj.$dataWatch.setNodeAttr(key, node, attrName, d);
                } catch (ex) {
                  console.info(`객체가 생성되지 않은 ${attrValue} 참조입니다.`);
                }
              });

              let content = this.getLiteralValue(d);

              JJReact.attrBind(node, attrName, content);
            }
          }
        }
      }

      if (node.hasChildNodes()) {
        let children = node.childNodes;

        for (let i = 0; i < children.length; i++) {
          this.defineUIForm(children[i]);
        }
      }
    }
  }

  /**
   * @desc 지정한 노드의 키에 해당하는 노드의 문자열정보를 바인딩한다.(수작업용)
   * @param {Element} - 대상 노드
   * @param {String} - 키
   * @param {Object} - 노드
   * @param {Object} - 문자열 정보
   * @example -
   */
  setNodeText(target, key, node, literalMap) {
    if (target) {
      if (!target.$dataWatch) {
        this.makeDataWatch(target);
      }

      target.$dataWatch.setNodeText(key, node, literalMap);
    }
  }

  /**
   * @desc 지정한 노드의 키에 해당하는 노드의 속성정보를 바인딩한다.(수작업용)
   * @param {Elelment} - 대상 노드
   * @param {String} - 키
   * @param {Object} - 노드
   * @param {String} - 속성명
   * @param {Object} - 속성값 정보
   * @example -
   */
  setNodeAttr(target, key, node, attrName, literalMap) {
    if (target) {
      if (!target.$dataWatch) {
        this.makeDataWatch(target);
      }

      target.$dataWatch.setNodeAttr(key, node, literalMap);
    }
  }

  /**
   * @desc 지정한 노드의 키에 해당하는 노드의 바인드정보를 바인딩한다.(수작업용)
   * @param {Elelment} - 대상 노드
   * @param {String} - 키
   * @param {Object} - 노드
   * @param {Object} - 속성값 정보
   * @example -
   */
  setNodeBind(target, key, node, literalMap) {
    if (target) {
      if (!target.$dataWatch) {
        this.makeDataWatch(target);
      }

      target.$dataWatch.setNodeBind(key, node, literalMap);
    }
  }

  /**
   * @desc 지정한 노드의 키에 해당하는 노드 데이터를 삭제한다.
   * @param {Element} - 대상 노드
   * @param {String} - 키
   * @example -
   */
  XXclearNode(target, key) {
    if (!target.$dataWatch) {
      this.makeDataWatch(target);
    } else {
      target.$dataWatch.clearNode(key);
    }
  }

  /**
   * @desc 지정한 대상의 키에 해당하는 프록시 값을 반환한다.
   * @param {*} - 대상
   * @param {String} - 키
   * @return {*} - 프록시 값
   * @example -
   */
  proxyGet(target, key) {
    if (this.sysKeyword.includes(key)) {
      if (key == '$dataWatch' && !target.$dataWatch) {
        this.makeDataWatch(
          new Proxy(target, {
            get: (target, key) =>
            Reflect.apply(this.proxyGet, this, [target, key]),
            set: (target, key, val) =>
            Reflect.apply(this.proxySet, this, [target, key, val]),
            deleteProperty: (target, key) =>
            Reflect.apply(this.proxyDel, this, [target, key])
          })
        );
      }

      switch (key) {
        case '_changeData_':
        case '_crud_':
        case '$dataWatch':
        case '$parent':
          return target[key];
        case '$revoke':
          return target;
        case '$value':
          return target;
        case '$index':
          return target.$parent.indexOf(target);
        case '_index':
          return target.$parent.indexOf(target);
        case 'isProxy':
          return true;
      }
    }

    if (target[key] instanceof Date) return target[key];

    if (typeof target[key] === 'object' && target[key] !== null) {
      return new Proxy(target[key], {
        get: (target, key) => Reflect.apply(this.proxyGet, this, [target, key]),
        set: (target, key, val) =>
        Reflect.apply(this.proxySet, this, [target, key, val]),
        deleteProperty: (target, key) =>
        Reflect.apply(this.proxyDel, this, [target, key])
      });
    } else {
      return target[key];
    }
  }

  /**
   * @desc 지정한 대상의 키에 해당하는 프록시 값을 설정한다.
   * @param {*} - 대상
   * @param {String} - 키
   * @param {*} - 값
   * @return {Boolean} - 성공여부
   * @example -
   */
  proxySet(target, key, val) {
    let isNewKey = !target.hasOwnProperty(key);

    if (this.sysKeyword.includes(key)) {
      if (key == '_crud_' && val == 'R' && target.$dataWatch) {
        target.$dataWatch.clearCRUD();
      } else {
        target[key] = val;
      }
      return true;
    }

    target = target.$revoke || target;

    if (val) val = val.$revoke || val;
    if (Array.isArray(target)) key = parseInt(key);

    let old = target[key];

    if (typeof old == 'object') {
      if (old && !old.$dataWatch) {
        let porxyed = Reflect.apply(this.proxyGet, this, [target, key]);

        old.$dataWatch = new JJDataWatch(porxyed, this);

        Object.defineProperty(old, '$dataWatch', {
          enumerable: false,
          configurable: false
        });
      }

      if (!val) {
        if (Array.isArray(old)) val = [];
        else val = {};
      }
    }

    if (!target.$dataWatch) {
      this.makeDataWatch(target);
    }

    if (
      !Jinja.global.isDate(val) &&
      val &&
      typeof old == 'object' &&
      typeof val == 'object'
    ) {
      this.objectAssign(old, val);
    } else {
      target[key] = val;

      if (isNewKey && target.$dataWatch && typeof val == 'object') {
        target.$dataWatch.newKey(key);
      }

      target.$dataWatch.change(key, old, val);
    }

    this.watchDetect(target, key, old, val);

    return true;
  }

  /**
   * @desc 지정한 대상의 키에 해당하는 프록시 값을 삭제한다.
   * @param {*} - 대상
   * @param {String} - 키
   * @return {Boolean} - 성공여부
   * @example -
   */
  proxyDel(target, key) {
    if (target.$dataWatch) {
      target.$dataWatch.removeKey(key);
    }

    return true;
  }

  /**
   * @desc 지정한 데이터 객체의 이전 데이터로 이동한다.
   * @param {Object} - 대상 데이터 객체
   * @example -
   */
  prev(dataObj) {
    dataObj.$dataWatch.arrayLoops.forEach(loop => {
      loop.prev();
    });
  }

  /**
   * @desc 지정한 데이터 객체의 다음 데이터로 이동한다.
   * @param {Object} - 대상 데이터 객체
   * @example -
   */
  next(dataObj) {
    dataObj.$dataWatch.arrayLoops.forEach(loop => {
      loop.next();
    });
  }

  /**
   * @desc 지정한 데이터 객체의 이전 페이지로 이동한다.
   * @param {Object} - 대상 데이터 객체
   * @example -
   */
  prevPage(dataObj) {
    dataObj.$dataWatch.arrayLoops.forEach(loop => {
      loop.prevPage();
    });
  }

  /**
   * @desc 지정한 데이터 객체의 다음 페이지로 이동한다.
   * @param {Object} - 대상 데이터 객체
   * @example -
   */
  nextPage(dataObj) {
    dataObj.$dataWatch.arrayLoops.forEach(loop => {
      loop.nextPage();
    });
  }

  /**
   * @desc 지정한 데이터 객체의 지정한 페이지로 이동한다.
   * @param {Object} - 대상 데이터 객체
   * @param {Number} - 페이지번호
   * @example -
   */
  gotoPage(dataObj, pageNum) {
    dataObj.$dataWatch.arrayLoops.forEach(loop => {
      loop.gotoPage(pageNum);
    });
  }

  /**
   * @desc 지정한 데이터 객체의 마지막 페이지로 이동한다.
   * @param {Object} - 대상 데이터 객체
   * @example -
   */
  gotoEnd(dataObj) {
    dataObj.$dataWatch.arrayLoops.forEach(loop => {
      loop.gotoEnd();
    });
  }
}

/**
 * @classdesc JJDataWatch 관리를 위한 클래스
 */
class JJDataWatch {
  /**
   * @desc 생성자
   * @param {Object} - 데이터 객체
   * @param {Class} - React 클래스
   * @example -
   */
  constructor(dataObject, react) {
    this.VERSION = '640';
    this.guid = Jinja.global.uuid();
    this.react = react;
    this.reactData = react.options.data;
    this.dataObj = dataObject;
    this.nodes = {};
    this.parentDataWatch = null;
    this.childDataWatchs = [];
    this.arrayLoops = [];

    this.init();
  }

  /**
   * @desc 클래스를 초기화 한다.
   * @example -
   */
  init() {
    if (Array.isArray(this.dataObj)) {
      let objArray = this.dataObj.$revoke || this.dataObj;

      objArray.push = (addData, callWatch) => {
        if (typeof addData == 'object') addData = Object.assign({}, addData);

        let arrLength = Array.prototype.constructor.prototype.push.call(
          objArray,
          addData
        );

        this.arrayLoops.forEach(loop => {
          loop.push(arrLength - 1);
        });

        if (this.parentDataWatch) {
          if (callWatch != this.parentDataWatch) {
            this.parentDataWatch.dataObj.push(addData, this);
          }
        }

        if (this.childDataWatchs.length)
          this.childDataWatchs.forEach($dataWatch => {
            if ($dataWatch != callWatch) {
              $dataWatch.dataObj.push(addData, this);
            }
          });

        this.react.watchDetect(
          this.dataObj,
          'length',
          null,
          this.dataObj.length
        );

        return arrLength || jarray.length - 1;
      };
      Object.defineProperty(objArray, 'push', {
        enumerable: false,
        configurable: false
      });

      objArray.removeIndex = index => {
        return objArray.splice(index, length || 1);
      };
      Object.defineProperty(objArray, 'removeIndex', {
        enumerable: false,
        configurable: false
      });

      objArray.splice = (start, length, addData, callWatch) => {
        if (typeof start == 'string') start = parseInt(start);
        if (typeof length == 'string') length = parseInt(length);

        let deleteItem;

        if (length === undefined) length = 1;

        if (addData) {
          if (length === 1) {
            objArray.$dataWatch.dataObj[start] = addData;
          } else {
            let lastRow = Object.assign({}, objArray[objArray.length - 1]);

            deleteItem = Array.prototype.constructor.prototype.splice.call(
              objArray,
              start,
              length,
              addData
            );

            this.arrayLoops.forEach(loop => {
              loop.domBuild(0);
            });

            const rowsLength = this.dataObj.length;

            for (let i = start; i < rowsLength; i++) {
              if (this.dataObj[i].$dataWatch) {
                this.dataObj[i].$dataWatch.reIndex(i);
              }
            }
          }
        } else {
          deleteItem = Array.prototype.constructor.prototype.splice.call(
            objArray,
            start,
            length
          );

          if (deleteItem.length) {
            this.arrayLoops.forEach(loop => {
              loop.splice(start, length);
            });

            const rowsLength = this.dataObj.length;

            for (let i = start; i < rowsLength; i++) {
              if (this.dataObj[i].$dataWatch) {
                this.dataObj[i].$dataWatch.reIndex(i);
              }
            }
          }
        }

        if (this.parentDataWatch) {
          if (callWatch != this.parentDataWatch) {
            this.parentDataWatch.dataObj.splice(start, length, addData, this);
          }
        }

        if (this.childDataWatchs.length)
          this.childDataWatchs.forEach($dataWatch => {
            if ($dataWatch != callWatch) {
              $dataWatch.dataObj.splice(start, length, addData, this);
            }
          });

        this.react.watchDetect(
          this.dataObj,
          'length',
          null,
          this.dataObj.length
        );

        return deleteItem;
      };
      Object.defineProperty(objArray, 'splice', {
        enumerable: false,
        configurable: false
      });

      objArray.reset = addData => {
        if (!Array.isArray(addData)) {
          alert('ARRAY타입에 잘못된 타입이 할당되었습니다.');

          return;
        } else {
          objArray.splice(0, objArray.length);

          addData.forEach((row, index, array) => {
            Array.prototype.constructor.prototype.push.call(objArray, row);
          });

          this.arrayLoops.forEach(loop => {
            loop.reset(0);
          });
        }

        this.react.watchDetect(
          this.dataObj,
          'length',
          null,
          this.dataObj.length
        );
      };
      Object.defineProperty(objArray, 'reset', {
        enumerable: false,
        configurable: false
      });

      objArray.move = (from, to) => {
        let so = Object.assign({}, objArray[from]);

        objArray.splice(from, 1);
        objArray.splice(to, 0, so);
      };
      Object.defineProperty(objArray, 'move', {
        enumerable: false,
        configurable: false
      });

      objArray.multiSort = keys => {
        let rows = Jinja.global.json(Jinja.global.string(objArray));

        rows = Jinja.json.sortRows(rows, keys);

        objArray.reset(rows);
      };
      Object.defineProperty(objArray, 'multiSort', {
        enumerable: false,
        configurable: false
      });

      objArray.setCRUD = (rows, callWatch) => {
        return objArray.reset(Jinja.global.setCRUD(rows));
      };

      Object.defineProperty(objArray, 'setCRUD', {
        enumerable: false,
        configurable: false
      });

      objArray.pushCRUD = (addData, callWatch) => {

        addData = Object.assign(addData, {
          _crud_: 'C',
          _rno_: objArray.length,
          _changeData_: {}
        });

        return objArray.push(addData, callWatch);
      };
      Object.defineProperty(objArray, 'pushCRUD', {
        enumerable: false,
        configurable: false
      });

      objArray.deleteCRUD = ()=>{
        for(let i= objArray.length-1; i>=0; i--){
          let row = objArray[i];
          if(row._select_){
            // 처리후 체크표시 제거여부 판단
            switch(row._crud_){
              case "C":
                objArray.removeIndex(i);
                break;
              case "D":
                if(Object.keys(row._changeData_).length){
                  objArray[i]._crud_ = "U";  
                } else {
                  objArray[i]._crud_ = "R";  
                }
                break;
              default:
                objArray[i]._crud_ = "D";
                break;
            }
          }
        }
      }
      Object.defineProperty(objArray, 'deleteCRUD', {
        enumerable: false,
        configurable: false
      });

      objArray.changeCRUD = (table,keyField)=>{
        let sendData = [];
        objArray.forEach(item=>{
          let row = {
            "table": table, 
            "keyField": keyField,
            "keyValue": item[keyField],
            "crud": item._crud_,
            "field": {}
          };

          switch(item._crud_){
            case "U":
              Object.keys(item._changeData_).forEach(col=>{
                if (!col.startsWith("_")){
                  row.field[col] = item._changeData_[col].val;
                }
              })    
              break;
            case "C":
              Object.keys(item).forEach(col=>{
                if (!col.startsWith("_")){
                  row.field[col] = item[col];
                }
              })    
              break;
            default: break;
          }

          sendData.push(row);
        })

        return sendData;
      }
      Object.defineProperty(objArray, 'changeCRUD', {
        enumerable: false,
        configurable: false
      });

      objArray.max = (key, addnum)=>{
        let max = addnum;
        if(objArray.length){
          max = Math.max.apply(null, objArray.map(item=>item[key]))||0;
          if(addnum) max += addnum;
        }
        return max
      }
      Object.defineProperty(objArray, 'max', {
        enumerable: false,
        configurable: false
      });

      objArray.min = (key, addnum)=>{
        let min = addnum;
        if(objArray.length){
          let min = Math.min.apply(null, objArray.map(item=>item[key]))||0;
          if(addnum) min += addnum;
        }
        return min
      }
      Object.defineProperty(objArray, 'min', {
        enumerable: false,
        configurable: false
      });

    }
  }

  /**
   * @desc 지정한 키에 해당하는 노드의 문자열정보를 바인딩한다.
   * @param {String} - 키
   * @param {Object} - 노드
   * @param {Object} - 문자열 정보
   * @example -
   */
  setNodeText(key, node, literalMap) {
    let item = { node: node, nodeType: 1 };

    if (literalMap) item.literalMap = Object.assign({}, literalMap);

    let items = this.nodes[key];

    if (items && items.length) {
      if (items.some(item => item.node == node)) {
      } else {
        items.push(item);
      }
    } else {
      this.nodes[key] = [item];
    }

    if (item.literalMap) {
      if (key == '_index') {
        JJReact.nodeText(
          item.node,
          this.getLiteralValue(item.literalMap, item.literalMap.index)
        );
      } else {
        JJReact.nodeText(
          item.node,
          this.getLiteralValue(item.literalMap, this.dataObj[key])
        );
      }
    } else {
      JJReact.nodeText(item.node, this.dataObj[key]);
    }

    if (this.react && key != '_index') {
      this.react.watchDetect(this.dataObj, key, '', this.dataObj[key]);
    }
  }

  /**
   * @desc 지정한 키에 해당하는 노드 속성값을 바인딩한다.
   * @param {String} - 키
   * @param {Object} - 노드
   * @param {String} - 속성명
   * @param {Object} - 속성값 정보
   * @example -
   */
  setNodeAttr(key, node, attrName, literalMap) {
    let item = { node: node, nodeType: 2, attrName: attrName };

    if (literalMap) item.literalMap = Object.assign({}, literalMap);

    let items = this.nodes[key];

    if (items && items.length) {
      if (items.some(item => item.node == node && item.attrName == attrName)) {
      } else {
        items.push(item);
      }
    } else {
      this.nodes[key] = [item];
    }

    if (item.literalMap) {
      if (key == '_index') {
        JJReact.attrBind(
          item.node,
          item.attrName,
          this.getLiteralValue(item.literalMap, item.literalMap.index)
        );
      } else {
        JJReact.attrBind(
          item.node,
          item.attrName,
          this.getLiteralValue(item.literalMap, this.dataObj[key])
        );
      }
    } else {
      JJReact.attrBind(item.node, item.attrName, this.dataObj[key]);
    }
  }

  /**
   * @desc 지정한 키에 해당하는 노드의 바인드정보를 바인딩한다.
   * @param {Elelment} - 대상 노드
   * @param {String} - 키
   * @param {Object} - 노드
   * @param {Object} - 속성값 정보
   * @example -
   */
  setNodeBind(key, node, literalMap) {
    let item = { node: node, nodeType: 3, literalMap: literalMap };
    let items = this.nodes[key];

    if (items && items.length) {
      if (items.some(item => item.node == node)) {
      }
      else {
        items.push(item);

        node.addEventListener('input', e => {

          if (!JJReact.onValidate(e.target)) return;
          let old = this.dataObj[key];
          e.target._changeEl = true;

          let inputValue;
          if(node.parentElement && node.parentElement.$closest('[data-bind-group]')){
            inputValue = node.parentElement.$closest('[data-bind-group]').dataBindGet(node);
            this.dataObj[key] = inputValue;
            e.target._changeEl = false;
          } 
          else {
            inputValue = e.target.value;
            if(inputValue instanceof Promise){
              inputValue.then(value=>{
                this.dataObj[key] = value;
                e.target._changeEl = false;
              })
            } 
            else {

              if (typeof this.dataObj[key] == 'number') {
                if (inputValue === '') {
                  this.dataObj[key] = null;
                } else if (Number.isInteger(item.node.value||inputValue)) {
                  this.dataObj[key] = parseInt(item.node.value||inputValue);
                } else {
                  this.dataObj[key] = parseFloat(item.node.value||inputValue);
                }
              } else if (item.node.dataset.type == 'checkbox') {
                this.dataObj[key] = item.node.value||e.target.checked;
              } else if (item.node.dataset.type == 'date') {
                this.dataObj[key] = item.node.value||new Date(inputValue);
              } else if (item.node.dataset.type == 'datetime-local') {
                this.dataObj[key] = item.node.value||new Date(inputValue);
              } else if (['number', 'range'].includes(item.node.dataset.type)) {
                if (inputValue === '') {
                  this.dataObj[key] = null;
                } else if (Number.isInteger(item.node.value||inputValue)) {
                  this.dataObj[key] = parseInt(item.node.value||inputValue);
                } else {
                  this.dataObj[key] = parseFloat(item.node.value||inputValue);
                }
              } else {
                this.dataObj[key] = item.node.value||inputValue;
              }

              e.target._changeEl = false;
            }
          }
        }); /* input end */

      }
    } 
    else {
      this.nodes[key] = [item];

      node.addEventListener('input', e => {
        if (!JJReact.onValidate(e.target)) return;
        let old = this.dataObj[key];
        e.target._changeEl = true;

        let inputValue;
        if(node.parentElement && node.parentElement.$closest('[data-bind-group]')){
          inputValue = node.parentElement.$closest('[data-bind-group]').dataBindGet(node);
          this.dataObj[key] = inputValue;
          e.target._changeEl = false;
        } 
        else {
          inputValue = e.target.value;
          if(inputValue instanceof Promise){
            inputValue.then(value=>{
              this.dataObj[key] = value;
              e.target._changeEl = false;
            })
          } 
          else {

            if (typeof this.dataObj[key] == 'number') {
              if (inputValue === '') {
                this.dataObj[key] = null;
              } else if (Number.isInteger(item.node.value||inputValue)) {
                this.dataObj[key] = parseInt(item.node.value||inputValue);
              } else {
                this.dataObj[key] = parseFloat(item.node.value||inputValue);
              }
            } else if (item.node.dataset.type == 'checkbox') {
              this.dataObj[key] = item.node.value||e.target.checked;
            } else if (item.node.dataset.type == 'date') {
              this.dataObj[key] = item.node.value||new Date(inputValue);
            } else if (item.node.dataset.type == 'datetime-local') {
              this.dataObj[key] = item.node.value||new Date(inputValue);
            } else if (['number', 'range'].includes(item.node.dataset.type)) {
              if (inputValue === '') {
                this.dataObj[key] = null;
              } else if (Number.isInteger(item.node.value||inputValue)) {
                this.dataObj[key] = parseInt(item.node.value||inputValue);
              } else {
                this.dataObj[key] = parseFloat(item.node.value||inputValue);
              }
            } else {
              this.dataObj[key] = item.node.value||inputValue;
            }

            e.target._changeEl = false;
          }
        }
      }); /* input end */

      //         
      //         if (!JJReact.onValidate(e.target)) return;

      //         let value;
      //         if(node.parentElement && node.parentElement.$closest('[data-bind-group]')){
      //           value = node.parentElement.$closest('[data-bind-group]').dataBindGet(node);
      //         } 


      //         let old = this.dataObj[key];

      //         e.target._changeEl = true;

      //         if(e.target.value instanceof Promise){
      //           e.target.value.then(value=>{
      //             this.dataObj[key] = value;
      //             e.target._changeEl = false;
      //           })
      //         } 
      //         else {?

      //           if (typeof this.dataObj[key] == 'number') {
      //             if (e.target.value === '') {
      //               this.dataObj[key] = null;
      //             } else if (Number.isInteger(e.target.value)) {
      //               this.dataObj[key] = parseInt(e.target.value);
      //             } else {
      //               this.dataObj[key] = parseFloat(e.target.value);
      //             }
      //           } else if (item.node.dataset.type == 'checkbox') {
      //             this.dataObj[key] = item.node.value|| e.target.checked;
      //           } else if (item.node.dataset.type == 'date') {
      //             this.dataObj[key] = item.node.value|| new Date(e.target.value);
      //           } else if (item.node.dataset.type == 'datetime-local') {
      //             this.dataObj[key] = item.node.value|| new Date(e.target.value);
      //           } else if (['number', 'range'].includes(item.node.dataset.type)) {
      //             if (e.target.value === '') {
      //               this.dataObj[key] = null;
      //             } else if (Number.isInteger(item.node.value|| e.target.value)) {
      //               this.dataObj[key] = parseInt(item.node.value|| e.target.value);
      //             } else {
      //               this.dataObj[key] = parseFloat(item.node.value||e.target.value);
      //             }
      //           } else {
      //             let value = item.node.value||e.target.value;

      //             this.dataObj[key] = value;
      //           }

      //           e.target._changeEl = false;
      //         }

      //         e.target._changeEl = false;
      //       });
    }

    let value;

    if (item.literalMap) {
      if (key == '_index') {
        value = this.getLiteralValue(item.literalMap, item.literalMap.index);
      } else {
        value = this.getLiteralValue(item.literalMap, this.dataObj[key]);
      }
    } else {
      value = this.dataObj[key];
    }

    if (item.node.type == 'checkbox') {
      node.checked = value;
    } else {
      JJReact.nodeBind(node, value);
    }

    if (this.react && key != '_index') {
      this.react.watchDetect(this.dataObj, key, '', this.dataObj[key]);
    }
  }



  setNodeBind2(key, node, literalMap) {
    let item = { node: node, nodeType: 3, literalMap: literalMap };
    let items = this.nodes[key];

    if (items && items.length) {
      if (items.some(item => item.node == node)) {
      }
      else {
        items.push(item);

        node.addEventListener('input', e => {
          if (!JJReact.onValidate(e.target)) return;

          let old = this.dataObj[key];

          e.target._changeEl = true;

          if (typeof this.dataObj[key] == 'number') {
            if (e.target.value === '') {
              this.dataObj[key] = null;
            } else if (Number.isInteger(e.target.value)) {
              this.dataObj[key] = parseInt(e.target.value);
            } else {
              this.dataObj[key] = parseFloat(e.target.value);
            }
          } else if (item.node.type == 'checkbox') {
            this.dataObj[key] = e.target.checked;
          } else if (item.node.type == 'date') {
            this.dataObj[key] = new Date(e.target.value);
          } else if (item.node.type == 'datetime-local') {
            this.dataObj[key] = new Date(e.target.value);
          } else if (['number', 'range'].includes(item.node.type)) {
            if (e.target.value === '') {
              this.dataObj[key] = null;
            } else if (Number.isInteger(e.target.value)) {
              this.dataObj[key] = parseInt(e.target.value);
            } else {
              this.dataObj[key] = parseFloat(e.target.value);
            }
          } else {
            let value = e.target.value;

            this.dataObj[key] = value;
          }

          e.target._changeEl = false;




        });
      }
    } 
    else {
      this.nodes[key] = [item];

      node.addEventListener('input', e => {
        if (!JJReact.onValidate(e.target)) return;

        let old = this.dataObj[key];

        e.target._changeEl = true;

        if (typeof this.dataObj[key] == 'number') {
          if (e.target.value === '') {
            this.dataObj[key] = null;
          } else if (Number.isInteger(e.target.value)) {
            this.dataObj[key] = parseInt(e.target.value);
          } else {
            this.dataObj[key] = parseFloat(e.target.value);
          }
        } else if (item.node.type == 'checkbox') {
          this.dataObj[key] = e.target.checked;
        } else if (item.node.type == 'date') {
          this.dataObj[key] = new Date(e.target.value);
        } else if (item.node.type == 'datetime-local') {
          this.dataObj[key] = new Date(e.target.value);
        } else if (['number', 'range'].includes(item.node.type)) {
          if (e.target.value === '') {
            this.dataObj[key] = null;
          } else if (Number.isInteger(e.target.value)) {
            this.dataObj[key] = parseInt(e.target.value);
          } else {
            this.dataObj[key] = parseFloat(e.target.value);
          }
        } else {
          let value = e.target.value;

          this.dataObj[key] = value;
        }

        e.target._changeEl = false;
      });
    }

    let value;

    if (item.literalMap) {
      if (key == '_index') {
        value = this.getLiteralValue(item.literalMap, item.literalMap.index);
      } else {
        value = this.getLiteralValue(item.literalMap, this.dataObj[key]);
      }
    } else {
      value = this.dataObj[key];
    }

    if (item.node.type == 'checkbox') {
      node.checked = value;
    } else {
      JJReact.nodeBind(node, value);
    }

    if (this.react && key != '_index') {
      this.react.watchDetect(this.dataObj, key, '', this.dataObj[key]);
    }
  }

  /**
   * @desc 지정한 키에 해당하는 노드의 값을 변경한다.
   * @param {String} - 키
   * @param {*} - 이전값
   * @param {*} - 이후값
   * @example -
   */
  change(key, old, val) {
    if (old === val) return;

    this.nodeChange(key, old, val);

    if (this.parentDataWatch)
      this.parentDataWatch.parentChange(key, old, val, this);

    if (this.childDataWatchs.length)
      this.childDataWatchs.forEach($dataWatch => {
        if ($dataWatch != this) {
          $dataWatch.childsChange(key, old, val);
        }
      });
  }

  /**
   * @desc 지정한 키에 해당하는 노드의 값을 변경한다.
   * @param {String} - 키
   * @param {*} - 이전값
   * @param {*} - 이후값
   * @param {Boolean} - 데이터 입력 여부
   * @example -
   */
  nodeChange(key, old, val, isSetData) {
    if (old === val) return;

    let target = this.dataObj.$revoke || this.dataObj;

    target[key] = val;

    if (
      target.hasOwnProperty('_crud_') &&
      ['R', 'U'].includes(target['_crud_']) &&
      key.substr(0, 1) != '_'
    ) {
      if (isSetData) {
      } else {
        if (target['_changeData_'][key])
          target['_changeData_'][key]['val'] = val;
        else {
          target['_changeData_'][key] = {
            old: old,
            val: val
          };
        }

        if (
          target['_changeData_'][key].old == target['_changeData_'][key].val
        ) {
          delete target['_changeData_'][key];
        }

        target['_crud_'] = Object.keys(target['_changeData_']).length
          ? 'U'
        : 'R';
      }

      this.nodeChange('_crud_', null, target['_crud_']);
    }

    let items = this.nodes[key];

    if (items && items.length) {
      items.forEach(item => {
        if (item.literalMap && key == '_index') {
          item.literalMap.index = val;
        }

        switch (item.nodeType) {
          case 1: {
            if (item.literalMap) {
              JJReact.nodeText(
                item.node,
                this.getLiteralValue(item.literalMap, val)
              );
            } else {
              JJReact.nodeText(item.node, val);
            }

            break;
          }
          case 2: {
            if (item.literalMap) {
              let litval = this.getLiteralValue(item.literalMap, val);

              JJReact.attrBind(item.node, item.attrName, litval);
            } else {
              JJReact.attrBind(item.node, item.attrName, this.dataObj[key]);
            }

            break;
          }
          case 3: {
            if (target['_changeData_']) {
              item.node.setAttribute(
                'crud',
                target['_changeData_'][key] ? target['_crud_'] : ''
              );
            }

            if (item.node._changeEl) {
            } else {
              if (item.node.type == 'checkbox') {
                item.node.checked = val;
              } else {
                JJReact.nodeBind(item.node, val);
              }
            }

            break;
          }
        }
      });
    }
  }

  /**
   * @desc 지정한 키에 해당하는 노드와 부모노드의 값을 변경한다.
   * @param {String} - 키
   * @param {*} - 이전값
   * @param {*} - 이후값
   * @param {Object} - 호출한 자식노드
   * @example -
   */
  parentChange(key, old, val, callChild) {
    this.nodeChange(key, old, val);

    if (this.parentDataWatch) this.parentDataWatch.parentChange(key, old, val);

    if (this.childDataWatchs.length)
      this.childDataWatchs.forEach($dataWatch => {
        if ($dataWatch != callChild) {
          $dataWatch.childsChange(key, old, val);
        }
      });
  }

  /**
   * @desc 지정한 키에 해당하는 노드와 자식노드의 값을 변경한다.
   * @param {String} - 키
   * @param {*} - 이전값
   * @param {*} - 이후값
   * @example -
   */
  childsChange(key, old, val) {
    this.nodeChange(key, old, val);

    if (this.childDataWatchs.length)
      this.childDataWatchs.forEach($dataWatch => {
        if ($dataWatch != this) {
          $dataWatch.childsChange(key, old, val);
        }
      });
  }

  /**
   * @desc 클래스를 재생성한다.
   * @example -
   */
  refresh() {
    for (let key in this.nodes) {
      let val = this.dataObj[key];
      let items = this.nodes[key];

      if (items && items.length) {
        items.forEach(item => {
          if (item.literalMap && key == '_index') {
            item.literalMap.index = val;
          }

          item.literalMap.aliasData = this.dataObj;

          switch (item.nodeType) {
            case 1: {
              if (item.literalMap && item.literalMap.isDataBind) {
                JJReact.nodeText(item.node, val);
              } else if (item.literalMap && !item.literalMap.isDataBind) {
                JJReact.nodeText(
                  item.node,
                  this.getLiteralValue(item.literalMap, val)
                );
              } else {
                JJReact.nodeText(item.node, val);
              }

              break;
            }
            case 2: {
              if (item.literalMap && item.literalMap.isDataBind) {
                JJReact.attrBind(item.node, item.attrName, val);
              } else if (item.literalMap && !item.literalMap.isDataBind) {
                let litval = this.getLiteralValue(item.literalMap, val);

                JJReact.attrBind(item.node, item.attrName, litval);
              } else {
                JJReact.attrBind(item.node, item.attrName, val);
              }

              break;
            }
            case 3: {
              if (item.node._changeEl) {
              } else {
                JJReact.nodeBind(item.node, val);
              }

              break;
            }
          }
        });
      }
    }
  }

  /**
   * @desc 지정한 순번으로 노드 순번을 재설정한다.
   * @param {Number} - 순번
   * @example -
   */
  reIndex(index) {
    let items = this.nodes['_index'];

    if (items && items.length) {
      items.forEach(item => {
        item.literalMap.index = index;

        switch (item.nodeType) {
          case 1: {
            if (item.literalMap) {
              JJReact.nodeText(
                item.node,
                this.getLiteralValue(item.literalMap, index)
              );
            } else {
              JJReact.nodeText(item.node, index);
            }

            break;
          }
          case 2: {
            if (item.literalMap) {
              let litval = this.getLiteralValue(item.literalMap, index);

              JJReact.attrBind(item.node, item.attrName, litval);
            } else {
              JJReact.attrBind(item.node, item.attrName, index);
            }

            break;
          }
          case 3: {
            JJReact.nodeBind(item.node, index);

            break;
          }
        }
      });
    }
  }

  /**
   * @desc CRUD 정보를 삭제한다.
   * @example -
   */
  clearCRUD() {
    this.dataObj.$revoke._crud_ = 'R';
    this.dataObj.$revoke._changeData_ = {};

    Object.keys(this.nodes).forEach(key => {
      let items = this.nodes[key];

      if (items && items.length) {
        items.forEach(item => {
          if (item.literalMap && key == '_index') {}

          switch (item.nodeType) {
            case 1: {
              break;
            }
            case 2: {
              break;
            }
            case 3: {
              item.node.setAttribute('crud', '');

              break;
            }
          }
        });
      }
    });
  }

  /**
   * @desc 지정한 키를 루프목록에 추가한다.
   * @param {String} - 키
   * @example -
   */
  newKey(key) {
    this.arrayLoops.forEach(loop => loop.push(key));
  }

  /**
   * @desc 지정한 키를 루프목록에서 삭제한다.
   * @param {String} - 키
   * @example -
   */
  removeKey(key) {
    this.arrayLoops.forEach(loop => loop.remove(key));
  }

  /**
   * @desc 지정한 루프를 루프목록에 추가한다.
   * @param {Object} - 루프
   * @example -
   */
  setArrayLoop(arrayLoop) {
    if (!this.arrayLoops.includes(arrayLoop)) {
      this.arrayLoops.push(arrayLoop);
    }
  }

  /**
   * @desc 지정한 데이터와치 정보를 자식데이터와치로 추가한다.
   * @param {Object} - 데이터와치
   * @example -
   */
  addChildDataWatch(dataWatch) {
    if (!this.childDataWatchs.includes(dataWatch)) {
      this.childDataWatchs.push(dataWatch);

      dataWatch.parentDataWatch = this;
    }
  }

  /**
   * @desc 지정한 데이터와치 정보를 자식데이터와치에서 삭제한다.
   * @param {Object} - 데이터와치
   * @example -
   */
  removeChildDataWatch(dataWatch) {
    let findIndex = this.childDataWatchs.indexOf(dataWatch);

    if (findIndex >= 0) {
      this.childDataWatchs.splice(findIndex, 1);

      dataWatch.parentDataWatch = null;
    }
  }

  /**
   * @desc 지정한 리터럴정보에서 리터럴값을 추출하여 반환한다.
   * @param {Object} - 리터럴정보
   * @return {String} - 리터럴값
   * @example -
   */
  getLiteralValue(literalMap, val, bindArray) {
    let result;
    let aliasData = literalMap.aliasData || this.dataObj;

    if(bindArray && bindArray.length >1){

    }

    try {
      if (literalMap.isDataBind) {
        result = val;

        if (result === undefined) {
          result = null;
          //           if (Array.isArray(aliasData.$parent)) {
          //             if (literalMap.dataMap[0].key == '_index') {
          //               result = this.dataObj.$parent.indexof(this.dataObj);
          //             } else if (literalMap.dataMap[0].key == 'value') {
          //               result = val;
          //             } else if (literalMap.dataMap[0].key === undefined) {
          //               result = aliasData;
          //             }
          //           } else {
          //             if (literalMap.dataMap[0].key == '_index') {
          //               result = literalMap.index;
          //             } else if (literalMap.dataMap[0].key == 'value') {
          //               result = val;
          //             } else if (literalMap.dataMap[0].key === undefined) {
          //               result = aliasData;
          //             }
          //           }
        }
      } else {
        let aliasDataValue = Object.assign({}, aliasData, {
          value: val,
          _index: literalMap.index
        });

        result = new Function(
          'data, ' + literalMap.alias,
          ' return ' + '`' + literalMap.literal + '`;'
        )(this.reactData, aliasDataValue);
      }
    } catch (ex) {
      result = ex;
    }

    if (result == 'undefined') {
      result = '';
    }

    return Jinja.global.nullSpace(result);
  }

  /**
   * @desc 지정한 객체에 원본 객체의 데이터를 복사한다.
   * @param {Object} - 대상 객체
   * @param {Object} - 원본 객체
   * @example -
   */
  objectAssign(to, from) {
    this.objectClean(to);

    if (Array.isArray(to) && Array.isArray(from)) {
      to.reset(from);
    } else {
      for (let i in from) {
        let fData = from[i];

        if (fData && typeof fData == 'object') {
          if (!to.hasOwnProperty(i)) {
            if (Array.isArray(fData)) to[i] = [];
            else to[i] = {};
          }

          this.objectAssign(to[i], fData);
        } else {
          let old = to[i];

          to[i] = fData;
          to.$dataWatch.nodeChange(i, old, fData);
        }
      }
    }
  }

  /**
   * @desc 지정한 객체의 데이터를 삭제한다.
   * @param {Object} - 대상 객체
   * @example -
   */
  objectClean(obj) {
    if (!obj.$dataWatch) this.makeDataWatch(obj);
    if (obj.$dataWatch.parentDataWatch) {
      obj.$dataWatch.parentDataWatch.removeChildDataWatch(obj.$dataWatch);
    }

    if (Array.isArray(obj)) {
      obj.splice(0, obj.length);
    } else {
      for (let i in obj) {
        let data = obj[i];

        if (typeof data == 'object') {
          this.objectClean(data);
        } else {
          let old = obj[i];

          obj[i] = null;
          obj.$dataWatch.nodeChange(i, old, null);
        }
      }
    }
  }
}

/**
 * @classdesc JJArrayLoop 관리를 위한 클래스
 */
class JJArrayLoop {
  /**
   * @desc 지정한 노드 정보를 데이터로 변환하여 반환한다.
   * @param {Element} - 대상 노드
   * @return {Object} - 노드 데이터
   * @example -
   */
  _domArray(node) {
    let result = {
      "t": ""
    };

    if (node.nodeType == 3 && node.textContent.trim()) {
      result.t = "#TEXT";
      result.v = node.textContent;

      let d = this.getLiteralMap(node.textContent);

      if (d.dataMap.length)	result.d = d;
    } 
    else if (node.nodeType == 1) {
      result.t = node.tagName;

      if(node.hasAttributes()){
        let attrs = node.attributes;

        result.a = {};

        for(let i=attrs.length-1; i>=0; i--) {
          let attrName = attrs[i].name;
          let attrValue = attrs[i].value;

          if (attrName=="data-bind") {
            result.a[attrName] = { "v": attrValue};

            if (attrValue){
              let d = this.getLiteralBindMap(attrValue);

              if (d.dataMap.length)	result.a[attrName].d = d;
            }
          } else {
            result.a[attrName] = { "v": attrValue};

            if (attrValue){
              let d = this.getLiteralMap(attrValue);

              if (d.dataMap.length)	result.a[attrName].d = d;
            }
          }
        }
      }

      if (!node.getAttribute("data-render") && node.hasChildNodes()) {
        result.c = [];
        let children = node.childNodes;

        for (let i = 0; i < children.length; i++) {
          let cnode = this._domArray(children[i]);

          if (cnode){
            result.c.push(cnode);
          }
        }
      }
    }

    if(result.t) {
      return result;
    } else {
      return null;
    }
  }

  /**
   * @desc 노드 데이터를 노드로 변환하여 반환한다.
   * @param {Number} - 데이터 순번
   * @param {Object} - 노드 데이터
   * @return {Element} - 노드
   * @example -
   */
  _domParse(loopIndex, domData) {
    let node;
    let loopData = this.options.dataObj[loopIndex];

    if (['svg', 'circle', 'path', 'text'].includes(domData.t)) {
      node = document.createElementNS('http://www.w3.org/2000/svg', domData.t);
    } else {
      node = document.createElement(domData.t);
    }

    if (domData.a) {
      this.domParseAttr(node, domData.a, loopIndex, loopData);
    }

    if (node.getAttribute('j-for')) {
      let dataObj;
      let loopfor = node.getAttribute('j-for').split('in')[1].trim();

      if (loopfor == this.options.alias + '.value') {
        dataObj = loopData;
      } else {
        dataObj = new Function(
          'data, ' + this.options.alias,
          'return ' + loopfor
        )(this.options.react.options.data, loopData);
      }

      if (dataObj) {
        new JJArrayLoop({
          el: node,
          react: this.options.react,
          orgDataObj: dataObj,
          vdom: domData.c[0]
        });
      }

      node.removeAttribute('j-for');
    } else {
      if (domData.c) {
        domData.c.forEach(childDomData => {
          switch (childDomData.t) {
            case '#TEXT': {
              let content, childNode;

              if (childDomData.d) {
                content = this.getLiteralValue(childDomData.d, loopIndex);
                childNode = document.createTextNode(content);

                childDomData.d.dataMap.forEach(pathInfo => {
                  let dataObj, objPath = pathInfo.objPath, key = pathInfo.key;

                  if (objPath == this.options.alias) {
                    if (typeof this.options.dataObj[loopIndex] == 'object') {
                      dataObj = this.options.dataObj[loopIndex];
                    } else {
                      dataObj = this.options.dataObj;
                      key = loopIndex;
                    }
                  } else {
                    dataObj = new Function(
                      'data,' + this.options.alias,
                      'return ' + objPath
                    )(
                      this.options.react.options.data,
                      this.options.dataObj[loopIndex]
                    );
                  }

                  if (dataObj) {
                    childDomData.d.aliasData = loopData;
                    dataObj.$dataWatch.setNodeText(
                      key,
                      childNode,
                      childDomData.d
                    );
                  }
                });
              } else {
                content = childDomData.v;
                childNode = document.createTextNode(content);
              }

              node.appendChild(childNode);

              break;
            }
            case 'INPUT': {
              let childNode = document.createElement(childDomData.t);

              this.domParseAttr(childNode, childDomData.a, loopIndex);

              node.appendChild(childNode);

              break;
            }
            case 'SELECT': {
              let childNode = document.createElement(childDomData.t);

              childDomData.c.forEach(optionDomData => {
                let option = this._domParse(loopIndex, optionDomData);

                childNode.appendChild(option);
              });

              this.domParseAttr(childNode, childDomData.a, loopIndex);

              node.appendChild(childNode);

              break;
            }

            default:
              let childNode = this._domParse(loopIndex, childDomData);

              if (childNode) node.appendChild(childNode);

              break;
          }
        });
      }
    }

    return node;
  }

  /**
   * @desc 생성자
   * @param {Object} - 옵션
   * @example -
   */
  constructor(options) {
    this.VERSION = '640';
    this.options = {
      el: null,
      pager: null,
      react: null,
      dataPath: null,
      alias: null,
      startIndex: 0,
      pageLength: 10,
      activeMove: false,
      vdom: null
    };

    this.keyDom = {};
    this.init(options);
  }

  /**
   * @desc 클래스를 초기화 한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    Object.assign(this.options, options);
    this.options.el.__react__ = this;	
    this.options.el.setAttribute("jj-react", true);	
    let pager = this.options.el.getAttribute('pager');

    this.options.activeMove =
      this.options.el.getAttribute('data-active-move') == 'true';

    if (
      pager &&
      this.options.react.element.querySelector('[jj-id="' + pager + '"]')
    ) {
      this.options.pager = this.options.react.element.querySelector(
        '[jj-id="' + pager + '"]'
      );
    }

    let loopfor = this.options.el.getAttribute('j-for');

    this.options.dataPath = loopfor.split(' in ')[1].trim();
    this.options.alias = loopfor.split('in')[0].trim();
    this.options.jif = this.options.el.getAttribute('j-if');

    this.options.pageLength =
      parseInt(this.options.el.getAttribute('j-page')) ||
      this.options.pageLength;

    try {
      if (!this.options.orgDataObj) {
        this.options.orgDataObj = new Function(
          'data',
          'return ' + this.options.dataPath
        )(this.options.react.options.data);
      }

      if (!this.options.orgDataObj.$dataWatch) {
        this.options.react.makeDataWatch(this.options.orgDataObj);
      }

      this.options.orgDataObj.$dataWatch.setArrayLoop(this);
    } catch (e) {
      let errMsg = `JJReact ArrayLoop.init: ${this.options.dataPath}: 데이터를 찾을수 없습니다.\n ${e}`;

      alert(errMsg);

      console.error(errMsg);
    }

    if (this.options.jif) {
      this.options.dataObj = this.options.orgDataObj.filter((row, index) => {
        let rlt = new Function(
          'data,' + this.options.alias,
          'return `' + this.options.jif + '`'
        )(this.options.react.options.data, row);

        if (rlt) {
          this.options.react.makeDataWatch(row);
        }

        return rlt;
      });

      if (!this.options.dataObj.$dataWatch) {
        this.options.react.makeDataWatch(this.options.dataObj);
      }

      this.options.dataObj.$dataWatch.setArrayLoop(this);
    } else {
      this.options.dataObj = this.options.orgDataObj;
    }

    if (this.options.pager)
      this.options.pager.bindData(this.options.dataObj, this);

    if (!this.options.vdom) {
      if (this.options.el.querySelector('template')) {
        let htmlBox = document.createElement('div');

        htmlBox.innerHTML = this.options.el.querySelector('template').innerHTML;

        this.options.vdom = this.domArray(htmlBox);
      } else {
        this.options.vdom = this.domArray(this.options.el);
      }
    }

    this.options.el.removeAttribute('j-for');
    this.options.el.removeAttribute('j-page');
    this.options.el.removeAttribute('j-if');

    Jinja.dom.empty(this.options.el);

    if (Array.isArray(this.options.dataObj)) {
      this.domBuild(0);
    } else {
      for (let index in this.options.dataObj) {
        let newNodes = this.domParse(index);

        newNodes.forEach(newNode => this.options.el.appendChild(newNode));

        this.keyDom[index] = newNodes;
      }
    }

    if (
      !this.options.pager &&
      Array.isArray(this.options.dataObj) &&
      this.options.activeMove
    ) {
      this.options.el.addEventListener('keydown', e => {
        if (e.target.matches('input, textarea, select')) {
          return;
        }

        if (e.keyCode == 38) {
          e.stopPropagation();
          e.preventDefault();

          this.prev();
        }

        if (e.keyCode == 40) {
          e.stopPropagation();
          e.preventDefault();

          this.next();
        }

        if (e.keyCode == 33) {
          e.stopPropagation();
          e.preventDefault();

          this.prevPage();
        }

        if (e.keyCode == 34) {
          e.stopPropagation();
          e.preventDefault();

          this.nextPage();
        }
      });

      this.options.el.addEventListener('wheel', e => {
        if (e.target.matches('input, textarea, select')) {
          return;
        }

        e.stopPropagation();
        e.preventDefault();

        if (e.deltaY < 0 && e.ctrlKey) {
          this.prevPage();
        } else if (e.deltaY < 0) {
          this.prev();
        } else if (e.deltaY > 0 && e.ctrlKey) {
          this.nextPage();
        } else if (e.deltaY > 0) {
          this.next();
        }
      });
    }
  }

  /**
   * @desc 클래스를 재설정 한다.
   * @param {Object} - 옵션
   * @example -
   */
  reset() {
    if (this.options.jif) {
      this.options.dataObj = this.options.orgDataObj.filter(row => {
        let rlt = new Function(
          'data,' + this.options.alias,
          'return `' + this.options.jif + '`'
        )(this.options.react.options.data, row);

        if (rlt) {
          this.options.react.makeDataWatch(row);
        }

        return rlt;
      });

      if (!this.options.dataObj.$dataWatch) {
        this.options.react.makeDataWatch(this.options.dataObj);
      }

      this.options.dataObj.$dataWatch.setArrayLoop(this);
    } else {
      this.options.dataObj = this.options.orgDataObj;
    }

    this.domBuild(0);

    if (this.options.pager)
      this.options.pager.bindData(this.options.dataObj, this);
  }

  /**
   * @desc 지정한 노드 정보를 데이터로 변환하여 반환한다.
   * @param {Element} - 대상 노드
   * @return {Array} - 노드 데이터 목록
   * @example -
   */
  domArray(node) {
    let result = [];
    let children = node.childNodes;

    for (let i = 0; i < children.length; i++) {
      let cnode = this._domArray(children[i]);

      if (cnode) {
        result.push(cnode);
      }
    }

    return result;
  }

  /**
   * @desc 지정한 루프순번에 해당하는 노드를 추가한다.
   * @param {Number} - 순번
   * @example -
   */
  push(loopIndex) {
    let curLength = this.options.el.childElementCount;

    if (curLength < this.options.pageLength) {
      let newNodes = this.domParse(loopIndex);

      newNodes.forEach(newNode => this.options.el.appendChild(newNode));

      if (Array.isArray(this.options.dataObj)) {
      } else {
        this.keyDom[loopIndex] = newNodes;
      }

      if (this.options.pager) this.options.pager.gotoEnd();
    } else {
      this.gotoEnd();
    }
  }

  /**
   * @desc 지정한 루프순번에 해당하는 노드를 삭제한다.
   * @param {Number} - 순번
   * @example -
   */
  remove(loopIndex) {
    this.keyDom[loopIndex].forEach(node => node.remove());
  }

  /**
   * @desc 지정한 사이즈로 페이지 사이즈를 변경한다.
   * @param {Number} - 페이지 사이즈
   * @example -
   */
  changePagesize(size) {
    this.options.pageLength = size;
    this.domBuild(0);
  }

  /**
   * @desc 이전 데이터로 이동한다.
   * @example -
   */
  prev() {
    let d0 = 0, d1 = 0, dp0, dp1, dp2;

    if (this.options.startIndex == 0) return;

    for (let i = 0; i < this.options.pageLength; i++) {
      dp0 = performance.now();

      let toIndex = this.options.startIndex + i - 1;
      let fromIndex = toIndex + 1;

      this.options.dataObj[toIndex].$dataWatch = this.options.dataObj[
        fromIndex
      ].$dataWatch;

      Object.defineProperty(this.options.dataObj[toIndex], '$dataWatch', {
        enumerable: false,
        configurable: false
      });

      if (this.options.dataObj[toIndex]) {
        this.options.dataObj[toIndex].$parent = this.options.dataObj.$revoke;

        Object.defineProperty(this.options.dataObj[toIndex], '$parent', {
          enumerable: false,
          configurable: false
        });
      }

      this.options.dataObj[toIndex].$dataWatch.dataObj = this.options.dataObj[
        toIndex
      ];
      this.options.dataObj[fromIndex].$dataWatch = null;

      dp1 = performance.now();

      this.options.dataObj[toIndex].$dataWatch.refresh();

      dp2 = performance.now();

      d0 += dp1 - dp0;
      d1 += dp2 - dp1;
    }

    console.log(`prev : 소요시간 ${d0} ms /  refresh ${d1} ms `);

    this.options.startIndex--;
  }

  /**
   * @desc 다음 데이터로 이동한다.
   * @example -
   */
  next() {
    let d0 = 0, d1 = 0, dp0, dp1, dp2;

    if (
      this.options.startIndex + this.options.pageLength >=
      this.options.dataObj.length
    )
      return;

    for (let i = this.options.pageLength - 1; i >= 0; i--) {
      dp0 = performance.now();

      let fromIndex = this.options.startIndex + i;
      let toIndex = fromIndex + 1;

      this.options.dataObj[toIndex].$dataWatch = this.options.dataObj[
        fromIndex
      ].$dataWatch;

      Object.defineProperty(this.options.dataObj[toIndex], '$dataWatch', {
        enumerable: false,
        configurable: false
      });

      if (this.options.dataObj[toIndex]) {
        this.options.dataObj[toIndex].$parent = this.options.dataObj.$revoke;

        Object.defineProperty(this.options.dataObj[toIndex], '$parent', {
          enumerable: false,
          configurable: false
        });
      }

      this.options.dataObj[toIndex].$dataWatch.dataObj = this.options.dataObj[
        toIndex
      ];
      this.options.dataObj[fromIndex].$dataWatch = null;

      dp1 = performance.now();

      if (this.options.dataObj[toIndex].$dataWatch)
        this.options.dataObj[toIndex].$dataWatch.refresh();

      dp2 = performance.now();

      d0 += dp1 - dp0;
      d1 += dp2 - dp1;
    }

    console.log(`next : 소요시간 ${d0} ms /  refresh ${d1} ms `);

    this.options.startIndex++;
  }

  /**
   * @desc 이전 페이지로 이동한다.
   * @example -
   */
  prevPage() {
    if (this.options.startIndex == 0) return;
    if (this.options.startIndex - this.options.pageLength < 0) {
      this.domBuild(0);

      return;
    }

    for (let i = 0; i < this.options.pageLength; i++) {
      let toIndex = this.options.startIndex + i - this.options.pageLength;
      let fromIndex = toIndex + this.options.pageLength;

      if (!this.options.dataObj[toIndex]) return;

      this.options.dataObj[toIndex].$dataWatch = this.options.dataObj[
        fromIndex
      ].$dataWatch;

      Object.defineProperty(this.options.dataObj[toIndex], '$dataWatch', {
        enumerable: false,
        configurable: false
      });

      if (this.options.dataObj[toIndex]) {
        this.options.dataObj[toIndex].$parent = this.options.dataObj.$revoke;

        Object.defineProperty(this.options.dataObj[toIndex], '$parent', {
          enumerable: false,
          configurable: false
        });
      }

      this.options.dataObj[toIndex].$dataWatch.dataObj = this.options.dataObj[
        toIndex
      ];
      this.options.dataObj[fromIndex].$dataWatch = null;
      this.options.dataObj[toIndex].$dataWatch.refresh();
    }

    this.options.startIndex -= this.options.pageLength;
  }

  /**
   * @desc 다음 페이지로 이동한다.
   * @example -
   */
  nextPage() {
    let d0 = 0, d1 = 0, dp0, dp1, dp2;

    if (
      this.options.startIndex + this.options.pageLength >=
      this.options.dataObj.length
    ) {
      return;
    }

    if (
      this.options.startIndex + this.options.pageLength * 2 >=
      this.options.dataObj.length
    ) {
      this.options.startIndex =
        this.options.dataObj.length - this.options.pageLength;
      this.domBuild(this.options.startIndex);

      return;
    }

    for (let i = 0; i < this.options.pageLength; i++) {
      dp0 = performance.now();

      let fromIndex = this.options.startIndex + i;
      let toIndex = fromIndex + this.options.pageLength;

      requestAnimationFrame(() => {
        this.options.dataObj[toIndex].$dataWatch = this.options.dataObj[
          fromIndex
        ].$dataWatch;

        Object.defineProperty(this.options.dataObj[toIndex], '$dataWatch', {
          enumerable: false,
          configurable: false
        });

        if (this.options.dataObj[toIndex]) {
          this.options.dataObj[toIndex].$parent = this.options.dataObj.$revoke;

          Object.defineProperty(this.options.dataObj[toIndex], '$parent', {
            enumerable: false,
            configurable: false
          });
        }

        this.options.dataObj[toIndex].$dataWatch.dataObj = this.options.dataObj[
          toIndex
        ];
        this.options.dataObj[fromIndex].$dataWatch = null;

        dp1 = performance.now();

        this.options.dataObj[toIndex].$dataWatch.refresh();

        dp2 = performance.now();

        d0 += dp1 - dp0;
        d1 += dp2 - dp1;
      });
    }

    console.log(`nextPage 소요시간 ${d0} ms /  refresh ${d1} ms `);

    this.options.startIndex += this.options.pageLength;
  }

  /**
   * @desc 지정한 페이지로 이동한다.
   * @param {Number} - 페이지번호
   * @example -
   */
  gotoPage(pageNum) {
    let loopIndex = (parseInt(pageNum) - 1) * this.options.pageLength;

    if (loopIndex >= this.options.dataObj.length) {
      alert('이동할 페이지가 없습니다.');

      return;
    } else {
      this.domBuild(loopIndex);
    }
  }

  /**
   * @desc 마지막 페이지로 이동한다.
   * @param {Object} - 대상 데이터 객체
   * @example -
   */
  gotoEnd() {
    if (this.options.dataObj.length) {
      let loopIndex = Math.max(
        0,
        this.options.dataObj.length - this.options.pageLength
      );

      this.domBuild(loopIndex);

      if (this.options.pager) this.options.pager.gotoEnd();
    }
  }

  /**
   * @desc 지정한 순번부터 지정한 길이만큼 배열을 잘라낸다.
   * @param {Number} - 삭제 시작순번
   * @param {Number} - 삭제 갯수
   * @example -
   */
  splice(removeIndex, length) {
    let curLength = this.options.el.childElementCount;
    let startIndex = this.options.startIndex;
    let pageLength = this.options.pageLength;

    if (removeIndex >= startIndex + pageLength) return;
    if (removeIndex + length < startIndex - 1) return;

    let removeEls = [];

    for (let i = 0; i < curLength; i++) {
      let curIndex = startIndex + i;

      if (curIndex.$between(removeIndex, removeIndex + length - 1)) {
        removeEls.push(this.options.el.children[i]);
      }
    }

    removeEls.forEach(el => el.remove());

    let newRowStart = startIndex + this.options.el.childElementCount;
    let newRowEnd = this.options.pageLength - this.options.el.childElementCount; // 100-56
    let rowsLength = this.options.dataObj.length;

    for (let i = 0; i < newRowEnd; i++) {
      let newIndex = newRowStart + i;

      if (newIndex >= rowsLength) break;

      let newNodes = this.domParse(newIndex);

      newNodes.forEach(newNode => this.options.el.appendChild(newNode));
    }
  }

  /**
   * @desc 지정된 순번을 기준으로 화면을 생성한다.
   * @param {Number} - 루프순번
   * @example -
   */
  domBuild(loopIndex) {
    let curLength = this.options.el.childElementCount;
    let startIndex = (this.options.startIndex = loopIndex);
    let pageLength = parseInt(this.options.pageLength);

    if (pageLength < curLength) {
      for (let i = curLength - 1; i >= pageLength; i--) {
        this.options.el.children[i].remove();
      }
    }

    if (loopIndex >= startIndex + pageLength) return;
    if (loopIndex + this.options.pageLength < startIndex - 1) return;

    let removeEls = [];

    for (let i = 0; i < curLength; i++) {
      let curIndex = startIndex + i;

      if (
        curIndex.$between(loopIndex, loopIndex + this.options.pageLength - 1)
      ) {
        if (this.options.el.children[i])
          removeEls.push(this.options.el.children[i]);
      }
    }

    removeEls.forEach(el => el.remove());

    for (let i = 0; i < this.options.dataObj.length; i++) {
      let watch = this.options.dataObj[i].$dataWatch;

      if (watch) {
        Object.keys(watch.nodes).forEach(nodekey => {
          let items = watch.nodes[nodekey];

          if (items) {
            for (let j = items.length - 1; j >= 0; j--) {
              if (!items[j].node.isConnected) {
                items.splice(j, 1);
              }
            }
          }
        });
      }
    }

    let newRowStart = startIndex + this.options.el.childElementCount;
    let newRowEnd = this.options.pageLength - this.options.el.childElementCount;
    let rowsLength = this.options.dataObj.length;

    for (let i = 0; i < newRowEnd; i++) {
      let newIndex = newRowStart + i;

      if (newIndex >= rowsLength) break;

      let newNodes = this.domParse(newIndex);

      newNodes.forEach(newNode => this.options.el.appendChild(newNode));
    }

    if (this.options.pager && loopIndex == 0) this.options.pager.refresh();
  }

  /**
   * @desc 지정한 문자열을 리터럴정보로 변환하여 반환한다.
   * @param {String} - 문자열
   * @return {Object} - 리터럴정보
   * @example -
   */
  getLiteralMap(textContent) {
    textContent = textContent.trim();

    let result = {
      literal: textContent,
      isDataBind: false,
      dataMap: []
    };

    let firstPath = '';

    if (!textContent.trim()) return result;
    if (!textContent.includes('${')) return result;

    const expReg = new RegExp(/\${.*?}/, 'gm');

    let markExtract = textContent.match(expReg);

    if (markExtract) {
      markExtract.forEach(markExp => {
        let dataExp = markExp.replace(
          new RegExp(/[.]\w+\(|\w+\(|[.][\$]\w+\(/, 'gm'),
          ' ('
        );

        const dataReg = new RegExp(
          /[a-zA-Z가-힣_'"][a-zA-Z0-9가-힣-_\[\]]*[a-zA-Z0-9가-힣-_.'"\[\]]+/,
          'gm'
        );

        dataExp.match(dataReg).forEach((path, index) => {
          if (index === 0) firstPath = path;

          let objMatechs = path.match(
            new RegExp(
              /.+(?=\.[a-zA-Z0-9가-힣_]+$|\[\d+\]$|\[\'\+\'\]$|\[\"\\.[a-zA-Z0-9가-힣_]\"\]$)|\.[a-zA-Z0-9가-힣_]+$|\[\d+\]$|\[\'\\.[a-zA-Z0-9가-힣_]\'\]$|\[\"\w+\"\]$/,
              'gm'
            )
          );

          if (objMatechs) {
            let objPath = objMatechs[0];
            let keyReg = new RegExp(
              /[a-zA-Z0-9가-힣_]+|\.~\[a-zA-Z0-9가-힣_]+|[a-zA-Z0-9가-힣_]+\[\d+\]|[a-zA-Z0-9가-힣_]+\[\'[a-zA-Z0-9가-힣_]+\'\]|[a-zA-Z0-9가-힣_]+\[\"[a-zA-Z0-9가-힣_]+\"\]/,
              'gm'
            );

            let keyName = objMatechs[1].match(keyReg)[0];

            if (keyName && objPath != 'Jinja') {
              result.dataMap.push({
                objPath: objPath,
                key: keyName
              });
            }
          } else {}
        });
      });
    }

    if (result.dataMap.length === 1) {
      result.isDataBind = result.literal == '${' + firstPath + '}';
    }

    return result;
  }

  /**
   * @desc 지정한 문자열을 리터럴바인드정보로 변환하여 반환한다.
   * @param {String} - 문자열
   * @return {Object} - 리터럴정보
   * @example -
   */
  getLiteralBindMap(textContent) {
    let result;
    let objReg = new RegExp(
      /.+(?=\.[a-zA-Z0-9가-힣_]+$|\[\d+\]$|\[\'\+\'\]$|\[\"\\.[a-zA-Z0-9가-힣_]\"\]$)|\.[a-zA-Z0-9가-힣_]+$|\[\d+\]$|\[\'\\.[a-zA-Z0-9가-힣_]\'\]$|\[\"\w+\"\]$/,
      'gm'
    );

    let objMatechs = textContent.match(objReg);

    if (objMatechs) {
      let objPath = objMatechs[0];
      let keyReg = new RegExp(
        /[a-zA-Z0-9가-힣_]+|\.~\[a-zA-Z0-9가-힣_]+|[a-zA-Z0-9가-힣_]+\[\d+\]|[a-zA-Z0-9가-힣_]+\[\'[a-zA-Z0-9가-힣_]+\'\]|[a-zA-Z0-9가-힣_]+\[\"[a-zA-Z0-9가-힣_]+\"\]/,
        'gm'
      );

      let keyName = objMatechs[1].match(keyReg)[0];

      result = {
        literal: '${' + textContent + '}',
        isDataBind: true,
        dataMap: [{ objPath: objPath, key: keyName }]
      };
    }

    return result;
  }

  /**
   * @desc 지정한 리터럴정보에서 리터럴값을 추출하여 반환한다.
   * @param {Object} - 리터럴정보
   * @param {Object} - 루프순번
   * @return {String} - 리터럴값
   * @example -
   */
  getLiteralValue(data, loopIndex, bindArray) {
    let result;
    let aliasData = this.options.dataObj[loopIndex];

    if(bindArray && bindArray.length >1){

    }

    data.alias = this.options.alias;
    data.index = loopIndex;

    try {
      if (data.isDataBind && data.dataMap[0].objPath == this.options.alias) {
        if (Array.isArray(aliasData.$parent)) {
          result = aliasData[data.dataMap[0].key];

          if (result === undefined) {
            if (data.dataMap[0].key == '_index') {
              result = aliasData.$parent.indexof(aliasData);
            } else if (data.dataMap[0].key == 'value') {
              result = aliasData;
            } else if (data.dataMap[0].key === undefined) {
              result = aliasData;
            }
          }
        } else {
          if (data.dataMap[0].key == '_index') {
            result = loopIndex;
          } else if (data.dataMap[0].key == 'value') {
            result = aliasData;
          } else if (data.dataMap[0].key === undefined) {
            result = aliasData;
          }
        }
      } else {
        result = new Function(
          'data, ' + this.options.alias,
          ' return ' + '`' + data.literal + '`'
        )(this.options.react.options.data, aliasData);
      }
    } catch (ex) {
      result = ex;
    }

    if (result == 'undefined') {
      result = '';
    }

    return Jinja.global.nullSpace(result);
  }

  /**
   * @desc 노드 데이터를 노드로 변환하여 생성한다.
   * @param {Number} - 루프순번
   * @param {Eleement} - 대상 노드
   * @return {Array} - 노드정보
   * @example -
   */
  domParse(loopIndex, domData) {
    if (domData === undefined) domData = this.options.vdom;

    let nodes = [];

    if (Array.isArray(domData)) {
      domData.forEach(childDomData => {
        let loopData = this.options.dataObj[loopIndex];

        if (typeof loopData == 'object') {
          loopData.$parent = this.options.dataObj.$revoke;

          Object.defineProperty(loopData, '$parent', {
            enumerable: false,
            configurable: false
          });
        }

        nodes.push(this._domParse(loopIndex, childDomData));
      });
    } else {
      nodes.push(this._domParse(loopIndex, domData));
    }

    return nodes;
  }

  /**
   * @desc 지정한 노드정보를 파싱하여 노드를 생성한다.
   * @param {Object} - 노드정보
   * @param {Object} - 속성정보
   * @param {Number} - 루프순번
   * @param {Object} - 루프데이터
   * @example -
   */
  domParseAttr(node, aData, loopIndex, loopData) {
    let isBind, attrData;

    for (let attrName in aData) {
      attrData = aData[attrName];

      let content;

      if (attrData.d) {
        content = this.getLiteralValue(attrData.d, loopIndex);
      } else {
        content = attrData.v;
      }

      if (attrName == 'data-bind' && attrData.v) {
        if (node.nodeType == 3) {
          let textNode = document.createTextNode(content);

          node.appendChild(textNode);

          if (attrData.d) {
            attrData.d.dataMap.forEach(pathInfo => {
              let dataObj, objPath = pathInfo.objPath, key = pathInfo.key;

              if (!key) return;

              if (objPath == this.options.alias) {
                if (typeof this.options.dataObj[loopIndex] == 'object') {
                  dataObj = this.options.dataObj[loopIndex];
                } else {
                  dataObj = this.options.dataObj;
                  key = loopIndex;
                }
              } else {
                dataObj = new Function(
                  'data,' + this.options.alias,
                  'return ' + objPath
                )(
                  this.options.react.options.data,
                  this.options.dataObj[loopIndex]
                );
              }

              if (dataObj) {
                attrData.d.aliasData = loopData;

                dataObj.$dataWatch.setNodeText(key, node, attrData.d);
              }
            });
          }
        } else {
          isBind = true;

          JJReact.nodeBind(node, content);
        }
      } else {
        JJReact.attrBind(node, attrName, content);

        if (attrData.d) {
          attrData.d.dataMap.forEach(pathInfo => {
            let dataObj, objPath = pathInfo.objPath, key = pathInfo.key;

            if (objPath == this.options.alias) {
              if (typeof this.options.dataObj[loopIndex] == 'object') {
                dataObj = this.options.dataObj[loopIndex];
              } else {
                dataObj = this.options.dataObj;
                key = loopIndex;
              }
            } else {
              dataObj = new Function(
                'data,' + this.options.alias,
                'return ' + objPath
              )(
                this.options.react.options.data,
                this.options.dataObj[loopIndex]
              );
            }

            if (dataObj) {
              attrData.d.aliasData = loopData;

              dataObj.$dataWatch.setNodeAttr(key, node, attrName, attrData.d);
            }
          });
        }
      }
    }

    if (isBind) {
      attrData = aData['data-bind'];

      if (attrData.d.dataMap) {
        attrData.d.dataMap.forEach(pathInfo => {
          let dataObj, objPath = pathInfo.objPath, key = pathInfo.key;

          if (objPath == this.options.alias) {
            if (typeof this.options.dataObj[loopIndex] == 'object') {
              dataObj = this.options.dataObj[loopIndex];
            } else {
              dataObj = this.options.dataObj;
              key = loopIndex;
            }
          } else {
            dataObj = new Function(
              'data,' + this.options.alias,
              'return ' + objPath
            )(this.options.react.options.data, this.options.dataObj[loopIndex]);
          }

          if (dataObj && typeof dataObj == 'object') {
            attrData.d.aliasData = loopData;

            dataObj.$dataWatch.setNodeBind(key, node, attrData.d);
          }
        });
      }
    }
  }
}
/* ==JJReactTable.710.class================ */
class JJReactTable extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      page: 5,
      version: '710'
    };
  }  

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.__table = this.querySelector("table");
    this.__body  = this.__table.querySelector("tbody");
    
    if(!this.__body.hasAttribute('j-page')) this.__body.setAttribute("j-page", this.options.page);
    if(!this.__body.hasAttribute('j-for')) this.__body.setAttribute("j-for", "row in data.list");
    
    
    let __tr = this.__body.querySelector('tr');
    
    if(__tr){
    	__tr.setAttribute("actived", "${row._active_}");
    	__tr.setAttribute("selected", "${row._select_}");
    	__tr.setAttribute("row-index", "${row._index}");
    }
    
    
    
    this.__pager = this.querySelector("jj-pagination");
    if(!this.__pager){
      this.__pager = document.createElement("jj-pagination");
      this.appendChild(this.__pager);
      let pagerId = Jinja.global.uuid();
      this.__pager.setAttribute("class", "pagination-rounded");
      this.__pager.setAttribute("jj-id", pagerId);
      this.__body.setAttribute("pager", pagerId);
    }
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    
    this.addEventListener("click", e=>{
      if(!this.querySelector(`[jj-react]`)) return;
      let dataObj = this.querySelector(`[jj-react]`).__react__.options.dataObj;
      let isBool, rowIndex;
      
      if(e.target.matches(`.trCheck`)){
        

        if(e.target.matches(`thead th.trCheck`)){
          e.target.classList.toggle('checked');

          isBool = e.target.matches(`.checked`);

          this.querySelectorAll(`table tbody[jj-react]  tr`).forEach(tr => {
            if(tr.querySelector('td.trCheck')){
              rowIndex = tr.getAttribute('row-index');
              if (rowIndex !== "") rowIndex = parseInt(rowIndex);
              dataObj[rowIndex]._select_ = isBool;
            }
          });  
        } 
        else if(e.target.matches(`tbody td.trCheck`)){

          let tr = e.target.closest(`tr`);
          if(tr){
            e.target.classList.toggle('checked');
            isBool = e.target.matches(`.checked`);
            rowIndex = tr.getAttribute('row-index');
            if (rowIndex !== "") rowIndex = parseInt(rowIndex);
            dataObj[rowIndex]._select_ = isBool;
          }  
        }

        this.dispatchEvent(new CustomEvent('trCheck', {
          "detail": {
            "dataObj": dataObj,
            "isBool": isBool,
            "rowIndex":rowIndex,
            "event": e
          },
          bubbles: true
        }));

        this.dispatchEvent(new CustomEvent('selectAfter', {
          "detail": {
            "count": dataObj.filter(row => row._select_).length,
            "dataObj": dataObj,
            "isBool": isBool,
            "rowIndex":rowIndex,
            "event": e
          },
          bubbles: true
        }));

      }
      else if(e.target.matches(`tbody tr *`)){
        
        let tr = e.target.closest(`tr`);
        if(tr){
          rowIndex = tr.getAttribute('row-index');
      	  // 기존의 엑티브 표시를 제거함
    	    dataObj.map(row => row._active_ = false);

  	      // 선택된 row에 엑티브 표시함
	        dataObj[rowIndex]._active_ = true;
          this.dispatchEvent(new CustomEvent('trClick', {
            "detail": {
              "tr": tr,
              "dataObj": dataObj,
              "row": dataObj[rowIndex],
              "rowIndex":rowIndex,
              "event": e
            },
            bubbles: true
          }));
        }  
      }
    })

    // 페이지 이동 후처리
    this.addEventListener("pageClick", e=>{
      if(this.__table.querySelector(`thead th.trCheck`)){
				this.__table.querySelector(`thead th.trCheck`).classList.remove('checked');      
      }
    });
    
  }  
  
  customMessage(msg){
    this.__pager.customMessage(msg);
  }  

  /** 
   * 그리드에 데이터를 바인딩하고나면
   * 전체선택을 해제하고
   * 페이지의 사용자 메시지를 지운다
   */
  queryInit(){
    this.__pager.customMessage('');
    if(this.__table.querySelector(`thead th.trCheck`)){
      this.__table.querySelector(`thead th.trCheck`).classList.remove('checked');      
    }
  }
  
  getSelectedRows(){
    let dataObj = this.querySelector(`[jj-react]`).__react__.options.dataObj;
  	return dataObj.filter(row => row._select_);    
  }
  
  bindData(rows){
    let dataObj = this.querySelector(`[jj-react]`).__react__.options.dataObj;
    //dataObj = Jinja.global.setCRUD(rows);
    dataObj.setCRUD(rows);
    if(this.__body.querySelector("tr td")){
    	this.__body.querySelector("tr th").click();  
    }
    
  }
  
}


customElements.define('jj-react-table', JJReactTable);/* ==CssComp.710.pkg.deploy================ */
/* ==JJAnimation.640.class================ */
/* ==JJCircle3d.640.class================ */
/* ==JJCssElement.640.class================ */
/* ==JJCustomToggle.640.class================ */
/* ==JJTimeline.class================ */
/* ==JJTabs.640.class================ */
/**
 * @global
 * @event click:jj-tabs
 * @desc globalEvent.jj-tabs 클릭 이벤트
 */
Jinja.event.add('click', 'globalEvent.jj-tabs', e => {
  if (!e.target.matches('.jj-tabs *')) return;
  
  let navLink = e.target.closest('.nav-link');
  let navItem = navLink.parentElement;
  let jjTabs  = navItem.parentElement;
  let tabContent = jjTabs.nextElementSibling;
  let navItemIndex = Jinja.dom.findIndex(navItem.parentElement,navItem);
  
  // 이미 활성된 상태이면 리턴함
  if (navLink.matches('.active')) return;
  // 현재 활성된 다른 탭을 활성취소함
  if(jjTabs.querySelector('.nav-link.active')){
  	jjTabs.querySelectorAll('.nav-link.active')
      .forEach(el=>el.classList.remove('active'));
  }
  // 선택된 탭을 활성화시킴
  navLink.classList.add('active');
  
  
  if (!tabContent.matches('.tab-content')) return;
  // 현재 활성된 다른 탭을 활성취소함
  if(tabContent.querySelector(':scope >.tab-pane.active')){
  	tabContent.querySelectorAll(':scope >.tab-pane.active')
      .forEach(el=>el.classList.remove('active'));
  }
  // 대상이 되는 탭판넬을 활성화 시킴
  if(navLink.dataset.target 
     && tabContent.querySelector(navLink.dataset.target)){
    tabContent.querySelector(navLink.dataset.target).classList.add('active');
  } 
  else if(navLink.getAttribute('href') 
          && navLink.getAttribute('href') != "#" 
          && tabContent.querySelector(navLink.getAttribute('href'))){
    tabContent.querySelector(navLink.getAttribute('href')).classList.add('active');
  } 
  else if(tabContent.querySelectorAll(':scope >.tab-pane')[navItemIndex]) {
    tabContent.querySelectorAll(':scope >.tab-pane')[navItemIndex].classList.add('active');
  }
  
});
/* ==jjIconBox.class================ */
/* ==JJLineScroll.640.class================ */
/* ==JJMenuIcon.640.class================ */
/* ==DragComp.710.pkg.deploy================ */
/* ==JJDragable.640.class================ */

/*
 * @classdesc Dragable 컴포넌트관리를 위한 클래스
 */
class JJDragable extends JJElComponent {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      handles: '',
      handleEl: '',
      cancelEl: '',
      startClass: 'starting',
      detectAttr: '',
      distance: 10,
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @example -
   */
  _render() {}

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._startHandler = this._start.bind(this);
    this._moveHandler = this._move.bind(this);
    this._endHandler = this._end.bind(this);

    this.el.addEventListener('mousedown', this._startHandler);
    this.el.addEventListener('touchstart', this._startHandler);

    this.el.classList.add('jjdragcomp');

    this.startPosition = {};
    this.movePosition = {};
  }

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {
    if (!this.el) return;

    this.el.removeEventListener('mousedown', this._startHandler);
    this.el.removeEventListener('touchstart', this._startHandler);

    this.el.classList.remove('jjdragcomp');
  }

  /**
   * @desc 드래그를 시작한다.
   * @param {Event} - 이벤트
   * @return {Boolean} - 드래그를 시작하면 true값을 반환
   * @example -
   */
  _start(event) {
    if (event.target.classList.contains('resizer')) {
      return;
    }

    if (!this.el) return;
    if (this.options.handleEl && !event.target.matches(this.options.handleEl))
      return;
    if (this.options.cancelEl && event.target.matches(this.options.cancelEl))
      return;

    this.el.dispatchEvent(
      new CustomEvent('jjDragCompStartBefore', {
        detail: {},
        bubbles: true
      })
    );

    this.startPosition = this._setEventPosition(event);

    if (!this.startPosition) return;

    this.el.style.top = this.startPosition.offsetTop + 'px';
    this.el.style.left = this.startPosition.offsetLeft + 'px';

    this.el.dispatchEvent(
      new CustomEvent('jjDragCompStart', {
        detail: {
          startPosition: this.startPosition
        },
        bubbles: true
      })
    );

    this.el.classList.add(this.options.startClass);

    Jinja.classList.add('freeze');

    return true;
  }

  /**
   * @desc Element를 이동시킨다.
   * @param {Event} - 이벤트
   * @return {Boolean} - 이동에 성공하면 true값을 반환한다.
   * @example -
   */
  _move(event) {
    event.preventDefault();

    if (!this.el) return;
    if (!this.el.classList.contains(this.options.startClass)) return;

    this.movePosition = this._getMovePosition(event);

    if (!this.movePosition) return;

    if (
      this.options.distance <
      Math.abs(this.movePosition.moveX) + Math.abs(this.movePosition.moveY)
    ) {
      this.el.classList.add('move-on');
    }

    this.el.dispatchEvent(
      new CustomEvent('jjDragCompMove', {
        detail: {
          startPosition: this.startPosition,
          movePosition: this.movePosition
        },
        bubbles: true
      })
    );

    return true;
  }

  /**
   * @desc Element의 드래그를 종료한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _end(event) {
    if (!this.el.classList.contains(this.options.startClass)) return;

    if (event.type === 'mouseup' && event.button === 0) {
      document.removeEventListener('mousemove', this._moveHandler, {
        passive: false
      });
      document.removeEventListener('mouseup', this._endHandler, {
        passive: false
      });
    } else if (event.type === 'touchend') {
      document.removeEventListener('touchmove', this._moveHandler, {
        passive: false
      });
      document.removeEventListener('touchend', this._endHandler, {
        passive: false
      });
    } else {
      return;
    }

    if (this.options.onDragend) {
      this.options.onDragend();
    }

    this.el.classList.remove(this.options.startClass);
    this.el.classList.remove('move-on');
    this.el.dispatchEvent(
      new CustomEvent('jjDragCompEnd', { detail: {}, bubbles: true })
    );

    if (this.el.hasAttribute('tabindex')) {
      this.el.focus();
    }

    Jinja.classList.remove('freeze');
  }

  /**
   * @desc 현재 이벤트를 식별하고 위치를 저장한다.
   * @param {Event} - 이벤트
   * @return {Object} - 지정된 Element의 크기정보를 담은 객체
   * @example -
   */
  _setEventPosition(event) {
    let result = {};

    if (event.type === 'mousedown' && event.button === 0) {
      document.addEventListener('mousemove', this._moveHandler, {
        passive: false
      });
      document.addEventListener('mouseup', this._endHandler, {
        passive: false
      });

      result.clientX = event.clientX;
      result.clientY = event.clientY;
    } else if (event.type === 'touchstart') {
      document.addEventListener('touchmove', this._moveHandler, {
        passive: false
      });
      document.addEventListener('touchend', this._endHandler, {
        passive: false
      });

      result.clientX = event.touches[0].clientX;
      result.clientY = event.touches[0].clientY;
    } else {
      return null;
    }

    result.offsetTop = this.el.offsetTop;
    result.offsetLeft = this.el.offsetLeft;
    result.offsetHeight = this.el.offsetHeight;
    result.offsetWidth = this.el.offsetWidth;
    result.centerX =
      this.el.getBoundingClientRect().x + this.el.offsetWidth / 2;
    result.centerY =
      this.el.getBoundingClientRect().y + this.el.offsetHeight / 2;
    result.offsetX = result.clientX - this.el.getBoundingClientRect().x;
    result.offsetY = result.clientY - this.el.getBoundingClientRect().y;

    return result;
  }

  /**
   * @desc - Element의 이동할 위치를 저장한다.
   * @param {Object} - 이벤트
   * @return {Object} - 지정된 Element의 크기정보를 담은 객체
   * @example -
   */
  _getMovePosition(event) {
    let result = {};

    if (event.type === 'mousemove' && event.button === 0) {
      result.clientX = event.clientX;
      result.clientY = event.clientY;
      result.rads = Math.atan2(
        event.clientX - this.startPosition.centerX,
        -(event.clientY - this.startPosition.centerY)
      );
    } else if (event.type === 'touchmove') {
      result.clientX = event.changedTouches[0].clientX;
      result.clientY = event.changedTouches[0].clientY;
      result.rads = Math.atan2(
        event.touches[0].clientX - this.startPosition.centerX,
        -(event.touches[0].clientY - this.startPosition.centerY)
      );
    } else {
      return null;
    }

    result.offsetTop = this.el.offsetTop;
    result.offsetLeft = this.el.offsetLeft;
    result.offsetHeight = this.el.offsetHeight;
    result.offsetWidth = this.el.offsetWidth;
    result.moveX = result.clientX - this.startPosition.clientX;
    result.moveY = result.clientY - this.startPosition.clientY;
    result.angle = parseInt(result.rads * (180 / Math.PI));

    if (result.angle < 0) {
      result.angle = 180 + (180 + result.angle);
    }

    return result;
  }

  /**
   * @desc 옵션의 값을 지정한다.
   * @param {String} - 옵션명
   * @param {String} - 옵션값
   * @return {} -
   * @example -
   */
  on(name, callback) {
    this.options[name] = callback;
  }
}
/* ==JJMoveable.640.class================ */

/*
 * @classdesc Moveable 컴포넌트관리를 위한 클래스
 */
class JJMoveable extends JJDragable {
  /**
   * @desc element가 이동될 좌표값을 반환하는 이벤트를 발생시킨다.
   * @param {Event} - 이벤트
   * @example -
   */
  _move(event) {
    if (super._move(event)) {
      let container = this.options.container || this.el.parentElement;
      let maxTop = container.offsetHeight - this.el.offsetHeight;
      let maxLeft = container.offsetWidth - this.el.offsetWidth;
      let left;
      let top;
      let elLeft;
      let elTop;

      if (
        this.options.handles.includes('n') ||
        this.options.handles.includes('s')
      ) {
        top = this.startPosition.offsetTop + this.movePosition.moveY;

        if (top < 0) top = 0;
        if (top > maxTop) top = maxTop;

        top = top - container.scrollTop - container.offsetTop;

        elTop = this.startPosition.offsetTop + this.movePosition.moveY; 
        elTop = Math.max(elTop, 0);
        elTop = Math.min(elTop, maxTop);

        this.el.style.top = elTop + 'px';
      }
      if (
        this.options.handles.includes('e') ||
        this.options.handles.includes('w')
      ) {
        left =
          this.startPosition.offsetLeft +
          this.movePosition.moveX - 
          container.offsetLeft;

        if(this.options.scroll){
          elLeft = this.startPosition.offsetLeft + this.movePosition.moveX;

        } else {
          if (left > maxLeft) left = maxLeft;

          elLeft = this.startPosition.offsetLeft + this.movePosition.moveX;
          elLeft = Math.max(elLeft, 0);
          elLeft = Math.min(elLeft, maxLeft);
        }
        this.el.style.left = elLeft + 'px';
      }

      this.el.dispatchEvent(
        new CustomEvent('JJMoveable.move', {
          detail: {
            "container": container,
            "maxTop": maxTop,
            "maxLeft": maxLeft,
            "left": left,
            "top": top,
            "elLeft": elLeft,
            "elTop": elTop,
            "value":{
              "x": parseInt(100*(elLeft/maxLeft)),
              "y": parseInt(100*(elTop/maxTop))
            }
          },
          bubbles: true
        })
      );
    }
  }

  /**
   * @desc 해당 엘리먼트의 top 좌표를 지정한다.
   * @param {Number} - 최대 top 높이의 배율
   * @example -
   */
  moveTop(val) {
    let container = this.options.container || this.el.parentElement;
    let maxTop = container.offsetHeight - this.el.offsetHeight;
    let top = maxTop * val;

    this.el.style.top = top + 'px';
  }
}
/* ==JJResizable.640.class================ */

/**
 * @classdesc Rresizable 컴포넌트관리를 위한 클래스
 */
class JJRresizable extends JJElComponent {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      handles: 'e',
      aspectRatio: 0,
      class: 'jj-resizable',
      isKeyMove: false,
      onResizestart: function (event) {},
      onResize: function (event) {},
      onResizeend: function (event) {},
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @example -
   */
  _render() {
    let html = '';
    
    this.options.handles
      .split(',')
      .forEach(
        arrow => (html += `<div class='resizer' data-arrow='${arrow}'></div>`)
      );
    
    Jinja.dom.append(this.el, html);
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._startHandler = this._start.bind(this);
    this._moveHandler = this._move.bind(this);
    this._endHandler = this._end.bind(this);
    this._keydownHandler = this._keydown.bind(this);

    this.el.addEventListener('mousedown', this._startHandler);
    this.el.addEventListener('touchstart', this._startHandler);

    if (this.options.isKeyMove) {
      this.el.setAttribute('tabindex', 0);
      this.el.addEventListener('keydown', this._keydownHandler);
    }
  }

  /**
   * @desc - 이벤트를 초기화 시킨다.
   * @example -
   */
  _clearEvent() {
    this.el.removeEventListener('mousedown', this._startHandler);
    this.el.removeEventListener('touchstart', this._startHandler);

    if (this.options.isKeyMove) {
      this.el.removeEventListener('keydown', this._keydownHandler);
    }

    this.el.classList.remove(this.options.class);

    if (this.barx) this.barx.remove();
  }

  /**
   * @desc 이벤트 타겟의 리사이즈를 시작한다.
   * @param {Event} - 이벤트
   * @return {} -
   * @example -
   */
  _start(event) {
    this.arrow = event.target.dataset.arrow;
    if (this.arrow && this.options.handles.split(',').includes(this.arrow)) {
      event.preventDefault();
      event.stopPropagation();
      event.stopImmediatePropagation();

      this.el.classList.add('resizing');
      
      Jinja.classList.add('freeze');
      
      if (event.type === 'mousedown') {
        document.addEventListener('mousemove', this._moveHandler, false);
        document.addEventListener('mouseup', this._endHandler, false);
      } else {
        document.addEventListener('touchmove', this._moveHandler, false);
        document.addEventListener('touchend', this._endHandler, false);
      }

      this.startPosition = this._getEventPosition(event);
      this.startPosition.top = this.el.offsetTop;
      this.startPosition.left = this.el.offsetLeft;
      this.startPosition.width = this.el.offsetWidth;
      this.startPosition.height = this.el.offsetHeight;
    }
  }

  /**
   * @desc 지정한 타겟의 리사이즈를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _move(event) {
    event.preventDefault();
    event.stopPropagation();
    event.stopImmediatePropagation();

    if (!this.el.classList.contains('resizing')) return;

    let move = {};
    let curPosition = this._getEventPosition(event);
    
    move.x = curPosition.x - this.startPosition.x;
    move.y = curPosition.y - this.startPosition.y;

    if (this.arrow === 'n' || this.arrow === 'ne' || this.arrow === 'nw') {
      this.el.style.top = this.startPosition.top + move.y + 'px';
      this.el.style.height = this.startPosition.height - move.y + 'px';
      
      if (this.options.aspectRatio !== 0) {
        this.el.style.width =
          this.el.offsetHeight * this.options.aspectRatio + 'px';
      }
    }

    if (this.arrow === 'e' || this.arrow === 'ne' || this.arrow === 'se') {
      this.el.style.width = this.startPosition.width + move.x + 'px';
      
      if (this.options.aspectRatio !== 0) {
        this.el.style.height =
          this.el.offsetWidth / this.options.aspectRatio + 'px';
      }
    }

    if (this.arrow === 's' || this.arrow === 'sw' || this.arrow === 'se') {
      this.el.style.height = this.startPosition.height + move.y + 'px';
      
      if (this.options.aspectRatio !== 0) {
        this.el.style.width =
          this.el.offsetHeight * this.options.aspectRatio + 'px';
      }
    }

    if (this.arrow === 'w' || this.arrow === 'sw' || this.arrow === 'nw') {
      let compStyle = window.getComputedStyle(this.el);
      
      if (['fixed', 'absolute'].includes(compStyle['position'])) {
        this.el.style.left = this.startPosition.left + move.x + 'px';
        this.el.style.width = this.startPosition.width - move.x + 'px';
        
        if (this.options.aspectRatio !== 0) {
          this.el.style.height =
            this.el.offsetWidth / this.options.aspectRatio + 'px';
        }
      } else {
        this.el.style.width = this.startPosition.width - move.x + 'px';
      }
    }

    this.options.onResize(this.el);
  }

  /**
   * @desc 지정한 타겟의 리사이즈를 종료한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _end(event) {
    event.preventDefault();
    
    this.el.classList.remove('resizing');
    
    Jinja.classList.remove('freeze');
    
    if (event.type === 'mouseup') {
      document.removeEventListener('mousemove', this._moveHandler, false);
      document.removeEventListener('mouseup', this._endHandler, false);
    } else {
      document.removeEventListener('touchmove', this._moveHandler, false);
      document.removeEventListener('touchend', this._endHandler, false);
    }

    this.options.onResizeend();

    if (this.el.hasAttribute('tabindex')) {
      this.el.focus();
    }
  }

  /**
   * @desc 키 입력 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _keydown(event) {
    let keyMap = Jinja.global.getEventKeyMap(event);

    switch (keyMap) {
      case 'Left':
        this.el.style.left = this.el.offsetLeft - 1 + 'px';

        this.options.onResizeend();

        break;
      case 'Right':
        this.el.style.left = this.el.offsetLeft + 1 + 'px';

        this.options.onResizeend();

        break;
      case 'Shift-Left':
        this.el.style.width = this.el.offsetWidth - 1 + 'px';

        this.options.onResizeend();

        break;
      case 'Shift-Right':
        this.el.style.width = this.el.offsetWidth + 1 + 'px';

        this.options.onResizeend();

        break;
      case 'Up':
        this.el.style.top = this.el.offsetTop - 1 + 'px';

        this.options.onResizeend();

        break;
      case 'Down':
        this.el.style.top = this.el.offsetTop + 1 + 'px';

        this.options.onResizeend();

        break;
      case 'Shift-Up':
        this.el.style.height = this.el.offsetHeight - 1 + 'px';

        this.options.onResizeend();

        break;
      case 'Shift-Down':
        this.el.style.height = this.el.offsetHeight + 1 + 'px';

        this.options.onResizeend();

        break;
    }
  }

  /**
   * @desc 해당 이벤트가 일어났을때의 좌표를 반환한다.
   * @param {Event} - 이벤트
   * @return {Object} - 좌표정보
   * @example -
   */
  _getEventPosition(event) {
    let result = {};

    switch (event.type) {
      case 'mousedown':
      case 'mousemove':
      case 'mouseup':
        result.x = event.clientX;
        result.y = event.clientY;

        break;
      case 'touchstart':
      case 'touchmove':
      case 'touchend':
        result.x = event.touches[0].clientX;
        result.y = event.touches[0].clientY;

        break;
    }

    return result;
  }

  /**
   * @desc - resize를 위한 초기화
   * @example -
   */
  init() {
    super.init();
    
    if (this.el.classList.contains('JJRresizable')) {
      return;
    }
    
    this.el.classList.add(this.options.class);
    this.startPosition = {};
  }

  /**
   * @desc - 종횡비를 설정한다.
   * @param {Number} - 종횡비
   * @example -
   */
  setAspectRatio(val) {
    this.options.aspectRatio = val;

    if (this.options.aspectRatio !== 0) {
      this.el.style.height =
        this.el.offsetWidth / this.options.aspectRatio + 'px';
    }
  }
}
/* ==JJResizeBox.640.class================ */

/**
 * @classdesc ResizeBox 컴포넌트관리를 위한 클래스
 */
class JJResizeBox extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      isRotate: true,
      isMove: false,
      isDrag: false,
      aspectRatio: 0,
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @example -
   */
  _render() {
    let html = 
      `<div class='rotate-handle'></div>` +
      `<div class='rotate-bar'></div>` +
      `<div class='resizer size-mark' data-arrow='top'></div>` +
      `<div class='resizer size-mark' data-arrow='right'></div>` +
      `<div class='resizer size-mark' data-arrow='bottom'></div>` +
      `<div class='resizer size-mark' data-arrow='left'></div>` +
      `<div class='resizer size-mark' data-arrow='top-left'></div>` +
      `<div class='resizer size-mark' data-arrow='top-right'></div>` +
      `<div class='resizer size-mark' data-arrow='bottom-left'></div>` +
      `<div class='resizer size-mark' data-arrow='bottom-right'></div>`;

    this.innerHTML = html;

    if (this.options.isDrag) {
      this.style.pointerEvents = 'auto';
    }

    if (this.options.isRotate && this.options.isRotate != 'false') {
      this.classList.add('rotate');
    }
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    if (this.options.isMove) {
      new JJMoveable(this, {
        handles: 'n,e,s,w,ne,se,sw,nw,allClose',
        cancelEl: '.resizer, .rotate-handle'
      });
    }

    if (this.options.isRotate) {
      new JJRotate(this, {
        handleEl: '.rotate-handle'
      });

      this.addEventListener('jjRotateMove', e => {
        let transformStyle = `rotate(${e.detail.angle}deg)`;
				
        if(this.lockEl){
          this.lockEl.style.msTransform = transformStyle;
          this.lockEl.style.MozTransform = transformStyle;
          this.lockEl.style.webkitTransform = transformStyle;
          this.lockEl.style.transform = transformStyle;
        }
      });
    }

    this.arrow = '';
    this.startPosition = {x: 0, y: 0};
    this.movePosition = {x: 0, y: 0};

    this._startHandler = this._start.bind(this);
    this._moveHandler = this._move.bind(this);
    this._endtHandler = this._end.bind(this);
    this._clickHandler = this._onClick.bind(this);
    this._observerHandler = this._onResizeObserver.bind(this);

    this.addEventListener('mousedown', this._startHandler, true);
    this.addEventListener('touchstart', this._startHandler, true);
    this.addEventListener('click', this._clickHandler, true);

    this.resizeObserver = new ResizeObserver(this._observerHandler);
  }

  /**
   * @desc 컴포넌트를 삭제한다.
   * @example -
   */
  _destroy() {
    super._destroy();

    this.resizeObserver.disconnect();
  }

  /**
   * @desc 지정된 이벤트의 좌표를 반환한다.
   * @param {Event} - 이벤트
   * @return {Object} - 이벤트 좌표
   * @example -
   */
  _getEventPosition(event) {
    let result = {};

    switch (event.type) {
      case 'mousedown':
      case 'mousemove':
      case 'mouseup':
        result.x = event.clientX;
        result.y = event.clientY;

        break;
      case 'touchstart':
      case 'touchmove':
      case 'touchend':
        result.x = event.touches[0].clientX;
        result.y = event.touches[0].clientY;

        break;
    }

    return result;
  }

  /**
   * @desc 이벤트의 타겟에 따라 리사이즈를 시작한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _start(event) {
    if (event.target.matches('jj-resize-box')) {
      this.dispatchEvent(
        new CustomEvent('resizeStart', {
          detail: {},
          bubbles: true
        })
      );
    } else {
      this.arrow = event.target.dataset.arrow;

      if (this.arrow) {
        if (event.type === 'mousedown') {
          document.addEventListener('mousemove', this._moveHandler, true);
          document.addEventListener('mouseup', this._endtHandler, true);
        } else {
          document.addEventListener('touchmove', this._moveHandler, true);
          document.addEventListener('touchend', this._endtHandler, true);
        }

        event.preventDefault();

        this.startPosition = this._getEventPosition(event);
        this.startPosition.top = this.offsetTop;
        this.startPosition.left = this.offsetLeft;
        this.startPosition.width = this.offsetWidth;
        this.startPosition.height = this.offsetHeight;
      }
    }
  }

  /**
   * @desc 지정된 Element의 Resize를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _move(event) {
    event.preventDefault();  

    let move ={};
    this.curPosition = this._getEventPosition(event);
    move.x = this.curPosition.x - this.startPosition.x;
    move.y = this.curPosition.y - this.startPosition.y;

    if(this.arrow === "top" || this.arrow === "top-right" || this.arrow==="top-left"){
      this.style.top = (this.startPosition.top+move.y)+"px";
      this.style.height = (this.startPosition.height-move.y)+"px";
	    if(this.lockEl) this.lockEl.style.top = this.style.top;
      if(this.lockEl) this.lockEl.style.height = this.style.height;
      if(this.options.aspectRatio !== 0){
        this.style.width = this.offsetHeight * this.options.aspectRatio+'px';
        if(this.lockEl) this.lockEl.style.width = this.style.width;
      }
      
    }
    if(this.arrow === "right" || this.arrow === "top-right" || this.arrow==="bottom-right"){
      this.style.width = (this.startPosition.width+move.x)+"px";
      if(this.lockEl) this.lockEl.style.width = this.style.width;
      if(this.options.aspectRatio !== 0){
        this.style.height = this.offsetWidth / this.options.aspectRatio+'px';
      }
    }
    if(this.arrow === "bottom" || this.arrow === "bottom-left" || this.arrow==="bottom-right"){
      this.style.height = (this.startPosition.height+move.y)+"px";
      if(this.lockEl) this.lockEl.style.height = this.style.height;
      if(this.options.aspectRatio !== 0){
        this.style.width = this.offsetHeight * this.options.aspectRatio+'px';
        if(this.lockEl) this.lockEl.style.width = this.style.width;
      }
    }
    if(this.arrow === "left" || this.arrow === "bottom-left" || this.arrow==="top-left"){
      this.style.left = (this.startPosition.left+move.x)+"px";
	    if(this.lockEl) this.lockEl.style.left = this.style.left;
      
      this.style.width = (this.startPosition.width-move.x)+"px";
			if(this.lockEl) this.lockEl.style.width = this.style.width;
      
      if(this.options.aspectRatio !== 0){
        this.style.height = this.offsetWidth / this.options.aspectRatio+'px';
        if(this.lockEl) this.lockEl.style.height = this.style.height;
      }
    }
    
    this.dispatchEvent(new CustomEvent('resize', {
      "detail": {
        arrow: this.arrow,
        sizeBox: this,
        x: move.x,
        y: move.y
      },
      bubbles: true
    }));


  }

  /**
   * @desc Dom의 이벤트들을 제거하고 resizeEnd 이벤트를 발생한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _end(event) {
    event.preventDefault();

    if (event.type === 'mouseup') {
      document.removeEventListener('mousemove', this._moveHandler, true);
      document.removeEventListener('mouseup', this._endtHandler, true);
    } else {
      document.removeEventListener('touchmove', this._moveHandler, true);
      document.removeEventListener('touchend', this._endtHandler, true);
    }

    this.dispatchEvent(
      new CustomEvent('resizeEnd', {
        detail: {
          sizeBox: this,
          arrow: this.arrow
        }
      })
    );
  }

  /**
   * @desc Resize가 감지되면 지정한 Element의 크기를 변경한다.
   * @example -
   */
  _onResizeObserver() {
    if(this.lockEl){
      let top = 0;
      let left = 0;
      //let container = document.body.querySelector("jj-vhtml-editor");
      let container = this.$closest("jj-vhtml-editor");
      
      if(container){
        top = this.lockEl.getBoundingClientRect().y +
            container.scrollTop -
            container.getBoundingClientRect().y;

        left = this.lockEl.getBoundingClientRect().x - container.getBoundingClientRect().x; 
      } else {
          //container = document.body.querySelector(".hmi-editor");
          container = this.$closest(".hmi-editor");
          top = this.lockEl.offsetTop;
          left = this.lockEl.offsetLeft;
        
      }
      this.style.top = top + 'px';
      this.style.left = left + 'px';
      this.style.width = this.lockEl.offsetWidth + 'px';
      this.style.height = this.lockEl.offsetHeight + 'px';
      
      if(this.lockEl.style.transform){
        this.style.transform = this.lockEl.style.transform;
      }
    }
  }

  /**
   * @desc 클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onClick(event) {
    if (event.target.matches('.btn-group *'))
      this.dispatchEvent(
        new CustomEvent('clickResizeTool', {
          detail: event,
          bubbles: true
        })
      );
  }

  /**
   * @desc 종횡비를 설정한다.
   * @param {Number} - 종횡비
   * @example -
   */
  setAspectRatio(val) {
    this.options.aspectRatio = val;

    if (this.options.aspectRatio !== 0) {
      this.style.height = this.offsetWidth / this.options.aspectRatio + 'px';
    }
  }

  /**
   * @desc 지정된 Element를 잠금해제한다.
   * @param {Element} - 지정된 Element
   * @example -
   */
  lockElement(el) {
    if (this.lockEl) {
      this.resizeObserver.disconnect();
    }

    this.lockEl = el;
    this.style.transform = 'none';

    if (this.lockEl) {
      this.resizeObserver.observe(this.lockEl);
    }
  }
}

customElements.define('jj-resize-box', JJResizeBox);
/* ==JJRotate.640.class================ */

/**
 * @classdesc Rotate 컴포넌트관리를 위한 클래스
 */
class JJRotate extends JJElComponent {

  /**
   * @static
   * @desc "rotatable" Element를 찾아 JJRotate객체를 생성한다.
   * @param {Event} - 이벤트
   * @example -
   */
  static detector(event) {
    if (event.target.$closest('[rotatable]')) {
      event.target.$JJRotate = new JJRotate(event.target, {}, event);
    }
  }
  set value(v) {
    this.angle  = this.options.maxAngle * v / 100;
    this._setTransform(`rotate(${this.angle}deg)`);   
  }
  get value(){
    return parseInt(100 * this.angle/this.options.maxAngle);
  }



  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      handleEl: '',
      maxAngle:360,
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @example -
   */
  _render() {
    this.originalX = 0;
    this.originalY = 0;
    this.angle = 0;
    this.startPosition = {
      x: 0,
      y: 0
    };
    this.moveSize = {
      x: 0,
      y: 0
    };

    this.value = parseInt(this.el.getAttribute("value"))||0;

  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._startHandler = this._start.bind(this);
    this._moveHandler = this._move.bind(this);
    this._endHandler = this._end.bind(this);

    this.el.addEventListener('mousedown', this._startHandler);
    this.el.addEventListener('touchstart', this._startHandler);
  }

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {
    this.el.removeEventListener('mousedown', this._startHandler);
    this.el.removeEventListener('touchstart', this._startHandler);
  }

  /**
   * @desc 지정된 Element의 Transform을 셋팅한다.
   * @param {String} - style 값
   * @example -
   */
  _setTransform(style) {
    this.el.style.msTransform = style;
    this.el.style.MozTransform = style;
    this.el.style.webkitTransform = style;
    this.el.style.transform = style;
    this.el.dataset.angle = this.angle;
  }

  /**
   * @desc 지정된 Element의 회전을 시작한다.
   * @param {Event} - 이벤트
   * @return {} -
   * @example -
   */
  _start(event) {
    if (!this.el) return;

    if (this.options.handleEl && !event.target.matches(this.options.handleEl))
      return;

    if (event.type === 'mousedown') {
      document.addEventListener('mousemove', this._moveHandler, true);
      document.addEventListener('mouseup', this._endHandler, true);
    } else {
      document.addEventListener('touchmove', this._moveHandler, true);
      document.addEventListener('touchend', this._endHandler, true);
    }
    this._setTransform(`rotate(0deg)`);    

    this.startPosition.x = 
      this.el.getBoundingClientRect().x + this.el.offsetWidth / 2;
    this.startPosition.y = 
      this.el.getBoundingClientRect().y + this.el.offsetHeight / 2;

    this._setTransform(`rotate(${this.angle}deg)`);    

    this.el.classList.add('rotating');

    this.el.dispatchEvent(
      new CustomEvent('jjRotateStart', {
        detail: {
          state: 0
        },
        bubbles: true
      })
    );
  }

  /**
   * @desc 지정된 Element의 회전을 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _move(event) {
    if (!this.el) return;
    if (!this.el.classList.contains('rotating')) return;

    event.preventDefault();

    let rads;

    if (event.type === 'mousemove') {
      rads = Math.atan2(
        event.clientX - this.startPosition.x,
        -(event.clientY - this.startPosition.y)
      );
    } else {
      rads = Math.atan2(
        event.touches[0].clientX - this.startPosition.x,
        -(event.touches[0].clientY - this.startPosition.y)
      );
    }

    this.angle = parseInt(rads * (180 / Math.PI));

    // 최대값이 있으면 역회전금지
//     if (this.angle < 0) {
//       if(this.options.maxAngle){
//         this.angle = 0;
//       } else {
//         this.angle = 180 + (180 + this.angle);
//       }
//     }

    if (this.angle < 0) {
      if(this.options.maxAngle == 360){
      	this.angle = 180 + (180 + this.angle);
      } else {
        this.angle = 0;
      }
    } 
    
    if(this.options.maxAngle){
      this.angle = Math.min(this.angle, this.options.maxAngle);
    }

    this._setTransform(`rotate(${this.angle}deg)`);

    this.el.dispatchEvent(
      new CustomEvent('jjRotateMove', {
        detail: {
          angle: this.angle,
          value: this.value
        },
        bubbles: true
      })
    );
  }

  /**
   * @desc 지정된 Element의 회전을 종료한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _end(event) {
    event.preventDefault();

    if (!this.el.classList.contains('rotating')) return;

    if (event.type === 'mouseup') {
      document.removeEventListener('mousemove', this._moveHandler, true);
      document.removeEventListener('mouseup', this._endHandler, true);
    } else {
      document.removeEventListener('touchmove', this._moveHandler, true);
      document.removeEventListener('touchend', this._endHandler, true);
    }

    this.el.dispatchEvent(
      new CustomEvent('jjRotateEnd', {
        detail: {
          angle: this.angle
        },
        bubbles: true
      })
    );

    this.el.classList.remove('rotating');
  }


}
/* ==JJSelector.640.class================ */

/**
 * @classdesc Selector 컴포넌트관리를 위한 클래스
 */
class JJSelector extends JJElComponent {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      item: 'th,td',
      isMultiSelect: true,
      class: 'jj-selector',
      markClass: 'selected',
      selectBoxClass: 'selector-box',
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @example -
   */
  _render() {}

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._startHandler = this._start.bind(this);
    this._moveHandler = this._move.bind(this);
    this._endHandler = this._end.bind(this);

    this.el.addEventListener('mousedown', this._startHandler);
    this.el.addEventListener('touchstart', this._startHandler);

    this.dragbox = null;
    this.dragX = 0;
    this.dragY = 0;
    this.el.classList.add(this.options.class);
  }

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {
    this.el.removeEventListener('mousedown', this._startHandler);
    this.el.removeEventListener('touchstart', this._startHandler);
    this.el
      .querySelectorAll('.'+this.options.markClass)
      .forEach(el => el.classList.remove(this.options.markClass));
    this.el.classList.remove(this.options.class);

    if (this.dragbox) this.dragbox.remove();

    this.el = null;
  }

  /**
   * @desc 이벤트 타겟의 select를 시작한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _start(event) {
    let target = Jinja.dom.closest(event.target, this.options.item);

    if (target) {
      if (event.ctrlKey) {
        target.classList.toggle(this.options.markClass);
      } else {
        this.el.querySelectorAll('.'+this.options.markClass).forEach(el => {
          el.classList.remove(this.options.markClass);
        });

        target.classList.add(this.options.markClass);
      }
    }

    if (this.options.isMultiSelect) {
      this.dragbox = this.el.querySelector(`.${this.options.selectBoxClass}`);

      if (!this.dragbox) {
        this.dragbox = document.createElement('span');
        this.dragbox.classList.add(this.options.selectBoxClass);
        this.el.appendChild(this.dragbox);
      }

      if (event.type === 'touchstart') {
        this.dragX = event.touches[0].clientX;
        this.dragY = event.touches[0].clientY;
        this.el.addEventListener('touchmove', this._moveHandler, {
          passive: false,
          once: false,
          capture: false
        });
        this.el.addEventListener('touchend', this._endHandler, {
          passive: false,
          once: true,
          capture: false
        });
        this.active = event.target;
      } else {
        if (event.button == 0) {
          this.dragX = event.clientX;
          this.dragY = event.clientY;
          this.el.addEventListener('mousemove', this._moveHandler, {
            passive: false,
            once: false,
            capture: false
          });
          this.el.addEventListener('mouseup', this._endHandler, {
            passive: false,
            once: true,
            capture: false
          });
          this.active = event.target;
        }
      }
    }
  }

  /**
   * @desc 지정된 Element의 select를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _move(event) {
    if (this.dragbox && event.buttons == 1) {
      event.stopImmediatePropagation();
      event.stopPropagation();
      event.preventDefault();

      this.dragbox.style.display = 'block';

      let offsetX, offsetY;

      if (event.type === 'touchmove') {
        offsetX = event.changedTouches[0].clientX;
        offsetY = event.changedTouches[0].clientY;
      } else {
        offsetX = event.clientX;
        offsetY = event.clientY;
      }

      let bx = Math.min(this.dragX, offsetX);
      let by = Math.min(this.dragY, offsetY);
      let bw = Math.abs(offsetX - this.dragX);
      let bh = Math.abs(offsetY - this.dragY);

      this.dragbox.style.top = by + 'px';
      this.dragbox.style.left = bx + 'px';
      this.dragbox.style.width = bw + 'px';
      this.dragbox.style.height = bh + 'px';

      this.el.querySelectorAll(this.options.item).forEach(el => {
        let x = el.getBoundingClientRect().x;
        let w = el.getBoundingClientRect().width;
        let y = el.getBoundingClientRect().y;
        let h = el.getBoundingClientRect().height;

        if (event.ctrlKey) {
        } else {
          el.classList.remove(this.options.markClass);
        }

        let rlt = this.getIntersection(
          { x: bx, y: by, w: bw, h: bh },
          { x: x, y: y, w: w, h: h }
        );

        if (rlt) {
          el.classList.add(this.options.markClass);
        }
      });
    }
  }

  /**
   * @desc 지정된 Element의 select를 종료한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _end(event) {
    event.stopImmediatePropagation();
    event.stopPropagation();
    event.preventDefault();

    this.dragbox.remove();
    this.el.removeEventListener('mousemove', this._moveHandler, {
      passive: false,
      once: false,
      capture: false
    });
    this.el.removeEventListener('mouseup', this._endHandler, {
      passive: false,
      once: true,
      capture: false
    });
    this.el.removeEventListener('touchmove', this._moveHandler, {
      passive: false,
      once: false,
      capture: false
    });
    this.el.removeEventListener('touchend', this._endHandler, {
      passive: false,
      once: true,
      capture: false
    });
  }

  /**
   * @desc 지정된 두 오브젝트의 교차점을 반환한다.
   * @param {Object} - 오브젝트1
   * @param {Object} - 오브젝트2
   * @return {Object} - 교차점
   * @example -
   */
  getIntersection(r1, r2) {
    if (r1.x > r2.x + r2.w) return null;
    if (r1.x + r1.w < r2.x) return null;
    if (r1.y > r2.y + r2.h) return null;
    if (r1.y + r1.h < r2.y) return null;

    let rect = {};

    rect.x = Math.max(r1.x, r2.x);
    rect.y = Math.max(r1.y, r2.y);
    rect.w = Math.min(r1.x + r1.w, r2.x + r2.w) - rect.x;
    rect.h = Math.min(r1.y + r1.h, r2.y + r2.h) - rect.y;

    return rect;
  }
}
/* ==JJSortable.640.class================ */

/**
 * @classdesc Sortable 컴포넌트관리를 위한 클래스
 */
class JJSortable extends JJElComponent {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      handle: '*',
      cancel:
        'a,button,input,select,[jj-command],textarea,.checkbox, .checkbox *',
      item: '> *',
      placeholder: '',
      handles: ['n', 'w'],
      isReact: false,
      distence: 5,
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @example -
   */
  _render() {}

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._startHandler = this._start.bind(this);
    this._moveHandler = this._move.bind(this);
    this._endHandler = this._end.bind(this);

    if (this.el.length) {
      this.el = this.el;
    } else {
      this.el = [this.el];
    }

    this.sortEl = null;
    this.cursorEl = null;

    this.el.forEach(el => {
      el.classList.add('jj-sortable');
      el.addEventListener('mousedown', this._startHandler, {
        passive: false,
        once: false,
        capture: false
      });
      el.addEventListener('touchstart', this._startHandler, {
        passive: false,
        once: false,
        capture: false
      });
    });
  }

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {
    this.el.forEach(el => {
      el.classList.remove('jj-sortable');
      el.removeEventListener('mousedown', this._startHandler, {
        passive: false,
        once: false,
        capture: false
      });
      el.removeEventListener('touchstart', this._startHandler, {
        passive: false,
        once: false,
        capture: false
      });
    });
  }

  /**
   * @desc - 지정된 Element의 Sort를 시작한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _start(event) {
    if (event.type === 'mousedown' && event.button !== 0) return;
    if (!event.target.matches('.jj-sortable *')) return;

    if (this.options.cancel && event.target.matches(this.options.cancel)) return;
    if (this.options.handle && !event.target.matches(this.options.handle)) return;

    event.stopImmediatePropagation();
    event.stopPropagation();
    event.preventDefault();

    this.sortEl = event.target.closest('.jj-sortable ' + this.options.item);

    let handleEl = event.target.closest('.jj-sortable ' + this.options.handle);

    if (!handleEl || !this.sortEl) return;

    this.cursorEl = this.sortEl.cloneNode(true);

    Jinja.appendChild(this.cursorEl);

    if (event.type === 'mousedown' && event.button === 0) {
      document.addEventListener('mousemove', this._moveHandler);
      document.addEventListener('mouseup', this._endHandler);
    } else if (event.type === 'touchstart') {
      document.addEventListener('touchmove', this._moveHandler);
      document.addEventListener('touchend', this._endHandler);
    } else {
      return null;
    }

    this.cursorEl.style.width = this.sortEl.offsetWidth + 'px';
    this.cursorEl.style.height = this.sortEl.offsetHeight + 'px';
    this.cursorEl.style.top = event.clientY + 'px';
    this.cursorEl.style.left = event.clientX + 'px';
    this.cursorEl.classList.add('cursor-el');
    this.cursorEl.hidden = true;
    this.start = {
      clientX: event.clientX,
      clientY: event.clientY
    };
    this.el.forEach(el => el.classList.add('sort-start'));
    this._startIndex = Jinja.dom.findIndex(
      this.sortEl.parentElement,
      this.sortEl
    );
  }

  /**
   * @desc - 지정된 Element의 Sort를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _move(event) {
    if (!event.target.matches('.sort-start *') && !event.target.matches('.sorting *'))
      return;

    let positionX = 0;
    let positionY = 0;
    let target;
    let overItem;

    if (event.type === 'mousemove' && event.button === 0) {
      positionY = event.clientY;
      positionX = event.clientX;
      target = event.target;
    } else if (event.type === 'touchmove') {
      positionY = event.changedTouches[0].clientY;
      positionX = event.changedTouches[0].clientX;
      target = document.elementFromPoint(
        event.changedTouches[0].clientX,
        event.changedTouches[0].clientY
      );
    }

    this.cursorEl.style.top = positionY + 'px';
    this.cursorEl.style.left = positionX + 'px';

    if (
      event.target.matches('.sort-start *') &&
      Math.abs(this.start.clientX - positionX) < this.options.distence &&
      Math.abs(this.start.clientY - positionY) < this.options.distence
    ) {
      return;
    }

    if (event.target.matches('.sort-start *')) {
      this.el.forEach(el => el.classList.remove('sort-start'));
      this.el.forEach(el => el.classList.add('sorting'));
      this.sortEl.classList.add('sort-el');
      this.cursorEl.hidden = false;
    }

    let overEl = target.closest('.jj-sortable ' + this.options.item);

    if (this.overEl == overEl) return;

    this.overEl = overEl;

    event.stopImmediatePropagation();
    event.stopPropagation();
    event.preventDefault();

    if (overEl) {
      let overIndex = Jinja.dom.findIndex(overEl.parentElement, overEl);
      let sortIndex = Jinja.dom.findIndex(overEl.parentElement, this.sortEl);
      if (sortIndex < overIndex) {
        overEl.after(this.sortEl);
      } else {
        overEl.before(this.sortEl);
      }
      this.sortEl.classList.add('animated');
      this.sortEl.classList.add('fadeIn');
    }
    else {
      if (event.target.matches('.jj-sortable')) {
        if (event.target.firstElementChild === null) {
          event.target.appendChild(this.sortEl);
        }
      }
    }
  }

  /**
   * @desc - 지정된 Element의 Sort를 종료한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _end(event) {
    event.stopImmediatePropagation();
    event.stopPropagation();
    event.preventDefault();

    if (event.type === 'mouseup') {
      document.removeEventListener('mousemove', this._moveHandler);
      document.removeEventListener('mouseup', this._endHandler);
    } else {
      document.removeEventListener('touchmove', this._moveHandler);
      document.removeEventListener('touchend', this._endHandler);
    }

    this.cursorEl.remove();
    this.cursorEl = null;
    this.el.forEach(el => el.classList.remove('sort-start'));
    this.el.forEach(el => el.classList.remove('sorting'));
    this.el.forEach((el, index) => {
      el.dispatchEvent(
        new CustomEvent('JJSortableEnd', {
          detail: {
            index: index,
            container: el,
            sortEl: this.sortEl,
            startIndex: this._startIndex,
            endIndex: Jinja.dom.findIndex(
              this.sortEl.parentElement,
              this.sortEl
            )
          },
          bubbles: true
        })
      );
    });
    this.sortEl.classList.remove('sort-el');
    this.sortEl = null;
  }
}
/* ==JJSwiper.640.class================ */

/**
 * @classdesc JJSwiper 컴포넌트관리를 위한 클래스
 */
class JJSwiper extends JJDragable {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      handles: '',
      handleEl: '',
      cancelEl: '',
      activeClass: 'on',
      moveSize: 20,
      version: '640'
    };
  }

  /**
   * @desc - 슬라이드 아이콘 메뉴를 이동시킨다.
   * @param {Event} - 이벤트
   * @example -
   */
  _move(event) {
    super._move(event);

    if (this.movePosition) {
      if (this.movePosition.moveX > this.options.moveSize) {
        this.el.classList.add(this.options.activeClass);
      }

      if (this.movePosition.moveX < this.options.moveSize * -1) {
        this.el.classList.remove(this.options.activeClass);
      }
    }
  }
}
/* ==InputComp.710.pkg.deploy================ */
/* ==JJText.640.class================ */

/**
 * @classdesc Text 컴포넌트관리를 위한 클래스
 */
class JJText extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      "iconClass": "fa fa-search",
      "version": '710'
    };
  }

  /**
   * @desc _render의 전처리를 한다.
   * @example -
   */
  _setRender() {
    this.setAttribute('data-render', 'jj-item');
    this.$empty();
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJText 컴포넌트
   * @example -
   */
  _render() {
    let controlId = Jinja.global.uuid();
    this.controlLabel = document.createElement("label");
    this.controlLabel.classList.add("control-label");
    this.controlLabel.setAttribute("for", controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement("div");
    this.controlContent.classList.add("control-content");


    if(this.options.command){		
      let inputGroup = document.createElement('div');
      this.controlContent.appendChild(inputGroup);
      inputGroup.classList.add('input-group');

      this.formControl = document.createElement("input");
      this.formControl.classList.add("form-control");
      this.formControl.type = this.options.type;
      this.formControl.id = controlId;
      inputGroup.appendChild(this.formControl );

      let prepend = document.createElement('div');
      inputGroup.appendChild(prepend);
      prepend.classList.add('input-group-append');
      let iconWarp = document.createElement('span');
      iconWarp.classList.add('input-group-text');
      iconWarp.setAttribute("jj-command", this.options.command);
      prepend.appendChild(iconWarp);
      this.icon = document.createElement('i');
      this.icon.setAttribute('class', this.options.iconClass);
      iconWarp.appendChild(this.icon);
      if(this.options.commandLabel){
        iconWarp.innerHTML = this.options.commandLabel;
      }
      
      this.addEventListener("keyup", e=>{
        if(e.keyCode == 13){
          iconWarp.click();
        }
      })
      
      
    } 
    else {
      this.formControl = document.createElement("input");
      this.formControl.classList.add("form-control");
      this.formControl.type = this.options.type;
      this.formControl.id = controlId;
      this.controlContent.appendChild(this.formControl );

    }

    this.helpBlock = document.createElement("span");
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add("help-block");

    this.classList.add("form-group");

    if(this.options.css) 	this.classList.add(this.options.css);
    if(this.options.style) this.setAttribute("style", this.options.style);
    if(this.options.bind) 	this.dataset.bind 	= this.options.bind;


    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);

    // 		this.dataMap = new Map();
    // 		this.dataMap.set("options", this.options);  
    //t//his.bind(el);

    this.classList.add("jj-hitem");
    this.validMessage = "";



    this.formControl.addEventListener("input", e=>{
      // 만일 폼 내부에 있다면 개별검증은 아니한다.
      this.checkValidity();
    })

    
    
    this._optionRender();

    // React모듈에서 객체생성이후에 값을 전달할수 있도록 함
    this.value = this._value;
    return this;
  }

  /**
   * @desc 옵션에 의한 컴포넌트의 속성을 부여한다
   * @example -
   */
  _optionRender(){
    //this.formControl.visible = false;
    //if(this.options.pattern) this.formControl.setAttribute("pattern", this.options.pattern);
    //if(this.options.domain) this.formControl.setAttribute("data-valid-domain",this.options.domain);
    //if(this.options.title) this.formControl.setAttribute("title",this.options.title);

    // 도메인 룰을 가져온다
    let domainField = this.dataset.domain;
    let domainRule;
    if (domainField){
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);


    if(this.options.required=="false") this.options.required = false;
    if(this.options.required=="true") this.options.required = true;

    if(this.options.disabled=="false") this.options.disabled = false;
    if(this.options.disabled=="true") this.options.disabled = true;
    if(this.options.readonly=="false") this.options.readonly = false;
    if(this.options.readonly=="true") this.options.readonly = true;

    if(this.hasAttribute('required')) this.options.required = true;
    if(this.hasAttribute('disabled')) this.options.disabled = true;
    if(this.hasAttribute('readonly')) this.options.readonly = true;


    if(this.controlLabel) {
      if(this.options.label) this.controlLabel.textContent = this.options.label;
    }
    if(this.formControl) {
      if(this.formControl.tagName=="INPUT"){
        if(this.options.type) this.formControl.type = this.options.type;
        if (this.options.type == "date"){
          this.formControl.setAttribute("max","2999-12-31");  
        }
        if(this.options.min) this.formControl.setAttribute("min",this.options.min);
        if(this.options.max) this.formControl.setAttribute("max",this.options.max);
        if(this.options.mask) this.formControl.setAttribute("mask",this.options.mask);
      }
      if(this.options.required) {
        this.formControl.setAttribute("required", "");
      } else {
        this.removeAttribute("data-required");
        this.formControl.removeAttribute("required");
      }
      if(this.options.disabled) {
        this.formControl.setAttribute("disabled", "disabled");
      } else {
        this.removeAttribute("data-disabled");
        this.formControl.removeAttribute("disabled");
      }
      if(this.options.readonly) {
        this.formControl.setAttribute("readonly", "readonly");
      } else {
        this.removeAttribute("data-readonly");
        this.formControl.removeAttribute("readonly");
      }
      if(this.options.pattern) {
        this.formControl.setAttribute("pattern", this.options.pattern);
      } else {
        this.removeAttribute("data-pattern");
        this.formControl.removeAttribute("pattern");
      }
      if(this.options.maxlength) {
        this.formControl.setAttribute("maxlength", this.options.maxlength);
      } else {
        this.removeAttribute("data-maxlength");
        this.formControl.removeAttribute("maxlength");
      }
      if(this.options.minlength) {
        this.formControl.setAttribute("minlength", this.options.minlength);
      } else {
        this.removeAttribute("data-minlength");
        this.formControl.removeAttribute("minlength");
      }      
      if(this.options.min) {
        this.formControl.setAttribute("min", this.options.min);
      } else {
        this.removeAttribute("data-min");
        this.formControl.removeAttribute("min");
      }      
      if(this.options.max) {
        this.formControl.setAttribute("max", this.options.max);
      } else {
        this.removeAttribute("data-max");
        this.formControl.removeAttribute("max");
      }      

      if(this.options.placeholder) this.formControl.setAttribute("placeholder",this.options.placeholder);

    }
  }

  /**
   * @static
   * @memberof JJText
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return [
      'data-domain',
      'data-label',
      'data-type',
      'data-bind',
      'data-code',
      'data-link',
      'data-min',
      'data-max',
      'data-pattern',
      'data-default',
      'data-i18n',
      'data-required',
      'data-visible',
      'data-readonly'
    ];
  }

  /**
   * @memberof JJText
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    
    let result = this._value;
    if(["date", "datetime-local"].includes(this.options.type)){
      if (result){
        result = new Date(result);
        if(this.options.type == "date"){
        	result = result.$toFormat("yyyy-MM-dd"); 
        } else {
          result = result.$toFormat("yyyy-MM-ddTHH:mm");
        }
      }
      else {
        result = null;
      }

    } 
    else if(["number","slider"].includes(this.options.type)){
      if (result) result = parseFloat(result);
      else result = 0;      

      if(isNaN(result)){
        result = null; 
      }
    }
    if(this.checkValidity()){
      return result;
    } else {
      return null;
    }

  }

  /**
   * @memberof JJText
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(v) {
    this._value = v;
    if (this.formControl) {
      if (!v){
        this._value = v;
        this.formControl.value = this._value;
      } else {
        if(["date", "datetime-local"].includes(this.options.type)){
          v = new Date(v);
        }

        this._value = v;
        switch(this.options.type){
          case "date":
            this.formControl.value = this._value.$toFormat("yyyy-MM-dd");   
            break;
          case "datetime-local":
            //this.formControl.value = this._value.$toFormat("yyyy-MM-ddTHH:mm:ss");   
            this.formControl.value = this._value.$toFormat("yyyy-MM-ddTHH:mm");   
            break;
          default:
            this.formControl.value = this._value;
            break;
        }

      }
    }
  }

  /**
   * @memberof JJText
   * @method get validationMessage
   * @desc 화면의 띄워줄 Message를 반환한다.
   * @return {String} - 메시지
   * @example -
   */
  get validationMessage() {
    return this.validMessage;
  }

  focus(){
    this.formControl.focus();
  }

  change(val){
    if(val != undefined){
      this.value = val;
    }
    this.dispatchEvent(new Event('input', { bubbles: true }));
  }
  /**
   * @desc 옵션을 설정한다.
   * @param {Object} - 옵션
   * @example -
   */
  setOptions(options) {
    Object.keys(options).forEach(key => {
      this.option(key, options[key]);
    });
  }

  /**
   * @desc 지정한 name, value로 옵션을 설정한다.
   * @param {String} - 옵션명
   * @param {*} - 옵션
   * @example -
   */
  option(name, value) {
    this.options[name] = value;
    this._optionRender();



    //     switch (name) {
    //       case 'label': 
    //           if(this.controlLabel) this.controlLabel.textContent = value;
    //         break;
    //       case 'type': 
    //           if(this.formControl) this.formControl.type = value;
    //         break;
    //     }
  }

  /**
   * @desc Domain 타입을 설정한다.
   * @example -
   */
  setDomain() {
    let domain = Jinja.validate.get(this.dataset.domain);
    if (domain) {
      this.dataset.type = domain.type;
      this._render();
    }
  }

  /**
   * @desc 기본값을 설정한다.
   * @param {Array} - 추후 기입
   * @example -
   */
  default(val) {
    value(val);
  }

  /**
   * @desc 화면에 띄워줄 메시지를 지정한다.
   * @param {String} - 메시지
   * @example -
   */
  setCustomValidity(message) {
    this.formControl.setCustomValidity(message);
    this.checkValidity();
  }

  /**
   * @desc 메시지가 유무 여부를 판별하여 Boolean값을 반환한다.
   * @return {Boolean} - 메시지 유무여부
   * @example -
   */
  checkValidity() {

    if(this.formControl){
      this._value = null;
      if(this.formControl.checkValidity && !this.formControl.checkValidity()){
        this.classList.add('error');
        this.validMessage = this.options.validMessage || this.formControl.validationMessage;
        this.helpBlock.innerText =  this.validMessage;
        return false;
      }

      if(this.formControl.minLength && this.formControl.minLength > this.formControl.value.length){
        this.validMessage = `이 텍스트를 ${this.formControl.minLength}자 이상으로 늘리세요(현재 ${this.formControl.value.length}자 사용 중)`;
        this.helpBlock.innerText =  this.validMessage;
        return false;
      }

      this.helpBlock.innerText = "";
      this.classList.remove('error');
      this._value = this.formControl.value;
    }
    return true;
  }

  /**
   * @desc filter정보를 반환한다.
   * @return {Object} - filter정보
   * @example -
   */
  getFilter() {
    let result;

    if (this.dataset.filter) {
      result = {
        field: this.dataset.filter,
        op: this.dataset.op,
        val: [this.value],
      };
    }

    return result;
  }

  /**
   * @desc 돔연결 이벤트 콜백을 처리한다.
   * @example -
   */
  connectedCallback() {
    this._setRender();
    this._render();
    this._setEvent();
  }

  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 현재 값
   * @param {*} - 새로운 값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {
    if (this.isConnected){
      if (attrName.startsWith('data-')) {
        this.option(attrName.replace('data-', ''), newVal);
      }
    }
    if(attrName == 'data-link'){
      this.dispatchEvent(new CustomEvent('reactLinkChange', {
        "detail":{
          "el": this,
          "oldVal": oldVal,
          "newVal": newVal
        },
        "bubbles": true
      }));
    }
    
  }
}

customElements.define('jj-item-text', JJText);
/* ==JJBetween.640.class================ */

/**
 * @classdesc Between 컴포넌트관리를 위한 클래스
 */
class JJBetween extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._baseDate = new Date();
    this._value = '';

    return {
      type: 'DAY',
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @return {Element} - JJBetween 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');

    if (this.options.i18n)
      this.controlLabel.setAttribute('data-i18n', this.options.i18n);

    this.controlLabel.setAttribute('for', controlId);
    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    this.formControlFrom = document.createElement('input');
    this.controlContent.appendChild(this.formControlFrom);

    this.formControlFrom.classList.add('form-control');
    this.formControlFrom.type = this.options.type;
    this.formControlFrom.id = controlId;

    let betweenLabel = document.createElement('label');

    betweenLabel.classList.add('between-label');
    betweenLabel.appendChild(document.createTextNode('-'));

    this.controlContent.appendChild(betweenLabel);

    this.formControlTo = document.createElement('input');
    this.controlContent.appendChild(this.formControlTo);

    this.formControlTo.classList.add('form-control');
    this.formControlTo.type = this.options.type;

    if (this.options.type == 'date') {
      this.formControlFrom.setAttribute('max', '2999-12-31');
      this.formControlTo.setAttribute('max', '2999-12-31');
    } else {
      this.formControlFrom.removeAttribute('max');
      this.formControlTo.removeAttribute('max');
    }

    if (this.options.required) this.formControl.setAttribute('required', '');

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);
    this.helpBlock.classList.add('help-block');
    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);
    this.classList.add('jj-hitem');
    this.validMessage = '';
		
   
    if(this.options.default){
      if(Jinja.global.isInt(this.options.default.split(",")[0])){
      	this.value = this.options.default.split(",").map(data=>{
          let result = new Date();
          result.$addDate(parseInt(data));
          return result.$toFormat('yyyy-MM-dd');
        });  
        
      } else {
      	this.value = this.options.default.split(",");  
      }
   }
   
    this._initValue = this._value;
    
    //this.value = this._value;
    this.formControlFrom.addEventListener("input", e=>{
      if(!this.formControlFrom.value){
        this.formControlFrom.value = this._initValue[0]
      };
      
      
      if(this.options.width){
        let fromDate = new Date(this.formControlFrom.value);
        let toDate = new Date(this.formControlTo.value);
        
        let compDate = new Date(this.formControlFrom.value);
        compDate.$addDate(parseInt(this.options.width));
        if(compDate < toDate || toDate < fromDate || !this.formControlTo.value){
          this.formControlTo.value = compDate.$toFormat('yyyy-MM-dd')
        }
      }
    })

    this.formControlTo.addEventListener("input", e=>{
      if(!this.formControlTo.value){
        this.formControlTo.value = this._initValue[1]
      };
      
      if(this.options.width){
        let fromDate = new Date(this.formControlFrom.value);
        let toDate = new Date(this.formControlTo.value);
        
        let compDate = new Date(this.formControlTo.value);
        compDate.$addDate(parseInt(this.options.width)*-1);
        if(compDate > fromDate || toDate < fromDate || !this.formControlFrom.value){
          this.formControlFrom.value = compDate.$toFormat('yyyy-MM-dd')
        }
      }
    })
    
    return this;
  }

  /**
   * @static
   * @memberof JJBetween
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
//   static get observedAttributes() {
//     return [
//       'data-domain',
//       'data-label',
//       'data-bind',
//       'data-code',
//       'data-min',
//       'data-max',
//       'data-mask',
//       'data-default',
//       'data-i18n',
//       'data-required',
//       'data-visible'
//     ];
//   }

  /**
   * @memberof JJBetween
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return [this.formControlFrom.value, this.formControlTo.value];
  }

  /**
   * @memberof JJBetween
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;
    if (this.formControlTo) {
      this.formControlFrom.value = val[0];
      this.formControlTo.value = val[1];
    }
  }

  /**
   * @memberof JJBetween
   * @method get validationMessage
   * @desc 화면의 띄워줄 Message를 반환한다.
   * @return {String} - 메시지
   * @example -
   */
//   get validationMessage() {
//     return this.validMessage;
//   }

  /**
   * @desc 옵션을 설정한다.
   * @param {Object} - 옵션
   * @example -
   */
//   setOptions(options) {
//     Object.keys(options).forEach(key => {
//       this.option(key, options[key]);
//     });
//   }

  /**
   * @desc 지정한 name, value로 옵션을 설정한다.
   * @param {String} - 옵션명
   * @param {*} - 옵션
   * @example -
   */
  option(name, value) {
    this.options[name] = value;

    switch (name) {
      case 'label': {
        if (this.controlLabel) {
          this.controlLabel.textContent = value;
        }

        break;
      }
      case 'type': {
        if(this.formControlFrom){
          this.formControlFrom.disabled = false;

          let _f;

          switch (value) {
            case 'YEAR':
              this.formControlFrom.setAttribute('max', '2999');
              this.formControlFrom.type = 'number';
              this.formControlTo.setAttribute('max', '2999');
              this.formControlTo.type = 'number';
              this.value = [
                this._baseDate.getFullYear() - 5,
                this._baseDate.getFullYear()
              ];

              break;
            case 'MONTH':
              this.formControlFrom.setAttribute('max', '2999-12');
              this.formControlFrom.type = 'month';
              this.formControlTo.setAttribute('max', '2999-12');
              this.formControlTo.type = 'month';

              _f = new Date(this._baseDate);
              _f.$addMonth(-11);

              this.value = [
                _f.$toFormat('yyyy-MM'),
                this._baseDate.$toFormat('yyyy-MM')
              ];

              break;
            case 'DAY':
              this.formControlFrom.setAttribute('max', '2999-12-31');
              this.formControlFrom.type = 'date';
              this.formControlTo.setAttribute('max', '2999-12-31');
              this.formControlTo.type = 'date';

              _f = new Date(this._baseDate);
              _f.$addMonth(-1);

              this.value = [
                _f.$toFormat('yyyy-MM-dd'),
                this._baseDate.$toFormat('yyyy-MM-dd')
              ];

              break;
            case 'TIME':
              this.formControlFrom.setAttribute('max', '2999-12-31');
              this.formControlFrom.type = 'date';
              this.formControlTo.setAttribute('max', '2999-12-31');
              this.formControlTo.type = 'date';
              this.value = [
                this._baseDate.$toFormat('yyyy-MM-dd'),
                this._baseDate.$toFormat('yyyy-MM-dd')
              ];
              this.formControlFrom.disabled = true;

              break;
          }
        }
      }
    }
  }

//   /**
//    * @desc - Domain 타입을 설정한다.
//    * @example -
//    */
//   setDomain() {
//     let domain = Jinja.validate.get(this.dataset.domain);

//     if (domain) {
//       this.dataset.type = domain.type;
//       this._render();
//     }
//   }

//   /**
//    * @desc 기본값을 설정한다.
//    * @param {Array} - 추후 기입
//    * @example -
//    */
//   default(val) {
//     value(val);
//   }

//   /**
//    * @desc 화면에 띄워줄 메시지를 지정한다.
//    * @param {String} - 메시지
//    * @example -
//    */
//   setCustomValidity(message) {
//     this.validMessage = message;
//   }

//   /**
//    * @desc 메시지가 유무 여부를 판별하여 Boolean값을 반환한다.
//    * @return {Boolean} - 메시지 유무여부
//    * @example -
//    */
//   checkValidity() {
//     return this.validMessage ? false : true;
//   }

  /**
   * @desc - filter정보를 반환한다.
   * @return {Object} - filter정보
   * @example -
   */
  getFilter() {
    let result;

    if (this.dataset.filter) {
      result = {
        field: this.dataset.filter,
        op: 'between',
        val: [this.value[0], this.value[1]]
      };
    }

    return result;
  }

//   /**
//    * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
//    * @param {String} - 속성명
//    * @param {*} - 현재 값
//    * @param {*} - 새로운 값
//    * @example -
//    */
//   attributeChangedCallback(attrName, oldVal, newVal) {
//     if (attrName.startsWith('data-')) {
//       this.option(attrName.replace('data-', ''), newVal);
//     }
//   }
}

customElements.define('jj-item-between', JJBetween);
/* ==JJCheck.640.class================ */

/**
 * @classdesc 체크박스 컴포넌트관리를 위한 클래스
 */
class JJCheck extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      boolType: 'tf10',
      version: '640'
    };
  }

  /**
   * @desc code의 데이터로 항목을 생성한다.
   * @example -
   */
  _setcode() {
    this.controlContent.$empty();
    this.options.code.split(',').forEach(data => {
      data = data.trim();

      let option = document.createElement('label');
      option.classList.add('check-label');

      let check = document.createElement('input');

      check.type = 'checkbox';
      check.value = data;
      
      option.appendChild(check);
      option.appendChild(document.createTextNode(data));

      this.controlContent.appendChild(option);
    });
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJCheck 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    if (this.options.label) {
      this.controlLabel = document.createElement('label');
      this.appendChild(this.controlLabel);

      this.controlLabel.classList.add('control-label');

      if (this.options.i18n)
        this.controlLabel.setAttribute('data-i18n', this.options.i18n);

      this.controlLabel.setAttribute('for', controlId);

      this.controlLabel.appendChild(
        document.createTextNode(this.options.label)
      );
    }

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    if (this.options.code) {
      this._setcode();
    } else {
      let checkLabel = document.createElement('label');

      checkLabel.classList.add('check-label');
      
      this.formControl = document.createElement('input');
      this.formControl.type = 'checkbox';

      checkLabel.appendChild(this.formControl);
      
      if(this.options.checkLabel){
				document.createTextNode(this.options.checkLabel);
      }
      

      this.controlContent.appendChild(checkLabel);
			
      if (this.options.required) this.formControl.setAttribute('required', '');
    }

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlContent);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    this.value = this._value;

    return this;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.controlContent.addEventListener('input', e => {
      e.stopImmediatePropagation();
      e.stopPropagation();
      e.preventDefault();

      this.dispatchEvent(new Event('input', { bubbles: true }));
    });
  }

  /**
   * @memberof JJCheck
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    if (this.options.code) {
      let result = [];

      this.controlContent
        .querySelectorAll('input:checked')
        .forEach(el => result.push(el.value));

      return result.join(',');
    } else {
      if (this.options.boolType == '10') {
        return this.formControl.checked ? '1' : '0';
      } else if (this.options.boolType == 'YN') {
        return this.formControl.checked ? 'Y' : 'N';
      } else {
        return this.formControl.checked;
      }
    }
  }

  /**
   * @memberof JJCheck
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;

    if (this.controlContent) {
      if (this.options.code) {
        this.controlContent
          .querySelectorAll('input')
          .forEach(el => (el.checked = false));

        val.split(',').forEach(v => {
          let el = this.controlContent.querySelector(`[value="${v.trim()}"]`);

          if (el) el.checked = true;
        });
      } else {
        if (this.options.boolType == '10') {
          this.formControl.checked = (val == '1');
        } else if (this.options.boolType == 'YN') {
          this.formControl.checked = (val == 'Y');
        } else {
          if (typeof val == 'string') {
            this.formControl.checked = (val == 'true' || val == '1');
          } else {
            this.formControl.checked = val;
          }
        }
      }
    }
  }
}

customElements.define('jj-item-check', JJCheck);
/* ==JJDataFilter.640.class================ */

/**
 * @classdesc DataFilter 컴포넌트관리를 위한 클래스
 */
class JJDataFilter extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      isEnterQuery: true,
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @example -
   */
  _render() {
    
    if(this.dataset.isEnterQuery == "false"){
      this.options.isEnterQuery = false;
    }
    
    this.colForm = this.querySelector(`.filter-col`);
    if(!this.colForm){
      this.colForm = document.createElement('div');
      this.colForm.setAttribute('class', 'filter-col row form-horizontal');
      this.colForm.setAttribute('role', 'form');
      this.appendChild(this.colForm);
      while(this.firstElementChild != this.colForm){
        this.colForm.appendChild(this.firstElementChild);
      }

      //       this.childList.forEach(node=>{
      //         if(node != this.colForm){
      //         	this.colForm.appendChild(node)
      //         }
      //       });
    }

    //this.innerHTML 
    let buttonsHtml = `
<div class="filter-buttons" data-render="jj-item">
<button method="query" type="button" class="btn btn-primary"><i class="fa fa-search"></i> 조회</button>
<button method="new" type="button" class="btn btn-primary"><i class="fa fa-save"></i> 추가</button>
<button method="delete" type="button" class="btn btn-danger"><i class="fa fa-trash-o"></i> 삭제</button>
<button method="save" type="button" class="btn btn-success"><i class="fa fa-save"></i> 저장</button>
<button method="excel" type="button" class="btn btn-info"><i class="fa fa-file-excel-o"></i> 엑셀</button>
</div>
`;    

    this.buttons = this.querySelector(`.filter-buttons`);
    if(!this.buttons){
      Jinja.dom.append(this, buttonsHtml);
      this.buttons = this.querySelector(`.filter-buttons`);
      let commands = this.dataset.mode.split(",");
      this.buttons.querySelectorAll(`[method]`).forEach(el=>{
        if(!commands.includes(el.getAttribute('method'))){
          el.remove();
        }
      })
    }

  }


  _destroy() {
    this._clearEvent();
  }  
  
  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    
    if(this.options.isEnterQuery){
      this.addEventListener('keydown', e => {
        let keyMap = Jinja.global.getEventKeyMap(e);

        if (keyMap == 'Enter') {
          this.querySelector(`[method="query"]`).click();
        }
      });
    }

    this.addEventListener('click', e => {

      if(e.target.matches(`[method]`)){
        this.dispatchEvent(new CustomEvent('filterClick', {
          detail: {
            "method": e.target.getAttribute('method')
          },
          bubbles: true
        }));
      }
    })
		
    if(this.hasAttribute('required')){
      this.addEventListener('input', e => {
        this.classList.remove('invalid');
      });
    }
  }

  /** 폼이 로드되면 자동으로 포커스를 설정한다 */
  focus(){
    let el = this.querySelector('[autofocus]');
    if(el) el.focus();
  }
  
  /**
   * @static
   * @memberof JJDataFilter
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return [];
  }

  /**
   * @desc filter의 데이터를 반환한다.
   * @return {Array} - filter 데이터
   * @example -
   */
  query() {
    let result = this.filter();

    this.dispatchEvent(
      new CustomEvent('filterQuery', {
        detail: {
          filter: result
        },
        bubbles: true
      })
    );

    return result;
  }

  filterArray(){
    let result = [];

    this.querySelectorAll('[data-filter]').forEach(el => {
      if (el.getFilter && el.value) {
        result.push(el.getFilter());
      } else if (el.value) {
        result.push({
          field: el.dataset.filter,
          op: el.dataset.op||"=",
          val: [el.value]
        });
      }
    });  
    return result;
  }
  filterJson(){
    let result = {};
    this.querySelectorAll('[data-filter]').forEach(el => {
			
      if(Array.isArray(el.value)){
        let fields = el.dataset.filter.split(",");
        fields.forEach((field, index)=>{
          if(el.hasAttribute("required") && !el.value[index]){
						throw new JJBizStop(`${el.dataset.label} 필수입력요소가 비었습니다`, el);
          }

          if(el.value[index]){
	          result[field] = el.value[index]
          }
        });
      } else {
        if(el.hasAttribute("required") && !el.value){
						throw new JJBizStop(`${el.dataset.label} 필수입력요소가 비었습니다`, el);
        }
        if(el.value){
	        result[el.dataset.filter] = el.value;
        }
      }
    });  
    
    if(this.hasAttribute('required') && Object.keys(result).length==0){
      this.classList.add('invalid');
      throw new JJBizStop(`입력된 요소가 없습니다. 1개 이상의 조건은 입력이 되어야 합니다.`, this);
    }
    
    return result;
  }

}

customElements.define('jj-data-filter', JJDataFilter);
/* ==JJDataForm.640.class================ */

/**
 * @classdesc DataForm 컴포넌트관리를 위한 클래스
 */
class JJDataForm extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "labelWidth": "120px",
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @example -
   */
  _render() {
    this.classList.add('jj-data-form');
    this.style.setProperty("--label-width", this.options.labelWidth);
  }


  _destroy() {
    this._clearEvent();
  }  

  /** 폼이 로드되면 자동으로 포커스를 설정한다 */
  focus(){
    let el = this.querySelector('[autofocus]');
    if(el) el.focus();
  }
  
  checkValidity(){
    let result = true;
    
    this.querySelectorAll('[data-render]').forEach(el=>{
      if (!el.checkValidity()){
        result = false;
      }
    })
    
    return result;
  }
  
  /**
   * @static
   * @memberof JJDataForm
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ["data-label-width"];
  }
  
  attributeChangedCallback(attrName, oldVal, newVal) {
    if (attrName.startsWith('data-label-width')) {
      this.options.labelWidth = newVal;
      this._render();
    }
  }  
}

customElements.define('jj-data-form', JJDataForm);
/* ==JJDropDown.640.class================ */

/**
 * @classdesc 드롭다운 컴포넌트관리를 위한 클래스
 */
class JJDropDown extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      version: '640'
    };
  }

  /**
   * @desc code의 데이터로 항목을 생성한다.
   * @example -
   */
  _setcode() {
    this.itemGroup.$empty();
    this.options.code = this.options.code || 'a,b,c,d,e';
    if(this.options.code.startsWith('APP.')){
      let tableSplit = this.options.code.split(".");
      Jinja.code.applinkCodeSet(this.options.code).then(result =>{
       	this.bindCode(result);
      });
    } else if (this.options.code.split(',').length === 1) {
      this.bindCode(Jinja.code.getGroup(this.options.code));
    } else {
       	this.bindCode(this.options.code.split(',').map(data=>{
          return {
            "CODE": data.trim(),
          	"NAME": data.trim()
          }
        }));
    }
  }
  
  /**
   * @desc rows 데이터로 option 항목을 생성한다.
   * @param {Object} - 코드목록
   * @example -
   */
  bindCode(rows) {
    this.itemGroup.$empty();

    if (rows && rows.length > 0) {
      rows.forEach(row => {
        let item = document.createElement('a');

        item.classList.add('dropdown-item');
        item.setAttribute('value', row.CODE);
        item.setAttribute('label', row.NAME);
        item.appendChild(document.createTextNode(row.NAME));

        this.itemGroup.appendChild(item);
      });
    }
    
  }  

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJDropDown 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    let inputGroup = document.createElement('div');

    this.controlContent.appendChild(inputGroup);

    inputGroup.setAttribute('class', 'input-group dropdown-toggle');
		inputGroup.setAttribute("tabindex",0);
    
    let prepend = document.createElement('div');

    inputGroup.appendChild(prepend);

    prepend.classList.add('input-group-prepend');

    let iconWarp = document.createElement('span');

    iconWarp.classList.add('input-group-text');

    prepend.appendChild(iconWarp);

    this.icon = document.createElement('i');
    this.icon.setAttribute('class', 'fa fa-user');

    iconWarp.appendChild(this.icon);

    this.formControl = document.createElement('input');

    inputGroup.appendChild(this.formControl);

    this.formControl.classList.add('form-control');
    this.formControl.type = "text";
    this.formControl.id = controlId;

    let dropdown = document.createElement('div');

    this.controlContent.appendChild(dropdown);

    dropdown.classList.add('dropdown-menu');

    let formGroup = document.createElement('div');

    dropdown.appendChild(formGroup);

    formGroup.setAttribute('class', 'form-group p-1');

    let formLabel = document.createElement('label');

    formLabel.appendChild(document.createTextNode('Search:'));
    formGroup.appendChild(formLabel);

    let formInput = document.createElement('input');

    formInput.type = 'text';

    formInput.setAttribute('class', 'form-control search');

    formGroup.appendChild(formInput);

    this.itemGroup = document.createElement('div');

    dropdown.appendChild(this.itemGroup);

    this.itemGroup.setAttribute('class', 'dropdown-item-group');

    if (this.options.required) this.formControl.setAttribute('required', '');
    if (this.options.placeholder)
      this.formControl.setAttribute('placeholder', this.options.placeholder);
    if (this.options.title)
      this.formControl.setAttribute('title', this.options.title);

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);
    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);

    this.classList.add('jj-hitem');
    this.validMessage = '';
    this._setcode();

    this.value = this._value;

    return this;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('input', e => {
      if (e.target.matches('.search')) {
        e.stopImmediatePropagation();
        e.stopPropagation();
        e.preventDefault();
        
				let str =  e.target.value;
        
        if (str) {
          this.itemGroup.querySelectorAll('.dropdown-item').forEach(el => {
            el.style.display = (el.innerText.indexOf(str) >= 0)?'block':'none';
          });
        } else {
          this.itemGroup.querySelectorAll('.dropdown-item').forEach(el => {
            el.style.display = 'block';
          });
        }
        
        
      }
    });

    this.addEventListener('click', e => {
      if (e.target.matches('.dropdown-item')) {
        e.stopImmediatePropagation();
        e.stopPropagation();
        e.preventDefault();
        
        this._value = e.target.getAttribute('value');
        this.dispatchEvent(new Event('input', { bubbles: true }));
      }
    });
  }

  /**
   * @memberof JJDropDown
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this._value;
  }

  /**
   * @memberof JJDropDown
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;

    if (this.formControl){
      let item = this.querySelector(`[value="${val}"]`);
      if (item){
        this.formControl.value =  item.getAttribute('label');
      } else {
      	this.formControl.value = val;  
      }
    } 
    

  }
}

customElements.define('jj-item-dropdown', JJDropDown);
/* ==JJIcon.640.class================ */

/**
 * @classdesc 아이콘 컴포넌트관리를 위한 클래스
 */
class JJIcon extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJIcon 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    let inputGroup = document.createElement('div');
    this.controlContent.appendChild(inputGroup);
    inputGroup.classList.add('input-group');
    let prepend = document.createElement('div');
    inputGroup.appendChild(prepend);
    prepend.classList.add('input-group-prepend');
    let iconWarp = document.createElement('span');
    iconWarp.classList.add('input-group-text');
    prepend.appendChild(iconWarp);
    this.icon = document.createElement('i');
    this.icon.setAttribute('class', 'fa fa-user');
    iconWarp.appendChild(this.icon);

    
    this.formControl = document.createElement('input');

    inputGroup.appendChild(this.formControl);

    this.formControl.classList.add('form-control');
    this.formControl.type = this.options.type;
    this.formControl.id = controlId;

    iconWarp.addEventListener('click', e => {
      JJFormModal.open('getIcon.640.uc').then(result => {
        this.value = result.class;
        this.dispatchEvent(new Event('input', { bubbles: true }));
      });
    });

    if (this.options.required) this.formControl.setAttribute('required', '');
    if (this.options.pattern)
      this.formControl.setAttribute('pattern', this.options.pattern);
    if (this.options.jjmask)
      this.formControl.setAttribute('data-mask', this.options.jjmask);
    if (this.options.placeholder)
      this.formControl.setAttribute('placeholder', this.options.placeholder);
    if (this.options.domain)
      this.formControl.setAttribute('data-valid-domain', this.options.domain);
    if (this.options.title)
      this.formControl.setAttribute('title', this.options.title);
    if (this.options.min)
      this.formControl.setAttribute('title', this.options.min);
    if (this.options.max)
      this.formControl.setAttribute('title', this.options.max);

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    this.value = this._value;

    return this;
  }

  /**
   * @memberof JJIcon
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.formControl.value;
  }

  /**
   * @memberof JJIcon
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;

    if (this.formControl) {
      this.formControl.value = val;
      this.icon.setAttribute('class', `fa ${val || 'fa-user'}`);
    }
  }
}

customElements.define('jj-item-icon', JJIcon);
/* ==JJImage.640.class================ */

/**
 * @classdesc 이미지 컴포넌트관리를 위한 클래스
 */
class JJImage extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    
    this._value = Jinja.getCdnPath("/repository/systemImages/team/img1-md.jpg");
    return {
      default: Jinja.getCdnPath("/repository/systemImages/team/img1-md.jpg"), 
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJImage 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    let spanZoom = document.createElement('span');

    this.controlContent.appendChild(spanZoom);

    this.formControl = document.createElement('input');
    this.formControl.type = 'file';
    this.formControl.id = controlId;
    this.formControl.setAttribute('title', '클릭하여 이미지 변경');

    spanZoom.appendChild(this.formControl);
    spanZoom.classList.add('jj-overlay-zoom');
    spanZoom.setAttribute("tabindex",0);
    

    this.img = document.createElement('img');

    spanZoom.appendChild(this.img);

    this.img.classList.add('img-fluid');

    this.img.src = this.options.default;

    if (this.options.required) this.formControl.setAttribute('required', '');

    this.formControl.addEventListener('input', e => {
      e.stopImmediatePropagation();
      e.stopPropagation();
      e.preventDefault();

      Jinja.ajax.imageUploadApps(this.formControl.files).then(response => {
        this.formControl.value = '';
        this.img.src = Jinja.getCdnPath(response.rows[0].path) + response.rows[0].fileId;
        this.dispatchEvent(new Event('input', { bubbles: true }));
      });
    });
    this.img.addEventListener('click', e => {
     	this.formControl.click();
    });

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    this.value = this._value;

    return this;
  }

  /**
   * text 상속으로 인한 타입 피해를 복구함
   */
  _optionRender(){
    super._optionRender();
    if(this.formControl) {
    	this.formControl.type = 'file';
    }
  }
  /**
   * @memberof JJImage
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.img.src;
  }

  /**
   * @memberof JJImage
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;

    if (this.img)
      this.img.src = val || this.options.default;
  }
}

customElements.define('jj-item-image', JJImage);
/* ==JJLabelPopup.640.class================ */

/**
 * @classdesc LabelPopup 컴포넌트관리를 위한 클래스
 */
class JJLabelPopup extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      "iconClass": "fa fa-search",
      modalUri: '',
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJLabelPopup 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');
    this.controlContent.setAttribute("tabindex", 0);

    let inputGroup = document.createElement('div');
    this.controlContent.appendChild(inputGroup);
    inputGroup.classList.add('input-group');

    this.formControl = document.createElement('label');
    this.formControl.classList.add('form-control');
    this.formControl.type = this.options.type;
    this.formControl.id = controlId;
    inputGroup.appendChild(this.formControl);
    
    let prepend = document.createElement('div');
    inputGroup.appendChild(prepend);
    prepend.classList.add('input-group-append');
    let iconWarp = document.createElement('span');
    iconWarp.classList.add('input-group-text');
    prepend.appendChild(iconWarp);
    this.icon = document.createElement('i');
    this.icon.setAttribute('class', this.options.iconClass);
    iconWarp.appendChild(this.icon);
    


    iconWarp.addEventListener('click', e => {
      if (this.options.modalUri) {
        JJFormModal.open(this.options.modalUri, this._value).then(result => {
          this.value = result;
          this.dispatchEvent(new Event('input', { bubbles: true }));
        });
      }
    });

    if (this.options.required) this.formControl.setAttribute('required', '');
    if (this.options.placeholder)
      this.formControl.setAttribute('placeholder', this.options.placeholder);
    if (this.options.domain)
      this.formControl.setAttribute('data-valid-domain', this.options.domain);
    if (this.options.title)
      this.formControl.setAttribute('title', this.options.title);

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    this.value = this._value;

    return this;
  }

  /**
   * @memberof JJLabelPopup
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this._value;
  }

  /**
   * @memberof JJLabelPopup
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;
    this.formControl.innerText = val.label;
  }
}

customElements.define('jj-item-labelpopup', JJLabelPopup);
/* ==JJQR.640.class================ */

/**
 * @classdesc QR 컴포넌트관리를 위한 클래스
 */

class JJQR extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJQR 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');

    if (this.options.i18n)
      this.controlLabel.setAttribute('data-i18n', this.options.i18n);

    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    this.formControl = document.createElement('input');
    this.controlContent.appendChild(this.formControl);

    this.formControl.classList.add('form-control');
    this.formControl.type = this.options.type;
    this.formControl.id = controlId;

    if (this.options.required) this.formControl.setAttribute('required', '');
    if (this.options.pattern)
      this.formControl.setAttribute('pattern', this.options.pattern);
    if (this.options.jjmask)
      this.formControl.setAttribute('data-mask', this.options.jjmask);
    if (this.options.placeholder)
      this.formControl.setAttribute('placeholder', this.options.placeholder);
    if (this.options.domain)
      this.formControl.setAttribute('data-valid-domain', this.options.domain);
    if (this.options.title)
      this.formControl.setAttribute('title', this.options.title);

    this.qrimg = document.createElement('span');
    this.controlContent.appendChild(this.qrimg);

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');
    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    if(this.getAttribute('value')){
      this.value = this.getAttribute('value');
    }
    
    return this;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.formControl.addEventListener('input', e => {
	    this._renderQR(this.formControl.value);
    });
  }  
  
  _renderQR(val){
    Jinja.require.load('qrprint').then(() => {
      this.qrimg.$empty();
      new QRCode(this.qrimg, {
        text: val,
        width: this.options.size||370,
        height: this.options.size||370,
        colorDark: '#000000',
        colorLight: '#ffffff',
        correctLevel: QRCode.CorrectLevel.H
      });
    });
    
  }
  
  /**
   * @memberof JJQR
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.formControl.value;
  }

  /**
   * @memberof JJQR
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this.formControl.value = val;
    this._renderQR(val);
  }
}

customElements.define('jj-item-qr', JJQR);
/* ==JJQRReader.640.class================ */
class JJQRReader extends HTMLElement {
  // Can define constructor arguments if you wish.
  constructor(options) {
    super();
    this.scaner = this.scan.bind(this);
    this.classList.add("jj-qr-reader");
  }

  render(){
    this.canvas = document.createElement("canvas");
    this.appendChild(this.canvas);
    this.canvas.height = this.offsetHeight;
    this.canvas.width = this.offsetWidth;

    this.video = document.createElement("video");

    this.video.height = this.offsetHeight;
    this.video.width = this.offsetWidth;

    this.setFacingMode();
  }
  stop(){
    this.video.pause();
  }
  play(){
    if(this.video.paused) {
      this.video.play();
    }
    requestAnimationFrame(this.scaner);
  }

  stopStreamedVideo() {
    const stream = this.video.srcObject;
    if(stream){
      const tracks = stream.getTracks();

      tracks.forEach(function(track) {
        track.stop();
      });

      this.video.srcObject = null;
    }
  }    
  setFacingMode(facingMode){
    facingMode = facingMode || this.getAttribute('facingMode');
    this.stopStreamedVideo();
    navigator.mediaDevices.getUserMedia({
      video: { facingMode: facingMode||"environment" } 
    })
      .then(mediaStream=>{
      this.video.srcObject = mediaStream;
      this.video.setAttribute("playsinline", true);      // iOS 사용시 전체 화면을 사용하지 않음을 전달
      setTimeout(e=>this.play(),1000);
    })
      .catch(error=>console.log('navigator.getUserMedia error: ', error));

  }

  scan(){
    if(this.video.paused) {
      $topMessage("비디오 대기상태. 잠시후 시작버턴을 누르세요");
      return;
    } 
    if(this.video.readyState === this.video.HAVE_ENOUGH_DATA) {

      this.canvas.height = this.video.videoHeight;
      this.canvas.width = this.video.videoWidth;
      this.canvas.getContext("2d").drawImage(this.video, 0, 0, this.canvas.width, this.canvas.height);
      let imageData = this.canvas.getContext("2d").getImageData(0, 0, this.canvas.width, this.canvas.height);

      var code = jsQR(imageData.data, imageData.width, imageData.height, {
        inversionAttempts : "dontInvert",
      });
      if(code) {
        this.drawLine(code.location.topLeftCorner, code.location.topRightCorner, "#FF0000");
        this.drawLine(code.location.topRightCorner, code.location.bottomRightCorner, "#FF0000");
        this.drawLine(code.location.bottomRightCorner, code.location.bottomLeftCorner, "#FF0000");
        this.drawLine(code.location.bottomLeftCorner, code.location.topLeftCorner, "#FF0000");
        this.dispatchEvent(new CustomEvent('jjQrRread',{
          detail : code
        }));
        return;
      }
      else {
        //$topMessage("code null");	  
      }



    } else {
      $topMessage("비디오를 준비할수 없습니다. 카메라상태를 확인하세요");
      return;
    }

    requestAnimationFrame(this.scaner);
  }

  drawLine(begin, end, color) {
    let canvas2d = this.canvas.getContext("2d");
    canvas2d.beginPath();
    canvas2d.moveTo(begin.x, begin.y);
    canvas2d.lineTo(end.x, end.y);
    canvas2d.lineWidth = 4;
    canvas2d.strokeStyle = color;
    canvas2d.stroke();
  }  
  connectedCallback() {
    Jinja.require.load("qrread").then(e=>{
      this.render()
    });
  }
  disconnectedCallback() {
    clearTimeout(this.timer);
    // DOM에서 제거되었다. 엘리먼트를 정리하는 일을 하자.
  }
  attributeChangedCallback(attrName, oldVal, newVal) {
    // 속성이 추가/제거/변경되었다.
    //this[attrName] = newVal;
  }
  adoptedCallback(oldDoc, newDoc) {
    // 다른 Document에서 옮겨져 왔음
  }  
}

customElements.define('jj-qrreader', JJQRReader);	
/* ==JJRadio.640.class================ */

/**
 * @classdesc 라디오버튼 컴포넌트관리를 위한 클래스
 */
class JJRadio extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';
    this._radioName = Jinja.global.uuid();

    return {
      code: 'a,b,c,d,e',
      version: '640'
    };
  }

  /**
   * @desc code의 데이터로 option 항목을 생성한다.
   * @example -
   */
  _setcode() {
    this.formControl.$empty();
    if(this.options.code.startsWith('APP.')){
      let tableSplit = this.options.code.split(".");
      Jinja.code.applinkCode(this.options.code).then(result =>{
        this.bindCode(result.rows.map(row=>{
          return {
            "CODE": row[tableSplit[3]],
            "NAME": row[tableSplit[4]]
          }
        }));
      });
    } else if (this.options.code.split(',').length === 1) {
      this.bindCode(Jinja.code.getGroup(this.options.code));
    } else {
      this.options.code.split(',').forEach(data => {
        data = data.trim();

        let option = document.createElement('label');

        option.classList.add('radio-label');

        let radio = document.createElement('input');

        radio.type = 'radio';
        radio.name = this._radioName;
        radio.value = data;

        option.appendChild(radio);
        option.appendChild(document.createTextNode(data));

        this.formControl.appendChild(option);
      });
    }
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJRadio 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    this.formControl = document.createElement("div");
    this.controlContent.appendChild(this.formControl );
    
    this.formControl.classList.add("form-control");
    
    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');
    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);

    this._setcode();
    this.classList.add('jj-hitem');
    this.validMessage = '';

    this.value = this._value;

    return this;
  }

  /**
   * @static
   * @memberof JJRadio
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return [
      'data-domain',
      'data-label',
      'data-bind',
      'data-code',
      'data-min',
      'data-max',
      'data-mask',
      'data-default',
      'data-i18n',
      'data-required',
      'data-visible',
    ];
  }

  /**
   * @memberof JJRadio
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    if (this.controlContent.querySelector('input:checked')) {
      return this.controlContent.querySelector('input:checked').value;
    } else {
      return null;
    }
  }

  /**
   * @memberof JJRadio
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;

    if (this.controlContent) {
      this.controlContent
        .querySelectorAll('input')
        .forEach(el => (el.checked = false));

      let el = this.controlContent.querySelector(`[value="${val}"]`);

      if (el) el.checked = true;
    }
  }

  /**
   * @desc rows 데이터로 옵션항목을 생성한다.
   * @param {Object} - 코드목록
   * @example -
   */
  bindCode(rows) {
    this.formControl.$empty();

    if (rows && rows.length > 0) {
      rows.forEach(row => {
        let option = document.createElement('label');

        option.classList.add('radio-label');

        let radio = document.createElement('input');

        radio.type = 'radio';
        radio.name = this._radioName;
        radio.value = row.CODE;

        option.appendChild(radio);
        option.appendChild(document.createTextNode(row.NAME));

        this.formControl.appendChild(option);
      });
    }
  }
}

customElements.define('jj-item-radio', JJRadio);
/* ==JJRange.640.class================ */

/**
 * @classdesc Range 컴포넌트관리를 위한 클래스
 */
class JJRange extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJRange 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    let inputGroup = document.createElement('div');

    this.controlContent.appendChild(inputGroup);

    inputGroup.classList.add('input-group');

    let prepend = document.createElement('div');

    inputGroup.appendChild(prepend);
    prepend.classList.add('input-group-prepend');

    this.num = document.createElement('span');
    this.num.classList.add('input-group-text');

    prepend.appendChild(this.num);

    this.formControl = document.createElement('input');

    inputGroup.appendChild(this.formControl);

    this.formControl.classList.add('form-control');
    this.formControl.type = 'range';
    this.formControl.id = controlId;

    if (this.options.required) this.formControl.setAttribute('required', '');
    if (this.options.pattern)
      this.formControl.setAttribute('pattern', this.options.pattern);
    if (this.options.jjmask)
      this.formControl.setAttribute('data-mask', this.options.jjmask);
    if (this.options.placeholder)
      this.formControl.setAttribute('placeholder', this.options.placeholder);
    if (this.options.domain)
      this.formControl.setAttribute('data-valid-domain', this.options.domain);
    if (this.options.title)
      this.formControl.setAttribute('title', this.options.title);
    if (this.options.min)
      this.formControl.setAttribute('title', this.options.min);
    if (this.options.max)
      this.formControl.setAttribute('title', this.options.max);

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    this.value = this._value;

    this.formControl.addEventListener('input', e => {
      this._value = this.formControl.value;
      this.num.innerText = this._value;
    });

    return this;
  }

  /**
   * @memberof JJRange
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this._value;
  }

  /**
   * @memberof JJRange
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;

    if (this.formControl) {
      this.formControl.value = val;
      this.num.innerText = val;
    }
  }
}

customElements.define('jj-item-range', JJRange);
/* ==JJSelect.640.class================ */

/**
 * @classdesc 셀렉트박스 컴포넌트관리를 위한 클래스
 */
class JJSelect extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      "code": 'a,b,c,d,e',
      "required": false,
      "version": '640'
    };
  }

  /**
   * @desc code의 데이터로 option 항목을 생성한다.
   * @example -
   */
  _setcode() {
    this.options.code = this.options.code || 'a,b,c,d,e';
    if(this.options.code.startsWith('APP.')){
      let tableSplit = this.options.code.split(".");
      Jinja.code.applinkCodeSet(this.options.code).then(result =>{
        this.bindCode(result);
      });
      //Jinja.code.applinkSelectEl(this.formControl, this.options.code, !this.options.required);
    } else if (this.options.code.split(',').length === 1) {
      this.bindCode(Jinja.code.getGroup(this.options.code));
    } else {
      this.bindCode(this.options.code.split(',').map(data=>{
        return {
          "CODE": data.trim(),
          "NAME": data.trim()
        }
      }));
    }
  }



  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJSelect 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);
    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    this.formControl = document.createElement('select');
    this.controlContent.appendChild(this.formControl);
    this.formControl.classList.add('form-control');
    this.formControl.classList.id = this.formControl.id;

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    if(this.options.default){
      this.value = this.options.default;
    }

    this.formControl.addEventListener("input", e=>{
      // 만일 폼 내부에 있다면 개별검증은 아니한다.
      this.checkValidity();
    })
    
    this.formControl.addEventListener("input", e=>{
      // 만일 폼 내부에 있다면 개별검증은 아니한다.
      this.checkValidity();
    })

    this._optionRender();

    if(this.hasAttribute('data-link')){
      this.dispatchEvent(new CustomEvent('reactLinkChange', {
        "detail":{
          "el": this,
          "oldVal": null,
          "newVal": this.getAttribute('data-link')
        },
        "bubbles": true
      }));
    }
    
    
    /**
     * React 객체 생성후에 바인딩함 */
    // codeBind에 적용하여 주석처리함
    this.formControl.value = this._value;
    return this;
  }

  /**
   * @desc 옵션에 의한 컴포넌트의 속성을 부여한다
   * @example -
   */
  _optionRender(){
    //this.formControl.visible = false;
    //if(this.options.pattern) this.formControl.setAttribute("pattern", this.options.pattern);
    //if(this.options.domain) this.formControl.setAttribute("data-valid-domain",this.options.domain);
    //if(this.options.title) this.formControl.setAttribute("title",this.options.title);

    // 도메인 룰을 가져온다
    let domainField = this.dataset.domain;
    let domainRule;
    if (domainField){
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);


    if(this.options.required=="false") this.options.required = false;
    if(this.options.required=="true") this.options.required = true;

    if(this.options.disabled=="false") this.options.disabled = false;
    if(this.options.disabled=="true") this.options.disabled = true;

    if(this.options.readonly=="false") this.options.readonly = false;
    if(this.options.readonly=="true") this.options.readonly = true;

    if(this.options.multiple=="false") this.options.multiple = false;
    if(this.options.multiple=="true") this.options.multiple = true;

    if(this.hasAttribute('required')) this.options.required = true;
    if(this.hasAttribute('disabled')) this.options.disabled = true;
    if(this.hasAttribute('readonly')) this.options.readonly = true;
    if(this.hasAttribute('multiple')) this.options.multiple = true;


    if(this.controlLabel) {
      if(this.options.label) this.controlLabel.textContent = this.options.label;
    }
    if(this.formControl) {
      if(this.formControl.tagName=="INPUT"){
        if(this.options.type) this.formControl.type = this.options.type;
        if (this.options.type == "date"){
          this.formControl.setAttribute("max","2999-12-31");  
        }
        if(this.options.min) this.formControl.setAttribute("min",this.options.min);
        if(this.options.max) this.formControl.setAttribute("max",this.options.max);
        if(this.options.mask) this.formControl.setAttribute("mask",this.options.mask);
      }
      if(this.options.required) {
        this.formControl.setAttribute("required", "");
      } else {
        this.removeAttribute("data-required");
        this.formControl.removeAttribute("required");
      }
      if(this.options.disabled) {
        this.formControl.setAttribute("disabled", "disabled");
      } else {
        this.removeAttribute("data-disabled");
        this.formControl.removeAttribute("disabled");
      }
      if(this.options.readonly) {
        this.formControl.setAttribute("readonly", "readonly");
      } else {
        this.removeAttribute("data-readonly");
        this.formControl.removeAttribute("readonly");
      }

      if(this.options.multiple) {
        this.formControl.setAttribute("multiple", "multiple");
      } else {
        this.removeAttribute("data-multiple");
        this.formControl.removeAttribute("multiple");
      }

      this._setcode();
      
    }

    // codeBind에 적용하여 주석처리함
    //this.value = this._value;
  }  


  /**
   * @memberof JJSelect
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {

    if (this.options.multiple) {
      let result = [];

      this.formControl.querySelectorAll('option').forEach(el => {
        if (el.selected) result.push(el.value);
      });

      return result.join(',');
    } else {
      return this.formControl.value;
    }
  }

  /**
   * @memberof JJSelect
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;

    if (this.formControl) {
      if (this.options.multiple) {
        this.formControl
          .querySelectorAll('option')
          .forEach(el => (el.selected = false));

        val.split(',').forEach(v => {
          if (this.formControl.querySelector(`[value="${v}"]`)) {
            this.formControl.querySelector(`[value="${v}"]`).selected = true;
          }
        });
      } else {
        this.formControl.value = val;
      }
    }
  }

  /**
   * @desc rows 데이터로 option 항목을 생성한다.
   * @param {Object} - 코드목록
   * @example -
   */
  bindCode(rows) {
    this.formControl.$empty();

    if (!this.options.required) {
      let option = document.createElement('option');

      option.appendChild(document.createTextNode('-선택-'));
      option.value = '';

      this.formControl.appendChild(option);
    }

    if (rows && rows.length > 0) {
      let optgroups =[];
      // optgroup인지 먼저 파악한다
      if(rows[0].GROUP){
      	rows.forEach(row => {
          if(!optgroups.includes(row.GROUP)){
            let optgroup = document.createElement('optgroup');
            optgroup.setAttribute("label", row.GROUP);
            optgroups.push(row.GROUP);
            this.formControl.appendChild(optgroup);
          }
          
        })
      } 
      
      rows.forEach(row => {
        let option = document.createElement('option');

        option.appendChild(document.createTextNode(row.NAME));
        option.value = row.CODE;
				if(row.GROUP && optgroups.includes(row.GROUP)){
          this.formControl.querySelector(`[label="${row.GROUP}"]`).appendChild(option);      
        } else {
	        this.formControl.appendChild(option);
        }
      });
    }

    if(this._value){
      this.formControl.value = this._value;
      this.value = this._value;
    } else if(this.options.required) {
      this._value = rows[0] ? rows[0].CODE : '';
      this.formControl.value = this._value;
      this.value = this._value;
      this.dispatchEvent(new Event('input', { bubbles: true }));
    }

  }
}

customElements.define('jj-item-select', JJSelect);
/* ==JJTags.640.class================ */

/**
 * @classdesc Tags 컴포넌트관리를 위한 클래스
 */
class JJTags extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJTags 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    let inputGroup = document.createElement('div');

    this.controlContent.appendChild(inputGroup);

    inputGroup.setAttribute('class', 'input-group');

    this.items = document.createElement('span');

    inputGroup.appendChild(this.items);

    this.items.setAttribute('class', 'tag-items');

    this.tagControl = document.createElement('input');
    this.tagControl.setAttribute('class', 'tag-control');
    this.tagControl.setAttribute('placeholder', 'add tags');

    inputGroup.appendChild(this.tagControl);

    this.tagControl.type = 'text';
    this.tagControl.id = controlId;

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);
    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    this._optionRender();    
    return this;
  }


  /**
   * @desc 옵션에 의한 컴포넌트의 속성을 부여한다
   * @example -
   */
  _optionRender(){
    //this.formControl.visible = false;
    //if(this.options.pattern) this.formControl.setAttribute("pattern", this.options.pattern);
    //if(this.options.domain) this.formControl.setAttribute("data-valid-domain",this.options.domain);
    //if(this.options.title) this.formControl.setAttribute("title",this.options.title);

    // 도메인 룰을 가져온다
    let domainField = this.dataset.domain;
    let domainRule;
    if (domainField){
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);


    if(this.options.required=="false") this.options.required = false;
    if(this.options.required=="true") this.options.required = true;

    if(this.options.disabled=="false") this.options.disabled = false;
    if(this.options.disabled=="true") this.options.disabled = true;
    if(this.options.readonly=="false") this.options.readonly = false;
    if(this.options.readonly=="true") this.options.readonly = true;

    if(this.hasAttribute('required')) this.options.required = true;
    if(this.hasAttribute('disabled')) this.options.disabled = true;
    if(this.hasAttribute('readonly')) this.options.readonly = true;

  }  
  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.tagControl.addEventListener('input', e => {
      e.stopImmediatePropagation();
      e.stopPropagation();
      e.preventDefault();
    });

    this.items.addEventListener('click', e => {
      if (e.target.matches('.close')) {
        this.dispatchEvent(new Event('input', { bubbles: true }));
      }
    });

    this.tagControl.addEventListener('keydown', e => {
      let v = this.tagControl.value;

      if (e.keyCode == 13 && v) {
        this.tagControl.value = '';
        if(!this.items.querySelector(`[value="${v}"]`)){
          let html =`
            <span class="alert alert-info alert-dismissible fade show" role="alert" value="${v}">
            ${v}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">×</span>
            </button>
            </span>`;

          Jinja.dom.append(this.items, html);

          this.dispatchEvent(new Event('input', { bubbles: true }));
        }
      }
    });
  }

  /**
   * @memberof JJTags
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    let result = [];

    this.items
      .querySelectorAll('.alert')
      .forEach(el => result.push(el.getAttribute('value')));
    this._value = result.join(',');

    return this._value;
  }

  /**
   * @memberof JJTags
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val||"";

    let html = ``;
		
    if(this._value){
      val.split(',').forEach(v => {
        if (v) {
          html +=
            `<span class="alert alert-info alert-dismissible fade show" role="alert" value="${v}">` +
            `${v}` +
            `<button type="button" class="close" data-dismiss="alert" aria-label="Close">` +
            `<span aria-hidden="true">×</span>` +
            `</button>` +
            `</span>`;
        }
      });
    }

    if (this.items) this.items.innerHTML = html;
  }
}

customElements.define('jj-item-tags', JJTags);
/* ==JJTextarea.640.class================ */

/**
 * @classdesc Textarea 컴포넌트관리를 위한 클래스
 */
class JJTextarea extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJText 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    this.formControl = document.createElement('textarea');
    this.controlContent.appendChild(this.formControl);
    if(this.getAttribute('rows')){
       this.formControl.setAttribute('rows', this.getAttribute('rows'));
    }

    this.formControl.classList.add('form-control');
    this.formControl.id = controlId;

    if (this.options.required) this.formControl.setAttribute('required', '');
    if (this.options.placeholder)
      this.formControl.setAttribute('placeholder', this.options.placeholder);
    if (this.options.domain)
      this.formControl.setAttribute('data-valid-domain', this.options.domain);
    if (this.options.title)
      this.formControl.setAttribute('title', this.options.title);

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    this.formControl.value = this._value;

    this.formControl.addEventListener('input', e => {
      this._value = this.formControl.value;
    });

    return this;
  }
}

customElements.define('jj-item-textarea', JJTextarea);
/* ==JJLabel.640.class================ */

/**
 * @classdesc Text 컴포넌트관리를 위한 클래스
 */
class JJLabel extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      "type": "text",
      "version": "640"
    };
  }

  /**
   * @desc _render의 전처리를 한다.
   * @example -
   */
  _setRender() {
    this.setAttribute('data-render', 'jj-item');
    this.$empty();
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJText 컴포넌트
   * @example -
   */
  _render() {
    // 도메인 룰을 가져온다
    let domainField = this.dataset.domain;
    let domainRule;
    if (domainField){
      domainRule = Jinja.validate.get(domainField);
    }
		
		Object.assign(this.options, domainRule, this.dataset);

		if(this.options.required=="false") this.options.required = false;
		if(this.options.required=="true") this.options.required = true;
		
    let controlId = Jinja.global.uuid();
    this.controlLabel = document.createElement("label");
    this.controlLabel.classList.add("control-label");
    this.controlLabel.setAttribute("for", controlId);
    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement("div");
    this.controlContent.classList.add("control-content");
    
    this.formControl = document.createElement("label");
		this.controlContent.appendChild(this.formControl );
    this.formControl.classList.add("form-control");
    this.formControl.id = controlId;

		this.helpBlock = document.createElement("span");
		this.controlContent.appendChild(this.helpBlock);
    
		this.helpBlock.classList.add("help-block");
		
  	this.classList.add("form-group");
    
		if(this.options.css) 	this.classList.add(this.options.css);
		if(this.options.style) this.setAttribute("style", this.options.style);
		if(this.options.bind) {
      this.dataset.bind = this.options.bind;
    }
		if(this.options.exp) {
      this.formControl.innerText=this.options.exp;
	    this.formControl.title = '연산식: ' + this.options.exp;
    }
		
		this.appendChild(this.controlLabel);
		this.appendChild(this.controlContent);
    
    this.classList.add("jj-hitem");
    this.validMessage = "";
    
    
    this._optionRender();
		return this;
  }

// 	dataBind(val){
//     debugger;
// // 		this._value = val;
// //     if (typeof(val) == "number"){
// // 	    this.formControl.innerText=val.$toIntFormat();
// //     } else {
// //       this.formControl.innerText=parseInt(val).$toIntFormat();
// //     }
// //    	this.dispatchEvent(new CustomEvent('input', { bubbles: true }));  
    
//   }

	dataBindSet(node, val){
	
    if (typeof(val) == "number"){
      this._value = val;
	    node.textContent = this._value.$toIntFormat();
    } else {
      this._value = parseInt(val);
      node.textContent = this._value.$toIntFormat();
    }
   	this.dispatchEvent(new CustomEvent('input', { bubbles: true }));  
  }
    
  
  /**
   * @memberof JJText
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
		let result = this._value;
    return result;
  }

  /**
   * @memberof JJText
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(v) {
    this._value = v;
 //   this.formControl.innerText = this._value;
    
    if (!v){
      this._value = v;
      this.formControl.textContent = "";
    } 
    else {
      if(["date", "datetime-local"].includes(this.options.type)){
        v = new Date(v);
      }

      this._value = v;
      let dispValue = v;
      
      if(this.options.code){
        dispValue = Jinja.code.getCodeName(this.options.code, dispValue);
      }
      
      switch(this.options.type){
        case "date":
          dispValue = this._value.$toFormat("yyyy-MM-dd");   
          break;
        case "datetime-local":
          dispValue = this._value.$toFormat("yyyy-MM-dd HH:mm:ss");   
          break;
        case "INT":
          dispValue = parseInt(dispValue).$toIntFormat();
          break;
        case "FLOAT":
          dispValue = parseFloat(dispValue).$toFloatFormat();
          break;
        default:
          break;
      }
      
      if (this.hasAttribute('rows')){
      	this.formControl.innerText = dispValue;    
      } else {
        this.formControl.textContent = dispValue;
      }
      
    }
    
  }

  
  /**
   * @desc 메시지가 유무 여부를 판별하여 Boolean값을 반환한다.
   * @return {Boolean} - 메시지 유무여부
   * @example -
   */
  checkValidity() {
    return true;
  }  
}

customElements.define('jj-item-label', JJLabel);
/* ==JJAttach.640.class================ */
class JJAttach  {
  constructor(el,options) {
    this.el = el;
    this.el.classList.add('jj-attch');
    this.el.classList.add('file-empty');

    this.options={
      "mode": "readonly",
      "message":"",
      "fileType": "file",  // file, image
      "data":{
        "images":[],
        "files":[],
        "link":{}
      }
    };
    Object.assign(this.options, this.el.dataset, options);
    
    this.init();
  }

  get value() {
    let files = [], indexs=[];
    this.options.data.files.forEach((file,index)=>{
      //신규파일만 대상으로 업로드함
      if(!file.URI || file.URI.startsWith("data")){
        indexs.push(this.options.data.files[index]); 
        // react이기 때문에
        files.push(file.FILEOBJ.$revoke);
      }
    });
    this.options.data.images.forEach((file,index)=>{
      //신규파일만 대상으로 업로드함
      if(!file.URI || file.URI.startsWith("data")){
        indexs.push(this.options.data.images[index]); 
        // react이기 때문에
        files.push(file.FILEOBJ.$revoke);
      }
    });
    
    
    return new Promise((resole, reject)=>{
      if (files.length){
        Jinja.ajax.imageUpload(files)
          .then(result=>result.rows.forEach((file,index)=>{
	          indexs[index].URI = file.path+file.fileId;
	          delete indexs[index].FILEOBJ;
        }))
          .then(()=>{
          resole(Jinja.global.string(this.options.data));
        })
      } 
      else {
        resole(Jinja.global.string(this.options.data));
      }
    })
  }

  set value(attchStr) {
    this.options.data.files = [];
    this.options.data.images = [];
    this.options.data.link = {};
    
    let attch = Jinja.global.json(attchStr);
    if (attch.files && Array.isArray(attch.files) && attch.files.length){
      this.options.data.files = attch.files;    
    }
    if (attch.images && Array.isArray(attch.images) && attch.images.length){
      this.options.data.images = attch.images;    
    }
    if(attch.link && attch.link.html){
      this.options.data.link = attch.link;    
      this.el.querySelector(".attch-link").innerHTML = this.options.data.link.html;
    }
    this.showEmpty();
  }  

  init() {
    this.render();
    this.bo = new JJReact(this.el, this.options);
    if(this.options.mode == "readonly"){} 
    else {
      this.onFileChangeHandle = this.onFileChange.bind(this);
      this.onImageChangeHandle = this.onImageChange.bind(this);
      
      this.inputFile  = this.el.querySelector(`input[type="file"].attFile`);
      this.inputImage  = this.el.querySelector(`input[type="file"].attImage`);
      this.inputCamera  = this.el.querySelector(`input[type="file"].attCamara`);

      this.inputFile.addEventListener("change", this.onFileChangeHandle);
      this.inputImage.addEventListener("change", this.onImageChangeHandle);
      this.inputCamera.addEventListener("change", this.onImageChangeHandle);
    }
    this.el.addEventListener("click", e=>{
      if(e.target.matches('[data-remove-image]')){
        let index = parseInt(e.target.dataset.removeImage);
        this.removeImage(index);	    
      }
      if(e.target.matches('[data-remove-index]')){
        let index = parseInt(e.target.dataset.removeIndex);
        this.removeFile(index);	    
      }
      if(e.target.matches('[data-download-index]')){
        let index = parseInt(e.target.dataset.downloadIndex);
        this.downloadFile(index);	    
      }
    })
    

    this.el.addEventListener("dragover", e => {
      e.preventDefault();
      this.el.classList.add("win-drag");
    });
    this.el.addEventListener("dragleave", e =>{
      this.el.classList.remove("win-drag");
    });
    this.el.addEventListener("drop", e => {
      e.stopPropagation();
      e.preventDefault();
      var data = e.dataTransfer;

      
      if (data.types[0] == "Files" && this.options.fileType == "file") {
        this.attchFiles(data.files);
      } else if (data.types[0] == "Files" && this.options.fileType == "image") {
        this.attchFiles(data.files);
        //this.attchImages(data.files);
      } else {
        
      }
	    this.showEmpty();

      this.el.classList.remove("win-drag");

    });
    
    this.showEmpty();
  }

  onFileChange(e){
    this.attchFiles(e.target.files);
    e.target.value = null;
    this.showEmpty();
  }
  
  onImageChange(e){
		this.attchImages(e.target.files);	
    e.target.value = null;
    this.showEmpty();
  }

  render (){
    this.el.$empty();
    this.el.setAttribute("file-type", this.options.fileType);
    if(this.options.fileType == "file"){
      return this.renderFile();
    }else {
      return this.renderImage();
    }
  }
  
  renderFile(){
    let html = `
<div class="attch-link"></div>	
<div class="attch-image card-columns" j-for="row in data.images" j-page=100></div>
<div class="attch-file">
  <table class="table bordered">
    <colGroup>
      <col style="width:40px">
      <col style="">
      <col style="width:100px">
      <col style="width:20px">
    </colGroup>
    <thead>
      <tr>
        <th>No</th>
        <th>fileName</th>
        <th>size(Byte)</th>
        <th>&nbsp;</th>
      </tr>
    </thead>
    <tbody j-for="row in data.files"  j-page=100>
    </tbody>
  </table>
</div>	
<div class="attch-link"></div>	
<div class="alert alert-info empty" role="alert"></div>
<input class="attFile" type="file" multiple hidden>
<input class="attImage" type="file" multiple accept="image/*" hidden>
<input class="attCamara" type="file" accept="image/*" capture="camera" hidden >
`;   

    this.el.innerHTML = html;

    html = '<div class="j-card" data-file-id="">';
    html += '<div class="image-warp">';
    html += '	<img class="card-img-top img-responsive" img-src="${row.URI}" alt="Card image cap">';	
    html += '</div>';
    html += '<div class="card-body">';
    html += '  <h5 class="card-title text-nowrap" title="${row.NAME}">${row.NAME}</h5>';
    html += '  <p class="card-text" title="${row.TYPE}">';
    html += '  ${row.TYPE||""}';
    html += '  </p>';
    html += '</div>';
    
    html =  '<div class="card">';
    html += '  <img img-src="${Jinja.getCdnPath(row.URI)}" class="card-img-top" alt="${row.NAME}">';
    html += '  <div class="card-body">';
    html += '   <h5 class="card-title">${row.NAME}</h5>';
    html += '   <p class="card-text" >${row.TYPE||""}</p>';
		if(this.options.mode !== "readonly"){    
      html += '   <button data-remove-image="${row._index}" ';
      html += '     class="btn btn-warning btn-sm waves-effect waves-light">';
      html += '     <i class="fa fa-times-circle mr-1"></i>Remove</button>';
    }
    html += '  </div>';
    html += '</div>';
    
    
    
      
    
		this.el.querySelector('.attch-image').innerHTML = html;   
    
    html = '<tr file-index="${row._index}">';
    html += '<td>${row._index+1}</td>';
    html += '  <td>';
    html += '    <a href="${Jinja.getCdnPath(row.URI)}" download="${row.NAME}">${row.NAME}</a>';
    html += '  </td>';
    html += '  <td>${row.SIZE}</td>';
    html += '  <td>';
    if(this.options.mode == "readonly"){
      html += '    <button data-download-index="${row._index}" type="button" class="btn btn-link">';
      html += '    	<i class="fa fa-floppy-o" aria-hidden="true"></i>';
      html += '    </button>';

    } else {
      html += '    <button data-remove-index="${row._index}" type="button" class="btn btn-warning btn-sm">';
      html += '    	<i class="fa fa-close" aria-hidden="true"></i>';
      html += '    </button>';
    }
    html += '  </td>';
    html += '</tr>';

    this.el.querySelector('tbody').innerHTML = html;   

    
    
  }

  renderImage(){
    let html;
    if(this.options.mode == "readonly"){    
      html = `
<div style="">
<div class="post"  j-for="row in data.files">
</div>
</div>
<div class="alert alert-info empty" role="alert"></div>
`;   

      this.el.innerHTML = html;

      html = '<div class="imageWrap">';
      html += ' <img img-src="${Jinja.getCdnPath(row.URI)}" class="img-responsive" alt="${row.NAME}">';
      html += '</div>';

      this.el.querySelector('.post').innerHTML = html;   

    } 
    else {
      html = `
<div style="" class="jj-inline">
<div class="post"  j-for="row in data.files">
</div>
</div>
<div class="alert alert-info empty" role="alert"></div>
<input class="attFile" type="file" multiple hidden>
<input class="attImage" type="file" multiple accept="image/*" hidden>
<input class="attCamara" type="file" multiple accept="image/*" capture="camera" hidden >
`;   

      this.el.innerHTML = html;

      html = '<a>';
      html += ' <img src="${Jinja.getCdnPath(row.URI)}"  alt="${row.NAME}">';
      html += ' <h5>';
      html += '   <button data-remove-index="${row._index}" type="button" class="btn btn-warning btn-sm">';
      html += '	    <i class="fa fa-close" aria-hidden="true"></i>';
      html += '   </button>';
      html += ' </h5>';
      html += '</a>';

      this.el.querySelector('.post').innerHTML = html;       
    }

  }

  attchLink(url){
    
    Jinja.ajax.getLinkInfo(url)
    .then(result=>{
      if(result.html){
        this.options.data.link = result;
        this.el.querySelector('.attch-link').innerHTML = result.html;
      }
    })
    .catch(ex=>$topMessage("파일을 찾을수없습니다"));  
  }

  attchFiles(files){
    let rows = [];
    for (var i = 0; i < files.length; i++) {
      let row = {
        "NAME": files[i].name,
        "SIZE": files[i].size,
        "TYPE": files[i].type,
        "URI":"",
        "FILEOBJ": files[i]
      };

      // react로 파일표시됨	
      let lens = this.options.data.files.push(row);
      var reader = new FileReader();
      reader.addEventListener("load", readEvent=>{
        this.options.data.files[lens-1].URI = readEvent.target.result;
      });
      reader.readAsDataURL(files[i]);        
    }
  }
  
  attchImages(files){
    for (var i = 0; i < files.length; i++) {
      let row = {
        "NAME": files[i].name,
        "SIZE": files[i].size,
        "TYPE": files[i].type,
        "URI":"",
        "FILEOBJ": files[i]
      };

      // react로 파일표시됨	
      let lens = this.options.data.images.push(row);
      var reader = new FileReader();
      reader.addEventListener("load", readEvent=>{
        this.options.data.images[lens-1].URI = readEvent.target.result;
      });
      reader.readAsDataURL(files[i]);        
    }
    
  }
  
  showEmpty(){
		if(this.options.message){
      if (this.options.data.files.length){
        this.el.classList.remove("file-empty");      
      } else {
        this.el.classList.add("file-empty");      
      }
    } else {
      this.el.classList.remove("file-empty");      
    }

  }

  clear(){
    this.el.classList.add("file-empty");      
    this.options.data.images = [];
    this.options.data.files = [];
    this.options.data.link = {};
    this.el.querySelector(".attch-link").innerHTML = "";
  }
  
  attach (type) {
    switch(type){
      case "image": 
        this.inputImage.click();
        break;
      case "camera": 
        this.inputCamera.click();
        break;
      default:  
        this.inputFile.click();
        break;
    }
  }

  removeImage(removeIndex){
    this.options.data.images.removeIndex(removeIndex);
    this.showEmpty();
  }
  removeFile(fileIndex){
    this.options.data.files.removeIndex(fileIndex);
    this.showEmpty();
  }
  downloadFile(fileIndex){
    this.el.querySelector(`tr[file-index="${fileIndex}"] a[download]`).click();
  }

  upload () {
    let files = [],
        // 변경된 내용만 업로드하기 위해서 파악함
        indexs=[]; 

    this.options.data.files.forEach((file,index)=>{
      //신규파일만 대상으로 업로드함
      if(!file.URI){
        indexs.push(index); 
        // react이기 때문에
        files.push(file.FILEOBJ.$revoke);
      }
    });

    Jinja.ajax.imageUpload(files)
      .then(result=>result.rows.forEach((file,index)=>{
      this.options.data.files[indexs[index]].URI = file.path+file.fileId;
    }))
  }

  downLoadAll (){
    this.el.querySelectorAll('a[download]').forEach(el=>el.click())
  }

}/* ==JJSyncAttach.640.class================ */
class JJSyncAttach  {
  constructor(el,options) {
    this.el = el;
    this.el.classList.add('jj-attch');
    this.el.classList.add('file-empty');

    this.options={
      "mode": "readonly",
      "message":"",
      "fileType": "file",  // file, image
      "data":{
        "images":[],
        "files":[],
        "link":{}
      }
    };
    Object.assign(this.options, this.el.dataset, options);

    this.init();
  }

  get value() {
    return Jinja.global.string(this.options.data);
  }

  set value(attchStr) {
    this.options.data.files = [];
    this.options.data.images = [];
    this.options.data.link = {};

    let attch = Jinja.global.json(attchStr);
    if (attch.files && Array.isArray(attch.files) && attch.files.length){
      this.options.data.files = attch.files;    
    }
    if (attch.images && Array.isArray(attch.images) && attch.images.length){
      this.options.data.images = attch.images;    
    }
    if(attch.link && attch.link.html){
      this.options.data.link = attch.link;    
      this.el.querySelector(".attch-link").innerHTML = this.options.data.link.html;
    }
    this.showEmpty();
  }  

  init() {
    this.render();

    this.bo = new JJReact(this.el, this.options);

    if(this.options.mode == "readonly"){} 
    else {
      this.onFileChangeHandle = this.onFileChange.bind(this);
      this.onImageChangeHandle = this.onImageChange.bind(this);

      this.inputFile  = this.el.querySelector(`input[type="file"].attFile`);
      this.inputImage  = this.el.querySelector(`input[type="file"].attImage`);
      this.inputCamera  = this.el.querySelector(`input[type="file"].attCamara`);

      this.inputFile.addEventListener("change", this.onFileChangeHandle);
      this.inputImage.addEventListener("change", this.onImageChangeHandle);
      this.inputCamera.addEventListener("change", this.onImageChangeHandle);
    }
    this.el.addEventListener("click", e=>{
      if(e.target.matches('[data-remove-image]')){
        let index = parseInt(e.target.dataset.removeImage);
        this.removeImage(index);	    
      }
      if(e.target.matches('[data-remove-index]')){
        let index = parseInt(e.target.dataset.removeIndex);
        this.removeFile(index);	    
      }
      if(e.target.matches('[data-download-index]')){
        let index = parseInt(e.target.dataset.downloadIndex);
        this.downloadFile(index);	    
      }
      if(e.target.matches('[fileviewer]')){
        let src = e.target.getAttribute('fileviewer');
        this.fileViewer(src);	    
      }
    })



    this.el.addEventListener("dragover", e => {
      e.preventDefault();
      this.el.classList.add("win-drag");
    });
    this.el.addEventListener("dragleave", e =>{
      this.el.classList.remove("win-drag");
    });
    this.el.addEventListener("drop", e => {
      e.stopPropagation();
      e.preventDefault();
      var data = e.dataTransfer;


      if (data.types[0] == "Files" && this.options.fileType == "file") {
        this.attchFiles(data.files);
      } else if (data.types[0] == "Files" && this.options.fileType == "image") {
        this.attchFiles(data.files);
        //this.attchImages(data.files);
      } else {

      }
      this.showEmpty();

      this.el.classList.remove("win-drag");

    });

    this.showEmpty();
  }

  onFileChange(e){
    this.attchFiles(e.target.files);
    e.target.value = null;
    this.showEmpty();
  }

  onImageChange(e){
    this.attchImages(e.target.files);	
    e.target.value = null;
    this.showEmpty();
  }

  fileViewer(src){
    JJFormFull.open('fileViewer.uc', {
      "src":src
    });    
  }
  render (){
    this.el.$empty();
    this.el.setAttribute("file-type", this.options.fileType);
    if(this.options.fileType == "file"){
      return this.renderFile();
    }else {
      return this.renderImage();
    }
  }

  renderFile(){
    let html = `
<div class="attch-link"></div>	
<div class="attch-image card-columns" j-for="row in data.images" j-page=100></div>
<div class="attch-file">
<table class="table bordered">
<colGroup>
<col style="width:40px">
<col style="">
<col style="width:100px">
<col style="width:20px">
</colGroup>
<thead>
<tr>
<th>No</th>
<th>fileName</th>
<th>size(Byte)</th>
<th>&nbsp;</th>
</tr>
</thead>
<tbody j-for="row in data.files"  j-page=100>
</tbody>
</table>
</div>	
<div class="attch-link"></div>	
<div class="alert alert-info empty" role="alert"></div>
<input class="attFile" type="file" multiple hidden>
<input class="attImage" type="file" multiple accept="image/*" hidden>
<input class="attCamara" type="file" accept="image/*" capture="camera" hidden >
`;   

    this.el.innerHTML = html;

    html = '<div class="j-card" data-file-id="">';
    html += '<div class="image-warp">';
    html += '	<img class="card-img-top img-responsive" img-src="${row.URI}" alt="Card image cap">';	
    html += '</div>';
    html += '<div class="card-body">';
    html += '  <h5 class="card-title text-nowrap" title="${row.NAME}">${row.NAME}</h5>';
    html += '  <p class="card-text" title="${row.TYPE}">';
    html += '  ${row.TYPE||""}';
    html += '  </p>';
    html += '</div>';

    html =  '<div class="card">';
    html += '  <img img-src="${Jinja.getCdnPath(row.URI)}" class="card-img-top" alt="${row.NAME}">';
    html += '  <div class="card-body">';
    html += '   <h5 class="card-title">${row.NAME}</h5>';
    html += '   <p class="card-text" >${row.TYPE||""}</p>';
    if(this.options.mode !== "readonly"){    
      html += '   <button data-remove-image="${row._index}" ';
      html += '     class="btn btn-warning btn-sm waves-effect waves-light">';
      html += '     <i class="fa fa-times-circle mr-1"></i>Remove</button>';
    }
    html += '  </div>';
    html += '</div>';





    this.el.querySelector('.attch-image').innerHTML = html;   

    html = '<tr file-index="${row._index}">';
    html += '<td>${row._index+1}</td>';
    html += '  <td>';
    html += '    <a href="${Jinja.getCdnPath(row.URI)}" download="${row.NAME}">${row.NAME}</a>';
    html += '    <button fileviewer="${Jinja.getCdnPath(row.URI)}" type="button" class="btn btn-link">';
    html += '    	<i class="fa fa-floppy-o" aria-hidden="true">미리보기</i>';
    html += '    </button>';
    html += '  </td>';
    html += '  <td>${row.SIZE}</td>';
    html += '  <td>';
    if(this.options.mode == "readonly"){
      html += '    <button data-download-index="${row._index}" type="button" class="btn btn-link">';
      html += '    	<i class="fa fa-floppy-o" aria-hidden="true"></i>';
      html += '    </button>';

    } else {
      html += '    <button data-remove-index="${row._index}" type="button" class="btn btn-warning btn-sm">';
      html += '    	<i class="fa fa-close" aria-hidden="true"></i>';
      html += '    </button>';
    }
    html += '  </td>';
    html += '</tr>';

    this.el.querySelector('tbody').innerHTML = html;   



  }

  renderImage(){
    let html;
    if(this.options.mode == "readonly"){    
      html = `
<div style="">
<div class="post"  j-for="row in data.files">
</div>
</div>
<div class="alert alert-info empty" role="alert"></div>
`;   

      this.el.innerHTML = html;

      html = '<div class="imageWrap">';
      html += ' <img img-src="${Jinja.getCdnPath(row.URI)}" class="img-responsive" alt="${row.NAME}">';
      html += '</div>';

      this.el.querySelector('.post').innerHTML = html;   

    } 
    else {
      html = `
<div style="" class="jj-inline">
<div class="post"  j-for="row in data.files">
</div>
</div>
<div class="alert alert-info empty" role="alert"></div>
<input class="attFile" type="file" multiple hidden>
<input class="attImage" type="file" multiple accept="image/*" hidden>
<input class="attCamara" type="file" multiple accept="image/*" capture="camera" hidden >
`;   

      this.el.innerHTML = html;

      html = '<a>';
      html += ' <img src="${Jinja.getCdnPath(row.URI)}"  alt="${row.NAME}">';
      html += ' <h5>';
      html += '   <button data-remove-index="${row._index}" type="button" class="btn btn-warning btn-sm">';
      html += '	    <i class="fa fa-close" aria-hidden="true"></i>';
      html += '   </button>';
      html += ' </h5>';
      html += '</a>';

      this.el.querySelector('.post').innerHTML = html;       
    }

  }

  attchLink(url){

    Jinja.ajax.getLinkInfo(url)
      .then(result=>{
      if(result.html){
        this.options.data.link = result;
        this.el.querySelector('.attch-link').innerHTML = result.html;
      }
    })
      .catch(ex=>$topMessage("파일을 찾을수없습니다"));  
  }

  attchFiles(files){
    Jinja.ajax.imageUpload(files)
      .then(result=>result.rows.forEach((file,index)=>{
      let row = {
        "NAME": file.fileName,
        "SIZE": file.fileSize,
        "TYPE": file.type,
        "URI": file.path+file.fileId
      };

      this.options.data.files.push(row);        
      this.el.dispatchEvent(new Event('fileChange', { bubbles: true }));
    }))

  }

  attchImages(files){
    Jinja.ajax.imageUpload(files)
      .then(result=>result.rows.forEach((file,index)=>{
      let row = {
        "NAME": file.fileName,
        "SIZE": file.fileSize,
        "TYPE": file.type,
        "URI": file.path+file.fileId
      };

      this.options.data.images.push(row);        
      this.el.dispatchEvent(new Event('fileChange', { bubbles: true }));
    }))
  }

  showEmpty(){
    if(this.options.message){
      if (this.options.data.files.length){
        this.el.classList.remove("file-empty");      
      } else {
        this.el.classList.add("file-empty");      
      }
    } else {
      this.el.classList.remove("file-empty");      
    }

  }

  clear(){
    this.el.classList.add("file-empty");      
    this.options.data.images = [];
    this.options.data.files = [];
    this.options.data.link = {};
    this.el.querySelector(".attch-link").innerHTML = "";
  }

  attach (type) {
    switch(type){
      case "image": 
        this.inputImage.click();
        break;
      case "camera": 
        this.inputCamera.click();
        break;
      default:  
        this.inputFile.click();
        break;
    }
  }

  removeImage(removeIndex){
    this.options.data.images.removeIndex(removeIndex);
    this.showEmpty();
    this.el.dispatchEvent(new Event('fileChange', { bubbles: true }));
  }
  removeFile(fileIndex){
    this.options.data.files.removeIndex(fileIndex);
    this.showEmpty();
    this.el.dispatchEvent(new Event('fileChange', { bubbles: true }));
  }
  downloadFile(fileIndex){
    this.el.querySelector(`tr[file-index="${fileIndex}"] a[download]`).click();
  }

  upload () {
    let files = [],
        // 변경된 내용만 업로드하기 위해서 파악함
        indexs=[]; 

    this.options.data.files.forEach((file,index)=>{
      //신규파일만 대상으로 업로드함
      if(!file.URI){
        indexs.push(index); 
        // react이기 때문에
        files.push(file.FILEOBJ.$revoke);
      }
    });

    Jinja.ajax.imageUpload(files)
      .then(result=>result.rows.forEach((file,index)=>{
      this.options.data.files[indexs[index]].URI = file.path+file.fileId;
    }))
  }

  downLoadAll (){
    this.el.querySelectorAll('a[download]').forEach(el=>el.click())
  }

}/* ==JJFile.640.class================ */

/**
 * @classdesc 파일 컴포넌트관리를 위한 클래스
 */
class JJFile extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      fileType: 'file',
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @return {Element} - JJFile 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    let attchEl = document.createElement('div');

    this.controlContent.appendChild(attchEl);

    this.jjAttch = new JJSyncAttach(attchEl, {
      mode: 'edit',
      fileType: this.options.fileType,
    });

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    return this;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.controlContent.addEventListener('input', e => {
       e.stopImmediatePropagation();
       e.stopPropagation();
       e.preventDefault();
    });
    this.controlContent.addEventListener('fileChange', e => {
      this.dispatchEvent(new Event('input', { bubbles: true }));
    });

    
    this.controlLabel.addEventListener('click', e => {
      this.upload();
    });
  }

  /**
   * @memberof JJFile
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.jjAttch.value;
  }

  /**
   * @memberof JJFile
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    if (this.jjAttch) {
       if(val instanceof Promise){
         val.then(result => {
           this.jjAttch.value = result;
					 this._value = result;           
         });
       } else {
        this.jjAttch.value = val; 
				this._value = val;         
       }
    }
  }

  /**
   * @desc 지정한 파일유형에 해당하는 업로드창을 호출한다.
   * @param {String} - 파일유형
   * @example -
   */
  upload(type) {
    this.jjAttch.attach(type);
  }
}

customElements.define('jj-item-file', JJFile);
/* ==JJDateBetween.640.class================ */

/**
 * @classdesc Between 컴포넌트관리를 위한 클래스
 */
class JJDateBetween extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._baseDate = new Date();
    this._value = '';

    return {
      type: 'DAY',
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @return {Element} - JJBetween 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    this.dataset.bindGroup = this.options.bindGroup||"";
    
    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');

    if (this.options.i18n)
      this.controlLabel.setAttribute('data-i18n', this.options.i18n);

    this.controlLabel.setAttribute('for', controlId);
    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    this.formControlFrom = document.createElement('input');
    this.controlContent.appendChild(this.formControlFrom);

    this.formControlFrom.classList.add('form-control');
    this.formControlFrom.type = this.options.type;
    this.formControlFrom.dataset.type = this.options.type;
    this.formControlFrom.id = controlId;

    let betweenLabel = document.createElement('label');

    betweenLabel.classList.add('between-label');
    betweenLabel.appendChild(document.createTextNode('-'));

    this.controlContent.appendChild(betweenLabel);

    this.formControlTo = document.createElement('input');
    this.controlContent.appendChild(this.formControlTo);

    this.formControlTo.classList.add('form-control');
    this.formControlTo.type = this.options.type;
    this.formControlTo.dataset.type = this.options.type;

    if (this.options.type == 'date') {
      this.formControlFrom.setAttribute('max', '2999-12-31');
      this.formControlTo.setAttribute('max', '2999-12-31');
    } else {
      this.formControlFrom.removeAttribute('max');
      this.formControlTo.removeAttribute('max');
    }

    if (this.options.required) this.formControl.setAttribute('required', '');

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);
    this.helpBlock.classList.add('help-block');
    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bindGroup) {
      this.formControlFrom.dataset.bind = this.options.bindGroup.split(",")[0];
      this.formControlTo.dataset.bind = this.options.bindGroup.split(",")[1];
    } 

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);
    this.classList.add('jj-hitem');
    this.validMessage = '';

    this.value = this._value;

    return this;
  }


  /**
   * @memberof JJBetween
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
		return [this.formControlFrom.value, this.formControlTo.value];
  }

  /**
   * @memberof JJBetween
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._value = val;
    if (this.formControlTo) {
      this.formControlFrom.value = val[0];
      this.formControlTo.value = val[1];
    }
  }

  dataBind(node, val){
    let format = "yyyy-MM-dd";
    if( this.options.type == "datetime-local"){
      format = "yyyy-MM-ddTHH:mm:ss";
    } 
    
    if(Jinja.global.isDate(val)){
  		node.value = val.$toFormat(format);
    } else {
      node.value = (new Date(val)).$toFormat(format);
    }
    
  }
  dataBindGet(node){
    return new Date(node.value);
  }
  /**
   * @desc 지정한 name, value로 옵션을 설정한다.
   * @param {String} - 옵션명
   * @param {*} - 옵션
   * @example -
   */
  option(name, value) {
    this.options[name] = value;

    switch (name) {
      case 'label': {
        if (this.controlLabel) {
          this.controlLabel.textContent = value;
        }

        break;
      }
      case 'type': {
        if(this.formControlFrom){
          this.formControlFrom.disabled = false;

          let _f;

          switch (value) {
            case 'YEAR':
              this.formControlFrom.setAttribute('max', '2999');
              this.formControlFrom.type = 'number';
              this.formControlTo.setAttribute('max', '2999');
              this.formControlTo.type = 'number';
              this.value = [
                this._baseDate.getFullYear() - 5,
                this._baseDate.getFullYear()
              ];

              break;
            case 'MONTH':
              this.formControlFrom.setAttribute('max', '2999-12');
              this.formControlFrom.type = 'month';
              this.formControlTo.setAttribute('max', '2999-12');
              this.formControlTo.type = 'month';

              _f = new Date(this._baseDate);
              _f.$addMonth(-11);

              this.value = [
                _f.$toFormat('yyyy-MM'),
                this._baseDate.$toFormat('yyyy-MM')
              ];

              break;
            case 'DAY':
              this.formControlFrom.setAttribute('max', '2999-12-31');
              this.formControlFrom.type = 'date';
              this.formControlTo.setAttribute('max', '2999-12-31');
              this.formControlTo.type = 'date';

              _f = new Date(this._baseDate);
              _f.$addMonth(-1);

              this.value = [
                _f.$toFormat('yyyy-MM-dd'),
                this._baseDate.$toFormat('yyyy-MM-dd')
              ];

              break;
            case 'TIME':
              this.formControlFrom.setAttribute('max', '2999-12-31');
              this.formControlFrom.type = 'date';
              this.formControlTo.setAttribute('max', '2999-12-31');
              this.formControlTo.type = 'date';
              this.value = [
                this._baseDate.$toFormat('yyyy-MM-dd'),
                this._baseDate.$toFormat('yyyy-MM-dd')
              ];
              this.formControlFrom.disabled = true;

              break;
          }
        }
      }
    }
  }
}

customElements.define('jj-item-datebetween', JJDateBetween);
/* ==JJZipcode.640.class================ */

/**
 * @classdesc Between 컴포넌트관리를 위한 클래스
 */
class JJZipcode extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      version: '640'
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @return {Element} - JJBetween 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    this.classList.add('form-group');
    this.classList.add('jj-hitem');
    this.dataset.bindGroup = this.options.bindGroup||"";
    
    
    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');

    if (this.options.i18n)
      this.controlLabel.setAttribute('data-i18n', this.options.i18n);

    this.controlLabel.setAttribute('for', controlId);
    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');
    
    this.txtZipcode = document.createElement('input');
    this.txtZipcode.setAttribute('class', 'form-control zip-code');
    this.txtZipcode.type = "text";
    this.txtZipcode.dataset.type = "text";
    this.controlContent.appendChild(this.txtZipcode);

    this.btnFind = document.createElement('button');
    this.btnFind.setAttribute('class', 'btn btn-primary');
    this.btnFind.innerHTML = '<i class="fa fa-search" aria-hidden="true"></i>';
    this.controlContent.appendChild(this.btnFind);
    
    this.txtAddr1 = document.createElement('input');
    this.txtAddr1.setAttribute('class', 'form-control addr1');
    this.txtAddr1.type = "text";
    this.txtAddr1.dataset.type = "text";
    this.txtAddr1.id = controlId;
    this.controlContent.appendChild(this.txtAddr1);

    this.txtAddr2 = document.createElement('input');
    this.txtAddr2.setAttribute('class', 'form-control addr2');
    this.txtAddr2.type = "text";
    this.txtAddr2.dataset.type = "text";
    this.controlContent.appendChild(this.txtAddr2);


    this.helpBlock = document.createElement('span');
    this.helpBlock.classList.add('help-block');
    this.controlContent.appendChild(this.helpBlock);

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    
    if (this.options.bindGroup) {
      this.txtZipcode.dataset.bind = this.options.bindGroup.split(",")[0];
      this.txtAddr1.dataset.bind = this.options.bindGroup.split(",")[1];
      this.txtAddr2.dataset.bind = this.options.bindGroup.split(",")[2];
    } 

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.validMessage = '';

    return this;
  }

  _setEvent(){
    this.btnFind.addEventListener('click', e=>{
      JJFormModal.open("getZipcode.640.uc", {
          "addr1": this.txtAddr1.value
        })
          .then(result=>{
        	this.txtZipcode.value = result.zipNo;
        	this.txtAddr1.value = result.roadAddr;

          this.txtZipcode.dispatchEvent(new Event('input', { bubbles: true }));
          this.txtAddr1.dispatchEvent(new Event('input', { bubbles: true }));
        })  
          .catch(err=>{
             alert(err);
        });  
    })
  }


  /**
   * @memberof JJBetween
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
  }

  /**
   * @memberof JJBetween
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
  }

  
  dataBind(node, val){
    node.value = val;
  }
  
  dataBindSet(node, val){
    node.value = val;
  }
  
  dataBindGet(node){
    return node.value;
  }

}

customElements.define('jj-item-zipcode', JJZipcode);
/* ==JJButton.640.class================ */

/**
 * @classdesc Text 컴포넌트관리를 위한 클래스
 */
class JJButton extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this.setAttribute('data-render', 'jj-item');
    return {
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJIcon 컴포넌트
   * @example -
   */
  _render() {

    Object.assign(this.options,  this.dataset);
		this.classList.add("jj-hitem");
		this.classList.add("form-group");
    
    
    this.setAttribute('data-render', 'jj-item');
    
    this.btn = document.createElement('button');
    this.btn.setAttribute("class", "btn btn-primary");
		this.btn.innerText = this.options.label;
		this.appendChild(this.btn);	
    return this;
  }


  /**
   * @desc 지정한 name, value로 옵션을 설정한다.
   * @param {String} - 옵션명
   * @param {*} - 옵션
   * @example -
   */
  option(name, value) {
    this.options[name] = value;
    switch (name) {
      case 'label': 
        if(this.btn) this.btn.innerText = value;
        break;
      default:
        break;
    }
  }  
  
}

customElements.define('jj-item-button', JJButton);
/* ==JJTextCode.640.class================ */

/**
 * @classdesc Textarea 컴포넌트관리를 위한 클래스
 */
class JJTextCode extends JJText {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._value = '';

    return {
      version: '640'
    };
  }

  /**
   * @desc 컴포넌트를 생성한다.
   * @return {Element} - JJText 컴포넌트
   * @example -
   */
  _render() {
    let domainField = this.dataset.domain;
    let domainRule;

    if (domainField) {
      domainRule = Jinja.validate.get(domainField);
    }

    Object.assign(this.options, domainRule, this.dataset);

    if (this.options.required == 'false') this.options.required = false;
    if (this.options.required == 'true') this.options.required = true;

    let controlId = Jinja.global.uuid();

    this.controlLabel = document.createElement('label');
    this.controlLabel.classList.add('control-label');
    this.controlLabel.setAttribute('data-i18n', this.options.i18n);
    this.controlLabel.setAttribute('for', controlId);

    this.controlLabel.appendChild(document.createTextNode(this.options.label));

    this.controlContent = document.createElement('div');
    this.controlContent.classList.add('control-content');

    this.formControl = document.createElement('jj-code-editor');
    this.formControl.dataset.mode = "sql";
    this.formControl.dataset.theme = "eclipse";
    
    this.controlContent.appendChild(this.formControl);


    this.formControl.classList.add('form-control');
    this.formControl.id = controlId;

    this.helpBlock = document.createElement('span');
    this.controlContent.appendChild(this.helpBlock);

    this.helpBlock.classList.add('help-block');

    this.classList.add('form-group');

    if (this.options.css) this.classList.add(this.options.css);
    if (this.options.style) this.setAttribute('style', this.options.style);
    if (this.options.bind) this.dataset.bind = this.options.bind;

    this.appendChild(this.controlLabel);
    this.appendChild(this.controlContent);
    this.dataMap = new Map();
    this.dataMap.set('options', this.options);

    this.classList.add('jj-hitem');
    this.validMessage = '';

    this.formControl.value = this._value;

    return this;
  }
  
  /**
   * @memberof JJText
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(v) {
    debugger;
    if(this.formControl.value != v){
      this._value = v;
      if (this.formControl) {
         this.formControl.value = this._value;
      }
    }
  }  
  
  checkValidity() {
    this._value = null;
    
    if(this.options.required && !this.formControl.value){
	    this.classList.add('error');
      this.validMessage = this.options.validMessage || "이 입력란을 작성하세요";
      this.helpBlock.innerText =  this.validMessage;
      return false;
    }
    
    if(this.formControl.minLength && this.formControl.minLength > this.formControl.value.length){
    	this.validMessage = `이 텍스트를 ${this.formControl.minLength}자 이상으로 늘리세요(현재 ${this.formControl.value.length}자 사용 중)`;
      this.helpBlock.innerText =  this.validMessage;
	    return false;
    }
      
    this.helpBlock.innerText = "";
    this.classList.remove('error');
    this._value = this.formControl.value;

    return true;
  }  
}

customElements.define('jj-item-textcode', JJTextCode);
/* ==JJWaitLayer.class================ */
/*jshint sub:true*/ 

/**
 *  작업대기중 표시를 함 
 * 
 * 사례..
	 let wait = new jjWaitLayer(this, {"mwssage": "자료를 가져오는 중입니다"});
   return Jinja.studioV6Api.myRespurce()
   .then(data => this.dataBind(data.rows))
   .then(()=> wait.destroy());
* 
*/

class JJWaitLayer {
  constructor(el,options) {
    
    this.options = {
    	"message": "waiting"  
    }
  	Object.assign(this.options, options);
    
    this.box = document.createElement("div");
    this.box.classList.add("jj-wait-layer");
    let h2 = document.createElement("h2");
    h2.classList.add("j-center");
    h2.appendChild(document.createTextNode(this.options.message));
    this.box.appendChild(h2);
    el.appendChild(this.box);
  }
  
  destroy(){
    this.box.remove();
  }
  
}



















/* ==CustomComp.710.pkg.deploy================ */
/* ==JJCarousel.640.class================ */

/**
 * @classdesc Carousel 컴포넌트관리를 위한 클래스
 */
class JJCarousel extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      isReact: false,
      interval: 5000
    };
  }

  /**
   * @desc 콤포넌트를 생성한다.
   * @return {Element} - JJBetween 컴포넌트
   * @example -
   */
  _render() {
    this.metadb = {};

    if (Jinja.dom.closest(this, '.vhtml-editor')) {
      this.removeAttribute('id');

      return;
    } else {
      if (!this.id) {
        if (this.options.isReact) {
        } else {
          let indi = this.querySelector('.carousel-indicators');

          if (indi) {
            this._resetIndicators();
          }
        }
      }
    }
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('click', e => {
      if (e.target.matches('.carousel-control-prev')) {
        this._moveSlider('prev');
      }
      if (e.target.matches('.carousel-control-next')) {
        this._moveSlider('next');
      }
      if (e.target.matches('.carousel-control-next')) {
        this._moveSlider(e.target.dataset.slideTo);
      }
    });
  }

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {
    if (this.timer) clearTimeout(this.timer);
  }

  /**
   * @desc Carousel Indicators를 초기화한다.
   * @example -
   */
  _resetIndicators() {
    let indi = this.querySelector('.carousel-indicators');

    if (indi) {
      indi.$empty();

      this.querySelectorAll('.carousel-inner .carousel-item').forEach(
        (item, ind) => {
          let li = document.createElement('li');

          li.dataset.slideTo = ind;
          item.classList.remove('active');

          if (ind == 0) {
            item.classList.add('active');
            li.classList.add('active');
          }

          indi.appendChild(li);
        }
      );
    }
  }

  /**
   * @desc 지정한 방향 또는 Item번호 기준으로 Carousel을 동작시킨다.
   * @param {String|Number} - 방향|Item번호
   * @example -
   */
  _moveSlider(id) {
    let itemCount = this.querySelectorAll('.carousel-inner >.carousel-item').length;
    let curInd = Jinja.dom.findIndex(
      this.querySelector('.carousel-inner'),
      this.querySelector('.carousel-item.active')
    );

    this.querySelector(
      '.carousel-inner .carousel-item.active'
    ).classList.remove('active');

    if (this.querySelector('.carousel-indicators')) {
      this.querySelector('.carousel-indicators li.active').classList.remove(
        'active'
      );
    }

    if (id === undefined) id = 'next';

    switch (id) {
      case 'next':
        curInd++;

        break;
      case 'prev':
        curInd--;

        break;
      default:
        curInd = parseInt(id);

        break;
    }

    if (curInd < 0) curInd = itemCount - 1;
    if (curInd >= itemCount) curInd = 0;

    if (this.querySelectorAll('.carousel-inner .carousel-item')[curInd])
      this.querySelectorAll('.carousel-inner .carousel-item')[
        curInd
      ].classList.add('active');

    if (this.querySelectorAll('.carousel-indicators li')[curInd])
      this.querySelectorAll('.carousel-indicators li')[curInd].classList.add(
        'active'
      );

    if (!this.matches('jj-vhtml-editor *')) {
      if (this.timer) {
        clearTimeout(this.timer);
      }

      this.timer = setTimeout(() => {
        this._moveSlider();
      }, this.options.interval);
    }
  }

  /**
   * @desc Carousel의 Caption, Indicators 표출여부를 반환한다.
   * @return {Object} - Caption, Indicators 표출여부
   * @example -
   */
  getStatus() {
    let isCaption, isIndicators;
    let captionEl = this.querySelector('.carousel-caption');

    isCaption = captionEl && !captionEl.hidden;

    let indicatorEl = this.querySelector('.carousel-indicators');

    isIndicators = indicatorEl && !indicatorEl.hidden;

    return {
      isCaption: isCaption,
      isIndicators: isIndicators
    };
  }

  /**
   * @desc Carousel Caption 표출여부를 설정한다.
   * @param {boolean} - 표출여부
   * @example -
   */
  showCaption(flag) {
    if (flag) {
      this.querySelectorAll('.carousel-item').forEach(item => {
        let captionEl = item.querySelector('.carousel-caption');

        if (captionEl) {
          captionEl.hidden = false;
        } else {
          let html = 
            `<div class="carousel-caption d-none d-md-block">` +
            `<h3 class="text-white">slide label</h3>` +
            `<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>` +
            `</div>`;

          Jinja.dom.append(item, html);
        }
      });
    } else {
      this.querySelectorAll('.carousel-caption').forEach(
        el => (el.hidden = true)
      );
    }
  }

  /**
   * @desc Carousel Indicators 표출여부를 설정한다.
   * @param {boolean} - 표출여부
   * @example -
   */
  showIndicators(flag) {
    if (flag) {
      let indEl = this.querySelector('.carousel-indicators');

      if (indEl) {
        indEl.hidden = false;
      } else {
        let html = `<ol class="carousel-indicators"></ol>`;

        Jinja.dom.append(this, html);

        this.resetIndicators();
      }
    } else {
      this.querySelector('.carousel-indicators').hidden = true;
    }
  }
}

customElements.define('jj-carousel', JJCarousel);
/* ==JJChart640.class================ */

/**
 * @classdesc 챠트 컴포넌트관리를 위한 클래스
 */
class JJChart extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      require: ['apexchart'],
      type: 'bar',
      chartOptions: {
        circle: {
          series: this.dataset.sample ? [0] : [95],
          chart: {
            height: this.offsetHeight,
            type: 'radialBar',
            toolbar: {
              show: true
            }
          },
          title: {
            align: 'left',
            style: {
              color: '#fff',
              fontSize: '13px'
            }
          },
          plotOptions: {
            radialBar: {
              startAngle: 0,
              endAngle: 360,
              hollow: {
                margin: 0,
                size: '70%',
                position: 'front',
                dropShadow: {
                  enabled: true,
                  top: 3,
                  left: 0,
                  blur: 4,
                  opacity: 0.24
                }
              },
              track: {
                strokeWidth: '67%',
                margin: 0,
                dropShadow: {
                  enabled: true,
                  top: -3,
                  left: 0,
                  blur: 4,
                  opacity: 0.35
                }
              },
              dataLabels: {
                show: true,
                name: {
                  offsetY: -10,
                  show: true,
                  color: '#888',
                  fontSize: '17px'
                },
                value: {
                  formatter: function (val) {
                    return parseInt(val);
                  },
                  color: '#111',
                  fontSize: '36px',
                  show: true
                }
              }
            }
          },
          fill: {
            type: 'gradient',
            gradient: {
              shade: 'dark',
              type: 'horizontal',
              shadeIntensity: 0.5,
              gradientToColors: ['#ABE5A1'],
              inverseColors: true,
              opacityFrom: 1,
              opacityTo: 1,
              stops: [0, 100]
            }
          },
          stroke: {
            lineCap: 'round'
          },
          labels: ['Percent']
        },
        radialBar: {
          series: [44, 55, 67, 83],
          chart: {
            height: this.offsetHeight,
            type: 'radialBar',
            toolbar: {
              show: true
            },
            zoom: {
              enabled: true
            },
            events: {
              mouseMove: (event, chartContext, config) => {
                let orgText = chartContext.el.querySelector(
                  '.apexcharts-datalabel-label'
                );

                if (orgText) {
                  this._textWarp(orgText, config);
                }
              },
              mounted: (chartContext, config) => {
                let orgText = chartContext.el.querySelector(
                  '.apexcharts-datalabel-label'
                );

                if (orgText) {
                  this._textWarp(orgText, config);
                }
              },
              updated: (chartContext, config) => {
                let orgText = chartContext.el.querySelector(
                  '.apexcharts-datalabel-label'
                );

                if (orgText) {
                  this._textWarp(orgText, config);
                }
              },
            },
          },
          title: {
            align: 'left',
            style: {
              color: '#fff',
              fontSize: '13px'
            }
          },
          legend: {
            position: 'bottom'
          },
          plotOptions: {
            radialBar: {
              offsetWrapY: -10,
              offsetWrapSplit: '\n',
              dataLabels: {
                name: {
                  fontSize: '22px'
                },
                value: {
                  fontSize: '16px'
                },
                total: {
                  show: true,
                  label: 'Total',
                  formatter: function (w) {
                    return 249;
                  }
                }
              }
            }
          },
          labels: ['Apples', 'Oranges', 'Bananas', 'Berries']
        },
        bar: {
          series: this.dataset.sample
            ? []
            : [
                {
                  name: 'Net Profit',
                  data: [44, 55, 57, 56, 61, 58, 63, 60, 66]
                },
                {
                  name: 'Revenue',
                  data: [76, 85, 101, 98, 87, 105, 91, 114, 94]
                },
                {
                  name: 'Free Cash Flow',
                  data: [35, 41, 36, 26, 45, 48, 52, 53, 41]
                }
              ],
          chart: {
            type: 'bar',
            height: this.offsetHeight,
            toolbar: {
              show: true
            },
            zoom: {
              enabled: true
            }
          },
          colors: ['#3bafda', '#1abc9c', '#CED4DC'],
          title: {
            align: 'left',
            style: {
              color: '#fff',
              fontSize: '13px'
            }
          },
          dataLabels: {
            enabled: false
          },
          stroke: {
            show: true,
            width: 2,
            colors: ['transparent']
          },
          xaxis: {
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: ['#c4c9db']
              }
            }
          },
          yaxis: {
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: ['#c4c9db']
              },
              formatter: value => {
                return value.$toFloatFormat();
              }
            }
          },
          fill: {
            opacity: 1
          },
          tooltip: {
          }
        },
        pie: {
          series: this.dataset.sample ? [] : [44, 55, 13, 43, 22],
          chart: {
            type: 'pie',
            height: this.offsetHeight,
            toolbar: {
              show: true
            },
            zoom: {
              enabled: true
            }
          },
          labels: ['Team A', 'Team B', 'Team C', 'Team D', 'Team E'],
          colors: ['#3bafda', '#26c6da', '#80deea', '#00b19d', '#d1dee4'],
          title: {
            align: 'left',
            style: {
              color: '#fff',
              fontSize: '13px'
            }
          },
          legend: {
            position: 'bottom'
          },
          Xresponsive: [
            {
              breakpoint: 480,
              options: {
                chart: {
                  width: 200
                },
                legend: {
                  position: 'bottom'
                }
              }
            }
          ]
        },
        donut: {
          series: this.dataset.sample ? [] : [44, 55, 13, 43, 22],
          chart: {
            type: 'donut',
            height: this.offsetHeight,
            toolbar: {
              show: true
            },
            zoom: {
              enabled: true
            }
          },
          colors: ['#3bafda', '#26c6da', '#80deea', '#00b19d', '#d1dee4'],
          labels: ['Team A', 'Team B', 'Team C', 'Team D', 'Team E'],
          title: {
            align: 'left',
            style: {
              color: '#fff',
              fontSize: '13px'
            }
          },
          plotOptions: {
            pie: {
              donut: {
                labels: {
                  show: true,
                  total: {
                    showAlways: true,
                    show: true,
                    color: '#c4c9db',
                    fontSize: '13px',
                    formatter: function (w) {
                      let sumVal = w.globals.seriesTotals.reduce((a, b) => {
                        return a + b;
                      }, 0);

                      return sumVal.$toFloatFormat();
                    }
                  },
                  value: {
                    showAlways: true,
                    show: true,
                    color: '#fff',
                    fontSize: '18px'
                  }
                }
              }
            }
          },
          legend: {
            position: 'bottom'
          }
        },
        line: {
          series: this.dataset.sample
            ? []
            : [
                {
                  name: 'High - 2013',
                  data: [28, 29, 33, 36, 32, 32, 33]
                },
                {
                  name: 'Low - 2013',
                  data: [12, 11, 14, 18, 17, 13, 13]
                }
              ],
          chart: {
            height: this.offsetHeight,
            type: 'line',
            toolbar: {
              show: true
            },
            zoom: {
              enabled: true
            }
          },
          colors: ['#3bafda', '#1abc9c'],
          dataLabels: {
            enabled: false
          },
          title: {
            align: 'left',
            style: {
              color: '#fff',
              fontSize: '13px'
            }
          },
          grid: {
            borderColor: '#e7e7e7',
            row: {
              opacity: 0.5
            }
          },
          stroke: {
          },
          markers: {
            size: 3,
            hover: {
              size: 6
            }
          },
          xaxis: {
            title: {
              style: {
                color: '#fff',
                fontSize: '13px'
              }
            },
            labels: {
              style: {
                colors: '#c4c9db'
              }
            }
          },
          yaxis: {
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: '#c4c9db'
              },
              formatter: value => {
                return value.$toFloatFormat();
              }
            }
          }
        },
        area: {
          series: this.dataset.sample
            ? []
            : [
                {
                  name: 'series1',
                  data: [31, 40, 28, 51, 42, 109, 100]
                },
                {
                  name: 'series2',
                  data: [11, 32, 45, 32, 34, 52, 41]
                }
              ],
          chart: {
            height: this.offsetHeight,
            type: 'area',
            toolbar: {
              show: true
            },
            zoom: {
              enabled: true
            }
          },
          colors: ['#3bafda', '#1abc9c', '#CED4DC'],
          title: {
            align: 'left',
            style: {
              color: '#fff',
              fontSize: '13px'
            }
          },
          dataLabels: {
            enabled: false
          },
          stroke: {
            curve: 'smooth'
          },
          xaxis: {
            type: 'datetime',
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: '#c4c9db'
              }
            },
            categories: [
              '2018-09-19T00:00:00.000Z',
              '2018-09-19T01:30:00.000Z',
              '2018-09-19T02:30:00.000Z',
              '2018-09-19T03:30:00.000Z',
              '2018-09-19T04:30:00.000Z',
              '2018-09-19T05:30:00.000Z',
              '2018-09-19T06:30:00.000Z'
            ]
          },
          yaxis: {
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: '#c4c9db'
              },
              formatter: value => {
                return value.$toFloatFormat();
              }
            }
          },
          tooltip: {
            x: {
              format: 'dd/MM/yy HH:mm'
            }
          }
        },
        mixBarLine: {
          series: [
            {
              name: 'PRODUCT A',
              type: 'bar',
              data: this.dataset.sample ? [] : [44, 55, 41, 67, 22, 43]
            },
            {
              name: 'PRODUCT B',
              type: 'bar',
              data: this.dataset.sample ? [] : [13, 23, 20, 8, 13, 27]
            },
            {
              name: 'PRODUCT C',
              type: 'bar',
              data: this.dataset.sample ? [] : [11, 17, 15, 15, 21, 14]
            },
            {
              name: 'PRODUCT D',
              type: 'line',
              data: this.dataset.sample ? [] : [21, 7, 25, 13, 22, 8]
            }
          ],
          chart: {
            height: this.offsetHeight,
            stacked: false,
            toolbar: {
              show: true
            },
            zoom: {
              enabled: true
            }
          },
          colors: ['#3bafda', '#1abc9c', '#CED4DC', '#f1556c'],
          title: {
            text: '',
            align: 'left'
          },
          responsive: [
            {
              breakpoint: 480,
              options: {
                legend: {
                  position: 'bottom',
                  offsetX: -10,
                  offsetY: 0
                }
              }
            }
          ],
          plotOptions: {
            bar: {
              horizontal: false
            }
          },
          xaxis: {
            type: 'datetime',
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: '#c4c9db'
              }
            },
            categories: [
              '01/01/2011 GMT',
              '01/02/2011 GMT',
              '01/03/2011 GMT',
              '01/04/2011 GMT',
              '01/05/2011 GMT',
              '01/06/2011 GMT'
            ]
          },
          yaxis: {
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: '#c4c9db'
              },
              formatter: value => {
                return value.$toFloatFormat();
              }
            }
          },
          markers: {
            Xshape: 'square',
            size: 6,
            hover: {
              size: 7
            }
          },
          legend: {
            position: 'bottom'
          },
          fill: {
            opacity: 5
          }
        },
        mixStackLine: {
          series: [
            {
              name: 'PRODUCT A',
              type: 'bar',
              data: this.dataset.sample ? [] : [44, 55, 41, 67, 22, 43]
            },
            {
              name: 'PRODUCT B',
              type: 'bar',
              data: this.dataset.sample ? [] : [13, 23, 20, 8, 13, 27]
            },
            {
              name: 'PRODUCT C',
              type: 'bar',
              data: this.dataset.sample ? [] : [11, 17, 15, 15, 21, 14]
            },
            {
              name: 'PRODUCT D',
              type: 'line',
              data: this.dataset.sample ? [] : [21, 7, 25, 13, 22, 8]
            }
          ],
          chart: {
            height: this.offsetHeight,
            stacked: true,
            toolbar: {
              show: true
            },
            zoom: {
              enabled: true
            },
          },
          colors: ['#3bafda', '#1abc9c', '#CED4DC', '#f1556c'],
          title: {
            text: '',
            align: 'left'
          },
          responsive: [
            {
              breakpoint: 480,
              options: {
                legend: {
                  position: 'bottom',
                  offsetX: -10,
                  offsetY: 0
                }
              }
            }
          ],
          plotOptions: {
            bar: {
              horizontal: false
            },
          },
          xaxis: {
            type: 'datetime',
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: '#c4c9db'
              }
            },
            categories: [
              '01/01/2011 GMT',
              '01/02/2011 GMT',
              '01/03/2011 GMT',
              '01/04/2011 GMT',
              '01/05/2011 GMT',
              '01/06/2011 GMT'
            ]
          },
          yaxis: {
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: '#c4c9db'
              },
              formatter: value => {
                return value.$toFloatFormat();
              }
            }
          },
          markers: {
            Xshape: 'square',
            size: 6,
            hover: {
              size: 7
            }
          },
          legend: {
            position: 'bottom'
          },
          fill: {
            opacity: 5
          }
        },
        compareBarLine: {
          series: [
            {
              name: '금년',
              type: 'column',
              data: this.dataset.sample ? [] : [23, 11]
            },
            {
              name: '전년',
              type: 'line',
              data: this.dataset.sample ? [] : [30, 25]
            }
          ],
          chart: {
            height: this.offsetHeight,
            type: 'line',
            stacked: false,
            toolbar: {
              show: false
            },
            zoom: {
              enabled: false
            },
          },
          stroke: {
            width: [0, 2, 5],
            curve: 'smooth'
          },
          plotOptions: {
            bar: {
              columnWidth: '50%'
            }
          },
          colors: ['#3bafda', '#1abc9c'],
          fill: {
            opacity: 1
          },
          labels: ['평일', '주말'],
          markers: {
            size: 5
          },
          xaxis: {
            title: {
              style: {
                color: '#fff',
                fontSize: '12px',
              },
            },
            labels: {
              style: {
                colors: '#c4c9db'
              }
            }
          },
          yaxis: {
            title: {
              style: {
                color: '#fff',
                fontSize: '12px'
              }
            },
            labels: {
              style: {
                colors: '#c4c9db'
              },
              formatter: value => {
                return value.$toFloatFormat();
              }
            }
          },
          tooltip: {
            shared: true,
            intersect: false,
            y: {
              formatter: function (y) {
                if (typeof y !== 'undefined') {
                  return y.toFixed(0) + ' points';
                }

                return y;
              }
            }
          }
        },
        sparkLine: {
          series: [
            {
              data: this.dataset.sample
                ? []
                : [15, 75, 47, 65, 14, 2, 41, 54, 4, 27, 15]
            }
          ],
          chart: {
            type: 'line',
            width: 100,
            height: this.offsetHeight,
            sparkline: {
              enabled: true
            }
          },
          tooltip: {
            fixed: {
              enabled: false
            },
            x: {
              show: false
            },
            y: {
              title: {
                formatter: function (seriesName) {
                  return '';
                }
              }
            },
            marker: {
              show: false
            }
          }
        },
        sparkBar: {
          series: [
            {
              data: this.dataset.sample
                ? []
                : [25, 66, 41, 89, 63, 25, 44, 12, 36, 9, 54]
            }
          ],
          chart: {
            type: 'bar',
            height: this.offsetHeight,
            sparkline: {
              enabled: true
            }
          },
          plotOptions: {
            bar: {
              columnWidth: '80%'
            }
          },
          labels: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
          xaxis: {
            crosshairs: {
              width: 1
            }
          },
          tooltip: {
            fixed: {
              enabled: false
            },
            x: {
              show: false
            },
            y: {
              title: {
                formatter: function (seriesName) {
                  return '';
                }
              }
            },
            marker: {
              show: false
            }
          }
        },
        sparkArea: {
          series: [
            {
              data: this.dataset.sample
                ? []
                : [25, 66, 41, 89, 63, 25, 44, 12, 36, 9, 54]
            }
          ],
          chart: {
            type: 'area',
            height: this.offsetHeight,
            sparkline: {
              enabled: true
            }
          },
          tooltip: {
            fixed: {
              enabled: false
            },
            x: {
              show: false
            },
            y: {
              title: {
                formatter: function (seriesName) {
                  return '';
                }
              }
            },
            marker: {
              show: false
            }
          },
          stroke: {
            curve: 'straight'
          },
          fill: {
            opacity: 0.3
          },
          xaxis: {
            crosshairs: {
              width: 1
            }
          },
          yaxis: {
            min: 0
          },
          xtitle: {
            enabled: false,
            text: '$135,965',
            offsetX: 0,
            style: {
              fontSize: '24px'
            }
          },
          xsubtitle: {
            enabled: false,
            text: 'Profits',
            offsetX: 0,
            style: {
              fontSize: '14px'
            }
          }
        },
      },
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @param {String} - 챠트유형
   * @example -
   */
  _render(type) {
    type = type || this.options.type;

    this.setAttribute('data-render', 'JJChart');
    this.chart = null;

    if (type && this.options.chartOptions[type]) {
      this.options.type = type;

      let chartOption = this.options.chartOptions[type];

      this.requirePromise.then(() => {
        if (this.dataset.group) {
          chartOption.chart.group = this.dataset.group;
          chartOption.chart.id = this.dataset.chartId || Jinja.global.uuid();
        }

        this.chart = new ApexCharts(this, chartOption);

        this.chart.render();
      });
    } else {
      alert('지정된 차트옵션이 없습니다.');
    }
  }

  /**
   * @static
   * @memberof JJChart
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ['data-type'];
  }

  /**
   * @desc 지정한 옵션으로 챠트를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    Object.assign(this.options, this.dataset, options);
  }

  /**
   * @desc 지정한 옵션으로 챠트를 수정한다.
   * @param {Object} - 옵션
   * @param {Boolean} - 새로그리기여부
   * @param {Boolean} - 에니메이션효과여부
   * @param {Boolean} - 동기화여부
   * @example -
   */
  updateOptions(options, redrawPaths, animate, updateSyncedCharts) {
    if (redrawPaths == undefined) redrawPaths = false;
    if (animate == undefined) animate = true;
    if (updateSyncedCharts == undefined) updateSyncedCharts = true;

    this.requirePromise.then(() => {
      this.chart.updateOptions(
        options,
        redrawPaths,
        animate,
        updateSyncedCharts
      );
    });
  }

  /**
   * @desc 지정한 시리즈로 챠트를 수정한다.
   * @param {Object} - 시리즈정보
   * @example -
   */
  updateSeries(series) {
    this.requirePromise.then(() => {
      this.chart.updateSeries(series);
    });
  }

  /**
   * @desc 지정한 엘리먼트의 문자열을 자동개행 처리한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Object} - 챠트설정정보
   * @example -
   */
  _textWarp(el, config) {
    let svgNS = 'http://www.w3.org/2000/svg';
    let text = el.textContent;
    let tArr = text.split(
      config.config.plotOptions.radialBar.offsetWrapSplit || '\n'
    );

    if (tArr.length > 1) {
      el.textContent = '';

      tArr.forEach((t, i) => {
        let newText = document.createElementNS(svgNS, 'tspan');
        let offsetY = config.config.plotOptions.radialBar.offsetWrapY || 0;
        let pY = parseInt(el.getAttributeNS(null, 'y'));
        let pX = parseInt(el.getAttributeNS(null, 'x'));
        let pH = parseInt(
          el.getAttributeNS(null, 'font-size').replace('px', '')
        );

        newText.setAttributeNS(null, 'y', pY + i * pH + offsetY);
        newText.setAttributeNS(null, 'x', pX);
        newText.appendChild(document.createTextNode(t));

        el.appendChild(newText);
      });
    }
  }

  /**
   * @desc 지정한 생성정보로 시리즈를 생성하여 반환한다.
   * @param {Number} - 시작값
   * @param {Number} - X좌표 개수
   * @param {Object} - Y좌표 범위정보
   * @return {Array} - 시리즈정보
   * @example -
   */
  _generateDayWiseTimeSeries(baseval, count, yrange) {
    let i = 0;
    let series = [];

    while (i < count) {
      let x = baseval;
      let y =
        Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min;

      series.push([x, y]);
      baseval += 86400000;
      i++;
    }

    return series;
  }

  /**
   * @desc 엘리먼트를 삭제한다.
   * @example -
   */
  _destroy() {
    this.chart.destroy();
  }

  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {
    if (
      attrName == 'data-type' &&
      oldVal &&
      oldVal != newVal &&
      this.isConnected
    ) {
      this.options.type = newVal;
      this._render();
    }
  }
}

customElements.define('jj-chart', JJChart);
/* ==JJChartMap.640.class================ */

/**
 * @classdesc 맵챠트 컴포넌트관리를 위한 클래스
 */
class JJChartMap extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      require: ['toast.map'],
      type: 'bar',
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.chart = null;
    this.setAttribute('data-render', 'JJChart');

    let data = {
      series: []
    };

    let options = {
      chart: {
        width: 570,
        height: 720,
        title: 'Average annual temperature of South Korea (°C)'
      },
      map: 'south-korea',
      legend: {
        align: 'bottom'
      },
      tooltip: {
        suffix: '°C'
      }
    };

    let theme = {
      series: {
        startColor: '#ffefef',
        endColor: '#ac4142',
        overColor: '#75b5aa',
      },
      chart: {
        fontFamily: 'Verdana',
        background: {
          color: '#323b44',
          opacity: 1
        }
      }
    };

    this.requirePromise.then(() => {
      tui.chart.registerTheme('myTheme', theme);

      options.theme = 'myTheme';

      this._map = tui.chart.mapChart(this, data, options);
    });
  }

  /**
   * @desc 데이터를 설정한다.
   * @param {Object} - 대상 데이터
   * @example -
   */
  setData(data) {
    this.requirePromise.then(result => {
      this._map.setData(data);
    });
  }
}

customElements.define('jj-chartmap', JJChartMap);
/* ==JJCircleChartSimple.640.class================ */

/**
 * @classdesc 심플서클챠트 컴포넌트관리를 위한 클래스
 */
class JJCircleChartSimple extends JJElement {
  
  static get observedAttributes() {
    return ['value'];
  }

  
  get value() {
    return this.options.data.value;
  }

  
  set value(val) {
    this.options.data.value = val;
  }

  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      data: {
        value: 20
      },
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    if (Jinja.global.isInt(this.getAttribute('value'))) {
      this.options.data.value = this.getAttribute('value');
    }

    this.setAttribute('data-render', 'JJCircleC100');

    let html =
      `<div class="m100 p${data.value} small">` +
      `<span><p class="title"></p>${data.value}</span>` +
      `<div class="slice">` +
      `<div class="bar"></div>` +
      `<div class="fill"></div>` +
      `</div>` +
      `</div>`;

    this.innerHTML = html;
    this.bo = new JJReact(this.querySelector('div'), this.options);
  }

  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {
    if (attrName == 'value') {
      if (Jinja.global.isInt(newVal)) {
        this.options.data.value = newVal;
      }
    }
  }
}

customElements.define('jj-circlechart-s', JJCircleChartSimple);
/* ==JJCircleChart.640.class================ */

/**
 * @classdesc 서클챠트 컴포넌트관리를 위한 클래스
 */
class JJCircleChart extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      data: {
        value: 20
      },
      version: '640'
    };
  }

  /**
   * @static
   * @memberof JJCircleChart
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ['value', 'data-color'];
  }

  /**
   * @memberof JJCircleChart
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.options.data.value;
  }

  /**
   * @memberof JJCircleChart
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this.options.data.value = val;
    this._renderChart();
    
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @param {String} - 챠트유형
   * @example -
   */
  _render() {
    this.setAttribute('data-render', 'JJCircleChart');

    if (Jinja.global.isInt(this.getAttribute('value'))) {
      this.options.data.value = this.getAttribute('value');
    }

    if (!this.getAttribute('data-color')) {
      this.setAttribute('data-color', 'green');
    }

    this._renderChart();

  }

  /**
   * @desc 차트 SVG를 그립니다
   * @example -
   */  
  _renderChart(){
    let html = 
      `<svg viewBox="0 0 36 36" class="circular-chart">` +
      `<path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>` +
      `<path class="circle" stroke-dasharray="${this.options.data.value}, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>` +
      `<text x="18" y="20.35" class="percentage">${this.options.data.value}%</text>` +
      `</svg>`;

    this.innerHTML = html;
  }
  
  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {
    if (attrName == 'value') {
      if (Jinja.global.isInt(newVal)) {
        this.value = newVal;
      }
    }
  }
}

customElements.define('jj-circlechart', JJCircleChart);
/* ==JJFloatChart.640,class================ */

/**
 * @classdesc 플로트챠트 컴포넌트관리를 위한 클래스
 */
class JJFloatChart extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this._dataSet = [];
    return {
      require: ['flot'],
      totalPoints: 300,
      series: {
        shadowSize: 0
      },
      colors: ['red', 'blue', 'green'],
      yaxis: {
        min: 0,
        max: 100
      },
      xaxis: {
        show: false
      },
      legend: '',
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @param {String} - 챠트유형
   * @example -
   */
  _render(type) {
    this.setAttribute('data-render', 'JJFloatChart');
    this.chart = null;

    this.requirePromise.then(() => {
      this.chart = $.plot(
        $(this),
        [
          {
            label: 'Europe (EU27)',
            data: []
          },
          {
            label: 'asia (hh27)',
            data: []
          },
          {
            label: 'amerca (hh27)',
            data: []
          }
        ],
        {
          series: {
            shadowSize: 0
          },
          colors: ['red', 'blue', 'green'],
          yaxis: {
            min: 0,
            max: 100
          },
          xaxis: {
            show: false
          },
          legend: ''
        }
      );
    });
  }

  /**
   * @desc 무작위 X, Y좌표 데이터를 생성 반환한다.
   * @param {Number} - 최대값
   * @return {Array} - X, Y좌표 데이터
   * @example -
   */
  _getRandomData(max) {
		let data3 = [];
    if (data3.length > 0)
      data3 = data3.slice(1);

    while (data3.length < this.options.totalPoints) {

      let prev = data3.length > 0 ? data3[data3.length - 1] : 50;
      let y = prev + Math.random() * 10 - 5;

      if (y < 0) {
        y = 0;
      } else if (y > 100) {
        y = 100;
      }

      data3.push(y);
    }

    // Zip the generated y values with the x values

    var res = [];
    for (var i = 0; i < data3.length; ++i) {
      res.push([i,data3[i]])
    } 
    return res;
  }

  _getDemoItem(){
    let result =[];
    
    this._dataSet.forEach(ds=>{
      let prev = ds.data.length > 0 ? ds.data[ds.data.length-1][1] : 50;
      let y = prev + Math.random() * 10 - 5;

      if (y < 0) {
        y = 0;
      } else if (y > 100) {
        y = 100;
      }

      result.push(y);
      
    })
    this.addSeries(result);
    return result;
  }
  
  /**
   * @desc Y축 좌표값이 없는 X, Y좌표 데이터를 생성 반환한다.
   * @return {Array} - X, Y좌표 데이터
   * @example -
   */
  _blankDataset() {
    let result = [];

    for (let i = 0; i < this.options.totalPoints; i++) {
      result.push([i, 0]);
    }

    return result;
  }

  /**
   * @static
   * @memberof JJFloatChart
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ['data-type'];
  }

  /**
   * @desc 지정한 옵션으로 챠트를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    Object.assign(this.options, this.dataset, options);
  }

  /**
   * @desc 지정한 옵션으로 챠트를 수정한다.
   * @param {Object} - 옵션
   * @example -
   */
  updateOptions(options) {
    Object.assign(this.options, options);

    this._dataSet = [];

    options.labels.forEach(label => {
      this._dataSet.push({
        label: label,
        data: this._blankDataset()
      });
    });

    this.requirePromise.then(() => {
      this.chart = $.plot($(this), this._dataSet, this.options);
    });
  }

  /**
   * @desc 지정한 시리즈를 챠트에 추가한다.
   * @param {Array} - 시리즈
   * @return {} -
   * @example -
   */
  addSeries(series) {
    this._dataSet.forEach((ds, index) => {
      ds.data.splice(0, 1);
      ds.data.push([ds.data.length, series[index]]);

      ds.data.forEach((dataItem, index) => {
        dataItem[0] = index;
      });
    });

    let bindData = [];

    this._dataSet.forEach(ds => {
      bindData.push(ds.data);
    });

    this.requirePromise.then(() => {
      this.chart.setData(bindData);
      this.chart.draw();
    });
  }

  /**
   * @desc 지정한 시리즈로 챠트를 수정한다.
   * @param {Object} - 시리즈정보
   * @example -
   */
  updateSeries(series) {
    this._dataSet = series;
    this.requirePromise.then(() => {
      this.chart = $.plot($(this), this._dataSet, this.options);
    });
  }

  /**
   * @desc 엘리먼트를 삭제한다.
   * @example -
   */
  _destroy() {
    this.chart.shutdown();
  }

  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {}
}

customElements.define('jj-float', JJFloatChart);
/* ==JJGauge.640.class================ */

/**
 * @classdesc 게이지 컴포넌트관리를 위한 클래스
 */
class JJGauge extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @example -
   */
  _defaultOption() {
    return {
      require: ['gauge'],
      type: 'type1',
      chartOption: {
        type1: {
          angle: 0,
          lineWidth: 0.2,
          radiusScale: 0.9,
          pointer: {
            length: 0.6,
            strokeWidth: 0.035
          },
          limitMax: 100,
          limitMin: 0,
          maxValue: 100,
          animationSpeed: 32,
          staticLabels: {
            font: '10px sans-serif',
            labels: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
            color: '#000000',
            fractionDigits: 0
          },
          staticZones: [
            { strokeStyle: '#D6494B', min: 0, max: 10 },
            { strokeStyle: '#f96868', min: 10, max: 20 },
            { strokeStyle: '#f2a654', min: 20, max: 30 },
            { strokeStyle: '#f6be80', min: 30, max: 40 },
            { strokeStyle: '#f8e59b', min: 40, max: 50 },
            { strokeStyle: '#f7da64', min: 50, max: 60 },
            { strokeStyle: '#bad896', min: 60, max: 70 },
            { strokeStyle: '#9ece67', min: 70, max: 80 },
            { strokeStyle: '#46be8a', min: 80, max: 90 },
            { strokeStyle: '#279566', min: 90, max: 100 }
          ]
        },
        type2: {
          angle: -0.2,
          lineWidth: 0.2,
          radiusScale: 1,
          pointer: {
            length: 0.6,
            strokeWidth: 0.035,
            color: '#000000'
          },
          limitMax: false,
          limitMin: false,
          colorStart: '#6FADCF',
          colorStop: '#8FC0DA',
          strokeColor: '#E0E0E0',
          generateGradient: true,
          highDpiSupport: true,
          renderTicks: {
            divisions: 6,
            divWidth: 1.1,
            divLength: 0.27,
            divColor: '#333333',
            subDivisions: 3,
            subLength: 0.5,
            subWidth: 0.6,
            subColor: '#666666'
          }
        },
        dark1: {
          angle: 0,
          lineWidth: 0.2,
          radiusScale: 0.9,
          pointer: {
            length: 0.6,
            strokeWidth: 0.035,
            color: '#f1556c'
          },
          limitMax: 100,
          limitMin: 0,
          maxValue: 100,
          animationSpeed: 32,
          staticLabels: {
            font: '10px sans-serif',
            labels: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100],
            color: '#c4c9db',
            fractionDigits: 0
          },
          staticZones: [
            { strokeStyle: '#D6494B', min: 0, max: 10 },
            { strokeStyle: '#f96868', min: 10, max: 20 },
            { strokeStyle: '#f2a654', min: 20, max: 30 },
            { strokeStyle: '#f6be80', min: 30, max: 40 },
            { strokeStyle: '#f8e59b', min: 40, max: 50 },
            { strokeStyle: '#f7da64', min: 50, max: 60 },
            { strokeStyle: '#bad896', min: 60, max: 70 },
            { strokeStyle: '#9ece67', min: 70, max: 80 },
            { strokeStyle: '#46be8a', min: 80, max: 90 },
            { strokeStyle: '#279566', min: 90, max: 100 }
          ]
        },
        dark2: {
          angle: -0.2,
          lineWidth: 0.2,
          radiusScale: 1,
          pointer: {
            length: 0.6,
            strokeWidth: 0.035,
            color: '#f1556c'
          },
          limitMax: false,
          limitMin: false,
          colorStart: '#6FADCF',
          colorStop: '#8FC0DA',
          strokeColor: '#E0E0E0',
          generateGradient: true,
          highDpiSupport: true,
          renderTicks: {
            divisions: 6,
            divWidth: 1.1,
            divLength: 0.27,
            divColor: '#333333',
            subDivisions: 3,
            subLength: 0.5,
            subWidth: 0.6,
            subColor: '#666666'
          }
        }
      },
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.$empty();
    this.chart = null;
    this.setAttribute('data-render', 'JJChart');
    this.chartEl = document.createElement('canvas');
    this.appendChild(this.chartEl);

    this.requirePromise.then(() => {
      let options = Object.assign(
        {},
        this.options.chartOption[this.options.type],
        this._maxOption()
      );
      this.chart = new Gauge(this.chartEl).setOptions(options);
      this.chart.maxValue = this.options.maxValue || 100;
      this.chart.set(parseInt(this.getAttribute('value')) || 0);
    });
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._oResizeObserver = new ResizeObserver(entries => {
      if (this._resizeTimeout) {
        clearTimeout(this._resizeTimeout);

        this._resizeTimeout = null;
      }

      this._resizeTimeout = setTimeout(e => {
        clearTimeout(this._resizeTimeout);

        this._resizeTimeout = null;
      }, 500);
    });

    this._oResizeObserver.observe(this);
  }

  /**
   * @desc 게이지 수치표시정보를 반환한다.
   * @return {Object} - 수치표시정보
   * @example -
   */
  _maxOption() {
    let _m = this.options.maxValue || 100;

    return {
      staticLabels: {
        labels: [
          0,
          parseInt(_m * 0.1),
          parseInt(_m * 0.2),
          parseInt(_m * 0.3),
          parseInt(_m * 0.4),
          parseInt(_m * 0.5),
          parseInt(_m * 0.6),
          parseInt(_m * 0.7),
          parseInt(_m * 0.8),
          parseInt(_m * 0.9),
          parseInt(_m * 1.0)
        ]
      },
      staticZones: [
        { strokeStyle: '#D6494B', min: _m * 0.0, max: _m * 0.1 },
        { strokeStyle: '#f96868', min: _m * 0.1, max: _m * 0.2 },
        { strokeStyle: '#f2a654', min: _m * 0.2, max: _m * 0.3 },
        { strokeStyle: '#f6be80', min: _m * 0.3, max: _m * 0.4 },
        { strokeStyle: '#f8e59b', min: _m * 0.4, max: _m * 0.5 },
        { strokeStyle: '#f7da64', min: _m * 0.5, max: _m * 0.6 },
        { strokeStyle: '#bad896', min: _m * 0.6, max: _m * 0.7 },
        { strokeStyle: '#9ece67', min: _m * 0.7, max: _m * 0.8 },
        { strokeStyle: '#46be8a', min: _m * 0.8, max: _m * 0.9 },
        { strokeStyle: '#279566', min: _m * 0.9, max: _m * 1.0 }
      ]
    };
  }

  /**
   * @static
   * @memberof JJGauge
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ['data-type', 'value', 'data-max'];
  }

  /**
   * @memberof JJGauge
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.chart.get();
  }

  /**
   * @memberof JJGauge
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this.requirePromise.then(() => {
      this.chart.set(val);
    });
  }

  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {
    if (this.chart) {
      if (attrName == 'data-max') {
        this.requirePromise.then(() => {
          this.chart.maxValue = parseInt(newVal);

          let _m = this.chart.maxValue;

          this.chart.setOptions({
            staticLabels: {
              labels: [
                0,
                parseInt(_m * 0.1),
                parseInt(_m * 0.2),
                parseInt(_m * 0.3),
                parseInt(_m * 0.4),
                parseInt(_m * 0.5),
                parseInt(_m * 0.6),
                parseInt(_m * 0.7),
                parseInt(_m * 0.8),
                parseInt(_m * 0.9),
                parseInt(_m * 1.0)
              ]
            },
            staticZones: [
              { strokeStyle: '#D6494B', min: _m * 0.0, max: _m * 0.1 },
              { strokeStyle: '#f96868', min: _m * 0.1, max: _m * 0.2 },
              { strokeStyle: '#f2a654', min: _m * 0.2, max: _m * 0.3 },
              { strokeStyle: '#f6be80', min: _m * 0.3, max: _m * 0.4 },
              { strokeStyle: '#f8e59b', min: _m * 0.4, max: _m * 0.5 },
              { strokeStyle: '#f7da64', min: _m * 0.5, max: _m * 0.6 },
              { strokeStyle: '#bad896', min: _m * 0.6, max: _m * 0.7 },
              { strokeStyle: '#9ece67', min: _m * 0.7, max: _m * 0.8 },
              { strokeStyle: '#46be8a', min: _m * 0.8, max: _m * 0.9 },
              { strokeStyle: '#279566', min: _m * 0.9, max: _m * 1.0 }
            ]
          });
        });
      }

      if (attrName == 'value') {
        this.requirePromise.then(() => {
          this.chart.set(parseInt(newVal));
        });
      }
    }
  }
}

customElements.define('jj-gauge', JJGauge);
/* ==JJGradientBar.640.class================ */

/**
 * @classdesc 그라디언트바 컴포넌트관리를 위한 클래스
 */
class JJGradientBar extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      data: {
        value: 20,
        direction: 'vertical'
      },
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    if (Jinja.global.isInt(this.getAttribute('value'))) {
      this.options.data.value = this.getAttribute('value');
    }

    this.setAttribute('data-render', 'JJGradientBar');

    let html = `<t>${data.value}%</t>`;

    this.innerHTML = html;
    this.bo = new JJReact(this.querySelector('t'), this.options);
    this.dataset.direction = this.options.data.direction;
  }

  /**
   * @desc 바의 수치를 설정한다.
   * @param {Number} - 바수치
   * @example -
   */
  _setValue(val) {
    if (!val) {
      val = this.options.data.value;
    } else {
      this.options.data.value = val;
    }

    if (this.options.data.direction == 'vertical') {
      this.style.backgroundSize = '100% ' + val + '%';
    } else {
      this.style.backgroundSize = val + '%';
    }
  }

  /**
   * @static
   * @memberof JJGradientBar
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ['data-direction', 'value'];
  }

  /**
   * @memberof JJGradientBar
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.options.data.value;
  }

  /**
   * @memberof JJGradientBar
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this._setValue(val);
  }

  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {
    if (attrName == 'value') {
      this._setValue(newVal);
    }

    if (attrName == 'data-direction') {
      this.options.data.direction = newVal;
      this._setValue();
    }
  }
}

customElements.define('jj-gradient-bar', JJGradientBar);
/* ==JJProgressBar.640.class================ */

/**
 * @classdesc 프로그래스바 컴포넌트관리를 위한 클래스
 */
class JJProgressBar extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      data: {
        value: 20
      },
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    if (Jinja.global.isInt(this.getAttribute('value'))) {
      this.options.data.value = this.getAttribute('value');
    }

    this.setAttribute('data-render', 'JJProgressBar');

    let html =
      `<div class="progress" style="width:100%">` +
      `<div class="progress-bar progress-bar-striped" ` +
      `role="progressbar" aria-valuenow="45" ` +
      `aria-valuemin="0" aria-valuemax="100" style="width: ${data.value}%">` +
      `<span class="">${data.value}%</span>` +
      `</div>` +
      `</div>`;

    this.innerHTML = html;
    this.bo = new JJReact(this.querySelector('.progress'), this.options);
  }

  /**
   * @static
   * @memberof JJProgressBar
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ['value'];
  }

  /**
   * @memberof JJProgressBar
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.options.data.value;
  }

  /**
   * @memberof JJProgressBar
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this.options.data.value = val;
  }

  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {
    if (attrName == 'value') {
      if (Jinja.global.isInt(newVal)) {
        this.options.data.value = newVal;
      }
    }
  }
}

customElements.define('jj-progress-bar', JJProgressBar);
/* ==JJSankey.640.class================ */

class JJSankey extends JJElement  {
  static get observedAttributes() {
    return ["value"];
  }	

  get value() {
    //return this.chart.get();
    return this._value;
  }

  set value(val) {
    this.requirePromise.then(()=>{
      this._chartRender(val);
    });
  }

  _defaultOption(){
    return {
      "require":["sankey.d3"],
      "margin": {"top": 10, "right": 10, "bottom": 10, "left": 10},
      "width":1200,
      "height":400,
      "nodeWidth": 30,
      "nodePadding": 20,
      "version": "630"
    };
  }

  _render(){
    this.$empty();
    this.chart = null;
    this.setAttribute("data-render", "JJChart");
    this._width = (this.offsetWidth||this.options.width) - this.options.margin.left - this.options.margin.right;
    this._height = (this.offsetHeight||this.options.height) - this.options.margin.top - this.options.margin.bottom;

    return this.requirePromise.then(()=>{
      this.svg = d3.select(this).append("svg")
      	.attr("width", this.offsetWidth)
        .attr("height", this.offsetHeight)
        .append("g")
        .attr("transform",
              "translate(" + this.options.margin.left + "," + this.options.margin.top + ")");

      // Color scale used
      this._color = d3.scaleOrdinal(d3.schemeCategory20);

      // Set the sankey diagram properties
      this.chart = d3.sankey()
        .nodeWidth(this.options.nodeWidth)
        .nodePadding(this.options.nodePadding)
        .size([this._width, this._height]);
    });
  }

  
  /* 이벤트 설정 */
  _setEvent(){
  }

  //   /** 외부에서 수동 초기화 */
  init(opt){
    if(opt){
      Object.assign(this.options, opt);		
      this._render();
    }
  }    
  
  // 차트 함수명 통일로 생성함
  updateSeries(graph){
    this.chartRender(graph);
  }
  
  chartRender(graph){
    this.requirePromise.then(()=>{
      this._render().then(()=>{
      	this._chartRender(graph);  
      })
      
    })
  }
  _chartRender(graph){
    this._value = graph;
		let __width = this._width;
		let __height = this._height;
    let __chart = this.chart;
    
    //this.svg.$empty();
    
    this.chart
      .nodes(graph.nodes)
      .links(graph.links)
      .layout(1);

    // add in the links
    var link = this.svg.append("g")
    .selectAll(".link")
    .data(graph.links)
    .enter()
    .append("path")
    .attr("class", "link")
    .attr("d", this.chart.link() )
    .style("stroke-width", function(d) { return Math.max(1, d.dy); })
    .sort(function(a, b) { return b.dy - a.dy; });

    // add in the nodes
    var node = this.svg.append("g")
    .selectAll(".node")
    .data(graph.nodes)
    .enter().append("g")
    .attr("class", "node")
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
    .call(d3.drag()
          .subject(function(d) { return d; })
          .on("start",  function() {  this.parentNode.appendChild(this); })
          .on("drag", dragmove));



    // add the rectangles for the nodes
    node
      .append("rect")
      .attr("height", function(d) { return d.dy; })
      .attr("width", this.chart.nodeWidth())
      .style("fill", d=>{ return d.color = this._color(d.name.replace(/ .*/, "")); })
      .style("stroke", d=>{ return d3.rgb(d.color).darker(2); })
    // Add hover text
      .append("title")
      .text(function(d) { return d.name + "\n" + "There is " + d.value + " stuff in this node"; });

    // add in the title for the nodes
    node
      .append("text")
      .attr("x", -6)
      .attr("y", function(d) { return d.dy / 2; })
      .attr("dy", ".35em")
      .attr("text-anchor", "end")
      .attr("transform", null)
      .text(function(d) { return d.name; })
      .filter(function(d) { return d.x < __width / 2; })
      .attr("x", 6 + this.chart.nodeWidth())
      .attr("text-anchor", "start");

    // the function for moving the nodes
    function dragmove(d) {
      d3.select(this)
        .attr("transform",
              "translate(" + 
              d.x + "," + 
              (d.y = Math.max( 0, Math.min(__height - d.dy, d3.event.y))
              ) + ")");

      __chart.relayout();
      link.attr("d", __chart.link() );
    }

  } 

  demo(){
    this.requirePromise.then(()=>{
    	let graph = {
  "nodes": [
    {
      "node": 0,
      "name": "node0"
    },
    {
      "node": 1,
      "name": "node1"
    },
    {
      "node": 2,
      "name": "node2"
    },
    {
      "node": 3,
      "name": "node3"
    },
    {
      "node": 4,
      "name": "node4"
    },
    {
      "node": 5,
      "name": "node5",
      "class": "red"
    }
  ],
  "links": [
		{
      "source": 0,
      "target": 1,
      "value": 5
    },
    {
      "source": 0,
      "target": 2,
      "value": 5
    },
    {
      "source": 1,
      "target": 3,
      "value": 4.2
    },
    {
      "source": 3,
      "target": 4,
      "value": 2
    },
    {
      "source": 2,
      "target": 3,
      "value": 4
    },
    {
      "source": 2,
      "target": 5,
      "value": 1
    },
    {
      "source": 1,
      "target": 5,
      "value": 1
    }

  ]
};
      this._chartRender(graph);
     })
  }

  attributeChangedCallback(attrName, oldVal, newVal) {
  }  

}

customElements.define('jj-sankey', JJSankey);	/* ==JJDiagram.640.class================ */

/**
 * @classdesc - 다이어그램 컴포넌트관리를 위한 클래스
 */
class JJDiagram extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      require: ['jsplumb.2.12.5'],
      mode: 'studio'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.$empty();

    if(this.options.mode == "studio"){
      this.setAttribute("tabindex", -1);
      this.classList.add("hmi-editor");
      this.sizeBox = document.createElement('jj-resize-box');
      this.sizeBox.hidden = true;
      this.appendChild(this.sizeBox);
      this.setAttribute("tabindex", -1); 
    }    

    this.requirePromise.then(()=>{
      jsPlumb.ready(()=>{
        this.instance = jsPlumb.getInstance({
          Container: this,
          Endpoint: ["Dot", {radius: 5}],
          Connector:"StateMachine",
          HoverPaintStyle: {stroke: "#1e8151", strokeWidth: 5 },
          ConnectionOverlays: [
            [ "Arrow", {
              location: 1,
              id: "arrow",
              length: 14,
              foldback: 0.8
            } ],
            //[ "Label", { label: "AppLink", id: "label", cssClass: "aLabel" }]
          ]
        });

        this.instance.registerConnectionType("basic", { anchor:"Continuous", connector:"StateMachine" });

        if(this.options.mode == "studio"){
          this.instance.bind("click", c=>{
            this.selectNode(c);
          });
					// 컨넥션연결을 위한 드래그 시작시
          this.instance.bind("beforeDrag", info=>{
            this.sizeBox.hidden = true;
          });   
					// 컨넥션 연결시 종료시
          this.instance.bind("connection", info=>{
            //info.connection.getOverlay("label").setLabel(info.connection.id);
          });   
          this.instance.on(this, "click", ".node-collapse", (e)=>{
            var g = e.target.parentNode.getAttribute("group"), 
                collapsed =  this.instance.hasClass(e.target.parentNode, "collapsed");

            this.instance[collapsed ? "removeClass" : "addClass"](e.target.parentNode, "collapsed");
            this.instance[collapsed ? "expandGroup" : "collapseGroup"](g);
          });
        }
        //this.innerItemInit();
      });

    })    

  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    // 개발관련이벤트는 모드를 파악하여 처리함
    if(this.options.mode != "studio") return;

    this.addEventListener("paste", e=>{
      e.preventDefault();
      if(e.clipboardData.files.length) 	{

        Jinja.ajax.imageUpload(e.clipboardData.files)
          .then(result=>{
          let file = result.rows[0];
          this.newImage(e.offsetX, e.offsetY, file.path+file.fileId);        
        });
      }
    });    

    this.addEventListener("drop", e=>{
      e.preventDefault();

      let html = e.dataTransfer.getData("text/html");
      let diagramType = e.dataTransfer.getData("diagram-type");
      let dropObject = e.dataTransfer.getData("objtype/application");
      let dropData = e.dataTransfer.getData("objdata/application");

      if (diagramType=="group"){
        this.newGroup(e.offsetX, e.offsetY, html);  
      } else if(diagramType=="node") {
        this.newNode(e.offsetX, e.offsetY, html);  
      } else if(dropObject=="table") {
        dropData = Jinja.global.json(dropData);
        this.newTable(e.offsetX, e.offsetY, dropData);
      } else {
        this.newNode(e.offsetX, e.offsetY, html);  
      }
    })

    this.addEventListener("dragover", e=>{
      e.preventDefault();
    });

    this.addEventListener("click", e=>{
      e.preventDefault();
      if(e.target.matches(`.w, .w *`)){
        this.selectNode(e.target.$closest(`.w`));
      } else if(e.target.matches(`.group-container, .group-container *`)){
        this.selectNode(e.target.$closest(`.group-container`));
      } else if(Object.is(this, e.target)) {
        // 빈공간을 선택하면 취소처리함
        this.clearSelectNode();
      }
    });

    this.addEventListener("keydown", e=>{
      let keyMap =  Jinja.global.getEventKeyMap(e);

      if (["Delete"].includes(keyMap)){
        e.preventDefault();
        e.stopPropagation();
      }
      switch(keyMap){
        case "Delete":
          this.deleteNode(e);
          break;

        default:
          break;

      }      
    });

    this.addEventListener("resize", e=>{
      e.preventDefault();
      e.stopPropagation();
      this.instance.repaintEverything();
      
    });
    
    //     this.addEventListener("mousedown", e=>{
    //       if(e.button === 0 && !e.target.matches(`jj-resize-box *`)){
    //        this.sizeBox.hidden = true;
    //       }
    //     });

  }

  /**
   * @desc 지정한 엘리먼트에 대한 Marker를 설정한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  _setMarker(el) {
    this.instance.makeSource(el, {
      filter: '.ep',
      anchor: 'Continuous',
      connectorStyle: {
        stroke: '#5c96bc',
        strokeWidth: 2,
        outlineStroke: 'transparent',
        outlineWidth: 4
      },
      connectionType: 'basic',
      extract: {
        action: 'the-action'
      },
      maxConnections: 12,
      onMaxConnections: (info, e) => {
        alert('Maximum connections (' + info.maxConnections + ') reached');
      }
    });

    this.instance.makeTarget(el, {
      dropOptions: {hoverClass: 'dragHover'},
      anchor: 'Continuous',
      allowLoopback: true
    });
  }

  /**
   * @desc 컴포넌트를 삭제한다.
   * @example -
   */
  _clear() {
    this.querySelectorAll('[group]').forEach(el => {
      let g = el.getAttribute('group');

      this.instance.removeGroup(g, true);
    });

    this.instance.deleteEveryConnection();
    this.querySelectorAll('.w').forEach(el => el.remove());
  }

  /**
   * @desc 지정한 JSON 데이터를 엘리먼트의 그룹, 노드, 연결정보로 셋팅한다.
   * @param {Object} - 엘리먼트정보
   * @example -
   */
  _fromJSON(jsonData) {
    this.clear(true);

    let defaultBody = {
      groups: [],
      nodes: [],
      connectors: []
    };

    let body = Object.assign(defaultBody, jsonData);

    body.groups.forEach(g => {
      let groupEl = document.createElement('div');

      groupEl.className = 'group-container';
      groupEl.setAttribute('group', g.group);
      groupEl.setAttribute('style', g.style);
      groupEl.innerHTML = g.html;

      if (g.bodystyle) {
        groupEl.classList.add('group-image');
      }

      this.instance.getContainer().appendChild(groupEl);
      this.initGroup(groupEl);
    });

    body.nodes.forEach(node => {
      let nodeEl = document.createElement('div');

      nodeEl.className = 'w';
      nodeEl.setAttribute('jj-id', node.wid);
      nodeEl.setAttribute('style', node.style);
      nodeEl.innerHTML = node.html;

      this.instance.getContainer().appendChild(nodeEl);
      this.initNode(nodeEl);

      if (node.object) {
        nodeEl.setAttribute('objtype', node.object.type);
        nodeEl.dataset.objdata = Jinja.global.string(node.object.data);
      }
    });

    body.connectors.forEach(conn => {
      this.instance.connect({
        source: this.querySelector(`[jj-id="${conn.source}"]`),
        target: this.querySelector(`[jj-id="${conn.target}"]`),
        type: 'basic'
      });
    });
  }

  /**
   * @static
   * @memberof JJText
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return [''];
  }

  /**
   * @desc 지정한 노드를 선택한다.
   * @param {Element} - 노드
   * @example -
   */
  selectNode(el) {
    this.clearSelectNode();

    this.selectEl = el;

    if (el.canvas) {
      el.canvas.classList.add('selected');
    } else if (el.classList) {
      el.classList.add('selected');
    }

    this.sizeBox.lockElement(this.selectEl);
    this.sizeBox.hidden = false;

    this.selectEl.dispatchEvent(
      new CustomEvent('selected', {
        detail: {
          editor: this,
          node: this.selectEl.firstElementChild
        },
        bubbles: true
      })
    );
  }

  /**
   * @desc 선택된 노드를 선택해제한다.
   * @example -
   */
  clearSelectNode() {
    if (this.selectEl) {
      if (this.selectEl.canvas) {
        this.selectEl.canvas.classList.remove('selected');
      } else if (this.selectEl.classList) {
        this.selectEl.classList.remove('selected');
      }

      this.selectEl = null;
    }

    this.sizeBox.hidden = true;
  }

  /**
   * @desc 선택된 노드를 삭제한다.
   * @example -
   */
  deleteNode() {
    if(!this.selectEl){
      alert("선택된 항목이 없습니다");
      return;
    }

    Jinja.confirm.delete("Connection delete ?")
      .then(()=>{

      if (this.selectEl.canvas){
        this.instance.deleteConnection(this.selectEl);
      } else if(this.selectEl.matches('.group-container')) {
        // .w에 연결된 Connection을 먼저 제거한다
        var g = this.selectEl.getAttribute("group");
        this.instance.removeGroup(g, true);

      } else if(this.selectEl.matches('.w')) {
        // .w에 연결된 Connection을 먼저 제거한다
        this.instance.getConnections().forEach(conn=>{
          if (Object.is(this.selectEl,conn.source) || Object.is(this.selectEl, conn.target)){
            this.instance.deleteConnection(conn);
          }
        });
        this.selectEl.remove();
      }
      this.clearSelectNode()
    })
      .catch(()=>{});
  }

  /**
   * @desc 지정된 이미지를 출력한다.
   * @example -
   */
  print() {
    Jinja.global.capture(this).then(img => {
      JJHee.open('getCapture.610.uc', {
        search: {
          image: img
        },
        position: {
          width: '80%'
        },
        isModal: true,
        isMoveable: true
      })
        .then(result => {})
        .catch(ex => {});
    });
  }

  /**
   * @desc 신규 노드를 추가한다.
   * @param {Number} - x 좌표
   * @param {Number} - y 좌표
   * @param {String} - 노드내용
   * @return {Element} - 노드
   * @example -
   */
  newNode(x, y, html) {
    let d ;
    let id = Jinja.global.uuid(); //jsPlumbUtil.uuid();
    let ep = document.createElement("div");
    ep.classList.add('ep');

    let _warp =document.createElement("div");
    _warp.innerHTML = html;
    
//     if(_warp.childElementCount == 1){
//       d = _warp.childNodes[0]
//     } else {
//     	d = document.createElement("div");  
// 	    //d.innerHTML = (html || id.substring(0, 7)) + "<div class=\"ep\"></div>";
//     }
    
    d = document.createElement("div");  
 	  d.innerHTML = html;
    d.appendChild(ep);
    
    d.classList.add("w");
    d.setAttribute("jj-id", id);
    d.style.left = x + "px";
    d.style.top = y + "px";
    this.instance.getContainer().appendChild(d);
    d.querySelectorAll('.list-group-item').forEach(el=>{
      el.classList.remove('list-group-item');
    })
    this.initNode(d);
    return d;
  }

  /**
   * @desc 신규 그룹을 추가한다.
   * @param {Number} - x좌표
   * @param {Number} - y좌표
   * @param {String} - 그룹내용
   * @example -
   */
  newGroup(x, y, html) {
    let group = document.createElement("div");
    group.className = "group-container";
    group.style.left = x + "px";
    group.style.top = y + "px";
    group.setAttribute("group", Jinja.global.uuid());
    group.innerHTML = `
<div class="title">newGroup</div>
<div class="group-body">${html}</div>
<div class="del" delete-all></div>
<div class="node-collapse"></div>
`;

    this.instance.getContainer().appendChild(group);
    group.querySelectorAll('.list-group-item').forEach(el=>{
      el.classList.remove('list-group-item');
    })
    this.initGroup(group);
  }

  /**
   * @desc 신규 이미지그룹을 추가한다.
   * @param {Number} - x좌표
   * @param {Number} - y좌표
   * @param {String} - 이미지주소
   * @example -
   */
  newImage(x, y, image) {
    let group = document.createElement("div");
    group.setAttribute("class", "group-container group-image");
    group.style.left = x + "px";
    group.style.top = y + "px";
    group.setAttribute("group", Jinja.global.uuid());
    group.innerHTML = `
<div class="title">newGroup</div>
<div class="group-body" style="background-image: url(${image});"></div>
<div class="del" delete-all></div>
<div class="node-collapse"></div>
`;


    this.instance.getContainer().appendChild(group);
    this.initGroup(group);
  }

  /**
   * @desc 신규 테이블을 추가한다.(Ul, LI 태그)
   * @param {Number} - x좌표
   * @param {Number} - y좌표
   * @param {Object} - 옵션
   * @return {Element} - 테이블을 담은 DIV
   * @example -
   */
  newTable(x, y, options) {
    let nodeEl = document.createElement('div');
    let cont = document.createElement('div');

    cont.classList.add('table-wrap');

    nodeEl.appendChild(cont);
    nodeEl.id = Jinja.global.uuid();

    nodeEl.className = 'w';
    nodeEl.setAttribute('jj-id', nodeEl.id);
    nodeEl.setAttribute('objtype', 'table');
    nodeEl.dataset.objdata = Jinja.global.string(options);
    nodeEl.style.left = x + 'px';
    nodeEl.style.top = y + 'px';

    let html = `<h4>${options.table}</h4><ul class="list-group">`;

    this.dbo.setWorkspace(options.jbatis);
    this.dbo.getColumns(options.table).then(result => {
      result.rows.forEach(row => {
        html += `<li class="list-group-item">${row.COLUMN_NAME}</li>`;
      });

      html += `</ul>`;

      cont.innerHTML = html + '<div class="ep"></div>';

      this.instance.getContainer().appendChild(nodeEl);

      new JJSortable(nodeEl.querySelector('.list-group'), {});

      this.initNode(nodeEl);
    });

    return nodeEl;
  }

  /**
   * @desc - 지정한 노드를 초기화한다.
   * @param {Element} - 노드
   * @return {} -
   * @example -
   */
  initNode(el) {
    if(this.options.mode == "studio"){
      this.instance.draggable(el,{
        filter:".resizer, .list-group *,.resizer, .resizer * ",
        grid:[5,5]
      });
      this._setMarker(el);
    } else {
      this._setMarker(el);  
    }		
    return el;
  }

  /**
   * @desc 지정한 그룹을 초기화한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  initGroup(el) {
    if(this.options.mode == "studio"){
      this.instance.addGroup({
        "el":el,
        "id":el.getAttribute("group"),
        "orphan":true,
        "droppable":true,
        "dragOptions": {
          "filter":".resizer, .list-group *,.resizer, .resizer * "
        },
        "endpoint":["Dot", { radius:3 }]
      });

      el.querySelectorAll(".w").forEach(nodeEl=>{
        this.initNode(nodeEl);

        this.instance.addToGroup(el.getAttribute("group"), nodeEl);
      })
    }
  }

  /**
   * @desc 지정한 이미지를 초기화한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  initImage(el) {
    if (this.options.mode == 'studio') {
      this.instance.addGroup({
        el: el,
        id: el.getAttribute('group'),
        orphan: true,
        droppable: true,
        endpoint: ['Dot', { radius: 3 }]
      });

      el.querySelectorAll('.w').forEach(nodeEl => {
        this.initNode(nodeEl);
        this.instance.addToGroup(el.getAttribute('group'), nodeEl);
      });
    }
  }

  /**
   * @desc 내부 요소들을 초기화한다.
   * @example -
   */
  innerItemInit() { 
    this.querySelectorAll('[group]').forEach(el => this.initGroup(el));
    this.querySelectorAll('.w').forEach(el => {
      if (!el.matches('[group] .w')) {
        this.initNode(el);
      }
    });
  }

  /**
   * @desc 지정한 이미지파일목록을 컴포넌트에 추가한다.
   * @param {Array} - 이미지파일정보목록
   * @example -
   */
  attchImages(files) {
    for (let i = 0; i < files.length; i++) {
      let row = {
        NAME: files[i].name,
        SIZE: files[i].size,
        TYPE: files[i].type,
        URI: '',
        FILEOBJ: files[i]
      };

      let lens = this.options.data.images.push(row);
      let reader = new FileReader();

      reader.addEventListener('load', readEvent => {
        this.options.data.images[lens - 1].URI = readEvent.target.result;
      });

      reader.readAsDataURL(files[i]);
    }
  }

  /**
   * @desc 컴포넌트를 삭제한다.
   * @param {Boolean} - 삭제유무
   * @example -
   */
  clear(isConfirm) {
    if (isConfirm) {
      this._clear();
    } else {
      Jinja.confirm
        .delete('Diagram All Clear ?')
        .then(() => this._clear())
        .catch(() => {});
    }
  }

  /**
   * @desc 엘리먼트의 그룹, 노드, 연결정보를 JSON 오브젝트로 반환한다.
   * @return {Object} - 엘리먼트정보
   * @example -
   */
  toJSON() {
    let groups = [];

    this.querySelectorAll('[group]').forEach(el => {
      let g = {
        group: el.getAttribute('group'),
        style: el.getAttribute('style'),
        html: el.innerHTML
      };

      if (el.classList.contains('group-image')) {
        g.bodystyle = el.querySelector('.group-body').getAttribute('style');
      }

      groups.push(g);
    });

    let nodes = [];

    this.querySelectorAll('.w').forEach(el => {
      if (!el.matches('[group] .w')) {
        let node = {
          wid: el.getAttribute('jj-id'),
          style: el.getAttribute('style'),
          html: el.innerHTML,
          object: {
            type: el.getAttribute('objtype'),
            data: el.dataset.objdata
          }
        };

        nodes.push(node);
      }
    });

    let connectors = [];

    this.instance.getConnections().forEach(conn => {
      connectors.push({
        source: conn.source.getAttribute('jj-id'),
        target: conn.target.getAttribute('jj-id')
      });
    });

    return {
      groups: groups,
      nodes: nodes,
      connectors: connectors
    };
  }

  /**
   * @desc 지정한 JSON 데이터를 엘리먼트의 그룹, 노드, 연결정보로 셋팅한다.
   * @param {Object} - 엘리먼트정보
   * @example -
   */
  fromJSON(jsonData) {
    this.requirePromise.then(() => {
      this._fromJSON(jsonData);
    });
  }
}

customElements.define('jj-diagram', JJDiagram);
/* ==JJErdDiagram.640.class================ */
class JJErdDiagram extends JJElement {

  /**
   * https://docs.jsplumbtoolkit.com/community/current/index.html
   * https://jsplumbtoolkit.com/community
   */
  static get observedAttributes() {
    return [""];
  }	  

  _defaultOption(){
    
    this.dao = new JJBatisDBA();

    return {
      "require":["jsplumb.2.12.5"],
      "mode": "studio"
    }
  }

  _render(){
    this.$empty();

    if(this.options.mode == "studio"){
      this.setAttribute("tabindex", -1);
      this.classList.add("hmi-editor");
      this.sizeBox = document.createElement('jj-resize-box');
      this.sizeBox.hidden = true;
      this.appendChild(this.sizeBox);
      this.setAttribute("tabindex", -1); 
    }    

    this.requirePromise.then(()=>{
      jsPlumb.ready(()=>{
        this.instance = jsPlumb.getInstance({
          Container: this,
          Endpoint: ["Dot", {radius: 5}],
          Connector:"StateMachine",
          HoverPaintStyle: {stroke: "#1e8151", strokeWidth: 5 },
          ConnectionOverlays: [
            [ "Arrow", {
              location: 1,
              id: "arrow",
              length: 14,
              foldback: 0.8
            } ],
            //[ "Label", { label: "AppLink", id: "label", cssClass: "aLabel" }]
          ]
        });

        this.instance.registerConnectionType("basic", { anchor:"Continuous", connector:"StateMachine" });

        if(this.options.mode == "studio"){
          this.instance.bind("click", c=>{
            this.selectNode(c);
          });
					// 컨넥션연결을 위한 드래그 시작시
          this.instance.bind("beforeDrag", info=>{
            this.sizeBox.hidden = true;
          });   
					// 컨넥션 연결시 종료시
          this.instance.bind("connection", info=>{
            //info.connection.getOverlay("label").setLabel(info.connection.id);
          });   
          this.instance.on(this, "click", ".node-collapse", (e)=>{
            var g = e.target.parentNode.getAttribute("group"), 
                collapsed =  this.instance.hasClass(e.target.parentNode, "collapsed");

            this.instance[collapsed ? "removeClass" : "addClass"](e.target.parentNode, "collapsed");
            this.instance[collapsed ? "expandGroup" : "collapseGroup"](g);
          });
        }
        //this.innerItemInit();
      });

    })    

  }

  _setEvent(){
    // 개발관련이벤트는 모드를 파악하여 처리함
    if(this.options.mode != "studio") return;

    this.addEventListener("paste", e=>{
      e.preventDefault();
      if(e.clipboardData.files.length) 	{

        Jinja.ajax.imageUpload(e.clipboardData.files)
          .then(result=>{
          let file = result.rows[0];
          this.newImage(e.offsetX, e.offsetY, file.path+file.fileId);        
        });
      }
    });    

    this.addEventListener("drop", e=>{
      e.preventDefault();

      let html = e.dataTransfer.getData("text/html");
      let diagramType = e.dataTransfer.getData("diagram-type");
      let dropObject = e.dataTransfer.getData("objtype/application");
      let dropData = e.dataTransfer.getData("objdata/application");

      if (diagramType=="group"){
        this.newGroup(e.offsetX, e.offsetY, html);  
      } else if(diagramType=="node") {
        this.newNode(e.offsetX, e.offsetY, html);  
      } else if(dropObject=="table") {
        dropData = Jinja.global.json(dropData);
        this.newTable(e.offsetX, e.offsetY, dropData);
      } else {
        this.newNode(e.offsetX, e.offsetY, html);  
      }
    })

    this.addEventListener("dragover", e=>{
      e.preventDefault();
    });

    this.addEventListener("click", e=>{
      e.preventDefault();
      if(e.target.matches(`.w, .w *`)){
        this.selectNode(e.target.$closest(`.w`));
      } else if(e.target.matches(`.group-container, .group-container *`)){
        this.selectNode(e.target.$closest(`.group-container`));
      } else if(Object.is(this, e.target)) {
        // 빈공간을 선택하면 취소처리함
        this.clearSelectNode();
      }
    });

    this.addEventListener("keydown", e=>{
      let keyMap =  Jinja.global.getEventKeyMap(e);

      if (["Delete"].includes(keyMap)){
        e.preventDefault();
        e.stopPropagation();
      }
      switch(keyMap){
        case "Delete":
          this.deleteNode(e);
          break;

        default:
          break;

      }      
    });

    this.addEventListener("resize", e=>{
      e.preventDefault();
      e.stopPropagation();
      this.instance.repaintEverything();
      
    });
    
    //     this.addEventListener("mousedown", e=>{
    //       if(e.button === 0 && !e.target.matches(`jj-resize-box *`)){
    //        this.sizeBox.hidden = true;
    //       }
    //     });

  }



  clearSelectNode(){
    if (this.selectEl){
      if (this.selectEl.canvas){
        this.selectEl.canvas.classList.remove("selected");
      } 
      else if(this.selectEl.classList) {
        this.selectEl.classList.remove("selected");
      }

      this.selectEl = null;

    }

    this.sizeBox.hidden = true;
  }

  selectNode(obj, e){
    this.clearSelectNode();

    this.selectEl = obj;

    if (obj.canvas){
      obj.canvas.classList.add("selected");
    } 
    else if(obj.classList) {
      obj.classList.add("selected");
    }

    this.sizeBox.lockElement(this.selectEl);
    this.sizeBox.hidden = false;

    //this.selectEl.focus();

    this.selectEl.dispatchEvent(new CustomEvent('selected', {
      "detail": {
        "editor": this,
        "node": this.selectEl.firstElementChild
      },      
      bubbles: true
    }));      


  }

  deleteNode(obj){
    if(!this.selectEl){
      alert("선택된 항목이 없습니다");
      return;
    }

    Jinja.confirm.delete("Connection delete ?")
      .then(()=>{

      if (this.selectEl.canvas){
        this.instance.deleteConnection(this.selectEl);
      } else if(this.selectEl.matches('.group-container')) {
        // .w에 연결된 Connection을 먼저 제거한다
        var g = this.selectEl.getAttribute("group");
        this.instance.removeGroup(g, true);

      } else if(this.selectEl.matches('.w')) {
        // .w에 연결된 Connection을 먼저 제거한다
        this.instance.getConnections().forEach(conn=>{
          if (Object.is(this.selectEl,conn.source) || Object.is(this.selectEl, conn.target)){
            this.instance.deleteConnection(conn);
          }
        });
        this.selectEl.remove();
      }
      this.clearSelectNode()
    })
      .catch(()=>{});

  }

  print(){
    Jinja.global.capture(this)
      .then(img =>{
      JJHee.open("getCapture.610.uc",{
        "search":{
          "image": img
        },  
        "position": {
          "width": "80%"
        },
        isModal: true,
        isMoveable: true
      })
        .then(result=>{
        //hee.text.value = result.text;
      })
        .catch(ex=>{});
    })
  }

  newNode(x, y, html) {
    let d ;
    let id = Jinja.global.uuid(); //jsPlumbUtil.uuid();
    let ep = document.createElement("div");
    ep.classList.add('ep');

    let _warp =document.createElement("div");
    _warp.innerHTML = html;
    
//     if(_warp.childElementCount == 1){
//       d = _warp.childNodes[0]
//     } else {
//     	d = document.createElement("div");  
// 	    //d.innerHTML = (html || id.substring(0, 7)) + "<div class=\"ep\"></div>";
//     }
    
    d = document.createElement("div");  
 	  d.innerHTML = html;
    d.appendChild(ep);
    
    d.classList.add("w");
    d.setAttribute("jj-id", id);
    d.style.left = x + "px";
    d.style.top = y + "px";
    this.instance.getContainer().appendChild(d);
    d.querySelectorAll('.list-group-item').forEach(el=>{
      el.classList.remove('list-group-item');
    })
    this.initNode(d);
    return d;
  }  



  newGroup(x,y,html){
    let group = document.createElement("div");
    group.className = "group-container";
    group.style.left = x + "px";
    group.style.top = y + "px";
    group.setAttribute("group", Jinja.global.uuid());
    group.innerHTML = `
<div class="title">newGroup</div>
<div class="group-body">${html}</div>
<div class="del" delete-all></div>
<div class="node-collapse"></div>
`;

    this.instance.getContainer().appendChild(group);
    group.querySelectorAll('.list-group-item').forEach(el=>{
      el.classList.remove('list-group-item');
    })
    this.initGroup(group);
  }

  newImage(x,y,image){
    let group = document.createElement("div");
    group.setAttribute("class", "group-container group-image");
    group.style.left = x + "px";
    group.style.top = y + "px";
    group.setAttribute("group", Jinja.global.uuid());
    group.innerHTML = `
<div class="title">newGroup</div>
<div class="group-body" style="background-image: url(${image});"></div>
<div class="del" delete-all></div>
<div class="node-collapse"></div>
`;


    this.instance.getContainer().appendChild(group);
    this.initGroup(group);
  }


  XXnewTable(x, y, options){
    var nodeEl = document.createElement("div");
    var cont = document.createElement("div");
    nodeEl.appendChild(cont);
    nodeEl.id = Jinja.global.uuid();

    nodeEl.className = "w";
    nodeEl.setAttribute("jj-id", nodeEl.id);
    nodeEl.setAttribute("objtype", "table");
    nodeEl.dataset.objdata = Jinja.global.string(options);
    nodeEl.style.left = x + "px";
    nodeEl.style.top = y + "px";

    let html = `<table class="table"><thead><tr><th><label>${options.table}</label></th></tr></thead><tbody>`;
    this.dbo.setWorkspace(options.jbatis);
    this.dbo.getColumns(options.table)
      .then(result=>{
      result.rows.forEach(row=>{
        html += `<tr><td>${row.COLUMN_NAME}</td></tr>`;	
      });
      html += `</tbody></table>`;
      cont.innerHTML = (html+ "<div class=\"ep\"></div>");
      this.instance.getContainer().appendChild(nodeEl);

      //       new JJRresizable(nodeEl, {
      //         "handles":"n,e,s,w,ne,se,sw,nw",
      // //         "onResizestart": (e)=>{
      // //         },
      //         "onResize": (e)=>{
      //           this.instance.revalidate(nodeEl);
      //         }
      //       }); 
      new JJSortable([nodeEl.querySelector("tbody")],{
        "handle": "td"
      }); 

      this.initNode(nodeEl);
    });
    return nodeEl;
  }  

  newTable(x, y, options){
    var nodeEl = document.createElement("div");
    var cont = document.createElement("div");
    cont.classList.add("table-wrap")
    nodeEl.appendChild(cont);
    nodeEl.id = Jinja.global.uuid();

    nodeEl.className = "w";
    nodeEl.setAttribute("jj-id", nodeEl.id);
    nodeEl.setAttribute("objtype", "table");
    nodeEl.dataset.objdata = Jinja.global.string(options);
    nodeEl.style.left = x + "px";
    nodeEl.style.top = y + "px";

    let html = `<h4>${options.table}</h4>
<ul class="list-group">
`;
    this.dao.setWorkspace(options.jbatis);
    this.dao.getColumns(options.table)
      .then(result=>{
      result.rows.forEach(row=>{
        html += `<li class="list-group-item">${row.COLUMN_NAME}</li>`;	
      });
      html += `</ul>`;

      cont.innerHTML = (html+ "<div class=\"ep\"></div>");
      this.instance.getContainer().appendChild(nodeEl);

      //       new JJRresizable(nodeEl, {
      //         "handles":"n,e,s,w,ne,se,sw,nw",
      // //         "onResizestart": (e)=>{
      // //         },
      //         "onResize": (e)=>{
      //           this.instance.revalidate(nodeEl);
      //         }
      //       }); 

      new JJSortable(nodeEl.querySelector(".list-group"),{
      }); 

      this.initNode(nodeEl);
    });
    return nodeEl;
  }  


  initNode(el) {

    if(this.options.mode == "studio"){
      this.instance.draggable(el,{
        filter:".resizer, .list-group *,.resizer, .resizer * ",
        grid:[5,5]
      });
      this._setMarker(el);
    } else {
      this._setMarker(el);  
    }		



    return el;
  }

  _setMarker(el){
    this.instance.makeSource(el, {
      filter: ".ep",
      anchor: "Continuous",
      connectorStyle: { stroke: "#5c96bc", strokeWidth: 2, outlineStroke: "transparent", outlineWidth: 4 },
      connectionType:"basic",
      extract:{
        "action":"the-action"
      },
      maxConnections: 12,
      onMaxConnections: (info, e)=>{
        alert("Maximum connections (" + info.maxConnections + ") reached");
      }
    });

    this.instance.makeTarget(el, {
      dropOptions: { hoverClass: "dragHover" },
      anchor: "Continuous",
      allowLoopback: true
    });

  }

  initGroup(el) {
    if(this.options.mode == "studio"){
      this.instance.addGroup({
        "el":el,
        "id":el.getAttribute("group"),
        "orphan":true,
        "droppable":true,
        "dragOptions": {
          "filter":".resizer, .list-group *,.resizer, .resizer * "
        },
        "endpoint":["Dot", { radius:3 }]
      });

      el.querySelectorAll(".w").forEach(nodeEl=>{
        this.initNode(nodeEl);

        this.instance.addToGroup(el.getAttribute("group"), nodeEl);
      })

    }
    //     new JJRresizable(el, {
    //       "handles": "n,e,s,w,ne,se,sw,nw,allClose"    
    //     })

  }

  initImage(el) {
    if(this.options.mode == "studio"){
      this.instance.addGroup({
        "el":el,
        "id":el.getAttribute("group"),
        "orphan":true,
        "droppable":true,
        "endpoint":["Dot", { radius:3 }]
      });
      el.querySelectorAll(".w").forEach(nodeEl=>{
        this.initNode(nodeEl);
        this.instance.addToGroup(el.getAttribute("group"), nodeEl);
      })

    }
    //     new JJRresizable(el, {
    //       "handles": "n,e,s,w,ne,se,sw,nw,allClose"    
    //     })


  }

  innerItemInit(){

    this.querySelectorAll("[group]").forEach(el=>this.initGroup(el));
    this.querySelectorAll(".w").forEach(el=>{
      if(!el.matches('[group] .w')){
        this.initNode(el)
      }
    })
  }

  attchImages(files){
    for (var i = 0; i < files.length; i++) {
      let row = {
        "NAME": files[i].name,
        "SIZE": files[i].size,
        "TYPE": files[i].type,
        "URI":"",
        "FILEOBJ": files[i]
      };

      // react로 파일표시됨	
      let lens = this.options.data.images.push(row);
      var reader = new FileReader();
      reader.addEventListener("load", readEvent=>{
        this.options.data.images[lens-1].URI = readEvent.target.result;
      });
      reader.readAsDataURL(files[i]);        
    }

  }  

  clear(isConfirm){
    if (isConfirm){
      this._clear();
    } else {
      Jinja.confirm.delete("Diagram All Clear ?")
        .then(()=>this._clear())
        .catch(()=>{});
    }	
  }
  _clear(){
    /**
     * 그룹요소를 먼저 제거하고 다음요소를 제거해야 한다
     */
    this.querySelectorAll("[group]").forEach(el=>{
      var g = el.getAttribute("group");
      this.instance.removeGroup(g, true);
    });

    //this.instance.clear();
    this.instance.deleteEveryConnection();
    this.querySelectorAll(".w").forEach(el=>el.remove());

  }


  toJSON(){
    let groups = [];
    this.querySelectorAll("[group]").forEach(el=>{
      let g = {
        "group": el.getAttribute("group"),
        "style": el.getAttribute("style"),

        "html":  el.innerHTML
      }

      // 그룹이미지이면 배경이미지를 보관한다
      if(el.classList.contains("group-image")){
        g.bodystyle = el.querySelector(".group-body").getAttribute("style");
      }

      groups.push(g);
    });

    let nodes = [];
    this.querySelectorAll(".w").forEach(el=>{
      if(!el.matches('[group] .w')){
        let node = {
          "wid": el.getAttribute("jj-id"),
          "style": el.getAttribute("style"),
          "html":  el.innerHTML,
          "object": {
            "type": el.getAttribute("objtype"),
            "data": el.dataset.objdata
          }
        }
        nodes.push(node);
      }
    });    

    let connectors = [];
    this.instance.getConnections().forEach(conn=>{
      connectors.push({
        "source": conn.source.getAttribute("jj-id"),
        "target": conn.target.getAttribute("jj-id")
      })
    });

    return {
      "groups": groups,
      "nodes": nodes,
      "connectors": connectors
    }
  }

  fromJSON(jsonData){
    this.requirePromise.then(()=>{
      this._fromJSON(jsonData);
    })

  }  
  _fromJSON(jsonData){

    this.clear(true);

    let defaultBody = {
      "groups": [],
      "nodes": [],
      "connectors": []
    };

    let body =  Object.assign(defaultBody, jsonData);
    body.groups.forEach(g=>{
      let groupEl = document.createElement("div");
      groupEl.className = "group-container";
      groupEl.setAttribute("group", g.group);
      groupEl.setAttribute("style", g.style);
      groupEl.innerHTML = g.html;

      if(g.bodystyle){
        groupEl.classList.add("group-image");
      }


      this.instance.getContainer().appendChild(groupEl);
      this.initGroup(groupEl);      
    })

    body.nodes.forEach(node=>{
      var nodeEl = document.createElement("div");
      nodeEl.className = "w";
      nodeEl.setAttribute("jj-id", node.wid);
      nodeEl.setAttribute("style", node.style);
      nodeEl.innerHTML = node.html;
      this.instance.getContainer().appendChild(nodeEl);
      this.initNode(nodeEl);

      if(node.object){
        nodeEl.setAttribute("objtype", node.object.type);
        nodeEl.dataset.objdata = Jinja.global.string(node.object.data)
      }

    })

    body.connectors.forEach(conn=>{
      this.instance.connect({ 
        source: this.querySelector(`[jj-id="${conn.source}"]`), 
        target: this.querySelector(`[jj-id="${conn.target}"]`), type:"basic" });
    });

  }

}

customElements.define('jj-erd-diagram', JJErdDiagram);	/* ==JJDiv4box.640.class================ */

/**
 * @classdesc - 4분할박스 컴포넌트관리를 위한 클래스
 */
class JJDiv4Box extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      isTheme: false,
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.viewId = Jinja.global.uuid();
    this.innerHTML = 
      `<div class="toolbar">` +
      `<div class="btn-group">` +
      `<button type="button" class="btn btn-link btn-sm" data-style="show22"><i class="fa fa-th-large" aria-hidden="true"></i></button>` +
      `<button type="button" class="btn btn-link btn-sm" data-style="show31"><i class="fa fa-caret-square-o-down" aria-hidden="true"></i></button>` +
      `<button type="button" class="btn btn-link btn-sm" data-style="show13"><i class="fa fa-caret-square-o-up" aria-hidden="true"></i></button>` +
      `<button type="button" class="btn btn-link btn-sm" data-style="showTab"><i class="fa fa-mobile" aria-hidden="true"></i></button>` +
      `<button type="button" class="btn btn-link btn-sm" data-style="showTabH"><i class="fa fa-mobile" aria-hidden="true"></i></button>` +
      `<button type="button" class="hidden btn btn-link btn-sm" data-style="showComponent"><i class="fa fa-columns" aria-hidden="true"></i></button>` +
      `</div>` +
      `<div class="btn-group tabbox pull-right">` +
      `<button type="button" class="btn btn-link btn-sm" data-tabbox="box1">html</button>` +
      `<button type="button" class="btn btn-link btn-sm" data-tabbox="box3">script</button>` +
      `<button type="button" class="btn btn-link btn-sm" data-tabbox="box2">css</button>` +
      `</div>` +
      `<div class="btn-group pull-right" hidden>` +
      `<button type="button" class="btn btn-link btn-sm" jj-command="setFirePad">setFirePad</button>` +
      `<button type="button" class="btn btn-link btn-sm" jj-command="resetFirePad">resetFirePad</button>` +
      `</div>` +
      `</div>` +
      `<div jj-id="boxwarp" class="box40-warp">` +
      `<div jj-id="box1" class="box40 box1">` +
      `<jj-code-editor jj-id="htmlEditor" data-mode="html" data-theme="eclipse"></jj-code-editor>` +
      `</div>` +
      `<div jj-id="box2" class="box40 box2">` +
      `<jj-code-editor jj-id="lessEditor" data-mode="less" data-theme="eclipse"></jj-code-editor>` +
      `</div>` +
      `<div jj-id="box3" class="box40 box3">` +
      `<jj-code-editor jj-id="scriptEditor"  data-mode="javascript" data-theme="eclipse"></jj-code-editor>` +
      `</div>` +
      `<div jj-id="box4" class="box40 box4">` +
      `<jj-frame-viewer jj-id="viewer"></jj-frame-viewer>` +
      `</div>` +
      `<div jj-id="dragbarX"  class="dragbar-x"></div>` +
      `<div jj-id="dragbarX2" class="dragbar-x2"></div>` +
      `<div jj-id="dragbarY"  class="dragbar-y"></div>` +
      `<div jj-id="dragbarY2" class="dragbar-y2"></div>` +
      `</div>`;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.isHtmlChanged = false;

    this.addEventListener('changeedit', e => {
      if (e.detail.mode == 'html') {
        this.isHtmlChanged = true;
      }

      let uuid = Jinja.global.uuid();
      let less = this.lessEditor.value;

      Jinja.dom
        .lessUUIDcss(less, uuid)
        .then(css =>
          Jinja.global.string({
            uuid: uuid,
            html: this.htmlEditor.value,
            css: css,
            less: less,
            script: this.scriptEditor.value,
          })
        )
        .then(content => {
          this.viewer.syncLoad(content);
        })
        .catch(ex => {
          console.error(ex);
        });
    });

    this.addEventListener('excute', e => {
      this.excute();
    });

    this.addEventListener('click', e => {
      if (e.target.matches(`[data-style], [data-style] *`)) {
        let el = e.target.closest('[data-style]');
        this.setViewType(el.dataset.style);
      }
      if(e.target.matches(`[data-tabbox]`)){
        let el = e.target.closest("[data-tabbox]");
        this.tabbox(el.dataset.tabbox);
      }
      
    });

    this.addEventListener('keydown', e => {
      let keyMap = Jinja.global.getEventKeyMap(e);

      if (['Ctrl-H', 'Ctrl-L', 'Ctrl-J'].includes(keyMap)) {
        e.preventDefault();
        e.stopPropagation();
      }
      switch (keyMap) {
        case 'Ctrl-H':
          this.htmlEditor.focus();
          break;
        case 'Ctrl-L':
          this.lessEditor.focus();
          break;
        case 'Ctrl-J':
          this.scriptEditor.focus();
          break;
      }
    });

    this.scriptEditor.onFocus(e => {
      // html 변경이력이 없으면 생략함
      if (!this.isHtmlChanged) {
        return;
      }
      this.isHtmlChanged = false;

      try{
        this.scriptEditor.updateFormHint(this.htmlEditor.value);
      } catch(ex){
        alert(ex);
      }
    });
    
    Jinja.event.add("Framwview.formError", "JJDev4Box:"+this.viewId,  e=>{
      if (e.detail.viewId == this.viewId && e.detail.data.line != undefined  ){
      	  this.scriptEditor.gotoLine(e.detail.data.line);
      }
    });
    

    if (Jinja.isMobile) {
      this.setViewType('showTab');
    } else {
      this.setViewType(Jinja.store.getMymemory("JJDiv4Box-type", this.dataset.mode||"show22"));     
    }
  }

  /**
   * @desc 객체의 종료시에 설정된 이벤트를 제거합니다.
   * @example -
   */
	_clearEvent() {
    Jinja.event.remove("Framwview.formError", "JJDev4Box:"+this.viewId);
  }  
  
  /**
   * @memberof JJDiv4Box
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    let uuid = Jinja.global.uuid();

    return Jinja.global.string({
      uuid: uuid,
      html: this.htmlEditor.value,
      less: this.lessEditor.value,
      script: this.scriptEditor.value
    });
  }

  /**
   * @memberof JJDiv4Box
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    val = Jinja.global.json(val);

    this.htmlEditor.value = val.html;
    this.lessEditor.value = val.less || val.css;
    this.scriptEditor.value = val.script;
  }

  init(){
    if(Jinja.isMobile){
      this.setViewType("showTab");
    } else {
      //this.setViewType(this.dataset.mode||"show22");  
      this.setViewType(Jinja.store.getMymemory("JJDiv4Box-type", this.dataset.mode||"show22"));     
    }
  }
  
  /**
   * @desc 지정된 Element의 위치정보를 설정한다.
   * @example -
   */
  setPos(el, top, left, width, height) {
    el.style.top = top + '%';
    el.style.left = left + '%';
    el.style.width = width + '%';
    el.style.height = height + '%';
  }

  /**
   * @desc 드래그바를 초기화한다.
   * @example -
   */
  dragInit() {
    this.box1.style.display = 'block';
    this.box2.style.display = 'block';
    this.box3.style.display = 'block';

    this.box1.style.visibility = 'visible';
    this.box2.style.visibility = 'visible';
    this.box3.style.visibility = 'visible';

    if (this.dragX) {
      this.dragbarX.style.display = 'none';
      this.dragX.destroy();
    }

    if (this.dragX2) {
      this.dragbarX2.style.display = 'none';
      this.dragX2.destroy();
    }

    if (this.dragY) {
      this.dragbarY.style.display = 'none';
      this.dragY.destroy();
    }

    if (this.dragY2) {
      this.dragbarY2.style.display = 'none';
      this.dragY2.destroy();
    }
  }

  /**
   * @desc 지정한 유형에 따라 컴포넌트의 화면구성을 설정한다.
   * @param {String} - 유형
   * @example -
   */
  setViewType(type) {
    
    this.setAttribute('view-type', type);
		Jinja.store.setMymemory("JJDiv4Box-type", type);
    
    switch (type) {
      case 'showComponentMode': {
        this.showComponent();

        break;
      }
      case 'show31': {
        this.show31();

        break;
      }
      case 'show13': {
        this.show13();

        break;
      }
      case 'showTab': {
        this.showTab();

        break;
      }
      case 'showTabH': {
        this.showTabH();

        break;
      }
      default: {
        this.show22();

        break;
      }
    }
  }

  /**
   * @desc 컴포넌트 화면을 4분할 형태로 보여준다.
   * @example -
   */
  show22() {
    this.dragInit();

    this.setPos(this.box1, 0, 0, 50, 50);
    this.setPos(this.box2, 0, 50, 50, 50);
    this.setPos(this.box3, 50, 0, 50, 50);
    this.setPos(this.box4, 50, 50, 50, 50);

    this.dragbarX.style.display = 'block';
    this.dragbarX.style.left = '50%';
    this.dragbarX.style.top = '0%';
    this.dragbarX.style.height = '100%';
    this.dragbarX2.style.display = 'none';
    this.dragX = new JJMoveable(this.dragbarX, {
      handles: 'e',
      onDragend: rlt => {
        let resizeX = (this.dragbarX.offsetLeft * 100.0) / this.offsetWidth;

        this.dragbarX.style.left = resizeX + '%';

        this.box1.style.width = resizeX + '%';
        this.box3.style.width = resizeX + '%';
        this.box2.style.left = resizeX + '%';
        this.box4.style.left = resizeX + '%';

        this.box2.style.width = 100 - resizeX + '%';
        this.box4.style.width = 100 - resizeX + '%';
      }
    });

    this.dragbarY.style.display = 'block';
    this.dragbarY.style.top = '50%';
    this.dragbarY.style.left = '0';
    this.dragbarY.style.width = '100%';
    this.dragbarY2.style.display = 'none';
    this.dragY = new JJMoveable(this.dragbarY, {
      handles: 's',
      onDragend: rlt => {
        let resizeY =
          (this.dragbarY.offsetTop * 100) / this.boxwarp.offsetHeight;
        this.box1.style.height = resizeY + '%';
        this.box2.style.height = resizeY + '%';
        this.box3.style.top = resizeY + '%';
        this.box4.style.top = resizeY + '%';
        this.box3.style.height = 100 - resizeY + '%';
        this.box4.style.height = 100 - resizeY + '%';
      }
    });
  }

  /**
   * @desc 컴포넌트 화면을 가로 3분할(HTML, LESS, SCRIPT), 가로 1분할(뷰어) 형태로 보여준다.
   * @example -
   */
  show31() {
    this.dragInit();

    this.setPos(this.box1, 0, 0, 33.33, 50);
    this.setPos(this.box3, 0, 33.33, 33.33, 50);
    this.setPos(this.box2, 0, 66.66, 100 - 66.66, 50);
    this.setPos(this.box4, 50, 0, 100, 50);

    this.dragbarX.style.display = 'block';
    this.dragbarX.style.left = '33.33%';
    this.dragbarX.style.height = '50%';
    this.dragbarX.style.top = '0%';
    this.dragX = new JJMoveable(this.dragbarX, {
      handles: 'e',
      parent: this,
      onDragend: rlt => {
        let resizeX = (this.dragbarX.offsetLeft * 100) / this.offsetWidth;
        this.dragbarX.style.left = resizeX + '%';
        this.box1.style.width = resizeX + '%';
        this.box3.style.left = resizeX + '%';
        this.box3.style.width =
          ((this.box2.offsetLeft - this.dragbarX.offsetLeft) * 100) /
            this.offsetWidth +
          '%';
      }
    });

    this.dragbarX2.style.display = 'block';
    this.dragbarX2.style.left = '66.66%';
    this.dragbarX2.style.height = '50%';
    this.dragbarX2.style.top = '0%';
    this.dragX2 = new JJMoveable(this.dragbarX2, {
      handles: 'e',
      onDragend: rlt => {
        let resizeX = (this.dragbarX2.offsetLeft * 100) / this.offsetWidth;
        this.dragbarX2.style.left = resizeX + '%';

        this.box3.style.width =
          ((this.dragbarX2.offsetLeft - this.box3.offsetLeft) * 100) /
            this.offsetWidth +
          '%';
        this.box2.style.left = resizeX + '%';
        this.box2.style.width = 100 - resizeX + '%';
      }
    });

    this.dragbarY.style.display = 'block';
    this.dragbarY.style.top = '50%';
    this.dragbarY.style.left = '0%';
    this.dragbarY2.style.display = 'none';
    this.dragY = new JJMoveable(this.dragbarY, {
      handles: 's',
      onDragend: rlt => {
        let resizeY =
          (this.dragbarY.offsetTop * 100) / this.boxwarp.offsetHeight;
        this.dragbarX.style.height = resizeY + '%';
        this.dragbarX2.style.height = resizeY + '%';

        this.box1.style.height = resizeY + '%';
        this.box2.style.height = resizeY + '%';
        this.box3.style.height = resizeY + '%';
        this.box4.style.top = resizeY + '%';
        this.box4.style.height = 100 - resizeY + '%';
      }
    });
  }

  /**
   * @desc 컴포넌트 화면을 가로 1분할(뷰어), 가로 3분할(HTML, LESS, SCRIPT) 형태로 보여준다.
   * @example -
   */
  show13() {
    this.dragInit();

    this.setPos(this.box1, 50, 0, 33.33, 50);
    this.setPos(this.box3, 50, 33.33, 33.33, 50);
    this.setPos(this.box2, 50, 66.66, 100 - 66.66, 50);
    this.setPos(this.box4, 0, 0, 100, 50);

    this.dragbarX.style.display = 'block';
    this.dragbarX.style.left = '33.33%';
    this.dragbarX.style.top = '50%';
    this.dragbarX.style.height = '50%';
    this.dragX = new JJMoveable(this.dragbarX, {
      handles: 'e',
      onDragend: rlt => {
        let resizeX = (this.dragbarX.offsetLeft * 100) / this.offsetWidth;
        this.dragbarX.style.left = resizeX + '%';
        this.box1.style.width = resizeX + '%';
        this.box3.style.left = resizeX + '%';
        this.box3.style.width =
          ((this.box2.offsetLeft - this.dragbarX.offsetLeft) * 100) /
            this.offsetWidth +
          '%';
      }
    });

    this.dragbarX2.style.display = 'block';
    this.dragbarX2.style.left = '66.66%';
    this.dragbarX2.style.top = '50%';
    this.dragbarX2.style.height = '50%';
    this.dragX2 = new JJMoveable(this.dragbarX2, {
      handles: 'e',
      onDragend: rlt => {
        let resizeX = (this.dragbarX2.offsetLeft * 100) / this.offsetWidth;
        this.dragbarX2.style.left = resizeX + '%';

        this.box3.style.width =
          ((this.dragbarX2.offsetLeft - this.box3.offsetLeft) * 100) /
            this.offsetWidth +
          '%';
        this.box2.style.left = resizeX + '%';
        this.box2.style.width = 100 - resizeX + '%';
      }
    });

    this.dragbarY.style.display = 'block';
    this.dragbarY.style.top = '50%';
    this.dragbarY.style.left = '0%';
    this.dragbarY2.style.display = 'none';
    this.dragY = new JJMoveable(this.dragbarY, {
      handles: 's',
      onDragend: rlt => {
        let resizeY =
          (this.dragbarY.offsetTop * 100) / this.boxwarp.offsetHeight;
        this.dragbarX.style.top = resizeY + '%';
        this.dragbarX.style.height = 100 - resizeY + '%';
        this.dragbarX2.style.top = resizeY + '%';
        this.dragbarX2.style.height = 100 - resizeY + '%';

        this.box4.style.height = resizeY + '%';
        this.box1.style.top = resizeY + '%';
        this.box1.style.height = 100 - resizeY + '%';
        this.box2.style.top = resizeY + '%';
        this.box2.style.height = 100 - resizeY + '%';
        this.box3.style.top = resizeY + '%';
        this.box3.style.height = 100 - resizeY + '%';
      }
    });
  }

  /**
   * @desc 컴포넌트 화면을 세로 2분할(HTML, 뷰어) 형태로 보여주고 나머지화면(LESS, SCRIPT)은 숨긴다.
   * @example -
   */
  showTab() {
    this.dragInit();

    this.box1.style.visibility = 'visible';
    this.box2.style.visibility = 'hidden';
    this.box3.style.visibility = 'hidden';

    this.setPos(this.box1, 50, 0, 100, 50);
    this.setPos(this.box2, 50, 0, 100, 50);
    this.setPos(this.box3, 50, 0, 100, 50);
    this.setPos(this.box4, 0, 0, 100, 50);

    this.dragbarY.style.display = 'block';
    this.dragbarY.style.top = '50%';
    this.dragbarY.style.left = '0%';

    this.dragY = new JJMoveable(this.dragbarY, {
      handles: 's',
      onDragend: rlt => {
        let resizeY =
          (this.dragbarY.offsetTop * 100) / this.boxwarp.offsetHeight;
        this.dragbarX.style.top = resizeY + '%';
        this.dragbarX.style.height = 100 - resizeY + '%';
        this.dragbarX2.style.top = resizeY + '%';
        this.dragbarX2.style.height = 100 - resizeY + '%';

        this.box4.style.height = resizeY + '%';
        this.box1.style.top = resizeY + '%';
        this.box1.style.height = 100 - resizeY + '%';
        this.box2.style.top = resizeY + '%';
        this.box2.style.height = 100 - resizeY + '%';
        this.box3.style.top = resizeY + '%';
        this.box3.style.height = 100 - resizeY + '%';
      }
    });
  }

  /**
   * @desc 컴포넌트 화면을 가로 2분할(HTML, 뷰어) 형태로 보여주고 나머지화면(LESS, SCRIPT)은 숨긴다.
   * @example -
   */
  showTabH() {
    this.dragInit();

    this.box1.style.visibility = 'visible';
    this.box2.style.visibility = 'hidden';
    this.box3.style.visibility = 'hidden';

    this.setPos(this.box1, 0, 0, 50, 100);
    this.setPos(this.box2, 0, 0, 50, 100);
    this.setPos(this.box3, 0, 0, 50, 100);
    this.setPos(this.box4, 0, 50, 50, 100);

    this.dragbarX.style.display = 'block';
    this.dragbarX.style.top = '0';
    this.dragbarX.style.left = '50%';

    this.dragbarX.style.display = 'block';
    this.dragbarX.style.left = '50%';
    this.dragbarX.style.height = '100%';
    this.dragX = new JJMoveable(this.dragbarX, {
      handles: 'e',
      onDragend: rlt => {
        let resizeX = (this.dragbarX.offsetLeft * 100) / this.offsetWidth;
        this.dragbarX.style.left = resizeX + '%';

        this.box1.style.width = resizeX + '%';
        this.box2.style.width = resizeX + '%';
        this.box3.style.width = resizeX + '%';
        this.box4.style.left = resizeX + '%';
        this.box4.style.width = 100 - resizeX + '%';
      }
    });
  }

  /**
   * @desc 박스의 크기변경할때 dragbar를 보여준다.
   * @example -
   */
  showComponent() {
    this.dragInit();

    this.setPos(this.box3, 0, 0, 50, 100);
    this.setPos(this.box2, 0, 50, 50, 100);
    this.setPos(this.box1, 0, 0, 0, 0);
    this.setPos(this.box4, 0, 0, 0, 0);

    this.dragbarX.style.display = 'block';
    this.dragbarX.style.left = '50%';
    this.dragX = new JJMoveable(this.dragbarX, {
      handles: 'e',
      onDragend: rlt => {
        let resizeX = (this.dragbarX.offsetLeft * 100) / this.offsetWidth;
        this.dragbarX.style.left = resizeX + '%';

        this.box3.style.width = resizeX + '%';
        this.box2.style.left = resizeX + '%';
        this.box2.style.width = 100 - resizeX + '%';
      }
    });
  }

  /**
   * @desc 지정된 박스만 보이게 하고 나머지 박스는 숨긴다.
   * @param {String} - 박스명
   * @example -
   */
  tabbox(box) {
    this.classList.add('tr-off');
    this.box1.style.visibility = 'hidden';
    this.box2.style.visibility = 'hidden';
    this.box3.style.visibility = 'hidden';

    switch (box) {
      case 'box1': {
        this.box1.style.visibility = 'visible';

        break;
      }
      case 'box2': {
        this.box2.style.visibility = 'visible';

        break;
      }
      case 'box3': {
        this.box3.style.visibility = 'visible';

        break;
      }
    }

    setTimeout(() => {
      this.classList.remove('tr-off');
    }, 200);
  }

  /**
   * @desc 작성한 스크립트(HTML, LESS, SCRIPT)를 파싱하여 뷰어화면에 보여준다.
   * @example -
   */
  excute() {
    let uuid = Jinja.global.uuid();
    let less = this.lessEditor.value;

    Jinja.dom
      .lessUUIDcss(less, uuid)
      .then(css =>
        Jinja.global.string({
          uuid: uuid,
          html: this.htmlEditor.value,
          css: css,
          less: less,
          script: this.scriptEditor.value
        })
      )
      .then(content => {
        this.viewer.excuteLoad(content, this.options.isTheme, this.viewId);
      })
      .catch(ex => {
        console.error(ex);
      });
  }
}

customElements.define('jj-div4box', JJDiv4Box);
/* ==JJCodeEditor.640.class================ */
/**
 * @classdesc 코드에디터 컴포넌트관리를 위한 클래스
 */
class JJCodeEditor extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      require: ['jjCodeMirror'],
      mode: 'html',
      defaultOption: {
        mode: 'html',
        theme: 'eclipse',
        autoCloseTags: true,
        autoCloseBrackets: true,
        lineNumbers: true,
        matchBrackets: true,
        continueComments: 'Enter',
        extraKeys: {
          'Ctrl-Space': 'autocomplete',
          'Alt-0': cm => CodeMirror.commands.foldAll(cm),
          'Alt-9': cm => CodeMirror.commands.unfoldAll(cm),
          'Alt-I': cm => cm.foldCode(cm.getCursor()),
          'Alt-F': 'findPersistent',
          'Alt-Q': 'toggleComment',
          F11: cm => cm.setOption('fullScreen', !cm.getOption('fullScreen')),
          Esc: cm => {
            if (cm.getOption('fullScreen')) cm.setOption('fullScreen', false);
          }
        },
        linewrapping: true,
        rulers: [80],
        scrollbarStyle: 'simple',
        foldGutter: true,
        lint: true,
        dragDrop: true,
        tabSize: 2,
        indentUnit: 2,
        gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'],
        contextMenu: [
          { label: 'copy', command: 'copy', icon: 'fa-copy' },
          { label: 'cut', command: 'cut', icon: 'fa-cut' },
          { label: 'paste', command: 'paste', icon: 'fa-paste' },
          { label: 'divider' }
        ]
      },
      modeOptions: {
        html: {
          mode: {
            name: 'htmlmixed',
            scriptTypes: [
              { matches: /\/x-handlebars-template|\/x-mustache/i, mode: null },
              {
                matches: /(text|application)\/(x-)?vb(a|script)/i,
                mode: 'vbscript',
              },
            ]
          },
          contextMenu: [
            { label: 'copy', command: 'copy', icon: 'fa-copy' },
            { label: 'cut', command: 'cut', icon: 'fa-cut' },
            { label: 'paste', command: 'paste', icon: 'fa-paste' },
            { label: 'divider' },
            { label: 'Encode', command: 'htmlEncode', icon: 'fa-files-o' },
            { label: 'Remark', command: 'htmlRemark', icon: 'fa-scissors' },
            { label: 'Part', command: 'getHtmlPart', icon: 'fa-scissors' }
          ]
        },
        less: {
          mode: 'text/x-less',
          lint: false,
          contextMenu: [
            { label: 'copy', command: 'copy', icon: 'fa-copy' },
            { label: 'cut', command: 'cut', icon: 'fa-cut' },
            { label: 'paste', command: 'paste', icon: 'fa-paste' },
            { label: 'divider' },
            { label: 'Remark', command: 'scriptRemark', icon: 'fa-scissors' }
          ]
        },
        java: {
          mode: 'text/x-java',
          lint: false,
          contextMenu: []
        },
        css: {
          mode: 'text/css',
          lint: false,
          contextMenu: [
            { label: 'copy', command: 'copy', icon: 'fa-copy' },
            { label: 'cut', command: 'cut', icon: 'fa-cut' },
            { label: 'paste', command: 'paste', icon: 'fa-paste' },
            { label: 'divider' },
            { label: 'Remark', command: 'scriptRemark', icon: 'fa-scissors' }
          ]
        },
        text: {
          mode: 'text',
          lint: false,
          contextMenu: [
            { label: 'copy', command: 'copy', icon: 'fa-copy' },
            { label: 'cut', command: 'cut', icon: 'fa-cut' },
            { label: 'paste', command: 'paste', icon: 'fa-paste' },
            { label: 'divider' },
            { label: 'Remark', command: 'scriptRemark', icon: 'fa-scissors' },
          ],
        },
        sql: {
          mode: 'text/x-sql',
          lint: false,
          contextMenu: [
            { label: 'copy', command: 'copy', icon: 'fa-copy' },
            { label: 'cut', command: 'cut', icon: 'fa-cut' },
            { label: 'paste', command: 'paste', icon: 'fa-paste' },
            { label: 'divider' },
            { label: 'Remark', command: 'scriptRemark', icon: 'fa-scissors' }
          ]
        },
        javascript: {
          mode: 'javascript',
          lint: false,
          contextMenu: [
            { label: 'copy', command: 'copy', icon: 'fa-copy' },
            { label: 'cut', command: 'cut', icon: 'fa-cut' },
            { label: 'paste', command: 'paste', icon: 'fa-paste' },
            { label: 'divider' },
            { label: 'Remark', command: 'scriptRemark', icon: 'fa-scissors' },
            { label: 'Hint', command: 'scriptHint', icon: 'fa-bolt' },
            { label: 'Part', command: 'getScriptPart', icon: 'fa-scissors' }
          ]
        },
        json: {
          mode: 'application/ld+json',
          lint: false,
          continueComments: 'Enter',
          matchBrackets: true,
          autoCloseBrackets: true,
          contextMenu: [
            { label: 'copy', command: 'copy', icon: 'fa-copy' },
            { label: 'cut', command: 'cut', icon: 'fa-cut' },
            { label: 'paste', command: 'paste', icon: 'fa-paste' }
          ]
        },
        python: {
          mode: { name: 'python', version: 3, singleLineStringErrors: false },
          continueComments: 'Enter',
          contextMenu: [
            { label: 'copy', command: 'copy', icon: 'fa-copy' },
            { label: 'cut', command: 'cut', icon: 'fa-cut' },
            { label: 'paste', command: 'paste', icon: 'fa-paste' }
          ]
        },
        xml: {
          mode: 'xml',
          lint: false,
          contextMenu: []
        },
        yaml: {
          mode: 'text/x-yaml',
          tabSize: 4,
          indentUnit: 4,
          continueComments: 'Enter',
          contextMenu: [
            { label: 'copy', command: 'copy', icon: 'fa-copy' },
            { label: 'cut', command: 'cut', icon: 'fa-cut' },
            { label: 'paste', command: 'paste', icon: 'fa-paste' }
          ]
        }
      },
      version: '640'
    };
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._isUserChange = true;
    this.requirePromise.then(() => {
      this.oEditor = CodeMirror(this, {
        ...this.options.defaultOption,
        ...this.options.modeOptions[this.options.mode],
      });

      if (this.options.mode == 'javascript') {
        if(CodeMirror.TernServer){
          this.ternServer = new CodeMirror.TernServer({defs: [
            Jinja.tern.browse, 
            Jinja.tern.ecma5,
            Jinja.tern.jinja 
          ]});

          this.oEditor.setOption("extraKeys", {
            "Ctrl-Space": cm=>this.ternServer.complete(cm),
            "Ctrl-I": 		cm=>this.ternServer.showType(cm),
            "Ctrl-O": 		cm=>this.ternServer.showDocs(cm),
            "Ctrl-Q": 		cm=>this.ternServer.rename(cm),
            "Ctrl-.": 		cm=>this.ternServer.selectName(cm),
            "Alt-.": 			cm=>this.ternServer.jumpToDef(cm),
            "Alt-,": 			cm=>this.ternServer.jumpBack(cm),
            "Alt-0": 			cm =>CodeMirror.commands.foldAll(cm),
            "Alt-9": 			cm =>CodeMirror.commands.unfoldAll(cm),			
            "Alt-I": 			cm =>cm.foldCode(cm.getCursor()),
            "F11": 				cm =>cm.setOption("fullScreen", !cm.getOption("fullScreen")),
            "Esc": 				cm =>cm.setOption("fullScreen", false),
            "Alt-F": 			"findPersistent",
            "Alt-Q": 			"toggleComment"
          });
        }
      }

      this.oEditor.on('change', (cm, ed) => {
        if (this._isUserChange) {
          this.dispatchEvent(
            new CustomEvent('changeedit', {
              detail: {
                mode: this.options.mode,
              },
              bubbles: true
            })
          );
        }
      });

      this.oEditor.on('drop', (cm, ed) => {
        let dropHtml = ed.dataTransfer.getData('text/html');
        let dropText = ed.dataTransfer.getData('text/plain');
        let dropScript = ed.dataTransfer.getData('text/script');
        let dropJson = ed.dataTransfer.getData('text/json');
        let coords = cm.coordsChar({
          left: ed.x,
          top: ed.y
        });

        
        
        switch (this.options.mode) {
          case 'html':
            
            cm.replaceRange('\n'+(dropHtml || dropText), coords);

            break;
          case 'script':
            cm.replaceRange('\n'+(dropScript || dropText), coords);

            break;
          case 'json':
            cm.replaceRange('\n'+(dropJson || dropScript || dropText), coords);

            break;
          default:
            cm.replaceRange('\n'+(dropScript || dropText || dropHtml), coords);
        }
        ed.preventDefault();
      });
    });

    this.addEventListener('contextmenu', e => {
      e.preventDefault();

      Jinja.context.render(
        this,
        e,
        this.options.modeOptions[this.options.mode].contextMenu
      );
    });

    this.addEventListener('jjContextMenuclick', e => {
      e.stopImmediatePropagation();
      e.stopPropagation();
      e.preventDefault();

      let word;
      let contextMenu = e.detail.menu;

      switch (contextMenu) {
        case 'copy': {
          word = this.oEditor.getSelection();

          if (word) Jinja.store.clipBoard(word);

          break;
        }
        case 'cut': {
          word = this.oEditor.getSelection();

          if (word) {
            Jinja.store.clipBoard(word);

            this.oEditor.replaceSelection('');
          }

          break;
        }
        case 'paste': {
          word = Jinja.store.clipBoard();

          if (typeof word == 'object') {
            word.then(clipText => this.oEditor.replaceSelection(clipText));
          } else {
            this.oEditor.replaceSelection(word);
          }

          break;
        }
        case 'htmlEncode': {
          word = this.oEditor.getSelection();
          word = Jinja.global.encodeAce(word);

          this.oEditor.replaceSelection(word);

          break;
        }
        case 'htmlRemark': {
          word = 
            `<!--` +
            `* memo : ` +
            `*` +
            `* Editor : ${Jinja.uo.USER_NAME}` +
            `* Edit Date : ${new Date().toLocaleString()}` +
            `*` +
            `${this.oEditor.getSelection()}` +
            `*` +
            `-->`;

          return this.oEditor.replaceSelection(word);

          break;
        }
        case 'scriptRemark': {
          word = 
            `/**` +
            `* memo : ` +
            `*` +
            `* Editor : ${Jinja.uo.USER_NAME}` +
            `* Edit Date : ${new Date().toLocaleString()}` +
            `*` +
            `${this.oEditor.getSelection()}` +
            `*/`;

          return this.oEditor.replaceSelection(word);

          break;
        }
        case 'scriptHint': {
          word = `/*jshint sub:true*/ \n`;

          return this.oEditor.replaceSelection(word);

          break;
        }
      }
    });
  }

  /**
   * @desc 엘리먼트를 삭제한다.
   * @example -
   */
  _destroy() {
    this.oEditor.off('change');
    this.oEditor = null;

    Jinja.dom.empty(this);
  }

  /**
   * @memberof JJCodeEditor
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    if (this.oEditor) {
      return this.oEditor.getValue() || '';
    } else {
      return '';
    }
  }

  /**
   * @memberof JJCodeEditor
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    this.requirePromise.then(editor => {
      this._isUserChange = false;
      this.oEditor.setValue(val || '');
      this._isUserChange = true;
    });
  }

  /**
   * @desc 지정한 핸들러를 포커스 이벤트 발생시 실행한다.
   * @param {Object} - 핸들러
   * @example -
   */
  onFocus(handler) {
    this.requirePromise.then(() => this.oEditor.on('focus', handler));
  }
	
  gotoLine(line){
    this.requirePromise.then(() => this.oEditor.setCursor({"line": line, "ch": 1}));
  }

  /**
   * @desc 엘리먼트에 포커스를 준다.
   * @example -
   */
  focus() {
    this.requirePromise.then(() => this.oEditor.focus());
  }

  /**
   * @desc 지정한 룰셋으로 Tern을 활성화한다.
   * @param {String} - 룰셋
   * @example -
   */
  enableTern(rule) {
    this.ternServer.server.deleteDefs('form');
    this.ternServer.server.addDefs(rule);
    this.ternServer.updateArgHints(this.oEditor);
  }
  
  /**
   * 선택된 문자열을 리턴한다
   * @return {String} - 문자열
   */
  selectText(){
    return this.oEditor.getSelection();
  }
  
  
  /**
   * 폼에서 스크립트를 포커스 하는 경우에 해당폼의 객체에서 추출하여생성함
   * 구: enableTern(rule) 함수를 대치함
   */
  /**
   * @desc 폼에서 스크립트를 포커스 하는 경우에 해당폼의 HTML에서 객체 추출하여생성함
   * @param {html} - HTML
   * @example -
   */  
  updateFormHint(html){
    
    
    this.requirePromise.then(()=>{
      let formHint = {
        "!name": "formHint",
        "form": {
          "!name": "form",
          "fromLoad":"fn(arg: options)",
          "fromClose":"fn(arg: options)",
          "modalOk":"fn(arg: options)",
          "return":"fn(arg: options)"
        }                
      }; 

			if(html){
        const idRegex = /jj-id(\s)?=(\s)?['|"]\w+['|"]/gm;
        let ids =  html.match(idRegex);
        if (ids){
          ids.map(p=>{
            let jjId  = p.split(/['|"]/)[1];
            if (jjId){
              formHint.form[jjId] = "appspeed";
            }
          });  
        }

        const commandRegex = /jj-command(\s)?=(\s)?['|"]\w+/gm;
        let commands = html.match(commandRegex);
        if(commands){
          commands.map(p=>{
            let jjCommand  = p.split(/['|"]/)[1];
            if (jjCommand){
              formHint.form[jjCommand] = "fn() -> appspeed"
            }
          });  
        }
      }
      this.ternServer.server.deleteDefs('form');
      this.ternServer.server.addDefs(formHint);
      this.ternServer.updateArgHints(this.oEditor);

    });

  }  

  /**
   * @desc 지정한 name, value로 옵션을 설정한다.
   * @param {String} - 옵션명
   * @param {*} - 옵션
   * @example -
   */
  option(name, value) {
    switch (name) {
      case 'theme':
        this.oEditor.setOption('theme', value);

        break;
      case 'mode':
        this._setMode('mode', value);

        break;
    }
  }
}

customElements.define('jj-code-editor', JJCodeEditor);
/* ==JJCodeEditorTern.class================ */
Jinja.tern = {
  "ecma5" : {
    "!name": "ecmascript",
    "!define": {
      "Error.prototype": "Error.prototype",
      "propertyDescriptor": {
        "enumerable": "bool",
        "configurable": "bool",
        "value": "?",
        "writable": "bool",
        "get": "fn() -> ?",
        "set": "fn(value: ?)"
      },
      "Promise.prototype": {
        "catch": {
          "!doc": "The catch() method returns a Promise and deals with rejected cases only. It behaves the same as calling Promise.prototype.then(undefined, onRejected).",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch",
          "!type": "fn(onRejected: fn(reason: ?)) -> !this"
        },
        "then": {
          "!doc": "The then() method returns a Promise. It takes two arguments, both are callback functions for the success and failure cases of the Promise.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then",
          "!type": "fn(onFulfilled: fn(value: ?), onRejected: fn(reason: ?)) -> !custom:Promise_then",
          "!effects": ["call !0 !this.:t"]
        },
        "finally": {
          "!doc": "The finally() method returns a Promise. When the promise is settled, whether fulfilled or rejected, the specified callback function is executed. ",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally",
          "!type": "fn(onFinally: fn()) -> !custom:Promise_then"
        }
      },
      "Promise_reject": {
        "!type": "fn(reason: ?) -> !this",
        "!doc": "The Promise.reject(reason) method returns a Promise object that is rejected with the given reason.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject"
      },
      "iter_prototype": {
        ":Symbol.iterator": "fn() -> !this"
      },
      "iter": {
        "!proto": "iter_prototype",
        "next": {
          "!type": "fn() -> +iter_result[value=!this.:t]",
          "!doc": "Return the next item in the sequence.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators"
        },
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators"
      },
      "iter_result": {
        "done": "bool",
        "value": "?"
      },
      "generator_prototype": {
        "!proto": "iter_prototype",
        "next": "fn(value?: ?) -> iter_result",
        "return": "fn(value?: ?) -> iter_result",
        "throw": "fn(exception: +Error)"
      },
      "async_iter_prototype": {
        ":Symbol.asyncIterator": "fn() -> !this"
      },
      "async_iter": {
        "!proto": "async_iter_prototype",
        "next": {
          "!type": "fn() -> +Promise[:t=+iter_result[value=!this.:t]]",
          "!doc": "Return the next item in the sequence.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators"
        },
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators"
      },
      "async_generator_prototype": {
        "!proto": "async_iter_prototype",
        "next": "fn(value?: ?) -> +Promise[:t=iter_result]",
        "return": "fn(value?: ?) -> +Promise[:t=iter_result]",
        "throw": "fn(exception: +Error)"
      },
      "Proxy_handler": {
        "!doc": "The proxy's handler object is a placeholder object which contains traps for proxies.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler",
        "getPrototypeOf": "fn(target: ?)",
        "setPrototypeOf": "fn(target: ?, prototype: ?)",
        "isExtensible": "fn(target: ?)",
        "preventExtensions": "fn(target: ?)",
        "getOwnPropertyDescriptor": "fn(target: ?, property: string) -> propertyDescriptor",
        "defineProperty": "fn(target: ?, property: string, descriptor: propertyDescriptor)",
        "has": "fn(target: ?, property: string)",
        "get": "fn(target: ?, property: string)",
        "set": "fn(target: ?, property: string, value: ?)",
        "deleteProperty": "fn(target: ?, property: string)",
        "enumerate": "fn(target: ?)",
        "ownKeys": "fn(target: ?)",
        "apply": "fn(target: ?, self: ?, arguments: [?])",
        "construct": "fn(target: ?, arguments: [?])"
      },
      "Proxy_revocable": {
        "proxy": "+Proxy",
        "revoke": "fn()"
      },
      "TypedArray": {
        "!type": "fn(size: number)",
        "!doc": "A TypedArray object describes an array-like view of an underlying binary data buffer. There is no global property named TypedArray, nor is there a directly visible TypedArray constructor.  Instead, there are a number of different global properties, whose values are typed array constructors for specific element types, listed below. On the following pages you will find common properties and methods that can be used with any typed array containing elements of any type.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray",
        "from": {
          "!type": "fn(arrayLike: ?, mapFn?: fn(elt: ?, i: number) -> number, thisArg?: ?) -> +TypedArray",
          "!effects": ["call !1 this=!2 !0.<i> number"],
          "!doc": "Creates a new typed array from an array-like or iterable object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/from"
        },
        "of": {
          "!type": "fn(elements: number) -> +TypedArray",
          "!doc": "Creates a new typed array from a variable number of arguments.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/of"
        },
        "BYTES_PER_ELEMENT": {
          "!type": "number",
          "!doc": "The TypedArray.BYTES_PER_ELEMENT property represents the size in bytes of each element in an typed array.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/BYTES_PER_ELEMENT"
        },
        "name": {
          "!type": "string",
          "!doc": "The TypedArray.name property represents a string value of the typed array constructor name.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/name"
        },
        "prototype": {
          "<i>": "number",
          "buffer": {
            "!type": "+ArrayBuffer",
            "!doc": "The buffer accessor property represents the ArrayBuffer referenced by a TypedArray at construction time.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/buffer"
          },
          "byteLength": {
            "!type": "number",
            "!doc": "The byteLength accessor property represents the length (in bytes) of a typed array from the start of its ArrayBuffer.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/byteLength"
          },
          "byteOffset": {
            "!type": "number",
            "!doc": "The byteOffset accessor property represents the offset (in bytes) of a typed array from the start of its ArrayBuffer.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/byteOffset"
          },
          "copyWithin": {
            "!type": "fn(target: number, start: number, end?: number) -> ?",
            "!doc": "The copyWithin() method copies the sequence of array elements within the array to the position starting at target. The copy is taken from the index positions of the second and third arguments start and end. The end argument is optional and defaults to the length of the array. This method has the same algorithm as Array.prototype.copyWithin. TypedArray is one of the typed array types here.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/copyWithin"
          },
          "entries": {
            "!type": "fn() -> +iter[:t=number]",
            "!doc": "The entries() method returns a new Array Iterator object that contains the key/value pairs for each index in the array.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/entries"
          },
          "every": {
            "!type": "fn(callback: fn(element: number, index: number, array: TypedArray) -> bool, thisArg?: ?) -> bool",
            "!effects": ["call !0 this=!1 number number !this"],
            "!doc": "The every() method tests whether all elements in the typed array pass the test implemented by the provided function. This method has the same algorithm as Array.prototype.every(). TypedArray is one of the typed array types here.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/every"
          },
          "fill": {
            "!type": "fn(value: number, start?: number, end?: number)",
            "!doc": "The fill() method fills all the elements of a typed array from a start index to an end index with a static value. This method has the same algorithm as Array.prototype.fill(). TypedArray is one of the typed array types here.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/fill"
          },
          "filter": {
            "!type": "fn(test: fn(element: number, i: number) -> bool, context?: ?) -> !this",
            "!effects": ["call !0 this=!1 number number"],
            "!doc": "Creates a new array with all of the elements of this array for which the provided filtering function returns true. See also Array.prototype.filter().",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/filter"
          },
          "find": {
            "!type": "fn(callback: fn(element: number, index: number, array: +TypedArray) -> bool, thisArg?: ?) -> number",
            "!effects": ["call !0 this=!1 number number !this"],
            "!doc": "The find() method returns a value in the typed array, if an element satisfies the provided testing function. Otherwise undefined is returned. TypedArray is one of the typed array types here.\nSee also the findIndex() method, which returns the index of a found element in the typed array instead of its value.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/find"
          },
          "findIndex": {
            "!type": "fn(callback: fn(element: number, index: number, array: +TypedArray) -> bool, thisArg?: ?) -> number",
            "!effects": ["call !0 this=!1 number number !this"],
            "!doc": "The findIndex() method returns an index in the typed array, if an element in the typed array satisfies the provided testing function. Otherwise -1 is returned.\nSee also the find() method, which returns the value of a found element in the typed array instead of its index.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/findIndex"
          },
          "forEach": {
            "!type": "fn(callback: fn(value: number, key: number, array: +TypedArray), thisArg?: ?)",
            "!effects": ["call !0 this=!1 number number !this"],
            "!doc": "Executes a provided function once per array element.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/forEach"
          },
          "indexOf": {
            "!type": "fn(searchElement: number, fromIndex?: number) -> number",
            "!doc": "The indexOf() method returns the first index at which a given element can be found in the typed array, or -1 if it is not present. This method has the same algorithm as Array.prototype.indexOf(). TypedArray is one of the typed array types here.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/indexOf"
          },
          "join": {
            "!type": "fn(separator?: string) -> string",
            "!doc": "The join() method joins all elements of an array into a string. This method has the same algorithm as Array.prototype.join(). TypedArray is one of the typed array types here.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/join"
          },
          "keys": {
            "!type": "fn() -> +iter[:t=number]",
            "!doc": "The keys() method returns a new Array Iterator object that contains the keys for each index in the array.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/keys"
          },
          "lastIndexOf": {
            "!type": "fn(searchElement: number, fromIndex?: number) -> number",
            "!doc": "The lastIndexOf() method returns the last index at which a given element can be found in the typed array, or -1 if it is not present. The typed array is searched backwards, starting at fromIndex. This method has the same algorithm as Array.prototype.lastIndexOf(). TypedArray is one of the typed array types here.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/lastIndexOf"
          },
          "length": {
            "!type": "number",
            "!doc": "Returns the number of elements hold in the typed array. Fixed at construction time and thus read only.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/length"
          },
          "map": {
            "!type": "fn(f: fn(element: number, i: number) -> number, context?: ?) -> +TypedArray",
            "!effects": ["call !0 this=!1 number number"],
            "!doc": "Creates a new array with the results of calling a provided function on every element in this array. See also Array.prototype.map().",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/map"
          },
          "reduce": {
            "!type": "fn(combine: fn(sum: ?, elt: number, i: number) -> ?, init?: ?) -> !0.!ret",
            "!effects": ["call !0 !1 number number"],
            "!doc": "Apply a function against an accumulator and each value of the array (from left-to-right) as to reduce it to a single value. See also Array.prototype.reduce().",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/reduce"
          },
          "reduceRight": {
            "!type": "fn(combine: fn(sum: ?, elt: number, i: number) -> ?, init?: ?) -> !0.!ret",
            "!effects": ["call !0 !1 number number"],
            "!doc": "Apply a function against an accumulator and each value of the array (from right-to-left) as to reduce it to a single value. See also Array.prototype.reduceRight().",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/reduceRight"
          },
          "reverse": {
            "!type": "fn()",
            "!doc": "The reverse() method reverses a typed array in place. The first typed array element becomes the last and the last becomes the first. This method has the same algorithm as Array.prototype.reverse(). TypedArray is one of the typed array types here.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/reverse"
          },
          "set": {
            "!type": "fn(array: [number], offset?: number)",
            "!doc": "The set() method stores multiple values in the typed array, reading input values from a specified array.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/set"
          },
          "slice": {
            "!type": "fn(from: number, to?: number) -> +TypedArray",
            "!doc": "Extracts a section of an array and returns a new array. See also Array.prototype.slice().",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/slice"
          },
          "some": {
            "!type": "fn(test: fn(elt: number, i: number) -> bool, context?: ?) -> bool",
            "!effects": ["call !0 this=!1 number number"],
            "!doc": "The some() method tests whether some element in the typed array passes the test implemented by the provided function. This method has the same algorithm as Array.prototype.some(). TypedArray is one of the typed array types here.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/some"
          },
          "sort": {
            "!type": "fn(compare?: fn(a: number, b: number) -> number)",
            "!effects": ["call !0 number number"],
            "!doc": "Sorts the elements of an array in place and returns the array. See also Array.prototype.sort().",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/sort"
          },
          "subarray": {
            "!type": "fn(begin?: number, end?: number) -> +TypedArray",
            "!doc": "The subarray() method returns a new TypedArray on the same ArrayBuffer store and with the same element types as for this TypedArray object. The begin offset is inclusive and the end offset is exclusive. TypedArray is one of the typed array types.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/subarray"
          },
          "values": {
            "!type": "fn() -> +iter[:t=number]",
            "!doc": "The values() method returns a new Array Iterator object that contains the values for each index in the array.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/values"
          },
          ":Symbol.iterator": {
            "!type": "fn() -> +iter[:t=number]",
            "!doc": "Returns a new Array Iterator object that contains the values for each index in the array.",
            "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/@@iterator"
          }
        }
      }
    },
    "Infinity": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Infinity",
      "!doc": "A numeric value representing infinity."
    },
    "undefined": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/undefined",
      "!doc": "The value undefined."
    },
    "NaN": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/NaN",
      "!doc": "A value representing Not-A-Number."
    },
    "Object": {
      "!type": "fn()",
      "getPrototypeOf": {
        "!type": "fn(obj: ?) -> ?",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getPrototypeOf",
        "!doc": "Returns the prototype (i.e. the internal prototype) of the specified object."
      },
      "create": {
        "!type": "fn(proto: ?) -> !custom:Object_create",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create",
        "!doc": "Creates a new object with the specified prototype object and properties."
      },
      "defineProperty": {
        "!type": "fn(obj: ?, prop: string, desc: propertyDescriptor) -> !custom:Object_defineProperty",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty",
        "!doc": "Defines a new property directly on an object, or modifies an existing property on an object, and returns the object. If you want to see how to use the Object.defineProperty method with a binary-flags-like syntax, see this article."
      },
      "defineProperties": {
        "!type": "fn(obj: ?, props: ?) -> !custom:Object_defineProperties",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty",
        "!doc": "Defines a new property directly on an object, or modifies an existing property on an object, and returns the object. If you want to see how to use the Object.defineProperty method with a binary-flags-like syntax, see this article."
      },
      "getOwnPropertyDescriptor": {
        "!type": "fn(obj: ?, prop: string) -> propertyDescriptor",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor",
        "!doc": "Returns a property descriptor for an own property (that is, one directly present on an object, not present by dint of being along an object's prototype chain) of a given object."
      },
      "keys": {
        "!type": "fn(obj: ?) -> [string]",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys",
        "!doc": "Returns an array of a given object's own enumerable properties, in the same order as that provided by a for-in loop (the difference being that a for-in loop enumerates properties in the prototype chain as well)."
      },
      "getOwnPropertyNames": {
        "!type": "fn(obj: ?) -> [string]",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames",
        "!doc": "Returns an array of all properties (enumerable or not) found directly upon a given object."
      },
      "seal": {
        "!type": "fn(obj: ?)",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/seal",
        "!doc": "Seals an object, preventing new properties from being added to it and marking all existing properties as non-configurable. Values of present properties can still be changed as long as they are writable."
      },
      "isSealed": {
        "!type": "fn(obj: ?) -> bool",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/isSealed",
        "!doc": "Determine if an object is sealed."
      },
      "freeze": {
        "!type": "fn(obj: ?) -> !0",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/freeze",
        "!doc": "Freezes an object: that is, prevents new properties from being added to it; prevents existing properties from being removed; and prevents existing properties, or their enumerability, configurability, or writability, from being changed. In essence the object is made effectively immutable. The method returns the object being frozen."
      },
      "isFrozen": {
        "!type": "fn(obj: ?) -> bool",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/isFrozen",
        "!doc": "Determine if an object is frozen."
      },
      "preventExtensions": {
        "!type": "fn(obj: ?)",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions",
        "!doc": "Prevents new properties from ever being added to an object."
      },
      "isExtensible": {
        "!type": "fn(obj: ?) -> bool",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/isExtensible",
        "!doc": "The Object.isExtensible() method determines if an object is extensible (whether it can have new properties added to it)."
      },
      "assign": {
        "!type": "fn(target: ?, source: ?, source?: ?) -> !0",
        "!effects": ["copy !1 !0", "copy !2 !0", "copy !3 !0"],
        "!doc": "The Object.assign() method is used to copy the values of all enumerable own properties from one or more source objects to a target object. It will return the target object.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign"
      },
      "getOwnPropertySymbols": {
        "!type": "fn(obj: ?) -> !custom:getOwnPropertySymbols",
        "!doc": "The Object.getOwnPropertySymbols() method returns an array of all symbol properties found directly upon a given object.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols"
      },
      "is": {
        "!type": "fn(value1: ?, value2: ?) -> bool",
        "!doc": "The Object.is() method determines whether two values are the same value.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is"
      },
      "setPrototypeOf": {
        "!type": "fn(obj: ?, prototype: ?)",
        "!doc": "The Object.setPrototype() method sets the prototype (i.e., the internal [[Prototype]] property) of a specified object to another object or null.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf"
      },
      "prototype": {
        "!stdProto": "Object",
        "toString": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString",
          "!doc": "Returns a string representing the object."
        },
        "toLocaleString": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toLocaleString",
          "!doc": "Returns a string representing the object. This method is meant to be overriden by derived objects for locale-specific purposes."
        },
        "valueOf": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/valueOf",
          "!doc": "Returns the primitive value of the specified object"
        },
        "hasOwnProperty": {
          "!type": "fn(prop: string) -> bool",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty",
          "!doc": "Returns a boolean indicating whether the object has the specified property."
        },
        "propertyIsEnumerable": {
          "!type": "fn(prop: string) -> bool",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable",
          "!doc": "Returns a Boolean indicating whether the specified property is enumerable."
        },
        "isPrototypeOf": {
          "!type": "fn(obj: ?) -> bool",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/isPrototypeOf",
          "!doc": "Tests for an object in another object's prototype chain."
        }
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object",
      "!doc": "Creates an object wrapper."
    },
    "Function": {
      "!type": "fn(body: string) -> fn()",
      "prototype": {
        "!stdProto": "Function",
        "apply": {
          "!type": "fn(this: ?, args: [?])",
          "!effects": [
            "call and return !this this=!0 !1.<i> !1.<i> !1.<i>"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply",
          "!doc": "Calls a function with a given this value and arguments provided as an array (or an array like object)."
        },
        "call": {
          "!type": "fn(this: ?, args?: ?) -> !this.!ret",
          "!effects": [
            "call and return !this this=!0 !1 !2 !3 !4"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call",
          "!doc": "Calls a function with a given this value and arguments provided individually."
        },
        "bind": {
          "!type": "fn(this: ?, args?: ?) -> !custom:Function_bind",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind",
          "!doc": "Creates a new function that, when called, has its this keyword set to the provided value, with a given sequence of arguments preceding any provided when the new function was called."
        },
        "prototype": "?"
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function",
      "!doc": "Every function in JavaScript is actually a Function object."
    },
    "Array": {
      "!type": "fn(size: number) -> !custom:Array_ctor",
      "isArray": {
        "!type": "fn(value: ?) -> bool",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/isArray",
        "!doc": "Returns true if an object is an array, false if it is not."
      },
      "from": {
        "!type": "fn(arrayLike: ?, mapFn?: fn(elt: ?, i: number) -> ?, thisArg?: ?) -> [!0.<i>]",
        "!effects": [
          "call !1 this=!2 !0.<i> number"
        ],
        "!doc": "The Array.from() method creates a new Array instance from an array-like or iterable object.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from"
      },
      "of": {
        "!type": "fn(elementN: ?) -> [!0]",
        "!doc": "The Array.of() method creates a new Array instance with a variable number of arguments, regardless of number or type of the arguments.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of"
      },
      "prototype": {
        "!stdProto": "Array",
        "length": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/length",
          "!doc": "An unsigned, 32-bit integer that specifies the number of elements in an array."
        },
        "concat": {
          "!type": "fn(other: [?]) -> !this",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat",
          "!doc": "Returns a new array comprised of this array joined with other array(s) and/or value(s)."
        },
        "join": {
          "!type": "fn(separator?: string) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join",
          "!doc": "Joins all elements of an array into a string."
        },
        "splice": {
          "!type": "fn(pos: number, amount: number, newelt?: ?) -> [?]",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice",
          "!doc": "Changes the content of an array, adding new elements while removing old elements."
        },
        "pop": {
          "!type": "fn() -> !this.<i>",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/pop",
          "!doc": "Removes the last element from an array and returns that element."
        },
        "push": {
          "!type": "fn(newelt: ?) -> number",
          "!effects": [
            "propagate !0 !this.<i>"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push",
          "!doc": "Mutates an array by appending the given elements and returning the new length of the array."
        },
        "shift": {
          "!type": "fn() -> !this.<i>",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift",
          "!doc": "Removes the first element from an array and returns that element. This method changes the length of the array."
        },
        "unshift": {
          "!type": "fn(newelt: ?) -> number",
          "!effects": [
            "propagate !0 !this.<i>"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/unshift",
          "!doc": "Adds one or more elements to the beginning of an array and returns the new length of the array."
        },
        "slice": {
          "!type": "fn(from?: number, to?: number) -> !this",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice",
          "!doc": "Returns a shallow copy of a portion of an array."
        },
        "reverse": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/reverse",
          "!doc": "Reverses an array in place.  The first array element becomes the last and the last becomes the first."
        },
        "sort": {
          "!type": "fn(compare?: fn(a: ?, b: ?) -> number)",
          "!effects": [
            "call !0 !this.<i> !this.<i>"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort",
          "!doc": "Sorts the elements of an array in place and returns the array."
        },
        "indexOf": {
          "!type": "fn(elt: ?, from?: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf",
          "!doc": "Returns the first index at which a given element can be found in the array, or -1 if it is not present."
        },
        "lastIndexOf": {
          "!type": "fn(elt: ?, from?: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/lastIndexOf",
          "!doc": "Returns the last index at which a given element can be found in the array, or -1 if it is not present. The array is searched backwards, starting at fromIndex."
        },
        "every": {
          "!type": "fn(test: fn(elt: ?, i: number, array: +Array) -> bool, context?: ?) -> bool",
          "!effects": [
            "call !0 this=!1 !this.<i> number !this"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every",
          "!doc": "Tests whether all elements in the array pass the test implemented by the provided function."
        },
        "some": {
          "!type": "fn(test: fn(elt: ?, i: number, array: +Array) -> bool, context?: ?) -> bool",
          "!effects": [
            "call !0 this=!1 !this.<i> number !this"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some",
          "!doc": "Tests whether some element in the array passes the test implemented by the provided function."
        },
        "filter": {
          "!type": "fn(test: fn(elt: ?, i: number, array: +Array) -> bool, context?: ?) -> !this",
          "!effects": [
            "call !0 this=!1 !this.<i> number !this"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter",
          "!doc": "Creates a new array with all elements that pass the test implemented by the provided function."
        },
        "forEach": {
          "!type": "fn(f: fn(elt: ?, i: number, array: +Array), context?: ?)",
          "!effects": [
            "call !0 this=!1 !this.<i> number !this"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach",
          "!doc": "Executes a provided function once per array element."
        },
        "map": {
          "!type": "fn(f: fn(elt: ?, i: number, array: +Array) -> ?, context?: ?) -> [!0.!ret]",
          "!effects": [
            "call !0 this=!1 !this.<i> number !this"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map",
          "!doc": "Creates a new array with the results of calling a provided function on every element in this array."
        },
        "reduce": {
          "!type": "fn(combine: fn(sum: ?, elt: ?, i: number, array: +Array) -> ?, init?: ?) -> !0.!ret",
          "!effects": [
            "call !0 !1 !this.<i> number !this"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce",
          "!doc": "Apply a function against an accumulator and each value of the array (from left-to-right) as to reduce it to a single value."
        },
        "reduceRight": {
          "!type": "fn(combine: fn(sum: ?, elt: ?, i: number, array: +Array) -> ?, init?: ?) -> !0.!ret",
          "!effects": [
            "call !0 !1 !this.<i> number !this"
          ],
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/ReduceRight",
          "!doc": "Apply a function simultaneously against two values of the array (from right-to-left) as to reduce it to a single value."
        },
        "copyWithin": {
          "!type": "fn(target: number, start: number, end?: number) -> !this",
          "!doc": "The copyWithin() method copies the sequence of array elements within the array to the position starting at target. The copy is taken from the index positions of the second and third arguments start and end.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/copyWithin"
        },
        "entries": {
          "!type": "fn() -> +iter[:t=[number, !this.<i>]]",
          "!doc": "The entries() method returns a new Array Iterator object that contains the key/value pairs for each index in the array.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/entries"
        },
        "fill": {
          "!type": "fn(value: ?, start?: number, end?: number) -> !this",
          "!doc": "The fill() method fills all the elements of an array from a start index to an end index with a static value.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill"
        },
        "find": {
          "!type": "fn(callback: fn(element: ?, index: number, array: [?]) -> bool, thisArg?: ?) -> !this.<i>",
          "!effects": ["call !0 this=!2 !this.<i> number"],
          "!doc": "The find() method returns a value in the array, if an element in the array satisfies the provided testing function. Otherwise undefined is returned.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find"
        },
        "findIndex": {
          "!type": "fn(callback: fn(element: ?, index: number, array: [?]), thisArg?: ?) -> number",
          "!effects": ["call !0 this=!2 !this.<i> number"],
          "!doc": "The findIndex() method returns an index in the array, if an element in the array satisfies the provided testing function. Otherwise -1 is returned.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex"
        },
        "keys": {
          "!type": "fn() -> +iter[:t=number]",
          "!doc": "The keys() method returns a new Array Iterator that contains the keys for each index in the array.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/keys"
        },
        "values": {
          "!type": "fn() -> +iter[:t=!this.<i>]",
          "!doc": "The values() method returns a new Array Iterator object that contains the values for each index in the array.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/values"
        },
        ":Symbol.iterator": {
          "!type": "fn() -> +iter[:t=!this.<i>]",
          "!doc": "Returns a new Array Iterator object that contains the values for each index in the array.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/@@iterator"
        },
        "includes": {
          "!type": "fn(value: ?, fromIndex?: number) -> bool",
          "!doc": "Determines whether an array includes a certain element, returning true or false as appropriate.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes"
        }
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array",
      "!doc": "The JavaScript Array global object is a constructor for arrays, which are high-level, list-like objects."
    },
    "String": {
      "!type": "fn(value: ?) -> string",
      "fromCharCode": {
        "!type": "fn(code: number) -> string",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode",
        "!doc": "Returns a string created by using the specified sequence of Unicode values."
      },
      "fromCodePoint": {
        "!type": "fn(point: number, point?: number) -> string",
        "!doc": "The static String.fromCodePoint() method returns a string created by using the specified sequence of code points.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/fromCodePoint"
      },
      "raw": {
        "!type": "fn(template: [string], substitutions: ?, templateString: ?) -> string",
        "!doc": "The static String.raw() method is a tag function of template strings, used to get the raw string form of template strings.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/raw"
      },
      "prototype": {
        "!stdProto": "String",
        "length": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/length",
          "!doc": "Represents the length of a string."
        },
        "<i>": "string",
        "charAt": {
          "!type": "fn(i: number) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charAt",
          "!doc": "Returns the specified character from a string."
        },
        "charCodeAt": {
          "!type": "fn(i: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt",
          "!doc": "Returns the numeric Unicode value of the character at the given index (except for unicode codepoints > 0x10000)."
        },
        "indexOf": {
          "!type": "fn(char: string, from?: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf",
          "!doc": "Returns the index within the calling String object of the first occurrence of the specified value, starting the search at fromIndex,\nreturns -1 if the value is not found."
        },
        "lastIndexOf": {
          "!type": "fn(char: string, from?: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf",
          "!doc": "Returns the index within the calling String object of the last occurrence of the specified value, or -1 if not found. The calling string is searched backward, starting at fromIndex."
        },
        "substring": {
          "!type": "fn(from: number, to?: number) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring",
          "!doc": "Returns a subset of a string between one index and another, or through the end of the string."
        },
        "substr": {
          "!type": "fn(from: number, length?: number) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr",
          "!doc": "Returns the characters in a string beginning at the specified location through the specified number of characters."
        },
        "slice": {
          "!type": "fn(from: number, to?: number) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/slice",
          "!doc": "Extracts a section of a string and returns a new string."
        },
        "padStart": {
          "!type": "fn(targetLength: number, padString?: string) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padStart",
          "!doc": "Pads the current string with another string (repeated, if needed) so that the resulting string reaches the given length."
        },
        "padEnd": {
          "!type": "fn(targetLength: number, padString?: string) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd",
          "!doc": "pads the current string with a given string (repeated, if needed) so that the resulting string reaches a given length."
        },
        "trim": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim",
          "!doc": "Removes whitespace from both ends of the string."
        },
        "trimStart": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimStart",
          "!doc": "Removes whitespace from the beginning of a string. "
        },
        "trimLeft": "String.prototype.trimStart",
        "trimEnd": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimEnd",
          "!doc": "Removes whitespace from the end of a string."
        },
        "trimRight": "String.prototype.trimEnd",
        "toUpperCase": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toUpperCase",
          "!doc": "Returns the calling string value converted to uppercase."
        },
        "toLowerCase": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLowerCase",
          "!doc": "Returns the calling string value converted to lowercase."
        },
        "toLocaleUpperCase": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLocaleUpperCase",
          "!doc": "Returns the calling string value converted to upper case, according to any locale-specific case mappings."
        },
        "toLocaleLowerCase": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toLocaleLowerCase",
          "!doc": "Returns the calling string value converted to lower case, according to any locale-specific case mappings."
        },
        "split": {
          "!type": "fn(pattern?: string|+RegExp, limit?: number) -> [string]",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split",
          "!doc": "Splits a String object into an array of strings by separating the string into substrings."
        },
        "concat": {
          "!type": "fn(other: string) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/concat",
          "!doc": "Combines the text of two or more strings and returns a new string."
        },
        "localeCompare": {
          "!type": "fn(other: string) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/localeCompare",
          "!doc": "Returns a number indicating whether a reference string comes before or after or is the same as the given string in sort order."
        },
        "match": {
          "!type": "fn(pattern: +RegExp) -> [string]",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match",
          "!doc": "Used to retrieve the matches when matching a string against a regular expression."
        },
        "replace": {
          "!type": "fn(pattern: string|+RegExp, replacement: string) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace",
          "!doc": "Returns a new string with some or all matches of a pattern replaced by a replacement.  The pattern can be a string or a RegExp, and the replacement can be a string or a function to be called for each match."
        },
        "search": {
          "!type": "fn(pattern: +RegExp) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search",
          "!doc": "Executes the search for a match between a regular expression and this String object."
        },
        "codePointAt": {
          "!type": "fn(pos: number) -> number",
          "!doc": "The codePointAt() method returns a non-negative integer that is the UTF-16 encoded code point value.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/codePointAt"
        },
        "endsWith": {
          "!type": "fn(searchString: string, position?: number) -> bool",
          "!doc": "The endsWith() method determines whether a string ends with the characters of another string, returning true or false as appropriate.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith"
        },
        "includes": {
          "!type": "fn(searchString: string, position?: number) -> bool",
          "!doc": "The includes() method determines whether one string may be found within another string, returning true or false as appropriate.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/contains"
        },
        "normalize": {
          "!type": "fn(form: string) -> string",
          "!doc": "The normalize() method returns the Unicode Normalization Form of a given string (if the value isn't a string, it will be converted to one first).",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize"
        },
        "repeat": {
          "!type": "fn(count: number) -> string",
          "!doc": "The repeat() method constructs and returns a new string which contains the specified number of copies of the string on which it was called, concatenated together.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat"
        },
        "startsWith": {
          "!type": "fn(searchString: string, position?: number) -> bool",
          "!doc": "The startsWith() method determines whether a string begins with the characters of another string, returning true or false as appropriate.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith"
        },
        ":Symbol.iterator": {
          "!type": "fn() -> +iter[:t=string]",
          "!doc": "Returns a new Iterator object that iterates over the code points of a String value, returning each code point as a String value.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/@@iterator"
        }
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String",
      "!doc": "The String global object is a constructor for strings, or a sequence of characters."
    },
    "Number": {
      "!type": "fn(value: ?) -> number",
      "MAX_VALUE": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/MAX_VALUE",
        "!doc": "The maximum numeric value representable in JavaScript."
      },
      "MIN_VALUE": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/MIN_VALUE",
        "!doc": "The smallest positive numeric value representable in JavaScript."
      },
      "POSITIVE_INFINITY": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/POSITIVE_INFINITY",
        "!doc": "A value representing the positive Infinity value."
      },
      "NEGATIVE_INFINITY": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/NEGATIVE_INFINITY",
        "!doc": "A value representing the negative Infinity value."
      },
      "prototype": {
        "!stdProto": "Number",
        "toString": {
          "!type": "fn(radix?: number) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString",
          "!doc": "Returns a string representing the specified Number object"
        },
        "toFixed": {
          "!type": "fn(digits: number) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed",
          "!doc": "Formats a number using fixed-point notation"
        },
        "toExponential": {
          "!type": "fn(digits: number) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toExponential",
          "!doc": "Returns a string representing the Number object in exponential notation"
        },
        "toPrecision": {
          "!type": "fn(digits: number) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toPrecision",
          "!doc": "The toPrecision() method returns a string representing the number to the specified precision."
        }
      },
      "EPSILON": {
        "!type": "number",
        "!doc": "The Number.EPSILON property represents the difference between one and the smallest value greater than one that can be represented as a Number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/EPSILON"
      },
      "MAX_SAFE_INTEGER": {
        "!type": "number",
        "!doc": "The Number.MAX_SAFE_INTEGER constant represents the maximum safe integer in JavaScript (253 - 1).",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER"
      },
      "MIN_SAFE_INTEGER": {
        "!type": "number",
        "!doc": "The Number.MIN_SAFE_INTEGER constant represents the minimum safe integer in JavaScript (-(253 - 1)).",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MIN_SAFE_INTEGER"
      },
      "isFinite": {
        "!type": "fn(testValue: ?) -> bool",
        "!doc": "The Number.isFinite() method determines whether the passed value is finite.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite"
      },
      "isInteger": {
        "!type": "fn(testValue: ?) -> bool",
        "!doc": "The Number.isInteger() method determines whether the passed value is an integer.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger"
      },
      "isNaN": {
        "!type": "fn(testValue: ?) -> bool",
        "!doc": "The Number.isNaN() method determines whether the passed value is NaN. More robust version of the original global isNaN().",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN"
      },
      "isSafeInteger": {
        "!type": "fn(testValue: ?) -> bool",
        "!doc": "The Number.isSafeInteger() method determines whether the provided value is a number that is a safe integer. A safe integer is an integer that",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isSafeInteger"
      },
      "parseFloat": {
        "!type": "fn(string: string) -> number",
        "!doc": "The Number.parseFloat() method parses a string argument and returns a floating point number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/parseFloat"
      },
      "parseInt": {
        "!type": "fn(string: string, radix?: number) -> number",
        "!doc": "The Number.parseInt() method parses a string argument and returns an integer of the specified radix or base.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/parseInt"
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number",
      "!doc": "The Number JavaScript object is a wrapper object allowing you to work with numerical values. A Number object is created using the Number() constructor."
    },
    "Boolean": {
      "!type": "fn(value: ?) -> bool",
      "prototype": {
        "!stdProto": "Boolean"
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Boolean",
      "!doc": "The Boolean object is an object wrapper for a boolean value."
    },
    "RegExp": {
      "!type": "fn(source: string, flags?: string)",
      "prototype": {
        "!stdProto": "RegExp",
        "exec": {
          "!type": "fn(input: string) -> [string]",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec",
          "!doc": "Executes a search for a match in a specified string. Returns a result array, or null."
        },
        "test": {
          "!type": "fn(input: string) -> bool",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test",
          "!doc": "Executes the search for a match between a regular expression and a specified string. Returns true or false."
        },
        "global": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp",
          "!doc": "Creates a regular expression object for matching text with a pattern."
        },
        "ignoreCase": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp",
          "!doc": "Creates a regular expression object for matching text with a pattern."
        },
        "multiline": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/multiline",
          "!doc": "Reflects whether or not to search in strings across multiple lines."
        },
        "source": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/source",
          "!doc": "A read-only property that contains the text of the pattern, excluding the forward slashes."
        },
        "lastIndex": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/lastIndex",
          "!doc": "A read/write integer property that specifies the index at which to start the next match."
        },
        "flags": {
          "!type": "string",
          "!doc": "The flags property returns a string consisting of the flags of the current regular expression object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/flags"
        },
        "sticky": {
          "!type": "bool",
          "!doc": "The sticky property reflects whether or not the search is sticky (searches in strings only from the index indicated by the lastIndex property of this regular expression). sticky is a read-only property of an individual regular expression object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky"
        },
        "unicode": {
          "!type": "bool",
          "!doc": "The 'u' flag enables various Unicode-related features.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicode"
        }
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp",
      "!doc": "Creates a regular expression object for matching text with a pattern."
    },
    "Date": {
      "!type": "fn(ms: number)",
      "parse": {
        "!type": "fn(source: string) -> +Date",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse",
        "!doc": "Parses a string representation of a date, and returns the number of milliseconds since January 1, 1970, 00:00:00 UTC."
      },
      "UTC": {
        "!type": "fn(year: number, month: number, date: number, hour?: number, min?: number, sec?: number, ms?: number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC",
        "!doc": "Accepts the same parameters as the longest form of the constructor, and returns the number of milliseconds in a Date object since January 1, 1970, 00:00:00, universal time."
      },
      "now": {
        "!type": "fn() -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now",
        "!doc": "Returns the number of milliseconds elapsed since 1 January 1970 00:00:00 UTC."
      },
      "prototype": {
        "toUTCString": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toUTCString",
          "!doc": "Converts a date to a string, using the universal time convention."
        },
        "toISOString": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString",
          "!doc": "JavaScript provides a direct way to convert a date object into a string in ISO format, the ISO 8601 Extended Format."
        },
        "toDateString": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toDateString",
          "!doc": "Returns the date portion of a Date object in human readable form in American English."
        },
        "toTimeString": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toTimeString",
          "!doc": "Returns the time portion of a Date object in human readable form in American English."
        },
        "toLocaleDateString": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleDateString",
          "!doc": "Converts a date to a string, returning the \"date\" portion using the operating system's locale's conventions."
        },
        "toLocaleTimeString": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString",
          "!doc": "Converts a date to a string, returning the \"time\" portion using the current locale's conventions."
        },
        "getTime": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime",
          "!doc": "Returns the numeric value corresponding to the time for the specified date according to universal time."
        },
        "getFullYear": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getFullYear",
          "!doc": "Returns the year of the specified date according to local time."
        },
        "getYear": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getYear",
          "!doc": "Returns the year in the specified date according to local time."
        },
        "getMonth": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMonth",
          "!doc": "Returns the month in the specified date according to local time."
        },
        "getUTCMonth": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCMonth",
          "!doc": "Returns the month of the specified date according to universal time."
        },
        "getDate": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDate",
          "!doc": "Returns the day of the month for the specified date according to local time."
        },
        "getUTCDate": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCDate",
          "!doc": "Returns the day (date) of the month in the specified date according to universal time."
        },
        "getDay": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay",
          "!doc": "Returns the day of the week for the specified date according to local time."
        },
        "getUTCDay": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCDay",
          "!doc": "Returns the day of the week in the specified date according to universal time."
        },
        "getHours": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getHours",
          "!doc": "Returns the hour for the specified date according to local time."
        },
        "getUTCHours": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCHours",
          "!doc": "Returns the hours in the specified date according to universal time."
        },
        "getMinutes": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMinutes",
          "!doc": "Returns the minutes in the specified date according to local time."
        },
        "getUTCMinutes": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date",
          "!doc": "Creates JavaScript Date instances which let you work with dates and times."
        },
        "getSeconds": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getSeconds",
          "!doc": "Returns the seconds in the specified date according to local time."
        },
        "getUTCSeconds": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCSeconds",
          "!doc": "Returns the seconds in the specified date according to universal time."
        },
        "getMilliseconds": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMilliseconds",
          "!doc": "Returns the milliseconds in the specified date according to local time."
        },
        "getUTCMilliseconds": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCMilliseconds",
          "!doc": "Returns the milliseconds in the specified date according to universal time."
        },
        "getTimezoneOffset": {
          "!type": "fn() -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset",
          "!doc": "Returns the time-zone offset from UTC, in minutes, for the current locale."
        },
        "setTime": {
          "!type": "fn(date: +Date) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setTime",
          "!doc": "Sets the Date object to the time represented by a number of milliseconds since January 1, 1970, 00:00:00 UTC."
        },
        "setFullYear": {
          "!type": "fn(year: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setFullYear",
          "!doc": "Sets the full year for a specified date according to local time."
        },
        "setUTCFullYear": {
          "!type": "fn(year: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setUTCFullYear",
          "!doc": "Sets the full year for a specified date according to universal time."
        },
        "setMonth": {
          "!type": "fn(month: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setMonth",
          "!doc": "Set the month for a specified date according to local time."
        },
        "setUTCMonth": {
          "!type": "fn(month: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setUTCMonth",
          "!doc": "Sets the month for a specified date according to universal time."
        },
        "setDate": {
          "!type": "fn(day: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setDate",
          "!doc": "Sets the day of the month for a specified date according to local time."
        },
        "setUTCDate": {
          "!type": "fn(day: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setUTCDate",
          "!doc": "Sets the day of the month for a specified date according to universal time."
        },
        "setHours": {
          "!type": "fn(hour: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setHours",
          "!doc": "Sets the hours for a specified date according to local time, and returns the number of milliseconds since 1 January 1970 00:00:00 UTC until the time represented by the updated Date instance."
        },
        "setUTCHours": {
          "!type": "fn(hour: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setUTCHours",
          "!doc": "Sets the hour for a specified date according to universal time."
        },
        "setMinutes": {
          "!type": "fn(min: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setMinutes",
          "!doc": "Sets the minutes for a specified date according to local time."
        },
        "setUTCMinutes": {
          "!type": "fn(min: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setUTCMinutes",
          "!doc": "Sets the minutes for a specified date according to universal time."
        },
        "setSeconds": {
          "!type": "fn(sec: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setSeconds",
          "!doc": "Sets the seconds for a specified date according to local time."
        },
        "setUTCSeconds": {
          "!type": "fn(sec: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setUTCSeconds",
          "!doc": "Sets the seconds for a specified date according to universal time."
        },
        "setMilliseconds": {
          "!type": "fn(ms: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setMilliseconds",
          "!doc": "Sets the milliseconds for a specified date according to local time."
        },
        "setUTCMilliseconds": {
          "!type": "fn(ms: number) -> number",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setUTCMilliseconds",
          "!doc": "Sets the milliseconds for a specified date according to universal time."
        },
        "toJSON": {
          "!type": "fn() -> string",
          "!doc": "Returns a string (using toISOString()) representing the Date object's value.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toJSON"
        }
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date",
      "!doc": "Creates JavaScript Date instances which let you work with dates and times."
    },
    "Error": {
      "!type": "fn(message: string)",
      "prototype": {
        "name": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Error/name",
          "!doc": "A name for the type of error."
        },
        "message": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Error/message",
          "!doc": "A human-readable description of the error."
        }
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Error",
      "!doc": "Creates an error object."
    },
    "SyntaxError": {
      "!type": "fn(message: string)",
      "prototype": "Error.prototype",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/SyntaxError",
      "!doc": "Represents an error when trying to interpret syntactically invalid code."
    },
    "ReferenceError": {
      "!type": "fn(message: string)",
      "prototype": "Error.prototype",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/ReferenceError",
      "!doc": "Represents an error when a non-existent variable is referenced."
    },
    "URIError": {
      "!type": "fn(message: string)",
      "prototype": "Error.prototype",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/URIError",
      "!doc": "Represents an error when a malformed URI is encountered."
    },
    "EvalError": {
      "!type": "fn(message: string)",
      "prototype": "Error.prototype",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/EvalError",
      "!doc": "Represents an error regarding the eval function."
    },
    "RangeError": {
      "!type": "fn(message: string)",
      "prototype": "Error.prototype",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RangeError",
      "!doc": "Represents an error when a number is not within the correct range allowed."
    },
    "TypeError": {
      "!type": "fn(message: string)",
      "prototype": "Error.prototype",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/TypeError",
      "!doc": "Represents an error an error when a value is not of the expected type."
    },
    "parseInt": {
      "!type": "fn(string: string, radix?: number) -> number",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt",
      "!doc": "Parses a string argument and returns an integer of the specified radix or base."
    },
    "parseFloat": {
      "!type": "fn(string: string) -> number",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat",
      "!doc": "Parses a string argument and returns a floating point number."
    },
    "isNaN": {
      "!type": "fn(value: number) -> bool",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN",
      "!doc": "Determines whether a value is NaN or not. Be careful, this function is broken. You may be interested in ECMAScript 6 Number.isNaN."
    },
    "isFinite": {
      "!type": "fn(value: number) -> bool",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isFinite",
      "!doc": "Determines whether the passed value is a finite number."
    },
    "eval": {
      "!type": "fn(code: string) -> ?",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval",
      "!doc": "Evaluates JavaScript code represented as a string."
    },
    "encodeURI": {
      "!type": "fn(uri: string) -> string",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI",
      "!doc": "Encodes a Uniform Resource Identifier (URI) by replacing each instance of certain characters by one, two, three, or four escape sequences representing the UTF-8 encoding of the character (will only be four escape sequences for characters composed of two \"surrogate\" characters)."
    },
    "encodeURIComponent": {
      "!type": "fn(uri: string) -> string",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent",
      "!doc": "Encodes a Uniform Resource Identifier (URI) component by replacing each instance of certain characters by one, two, three, or four escape sequences representing the UTF-8 encoding of the character (will only be four escape sequences for characters composed of two \"surrogate\" characters)."
    },
    "decodeURI": {
      "!type": "fn(uri: string) -> string",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURI",
      "!doc": "Decodes a Uniform Resource Identifier (URI) previously created by encodeURI or by a similar routine."
    },
    "decodeURIComponent": {
      "!type": "fn(uri: string) -> string",
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent",
      "!doc": "Decodes a Uniform Resource Identifier (URI) component previously created by encodeURIComponent or by a similar routine."
    },
    "Math": {
      "E": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/E",
        "!doc": "The base of natural logarithms, e, approximately 2.718."
      },
      "LN2": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/LN2",
        "!doc": "The natural logarithm of 2, approximately 0.693."
      },
      "LN10": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/LN10",
        "!doc": "The natural logarithm of 10, approximately 2.302."
      },
      "LOG2E": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/LOG2E",
        "!doc": "The base 2 logarithm of E (approximately 1.442)."
      },
      "LOG10E": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/LOG10E",
        "!doc": "The base 10 logarithm of E (approximately 0.434)."
      },
      "SQRT1_2": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/SQRT1_2",
        "!doc": "The square root of 1/2; equivalently, 1 over the square root of 2, approximately 0.707."
      },
      "SQRT2": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/SQRT2",
        "!doc": "The square root of 2, approximately 1.414."
      },
      "PI": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/PI",
        "!doc": "The ratio of the circumference of a circle to its diameter, approximately 3.14159."
      },
      "abs": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/abs",
        "!doc": "Returns the absolute value of a number."
      },
      "cos": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/cos",
        "!doc": "Returns the cosine of a number."
      },
      "sin": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/sin",
        "!doc": "Returns the sine of a number."
      },
      "tan": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/tan",
        "!doc": "Returns the tangent of a number."
      },
      "acos": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/acos",
        "!doc": "Returns the arccosine (in radians) of a number."
      },
      "asin": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/asin",
        "!doc": "Returns the arcsine (in radians) of a number."
      },
      "atan": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/atan",
        "!doc": "Returns the arctangent (in radians) of a number."
      },
      "atan2": {
        "!type": "fn(y: number, x: number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/atan2",
        "!doc": "Returns the arctangent of the quotient of its arguments."
      },
      "ceil": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/ceil",
        "!doc": "Returns the smallest integer greater than or equal to a number."
      },
      "floor": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/floor",
        "!doc": "Returns the largest integer less than or equal to a number."
      },
      "round": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/round",
        "!doc": "Returns the value of a number rounded to the nearest integer."
      },
      "exp": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/exp",
        "!doc": "Returns Ex, where x is the argument, and E is Euler's constant, the base of the natural logarithms."
      },
      "log": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/log",
        "!doc": "Returns the natural logarithm (base E) of a number."
      },
      "sqrt": {
        "!type": "fn(number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/sqrt",
        "!doc": "Returns the square root of a number."
      },
      "pow": {
        "!type": "fn(number, number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/pow",
        "!doc": "Returns base to the exponent power, that is, baseexponent."
      },
      "max": {
        "!type": "fn(number, number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/max",
        "!doc": "Returns the largest of zero or more numbers."
      },
      "min": {
        "!type": "fn(number, number) -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/min",
        "!doc": "Returns the smallest of zero or more numbers."
      },
      "random": {
        "!type": "fn() -> number",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random",
        "!doc": "Returns a floating-point, pseudo-random number in the range [0, 1) that is, from 0 (inclusive) up to but not including 1 (exclusive), which you can then scale to your desired range."
      },
      "acosh": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.acosh() function returns the hyperbolic arc-cosine of a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/acosh"
      },
      "asinh": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.asinh() function returns the hyperbolic arcsine of a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/asinh"
      },
      "atanh": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.atanh() function returns the hyperbolic arctangent of a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/atanh"
      },
      "cbrt": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.cbrt() function returns the cube root of a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cbrt"
      },
      "clz32": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.clz32() function returns the number of leading zero bits in the 32-bit binary representation of a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32"
      },
      "cosh": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.cosh() function returns the hyperbolic cosine of a number, that can be expressed using the constant e:",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cosh"
      },
      "expm1": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.expm1() function returns ex - 1, where x is the argument, and e the base of the natural logarithms.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/expm1"
      },
      "fround": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.fround() function returns the nearest single precision float representation of a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/fround"
      },
      "hypot": {
        "!type": "fn(value: number) -> number",
        "!doc": "The Math.hypot() function returns the square root of the sum of squares of its arguments.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/hypot"
      },
      "imul": {
        "!type": "fn(a: number, b: number) -> number",
        "!doc": "The Math.imul() function returns the result of the C-like 32-bit multiplication of the two parameters.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul"
      },
      "log10": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.log10() function returns the base 10 logarithm of a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10"
      },
      "log1p": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.log1p() function returns the natural logarithm (base e) of 1 + a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log1p"
      },
      "log2": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.log2() function returns the base 2 logarithm of a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log2"
      },
      "sign": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.sign() function returns the sign of a number, indicating whether the number is positive, negative or zero.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign"
      },
      "sinh": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.sinh() function returns the hyperbolic sine of a number, that can be expressed using the constant e:",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sinh"
      },
      "tanh": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.tanh() function returns the hyperbolic tangent of a number.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/tanh"
      },
      "trunc": {
        "!type": "fn(x: number) -> number",
        "!doc": "The Math.trunc() function returns the integral part of a number by removing any fractional digits. It does not round any numbers. The function can be expressed with the floor() and ceil() function:",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc"
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math",
      "!doc": "A built-in object that has properties and methods for mathematical constants and functions."
    },
    "JSON": {
      "parse": {
        "!type": "fn(json: string, reviver?: fn(key: string, value: ?) -> ?) -> ?",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse",
        "!doc": "Parse a string as JSON, optionally transforming the value produced by parsing."
      },
      "stringify": {
        "!type": "fn(value: ?, replacer?: fn(key: string, value: ?) -> ?, space?: string|number) -> string",
        "!url": "https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify",
        "!doc": "Convert a value to JSON, optionally replacing values if a replacer function is specified, or optionally including only the specified properties if a replacer array is specified."
      },
      "!url": "https://developer.mozilla.org/en-US/docs/JSON",
      "!doc": "JSON (JavaScript Object Notation) is a data-interchange format.  It closely resembles a subset of JavaScript syntax, although it is not a strict subset. (See JSON in the JavaScript Reference for full details.)  It is useful when writing any kind of JavaScript-based application, including websites and browser extensions.  For example, you might store user information in JSON format in a cookie, or you might store extension preferences in JSON in a string-valued browser preference."
    },
    "ArrayBuffer": {
      "!type": "fn(length: number)",
      "!doc": "The ArrayBuffer object is used to represent a generic, fixed-length raw binary data buffer.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
      "isView": {
        "!type": "fn(arg: +ArrayBuffer) -> bool",
        "!doc": "The ArrayBuffer.isView() method returns true if arg is one of the ArrayBuffer views, such as typed array objects or a DataView; false otherwise.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/isView"
      },
      "prototype": {
        "byteLength": {
          "!type": "number",
          "!doc": "The byteLength accessor property represents the length of an ArrayBuffer in bytes.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/byteLength"
        },
        "slice": {
          "!type": "fn(begin: number, end?: number) -> +ArrayBuffer",
          "!doc": "The slice() method returns a new ArrayBuffer whose contents are a copy of this ArrayBuffer's bytes from begin, inclusive, up to end, exclusive.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/slice"
        }
      }
    },
    "DataView": {
      "!type": "fn(buffer: +ArrayBuffer, byteOffset?: number, byteLength?: number)",
      "!doc": "The DataView view provides a low-level interface for reading data from and writing it to an ArrayBuffer.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
      "prototype": {
        "buffer": {
          "!type": "+ArrayBuffer",
          "!doc": "The buffer accessor property represents the ArrayBuffer referenced by the DataView at construction time.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/buffer"
        },
        "byteLength": {
          "!type": "number",
          "!doc": "The byteLength accessor property represents the length (in bytes) of this view from the start of its ArrayBuffer.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/byteLength"
        },
        "byteOffset": {
          "!type": "number",
          "!doc": "The byteOffset accessor property represents the offset (in bytes) of this view from the start of its ArrayBuffer.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/byteOffset"
        },
        "getFloat32": {
          "!type": "fn(byteOffset: number, littleEndian?: bool) -> number",
          "!doc": "The getFloat32() method gets a signed 32-bit integer (float) at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/getFloat32"
        },
        "getFloat64": {
          "!type": "fn(byteOffset: number, littleEndian?: bool) -> number",
          "!doc": "The getFloat64() method gets a signed 64-bit float (double) at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/getFloat64"
        },
        "getInt16": {
          "!type": "fn(byteOffset: number, littleEndian?: bool) -> number",
          "!doc": "The getInt16() method gets a signed 16-bit integer (short) at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/getInt16"
        },
        "getInt32": {
          "!type": "fn(byteOffset: number, littleEndian?: bool) -> number",
          "!doc": "The getInt32() method gets a signed 32-bit integer (long) at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/getInt32"
        },
        "getInt8": {
          "!type": "fn(byteOffset: number, littleEndian?: bool) -> number",
          "!doc": "The getInt8() method gets a signed 8-bit integer (byte) at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/getInt8"
        },
        "getUint16": {
          "!type": "fn(byteOffset: number, littleEndian?: bool) -> number",
          "!doc": "The getUint16() method gets an unsigned 16-bit integer (unsigned short) at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/getUint16"
        },
        "getUint32": {
          "!type": "fn(byteOffset: number, littleEndian?: bool) -> number",
          "!doc": "The getUint32() method gets an unsigned 32-bit integer (unsigned long) at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/getUint32"
        },
        "getUint8": {
          "!type": "fn(byteOffset: number) -> number",
          "!doc": "The getUint8() method gets an unsigned 8-bit integer (unsigned byte) at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/getUint8"
        },
        "setFloat32": {
          "!type": "fn(byteOffset: number, value: number, littleEndian?: bool)",
          "!doc": "The setFloat32() method stores a signed 32-bit integer (float) value at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/setFloat32"
        },
        "setFloat64": {
          "!type": "fn(byteOffset: number, value: number, littleEndian?: bool)",
          "!doc": "The setFloat64() method stores a signed 64-bit integer (double) value at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/setFloat64"
        },
        "setInt16": {
          "!type": "fn(byteOffset: number, value: number, littleEndian?: bool)",
          "!doc": "The setInt16() method stores a signed 16-bit integer (short) value at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/setInt16"
        },
        "setInt32": {
          "!type": "fn(byteOffset: number, value: number, littleEndian?: bool)",
          "!doc": "The setInt32() method stores a signed 32-bit integer (long) value at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/setInt32"
        },
        "setInt8": {
          "!type": "fn(byteOffset: number, value: number)",
          "!doc": "The setInt8() method stores a signed 8-bit integer (byte) value at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/setInt8"
        },
        "setUint16": {
          "!type": "fn(byteOffset: number, value: number, littleEndian?: bool)",
          "!doc": "The setUint16() method stores an unsigned 16-bit integer (unsigned short) value at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/setUint16"
        },
        "setUint32": {
          "!type": "fn(byteOffset: number, value: number, littleEndian?: bool)",
          "!doc": "The setUint32() method stores an unsigned 32-bit integer (unsigned long) value at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/setUint32"
        },
        "setUint8": {
          "!type": "fn(byteOffset: number, value: number)",
          "!doc": "The setUint8() method stores an unsigned 8-bit integer (byte) value at the specified byte offset from the start of the DataView.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView/setUint8"
        }
      }
    },
    "Float32Array": "TypedArray",
    "Float64Array": "TypedArray",
    "Int16Array": "TypedArray",
    "Int32Array": "TypedArray",
    "Int8Array": "TypedArray",
    "Map": {
      "!type": "fn(iterable?: [?])",
      "!doc": "The Map object is a simple key/value map. Any value (both objects and primitive values) may be used as either a key or a value.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
      "prototype": {
        "clear": {
          "!type": "fn()",
          "!doc": "The clear() method removes all elements from a Map object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/clear"
        },
        "delete": {
          "!type": "fn(key: ?)",
          "!doc": "The delete() method removes the specified element from a Map object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/delete"
        },
        "entries": {
          "!type": "fn() -> +iter[:t=[!this.:key, !this.:value]]",
          "!doc": "The entries() method returns a new Iterator object that contains the [key, value] pairs for each element in the Map object in insertion order.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/entries"
        },
        "forEach": {
          "!type": "fn(callback: fn(value: ?, key: ?, map: +Map), thisArg?: ?)",
          "!effects": ["call !0 this=!1 !this.:value !this.:key !this"],
          "!doc": "The forEach() method executes a provided function once per each key/value pair in the Map object, in insertion order.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/forEach"
        },
        "get": {
          "!type": "fn(key: ?) -> !this.:value",
          "!doc": "The get() method returns a specified element from a Map object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/get"
        },
        "has": {
          "!type": "fn(key: ?) -> bool",
          "!doc": "The has() method returns a boolean indicating whether an element with the specified key exists or not.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/has"
        },
        "keys": {
          "!type": "fn() -> +iter[:t=!this.:key]",
          "!doc": "The keys() method returns a new Iterator object that contains the keys for each element in the Map object in insertion order.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/keys"
        },
        "set": {
          "!type": "fn(key: ?, value: ?) -> !this",
          "!effects": ["propagate !0 !this.:key", "propagate !1 !this.:value"],
          "!doc": "The set() method adds a new element with a specified key and value to a Map object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/set"
        },
        "size": {
          "!type": "number",
          "!doc": "The size accessor property returns the number of elements in a Map object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/size"
        },
        "values": {
          "!type": "fn() -> +iter[:t=!this.:value]",
          "!doc": "The values() method returns a new Iterator object that contains the values for each element in the Map object in insertion order.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/values"
        },
        ":Symbol.iterator": {
          "!type": "fn() -> +iter[:t=[!this.:key, !this.:value]]",
          "!doc": "Returns a new Iterator object that contains the [key, value] pairs for each element in the Map object in insertion order.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/@@iterator"
        }
      }
    },
    "Promise": {
      "!type": "fn(executor: fn(resolve: fn(value: ?), reject: fn(reason: ?))) -> !custom:Promise_ctor",
      "!doc": "The Promise object is used for deferred and asynchronous computations. A Promise is in one of the three states:",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
      "all": {
        "!type": "fn(iterable: [+Promise]) -> +Promise[:t=[!0.<i>.:t]]",
        "!doc": "The Promise.all(iterable) method returns a promise that resolves when all of the promises in the iterable argument have resolved.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"
      },
      "race": {
        "!type": "fn(iterable: [+Promise]) -> !0.<i>",
        "!doc": "The Promise.race(iterable) method returns a promise that resolves or rejects as soon as one of the promises in the iterable resolves or rejects, with the value or reason from that promise.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race"
      },
      "reject": "Promise_reject",
      "resolve": {
        "!type": "fn(value: ?) -> !custom:Promise_resolve",
        "!doc": "The Promise.resolve(value) method returns a Promise object that is resolved with the given value. If the value is a thenable (i.e. has a then method), the returned promise will 'follow' that thenable, adopting its eventual state; otherwise the returned promise will be fulfilled with the value.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve"
      },
      "prototype": "Promise.prototype"
    },
    "Proxy": {
      "!type": "fn(target: ?, handler: Proxy_handler)",
      "!doc": "The Proxy object is used to define the custom behavior in JavaScript fundamental operation (e.g. property lookup, assignment, enumeration, function invocation, etc).",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
      "revocable": {
        "!type": "fn(target: ?, handler: Proxy_handler) -> Proxy_revocable",
        "!doc": "The Proxy.revocable() method is used to create a revocable Proxy object.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/revocable"
      }
    },
    "Reflect": {
      "!doc": "Reflect is a built-in object that provides methods for interceptable JavaScript operations.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
      "apply": {
        "!type": "fn(target: fn(), thisArg?: ?, argumentList?: [?]) -> !0.!ret",
        "!doc": "Calls a target function with arguments as specified.",
        "!url":  "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/apply"
      },
      "construct": {
        "!type": "fn(target: fn(), argumentList?: [?]) -> ?",
        "!doc": "Acts like the new operator as a function. It is equivalent to calling new target(...args).",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/construct"
      },
      "defineProperty": {
        "!type": "fn(target: ?, property: string, descriptor: propertyDescriptor) -> bool",
        "!doc": "The static Reflect.defineProperty() method is like Object.defineProperty() but returns a Boolean.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/defineProperty"
      },
      "deleteProperty": {
        "!type": "fn(target: ?, property: string) -> bool",
        "!doc": "Works like the delete operator as a function.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/deleteProperty"
      },
      "enumerate": {
        "!type": "fn(target: ?) -> +iter[:t=string]",
        "!doc": "Returns an iterator with the enumerable own and inherited properties of the target object.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/enumerate"
      },
      "get": {
        "!type": "fn(target: ?, property: string) -> ?",
        "!doc": "Gets a property from an object.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/get"
      },
      "getOwnPropertyDescriptor": {
        "!type": "fn(target: ?, property: string) -> ?",
        "!doc": "Returns a property descriptor of the given property if it exists on the object, undefined otherwise.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/getOwnPropertyDescriptor"
      },
      "getPrototypeOf": {
        "!type": "fn(target: ?) -> ?",
        "!doc": "Returns the prototype of the specified object.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/getPrototypeOf"
      },
      "has": {
        "!type": "fn(target: ?, property: string) -> bool",
        "!doc": "The static Reflect.has() method works like the in operator as a function.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/has"
      },
      "isExtensible": {
        "!type": "fn(target: ?) -> bool",
        "!doc": "Determines if an object is extensible (whether it can have new properties added to it).",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/isExtensible"
      },
      "ownKeys": {
        "!type": "fn(target: ?) -> [string]",
        "!doc": "Returns an array of the target object's own property keys.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/ownKeys"
      },
      "preventExtensions": {
        "!type": "fn(target: ?) -> bool",
        "!doc": "Prevents new properties from ever being added to an object.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/preventExtensions"
      },
      "set": {
        "!type": "fn(target: ?, property: string, value: ?) -> bool",
        "!doc": "Set a property on an object.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/set"
      },
      "setPrototypeOf": {
        "!type": "fn(target: ?, prototype: ?) -> bool",
        "!doc": "Sets the prototype of a specified object to another object or to null.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/setPrototypeOf"
      }
    },
    "Set": {
      "!type": "fn(iterable?: [?])",
      "!doc": "The Set object lets you store unique values of any type, whether primitive values or object references.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
      "prototype": {
        "add": {
          "!type": "fn(value: ?) -> !this",
          "!effects": ["propagate !0 !this.:t"],
          "!doc": "The add() method appends a new element with a specified value to the end of a Set object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/add"
        },
        "clear": {
          "!type": "fn()",
          "!doc": "The clear() method removes all elements from a Set object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/clear"
        },
        "delete": {
          "!type": "fn(value: ?) -> bool",
          "!doc": "The delete() method removes the specified element from a Set object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/delete"
        },
        "entries": {
          "!type": "fn() -> +iter[:t=[!this.:t]]",
          "!doc": "The entries() method returns a new Iterator object that contains an array of [value, value] for each element in the Set object, in insertion order. For Set objects there is no key like in Map objects. However, to keep the API similar to the Map object, each entry has the same value for its key and value here, so that an array [value, value] is returned.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/entries"
        },
        "forEach": {
          "!type": "fn(callback: fn(value: ?, value2: ?, set: +Set), thisArg?: ?)",
          "!effects": ["call !0 this=!1 !this.:t number !this"],
          "!doc": "The forEach() method executes a provided function once per each value in the Set object, in insertion order.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/forEach"
        },
        "has": {
          "!type": "fn(value: ?) -> bool",
          "!doc": "The has() method returns a boolean indicating whether an element with the specified value exists in a Set object or not.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/has"
        },
        "keys": {
          "!type": "fn() -> +iter[:t=!this.:t]",
          "!doc": "The values() method returns a new Iterator object that contains the values for each element in the Set object in insertion order.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/keys"
        },
        "size": {
          "!type": "number",
          "!doc": "The size accessor property returns the number of elements in a Set object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/size"
        },
        "values": {
          "!type": "fn() -> +iter[:t=!this.:t]",
          "!doc": "The values() method returns a new Iterator object that contains the values for each element in the Set object in insertion order.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/values"
        },
        ":Symbol.iterator": {
          "!type": "fn() -> +iter[:t=!this.:t]",
          "!doc": "Returns a new Iterator object that contains the values for each element in the Set object in insertion order.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/@@iterator"
        }
      }
    },
    "Symbol": {
      "!type": "fn(description?: string) -> !custom:getSymbol",
      "!doc": "A symbol is a unique and immutable data type and may be used as an identifier for object properties. The symbol object is an implicit object wrapper for the symbol primitive data type.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
      "for": {
        "!type": "fn(key: string) -> !custom:getSymbol",
        "!doc": "The Symbol.for(key) method searches for existing symbols in a runtime-wide symbol registry with the given key and returns it if found. Otherwise a new symbol gets created in the global symbol registry with this key.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/for"
      },
      "keyFor": {
        "!type": "fn(sym: +Symbol) -> string",
        "!doc": "The Symbol.keyFor(sym) method retrieves a shared symbol key from the global symbol registry for the given symbol.",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/keyFor"
      },
      "hasInstance": ":Symbol.hasInstance",
      "isConcatSpreadable": ":Symbol.isConcatSpreadable",
      "iterator": ":Symbol.iterator",
      "asyncIterator": ":Symbol.asyncIterator",
      "match": ":Symbol.match",
      "replace": ":Symbol.replace",
      "search": ":Symbol.search",
      "species": ":Symbol.species",
      "split": ":Symbol.split",
      "toStringTag": ":Symbol.toStringTag",
      "unscopables": ":Symbol.unscopables",
      "prototype": {
        "!stdProto": "Symbol"
      }
    },
    "Uint16Array": "TypedArray",
    "Uint32Array": "TypedArray",
    "Uint8Array": "TypedArray",
    "Uint8ClampedArray": "TypedArray",
    "WeakMap": {
      "!type": "fn(iterable?: [?])",
      "!doc": "The WeakMap object is a collection of key/value pairs in which the keys are objects and the values can be arbitrary values.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
      "prototype": {
        "delete": {
          "!type": "fn(key: ?) -> bool",
          "!doc": "The delete() method removes the specified element from a WeakMap object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap/delete"
        },
        "get": {
          "!type": "fn(key: ?) -> !this.:value",
          "!doc": "The get() method returns a specified element from a WeakMap object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap/get"
        },
        "has": {
          "!type": "fn(key: ?) -> bool",
          "!doc": "The has() method returns a boolean indicating whether an element with the specified key exists in the WeakMap object or not.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap/has"
        },
        "set": {
          "!type": "fn(key: ?, value: ?)",
          "!effects": ["propagate !0 !this.:key", "propagate !1 !this.:value"],
          "!doc": "The set() method adds a new element with a specified key and value to a WeakMap object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap/set"
        }
      }
    },
    "WeakSet": {
      "!type": "fn(iterable?: [?])",
      "!doc": "The WeakSet object lets you store weakly held objects in a collection.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
      "prototype": {
        "add": {
          "!type": "fn(value: ?)",
          "!doc": "The add() method appends a new object to the end of a WeakSet object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet/add"
        },
        "delete": {
          "!type": "fn(value: ?) -> bool",
          "!doc": "The delete() method removes the specified element from a WeakSet object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet/delete"
        },
        "has": {
          "!type": "fn(value: ?) -> bool",
          "!doc": "The has() method returns a boolean indicating whether an object exists in a WeakSet or not.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet/has"
        }
      }
    }
  },
  "browse":{
    "!name": "browser",
    "!define": {
      "Geolocation": {
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Geolocation",
        "!doc": "The Geolocation interface represents an object able to programmatically obtain the position of the device. It gives Web content access to the location of the device. This allows a Web site or app to offer customized results based on the user's location.",
        "clearWatch": {
          "!type": "fn(id: number)",
          "!doc": "The Geolocation.clearWatch() method is used to unregister location/error monitoring handlers previously installed using Geolocation.watchPosition().",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/clearWatch"
        },
        "getCurrentPosition": {
          "!type": "fn(sucess: fn(Position), error?: fn(PositionError), options?: PositionOptions)",
          "!doc": "The Geolocation.getCurrentPosition() method is used to get the current position of the device.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition"
        },
        "watchPosition": {
          "!type": "fn(sucess: fn(Position), error?: fn(PositionError), options?: PositionOptions)",
          "!doc": "The Geolocation.watchPosition() method is used to register a handler function that will be called automatically each time the position of the device changes. You can also, optionally, specify an error handling callback function.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/watchPosition"
        }
      },
      "PositionOptions": {
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PositionOptions",
        "!doc": "The PositionOptions interface describes an object containing option properties to pass as a parameter of Geolocation.getCurrentPosition() and Geolocation.watchPosition().",
        "enableHighAccuracy": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PositionOptions/enableHighAccuracy",
          "!doc": "The PositionOptions.enableHighAccuracy property is a Boolean that indicates the application would like to receive the best possible results. If true and if the device is able to provide a more accurate position, it will do so. Note that this can result in slower response times or increased power consumption (with a GPS chip on a mobile device for example). On the other hand, if false (the default value), the device can take the liberty to save resources by responding more quickly and/or using less power."
        },
        "timeout": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PositionOptions/timeout",
          "!doc": "The PositionOptions.timeout property is a positive long value representing the maximum length of time (in milliseconds) the device is allowed to take in order to return a position. The default value is Infinity, meaning that getCurrentPosition() won't return until the position is available."
        },
        "maximumAge": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PositionOptions/maximumAge",
          "!doc": "The PositionOptions.maximumAge property is a positive long value indicating the maximum age in milliseconds of a possible cached position that is acceptable to return. If set to 0, it means that the device cannot use a cached position and must attempt to retrieve the real current position. If set to Infinity the device must return a cached position regardless of its age."
        }
      },
      "PositionError": {
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PositionError",
        "!doc": "The PositionError interface represents the reason of an error occurring when using the geolocating device.",
        "code": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PositionError/code",
          "!doc": "The PositionError.code read-only property is an unsigned short representing the error code."
        },
        "message": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PositionError/message",
          "!doc": "The PositionError.message read-only property returns a human-readable DOMString describing the details of the error."
        }
      },
      "Position": {
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Position",
        "!doc": "The Position interface represents the position of the concerned device at a given time. The position, represented by a Coordinates object, comprehends the 2D position of the device, on a spheroid representing the Earth, but also its altitude and its speed.",
        "coords": {
          "!type": "Coordinates",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Position/coords",
          "!doc": "The Position.coords read-only property, a Coordinates object, represents a geographic attitude: it contains the location, that is longitude and latitude on the Earth, the altitude, and the speed of the object concerned, regrouped inside the returned value. It also contains accuracy information about these values."
        },
        "timestamp": {
          "!type": "+DOMTimeStamp",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Position/timestamp",
          "!doc": "The Position.timestamp read-only property, a DOMTimeStamp object, represents the date and the time of the creation of the Position object it belongs to. The precision is to the millisecond."
        }
      },
      "Coordinates": {
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Coordinates",
        "!doc": "The Coordinates interface represents the position and altitude of the device on Earth, as well as the accuracy with which these properties are calculated.",
        "latitude": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Coordinates/latitude",
          "!doc": "The Coordinates.latitude read-only property is a double representing the latitude of the position in decimal degrees."
        },
        "longitude": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Coordinates/longitude",
          "!doc": "The Coordinates.longitude read-only property is a double representing the longitude of the position in decimal degrees."
        },
        "altitude": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Coordinates/altitude",
          "!doc": "The Coordinates.altitude read-only property is a double representing the altitude of the position in meters, relative to sea level. This value is null if the implementation cannot provide this data."
        },
        "accuracy": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Coordinates/accuracy",
          "!doc": "The Coordinates.accuracy read-only property is a strictly positive double representing the accuracy, with a 95% confidence level, of the Coordinates.latitude and Coordinates.longitude properties expressed in meters."
        },
        "altitudeAccuracy": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Coordinates/altitudeAccuracy",
          "!doc": "The Coordinates.altitudeAccuracy read-only property is a strictly positive double representing the accuracy, with a 95% confidence level, of the altitude expressed in meters. This value is null if the implementation doesn't support measuring altitude."
        },
        "heading": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Coordinates/heading",
          "!doc": "The Coordinates.heading read-only property is a double representing the direction in which the device is traveling. This value, specified in degrees, indicates how far off from heading due north the device is. 0 degrees represents true true north, and the direction is determined clockwise (which means that east is 90 degrees and west is 270 degrees). If Coordinates.speed is 0, heading is NaN. If the device is not able to provide heading information, this value is null."
        },
        "speed": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Coordinates/speed",
          "!doc": "The Coordinates.speed read-only property is a double representing the velocity of the device in meters per second. This value is null if the implementation is not able to measure it."
        }
      },
      "MutationObserverInit": {
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver#MutationObserverInit",
        "childList": "bool",
        "attributes": "bool",
        "characterData": "bool",
        "subtree": "bool",
        "attributeOldValue": "bool",
        "characterDataOldValue": "bool",
        "attributeFilter": "[string]"
      },
      "Permissions": {
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Permissions",
        "query": {
          "!type": "fn(descriptor: PermissionDescriptor) -> +Promise[:t=PermissionStatus]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query",
          "!doc": "Returns the user permission status for a given API."
        },
        "revoke": {
          "!type": "fn(descriptor: PermissionDescriptor) -> +Promise[:t=PermissionStatus]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Permissions/revoke",
          "!doc": "Revokes the permission currently set on a given API."
        }
      },
      "PermissionDescriptor": {
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query",
        "name": {
          "!type": "string",
          "!doc": "The name of the API whose permissions you want to query. Valid values are 'geolocation', 'midi', 'notifications', 'push', 'persistent-storage', 'camera' and 'microphone'."
        },
        "userVisibleOnly": {
          "!type": "bool",
          "!doc": "Indicates whether you want to show a notification for every message or be able to send silent push notifications. The default is false."
        },
        "sysex": {
          "!type": "bool",
          "!doc": "Indicates whether you need and/or receive system exclusive messages. The default is false."
        }
      },
      "PermissionStatus": {
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PermissionStatus",
        "state": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PermissionStatus/state",
          "!doc": "Returns the state of a requested permission; one of 'granted', 'denied', or 'prompt'."
        },
        "onchange": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/PermissionStatus/onchange",
          "!doc": "An event called whenever PermissionStatus.status changes."
        }
      }
    },
    "location": {
      "assign": {
        "!type": "fn(url: string)",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "Load the document at the provided URL."
      },
      "replace": {
        "!type": "fn(url: string)",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "Replace the current document with the one at the provided URL. The difference from the assign() method is that after using replace() the current page will not be saved in session history, meaning the user won't be able to use the Back button to navigate to it."
      },
      "reload": {
        "!type": "fn()",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "Reload the document from the current URL. forceget is a boolean, which, when it is true, causes the page to always be reloaded from the server. If it is false or not specified, the browser may reload the page from its cache."
      },
      "origin": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "The origin of the URL."
      },
      "hash": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "The part of the URL that follows the # symbol, including the # symbol."
      },
      "search": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "The part of the URL that follows the ? symbol, including the ? symbol."
      },
      "pathname": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "The path (relative to the host)."
      },
      "port": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "The port number of the URL."
      },
      "hostname": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "The host name (without the port number or square brackets)."
      },
      "host": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "The host name and port number."
      },
      "protocol": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "The protocol of the URL."
      },
      "href": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
        "!doc": "The entire URL."
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.location",
      "!doc": "Returns a location object with information about the current location of the document. Assigning to the location property changes the current page to the new address."
    },
    "Node": {
      "!type": "fn()",
      "prototype": {
        "parentElement": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.parentElement",
          "!doc": "Returns the DOM node's parent Element, or null if the node either has no parent, or its parent isn't a DOM Element."
        },
        "textContent": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.textContent",
          "!doc": "Gets or sets the text content of a node and its descendants."
        },
        "baseURI": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.baseURI",
          "!doc": "The absolute base URI of a node or null if unable to obtain an absolute URI."
        },
        "localName": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.localName",
          "!doc": "Returns the local part of the qualified name of this node."
        },
        "prefix": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.prefix",
          "!doc": "Returns the namespace prefix of the specified node, or null if no prefix is specified. This property is read only."
        },
        "namespaceURI": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.namespaceURI",
          "!doc": "The namespace URI of the node, or null if the node is not in a namespace (read-only). When the node is a document, it returns the XML namespace for the current document."
        },
        "ownerDocument": {
          "!type": "+Document",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.ownerDocument",
          "!doc": "The ownerDocument property returns the top-level document object for this node."
        },
        "attributes": {
          "!type": "+NamedNodeMap",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.attributes",
          "!doc": "A collection of all attribute nodes registered to the specified node. It is a NamedNodeMap,not an Array, so it has no Array methods and the Attr nodes' indexes may differ among browsers."
        },
        "nextSibling": {
          "!type": "+Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.nextSibling",
          "!doc": "Returns the node immediately following the specified one in its parent's childNodes list, or null if the specified node is the last node in that list."
        },
        "previousSibling": {
          "!type": "+Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.previousSibling",
          "!doc": "Returns the node immediately preceding the specified one in its parent's childNodes list, null if the specified node is the first in that list."
        },
        "lastChild": {
          "!type": "+Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.lastChild",
          "!doc": "Returns the last child of a node."
        },
        "firstChild": {
          "!type": "+Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.firstChild",
          "!doc": "Returns the node's first child in the tree, or null if the node is childless. If the node is a Document, it returns the first node in the list of its direct children."
        },
        "childNodes": {
          "!type": "+NodeList",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.childNodes",
          "!doc": "Returns a collection of child nodes of the given element."
        },
        "parentNode": {
          "!type": "+Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.parentNode",
          "!doc": "Returns the parent of the specified node in the DOM tree."
        },
        "nodeType": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.nodeType",
          "!doc": "Returns an integer code representing the type of the node."
        },
        "nodeValue": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.nodeValue",
          "!doc": "Returns or sets the value of the current node."
        },
        "nodeName": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.nodeName",
          "!doc": "Returns the name of the current node as a string."
        },
        "tagName": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.nodeName",
          "!doc": "Returns the name of the current node as a string."
        },
        "insertBefore": {
          "!type": "fn(newElt: +Element, before: +Element) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.insertBefore",
          "!doc": "Inserts the specified node before a reference element as a child of the current node."
        },
        "replaceChild": {
          "!type": "fn(newChild: +Node, oldChild: +Node) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.replaceChild",
          "!doc": "Replaces one child node of the specified element with another."
        },
        "removeChild": {
          "!type": "fn(oldNode: +Node) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.removeChild",
          "!doc": "Removes a child node from the DOM. Returns removed node."
        },
        "appendChild": {
          "!type": "fn(newNode: +Node) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.appendChild",
          "!doc": "Adds a node to the end of the list of children of a specified parent node. If the node already exists it is removed from current parent node, then added to new parent node."
        },
        "hasChildNodes": {
          "!type": "fn() -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.hasChildNodes",
          "!doc": "Returns a Boolean value indicating whether the current Node has child nodes or not."
        },
        "cloneNode": {
          "!type": "fn(deep: bool) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.cloneNode",
          "!doc": "Returns a duplicate of the node on which this method was called."
        },
        "normalize": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.normalize",
          "!doc": "Puts the specified node and all of its subtree into a \"normalized\" form. In a normalized subtree, no text nodes in the subtree are empty and there are no adjacent text nodes."
        },
        "isSupported": {
          "!type": "fn(features: string, version: number) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.isSupported",
          "!doc": "Tests whether the DOM implementation implements a specific feature and that feature is supported by this node."
        },
        "hasAttributes": {
          "!type": "fn() -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.hasAttributes",
          "!doc": "Returns a boolean value of true or false, indicating if the current element has any attributes or not."
        },
        "lookupPrefix": {
          "!type": "fn(uri: string) -> string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.lookupPrefix",
          "!doc": "Returns the prefix for a given namespaceURI if present, and null if not. When multiple prefixes are possible, the result is implementation-dependent."
        },
        "isDefaultNamespace": {
          "!type": "fn(uri: string) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.isDefaultNamespace",
          "!doc": "Accepts a namespace URI as an argument and returns true if the namespace is the default namespace on the given node or false if not."
        },
        "lookupNamespaceURI": {
          "!type": "fn(uri: string) -> string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.lookupNamespaceURI",
          "!doc": "Takes a prefix and returns the namespaceURI associated with it on the given node if found (and null if not). Supplying null for the prefix will return the default namespace."
        },
        "addEventListener": {
          "!type": "fn(type: string, listener: fn(e: +Event), capture: bool)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/EventTarget.addEventListener",
          "!doc": "Registers a single event listener on a single target. The event target may be a single element in a document, the document itself, a window, or an XMLHttpRequest."
        },
        "removeEventListener": {
          "!type": "fn(type: string, listener: fn(), capture: bool)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/EventTarget.removeEventListener",
          "!doc": "Allows the removal of event listeners from the event target."
        },
        "isSameNode": {
          "!type": "fn(other: +Node) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.isSameNode",
          "!doc": "Tests whether two nodes are the same, that is they reference the same object."
        },
        "isEqualNode": {
          "!type": "fn(other: +Node) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.isEqualNode",
          "!doc": "Tests whether two nodes are equal."
        },
        "compareDocumentPosition": {
          "!type": "fn(other: +Node) -> number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.compareDocumentPosition",
          "!doc": "Compares the position of the current node against another node in any other document."
        },
        "contains": {
          "!type": "fn(other: +Node) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Node.contains",
          "!doc": "Indicates whether a node is a descendent of a given node."
        },
        "dispatchEvent": {
          "!type": "fn(event: +Event) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/EventTarget.dispatchEvent",
          "!doc": "Dispatches an event into the event system. The event is subject to the same capturing and bubbling behavior as directly dispatched events."
        },
        "innerText": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Node/innerText",
          "!doc": "Gets or sets the text content of a node and its descendants."
        },
        "ELEMENT_NODE": "number",
        "ATTRIBUTE_NODE": "number",
        "TEXT_NODE": "number",
        "CDATA_SECTION_NODE": "number",
        "ENTITY_REFERENCE_NODE": "number",
        "ENTITY_NODE": "number",
        "PROCESSING_INSTRUCTION_NODE": "number",
        "COMMENT_NODE": "number",
        "DOCUMENT_NODE": "number",
        "DOCUMENT_TYPE_NODE": "number",
        "DOCUMENT_FRAGMENT_NODE": "number",
        "NOTATION_NODE": "number",
        "DOCUMENT_POSITION_DISCONNECTED": "number",
        "DOCUMENT_POSITION_PRECEDING": "number",
        "DOCUMENT_POSITION_FOLLOWING": "number",
        "DOCUMENT_POSITION_CONTAINS": "number",
        "DOCUMENT_POSITION_CONTAINED_BY": "number",
        "DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC": "number"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/Node",
      "!doc": "A Node is an interface from which a number of DOM types inherit, and allows these various types to be treated (or tested) similarly."
    },
    "Element": {
      "!type": "fn()",
      "prototype": {
        "!proto": "Node.prototype",
        "getAttribute": {
          "!type": "fn(name: string) -> string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getAttribute",
          "!doc": "Returns the value of the named attribute on the specified element. If the named attribute does not exist, the value returned will either be null or \"\" (the empty string)."
        },
        "setAttribute": {
          "!type": "fn(name: string, value: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.setAttribute",
          "!doc": "Adds a new attribute or changes the value of an existing attribute on the specified element."
        },
        "removeAttribute": {
          "!type": "fn(name: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.removeAttribute",
          "!doc": "Removes an attribute from the specified element."
        },
        "getAttributeNode": {
          "!type": "fn(name: string) -> +Attr",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getAttributeNode",
          "!doc": "Returns the specified attribute of the specified element, as an Attr node."
        },
        "getElementsByTagName": {
          "!type": "fn(tagName: string) -> +NodeList",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getElementsByTagName",
          "!doc": "Returns a list of elements with the given tag name. The subtree underneath the specified element is searched, excluding the element itself. The returned list is live, meaning that it updates itself with the DOM tree automatically. Consequently, there is no need to call several times element.getElementsByTagName with the same element and arguments."
        },
        "getElementsByTagNameNS": {
          "!type": "fn(ns: string, tagName: string) -> +NodeList",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getElementsByTagNameNS",
          "!doc": "Returns a list of elements with the given tag name belonging to the given namespace."
        },
        "getAttributeNS": {
          "!type": "fn(ns: string, name: string) -> string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getAttributeNS",
          "!doc": "Returns the string value of the attribute with the specified namespace and name. If the named attribute does not exist, the value returned will either be null or \"\" (the empty string)."
        },
        "setAttributeNS": {
          "!type": "fn(ns: string, name: string, value: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.setAttributeNS",
          "!doc": "Adds a new attribute or changes the value of an attribute with the given namespace and name."
        },
        "removeAttributeNS": {
          "!type": "fn(ns: string, name: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.removeAttributeNS",
          "!doc": "removeAttributeNS removes the specified attribute from an element."
        },
        "getAttributeNodeNS": {
          "!type": "fn(ns: string, name: string) -> +Attr",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getAttributeNodeNS",
          "!doc": "Returns the Attr node for the attribute with the given namespace and name."
        },
        "hasAttribute": {
          "!type": "fn(name: string) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.hasAttribute",
          "!doc": "hasAttribute returns a boolean value indicating whether the specified element has the specified attribute or not."
        },
        "hasAttributeNS": {
          "!type": "fn(ns: string, name: string) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.hasAttributeNS",
          "!doc": "hasAttributeNS returns a boolean value indicating whether the current element has the specified attribute."
        },
        "matches": {
          "!type": "fn(selectorString: string) -> bool",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Element/matches",
          "!doc": "The Element.matches() method returns true if the element would be selected by the specified selector string; otherwise, returns false."
        },
        "append": {
          "!type": "fn(...nodes: [string|Node])",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/append",
          "!doc": "This is an experimental technology\n\nThe Element.append method inserts a set of Node objects or DOMString objects after the last child of the ParentNode. DOMString objects are inserted as equivalent Text nodes."
        },
        "prepend": {
          "!type": "fn(...nodes: [string|Node])",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/ParentNode/prepend",
          "!doc": "This is an experimental technology.\n\nThe Element.prepend method inserts a set of Node objects or DOMString objects before the first child of the ParentNode. DOMString objects are inserted as equivalent Text nodes."
        },
        "before": {
          "!type": "fn(...nodes: [string|Node])",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/before",
          "!doc": "This is an experimental technology.\n\nThe Element.before method inserts a set of Node or DOMString objects in the children list of this ChildNode's parent, just before this ChildNode. DOMString objects are inserted as equivalent Text nodes."
        },
        "after": {
          "!type": "fn(...nodes: [string|Node])",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/after",
          "!doc": "This is an experimental technology.\n\nThe Element.after() method inserts a set of Node or DOMString objects in the children list of this ChildNode's parent, just after this ChildNode. DOMString objects are inserted as equivalent Text nodes."
        },
        "closest": {
          "!type": "fn(selectors?: string)",
          "!url": "https://developer.mozilla.org/en/docs/Web/API/Element/closest",
          "!doc": "This is an experimental technology.\n\nThe Element.closest() method returns the closest ancestor of the current element (or the current element itself) which matches the selectors given in parameter. If there isn't such an ancestor, it returns null."
        },
        "focus": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.focus",
          "!doc": "Sets focus on the specified element, if it can be focused."
        },
        "blur": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.blur",
          "!doc": "The blur method removes keyboard focus from the current element."
        },
        "scrollIntoView": {
          "!type": "fn(top: bool)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.scrollIntoView",
          "!doc": "The scrollIntoView() method scrolls the element into view."
        },
        "scrollByLines": {
          "!type": "fn(lines: number)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/window.scrollByLines",
          "!doc": "Scrolls the document by the given number of lines."
        },
        "scrollByPages": {
          "!type": "fn(pages: number)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/window.scrollByPages",
          "!doc": "Scrolls the current document by the specified number of pages."
        },
        "getElementsByClassName": {
          "!type": "fn(name: string) -> +NodeList",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.getElementsByClassName",
          "!doc": "Returns a set of elements which have all the given class names. When called on the document object, the complete document is searched, including the root node. You may also call getElementsByClassName on any element; it will return only elements which are descendants of the specified root element with the given class names."
        },
        "querySelector": {
          "!type": "fn(selectors: string) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Element.querySelector",
          "!doc": "Returns the first element that is a descendent of the element on which it is invoked that matches the specified group of selectors."
        },
        "querySelectorAll": {
          "!type": "fn(selectors: string) -> +NodeList",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Element.querySelectorAll",
          "!doc": "Returns a non-live NodeList of all elements descended from the element on which it is invoked that match the specified group of CSS selectors."
        },
        "getClientRects": {
          "!type": "fn() -> [+ClientRect]",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getClientRects",
          "!doc": "Returns a collection of rectangles that indicate the bounding rectangles for each box in a client."
        },
        "getBoundingClientRect": {
          "!type": "fn() -> +ClientRect",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getBoundingClientRect",
          "!doc": "Returns a text rectangle object that encloses a group of text rectangles."
        },
        "setAttributeNode": {
          "!type": "fn(attr: +Attr) -> +Attr",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.setAttributeNode",
          "!doc": "Adds a new Attr node to the specified element."
        },
        "removeAttributeNode": {
          "!type": "fn(attr: +Attr) -> +Attr",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.removeAttributeNode",
          "!doc": "Removes the specified attribute from the current element."
        },
        "setAttributeNodeNS": {
          "!type": "fn(attr: +Attr) -> +Attr",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.setAttributeNodeNS",
          "!doc": "Adds a new namespaced attribute node to an element."
        },
        "insertAdjacentHTML": {
          "!type": "fn(position: string, text: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.insertAdjacentHTML",
          "!doc": "Parses the specified text as HTML or XML and inserts the resulting nodes into the DOM tree at a specified position. It does not reparse the element it is being used on and thus it does not corrupt the existing elements inside the element. This, and avoiding the extra step of serialization make it much faster than direct innerHTML manipulation."
        },
        "children": {
          "!type": "+HTMLCollection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Element.children",
          "!doc": "Returns a collection of child elements of the given element."
        },
        "childElementCount": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Element.childElementCount",
          "!doc": "Returns the number of child elements of the given element."
        },
        "className": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.className",
          "!doc": "Gets and sets the value of the class attribute of the specified element."
        },
        "style": {
          "cssText": "string",
          "alignmentBaseline": "string",
          "background": "string",
          "backgroundAttachment": "string",
          "backgroundClip": "string",
          "backgroundColor": "string",
          "backgroundImage": "string",
          "backgroundOrigin": "string",
          "backgroundPosition": "string",
          "backgroundPositionX": "string",
          "backgroundPositionY": "string",
          "backgroundRepeat": "string",
          "backgroundRepeatX": "string",
          "backgroundRepeatY": "string",
          "backgroundSize": "string",
          "baselineShift": "string",
          "border": "string",
          "borderBottom": "string",
          "borderBottomColor": "string",
          "borderBottomLeftRadius": "string",
          "borderBottomRightRadius": "string",
          "borderBottomStyle": "string",
          "borderBottomWidth": "string",
          "borderCollapse": "string",
          "borderColor": "string",
          "borderImage": "string",
          "borderImageOutset": "string",
          "borderImageRepeat": "string",
          "borderImageSlice": "string",
          "borderImageSource": "string",
          "borderImageWidth": "string",
          "borderLeft": "string",
          "borderLeftColor": "string",
          "borderLeftStyle": "string",
          "borderLeftWidth": "string",
          "borderRadius": "string",
          "borderRight": "string",
          "borderRightColor": "string",
          "borderRightStyle": "string",
          "borderRightWidth": "string",
          "borderSpacing": "string",
          "borderStyle": "string",
          "borderTop": "string",
          "borderTopColor": "string",
          "borderTopLeftRadius": "string",
          "borderTopRightRadius": "string",
          "borderTopStyle": "string",
          "borderTopWidth": "string",
          "borderWidth": "string",
          "bottom": "string",
          "boxShadow": "string",
          "boxSizing": "string",
          "captionSide": "string",
          "clear": "string",
          "clip": "string",
          "clipPath": "string",
          "clipRule": "string",
          "color": "string",
          "colorInterpolation": "string",
          "colorInterpolationFilters": "string",
          "colorProfile": "string",
          "colorRendering": "string",
          "content": "string",
          "counterIncrement": "string",
          "counterReset": "string",
          "cursor": "string",
          "direction": "string",
          "display": "string",
          "dominantBaseline": "string",
          "emptyCells": "string",
          "enableBackground": "string",
          "fill": "string",
          "fillOpacity": "string",
          "fillRule": "string",
          "filter": "string",
          "float": "string",
          "floodColor": "string",
          "floodOpacity": "string",
          "font": "string",
          "fontFamily": "string",
          "fontSize": "string",
          "fontStretch": "string",
          "fontStyle": "string",
          "fontVariant": "string",
          "fontWeight": "string",
          "glyphOrientationHorizontal": "string",
          "glyphOrientationVertical": "string",
          "height": "string",
          "imageRendering": "string",
          "kerning": "string",
          "left": "string",
          "letterSpacing": "string",
          "lightingColor": "string",
          "lineHeight": "string",
          "listStyle": "string",
          "listStyleImage": "string",
          "listStylePosition": "string",
          "listStyleType": "string",
          "margin": "string",
          "marginBottom": "string",
          "marginLeft": "string",
          "marginRight": "string",
          "marginTop": "string",
          "marker": "string",
          "markerEnd": "string",
          "markerMid": "string",
          "markerStart": "string",
          "mask": "string",
          "maxHeight": "string",
          "maxWidth": "string",
          "minHeight": "string",
          "minWidth": "string",
          "opacity": "string",
          "orphans": "string",
          "outline": "string",
          "outlineColor": "string",
          "outlineOffset": "string",
          "outlineStyle": "string",
          "outlineWidth": "string",
          "overflow": "string",
          "overflowWrap": "string",
          "overflowX": "string",
          "overflowY": "string",
          "padding": "string",
          "paddingBottom": "string",
          "paddingLeft": "string",
          "paddingRight": "string",
          "paddingTop": "string",
          "page": "string",
          "pageBreakAfter": "string",
          "pageBreakBefore": "string",
          "pageBreakInside": "string",
          "pointerEvents": "string",
          "position": "string",
          "quotes": "string",
          "resize": "string",
          "right": "string",
          "shapeRendering": "string",
          "size": "string",
          "speak": "string",
          "src": "string",
          "stopColor": "string",
          "stopOpacity": "string",
          "stroke": "string",
          "strokeDasharray": "string",
          "strokeDashoffset": "string",
          "strokeLinecap": "string",
          "strokeLinejoin": "string",
          "strokeMiterlimit": "string",
          "strokeOpacity": "string",
          "strokeWidth": "string",
          "tabSize": "string",
          "tableLayout": "string",
          "textAlign": "string",
          "textAnchor": "string",
          "textDecoration": "string",
          "textIndent": "string",
          "textLineThrough": "string",
          "textLineThroughColor": "string",
          "textLineThroughMode": "string",
          "textLineThroughStyle": "string",
          "textLineThroughWidth": "string",
          "textOverflow": "string",
          "textOverline": "string",
          "textOverlineColor": "string",
          "textOverlineMode": "string",
          "textOverlineStyle": "string",
          "textOverlineWidth": "string",
          "textRendering": "string",
          "textShadow": "string",
          "textTransform": "string",
          "textUnderline": "string",
          "textUnderlineColor": "string",
          "textUnderlineMode": "string",
          "textUnderlineStyle": "string",
          "textUnderlineWidth": "string",
          "top": "string",
          "unicodeBidi": "string",
          "unicodeRange": "string",
          "vectorEffect": "string",
          "verticalAlign": "string",
          "visibility": "string",
          "whiteSpace": "string",
          "width": "string",
          "wordBreak": "string",
          "wordSpacing": "string",
          "wordWrap": "string",
          "writingMode": "string",
          "zIndex": "string",
          "zoom": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.style",
          "!doc": "Returns an object that represents the element's style attribute."
        },
        "classList": {
          "!type": "+DOMTokenList",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.classList",
          "!doc": "Returns a token list of the class attribute of the element."
        },
        "contentEditable": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Element.contentEditable",
          "!doc": "Indicates whether or not the element is editable."
        },
        "firstElementChild": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Element.firstElementChild",
          "!doc": "Returns the element's first child element or null if there are no child elements."
        },
        "lastElementChild": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Element.lastElementChild",
          "!doc": "Returns the element's last child element or null if there are no child elements."
        },
        "nextElementSibling": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Element.nextElementSibling",
          "!doc": "Returns the element immediately following the specified one in its parent's children list, or null if the specified element is the last one in the list."
        },
        "previousElementSibling": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Element.previousElementSibling",
          "!doc": "Returns the element immediately prior to the specified one in its parent's children list, or null if the specified element is the first one in the list."
        },
        "tabIndex": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.tabIndex",
          "!doc": "Gets/sets the tab order of the current element."
        },
        "title": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.title",
          "!doc": "Establishes the text to be displayed in a 'tool tip' popup when the mouse is over the displayed node."
        },
        "width": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.offsetWidth",
          "!doc": "Returns the layout width of an element."
        },
        "height": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.offsetHeight",
          "!doc": "Height of an element relative to the element's offsetParent."
        },
        "getContext": {
          "!type": "fn(id: string) -> CanvasRenderingContext2D",
          "!url": "https://developer.mozilla.org/en/docs/DOM/HTMLCanvasElement",
          "!doc": "DOM canvas elements expose the HTMLCanvasElement interface, which provides properties and methods for manipulating the layout and presentation of canvas elements. The HTMLCanvasElement interface inherits the properties and methods of the element object interface."
        },
        "supportsContext": "fn(id: string) -> bool",
        "oncopy": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.oncopy",
          "!doc": "The oncopy property returns the onCopy event handler code on the current element."
        },
        "oncut": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.oncut",
          "!doc": "The oncut property returns the onCut event handler code on the current element."
        },
        "onpaste": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onpaste",
          "!doc": "The onpaste property returns the onPaste event handler code on the current element."
        },
        "onbeforeunload": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/HTML/Element/body",
          "!doc": "The HTML <body> element represents the main content of an HTML document. There is only one <body> element in a document."
        },
        "onfocus": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onfocus",
          "!doc": "The onfocus property returns the onFocus event handler code on the current element."
        },
        "onblur": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onblur",
          "!doc": "The onblur property returns the onBlur event handler code, if any, that exists on the current element."
        },
        "onchange": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onchange",
          "!doc": "The onchange property sets and returns the onChange event handler code for the current element."
        },
        "onclick": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onclick",
          "!doc": "The onclick property returns the onClick event handler code on the current element."
        },
        "ondblclick": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.ondblclick",
          "!doc": "The ondblclick property returns the onDblClick event handler code on the current element."
        },
        "onmousedown": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onmousedown",
          "!doc": "The onmousedown property returns the onMouseDown event handler code on the current element."
        },
        "onmouseup": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onmouseup",
          "!doc": "The onmouseup property returns the onMouseUp event handler code on the current element."
        },
        "onmousewheel": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Mozilla_event_reference/wheel",
          "!doc": "The wheel event is fired when a wheel button of a pointing device (usually a mouse) is rotated. This event deprecates the legacy mousewheel event."
        },
        "onmouseover": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onmouseover",
          "!doc": "The onmouseover property returns the onMouseOver event handler code on the current element."
        },
        "onmouseout": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onmouseout",
          "!doc": "The onmouseout property returns the onMouseOut event handler code on the current element."
        },
        "onmousemove": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onmousemove",
          "!doc": "The onmousemove property returns the mousemove event handler code on the current element."
        },
        "oncontextmenu": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/window.oncontextmenu",
          "!doc": "An event handler property for right-click events on the window. Unless the default behavior is prevented, the browser context menu will activate. Note that this event will occur with any non-disabled right-click event and does not depend on an element possessing the \"contextmenu\" attribute."
        },
        "onkeydown": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onkeydown",
          "!doc": "The onkeydown property returns the onKeyDown event handler code on the current element."
        },
        "onkeyup": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onkeyup",
          "!doc": "The onkeyup property returns the onKeyUp event handler code for the current element."
        },
        "onkeypress": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onkeypress",
          "!doc": "The onkeypress property sets and returns the onKeyPress event handler code for the current element."
        },
        "onresize": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onresize",
          "!doc": "onresize returns the element's onresize event handler code. It can also be used to set the code to be executed when the resize event occurs."
        },
        "onscroll": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.onscroll",
          "!doc": "The onscroll property returns the onScroll event handler code on the current element."
        },
        "ondragstart": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DragDrop/Drag_Operations",
          "!doc": "The following describes the steps that occur during a drag and drop operation."
        },
        "ondragover": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Mozilla_event_reference/dragover",
          "!doc": "The dragover event is fired when an element or text selection is being dragged over a valid drop target (every few hundred milliseconds)."
        },
        "ondragleave": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Mozilla_event_reference/dragleave",
          "!doc": "The dragleave event is fired when a dragged element or text selection leaves a valid drop target."
        },
        "ondragenter": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Mozilla_event_reference/dragenter",
          "!doc": "The dragenter event is fired when a dragged element or text selection enters a valid drop target."
        },
        "ondragend": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Mozilla_event_reference/dragend",
          "!doc": "The dragend event is fired when a drag operation is being ended (by releasing a mouse button or hitting the escape key)."
        },
        "ondrag": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Mozilla_event_reference/drag",
          "!doc": "The drag event is fired when an element or text selection is being dragged (every few hundred milliseconds)."
        },
        "offsetTop": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.offsetTop",
          "!doc": "Returns the distance of the current element relative to the top of the offsetParent node."
        },
        "offsetLeft": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.offsetLeft",
          "!doc": "Returns the number of pixels that the upper left corner of the current element is offset to the left within the offsetParent node."
        },
        "offsetHeight": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.offsetHeight",
          "!doc": "Height of an element relative to the element's offsetParent."
        },
        "offsetWidth": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.offsetWidth",
          "!doc": "Returns the layout width of an element."
        },
        "scrollTop": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.scrollTop",
          "!doc": "Gets or sets the number of pixels that the content of an element is scrolled upward."
        },
        "scrollLeft": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.scrollLeft",
          "!doc": "Gets or sets the number of pixels that an element's content is scrolled to the left."
        },
        "scrollHeight": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.scrollHeight",
          "!doc": "Height of the scroll view of an element; it includes the element padding but not its margin."
        },
        "scrollWidth": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.scrollWidth",
          "!doc": "Read-only property that returns either the width in pixels of the content of an element or the width of the element itself, whichever is greater."
        },
        "clientTop": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.clientTop",
          "!doc": "The width of the top border of an element in pixels. It does not include the top margin or padding. clientTop is read-only."
        },
        "clientLeft": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.clientLeft",
          "!doc": "The width of the left border of an element in pixels. It includes the width of the vertical scrollbar if the text direction of the element is right-to-left and if there is an overflow causing a left vertical scrollbar to be rendered. clientLeft does not include the left margin or the left padding. clientLeft is read-only."
        },
        "clientHeight": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.clientHeight",
          "!doc": "Returns the inner height of an element in pixels, including padding but not the horizontal scrollbar height, border, or margin."
        },
        "clientWidth": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.clientWidth",
          "!doc": "The inner width of an element in pixels. It includes padding but not the vertical scrollbar (if present, if rendered), border or margin."
        },
        "innerHTML": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.innerHTML",
          "!doc": "Sets or gets the HTML syntax describing the element's descendants."
        },
        "createdCallback": {
          "!type": "fn()",
          "!url": "http://w3c.github.io/webcomponents/spec/custom/index.html#dfn-created-callback",
          "!doc": "This callback is invoked after custom element instance is created and its definition is registered. The actual timing of this callback is defined further in this specification."
        },
        "attachedCallback": {
          "!type": "fn()",
          "!url": "http://w3c.github.io/webcomponents/spec/custom/index.html#dfn-entered-view-callback",
          "!doc": "Unless specified otherwise, this callback must be enqueued whenever custom element is inserted into a document and this document has a browsing context."
        },
        "detachedCallback": {
          "!type": "fn()",
          "!url": "http://w3c.github.io/webcomponents/spec/custom/index.html#dfn-left-view-callback",
          "!doc": "Unless specified otherwise, this callback must be enqueued whenever custom element is removed from the document and this document has a browsing context."
        },
        "attributeChangedCallback": {
          "!type": "fn()",
          "!url": "http://w3c.github.io/webcomponents/spec/custom/index.html#dfn-attribute-changed-callback",
          "!doc": "Unless specified otherwise, this callback must be enqueued whenever custom element's attribute is added, changed or removed."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/Element",
      "!doc": "Represents an element in an HTML or XML document."
    },
    "Text": {
      "!type": "fn()",
      "prototype": {
        "!proto": "Node.prototype",
        "wholeText": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Text.wholeText",
          "!doc": "Returns all text of all Text nodes logically adjacent to the node.  The text is concatenated in document order.  This allows you to specify any text node and obtain all adjacent text as a single string."
        },
        "splitText": {
          "!type": "fn(offset: number) -> +Text",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Text.splitText",
          "!doc": "Breaks the Text node into two nodes at the specified offset, keeping both nodes in the tree as siblings."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/Text",
      "!doc": "In the DOM, the Text interface represents the textual content of an Element or Attr.  If an element has no markup within its content, it has a single child implementing Text that contains the element's text.  However, if the element contains markup, it is parsed into information items and Text nodes that form its children."
    },
    "Document": {
      "!type": "fn()",
      "prototype": {
        "!proto": "Node.prototype",
        "activeElement": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.activeElement",
          "!doc": "Returns the currently focused element, that is, the element that will get keystroke events if the user types any. This attribute is read only."
        },
        "compatMode": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.compatMode",
          "!doc": "Indicates whether the document is rendered in Quirks mode or Strict mode."
        },
        "designMode": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.designMode",
          "!doc": "Can be used to make any document editable, for example in a <iframe />:"
        },
        "dir": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Document.dir",
          "!doc": "This property should indicate and allow the setting of the directionality of the text of the document, whether left to right (default) or right to left."
        },
        "height": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.height",
          "!doc": "Returns the height of the <body> element of the current document."
        },
        "width": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.width",
          "!doc": "Returns the width of the <body> element of the current document in pixels."
        },
        "characterSet": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.characterSet",
          "!doc": "Returns the character encoding of the current document."
        },
        "readyState": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.readyState",
          "!doc": "Returns \"loading\" while the document is loading, \"interactive\" once it is finished parsing but still loading sub-resources, and \"complete\" once it has loaded."
        },
        "location": {
          "!type": "location",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.location",
          "!doc": "Returns a Location object, which contains information about the URL of the document and provides methods for changing that URL."
        },
        "lastModified": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.lastModified",
          "!doc": "Returns a string containing the date and time on which the current document was last modified."
        },
        "head": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.head",
          "!doc": "Returns the <head> element of the current document. If there are more than one <head> elements, the first one is returned."
        },
        "body": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.body",
          "!doc": "Returns the <body> or <frameset> node of the current document."
        },
        "cookie": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.cookie",
          "!doc": "Get and set the cookies associated with the current document."
        },
        "URL": "string",
        "domain": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.domain",
          "!doc": "Gets/sets the domain portion of the origin of the current document, as used by the same origin policy."
        },
        "referrer": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.referrer",
          "!doc": "Returns the URI of the page that linked to this page."
        },
        "title": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.title",
          "!doc": "Gets or sets the title of the document."
        },
        "defaultView": {
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.defaultView",
          "!doc": "In browsers returns the window object associated with the document or null if none available."
        },
        "documentURI": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.documentURI",
          "!doc": "Returns the document location as string. It is read-only per DOM4 specification."
        },
        "xmlStandalone": "bool",
        "xmlVersion": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.xmlVersion",
          "!doc": "Returns the version number as specified in the XML declaration (e.g., <?xml version=\"1.0\"?>) or \"1.0\" if the declaration is absent."
        },
        "xmlEncoding": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Document.xmlEncoding",
          "!doc": "Returns the encoding as determined by the XML declaration. Should be null if unspecified or unknown."
        },
        "inputEncoding": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.inputEncoding",
          "!doc": "Returns a string representing the encoding under which the document was parsed (e.g. ISO-8859-1)."
        },
        "documentElement": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.documentElement",
          "!doc": "Read-only"
        },
        "implementation": {
          "hasFeature": "fn(feature: string, version: number) -> bool",
          "createDocumentType": {
            "!type": "fn(qualifiedName: string, publicId: string, systemId: string) -> +Node",
            "!url": "https://developer.mozilla.org/en/docs/DOM/DOMImplementation.createDocumentType",
            "!doc": "Returns a DocumentType object which can either be used with DOMImplementation.createDocument upon document creation or they can be put into the document via Node.insertBefore() or Node.replaceChild(): http://www.w3.org/TR/DOM-Level-3-Cor...l#ID-B63ED1A31 (less ideal due to features not likely being as accessible: http://www.w3.org/TR/DOM-Level-3-Cor...createDocument ). In any case, entity declarations and notations will not be available: http://www.w3.org/TR/DOM-Level-3-Cor...-createDocType   "
          },
          "createHTMLDocument": {
            "!type": "fn(title: string) -> +Document",
            "!url": "https://developer.mozilla.org/en/docs/DOM/DOMImplementation.createHTMLDocument",
            "!doc": "This method (available from document.implementation) creates a new HTML document."
          },
          "createDocument": {
            "!type": "fn(namespaceURI: string, qualifiedName: string, type: +Node) -> +Document",
            "!url": "https://developer.mozilla.org/en-US/docs/DOM/DOMImplementation.createHTMLDocument",
            "!doc": "This method creates a new HTML document."
          },
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.implementation",
          "!doc": "Returns a DOMImplementation object associated with the current document."
        },
        "doctype": {
          "!type": "+Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.doctype",
          "!doc": "Returns the Document Type Declaration (DTD) associated with current document. The returned object implements the DocumentType interface. Use DOMImplementation.createDocumentType() to create a DocumentType."
        },
        "open": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.open",
          "!doc": "The document.open() method opens a document for writing."
        },
        "close": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.close",
          "!doc": "The document.close() method finishes writing to a document, opened with document.open()."
        },
        "write": {
          "!type": "fn(html: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.write",
          "!doc": "Writes a string of text to a document stream opened by document.open()."
        },
        "writeln": {
          "!type": "fn(html: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.writeln",
          "!doc": "Writes a string of text followed by a newline character to a document."
        },
        "clear": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.clear",
          "!doc": "In recent versions of Mozilla-based applications as well as in Internet Explorer and Netscape 4 this method does nothing."
        },
        "hasFocus": {
          "!type": "fn() -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.hasFocus",
          "!doc": "Returns a Boolean value indicating whether the document or any element inside the document has focus. This method can be used to determine whether the active element in a document has focus."
        },
        "createElement": {
          "!type": "fn(tagName: string) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createElement",
          "!doc": "Creates the specified element."
        },
        "createElementNS": {
          "!type": "fn(ns: string, tagName: string) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createElementNS",
          "!doc": "Creates an element with the specified namespace URI and qualified name."
        },
        "createDocumentFragment": {
          "!type": "fn() -> +DocumentFragment",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createDocumentFragment",
          "!doc": "Creates a new empty DocumentFragment."
        },
        "createTextNode": {
          "!type": "fn(content: string) -> +Text",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createTextNode",
          "!doc": "Creates a new Text node."
        },
        "createComment": {
          "!type": "fn(content: string) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createComment",
          "!doc": "Creates a new comment node, and returns it."
        },
        "createCDATASection": {
          "!type": "fn(content: string) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createCDATASection",
          "!doc": "Creates a new CDATA section node, and returns it. "
        },
        "createProcessingInstruction": {
          "!type": "fn(content: string) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createProcessingInstruction",
          "!doc": "Creates a new processing instruction node, and returns it."
        },
        "createAttribute": {
          "!type": "fn(name: string) -> +Attr",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createAttribute",
          "!doc": "Creates a new attribute node, and returns it."
        },
        "createAttributeNS": {
          "!type": "fn(ns: string, name: string) -> +Attr",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Attr",
          "!doc": "This type represents a DOM element's attribute as an object. In most DOM methods, you will probably directly retrieve the attribute as a string (e.g., Element.getAttribute(), but certain functions (e.g., Element.getAttributeNode()) or means of iterating give Attr types."
        },
        "importNode": {
          "!type": "fn(node: +Node, deep: bool) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.importNode",
          "!doc": "Creates a copy of a node from an external document that can be inserted into the current document."
        },
        "getElementById": {
          "!type": "fn(id: string) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.getElementById",
          "!doc": "Returns a reference to the element by its ID."
        },
        "getElementsByTagName": {
          "!type": "fn(tagName: string) -> +NodeList",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.getElementsByTagName",
          "!doc": "Returns a NodeList of elements with the given tag name. The complete document is searched, including the root node. The returned NodeList is live, meaning that it updates itself automatically to stay in sync with the DOM tree without having to call document.getElementsByTagName again."
        },
        "getElementsByTagNameNS": {
          "!type": "fn(ns: string, tagName: string) -> +NodeList",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.getElementsByTagNameNS",
          "!doc": "Returns a list of elements with the given tag name belonging to the given namespace. The complete document is searched, including the root node."
        },
        "createEvent": {
          "!type": "fn(type: string) -> +Event",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createEvent",
          "!doc": "Creates an event of the type specified. The returned object should be first initialized and can then be passed to element.dispatchEvent."
        },
        "createRange": {
          "!type": "fn() -> +Range",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createRange",
          "!doc": "Returns a new Range object."
        },
        "evaluate": {
          "!type": "fn(expr: ?) -> +XPathResult",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.evaluate",
          "!doc": "Returns an XPathResult based on an XPath expression and other given parameters."
        },
        "execCommand": {
          "!type": "fn(cmd: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla#Executing_Commands",
          "!doc": "Run command to manipulate the contents of an editable region."
        },
        "queryCommandEnabled": {
          "!type": "fn(cmd: string) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document",
          "!doc": "Returns true if the Midas command can be executed on the current range."
        },
        "queryCommandIndeterm": {
          "!type": "fn(cmd: string) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document",
          "!doc": "Returns true if the Midas command is in a indeterminate state on the current range."
        },
        "queryCommandState": {
          "!type": "fn(cmd: string) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document",
          "!doc": "Returns true if the Midas command has been executed on the current range."
        },
        "queryCommandSupported": {
          "!type": "fn(cmd: string) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.queryCommandSupported",
          "!doc": "Reports whether or not the specified editor query command is supported by the browser."
        },
        "queryCommandValue": {
          "!type": "fn(cmd: string) -> string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document",
          "!doc": "Returns the current value of the current range for Midas command."
        },
        "getElementsByName": {
          "!type": "fn(name: string) -> +HTMLCollection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.getElementsByName",
          "!doc": "Returns a list of elements with a given name in the HTML document."
        },
        "elementFromPoint": {
          "!type": "fn(x: number, y: number) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.elementFromPoint",
          "!doc": "Returns the element from the document whose elementFromPoint method is being called which is the topmost element which lies under the given point.  To get an element, specify the point via coordinates, in CSS pixels, relative to the upper-left-most point in the window or frame containing the document."
        },
        "getSelection": {
          "!type": "fn() -> +Selection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.getSelection",
          "!doc": "The DOM getSelection() method is available on the Window and Document interfaces."
        },
        "adoptNode": {
          "!type": "fn(node: +Node) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.adoptNode",
          "!doc": "Adopts a node from an external document. The node and its subtree is removed from the document it's in (if any), and its ownerDocument is changed to the current document. The node can then be inserted into the current document."
        },
        "createTreeWalker": {
          "!type": "fn(root: +Node, mask: number) -> ?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createTreeWalker",
          "!doc": "Returns a new TreeWalker object."
        },
        "createExpression": {
          "!type": "fn(text: string) -> ?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createExpression",
          "!doc": "This method compiles an XPathExpression which can then be used for (repeated) evaluations."
        },
        "createNSResolver": {
          "!type": "fn(node: +Node)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.createNSResolver",
          "!doc": "Creates an XPathNSResolver which resolves namespaces with respect to the definitions in scope for a specified node."
        },
        "scripts": {
          "!type": "+HTMLCollection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Document.scripts",
          "!doc": "Returns a list of the <script> elements in the document. The returned object is an HTMLCollection."
        },
        "plugins": {
          "!type": "+HTMLCollection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.plugins",
          "!doc": "Returns an HTMLCollection object containing one or more HTMLEmbedElements or null which represent the <embed> elements in the current document."
        },
        "embeds": {
          "!type": "+HTMLCollection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.embeds",
          "!doc": "Returns a list of the embedded OBJECTS within the current document."
        },
        "anchors": {
          "!type": "+HTMLCollection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.anchors",
          "!doc": "Returns a list of all of the anchors in the document."
        },
        "links": {
          "!type": "+HTMLCollection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.links",
          "!doc": "The links property returns a collection of all AREA elements and anchor elements in a document with a value for the href attribute. "
        },
        "forms": {
          "!type": "+HTMLCollection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.forms",
          "!doc": "Returns a collection (an HTMLCollection) of the form elements within the current document."
        },
        "styleSheets": {
          "!type": "+HTMLCollection",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.styleSheets",
          "!doc": "Returns a list of stylesheet objects for stylesheets explicitly linked into or embedded in a document."
        },
        "currentScript": {
          "!type": "+Node",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/document.currentScript",
          "!doc": "Returns the <script> element whose script is currently being processed."
        },
        "registerElement": {
          "!type": "fn(type: string, options?: ?)",
          "!url": "http://w3c.github.io/webcomponents/spec/custom/#extensions-to-document-interface-to-register",
          "!doc": "The registerElement method of the Document interface provides a way to register a custom element and returns its custom element constructor."
        },
        "getElementsByClassName": "Element.prototype.getElementsByClassName",
        "querySelector": "Element.prototype.querySelector",
        "querySelectorAll": "Element.prototype.querySelectorAll"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/document",
      "!doc": "Each web page loaded in the browser has its own document object. This object serves as an entry point to the web page's content (the DOM tree, including elements such as <body> and <table>) and provides functionality global to the document (such as obtaining the page's URL and creating new elements in the document)."
    },
    "document": {
      "!type": "+Document",
      "!url": "https://developer.mozilla.org/en/docs/DOM/document",
      "!doc": "Each web page loaded in the browser has its own document object. This object serves as an entry point to the web page's content (the DOM tree, including elements such as <body> and <table>) and provides functionality global to the document (such as obtaining the page's URL and creating new elements in the document)."
    },
    "XMLDocument": {
      "!type": "fn()",
      "prototype": "Document.prototype",
      "!url": "https://developer.mozilla.org/en/docs/Parsing_and_serializing_XML",
      "!doc": "The Web platform provides the following objects for parsing and serializing XML:"
    },
    "HTMLElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement"
    },
    "HTMLAnchorElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement"
    },
    "HTMLAreaElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLAreaElement"
    },
    "HTMLAudioElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLAudioElement"
    },
    "HTMLBaseElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLBaseElement"
    },
    "HTMLBodyElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLBodyElement"
    },
    "HTMLBRElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLBRElement"
    },
    "HTMLButtonElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLButtonElement"
    },
    "HTMLCanvasElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement"
    },
    "HTMLDataElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLDataElement"
    },
    "HTMLDataListElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLDataListElement"
    },
    "HTMLDivElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLDivElement"
    },
    "HTMLDListElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLDListElement"
    },
    "HTMLDocument": {
      "!type": "Document",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLDocument"
    },
    "HTMLEmbedElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLEmbedElement"
    },
    "HTMLFieldSetElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLFieldSetElement"
    },
    "HTMLFormControlsCollection": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormControlsCollection"
    },
    "HTMLFormElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement"
    },
    "HTMLHeadElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLHeadElement"
    },
    "HTMLHeadingElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLHeadingElement"
    },
    "HTMLHRElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLHRElement"
    },
    "HTMLHtmlElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLHtmlElement"
    },
    "HTMLIFrameElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLIFrameElement"
    },
    "HTMLImageElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement"
    },
    "HTMLInputElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement"
    },
    "HTMLKeygenElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLKeygenElement"
    },
    "HTMLLabelElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLLabelElement"
    },
    "HTMLLegendElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLLegendElement"
    },
    "HTMLLIElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLLIElement"
    },
    "HTMLLinkElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLLinkElement"
    },
    "HTMLMapElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLMapElement"
    },
    "HTMLMediaElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement"
    },
    "HTMLMetaElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLMetaElement"
    },
    "HTMLMeterElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLMeterElement"
    },
    "HTMLModElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLModElement"
    },
    "HTMLObjectElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLObjectElement"
    },
    "HTMLOListElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLOListElement"
    },
    "HTMLOptGroupElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptGroupElement"
    },
    "HTMLOptionElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionElement"
    },
    "HTMLOptionsCollection": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLOptionsCollection"
    },
    "HTMLOutputElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLOutputElement"
    },
    "HTMLParagraphElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLParagraphElement"
    },
    "HTMLParamElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLParamElement"
    },
    "HTMLPreElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLPreElement"
    },
    "HTMLProgressElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLProgressElement"
    },
    "HTMLQuoteElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLQuoteElement"
    },
    "HTMLScriptElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement"
    },
    "HTMLSelectElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLSelectElement"
    },
    "HTMLSourceElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLSourceElement"
    },
    "HTMLSpanElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLSpanElement"
    },
    "HTMLStyleElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLStyleElement"
    },
    "HTMLTableCaptionElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableCaptionElement"
    },
    "HTMLTableCellElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableCellElement"
    },
    "HTMLTableColElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableColElement"
    },
    "HTMLTableDataCellElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableDataCellElement"
    },
    "HTMLTableElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement"
    },
    "HTMLTableHeaderCellElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableHeaderCellElement"
    },
    "HTMLTableRowElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement"
    },
    "HTMLTableSectionElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableSectionElement"
    },
    "HTMLTextAreaElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTextAreaElement"
    },
    "HTMLTimeElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTimeElement"
    },
    "HTMLTitleElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTitleElement"
    },
    "HTMLTrackElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLTrackElement"
    },
    "HTMLUListElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLUListElement"
    },
    "HTMLUnknownElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLUnknownElement"
    },
    "HTMLVideoElement": {
      "!type": "Element",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement"
    },
    "Attr": {
      "!type": "fn()",
      "prototype": {
        "isId": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Attr",
          "!doc": "This type represents a DOM element's attribute as an object. In most DOM methods, you will probably directly retrieve the attribute as a string (e.g., Element.getAttribute(), but certain functions (e.g., Element.getAttributeNode()) or means of iterating give Attr types."
        },
        "name": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Attr",
          "!doc": "This type represents a DOM element's attribute as an object. In most DOM methods, you will probably directly retrieve the attribute as a string (e.g., Element.getAttribute(), but certain functions (e.g., Element.getAttributeNode()) or means of iterating give Attr types."
        },
        "value": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Attr",
          "!doc": "This type represents a DOM element's attribute as an object. In most DOM methods, you will probably directly retrieve the attribute as a string (e.g., Element.getAttribute(), but certain functions (e.g., Element.getAttributeNode()) or means of iterating give Attr types."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/Attr",
      "!doc": "This type represents a DOM element's attribute as an object. In most DOM methods, you will probably directly retrieve the attribute as a string (e.g., Element.getAttribute(), but certain functions (e.g., Element.getAttributeNode()) or means of iterating give Attr types."
    },
    "NodeList": {
      "!type": "fn()",
      "prototype": {
        "length": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.length",
          "!doc": "Returns the number of items in a NodeList."
        },
        "item": {
          "!type": "fn(i: number) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/NodeList.item",
          "!doc": "Returns a node from a NodeList by index."
        },
        "<i>": "+Element"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/NodeList",
      "!doc": "NodeList objects are collections of nodes returned by getElementsByTagName, getElementsByTagNameNS, Node.childNodes, querySelectorAll, getElementsByClassName, etc."
    },
    "HTMLCollection": {
      "!type": "fn()",
      "prototype": {
        "length": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/HTMLCollection",
          "!doc": "The number of items in the collection."
        },
        "item": {
          "!type": "fn(i: number) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/HTMLCollection",
          "!doc": "Returns the specific node at the given zero-based index into the list. Returns null if the index is out of range."
        },
        "namedItem": {
          "!type": "fn(name: string) -> +Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/HTMLCollection",
          "!doc": "Returns the specific node whose ID or, as a fallback, name matches the string specified by name. Matching by name is only done as a last resort, only in HTML, and only if the referenced element supports the name attribute. Returns null if no node exists by the given name."
        },
        "<i>": "+Element"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/HTMLCollection",
      "!doc": "HTMLCollection is an interface representing a generic collection of elements (in document order) and offers methods and properties for traversing the list."
    },
    "NamedNodeMap": {
      "!type": "fn()",
      "prototype": {
        "length": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/NamedNodeMap",
          "!doc": "The number of items in the map."
        },
        "getNamedItem": {
          "!type": "fn(name: string) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/NamedNodeMap",
          "!doc": "Gets a node by name."
        },
        "setNamedItem": {
          "!type": "fn(node: +Node) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/NamedNodeMap",
          "!doc": "Adds (or replaces) a node by its nodeName."
        },
        "removeNamedItem": {
          "!type": "fn(name: string) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/NamedNodeMap",
          "!doc": "Removes a node (or if an attribute, may reveal a default if present)."
        },
        "item": {
          "!type": "fn(i: number) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/NamedNodeMap",
          "!doc": "Returns the item at the given index (or null if the index is higher or equal to the number of nodes)."
        },
        "getNamedItemNS": {
          "!type": "fn(ns: string, name: string) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/NamedNodeMap",
          "!doc": "Gets a node by namespace and localName."
        },
        "setNamedItemNS": {
          "!type": "fn(node: +Node) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/NamedNodeMap",
          "!doc": "Adds (or replaces) a node by its localName and namespaceURI."
        },
        "removeNamedItemNS": {
          "!type": "fn(ns: string, name: string) -> +Node",
          "!url": "https://developer.mozilla.org/en/docs/DOM/NamedNodeMap",
          "!doc": "Removes a node (or if an attribute, may reveal a default if present)."
        },
        "<i>": "+Node"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/NamedNodeMap",
      "!doc": "A collection of nodes returned by Element.attributes (also potentially for DocumentType.entities, DocumentType.notations). NamedNodeMaps are not in any particular order (unlike NodeList), although they may be accessed by an index as in an array (they may also be accessed with the item() method). A NamedNodeMap object are live and will thus be auto-updated if changes are made to their contents internally or elsewhere."
    },
    "DocumentFragment": {
      "!type": "fn()",
      "prototype": {
        "!proto": "Node.prototype"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/document.createDocumentFragment",
      "!doc": "Creates a new empty DocumentFragment."
    },
    "DOMTokenList": {
      "!type": "fn()",
      "prototype": {
        "length": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/DOMTokenList",
          "!doc": "The amount of items in the list."
        },
        "item": {
          "!type": "fn(i: number) -> string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/DOMTokenList",
          "!doc": "Returns an item in the list by its index."
        },
        "contains": {
          "!type": "fn(token: string) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/DOMTokenList",
          "!doc": "Return true if the underlying string contains token, otherwise false."
        },
        "add": {
          "!type": "fn(token: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/DOMTokenList",
          "!doc": "Adds token to the underlying string."
        },
        "remove": {
          "!type": "fn(token: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/DOMTokenList",
          "!doc": "Remove token from the underlying string."
        },
        "toggle": {
          "!type": "fn(token: string) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/DOMTokenList",
          "!doc": "Removes token from string and returns false. If token doesn't exist it's added and the function returns true."
        },
        "<i>": "string"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/DOMTokenList",
      "!doc": "This type represents a set of space-separated tokens. Commonly returned by HTMLElement.classList, HTMLLinkElement.relList, HTMLAnchorElement.relList or HTMLAreaElement.relList. It is indexed beginning with 0 as with JavaScript arrays. DOMTokenList is always case-sensitive."
    },
    "XPathResult": {
      "!type": "fn()",
      "prototype": {
        "boolValue": "bool",
        "invalidIteratorState": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/Introduction_to_using_XPath_in_JavaScript",
          "!doc": "This document describes the interface for using XPath in JavaScript internally, in extensions, and from websites. Mozilla implements a fair amount of the DOM 3 XPath. Which means that XPath expressions can be run against both HTML and XML documents."
        },
        "numberValue": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/XPathResult",
          "!doc": "Refer to nsIDOMXPathResult for more detail."
        },
        "resultType": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/document.evaluate",
          "!doc": "Returns an XPathResult based on an XPath expression and other given parameters."
        },
        "singleNodeValue": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/Introduction_to_using_XPath_in_JavaScript",
          "!doc": "This document describes the interface for using XPath in JavaScript internally, in extensions, and from websites. Mozilla implements a fair amount of the DOM 3 XPath. Which means that XPath expressions can be run against both HTML and XML documents."
        },
        "snapshotLength": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/XPathResult",
          "!doc": "Refer to nsIDOMXPathResult for more detail."
        },
        "stringValue": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/Introduction_to_using_XPath_in_JavaScript",
          "!doc": "This document describes the interface for using XPath in JavaScript internally, in extensions, and from websites. Mozilla implements a fair amount of the DOM 3 XPath. Which means that XPath expressions can be run against both HTML and XML documents."
        },
        "iterateNext": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/Introduction_to_using_XPath_in_JavaScript",
          "!doc": "This document describes the interface for using XPath in JavaScript internally, in extensions, and from websites. Mozilla implements a fair amount of the DOM 3 XPath. Which means that XPath expressions can be run against both HTML and XML documents."
        },
        "snapshotItem": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en-US/docs/XPathResult#snapshotItem()"
        },
        "ANY_TYPE": "number",
        "NUMBER_TYPE": "number",
        "STRING_TYPE": "number",
        "BOOL_TYPE": "number",
        "UNORDERED_NODE_ITERATOR_TYPE": "number",
        "ORDERED_NODE_ITERATOR_TYPE": "number",
        "UNORDERED_NODE_SNAPSHOT_TYPE": "number",
        "ORDERED_NODE_SNAPSHOT_TYPE": "number",
        "ANY_UNORDERED_NODE_TYPE": "number",
        "FIRST_ORDERED_NODE_TYPE": "number"
      },
      "!url": "https://developer.mozilla.org/en/docs/XPathResult",
      "!doc": "Refer to nsIDOMXPathResult for more detail."
    },
    "ClientRect": {
      "!type": "fn()",
      "prototype": {
        "top": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getClientRects",
          "!doc": "Top of the box, in pixels, relative to the viewport."
        },
        "left": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getClientRects",
          "!doc": "Left of the box, in pixels, relative to the viewport."
        },
        "bottom": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getClientRects",
          "!doc": "Bottom of the box, in pixels, relative to the viewport."
        },
        "right": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/element.getClientRects",
          "!doc": "Right of the box, in pixels, relative to the viewport."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.getClientRects",
      "!doc": "Returns a collection of rectangles that indicate the bounding rectangles for each box in a client."
    },
    "DataTransfer": {
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer",
      "!doc": "This object is available from the dataTransfer property of all drag events. It cannot be created separately.",
      "prototype": {
        "dropEffect": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/dropEffect",
          "!doc": "The actual effect that will be used, and should always be one of the possible values of effectAllowed."
        },
        "effectAllowed": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/effectAllowed",
          "!doc": "Specifies the effects that are allowed for this drag."
        },
        "files": {
          "!type": "+FileList",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/files",
          "!doc": "Contains a list of all the local files available on the data transfer."
        },
        "items": {
          "!type": "[?]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/items",
          "!doc": "The read-only DataTransfer property items property is a list of the data transfer items in a drag operation."
        },
        "types": {
          "!type": "[string]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/types",
          "!doc": "Holds a list of the format types of the data that is stored for the first item, in the same order the data was added. An empty list will be returned if no data was added."
        },
        "clearData": {
          "!type": "fn(type?: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/clearData",
          "!doc": "Remove the data associated with a given type."
        },
        "getData": {
          "!type": "fn(type: string) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/getData",
          "!doc": "Retrieves the data for a given type, or an empty string if data for that type does not exist or the data transfer contains no data."
        },
        "setData": {
          "!type": "fn(type: string, data: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/setData",
          "!doc": "Set the data for a given type."
        },
        "setDragImage": {
          "!type": "fn(image: +Element)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/setDragImage",
          "!doc": "Set the image to be used for dragging if a custom one is desired."
        }
      }
    },
    "Event": {
      "!type": "fn()",
      "prototype": {
        "stopPropagation": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.stopPropagation",
          "!doc": "Prevents further propagation of the current event."
        },
        "preventDefault": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.preventDefault",
          "!doc": "Cancels the event if it is cancelable, without stopping further propagation of the event."
        },
        "initEvent": {
          "!type": "fn(type: string, bubbles: bool, cancelable: bool)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.initEvent",
          "!doc": "The initEvent method is used to initialize the value of an event created using document.createEvent."
        },
        "stopImmediatePropagation": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.stopImmediatePropagation",
          "!doc": "Prevents other listeners of the same event to be called."
        },
        "type": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/event.type",
          "!doc": "Returns a string containing the type of event."
        },
        "NONE": "number",
        "CAPTURING_PHASE": "number",
        "AT_TARGET": "number",
        "BUBBLING_PHASE": "number",
        "MOUSEDOWN": "number",
        "MOUSEUP": "number",
        "MOUSEOVER": "number",
        "MOUSEOUT": "number",
        "MOUSEMOVE": "number",
        "MOUSEDRAG": "number",
        "CLICK": "number",
        "DBLCLICK": "number",
        "KEYDOWN": "number",
        "KEYUP": "number",
        "KEYPRESS": "number",
        "DRAGDROP": "number",
        "FOCUS": "number",
        "BLUR": "number",
        "SELECT": "number",
        "CHANGE": "number",
        "target": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/EventTarget",
          "!doc": "An EventTarget is a DOM interface implemented by objects that can receive DOM events and have listeners for them. The most common EventTargets are DOM elements, although other objects can be EventTargets too, for example document, window, XMLHttpRequest, and others."
        },
        "relatedTarget": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.relatedTarget",
          "!doc": "Identifies a secondary target for the event."
        },
        "pageX": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.pageX",
          "!doc": "Returns the horizontal coordinate of the event relative to whole document."
        },
        "pageY": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.pageY",
          "!doc": "Returns the vertical coordinate of the event relative to the whole document."
        },
        "clientX": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.clientX",
          "!doc": "Returns the horizontal coordinate within the application's client area at which the event occurred (as opposed to the coordinates within the page). For example, clicking in the top-left corner of the client area will always result in a mouse event with a clientX value of 0, regardless of whether the page is scrolled horizontally."
        },
        "clientY": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.clientY",
          "!doc": "Returns the vertical coordinate within the application's client area at which the event occurred (as opposed to the coordinates within the page). For example, clicking in the top-left corner of the client area will always result in a mouse event with a clientY value of 0, regardless of whether the page is scrolled vertically."
        },
        "keyCode": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.keyCode",
          "!doc": "Returns the Unicode value of a non-character key in a keypress event or any key in any other type of keyboard event."
        },
        "charCode": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.charCode",
          "!doc": "Returns the Unicode value of a character key pressed during a keypress event."
        },
        "which": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.which",
          "!doc": "Returns the numeric keyCode of the key pressed, or the character code (charCode) for an alphanumeric key pressed."
        },
        "button": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.button",
          "!doc": "Indicates which mouse button caused the event."
        },
        "shiftKey": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.shiftKey",
          "!doc": "Indicates whether the SHIFT key was pressed when the event fired."
        },
        "ctrlKey": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.ctrlKey",
          "!doc": "Indicates whether the CTRL key was pressed when the event fired."
        },
        "altKey": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.altKey",
          "!doc": "Indicates whether the ALT key was pressed when the event fired."
        },
        "metaKey": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.metaKey",
          "!doc": "Indicates whether the META key was pressed when the event fired."
        },
        "returnValue": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/window.onbeforeunload",
          "!doc": "An event that fires when a window is about to unload its resources. The document is still visible and the event is still cancelable."
        },
        "cancelBubble": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/event.cancelBubble",
          "!doc": "bool is the boolean value of true or false."
        },
        "dataTransfer": "+DataTransfer"
      }
    },
    "TouchEvent": {
      "!type": "fn()",
      "prototype": "Event.prototype",
      "!url": "https://developer.mozilla.org/en/docs/DOM/Touch_events",
      "!doc": "In order to provide quality support for touch-based user interfaces, touch events offer the ability to interpret finger activity on touch screens or trackpads."
    },
    "WheelEvent": {
      "!type": "fn()",
      "prototype": "Event.prototype",
      "!url": "https://developer.mozilla.org/en/docs/DOM/WheelEvent",
      "!doc": "The DOM WheelEvent represents events that occur due to the user moving a mouse wheel or similar input device."
    },
    "MouseEvent": {
      "!type": "fn()",
      "prototype": "Event.prototype",
      "!url": "https://developer.mozilla.org/en/docs/DOM/MouseEvent",
      "!doc": "The DOM MouseEvent represents events that occur due to the user interacting with a pointing device (such as a mouse). It's represented by the nsINSDOMMouseEvent interface, which extends the nsIDOMMouseEvent interface."
    },
    "KeyboardEvent": {
      "!type": "fn()",
      "prototype": "Event.prototype",
      "!url": "https://developer.mozilla.org/en/docs/DOM/KeyboardEvent",
      "!doc": "KeyboardEvent objects describe a user interaction with the keyboard. Each event describes a key; the event type (keydown, keypress, or keyup) identifies what kind of activity was performed."
    },
    "HashChangeEvent": {
      "!type": "fn()",
      "prototype": "Event.prototype",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onhashchange",
      "!doc": "The hashchange event fires when a window's hash changes."
    },
    "ErrorEvent": {
      "!type": "fn()",
      "prototype": "Event.prototype",
      "!url": "https://developer.mozilla.org/en/docs/DOM/DOM_event_reference/error",
      "!doc": "The error event is fired whenever a resource fails to load."
    },
    "CustomEvent": {
      "!type": "fn()",
      "prototype": "Event.prototype",
      "!url": "https://developer.mozilla.org/en/docs/DOM/Event/CustomEvent",
      "!doc": "The DOM CustomEvent are events initialized by an application for any purpose."
    },
    "BeforeLoadEvent": {
      "!type": "fn()",
      "prototype": "Event.prototype",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window",
      "!doc": "This section provides a brief reference for all of the methods, properties, and events available through the DOM window object. The window object implements the Window interface, which in turn inherits from the AbstractView interface. Some additional global functions, namespaces objects, and constructors, not typically associated with the window, but available on it, are listed in the JavaScript Reference."
    },
    "WebSocket": {
      "!type": "fn(url: string)",
      "prototype": {
        "close": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/WebSockets_reference/CloseEvent",
          "!doc": "A CloseEvent is sent to clients using WebSockets when the connection is closed. This is delivered to the listener indicated by the WebSocket object's onclose attribute."
        },
        "send": {
          "!type": "fn(data: string)",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/WebSockets_reference/WebSocket",
          "!doc": "The WebSocket object provides the API for creating and managing a WebSocket connection to a server, as well as for sending and receiving data on the connection."
        },
        "binaryType": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/WebSockets_reference/WebSocket",
          "!doc": "The WebSocket object provides the API for creating and managing a WebSocket connection to a server, as well as for sending and receiving data on the connection."
        },
        "bufferedAmount": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/Writing_WebSocket_client_applications",
          "!doc": "WebSockets is a technology that makes it possible to open an interactive communication session between the user's browser and a server. Using a WebSocket connection, Web applications can perform real-time communication instead of having to poll for changes back and forth."
        },
        "extensions": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/WebSockets_reference/WebSocket",
          "!doc": "The WebSocket object provides the API for creating and managing a WebSocket connection to a server, as well as for sending and receiving data on the connection."
        },
        "onclose": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/WebSockets_reference/CloseEvent",
          "!doc": "A CloseEvent is sent to clients using WebSockets when the connection is closed. This is delivered to the listener indicated by the WebSocket object's onclose attribute."
        },
        "onerror": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/Writing_WebSocket_client_applications",
          "!doc": "WebSockets is a technology that makes it possible to open an interactive communication session between the user's browser and a server. Using a WebSocket connection, Web applications can perform real-time communication instead of having to poll for changes back and forth."
        },
        "onmessage": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/WebSockets_reference/WebSocket",
          "!doc": "The WebSocket object provides the API for creating and managing a WebSocket connection to a server, as well as for sending and receiving data on the connection."
        },
        "onopen": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/WebSockets_reference/WebSocket",
          "!doc": "The WebSocket object provides the API for creating and managing a WebSocket connection to a server, as well as for sending and receiving data on the connection."
        },
        "protocol": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets",
          "!doc": "WebSockets is an advanced technology that makes it possible to open an interactive communication session between the user's browser and a server. With this API, you can send messages to a server and receive event-driven responses without having to poll the server for a reply."
        },
        "url": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/WebSockets/Writing_WebSocket_client_applications",
          "!doc": "WebSockets is a technology that makes it possible to open an interactive communication session between the user's browser and a server. Using a WebSocket connection, Web applications can perform real-time communication instead of having to poll for changes back and forth."
        },
        "CONNECTING": "number",
        "OPEN": "number",
        "CLOSING": "number",
        "CLOSED": "number"
      },
      "!url": "https://developer.mozilla.org/en/docs/WebSockets",
      "!doc": "WebSockets is an advanced technology that makes it possible to open an interactive communication session between the user's browser and a server. With this API, you can send messages to a server and receive event-driven responses without having to poll the server for a reply."
    },
    "Worker": {
      "!type": "fn(scriptURL: string)",
      "prototype": {
        "postMessage": {
          "!type": "fn(message: ?)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Worker",
          "!doc": "Sends a message to the worker's inner scope. This accepts a single parameter, which is the data to send to the worker. The data may be any value or JavaScript object handled by the structured clone algorithm, which includes cyclical references."
        },
        "terminate": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Worker",
          "!doc": "Immediately terminates the worker. This does not offer the worker an opportunity to finish its operations; it is simply stopped at once."
        },
        "onmessage": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Worker",
          "!doc": "An event listener that is called whenever a MessageEvent with type message bubbles through the worker. The message is stored in the event's data member."
        },
        "onerror": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Worker",
          "!doc": "An event listener that is called whenever an ErrorEvent with type error bubbles through the worker."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/Worker",
      "!doc": "Workers are background tasks that can be easily created and can send messages back to their creators. Creating a worker is as simple as calling the Worker() constructor, specifying a script to be run in the worker thread."
    },
    "Storage": {
      "length": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Storage/length",
        "!doc": "The length read-only property of the Storage interface returns an integer representing the number of data items stored in the Storage object."
      },
      "setItem": {
        "!type": "fn(name: string, value: string)",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem",
        "!doc": "The setItem() method of the Storage interface, when passed a key name and value, will add that key to the storage, or update that key's value if it already exists."
      },
      "getItem": {
        "!type": "fn(name: string) -> string",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Storage/getItem",
        "!doc": "The getItem() method of the Storage interface, when passed a key name, will return that key's value."
      },
      "key": {
        "!type": "fn(index: number) -> string",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Storage/key",
        "!doc": "The key() method of the Storage interface, when passed a number n, returns the name of the nth key in the storage. The order of keys is user-agent defined, so you should not rely on it."
      },
      "removeItem": {
        "!type": "fn(key: string)",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Storage/removeItem",
        "!doc": "The removeItem() method of the Storage interface, when passed a key name, will remove that key from the storage."
      },
      "clear": {
        "!type": "fn()",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Storage/clear",
        "!doc": "The clear() method of the Storage interface, when invoked, will empty all keys out of the storage"
      }
    },
    "localStorage": {
      "!type": "Storage",
      "!url": "https://developer.mozilla.org/en/docs/Web/API/Window/localStorage",
      "!doc": "The localStorage property allows you to access a local Storage object. localStorage is similar to sessionStorage. The only difference is that, while data stored in localStorage has no expiration time, data stored in sessionStorage gets cleared when the browsing session ends - that is, when the browser is closed.\n\nIt should be noted that data stored in either localStorage or sessionStorage is specific to the protocol of the page."
    },
    "sessionStorage": {
      "!type": "Storage",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage",
      "!doc": "The sessionStorage property allows you to access a session Storage object for the current origin. sessionStorage is similar to Window.localStorage, the only difference is while data stored in localStorage has no expiration set, data stored in sessionStorage gets cleared when the page session ends. A page session lasts for as long as the browser is open and survives over page reloads and restores. Opening a page in a new tab or window will cause a new session to be initiated, which differs from how session cookies work.\n\nIt should be noted that data stored in either sessionStorage or localStorage is specific to the protocol of the page."
    },
    "FileList": {
      "!type": "fn()",
      "prototype": {
        "length": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileList",
          "!doc": "A read-only value indicating the number of files in the list."
        },
        "item": {
          "!type": "fn(i: number) -> +File",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileList",
          "!doc": "Returns a File object representing the file at the specified index in the file list."
        },
        "<i>": "+File"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/FileList",
      "!doc": "An object of this type is returned by the files property of the HTML input element; this lets you access the list of files selected with the <input type=\"file\"> element. It's also used for a list of files dropped into web content when using the drag and drop API."
    },
    "File": {
      "!type": "fn(bits: []|string|ArrayBuffer|Blob, name: string, options?: ?)",
      "prototype": {
        "!proto": "Blob.prototype",
        "lastModified": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/File/lastModified",
          "!doc": "Returns the last modified time of the file, in millisecond since the UNIX epoch (January 1st, 1970 at Midnight)."
        },
        "name": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/File.name",
          "!doc": "Returns the name of the file. For security reasons, the path is excluded from this property."
        },
        "size": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/File.fileSize",
          "!doc": "Returns the size of a file in bytes."
        },
        "type": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/File/type",
          "!doc": "Returns the MIME type of the file."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/File",
      "!doc": "The File object provides information about -- and access to the contents of -- files. These are generally retrieved from a FileList object returned as a result of a user selecting files using the input element, or from a drag and drop operation's DataTransfer object."
    },
    "Blob": {
      "!type": "fn(parts: [?], options?: ?)",
      "prototype": {
        "size": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Blob/size",
          "!doc": "The size, in bytes, of the data contained in the Blob object. Read only."
        },
        "type": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Blob/type",
          "!doc": "An ASCII-encoded string, in all lower case, indicating the MIME type of the data contained in the Blob. If the type is unknown, this string is empty. Read only."
        },
        "slice": {
          "!type": "fn(start: number, end?: number, type?: string) -> +Blob",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Blob",
          "!doc": "Returns a new Blob object containing the data in the specified range of bytes of the source Blob."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/Blob",
      "!doc": "A Blob object represents a file-like object of immutable, raw data. Blobs represent data that isn't necessarily in a JavaScript-native format. The File interface is based on Blob, inheriting blob functionality and expanding it to support files on the user's system."
    },
    "FileReader": {
      "!type": "fn()",
      "prototype": {
        "abort": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Aborts the read operation. Upon return, the readyState will be DONE."
        },
        "readAsArrayBuffer": {
          "!type": "fn(blob: +Blob)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Starts reading the contents of the specified Blob, producing an ArrayBuffer."
        },
        "readAsBinaryString": {
          "!type": "fn(blob: +Blob)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Starts reading the contents of the specified Blob, producing raw binary data."
        },
        "readAsDataURL": {
          "!type": "fn(blob: +Blob)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Starts reading the contents of the specified Blob, producing a data: url."
        },
        "readAsText": {
          "!type": "fn(blob: +Blob, encoding?: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Starts reading the contents of the specified Blob, producing a string."
        },
        "EMPTY": "number",
        "LOADING": "number",
        "DONE": "number",
        "error": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "The error that occurred while reading the file. Read only."
        },
        "readyState": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Indicates the state of the FileReader. This will be one of the State constants. Read only."
        },
        "result": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "The file's contents. This property is only valid after the read operation is complete, and the format of the data depends on which of the methods was used to initiate the read operation. Read only."
        },
        "onabort": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Called when the read operation is aborted."
        },
        "onerror": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Called when an error occurs."
        },
        "onload": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Called when the read operation is successfully completed."
        },
        "onloadend": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Called when the read is completed, whether successful or not. This is called after either onload or onerror."
        },
        "onloadstart": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Called when reading the data is about to begin."
        },
        "onprogress": {
          "!type": "?",
          "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
          "!doc": "Called periodically while the data is being read."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/FileReader",
      "!doc": "The FileReader object lets web applications asynchronously read the contents of files (or raw data buffers) stored on the user's computer, using File or Blob objects to specify the file or data to read. File objects may be obtained from a FileList object returned as a result of a user selecting files using the <input> element, from a drag and drop operation's DataTransfer object, or from the mozGetAsFile() API on an HTMLCanvasElement."
    },
    "URL": {
      "!type": "fn(url: string, base?: string)",
      "prototype": {
        "hash": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/hash",
          "!doc": "Is a DOMString containing a '#' followed by the fragment identifier of the URL."
        },
        "host": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/host",
          "!doc": "Is a DOMString containing the domain (that is the hostname) followed by (if a port was specified) a ':' and the port of the URL."
        },
        "hostname": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/hostname",
          "!doc": "Is a DOMString containing the domain of the URL."
        },
        "href": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/href",
          "!doc": "Is a DOMString containing the whole URL."
        },
        "origin": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/origin",
          "!doc": "Returns a DOMString containing the origin of the URL, that is its scheme, its domain and its port."
        },
        "password": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/password",
          "!doc": "Is a DOMString containing the password specified before the domain name."
        },
        "pathname": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/pathname",
          "!doc": "Is a DOMString containing an initial '/' followed by the path of the URL."
        },
        "port": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/port",
          "!doc": "Is a DOMString containing the port number of the URL."
        },
        "protocol": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/protocol",
          "!doc": "Is a DOMString containing the protocol scheme of the URL, including the final ':'."
        },
        "search": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/search",
          "!doc": "Is a DOMString containing a '?' followed by the parameters of the URL."
        },
        "searchParams": {
          "!type": "+URLSearchParams",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/searchParams",
          "!doc": "Returns a URLSearchParams object allowing to access the GET query arguments contained in the URL."
        },
        "username": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL/username",
          "!doc": "Is a DOMString containing the username specified before the domain name."
        }
      },
      "createObjectURL": {
        "!type": "fn(blob: +Blob) -> string",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL.createObjectURL",
        "!doc": "The URL.createObjectURL() static method creates a DOMString containing an URL representing the object given in parameter."

      },
      "revokeObjectURL": {
        "!type": "fn(objectURL: string)",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL.revokeObjectURL",
        "!doc": "The URL.revokeObjectURL() static method releases an existing object URL which was previously created by calling window.URL.createObjectURL()."
      },
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URL",
      "!doc": "The URL interface represents an object providing static methods used for creating object URLs."
    },
    "URLSearchParams": {
      "!type": "fn(init?: string)",
      "prototype": {
        "append": {
          "!type": "fn(name: string, value: ?)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/append",
          "!doc": "Appends a specified key/value pair as a new search parameter."
        },
        "delete": {
          "!type": "fn(name: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/delete",
          "!doc": "Deletes the given search parameter, and its associated value, from the list of all search parameters."
        },
        "entries": {
          "!type": "fn() -> +iter[:t=[string]]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/entries",
          "!doc": "Returns an iterator allowing to go through all key/value pairs contained in this object."
        },
        "get": {
          "!type": "fn(name: string) -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/get",
          "!doc": "Returns the first value associated to the given search parameter."
        },
        "getAll": {
          "!type": "fn(name: string) -> [string]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/getAll",
          "!doc": "Returns all the values associated with a given search parameter."
        },
        "has": {
          "!type": "fn(name: string) -> bool",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/has",
          "!doc": "Returns a Boolean indicating if such a search parameter exists."
        },
        "keys": {
          "!type": "fn() -> +iter[:t=string]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/keys",
          "!doc": "Returns an iterator allowing to go through all keys of the key/value pairs contained in this object."
        },
        "set": {
          "!type": "fn(name: string, value: ?)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/set",
          "!doc": "Sets the value associated to a given search parameter to the given value. If there were several values, delete the others."
        },
        "sort": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/sort",
          "!doc": "Sorts all key/value pairs, if any, by their keys."
        },
        "toString": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/toString",
          "!doc": "Returns a string containing a query string suitable for use in a URL."
        },
        "values": {
          "!type": "fn() -> +iter[:t=?]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/values",
          "!doc": "Returns an iterator allowing to go through all values of the key/value pairs contained in this object."
        }
      },
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams",
      "!doc": "The URLSearchParams interface defines utility methods to work with the query string of a URL."
    },
    "Range": {
      "!type": "fn()",
      "prototype": {
        "collapsed": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.collapsed",
          "!doc": "Returns a boolean indicating whether the range's start and end points are at the same position."
        },
        "commonAncestorContainer": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.commonAncestorContainer",
          "!doc": "Returns the deepest Node that contains the  startContainer and  endContainer Nodes."
        },
        "endContainer": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.endContainer",
          "!doc": "Returns the Node within which the Range ends."
        },
        "endOffset": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.endOffset",
          "!doc": "Returns a number representing where in the  endContainer the Range ends."
        },
        "startContainer": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.startContainer",
          "!doc": "Returns the Node within which the Range starts."
        },
        "startOffset": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.startOffset",
          "!doc": "Returns a number representing where in the startContainer the Range starts."
        },
        "setStart": {
          "!type": "fn(node: +Element, offset: number)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.setStart",
          "!doc": "Sets the start position of a Range."
        },
        "setEnd": {
          "!type": "fn(node: +Element, offset: number)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.setEnd",
          "!doc": "Sets the end position of a Range."
        },
        "setStartBefore": {
          "!type": "fn(node: +Element)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.setStartBefore",
          "!doc": "Sets the start position of a Range relative to another Node."
        },
        "setStartAfter": {
          "!type": "fn(node: +Element)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.setStartAfter",
          "!doc": "Sets the start position of a Range relative to a Node."
        },
        "setEndBefore": {
          "!type": "fn(node: +Element)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.setEndBefore",
          "!doc": "Sets the end position of a Range relative to another Node."
        },
        "setEndAfter": {
          "!type": "fn(node: +Element)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.setEndAfter",
          "!doc": "Sets the end position of a Range relative to another Node."
        },
        "selectNode": {
          "!type": "fn(node: +Element)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.selectNode",
          "!doc": "Sets the Range to contain the Node and its contents."
        },
        "selectNodeContents": {
          "!type": "fn(node: +Element)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.selectNodeContents",
          "!doc": "Sets the Range to contain the contents of a Node."
        },
        "collapse": {
          "!type": "fn(toStart: bool)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.collapse",
          "!doc": "Collapses the Range to one of its boundary points."
        },
        "cloneContents": {
          "!type": "fn() -> +DocumentFragment",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.cloneContents",
          "!doc": "Returns a DocumentFragment copying the Nodes of a Range."
        },
        "deleteContents": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.deleteContents",
          "!doc": "Removes the contents of a Range from the Document."
        },
        "extractContents": {
          "!type": "fn() -> +DocumentFragment",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.extractContents",
          "!doc": "Moves contents of a Range from the document tree into a DocumentFragment."
        },
        "insertNode": {
          "!type": "fn(node: +Element)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.insertNode",
          "!doc": "Insert a node at the start of a Range."
        },
        "surroundContents": {
          "!type": "fn(node: +Element)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.surroundContents",
          "!doc": "Moves content of a Range into a new node, placing the new node at the start of the specified range."
        },
        "compareBoundaryPoints": {
          "!type": "fn(how: number, other: +Range) -> number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.compareBoundaryPoints",
          "!doc": "Compares the boundary points of two Ranges."
        },
        "cloneRange": {
          "!type": "fn() -> +Range",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.cloneRange",
          "!doc": "Returns a Range object with boundary points identical to the cloned Range."
        },
        "detach": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/range.detach",
          "!doc": "Releases a Range from use to improve performance. This lets the browser choose to release resources associated with this Range. Subsequent attempts to use the detached range will result in a DOMException being thrown with an error code of INVALID_STATE_ERR."
        },
        "END_TO_END": "number",
        "END_TO_START": "number",
        "START_TO_END": "number",
        "START_TO_START": "number"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/range.detach",
      "!doc": "Releases a Range from use to improve performance. This lets the browser choose to release resources associated with this Range. Subsequent attempts to use the detached range will result in a DOMException being thrown with an error code of INVALID_STATE_ERR."
    },
    "XMLHttpRequest": {
      "!type": "fn()",
      "prototype": {
        "abort": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "Aborts the request if it has already been sent."
        },
        "getAllResponseHeaders": {
          "!type": "fn() -> string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "Returns all the response headers as a string, or null if no response has been received. Note: For multipart requests, this returns the headers from the current part of the request, not from the original channel."
        },
        "getResponseHeader": {
          "!type": "fn(header: string) -> string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "Returns the string containing the text of the specified header, or null if either the response has not yet been received or the header doesn't exist in the response."
        },
        "open": {
          "!type": "fn(method: string, url: string, async?: bool, user?: string, password?: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "Initializes a request."
        },
        "overrideMimeType": {
          "!type": "fn(type: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "Overrides the MIME type returned by the server."
        },
        "send": {
          "!type": "fn(data?: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "Sends the request. If the request is asynchronous (which is the default), this method returns as soon as the request is sent. If the request is synchronous, this method doesn't return until the response has arrived."
        },
        "setRequestHeader": {
          "!type": "fn(header: string, value: string)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "Sets the value of an HTTP request header.You must call setRequestHeader() after open(), but before send()."
        },
        "onabort": {
          "!type": "fn()",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequestEventTarget/onabort",
          "!doc": "The XMLHttpRequestEventTarget.onabort is the function called when an XMLHttpRequest transaction is aborted, such as when the XMLHttpRequest.abort() function is called."
        },
        "onerror": {
          "!type": "fn()",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequestEventTarget/onerror",
          "!doc": "The XMLHttpRequestEventTarget.onerror is the function called when an XMLHttpRequest transaction fails due to an error."
        },
        "onload": {
          "!type": "fn()",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequestEventTarget/onload",
          "!doc": "The XMLHttpRequestEventTarget.onload is the function called when an XMLHttpRequest transaction completes successfully."
        },
        "onloadstart": {
          "!type": "fn()",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequestEventTarget/onloadstart",
          "!doc": "The XMLHttpRequestEventTarget.onloadstart is the function called when an XMLHttpRequest transaction starts transferring data."
        },
        "onloadend": {
          "!type": "fn()",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequestEventTarget/onloadend",
          "!doc": "The XMLHttpRequestEventTarget.onloadend is the function called when an XMLHttpRequest transaction completes transferring data."
        },
        "onprogress": {
          "!type": "fn()",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequestEventTarget/onprogress",
          "!doc": "The XMLHttpRequestEventTarget.onprogress is the function called periodically with information when an XMLHttpRequest before success completely."
        },
        "ontimeout": {
          "!type": "fn()",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequestEventTarget/ontimeout",
          "!doc": "The XMLHttpRequestEventTarget.ontimeout is the function called when the XMLHttpRequest times out."
        },
        "addEventListener": {
          "!type": "fn(type: string, listener: fn(), options?: ?, useCapture?: bool)",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener",
          "!doc": "The EventTarget.addEventListener() method registers the specified listener on the EventTarget it's called on. The event target may be an Element in a document, the Document itself, a Window, or any other object that supports events (such as XMLHttpRequest)."
        },
        "removeEventListener": {
          "!type": "fn(type: string, listener: fn(), options?: ?, useCapture?: bool)",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener",
          "!doc": "Removes the event listener previously registered with EventTarget.addEventListener()."
        },
        "dispatchEvent": {
          "!type": "fn(event: ?)",
          "!url" : "https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent",
          "!doc": "Dispatches an Event at the specified EventTarget, invoking the affected EventListeners in the appropriate order. The normal event processing rules (including the capturing and optional bubbling phase) apply to events dispatched manually with dispatchEvent()."
        },
        "onreadystatechange": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "A JavaScript function object that is called whenever the readyState attribute changes."
        },
        "readyState": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "The state of the request. (0=unsent, 1=opened, 2=headers_received, 3=loading, 4=done)"
        },
        "response": {
          "!type": "+Document",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "The response entity body according to responseType, as an ArrayBuffer, Blob, Document, JavaScript object (for \"json\"), or string. This is null if the request is not complete or was not successful."
        },
        "responseText": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "The response to the request as text, or null if the request was unsuccessful or has not yet been sent."
        },
        "responseType": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "Can be set to change the response type."
        },
        "responseXML": {
          "!type": "+Document",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "The response to the request as a DOM Document object, or null if the request was unsuccessful, has not yet been sent, or cannot be parsed as XML or HTML."
        },
        "status": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "The status of the response to the request. This is the HTTP result code"
        },
        "statusText": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
          "!doc": "The response string returned by the HTTP server. Unlike status, this includes the entire text of the response message (\"200 OK\", for example)."
        },
        "timeout": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests",
          "!doc": "The number of milliseconds a request can take before automatically being terminated. A value of 0 (which is the default) means there is no timeout."
        },
        "UNSENT": "number",
        "OPENED": "number",
        "HEADERS_RECEIVED": "number",
        "LOADING": "number",
        "DONE": "number"
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/XMLHttpRequest",
      "!doc": "XMLHttpRequest is a JavaScript object that was designed by Microsoft and adopted by Mozilla, Apple, and Google. It's now being standardized in the W3C. It provides an easy way to retrieve data at a URL. Despite its name, XMLHttpRequest can be used to retrieve any type of data, not just XML, and it supports protocols other than HTTP (including file and ftp)."
    },
    "DOMParser": {
      "!type": "fn()",
      "prototype": {
        "parseFromString": {
          "!type": "fn(data: string, mime: string) -> +Document",
          "!url": "https://developer.mozilla.org/en/docs/DOM/DOMParser",
          "!doc": "DOMParser can parse XML or HTML source stored in a string into a DOM Document. DOMParser is specified in DOM Parsing and Serialization."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/DOMParser",
      "!doc": "DOMParser can parse XML or HTML source stored in a string into a DOM Document. DOMParser is specified in DOM Parsing and Serialization."
    },
    "FormData": {
      "!type": "fn()",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData",
      "prototype": {
        "append": {
          "!type": "fn(name: string, value: string|+Blob, filename?: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData/append",
          "!doc": "Appends a new value onto an existing key inside a FormData object, or adds the key if it does not already exist."
        },
        "delete": {
          "!type": "fn(name: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData/delete",
          "!doc": "Deletes a key/value pair from a FormData object."
        },
        "entries": {
          "!type": "fn() -> +iter[:t=[number, string|+Blob]]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData/entries",
          "!doc": "Returns an iterator allowing to go through all key/value pairs contained in this object."
        },
        "get": {
          "!type": "fn(name: string) -> string|+Blob",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData/get",
          "!doc": "Returns the first value associated with a given key from within a FormData object."
        },
        "getAll": {
          "!type": "fn(name: string) -> [string|+Blob]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData/getAll",
          "!doc": "Returns an array of all the values associated with a given key from within a FormData."
        },
        "has": {
          "!type": "fn(name: string) -> bool",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData/has",
          "!doc": "Returns a boolean stating whether a FormData object contains a certain key/value pair."
        },
        "set": {
          "!type": "fn(name: string, value: string|+Blob, filename?: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData/set",
          "!doc": "Sets a new value for an existing key inside a FormData object, or adds the key/value if it does not already exist."
        },
        "keys": {
          "!type": "fn() -> +iter[:t=number]",
          "!doc": "Returns an iterator allowing to go through all keys of the key/value pairs contained in this object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData/keys"
        },
        "values": {
          "!type": "fn() -> +iter[:t=string|blob]",
          "!doc": "Returns an iterator allowing to go through all values of the key/value pairs contained in this object.",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/FormData/values"
        }
      }
    },
    "Selection": {
      "!type": "fn()",
      "prototype": {
        "anchorNode": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/anchorNode",
          "!doc": "Returns the node in which the selection begins."
        },
        "anchorOffset": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/anchorOffset",
          "!doc": "Returns the number of characters that the selection's anchor is offset within the anchorNode."
        },
        "focusNode": {
          "!type": "+Element",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/focusNode",
          "!doc": "Returns the node in which the selection ends."
        },
        "focusOffset": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/focusOffset",
          "!doc": "Returns the number of characters that the selection's focus is offset within the focusNode. "
        },
        "isCollapsed": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/isCollapsed",
          "!doc": "Returns a boolean indicating whether the selection's start and end points are at the same position."
        },
        "rangeCount": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/rangeCount",
          "!doc": "Returns the number of ranges in the selection."
        },
        "getRangeAt": {
          "!type": "fn(i: number) -> +Range",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/getRangeAt",
          "!doc": "Returns a range object representing one of the ranges currently selected."
        },
        "collapse": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/collapse",
          "!doc": "Collapses the current selection to a single point. The document is not modified. If the content is focused and editable, the caret will blink there."
        },
        "extend": {
          "!type": "fn(node: +Element, offset: number)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/extend",
          "!doc": "Moves the focus of the selection to a specified point. The anchor of the selection does not move. The selection will be from the anchor to the new focus regardless of direction."
        },
        "collapseToStart": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/collapseToStart",
          "!doc": "Collapses the selection to the start of the first range in the selection.  If the content of the selection is focused and editable, the caret will blink there."
        },
        "collapseToEnd": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/collapseToEnd",
          "!doc": "Collapses the selection to the end of the last range in the selection.  If the content the selection is in is focused and editable, the caret will blink there."
        },
        "selectAllChildren": {
          "!type": "fn(node: +Element)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/selectAllChildren",
          "!doc": "Adds all the children of the specified node to the selection. Previous selection is lost."
        },
        "addRange": {
          "!type": "fn(range: +Range)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/addRange",
          "!doc": "Adds a Range to a Selection."
        },
        "removeRange": {
          "!type": "fn(range: +Range)",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/removeRange",
          "!doc": "Removes a range from the selection."
        },
        "removeAllRanges": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/removeAllRanges",
          "!doc": "Removes all ranges from the selection, leaving the anchorNode and focusNode properties equal to null and leaving nothing selected. "
        },
        "deleteFromDocument": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/deleteFromDocument",
          "!doc": "Deletes the actual text being represented by a selection object from the document's DOM."
        },
        "containsNode": {
          "!type": "fn(node: +Element) -> bool",
          "!url": "https://developer.mozilla.org/en/docs/DOM/Selection/containsNode",
          "!doc": "Indicates if the node is part of the selection."
        }
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/Selection",
      "!doc": "Selection is the class of the object returned by window.getSelection() and other methods. It represents the text selection in the greater page, possibly spanning multiple elements, when the user drags over static text and other parts of the page. For information about text selection in an individual text editing element."
    },
    "console": {
      "assert": {
        "!type": "fn(assertion: bool, text: string)",
        "!url": "https://developer.mozilla.org/en/docs/Web/API/Console.assert",
        "!doc": "Writes an error message to the console if the assertion is false."
      },
      "clear": {
        "!type": "fn()",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Console/clear",
        "!doc": "    Clear the console."
      },
      "count": {
        "!type": "fn(label?: string)",
        "!url": "https://developer.mozilla.org/en/docs/Web/API/Console.count",
        "!doc": "Logs the number of times that this particular call to count() has been called."
      },
      "debug": "console.log",
      "dir": {
        "!type": "fn(object: ?)",
        "!url": "https://developer.mozilla.org/en/docs/Web/API/Console.dir",
        "!doc": "Displays an interactive list of the properties of the specified JavaScript object."
      },
      "error": {
        "!type": "fn(...msg: ?)",
        "!url": "https://developer.mozilla.org/en/docs/DOM/console.error",
        "!doc": "Outputs an error message to the Web Console."
      },
      "group": {
        "!type": "fn(label?: string)",
        "!url": "https://developer.mozilla.org/en/docs/Web/API/Console.group",
        "!doc": "Creates a new inline group in the Web Console log."
      },
      "groupCollapsed": {
        "!type": "fn(label?: string)",
        "!url": "https://developer.mozilla.org/en/docs/Web/API/Console.groupCollapsed",
        "!doc": "Creates a new inline group in the Web Console log."
      },
      "groupEnd": {
        "!type": "fn()",
        "!url": "https://developer.mozilla.org/en/docs/Web/API/Console.groupEnd",
        "!doc": "Exits the current inline group in the Web Console."
      },
      "info": {
        "!type": "fn(...msg: ?)",
        "!url": "https://developer.mozilla.org/en/docs/DOM/console.info",
        "!doc": "Outputs an informational message to the Web Console."
      },
      "log": {
        "!type": "fn(...msg: ?)",
        "!url": "https://developer.mozilla.org/en/docs/DOM/console.log",
        "!doc": "Outputs a message to the Web Console."
      },
      "table": {
        "!type": "fn(data: []|?, columns?: [])",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Console/table",
        "!doc": "    Displays tabular data as a table."
      },
      "time": {
        "!type": "fn(label: string)",
        "!url": "https://developer.mozilla.org/en/docs/Web/API/Console.time",
        "!doc": "Starts a timer you can use to track how long an operation takes."
      },
      "timeEnd": {
        "!type": "fn(label: string)",
        "!url": "https://developer.mozilla.org/en/docs/Web/API/Console.timeEnd",
        "!doc": "Stops a timer that was previously started by calling console.time()."
      },
      "trace": {
        "!type": "fn()",
        "!url": "https://developer.mozilla.org/en/docs/Web/API/Console.trace",
        "!doc": "Outputs a stack trace to the Web Console."
      },
      "warn": {
        "!type": "fn(...msg: ?)",
        "!url": "https://developer.mozilla.org/en/docs/DOM/console.warn",
        "!doc": "Outputs a warning message to the Web Console."
      },
      "!url": "https://developer.mozilla.org/en/docs/Web/API/Console",
      "!doc": "The console object provides access to the browser's debugging console. The specifics of how it works vary from browser to browser, but there is a de facto set of features that are typically provided."
    },
    "top": {
      "!type": "<top>",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.top",
      "!doc": "Returns a reference to the topmost window in the window hierarchy."
    },
    "parent": {
      "!type": "<top>",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.parent",
      "!doc": "A reference to the parent of the current window or subframe."
    },
    "window": {
      "!type": "<top>",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window",
      "!doc": "The window object represents a window containing a DOM document."
    },
    "opener": {
      "!type": "<top>",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.opener",
      "!doc": "Returns a reference to the window that opened this current window."
    },
    "self": {
      "!type": "<top>",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.self",
      "!doc": "Returns an object reference to the window object. "
    },
    "devicePixelRatio": "number",
    "name": {
      "!type": "string",
      "!url": "https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Function/name",
      "!doc": "The name of the function."
    },
    "closed": {
      "!type": "bool",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.closed",
      "!doc": "This property indicates whether the referenced window is closed or not."
    },
    "pageYOffset": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.scrollY",
      "!doc": "Returns the number of pixels that the document has already been scrolled vertically."
    },
    "pageXOffset": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.scrollX",
      "!doc": "Returns the number of pixels that the document has already been scrolled vertically."
    },
    "scrollY": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.scrollY",
      "!doc": "Returns the number of pixels that the document has already been scrolled vertically."
    },
    "scrollX": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.scrollX",
      "!doc": "Returns the number of pixels that the document has already been scrolled vertically."
    },
    "screenTop": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.top",
      "!doc": "Returns the distance in pixels from the top side of the current screen."
    },
    "screenLeft": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.left",
      "!doc": "Returns the distance in pixels from the left side of the main screen to the left side of the current screen."
    },
    "screenY": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/event.screenY",
      "!doc": "Returns the vertical coordinate of the event within the screen as a whole."
    },
    "screenX": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/event.screenX",
      "!doc": "Returns the horizontal coordinate of the event within the screen as a whole."
    },
    "innerWidth": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.innerWidth",
      "!doc": "Width (in pixels) of the browser window viewport including, if rendered, the vertical scrollbar."
    },
    "innerHeight": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.innerHeight",
      "!doc": "Height (in pixels) of the browser window viewport including, if rendered, the horizontal scrollbar."
    },
    "outerWidth": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.outerWidth",
      "!doc": "window.outerWidth gets the width of the outside of the browser window. It represents the width of the whole browser window including sidebar (if expanded), window chrome and window resizing borders/handles."
    },
    "outerHeight": {
      "!type": "number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.outerHeight",
      "!doc": "window.outerHeight gets the height in pixels of the whole browser window."
    },
    "frameElement": {
      "!type": "+Element",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.frameElement",
      "!doc": "Returns the element (such as <iframe> or <object>) in which the window is embedded, or null if the window is top-level."
    },
    "crypto": {
      "getRandomValues": {
        "!type": "fn([number])",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.crypto.getRandomValues",
        "!doc": "This methods lets you get cryptographically random values."
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.crypto.getRandomValues",
      "!doc": "This methods lets you get cryptographically random values."
    },
    "navigator": {
      "geolocation": {
        "!type": "+Geolocation",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Navigator/geolocation",
        "!doc": "The Navigator.geolocation read-only property returns a Geolocation object that gives Web content access to the location of the device. This allows a Web site or app to offer customized results based on the user's location."
      },
      "appName": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.navigator.appName",
        "!doc": "Returns the name of the browser. The HTML5 specification also allows any browser to return \"Netscape\" here, for compatibility reasons."
      },
      "appVersion": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.navigator.appVersion",
        "!doc": "Returns the version of the browser as a string. It may be either a plain version number, like \"5.0\", or a version number followed by more detailed information. The HTML5 specification also allows any browser to return \"4.0\" here, for compatibility reasons."
      },
      "language": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/NavigatorLanguage/language",
        "!doc": "Returns a string representing the language version of the browser."
      },
      "languages": {
        "!type": "[string]",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/NavigatorLanguage/languages",
        "!doc": "Returns a string representing the language version of the browser."
      },
      "onLine": {
        "!type": "bool",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine/onLine",
        "!doc": "Returns a Boolean indicating whether the browser is working online."
      },
      "oscpu": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Navigator/oscpu",
        "!doc": "Returns a string that represents the current operating system."
      },
      "permissions": {
        "!type": "Permissions",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Navigator/permissions",
        "!doc": "Returns a Permissions object that can be used to query and update permission status of APIs covered by the Permissions API."
      },
      "platform": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/NavigatorID/platform",
        "!doc": "Returns a string representing the platform of the browser."
      },
      "plugins": {
        "!type": "[?]",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.navigator.plugins",
        "!doc": "Returns a PluginArray object, listing the plugins installed in the application."
      },
      "sendBeacon": {
        "!type": "fn(url: string, data?: ?)",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon",
        "!doc": "Used to asynchronously transfer a small amount of data using HTTP from the User Agent to a web server."
      },
      "userAgent": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.navigator.userAgent",
        "!doc": "Returns the user agent string for the current browser."
      },
      "vendor": {
        "!type": "string",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.navigator.vendor",
        "!doc": "Returns the name of the browser vendor for the current browser."
      },
      "vibrate": {
        "!type": "fn(pattern: number|[number])",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Navigator/vibrate",
        "!doc": "Causes vibration on devices with support for it. Does nothing if vibration support isn't available."
      },
      "cookieEnabled": {
        "!type": "bool",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Navigator/cookieEnabled",
        "!doc": "Returns false if setting a cookie will be ignored and true otherwise."
      },
      "javaEnabled": {
        "!type": "fn() -> bool",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/NavigatorPlugins/javaEnabled",
        "!doc": "Returns a Boolean flag indicating whether the host browser is Java-enabled or not."
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.navigator",
      "!doc": "Returns a reference to the navigator object, which can be queried for information about the application running the script."
    },
    "history": {
      "state": {
        "!type": "?",
        "!url": "https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history",
        "!doc": "The DOM window object provides access to the browser's history through the history object. It exposes useful methods and properties that let you move back and forth through the user's history, as well as -- starting with HTML5 -- manipulate the contents of the history stack."
      },
      "length": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history",
        "!doc": "The DOM window object provides access to the browser's history through the history object. It exposes useful methods and properties that let you move back and forth through the user's history, as well as -- starting with HTML5 -- manipulate the contents of the history stack."
      },
      "go": {
        "!type": "fn(delta: number)",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.history",
        "!doc": "Returns a reference to the History object, which provides an interface for manipulating the browser session history (pages visited in the tab or frame that the current page is loaded in)."
      },
      "forward": {
        "!type": "fn()",
        "!url": "https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history",
        "!doc": "The DOM window object provides access to the browser's history through the history object. It exposes useful methods and properties that let you move back and forth through the user's history, as well as -- starting with HTML5 -- manipulate the contents of the history stack."
      },
      "back": {
        "!type": "fn()",
        "!url": "https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history",
        "!doc": "The DOM window object provides access to the browser's history through the history object. It exposes useful methods and properties that let you move back and forth through the user's history, as well as -- starting with HTML5 -- manipulate the contents of the history stack."
      },
      "pushState": {
        "!type": "fn(data: ?, title: string, url?: string)",
        "!url": "https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history",
        "!doc": "The DOM window object provides access to the browser's history through the history object. It exposes useful methods and properties that let you move back and forth through the user's history, as well as -- starting with HTML5 -- manipulate the contents of the history stack."
      },
      "replaceState": {
        "!type": "fn(data: ?, title: string, url?: string)",
        "!url": "https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history",
        "!doc": "The DOM window object provides access to the browser's history through the history object. It exposes useful methods and properties that let you move back and forth through the user's history, as well as -- starting with HTML5 -- manipulate the contents of the history stack."
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/Manipulating_the_browser_history",
      "!doc": "The DOM window object provides access to the browser's history through the history object. It exposes useful methods and properties that let you move back and forth through the user's history, as well as -- starting with HTML5 -- manipulate the contents of the history stack."
    },
    "requestAnimationFrame": {
      "!type": "fn(callback: fn(timestamp: number)) -> number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.requestAnimationFrame",
      "!doc": "The Window.requestAnimationFrame() method tells the browser that you wish to perform an animation and requests that the browser call a specified function to update an animation before the next repaint. The method takes as an argument a callback to be invoked before the repaint."
    },
    "cancelAnimationFrame": {
      "!type": "fn(number)n",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.cancelAnimationFrame",
      "!doc": "Cancels a previously scheduled animation frame request."
    },
    "screen": {
      "availWidth": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.availWidth",
        "!doc": "Returns the amount of horizontal space in pixels available to the window."
      },
      "availHeight": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.availHeight",
        "!doc": "Returns the amount of vertical space available to the window on the screen."
      },
      "availTop": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.availTop",
        "!doc": "Specifies the y-coordinate of the first pixel that is not allocated to permanent or semipermanent user interface features."
      },
      "availLeft": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.availLeft",
        "!doc": "Returns the first available pixel available from the left side of the screen."
      },
      "pixelDepth": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.pixelDepth",
        "!doc": "Returns the bit depth of the screen."
      },
      "colorDepth": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.colorDepth",
        "!doc": "Returns the color depth of the screen."
      },
      "width": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.width",
        "!doc": "Returns the width of the screen."
      },
      "height": {
        "!type": "number",
        "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen.height",
        "!doc": "Returns the height of the screen in pixels."
      },
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.screen",
      "!doc": "Returns a reference to the screen object associated with the window."
    },
    "postMessage": {
      "!type": "fn(message: string, targetOrigin: string)",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.postMessage",
      "!doc": "window.postMessage, when called, causes a MessageEvent to be dispatched at the target window when any pending script that must be executed completes (e.g. remaining event handlers if window.postMessage is called from an event handler, previously-set pending timeouts, etc.). The MessageEvent has the type message, a data property which is set to the value of the first argument provided to window.postMessage, an origin property corresponding to the origin of the main document in the window calling window.postMessage at the time window.postMessage was called, and a source property which is the window from which window.postMessage is called. (Other standard properties of events are present with their expected values.)"
    },
    "close": {
      "!type": "fn()",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.close",
      "!doc": "Closes the current window, or a referenced window."
    },
    "blur": {
      "!type": "fn()",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.blur",
      "!doc": "The blur method removes keyboard focus from the current element."
    },
    "focus": {
      "!type": "fn()",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.focus",
      "!doc": "Sets focus on the specified element, if it can be focused."
    },
    "onload": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onload",
      "!doc": "An event handler for the load event of a window."
    },
    "onunload": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onunload",
      "!doc": "The unload event is raised when the window is unloading its content and resources. The resources removal is processed after the unload event occurs."
    },
    "onscroll": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onscroll",
      "!doc": "Specifies the function to be called when the window is scrolled."
    },
    "onresize": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onresize",
      "!doc": "An event handler for the resize event on the window."
    },
    "ononline": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/document.ononline",
      "!doc": "\"online\" event is fired when the browser switches between online and offline mode."
    },
    "onoffline": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/Online_and_offline_events",
      "!doc": "Some browsers implement Online/Offline events from the WHATWG Web Applications 1.0 specification."
    },
    "onmousewheel": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/DOM_event_reference/mousewheel",
      "!doc": "The DOM mousewheel event is fired asynchronously when mouse wheel or similar device is operated. It's represented by the MouseWheelEvent interface."
    },
    "onmouseup": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onmouseup",
      "!doc": "An event handler for the mouseup event on the window."
    },
    "onmouseover": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.onmouseover",
      "!doc": "The onmouseover property returns the onMouseOver event handler code on the current element."
    },
    "onmouseout": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.onmouseout",
      "!doc": "The onmouseout property returns the onMouseOut event handler code on the current element."
    },
    "onmousemove": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.onmousemove",
      "!doc": "The onmousemove property returns the mousemove event handler code on the current element."
    },
    "onmousedown": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onmousedown",
      "!doc": "An event handler for the mousedown event on the window."
    },
    "onclick": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.onclick",
      "!doc": "The onclick property returns the onClick event handler code on the current element."
    },
    "ondblclick": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.ondblclick",
      "!doc": "The ondblclick property returns the onDblClick event handler code on the current element."
    },
    "onmessage": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/Worker",
      "!doc": "Dedicated Web Workers provide a simple means for web content to run scripts in background threads.  Once created, a worker can send messages to the spawning task by posting messages to an event handler specified by the creator."
    },
    "onkeyup": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.onkeyup",
      "!doc": "The onkeyup property returns the onKeyUp event handler code for the current element."
    },
    "onkeypress": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.onkeypress",
      "!doc": "The onkeypress property sets and returns the onKeyPress event handler code for the current element."
    },
    "onkeydown": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onkeydown",
      "!doc": "An event handler for the keydown event on the window."
    },
    "oninput": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/DOM_event_reference/input",
      "!doc": "The DOM input event is fired synchronously when the value of an <input> or <textarea> element is changed. Additionally, it's also fired on contenteditable editors when its contents are changed. In this case, the event target is the editing host element. If there are two or more elements which have contenteditable as true, \"editing host\" is the nearest ancestor element whose parent isn't editable. Similarly, it's also fired on root element of designMode editors."
    },
    "onpopstate": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onpopstate",
      "!doc": "An event handler for the popstate event on the window."
    },
    "onhashchange": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onhashchange",
      "!doc": "The hashchange event fires when a window's hash changes."
    },
    "onfocus": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.onfocus",
      "!doc": "The onfocus property returns the onFocus event handler code on the current element."
    },
    "onblur": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.onblur",
      "!doc": "The onblur property returns the onBlur event handler code, if any, that exists on the current element."
    },
    "onerror": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onerror",
      "!doc": "An event handler for runtime script errors."
    },
    "ondrop": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/drop",
      "!doc": "The drop event is fired when an element or text selection is dropped on a valid drop target."
    },
    "ondragstart": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/dragstart",
      "!doc": "The dragstart event is fired when the user starts dragging an element or text selection."
    },
    "ondragover": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/dragover",
      "!doc": "The dragover event is fired when an element or text selection is being dragged over a valid drop target (every few hundred milliseconds)."
    },
    "ondragleave": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/dragleave",
      "!doc": "The dragleave event is fired when a dragged element or text selection leaves a valid drop target."
    },
    "ondragenter": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/dragenter",
      "!doc": "The dragenter event is fired when a dragged element or text selection enters a valid drop target."
    },
    "ondragend": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/dragend",
      "!doc": "The dragend event is fired when a drag operation is being ended (by releasing a mouse button or hitting the escape key)."
    },
    "ondrag": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/drag",
      "!doc": "The drag event is fired when an element or text selection is being dragged (every few hundred milliseconds)."
    },
    "oncontextmenu": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.oncontextmenu",
      "!doc": "An event handler property for right-click events on the window. Unless the default behavior is prevented, the browser context menu will activate (though IE8 has a bug with this and will not activate the context menu if a contextmenu event handler is defined). Note that this event will occur with any non-disabled right-click event and does not depend on an element possessing the \"contextmenu\" attribute."
    },
    "onchange": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/element.onchange",
      "!doc": "The onchange property sets and returns the onChange event handler code for the current element."
    },
    "onbeforeunload": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onbeforeunload",
      "!doc": "An event that fires when a window is about to unload its resources. The document is still visible and the event is still cancelable."
    },
    "onabort": {
      "!type": "?",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.onabort",
      "!doc": "An event handler for abort events sent to the window."
    },
    "getSelection": {
      "!type": "fn() -> +Selection",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.getSelection",
      "!doc": "Returns a selection object representing the range of text selected by the user. "
    },
    "alert": {
      "!type": "fn(message: string)",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.alert",
      "!doc": "Display an alert dialog with the specified content and an OK button."
    },
    "confirm": {
      "!type": "fn(message: string) -> bool",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.confirm",
      "!doc": "Displays a modal dialog with a message and two buttons, OK and Cancel."
    },
    "prompt": {
      "!type": "fn(message: string, value: string) -> string",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.prompt",
      "!doc": "Displays a dialog with a message prompting the user to input some text."
    },
    "scrollBy": {
      "!type": "fn(x: number, y: number)",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.scrollBy",
      "!doc": "Scrolls the document in the window by the given amount."
    },
    "scrollTo": {
      "!type": "fn(x: number, y: number)",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.scrollTo",
      "!doc": "Scrolls to a particular set of coordinates in the document."
    },
    "scroll": {
      "!type": "fn(x: number, y: number)",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.scroll",
      "!doc": "Scrolls the window to a particular place in the document."
    },
    "setTimeout": {
      "!type": "fn(f: fn(), ms: number) -> number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.setTimeout",
      "!doc": "Calls a function or executes a code snippet after specified delay."
    },
    "clearTimeout": {
      "!type": "fn(timeout: number)",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.clearTimeout",
      "!doc": "Clears the delay set by window.setTimeout()."
    },
    "setInterval": {
      "!type": "fn(f: fn(), ms: number) -> number",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.setInterval",
      "!doc": "Calls a function or executes a code snippet repeatedly, with a fixed time delay between each call to that function."
    },
    "clearInterval": {
      "!type": "fn(interval: number)",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.clearInterval",
      "!doc": "Cancels repeated action which was set up using setInterval."
    },
    "atob": {
      "!type": "fn(encoded: string) -> string",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.atob",
      "!doc": "Decodes a string of data which has been encoded using base-64 encoding."
    },
    "btoa": {
      "!type": "fn(data: string) -> string",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.btoa",
      "!doc": "Creates a base-64 encoded ASCII string from a string of binary data."
    },
    "addEventListener": {
      "!type": "fn(type: string, listener: fn(e: +Event), capture: bool)",
      "!url": "https://developer.mozilla.org/en/docs/DOM/EventTarget.addEventListener",
      "!doc": "Registers a single event listener on a single target. The event target may be a single element in a document, the document itself, a window, or an XMLHttpRequest."
    },
    "removeEventListener": {
      "!type": "fn(type: string, listener: fn(), capture: bool)",
      "!url": "https://developer.mozilla.org/en/docs/DOM/EventTarget.removeEventListener",
      "!doc": "Allows the removal of event listeners from the event target."
    },
    "dispatchEvent": {
      "!type": "fn(event: +Event) -> bool",
      "!url": "https://developer.mozilla.org/en/docs/DOM/EventTarget.dispatchEvent",
      "!doc": "Dispatches an event into the event system. The event is subject to the same capturing and bubbling behavior as directly dispatched events."
    },
    "getComputedStyle": {
      "!type": "fn(node: +Element, pseudo?: string) -> Element.prototype.style",
      "!url": "https://developer.mozilla.org/en/docs/DOM/window.getComputedStyle",
      "!doc": "Gives the final used values of all the CSS properties of an element."
    },
    "CanvasRenderingContext2D": {
      "canvas": "+Element",
      "width": "number",
      "height": "number",
      "commit": "fn()",
      "save": "fn()",
      "restore": "fn()",
      "currentTransform": "?",
      "scale": "fn(x: number, y: number)",
      "rotate": "fn(angle: number)",
      "translate": "fn(x: number, y: number)",
      "transform": "fn(a: number, b: number, c: number, d: number, e: number, f: number)",
      "setTransform": "fn(a: number, b: number, c: number, d: number, e: number, f: number)",
      "resetTransform": "fn()",
      "globalAlpha": "number",
      "globalCompositeOperation": "string",
      "imageSmoothingEnabled": "bool",
      "strokeStyle": "string",
      "fillStyle": "string",
      "createLinearGradient": "fn(x0: number, y0: number, x1: number, y1: number) -> ?",
      "createPattern": "fn(image: ?, repetition: string) -> ?",
      "shadowOffsetX": "number",
      "shadowOffsetY": "number",
      "shadowBlur": "number",
      "shadowColor": "string",
      "clearRect": "fn(x: number, y: number, w: number, h: number)",
      "fillRect": "fn(x: number, y: number, w: number, h: number)",
      "strokeRect": "fn(x: number, y: number, w: number, h: number)",
      "fillRule": "string",
      "fill": "fn()",
      "beginPath": "fn()",
      "stroke": "fn()",
      "clip": "fn()",
      "resetClip": "fn()",
      "fillText": "fn(text: string, x: number, y: number, maxWidth: number)",
      "strokeText": "fn(text: string, x: number, y: number, maxWidth: number)",
      "measureText": "fn(text: string) -> ?",
      "drawImage": "fn(image: ?, dx: number, dy: number)",
      "createImageData": "fn(sw: number, sh: number) -> ?",
      "getImageData": "fn(sx: number, sy: number, sw: number, sh: number) -> ?",
      "putImageData": "fn(imagedata: ?, dx: number, dy: number)",
      "lineWidth": "number",
      "lineCap": "string",
      "lineJoin": "string",
      "miterLimit": "number",
      "setLineDash": "fn(segments: [number])",
      "getLineDash": "fn() -> [number]",
      "lineDashOffset": "number",
      "font": "string",
      "textAlign": "string",
      "textBaseline": "string",
      "direction": "string",
      "closePath": "fn()",
      "moveTo": "fn(x: number, y: number)",
      "lineTo": "fn(x: number, y: number)",
      "quadraticCurveTo": "fn(cpx: number, cpy: number, x: number, y: number)",
      "bezierCurveTo": "fn(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number)",
      "arcTo": "fn(x1: number, y1: number, x2: number, y2: number, radius: number)",
      "rect": "fn(x: number, y: number, w: number, h: number)",
      "arc": "fn(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise?: bool)",
      "ellipse": "fn(x: number, y: number, radiusX: number, radiusY: number, rotation: number, startAngle: number, endAngle: number, anticlockwise: bool)"
    },
    "Image": {
      "!type": "fn(width?: number, height?: number) -> +HTMLImageElement",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image",
      "!doc": "Image Element constructor. Accepts two optional parameters: Image([unsigned long width, unsigned long height]). Returns an HTMLImageElement instance just as document.createElement('img') would."
    },
    "MutationObserver": {
      "!type": "fn(callback: fn([+MutationRecord]))",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver",
      "!doc": "MutationObserver provides developers a way to react to changes in a DOM.",
      "prototype": {
        "observe": {
          "!type": "fn(target: Node, options: MutationObserverInit)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver#observe()",
          "!doc": "Registers the MutationObserver instance to receive notifications of DOM mutations on the specified node."
        },
        "disconnect": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver#disconnect()",
          "!doc": "Stops the MutationObserver instance from receiving notifications of DOM mutations."
        },
        "takeRecords": {
          "!type": "fn() -> [+MutationRecord]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver#takeRecords()",
          "!doc": "mpties the MutationObserver instance's record queue and returns what was in there."
        }
      }
    },
    "MutationRecord": {
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/MutationRecord",
      "!doc": "A MutationRecord represents an individual DOM mutation.",
      "prototype": {
        "type": "string",
        "target": "Node",
        "addedNodes": "NodeList",
        "removedNodes": "NodeList",
        "previousSibling": "Node",
        "nextSibling": "Node",
        "attributeName": "string",
        "attributeNamespace": "string",
        "oldValue": "string"
      }
    },
    "Headers": {
      "!type": "fn(init?: object)",
      "!doc": "Represents response/request headers, allowing you to query them and take different actions depending on the results.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Headers",
      "prototype": {
        "append": {
          "!type": "fn(name: string, value: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Headers/append",
          "!doc": "Appends a new value onto an existing header inside a Headers object, or adds the header if it does not already exist."
        },
        "delete": {
          "!type": "fn(name: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Headers/delete",
          "!doc": "Deletes a header from a Headers object."
        },
        "get": {
          "!type": "fn(name: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Headers/get",
          "!doc": "Returns the first value of a given header from within a Headers object."
        },
        "getAll": {
          "!type": "fn(name: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Headers/getAll",
          "!doc": "Returns an array of all the values of a header within a Headers object with a given name."
        },
        "has": {
          "!type": "fn(name: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Headers/has",
          "!doc": "Returns a boolean stating whether a Headers object contains a certain header."
        },
        "set": {
          "!type": "fn(name: string, value: string)",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Headers/set",
          "!doc": "Sets a new value for an existing header inside a Headers object, or adds the header if it does not already exist."
        }
      }
    },
    "Request": {
      "!type": "fn(input: string, init?: object)",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request",
      "!doc": "The Request interface of the Fetch API represents a resource request.",
      "prototype": {
        "bodyUsed": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/bodyUsed",
          "!doc": "Stores a Boolean that declares whether the body has been used in a response yet."
        },
        "cache": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/cache",
          "!doc": "Contains the cache mode of the request (e.g., default, reload, no-cache)."
        },
        "context": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/context",
          "!doc": "Contains the context of the request (e.g., audio, image, iframe, etc.)"
        },
        "credentials": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials",
          "!doc": "Contains the credentials of the request (e.g., omit, same-origin)."
        },
        "headers": {
          "!type": "+Headers",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/headers",
          "!doc": "Contains the associated Headers object of the request."
        },
        "integrity": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/integrity",
          "!doc": "Contains the subresource integrity value of the request."
        },
        "method": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/method",
          "!doc": "Contains the request's method (GET, POST, etc.)"
        },
        "mode": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/mode",
          "!doc": "Contains the mode of the request (e.g., cors, no-cors, same-origin)."
        },
        "redirect": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/redirect",
          "!doc": "Contains the mode for how redirects are handled."
        },
        "referrer": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/referrer",
          "!doc": "Contains the referrer of the request (e.g., client)."
        },
        "referrerPolicy": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/referrerPolicy",
          "!doc": "Returns the referrer policy, which governs what referrer information, sent in the Referer header, should be included with the request."
        },
        "url": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/url",
          "!doc": "Contains the URL of the request."
        },
        "clone": {
          "!type": "fn()",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Request/clone",
          "!doc": "Creates a copy of the current Request object."
        },
        "arrayBuffer": {
          "!type": "fn() -> +Promise[:t=+ArrayBuffer]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/arrayBuffer",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with an ArrayBuffer."
        },
        "blob": {
          "!type": "fn() -> +Promise[:t=+Blob]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/blob",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with a Blob."
        },
        "formData": {
          "!type": "fn() -> +Promise[:t=+FormData]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/formData",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with a FormData object."
        },
        "json": {
          "!type": "fn() -> +Promise[:t=?]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/json",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with a JSON object."
        },
        "text": {
          "!type": "fn() -> +Promise[:t=string]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/text",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with a USVString (text)."
        }
      }
    },
    "Response": {
      "!type": "fn(body: object, init?: object)",
      "!doc": "Represents the response to a request.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response",
      "prototype": {
        "type": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response/type",
          "!doc": "Contains the type of the response (e.g., basic, cors)."
        },
        "url": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response/url",
          "!doc": "Contains the URL of the response."
        },
        "status": {
          "!type": "number",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response/status",
          "!doc": "Contains the status code of the response (e.g., 200 for a success)."
        },
        "ok": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response/ok",
          "!doc": "Contains a boolean stating whether the response was successful (status in the range 200-299) or not."
        },
        "statusText": {
          "!type": "string",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response/statusText",
          "!doc": "Contains the status message corresponding to the status code (e.g., OK for 200)."
        },
        "headers": {
          "!type": "+Headers",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response/headers",
          "!doc": "Contains the Headers object associated with the response."
        },
        "bodyUsed": {
          "!type": "bool",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/bodyUsed",
          "!doc": "Stores a Boolean that declares whether the body has been used in a response yet."
        },
        "clone": {
          "!type": "fn() -> +Response",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response/clone",
          "!doc": "Creates a clone of a Response object."
        },
        "error": {
          "!type": "fn() -> +Response",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response/error",
          "!doc": "Returns a new Response object associated with a network error."
        },
        "redirect": {
          "!type": "fn(url: string, status?: number) -> +Response",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Response/redirect",
          "!doc": "Creates a new response with a different URL."
        },
        "arrayBuffer": {
          "!type": "fn() -> +Promise[:t=+ArrayBuffer]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/arrayBuffer",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with an ArrayBuffer."
        },
        "blob": {
          "!type": "fn() -> +Promise[:t=+Blob]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/blob",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with a Blob."
        },
        "formData": {
          "!type": "fn() -> +Promise[:t=+FormData]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/formData",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with a FormData object."
        },
        "json": {
          "!type": "fn() -> +Promise[:t=?]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/json",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with a JSON object."
        },
        "text": {
          "!type": "fn() -> +Promise[:t=string]",
          "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Body/text",
          "!doc": "Takes a Response stream and reads it to completion. It returns a promise that resolves with a USVString (text)."
        }
      }
    },
    "fetch": {
      "!type": "fn(url: string|+Request, init?: object) -> +Promise[:t=+Response]",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API",
      "!doc": "The fetch() method of the WindowOrWorkerGlobalScope mixin starts the process of fetching a resource from the network."
    },
    "Clipboard": {
      "!doc": "The Clipboard interface implements the Clipboard API, providing both read and write access to the contents of the system clipboard.",
      "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Clipboard",
      "read": {
        "!type": "fn() -> +Promise[:t=+DataTransfer]",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/read",
        "!doc": "The read() method of the Clipboard interface requests a copy of the clipboard's contents"
      },
      "readText": {
        "!type": "fn() -> +Promise[:t=string]",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText",
        "!doc": "Requests text from the system clipboard; returns a Promise which is resolved with a DOMString containing the clipboard's text once it's available."
      },
      "write": {
        "!type": "fn(data: +DataTransfer) -> +Promise[]",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/write",
        "!doc": "The Clipboard method write() writes arbitrary data, such as images, to the clipboard. This can be used to implement cut and copy functionality."
      },
      "writeText": {
        "!type": "fn(newClipText: string) -> +Promise[:t=string]",
        "!url": "https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/writeText",
        "!doc": "The Clipboard interface's writeText() property writes the specified text string to the system clipboard."
      }
    }
  },
  "jinja": {
    "!name": "AppSpeed",
    "Jinja": {

      "ajax": {
        "launcherCache": {
          "api": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "board": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "calendar": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "color": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "component": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "css": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "deploy": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "diagram": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "erd": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "formapp": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "hmi": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "html": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "image": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "javascript": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "json": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "less": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "menu": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "package": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "page": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "sql": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "text": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "theme": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "vhtml": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "well": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "word": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "workspace": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "yaml": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          }
        },
        "options": {
          "ajaxOption": {
            "credentials": "string",
            "headers": {},
            "method": "string"
          },
          "moduleName": "string"
        },
        "pathCache": {},
        "resourceCache": {
          "app630.api.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.board.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.board.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.calendar.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.calendar.studio": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.color.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.component.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.css.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.deploy.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.diagram.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.diagram.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.erd.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.erd.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.formapp.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.formapp.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.hmi.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.hmi.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.html.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.html.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.image.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.javascript.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.json.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.less.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.menu.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.package.studio": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.page.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.page.studio": {
            "BODY": {},
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.sql.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.text.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.theme.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.vhtml.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.vhtml.studio": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.well.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.well.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.word.runtime": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.word.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.workspace.studio": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app630.yaml.studio": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "app631.image.studio": {
            "BODY": "string",
            "DELETED": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number"
          },
          "launcher.630.api.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.board.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.calendar.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.color.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.component.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.css.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.deploy.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.diagram.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.erd.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.formapp.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.hmi.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.html.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.image.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.javascript.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.json.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.less.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.menu.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.package.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.page.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.sql.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.text.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.theme.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.vhtml.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.well.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.word.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.workspace.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          },
          "launcher.630.yaml.info": {
            "BODY": "string",
            "DELETED": "string",
            "DESCRIPTION": "string",
            "EDT_DATETIME": "string",
            "EDT_USER_ID": "string",
            "EDT_USER_NAME": "string",
            "ID": "string",
            "NAME": "string",
            "OWNER_ID": "string",
            "OWNER_NAME": "string",
            "PARENT_ID": "string",
            "REG_DATETIME": "string",
            "REG_USER_ID": "string",
            "REG_USER_NAME": "string",
            "SORT": "number",
            "SOURCE_ID": "string",
            "STATUS": "string",
            "TYPE": "string",
            "URI": "string",
            "VERSION": "number",
            "_body": {}
          }
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_fetch": {
          "!type": "fn()"
        },
        "clearFunction": {
          "!type": "fn()"
        },
        "delete": {
          "!type": "fn()"
        },
        "excelUpload": {
          "!type": "fn()"
        },
        "excute": {
          "!type": "fn()"
        },
        "fetchJsonp": {
          "!type": "fn()"
        },
        "generateCallbackFunction": {
          "!type": "fn()"
        },
        "get": {
          "!type": "fn()"
        },
        "getJson": {
          "!type": "fn()"
        },
        "getLinkInfo": {
          "!type": "fn()"
        },
        "getResources": {
          "!type": "fn()"
        },
        "imageUpload": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "myImageUpload": {
          "!type": "fn()"
        },
        "patch": {
          "!type": "fn()"
        },
        "post": {
          "!type": "fn()"
        },
        "proxyGet": {
          "!type": "fn()"
        },
        "proxyPost": {
          "!type": "fn()"
        },
        "removeScript": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "auth": {
        "VERSION": "string",
        "auth20Provider": {},
        "options": {
          "loginUri": "string",
          "moduleName": "string",
          "useGuest": "boolean"
        },
        "_cookieLogin": {
          "!type": "fn()"
        },
        "_logOut": {
          "!type": "fn()"
        },
        "_md5pass": {
          "!type": "fn()"
        },
        "_offLineLogin": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        }
      },
      "code": {
        "codes": {
          "DATE_TYPE_YMD": "TypedArray",
          "DATE_TYPE_YMDT": "TypedArray",
          "DAY_NAME": "TypedArray",
          "HLDY_FG": "TypedArray",
          "MONTH": "TypedArray",
          "SEX": "TypedArray",
          "TIME_B1H": "TypedArray",
          "USE_VALUE_TYPE": "TypedArray"
        },
        "colors": {
          "area4": "TypedArray",
          "blue5": "TypedArray",
          "cat5": "TypedArray",
          "green5": "TypedArray",
          "green5s": "TypedArray",
          "pie5": "TypedArray",
          "plan2": "TypedArray",
          "red5": "TypedArray",
          "red5s": "TypedArray",
          "sky5": "TypedArray",
          "yellow5": "TypedArray"
        },
        "options": {
          "activeAop": "boolean",
          "moduleName": "string",
          "version": "string"
        },
        "addCode": {
          "!type": "fn()"
        },
        "bindSelectEl": {
          "!type": "fn()"
        },
        "getCodeName": {
          "!type": "fn()"
        },
        "getCodeSet": {
          "!type": "fn()"
        },
        "getGroup": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setGroup": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "confirm": {
        "oldAlert": {
          "!type": "fn()"
        },
        "oldConfirm": {
          "!type": "fn()"
        },
        "oldPrompt": {
          "!type": "fn()"
        },
        "options": {
          "danger": "string",
          "info": "string",
          "moduleName": "string",
          "success": "string",
          "version": "string",
          "warning": "string"
        },
        "_alert": {
          "!type": "fn()"
        },
        "_confirm": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_prompt": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "_showMessage": {
          "!type": "fn()"
        },
        "alert": {
          "!type": "fn()"
        },
        "delete": {
          "!type": "fn()"
        },
        "info": {
          "!type": "fn()"
        },
        "new": {
          "!type": "fn()"
        },
        "save": {
          "!type": "fn()"
        },
        "saveYesNo": {
          "!type": "fn()"
        },
        "toastMessage": {
          "!type": "fn()"
        },
        "topMessage": {
          "!type": "fn()"
        },
        "update": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "context": {
        "menuEl": {},
        "options": {
          "activeAop": "boolean",
          "moduleName": "string",
          "version": "string"
        },
        "_render": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "render": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "dom": {
        "options": {
          "activeAop": "boolean",
          "moduleName": "string",
          "version": "string"
        },
        "_lessRender": {
          "!type": "fn()"
        },
        "after": {
          "!type": "fn()"
        },
        "append": {
          "!type": "fn()"
        },
        "before": {
          "!type": "fn()"
        },
        "changeBackImage": {
          "!type": "fn()"
        },
        "changeIcon": {
          "!type": "fn()"
        },
        "changeImage": {
          "!type": "fn()"
        },
        "changeTag": {
          "!type": "fn()"
        },
        "changeYouTube": {
          "!type": "fn()"
        },
        "classAdd": {
          "!type": "fn()"
        },
        "classRemove": {
          "!type": "fn()"
        },
        "classRemoveAdd": {
          "!type": "fn()"
        },
        "closest": {
          "!type": "fn()"
        },
        "closestAll": {
          "!type": "fn()"
        },
        "cmdParaApply": {
          "!type": "fn()"
        },
        "contextMenu": {
          "!type": "fn()"
        },
        "createScriptNode": {
          "!type": "fn()"
        },
        "createStyleNode": {
          "!type": "fn()"
        },
        "ctrlParaApply": {
          "!type": "fn()"
        },
        "dropPosition": {
          "!type": "fn()"
        },
        "empty": {
          "!type": "fn()"
        },
        "exportCleaning": {
          "!type": "fn()"
        },
        "findIndex": {
          "!type": "fn()"
        },
        "getEventPoint": {
          "!type": "fn()"
        },
        "htmlCompress": {
          "!type": "fn()"
        },
        "insertIcon": {
          "!type": "fn()"
        },
        "insertLink": {
          "!type": "fn()"
        },
        "insertText": {
          "!type": "fn()"
        },
        "isVisible": {
          "!type": "fn()"
        },
        "less2css": {
          "!type": "fn()"
        },
        "lessFileIdCss": {
          "!type": "fn()"
        },
        "lessJJcss": {
          "!type": "fn()"
        },
        "lessNoFramework": {
          "!type": "fn()"
        },
        "lessThemeCss": {
          "!type": "fn()"
        },
        "lessUUIDcss": {
          "!type": "fn()"
        },
        "pageBefore": {
          "!type": "fn()"
        },
        "parents": {
          "!type": "fn()"
        },
        "position": {
          "!type": "fn()"
        },
        "prepend": {
          "!type": "fn()"
        },
        "remove": {
          "!type": "fn()"
        },
        "setColorSheme": {
          "!type": "fn()"
        },
        "setStyle": {
          "!type": "fn()"
        },
        "tabAddTab": {
          "!type": "fn()"
        },
        "tabHiddenIcon": {
          "!type": "fn()"
        },
        "tabRemoveTab": {
          "!type": "fn()"
        },
        "tabShowIcon": {
          "!type": "fn()"
        },
        "tableInsertCol": {
          "!type": "fn()"
        },
        "tableInsertRow": {
          "!type": "fn()"
        },
        "tableMeargeCancel": {
          "!type": "fn()"
        },
        "tableMeargeCol": {
          "!type": "fn()"
        },
        "tableMeargeRow": {
          "!type": "fn()"
        },
        "tableRemoveCol": {
          "!type": "fn()"
        },
        "tableRemoveRow": {
          "!type": "fn()"
        },
        "unLink": {
          "!type": "fn()"
        },
        "uuid": {
          "!type": "fn()"
        },
        "verifyCss": {
          "!type": "fn()"
        },
        "visibleFilter": {
          "!type": "fn()"
        },
        "visibleList": {
          "!type": "fn()"
        },
        "visibleScroll": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "driverApi": {
        "options": {
          "accountSite": "string",
          "moduleName": "string",
          "routeType": "string"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_row2tree": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "_typeIcon": {
          "!type": "fn()"
        },
        "backupFile": {
          "!type": "fn()"
        },
        "changeFile": {
          "!type": "fn()"
        },
        "closeFile": {
          "!type": "fn()"
        },
        "copyFile": {
          "!type": "fn()"
        },
        "createDeploy": {
          "!type": "fn()"
        },
        "createFile": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "findFile": {
          "!type": "fn()"
        },
        "folderShare": {
          "!type": "fn()"
        },
        "formBackupInfo": {
          "!type": "fn()"
        },
        "formInfoFile": {
          "!type": "fn()"
        },
        "formNewFile": {
          "!type": "fn()"
        },
        "formNewFolder": {
          "!type": "fn()"
        },
        "formNewWorkspace": {
          "!type": "fn()"
        },
        "formRenameFile": {
          "!type": "fn()"
        },
        "getFileBackupBody": {
          "!type": "fn()"
        },
        "getFileBackupHistory": {
          "!type": "fn()"
        },
        "getFilePath": {
          "!type": "fn()"
        },
        "getMyHostUseCount": {
          "!type": "fn()"
        },
        "getMyResource": {
          "!type": "fn()"
        },
        "getTreeByFolderId": {
          "!type": "fn()"
        },
        "getUri": {
          "!type": "fn()"
        },
        "lockResource": {
          "!type": "fn()"
        },
        "locksResource": {
          "!type": "fn()"
        },
        "moveFile": {
          "!type": "fn()"
        },
        "myHistory": {
          "!type": "fn()"
        },
        "myShareFolder": {
          "!type": "fn()"
        },
        "myShareUpdate": {
          "!type": "fn()"
        },
        "myWorkspaces": {
          "!type": "fn()"
        },
        "readFile": {
          "!type": "fn()"
        },
        "readResourceAll": {
          "!type": "fn()"
        },
        "readResourceRoot": {
          "!type": "fn()"
        },
        "readResourceSearch": {
          "!type": "fn()"
        },
        "selectFolderSearch": {
          "!type": "fn()"
        },
        "selectResourcePathInfo": {
          "!type": "fn()"
        },
        "sendMessageSsePeer": {
          "!type": "fn()"
        },
        "setFileBackup": {
          "!type": "fn()"
        },
        "storeNewFile": {
          "!type": "fn()"
        },
        "trashFile": {
          "!type": "fn()"
        },
        "unlockReqPeer": {
          "!type": "fn()"
        },
        "unlockReqResource": {
          "!type": "fn()"
        },
        "unlockResource": {
          "!type": "fn()"
        },
        "updateDeploy": {
          "!type": "fn()"
        },
        "updateFile": {
          "!type": "fn()"
        },
        "updateFileBody": {
          "!type": "fn()"
        },
        "updateFileInfo": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "event": {
        "_events": {
          "JJLockLogin": {},
          "JJLogin": {},
          "JJLogout": {},
          "click": {},
          "jjAppStart": {},
          "popstate": {},
          "studio.activeTree": {},
          "studio.updateFileInfo": {}
        },
        "options": {
          "activeAop": "boolean",
          "moduleName": "string",
          "version": "string"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "add": {
          "!type": "fn()"
        },
        "dispatch": {
          "!type": "fn()"
        },
        "get": {
          "!type": "fn()"
        },
        "getEventTarget": {
          "!type": "fn()"
        },
        "remove": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "exception": {
        "options": {
          "activeAop": "boolean",
          "moduleName": "string",
          "version": "string"
        },
        "_actionDo": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "errorCase1": {
          "!type": "fn()"
        },
        "errorCase2": {
          "!type": "fn()"
        },
        "errorCase3": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "global": {
        "options": {
          "activeAop": "boolean",
          "moduleName": "string",
          "version": "string"
        },
        "addCRUDCol": {
          "!type": "fn()"
        },
        "addCRUDrow": {
          "!type": "fn()"
        },
        "arrMove": {
          "!type": "fn()"
        },
        "attributeToCamelCase": {
          "!type": "fn()"
        },
        "camelCase": {
          "!type": "fn()"
        },
        "camelCaseToAttribute": {
          "!type": "fn()"
        },
        "camelCaseToColumn": {
          "!type": "fn()"
        },
        "camelCaseToHyphen": {
          "!type": "fn()"
        },
        "changeShortcutIcon": {
          "!type": "fn()"
        },
        "clearCRUD": {
          "!type": "fn()"
        },
        "clearObj": {
          "!type": "fn()"
        },
        "columnToCamelCase": {
          "!type": "fn()"
        },
        "dataClean": {
          "!type": "fn()"
        },
        "dataRowsClean": {
          "!type": "fn()"
        },
        "datetime2string": {
          "!type": "fn()"
        },
        "decodeURI": {
          "!type": "fn()"
        },
        "deleteCRUD": {
          "!type": "fn()"
        },
        "deleteCRUDrow": {
          "!type": "fn()"
        },
        "deleteCRUDrowID": {
          "!type": "fn()"
        },
        "dom2Json": {
          "!type": "fn()"
        },
        "domTreeLabel": {
          "!type": "fn()"
        },
        "encodeAce": {
          "!type": "fn()"
        },
        "encodeHtml": {
          "!type": "fn()"
        },
        "encodeURI": {
          "!type": "fn()"
        },
        "exportCSV": {
          "!type": "fn()"
        },
        "exportHtmlTable": {
          "!type": "fn()"
        },
        "float": {
          "!type": "fn()"
        },
        "getAllMethods": {
          "!type": "fn()"
        },
        "getCategoriesDay": {
          "!type": "fn()"
        },
        "getCategoriesMonth": {
          "!type": "fn()"
        },
        "getCategoriesYear": {
          "!type": "fn()"
        },
        "getChangeCRUD": {
          "!type": "fn()"
        },
        "getChangeData": {
          "!type": "fn()"
        },
        "getEventKeyMap": {
          "!type": "fn()"
        },
        "getHeadDay": {
          "!type": "fn()"
        },
        "getHeadMonth": {
          "!type": "fn()"
        },
        "hyphenToCamelCase": {
          "!type": "fn()"
        },
        "int": {
          "!type": "fn()"
        },
        "isDate": {
          "!type": "fn()"
        },
        "isInt": {
          "!type": "fn()"
        },
        "json": {
          "!type": "fn()"
        },
        "json2Grid": {
          "!type": "fn()"
        },
        "json2csv": {
          "!type": "fn()"
        },
        "json2html": {
          "!type": "fn()"
        },
        "jsonPivot": {
          "!type": "fn()"
        },
        "map2getPara": {
          "!type": "fn()"
        },
        "mergeTableCell": {
          "!type": "fn()"
        },
        "nullSpace": {
          "!type": "fn()"
        },
        "object2Json": {
          "!type": "fn()"
        },
        "setCRUD": {
          "!type": "fn()"
        },
        "sortRows": {
          "!type": "fn()"
        },
        "string": {
          "!type": "fn()"
        },
        "string2date": {
          "!type": "fn()"
        },
        "type": {
          "!type": "fn()"
        },
        "uuid": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "i18n": {
        "currencyFormat": {},
        "floatFormat": {},
        "intFormat": {},
        "numberFormat": {},
        "options": {
          "ampm": "TypedArray",
          "beforeAfter": "TypedArray",
          "currency": "string",
          "locale": "string",
          "moduleName": "string",
          "timeUnit": "TypedArray",
          "timeZone": "string",
          "weekName": "TypedArray"
        },
        "percentFormat": {},
        "_defaultOption": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "dateDiff": {
          "!type": "fn()"
        },
        "dateFormat": {
          "!type": "fn()"
        },
        "getBrowseCode": {
          "!type": "fn()"
        },
        "getCountry": {
          "!type": "fn()"
        },
        "getDateTimeOptions": {
          "!type": "fn()"
        },
        "getLocaleCode": {
          "!type": "fn()"
        },
        "getTimezone": {
          "!type": "fn()"
        },
        "getTimezoneCode": {
          "!type": "fn()"
        },
        "getTimezoneName": {
          "!type": "fn()"
        },
        "isDate": {
          "!type": "fn()"
        },
        "setDateTimeOptions": {
          "!type": "fn()"
        },
        "timezoneClock": {
          "!type": "fn()"
        },
        "timezoneFormat": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "launcher": {
        "launchers": {
          "api": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "board": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "calendar": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "color": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "component": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "css": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "deploy": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "diagram": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "erd": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "formapp": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "hmi": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "html": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "image": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "javascript": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "json": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "less": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "menu": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "package": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "page": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "sql": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "text": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "theme": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "vhtml": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "well": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "word": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "workspace": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          },
          "yaml": {
            "format": "string",
            "icon": "string",
            "label": "string",
            "name": "string",
            "runtime": "string",
            "studio": "string",
            "template": "TypedArray"
          }
        },
        "options": {
          "moduleName": "string",
          "version": "string"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_getLauncher": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "getLauncherIcon": {
          "!type": "fn()"
        },
        "getRuntimeUri": {
          "!type": "fn()"
        },
        "getStudioUri": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "log": {
        "oldDebug": {
          "!type": "fn()"
        },
        "oldError": {
          "!type": "fn()"
        },
        "oldInfo": {
          "!type": "fn()"
        },
        "oldLog": {
          "!type": "fn()"
        },
        "oldWarn": {
          "!type": "fn()"
        },
        "options": {
          "activeAop": "boolean",
          "isActive": "boolean",
          "moduleName": "string",
          "version": "string"
        },
        "_alert": {
          "!type": "fn()"
        },
        "_consolLogwarn": {
          "!type": "fn()"
        },
        "_debug": {
          "!type": "fn()"
        },
        "_error": {
          "!type": "fn()"
        },
        "_info": {
          "!type": "fn()"
        },
        "_log": {
          "!type": "fn()"
        },
        "_logHead": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "_todo": {
          "!type": "fn()"
        },
        "_warn": {
          "!type": "fn()"
        },
        "setActive": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "modulePromise": {},
      "modulePromiseResolv": {},
      "notification": {
        "VERSION": "string",
        "options": {
          "moduleName": "string"
        },
        "desktopShow": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "serviceWorkNotification": {
          "!type": "fn()"
        },
        "show": {
          "!type": "fn()"
        },
        "topMessageNotification": {
          "!type": "fn()"
        }
      },
      "options": {
        "activeAop": "boolean",
        "appDomain": "string",
        "moduleOption": {},
        "objClass": "string",
        "version": "string"
      },
      "require": {
        "metadb": {
          "libs": {
            "XXinputMask": {},
            "ace": {},
            "apexchart": {},
            "autoNumeric": {},
            "billboard": {},
            "billboardBak": {},
            "bootstrap.337": {},
            "bootstrap.337.css": {},
            "bootstrap.431": {},
            "bootstrap.431.css": {},
            "c3": {},
            "c3bad": {},
            "c3v2": {},
            "chartist": {},
            "chartjs": {},
            "chartjs.280": {},
            "circles": {},
            "countUp": {},
            "d3": {},
            "d3v3": {},
            "d3v4": {},
            "dataTable": {},
            "dataTableBS4": {},
            "datetimepicker": {},
            "daum.post": {},
            "diagram": {},
            "firebase": {},
            "flot": {},
            "font-awesome": {},
            "fullcalendar": {},
            "fullcalendar2016": {},
            "gauge": {},
            "googleChart": {},
            "googleMap": {},
            "hammer": {},
            "handsontable": {},
            "highLight": {},
            "highLight-Dark": {},
            "html2canvas": {},
            "i18next": {},
            "imask": {},
            "inputMask": {},
            "inputmask2": {},
            "jjAppForm": {},
            "jjCodeMirror": {},
            "jjCodeMirrorBak": {},
            "jjDataTable": {},
            "jjDataTree": {},
            "jqGrid": {},
            "jquery.331": {},
            "jqueryUi.1.12.1": {},
            "jsplumb": {},
            "jsplumb.2.12.5": {},
            "jwt": {},
            "keditor": {},
            "less": {},
            "moment": {},
            "pie-chart": {},
            "pivot": {},
            "pivot2": {},
            "plyr": {},
            "qrprint": {},
            "qrread": {},
            "react": {},
            "resize": {},
            "sankey.d3": {},
            "smarteditor": {},
            "sparkline": {},
            "summernote": {},
            "summernote-bs4": {},
            "summernote-lite": {},
            "svgIcon": {},
            "toast": {},
            "toast-polyfill": {},
            "toast.map": {},
            "tuieditor": {},
            "tuieditor-full": {},
            "vis": {},
            "vue": {},
            "waves": {},
            "weather-icons": {}
          },
          "loadQueue": {
            "bootstrap.431.css": {},
            "font-awesome": {},
            "jjCodeMirror": {
              "catch": {
                "!type": "fn()"
              },
              "done": {
                "!type": "fn()"
              },
              "finally": {
                "!type": "fn()"
              },
              "then": {
                "!type": "fn()"
              }
            },
            "less": {}
          },
          "loadStatus": "boolean"
        },
        "options": {
          "activeAop": "boolean",
          "moduleName": "string",
          "version": "string"
        },
        "_autoLoad": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "appendChildComponent": {
          "!type": "fn()"
        },
        "appendChildScript": {
          "!type": "fn()"
        },
        "appendChildStyle": {
          "!type": "fn()"
        },
        "load": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "requirePromise": {
        "catch": {
          "!type": "fn()"
        },
        "done": {
          "!type": "fn()"
        },
        "finally": {
          "!type": "fn()"
        },
        "then": {
          "!type": "fn()"
        }
      },
      "requireResolv": {
        "!type": "fn()"
      },
      "route": {
        "options": {
          "moduleName": "string",
          "routeType": "string"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_filePath2URI": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "href": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_render": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "sse": {
        "VERSION": "string",
        "messageRoute": {
          "201": "TypedArray",
          "202": "TypedArray",
          "203": "TypedArray",
          "301": "TypedArray"
        },
        "options": {
          "moduleName": "string"
        },
        "addMessageRoute": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        }
      },
      "sseWellComm": {},
      "store": {
        "_dataMap": {},
        "options": {
          "activeAop": "boolean",
          "moduleName": "string",
          "version": "string"
        },
        "_render": {
          "!type": "fn()"
        },
        "clipBoard": {
          "!type": "fn()"
        },
        "cookie": {
          "!type": "fn()"
        },
        "cookieClear": {
          "!type": "fn()"
        },
        "dataMap": {
          "!type": "fn()"
        },
        "dataMapClear": {
          "!type": "fn()"
        },
        "getAuthCookie": {
          "!type": "fn()"
        },
        "localStorage": {
          "!type": "fn()"
        },
        "localStorageClear": {
          "!type": "fn()"
        },
        "setCookie": {
          "!type": "fn()"
        },
        "who": {
          "!type": "fn()"
        },
        "_clearEvent": {
          "!type": "fn()"
        },
        "_defaultOption": {
          "!type": "fn()"
        },
        "_onAopException": {
          "!type": "fn()"
        },
        "_setEvent": {
          "!type": "fn()"
        },
        "destroy": {
          "!type": "fn()"
        },
        "init": {
          "!type": "fn()"
        },
        "setOptions": {
          "!type": "fn()"
        }
      },
      "theme": {
        "mdiContainer": {},
        "options": {
          "homeIsEmpty": "boolean",
          "startUri": "string",
          "themeMdiUri": "string",
          "version": "string"
        },
        "requirePromise": {
          "catch": {
            "!type": "fn()"
          },
          "done": {
            "!type": "fn()"
          },
          "finally": {
            "!type": "fn()"
          },
          "then": {
            "!type": "fn()"
          }
        },
        "requireResolv": {
          "!type": "fn()"
        }
      },
      "uo": {
        "COM_CD": "string",
        "DELETED": "string",
        "DEV_CD": "string",
        "EDT_DATETIME": "string",
        "EDT_USER_ID": "string",
        "EDT_USER_NAME": "string",
        "EMAIL": "string",
        "IMAGE": "string",
        "LAN": "string",
        "LOGIN_ID": "string",
        "MAX_HOST_COUNT": "string",
        "MAX_IBATIS_COUNT": "string",
        "MENU_URI": "string",
        "PASSWORD": "string",
        "REG_DATETIME": "string",
        "REG_USER_ID": "string",
        "REG_USER_NAME": "string",
        "SIGN": "string",
        "THEME": "string",
        "TIMEZONE": "string",
        "USER_ID": "string",
        "USER_NAME": "string",
        "UUID": "string",
        "VERSION": "string",
        "exp": "number",
        "iat": "number",
        "ip": "string"
      }
    }
  }

}

/* ==JJHighlight.640.class================ */

/**
 * @classdesc 하이라이트 컴포넌트관리를 위한 클래스
 */
class JJHighlight extends HTMLElement {
  /**
   * @desc 생성자
   * @example -
   */
  constructor() {
    super();
    
    this.innerHTML = this.innerHTML + "\r\n";

    this.requirePromise = new Promise((resolv, reject) => {
      this.requireResolv = resolv;
    });
  }

  /**
   * @desc 돔연결 이벤트 콜백을 처리한다.
   * @example -
   */
  connectedCallback() {
    Jinja.require.load('highLight').then(() => {
      this.requireResolv();
    });

    this.requirePromise.then(() => {
      this.innerHTML = Jinja.global.encodeAce(this.innerHTML);
      hljs.configure({
         tabReplace: '  ',
 				languages: ['javascript','html'],
 				languageDetectRe: 'html'
      });      
      hljs.highlightBlock(this);
      if(this.dataset.lineNumber){
      	hljs.lineNumbersBlock(this);
      }
      
    });
  }

  /**
   * @desc 돔연결 해제 이벤트 콜백을 처리한다.
   * @example -
   */
  disconnectedCallback() {}

  /**
   * @desc 엘리먼트 속성변경 이벤트 콜백을 처리한다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {}

  /**
   * @desc 엘리먼트 위치이동 이벤트 콜백을 처리한다.
   * @param {Document} - 이전문서
   * @param {Document} - 대상문서
   * @example -
   */
  adoptedCallback(oldDoc, newDoc) {}
}

customElements.define('jj-highlight', JJHighlight);
/* ==JJSummernote.640.class================ */

/**
 * @classdesc 써머노트 컴포넌트관리를 위한 클래스
 */
class JJSummernote extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      require: ['summernote-lite'],
    };
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this._isUserChange = true;
    this.requirePromise.then(() => {
      $(this).summernote({
        maxHeight: 700,
        minHeight: 500,
        focus: false
      });

      $(this).on('summernote.change', e => {
        if (this._isUserChange) {
          this.dispatchEvent(
            new CustomEvent('changeedit', {
              detail: {
                mode: 'word'
              },
              bubbles: true
            })
          );
        }
      });
    });
  }

  /**
   * @desc 엘리먼트를 삭제한다.
   * @example -
   */
  _destroy() {
    $(this).summernote('destroy');
  }

  /**
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  getValue() {
    return $(this).summernote('code');
  }

  /**
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  setValue(val) {
    this.requirePromise.then(() => {
      this._isUserChange = false;

      $(this).summernote('code', val);

      this._isUserChange = true;
    });
  }

  /**
   * @desc 지정한 name, value로 옵션을 설정한다.
   * @param {String} - 옵션명
   * @param {*} - 옵션
   * @example -
   */
  option(name, value) {
    switch (name) {
    }
  }
}

customElements.define('jj-summernote', JJSummernote);
/* ==JJFrameViewer.640.class================ */

/**
 * @classdesc 페레임뷰어 컴포넌트관리를 위한 클래스<br><br>
 * 페레임뷰는 반응형의 시험환경을 제공한다.
 * page에서 생성된 코드를 시험대상환경에 맞춤식 실행을 제어한다.
 * 시험환경은 iframe으로 구성하여 독립성을 보장하고 프레임과의 연결은 채널을 구성한다.
 */
class JJFrameViewer extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    let result = {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      "default":  "studio",
      "workspaces":["studio"],
      "formSize": "ws-full",
      "useRefreshHtml": true,
      "mode": "view", // vhtml
      "version": "640"
    };

    if(workspaceMeta.options.studio && workspaceMeta.options.studio.workspaces){
      result.default = workspaceMeta.options.studio.default || result.default;
      result.workspaces = workspaceMeta.options.studio.workspaces || result.workspace;
    }

    return result;
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    let host = location.origin;
    let html =
        `<div class="jj-view-toolbar">` +
        `<div class="btn-group" role="group" aria-label="screen size">` +
        `<button class="btn btn-dark btn-sm" data-form-size="ws-full" title="full(full: 100%)">` +
        `<i class="fa fa-window-maximize"></i>` +
        `</button>` +
        `<button class="btn btn-dark btn-sm" data-form-size="ws-television" title="full(col-xl-: >=1200)">` +
        `<i class="fa fa-television"></i>` +
        `</button>` +
        `<button class="btn btn-dark btn-sm" data-form-size="ws-desktop" title="desktop(col-lg-: >=992px)">` +
        `<i class="fa fa-desktop"></i>` +
        `</button>` +
        `<button class="btn btn-dark btn-sm" data-form-size="ws-laptop" title="laptop(col-md-: >=768px)">` +
        `<i class="fa fa-laptop"></i>` +
        `</button>` +
        `<button class="btn btn-dark btn-sm" data-form-size="ws-tablet" title="tablet(col-sm-: >=576px)">` +
        `<i class="fa fa-tablet"></i>` +
        `</button>` +
        `<button class="btn btn-dark btn-sm" data-form-size="ws-phone" title="phone(col-:  375px)">` +
        `<i class="fa fa-phone"></i>` +
        `</button>` +
        `</div>` +
        `<label class="check-toggle  pl-2 pr-2">` +
        `<input type="checkbox"  jj-role="refreshMode"><t>Code Sync</t>` +
        `</label>` +
        `<div class="btn-group" role="group" aria-label="screenCapture">` +
        `<button hidden class="btn btn-info btn-sm" method="capture" title="화면캡쳐">` +
        `<i class="fa fa-camera"></i> Capture` +
        `</button>` +
        `<button class="btn btn-primary btn-sm" method="excute" title="실행">` +
        `<i class="fa fa-play"></i> Run` +
        `</button>` +
        `<button class="btn btn-primary btn-sm" method="excute2" title="실행">` +
        `<i class="fa fa-play"></i> Run2` +
        `</button>` +
        `<select class="sel-workspace form-control"></select>`+
        `</div>` +
        `</div>` +
        `<div class="frameView mt-1"></div>`;

    this.innerHTML = html;

    this.toolbar = this.querySelector('.jj-view-toolbar');
    this.frameView = this.querySelector('.frameView');
    this.workspace			= this.querySelector('select.sel-workspace');
    this.codeSync = this.querySelector(`[jj-role="refreshMode"]`);

    this.options.workspaces.forEach(item=>{
      let option = document.createElement("option");
      option.appendChild(document.createTextNode(item));
      this.workspace.appendChild(option);
    })

    this.workspace.value = this.options.default;
    if (document.location.pathname.split("/")[1] && document.location.pathname.split("/")[1] == "apps" ){
      this.workspace.hidden = true;
      this._siteRender();

    } else {
      if(Jinja.store.getMymemory("JJFrameViewer-host")){
        this.workspace.value = Jinja.store.getMymemory("JJFrameViewer-host");
      }
      this._siteRender(this.workspace.value);
    }

  }

  /**
   * @desc SITE 엘리먼트를 생성한다.
   * @param {String} - 호스트명
   * @example -
   */
  _siteRender(host) {
    if(host){
      Jinja.store.setMymemory("JJFrameViewer-host", host);
    } else {
      //  host = host || this.workspace.value; 
    }
    this.frameView.innerHTML = `<iframe class='iframe-view ${this.options.formSize}'></iframe>`;
    this.frame					     = this.querySelector('iframe');

    var doc = this.frame.contentWindow.document;

    doc.open();

    let Html = 
        `<html lang="ko">` +
        `<head>` +
        `<meta charset="utf-8">` +
        `<meta http-equiv="X-UA-Compatible" content="IE=edge">` +
        `<meta name="viewport" content="width=device-width, initial-scale=1.0">` +
        `<link type="text/css" rel="stylesheet" href="/extCss">` +
        `<link type="text/css" rel="stylesheet" href="/appCss">` +
        `<style id="appColor">${workspaceMeta.appColor || ''}</style>` +
        `</head>` +
        `<body>` +
        `<jj-application class="jj" testable="true">` +
        `<jj-form-excute>TestForm</jj-form-excute>` +
        `<script>var APP_MODE = 'edit';</script>` +
        `<script src="/extScript"></script>` +
        `<script src="/appScript"></script>` +
        `</jj-application>` +
        `</body>` +
        `</html>`;

    if(this.options.apiVersion == "v7"){
      //src="/apps/metamanager/extScript"
      let extScriptUrl = `/extScript`;
      let appScriptUrl = `/appScript`;
      let extCssUrl = `/extCss`;
      let appCsstUrl = `/appCss`;

      if (document.location.pathname.split("/")[1] && document.location.pathname.split("/")[1] == "apps" ){
        extScriptUrl = `/apps/${workspaceMeta.options.appInfo.workspaceUri}/extScript`;
        appScriptUrl = `/apps/${workspaceMeta.options.appInfo.workspaceUri}/appScript`;
      }

      if (host){
        extScriptUrl = `/apps/${host}/extScript`;
        appScriptUrl = `/apps/${host}/appScript`;
        extCssUrl = `/apps/${host}/extCss`;
        appCsstUrl = `/apps/${host}/appCss`;

      } else {
        extScriptUrl = `/apps/${workspaceMeta.options.appInfo.workspaceUri}/extScript`;
        appScriptUrl = `/apps/${workspaceMeta.options.appInfo.workspaceUri}/appScript`;
        extCssUrl = `/apps/${workspaceMeta.options.appInfo.workspaceUri}/extCss`;
        appCsstUrl = `/apps/${workspaceMeta.options.appInfo.workspaceUri}/appCss`;

      }


      Html = 
        `<html lang="ko">` +
        `<head>` +
        `<meta charset="utf-8">` +
        `<meta http-equiv="X-UA-Compatible" content="IE=edge">` +
        `<meta name="viewport" content="width=device-width, initial-scale=1.0">` +
        `<link type="text/css" rel="stylesheet" href="${extCssUrl}">` +
        `<link type="text/css" rel="stylesheet" href="${appCsstUrl}">` +
        `<style id="appColor">${workspaceMeta.appColor || ''}</style>` +
        `</head>` +
        `<body>` +
        `<jj-application class="jj" testable="true">` +
        `<jj-form-excute>TestForm</jj-form-excute>` +
        `<script>var APP_MODE = 'edit';</script>` +
        `<script src="${extScriptUrl}"></script>` +
        `<script src="${appScriptUrl}"></script>` +
        `</jj-application>` +
        `</body>` +
        `</html>`;
    }
    doc.write(Html);
    doc.close();
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('click', e => {
      if (e.target.matches('[data-form-size]')) {
        this.frame.$classRemoveAdd(
          ['ws-full', 'ws-television', 'ws-desktop', 'ws-laptop', 'ws-tablet', 'ws-phone'],
          e.target.dataset.formSize
        );
      }
      if (e.target.matches('[method="excute"]')) {
        this.dispatchEvent(new CustomEvent('excute', { bubbles: true }));
      }
      if (e.target.matches('[method="excute2"]')) {
        this._siteRender(this.workspace.value);
        setTimeout(e=>{
          this.dispatchEvent(new CustomEvent('excute', { bubbles: true }));
        },500)

      }
      if (e.target.matches('[method="capture"]')) {
        Jinja.global.uiCapture(this.frameView, "APPSPEED.640");
      }
    });

    this.workspace.addEventListener("input", e=>{
      this._siteRender(this.workspace.value);
      if(this._last){
        setTimeout(e=>{
          this.excuteLoad(this._last.fileBody, this._last.isTheme);  
        },500)
      }
    })
  }


  /**
   * @desc 페이지정보를 뷰어에 반영한다.
   * @param {String} - 페이지정보
   * @return {String} - 테바여부
   * @example -
   */
  excuteLoad(fileBody, isTheme, viewId) {
    this._last = {
      "fileBody": fileBody,
      "isTheme": isTheme
    };
    this.frame.contentWindow.postMessage({
      "method": "excuteLoad",
      "fileBody": fileBody,
      "isTheme": isTheme,
      "viewId": viewId
    });
  }

  /**
   * @desc 페이지정보와 뷰어를 동기화한다.
   * @param {String} - 페이지정보
   * @example -
   */
  syncLoad(fileBody) {
    if (this.codeSync.checked) {
      this.excuteLoad(fileBody);
    }
  }
}

customElements.define('jj-frame-viewer', JJFrameViewer);
/* ==JJDynamicGrid.640.class================ */

/**
 * @classdesc 다이나믹그리드 컴포넌트관리를 위한 클래스
 */
class JJDynamicGrid extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    
    return {
      "mergeTableCell": -1
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @param {String} - 챠트유형
   * @example -
   */
  _render() {
    this.tableHeadWarp = document.createElement('div');
    this.tableHeadWarp.setAttribute('class', 'table-head-warp');
    this.appendChild(this.tableHeadWarp);
    this.tableBodyWarp = document.createElement('div');
    this.tableBodyWarp.setAttribute('class', 'table-body-warp');
    this.appendChild(this.tableBodyWarp);
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.tableBodyWarp.addEventListener('scroll', e => {
      this.tableHeadWarp.scrollLeft = this.tableBodyWarp.scrollLeft;

      if (this.bodyFixTable) {
        this.bodyFixTable.style.left = this.tableBodyWarp.scrollLeft + 'px';
        this.headFixTable.style.left = this.tableBodyWarp.scrollLeft + 'px';
      }
    });

    this.tableBodyWarp.addEventListener('click', e => {
      if (e.target.matches('tr[group][level="0"] *')) {
        let tr = e.target.closest('tr');

        tr.classList.toggle('on');
      } else if (e.target.matches('tr *')) {
        let tr = e.target.closest('tr');
        let curRowIndex = Jinja.dom.findIndex(tr.parentElement, tr);

        if (!e.ctrlKey) {
          if (this.bodyTable.querySelectorAll(`tbody tr.selected`).length) {
            this.bodyTable
              .querySelectorAll(`tbody tr.selected`)
              .forEach(tr => tr.classList.remove('selected'));
          }

          if (
            this.bodyFixTable &&
            this.bodyFixTable.querySelectorAll(`tbody tr.selected`).length
          ) {
            this.bodyFixTable
              .querySelectorAll(`tbody tr.selected`)
              .forEach(tr => tr.classList.remove('selected'));
          }
        }

        if (
          this.bodyTable &&
          this.bodyTable.querySelector(`tbody tr:nth-child(${curRowIndex + 1})`)
        ) {
          this.bodyTable
            .querySelector(`tbody tr:nth-child(${curRowIndex + 1})`)
            .classList.add('selected');
        }

        if (
          this.bodyFixTable &&
          this.bodyFixTable.querySelector(
            `tbody tr:nth-child(${curRowIndex + 1})`
          )
        ) {
          this.bodyFixTable
            .querySelector(`tbody tr:nth-child(${curRowIndex + 1})`)
            .classList.add('selected');
        }

        this.dispatchEvent(
          new CustomEvent('trClick', {
            detail: {
              tr: e.target.closest('tr'),
              data: this.options.dataSet,
              row: this.options.dataSet[curRowIndex],
              rowIndex: curRowIndex
            },
            bubbles: true
          })
        );
      }
    });

    this.tableBodyWarp.addEventListener('mouseover', e => {
      if (e.target.matches('tr *')) {
        let tr = e.target.closest('tr');
        let curRowIndex = Jinja.dom.findIndex(tr.parentElement, tr);

        if (this.bodyTable && this.bodyTable.querySelector(`tbody tr.hover`)) {
          this.bodyTable
            .querySelector(`tbody tr.hover`)
            .classList.remove('hover');
        }

        if (
          this.bodyFixTable &&
          this.bodyFixTable.querySelector(`tbody tr.hover`)
        ) {
          this.bodyFixTable
            .querySelector(`tbody tr.hover`)
            .classList.remove('hover');
        }

        if (
          this.bodyTable &&
          this.bodyTable.querySelector(`tbody tr:nth-child(${curRowIndex + 1})`)
        ) {
          this.bodyTable
            .querySelector(`tbody tr:nth-child(${curRowIndex + 1})`)
            .classList.add('hover');
        }

        if (
          this.bodyFixTable &&
          this.bodyFixTable.querySelector(
            `tbody tr:nth-child(${curRowIndex + 1})`
          )
        ) {
          this.bodyFixTable
            .querySelector(`tbody tr:nth-child(${curRowIndex + 1})`)
            .classList.add('hover');
        }
      }
    });

    this.tableBodyWarp.addEventListener('mouseout', e => {
      if (this.bodyTable && this.bodyTable.querySelector(`tbody tr.hover`)) {
        this.bodyTable
          .querySelector(`tbody tr.hover`)
          .classList.remove('hover');
      }

      if (
        this.bodyFixTable &&
        this.bodyFixTable.querySelector(`tbody tr.hover`)
      ) {
        this.bodyFixTable
          .querySelector(`tbody tr.hover`)
          .classList.remove('hover');
      }
    });
    
       
  }

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {}

  /**
   * @desc 선택된 행의 데이터를 반환한다.
   * @return {Array} - 행데이터
   * @example -
   */
  getSelectRow() {
    let result = [];

    if (this.bodyTable.querySelectorAll(`tbody tr.selected`).length) {
      this.bodyTable.querySelectorAll(`tbody tr.selected`).forEach(tr => {
        let curRowIndex = Jinja.dom.findIndex(tr.parentElement, tr);

        result.push(this.options.dataSet[curRowIndex]);
      });
    }

    return result;
  }

  /**
   * @desc 지정한 옵션으로 그리드를 재생성한다.
   * @param {Object} - 옵션
   * @example -
   */
  render(options) {
    Object.assign(this.options, options);

    let html = Jinja.global.json2Grid(
      options.dataSet,
      options.categories,
      options.tableHeades,
      options.format
    );

    this.tableHeadWarp.$empty();
    this.tableBodyWarp.$empty();

    this.tableBodyWarp.innerHTML = html;

    this.bodyTable = this.tableBodyWarp.querySelector('table');
    this.headTable = this.bodyTable.cloneNode(true);
    this.headTable.querySelector('tbody').remove();

    this.bodyTable.querySelectorAll('thead').forEach(el => el.remove());
    this.tableHeadWarp.appendChild(this.headTable);
    this.tableBodyWarp.appendChild(this.bodyTable);

    this.tableHeadWarp.style.height = this.headTable.offsetHeight + 'px';

    if (options.fixedCol) {
      this.fixed(options.fixedCol);
    }
		
    if(options.mergeTableCell >= 0){
      this.querySelectorAll('table').forEach(table=>{
      Jinja.global.mergeTableCell(table, options.mergeTableCell);
      });
    }

  }

  /**
   * @desc 지정한 컬럼를 고정컬럼으로 설정한다.
   * @param {String} - 대상컬럼순번
   * @example -
   */
  fixed(fixColIndex) {
    this.headFixTable = this.tableHeadWarp
      .querySelector('table')
      .cloneNode(true);
    this.bodyFixTable = this.tableBodyWarp
      .querySelector('table')
      .cloneNode(true);

    this.headFixTable.classList.add('fix-table');
    this.bodyFixTable.classList.add('fix-table');
    this.tableHeadWarp.appendChild(this.headFixTable);
    this.tableBodyWarp.appendChild(this.bodyFixTable);

    this.headFixTable
      .querySelectorAll(`colgroup >*:nth-child(${fixColIndex}) ~ *`)
      .forEach(el => el.remove());

    this.headFixTable.querySelectorAll('thead tr').forEach(tr => {
      tr.querySelectorAll(
        `:scope >*:nth-child(${fixColIndex}) ~ *`
      ).forEach(el => el.remove());
    });

    this.bodyFixTable
      .querySelectorAll(`colgroup >*:nth-child(${fixColIndex}) ~ *`)
      .forEach(el => el.remove());

    this.bodyFixTable.querySelectorAll('tbody tr').forEach(tr => {
      tr.querySelectorAll(
        `:scope >*:nth-child(${fixColIndex}) ~ *`
      ).forEach(el => el.remove());
    });

    this.bodyFixTable.querySelectorAll('tfoot tr').forEach(tr => {
      tr.querySelectorAll(
        `:scope >*:nth-child(${fixColIndex}) ~ *`
      ).forEach(el => el.remove());
    });
  }

  /**
   * @desc 그룹을 설정한다.
   * @example -
   */
  group() {
    let curGroupName = '';

    this.bodyTable.querySelectorAll(`tbody tr`).forEach((tr, index) => {
      let groupName = tr.querySelector('td').innerText;

      if (curGroupName != groupName) {
        let groupTr = tr.cloneNode(true);

        tr.before(groupTr);

        groupTr.classList.add('bg-primary');
        groupTr.setAttribute('group', groupName);
        groupTr.setAttribute('level', 0);
        groupTr
          .querySelectorAll(`td:nth-child(1) ~ *`)
          .forEach(td => (td.hidden = true));
        groupTr
          .querySelector(`td`)
          .setAttribute('colspan', groupTr.querySelectorAll(`td`).length);

        curGroupName = groupName;
      }

      tr.setAttribute('group', groupName);
      tr.setAttribute('level', 1);
    });
  }

  /**
   * @desc 지정한 컬럼의 그룹을 설정한다.
   * @param {String} - 컬럼목록
   * @example -
   */
  xgroup(colIndex) {
    let curGroupName = '';

    this.options.dataSet.forEach((row, index) => {
      let groupName = row[colIndex];

      if (curGroupName != groupName) {
        let curTr = this.bodyTable.querySelector(
          `tbody tr:nth-child(${index + 1})`
        );

        let groupTr = curTr.cloneNode(true);

        curTr.before(groupTr);

        groupTr.classList.add('bg-primary');

        curGroupName = groupName;
      }
    });
  }

  /**
   * @desc 그리드 데이터를 엑셀파일로 내보내기한다.
   * @param {String} - 파일제목
   * @example -
   */
  exportexcel(title) {}
}

customElements.define('jj-dynamic-grid', JJDynamicGrid);
/* ==JJGrid.640.class================ */

/**
 * @classdesc 그리드 컴포넌트관리를 위한 클래스
 */
class JJGrid extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this.curRowIndex;
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      "gridClass": "jjGrid",
      "title": { "text": "" },
      "workspace": workspaceMeta.options.appInfo.jbatisId,
      "table": "",
      "keyField": "",
      "data": [],
      "colModel": [
        { "label": 'Column1' },
        { "label": 'Column2' },
        { "label": 'Column3' },
        { "label": 'Column4' },
        { "label": 'Column5' },
        { "label": 'Column6' },
        { "label": 'Column7' },
        { "label": 'Column8' },
        { "label": 'Column9' },
        { "label": 'Column10' }
      ],
      "pageSize": 10,
      "fixColIndex": 0,
      "addInTool": [],
      "uploadField": [],
      "addIn": {},
      "headContent": '',
      "autoFind": false,
      "isCellMearge": false,
      "isFoot": false,
      "isScroll": true,
      "isLayoutFixed": false,
      "isSort": true,
      "isCheck": true
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @param {String} - 챠트유형
   * @example -
   */
  _render() {
    let html = 
        `<div class="grid-warp" >` +
        `<table tabindex=-1>` +
        `<colgroup></colgroup>` +
        `<thead></thead>` +
        `<tbody></tbody>` +
        `<tfoot></tfoot>` +
        `</table>` +
        `</div>` +
        `<div class='sArea'><div class='uScrCur'></div></div>` +
        `<div class="fix-grid-warp"></div>` +
        `<div class="size-bar"></div>`;

    this.innerHTML = html;
    this.table = this.querySelector('.grid-warp >table');
    this.tableHead = this.querySelector('.grid-warp >table > thead');
    this.tableBody = this.querySelector('.grid-warp >table > tbody');
    this.fixTableWarp = this.querySelector('.fix-grid-warp');
    this.sizeBar = this.querySelector('.size-bar');
    this.scrollCur = this.querySelector('.uScrCur');
    this.sysColumnCount = 2;

    if (!this.options.isScroll) {
      this.querySelector('.sArea').hidden = true;
    }

    this.querySelector('tfoot').setAttribute('class', 'hidden');
    this.querySelector('tfoot').hidden = true;

    if(this.options.isLayoutFixed){
      this.classList.add('fixed');
    }

    this.setColModel();
    this.oJJSortable = new JJSortable([this.tableHead.lastElementChild], {
      handles: 'e,w'
    });
    this.oJJMoveable = new JJMoveable(this.scrollCur, {
      handles: 's'
    });
  }

  /**
   * @desc 컬럼그룹을 생성한다.
   * @example -
   */
  _renderColGroup() {
    this.table.querySelector(`colgroup`).innerHTML = '';

    let colGroup = `<col style="width:50px;"><col style="width:50px;">`;

    if (!this.options.isCheck) {
      colGroup = `<col style="width:50px;"><col style="width:0px;">`;
    }

    this.options.colModel.forEach((col, index) => {
      let newCol = Object.assign(
        {},
        {
          width: '100px'
        },
        col
      );

      colGroup += `<col style="width:${newCol.width};" class="text-center">`;
    });

    colGroup += `<col class="sizeEmpty">`;

    this.table.querySelector(`colgroup`).innerHTML = colGroup;
  }

  /**
   * @desc 행순번에 해당하는 행정보로 그리드 행을 생성한다.
   * @param {Number} - 행순번
   * @return {String} - 그리드 행 HTML
   * @example -
   */
  _renderRow(rowIndex) {
    let html = '';
    let row = this.options.data[rowIndex];
    let statusClass = '';
    let crudClass = '';

    if (row) {
      if (row._checked) statusClass += ' checked';
      if (this.curRowIndex == rowIndex ) statusClass += ' selected';
      
      html = `<tr row-index=${rowIndex} class="${statusClass}" _crud_="${row._crud_}">`;
      html += `<td class="num">${rowIndex + 1}</td>`;
      html += `<td class="trCheck"><i class="fa"></i></td>`;

      this.options.colModel.forEach((col, index) => {
        if(col.isHiddenColumn) return;
        let newCol = Object.assign(
          {},
          {
            label: '',
            field: '',
            width: '100px',
            align: '',
            type: 'text',
            used: true,
            visible: true,
            editable: false,
            required: false,
            tdClass: '',
            btnClass: 'btn btn-primary',
            btnLabel: '',
            btnEvent: ''
          },
          col
        );

        let dispValue = row[newCol.field];

        switch (newCol.type) {
          case 'money':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              dispValue = dispValue.$toCurrencyFormat();
            }

            if (!newCol.align) newCol.align = 'text-right';

            break;
          case 'percent':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              dispValue = dispValue.$toPercentFormat();
            }

            if (!newCol.align) newCol.align = 'text-right';

            break;
          case 'number':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              dispValue = dispValue.toLocaleString();
            }

            if (!newCol.align) newCol.align = 'text-right';

            break;
          case 'float':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              dispValue = dispValue.$toFloatFormat();
            }

            if (!newCol.align) newCol.align = 'text-right';

            break;
          case 'int':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              dispValue = dispValue.$toIntFormat();
            }

            if (!newCol.align) newCol.align = 'text-right';

            break;
          case 'date':
            if (dispValue) {
              dispValue = dispValue.$toFormat('yyyy-MM-dd');
            }

            if (!newCol.align) newCol.align = 'text-center';

            break;
          case 'datetime':
            if (dispValue) {
              dispValue = dispValue.$toFormat('yyyy-MM-dd HH:mm');
            }

            if (!newCol.align) newCol.align = 'text-center';

            break;
          default:
            if (!newCol.align) newCol.align = 'text-left';

            break;
        }

        switch (newCol.type) {
          case 'money':
          case 'percent':
          case 'number':
          case 'float':
          case 'int':
            if (newCol.editable) {
              html += `<td><input type="number" class="form-control text-right" value="${row[newCol.field]}" bind="${newCol.field}"></td>`;
            } else {
              html += `<td class="${newCol.align}">${dispValue}</td>`;
            }

            break;
          case 'date':
            if (newCol.editable) {
              html += `<td><input type="date" class="form-control" value="${row[newCol.field]}" bind="${newCol.field}"></td>`;
            } else {
              html += `<td class="${newCol.align}">${dispValue}</td>`;
            }

            break;
          case 'datetime':
            if (newCol.editable) {
              html += `<td><input type="datetime-local" class="form-control" value="${row[newCol.field]}" bind="${newCol.field}"></td>`;
            } else {
              html += `<td class="${newCol.align}">${dispValue}</td>`;
            }

            break;
          case 'select':
            if (newCol.editable) {
              html += `<td><select class="form-control" bind="${newCol.field}" >`;

              if (!newCol.required) {
                html += `<option value="">-select-</option>`;
              }

              Jinja.code.codes[newCol.code].forEach(item => {
                if (row[newCol.field] == item.CODE) {
                  html += `<option value="${item.CODE}" selected>${item.NAME}</option>`;
                } else {
                  html += `<option value="${item.CODE}">${item.NAME}</option>`;
                }
              });

              html += `</select></td>`;
            } else {
              dispValue = Jinja.code.getCodeName(
                newCol.code,
                row[newCol.field]
              );

              html += `<td class="${newCol.align}">${dispValue || ''}</td>`;
            }

            break;
          case 'button':
            html += `<td><button type="button" role="${newCol.btnEvent}" class="${newCol.btnClass}">${newCol.btnLabel || newCol.label}</button></td>`;

            break;
          case 'check':
            if (newCol.editable) {
              if (!row[newCol.field] || row[newCol.field] == '0') {
                html += `<td><input type="checkbox" bind="${newCol.field}"></td>`;
              } else {
                html += `<td><input type="checkbox" checked bind="${newCol.field}"></td>`;
              }
            } else {
              html += `<td>${dispValue}</td>`;
            }

            break;
          default:
            if (newCol.editable) {
              html += `<td class="${
              newCol.align
            }"><input type="text" class="form-control" value="${
              row[newCol.field] || ''
            }" bind="${newCol.field}"></td>`;
            } else {
              html += `<td class="${newCol.align}">${dispValue}</td>`;
            }

            break;
        }
      });

      html += `<td class="sizeEmpty"</td></tr>`;
    }

    return html;
  }

  /**
   * @desc 행순번 기준으로 그리드 현재페이지를 생성한다.
   * @param {Number} - 행순번
   * @example -
   */
  _renderPage(rowIndex) {
    rowIndex = parseInt(rowIndex);

    let firstRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );
    let bodyHtml = '';

    for (let i = 0; i < this.options.pageSize; i++) {
      if (this.options.data && this.options.data[rowIndex]) {
        bodyHtml += this._renderRow(rowIndex);
      } else {
        bodyHtml += this._blankRowHtml;
      }

      rowIndex++;
    }

    this.tableBody.innerHTML = bodyHtml;
    this.scrollTopSync();
    this._renderFixCol();
  }

  /**
   * @desc 고정컬럼을 생성한다.
   * @example -
   */
  _renderFixCol() {
    this._meargeTableCell();

    if (this.options.fixColIndex) {
      let cloneTable = this.table.cloneNode(true);

      cloneTable
        .querySelectorAll(
        `colgroup >*:nth-child(${this.options.fixColIndex}) ~ *`
      )
        .forEach(el => el.remove());

      cloneTable.querySelectorAll('thead tr').forEach(tr => {
        tr.querySelectorAll(
          `:scope >*:nth-child(${this.options.fixColIndex}) ~ *`
        ).forEach(el => el.remove());
      });

      cloneTable.querySelectorAll('tbody tr').forEach(tr => {
        tr.querySelectorAll(
          `:scope >*:nth-child(${this.options.fixColIndex}) ~ *`
        ).forEach(el => el.remove());
      });

      cloneTable.querySelectorAll('tfoot tr').forEach(tr => {
        tr.querySelectorAll(
          `:scope >*:nth-child(${this.options.fixColIndex}) ~ *`
        ).forEach(el => el.remove());
      });

      this.fixTableWarp.$empty();
      this.fixTableWarp.appendChild(cloneTable);
      this.fixTableWarp.style.width = cloneTable.offsetWidth + '.px';
      this.fixTableWarp.hidden = false;
    } else {
      this.fixTableWarp.hidden = true;
    }

    this._meargeTableCell();
  }

  /**
   * @desc 지정된 table의 cell들을 병합한다.
   * @param {Object} - 테이블
   * @param {Number} - 셀번호
   * @example -
   */
  _meargeTableCell(table, cellIndex) {
    if (!this.options.isCellMearge) return;

    if (!table) table = this.table;
    if (!cellIndex) cellIndex = 2;

    let spanTr = null;
    let spanTd = null;
    let spanCount = 1;
    let spanText = null;

    table.querySelectorAll(`[rowspan], [hidden]`).forEach(el => {
      el.removeAttribute('rowspan');
      el.removeAttribute('hidden');
    });

    table.querySelectorAll(`tbody tr`).forEach(tr => {
      if (tr.getAttribute('row-index')) {
        if (!spanTr) {
          spanTr = tr;
          spanTd = spanTr.childNodes[cellIndex];
          spanText = spanTd.innerText;
          spanCount = 1;
        } else {
          if (spanText == tr.childNodes[cellIndex].innerText) {
            spanCount++;
            spanTd.setAttribute('rowspan', spanCount);
            tr.childNodes[cellIndex].hidden = true;
          } else {
            spanTr = tr;
            spanTd = spanTr.childNodes[cellIndex];
            spanText = spanTd.innerText;
            spanCount = 1;
          }
        }
      }
    });
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('wheel', e => {
      if (
        !['INPUT', 'SELECT'].includes(e.target.tagName) &&
        e.target.matches('tbody *')
      ) {
        this.onWheel(e);
      }
    });

    this.addEventListener('keydown', e => {
      if (!['INPUT', 'SELECT'].includes(e.target.tagName)) {
        this.onKeyDown(e);
      }
    });

    this.addEventListener('click', e => {
      if (e.target.matches('tbody td.trCheck')) {
        this.onTrChkSelect(e);
        return;
      }
      if (e.target.matches('tbody button[role]')) {
        this.onRoleButtonClick(e);
      }
      if (e.target.matches('tr *')) {
        this.onTrClick(e);
      }
    });
    
    this.addEventListener('dblclick', e => {
      if (e.target.matches('tbody td.trCheck')) {
        return;
      }
      if (e.target.matches('tbody button[role]')) {
        return;
      }
      if (e.target.matches('tr *')) {
        this.onTrDblClick(e);
      }
    });

    
    
    this.addEventListener('mousedown', e => {
      if (e.target.matches('thead th')) {
        this.onThSelect(e);
      }

      if (e.target.matches('.sortIcon')) {
        this.onSort(e);
      }

      if (e.target.matches('.size-bar')) {
        this.onResizeStart(e);
      }
    });

    this.addEventListener('mousemove', e => {
      this.onMouseOver(e);
    });

    this.addEventListener('mouseup', e => {
      if (e.target.matches('thead th')) {
        this.onThUnSelect(e);
      }
    });

    this.addEventListener('scroll', e => {
      this.onScrollHorizontal(e);
    });

    this.addEventListener('input', e => {
      if (e.target.matches('tbody tr *')) {
        this.onInput(e);
      }
    });

    this.addEventListener('JJSortableEnd', e => {
      this.onColSorted(e);
    });

    this.addEventListener('JJMoveable.move', e => {
      if (e.target.matches('.uScrCur')) {
        this.onScrollMove(e);
      }
    });
  }

  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {
    this.oJJSortable.destroy();
    this.oJJMoveable.destroy();
  }

  /**
   * @desc 그리드 데이터에서 변경된 데이터를 저장한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  _uploadCrudData() {
    let sendData = [];

    this.getCrudChangeData().forEach(item => {
      let row = {
        table: this.options.table,
        keyField: this.options.keyField,
        keyValue: item[this.options.keyField],
        crud: item._crud_,
        field: {}
      };

      switch (item._crud_) {
        case 'U':
          Object.keys(item._changeData_).forEach(col => {
            row.field[col] = item._changeData_[col].val;
          });

          break;
        case 'C':
          Object.keys(item).forEach(col => {
            if (!col.startsWith('_')) {
              row.field[col] = item[col];
            }
          });

          break;
        case 'D':
          break;
      }

      sendData.push(row);
    });

    return Jinja.ajax.post(`/${this.options.apiVersion}/jbatis/ds201/restComcd/multirows`, {
      rows: sendData
    });
  }

  /**
   * @static
   * @memberof JJGrid
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ['data-type'];
  }

  /**
   * @desc 지정한 옵션으로 그리드를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    Object.assign(this.options, options);

    this._render();
  }

  /**
   * @desc 컬럼모델 정보로 그리드 컬럼을 생성한다.
   * @example -
   */
  setColModel() {
    let colGroup = `<col style="width:50px;"><col style="width:50px;">`;

    if (!this.options.isCheck) {
      colGroup = `<col style="width:50px;"><col style="width:0px;">`;
    }

    let thHtml = `<tr class=""><th>no</th><th>!</th>`;
    let brHtml = `<tr class=""><td>&nbsp</td><td>&nbsp</td>`;
    let tfHtml = `<tr class=""><td>&nbsp</td><td>&nbsp</td>`;

    this.options.colModel.forEach((col, index) => {
      if(col.isHiddenColumn) return;
      let newCol = Object.assign(
        {},
        {
          label: '',
          field: '',
          width: '100px',
          align: '',
          type: 'text',
          used: true,
          visible: true,
          editable: false,
          tdClass: '',
          btnClass: 'btn btn-primary',
          btnLabel: ''
        },
        col
      );

      colGroup += `<col style="width:${newCol.width};" class="text-center">`;
      thHtml += `<th><label>${newCol.label.replaceAll('\n', '<br />')}</label>`;

      if (this.options.isSort) {
        thHtml += `<span class="sortIcon"><i class="fa"></i></span>`;
      }

      thHtml += `</th>`;
      brHtml += `<td>&nbsp</td>`;
      tfHtml += `<td></td>`;
    });

    colGroup += `<col class="sizeEmpty">`;
    thHtml += `<th class="sizeEmpty"></th></tr>`;
    brHtml += `<td class="sizeEmpty"></td></tr>`;
    tfHtml += `<td class="sizeEmpty"></td></tr>`;

    let bodyHtml = '';

    for (let i = 0; i < this.options.pageSize; i++) {
      if (this.options.data && this.options.data[i]) {
        bodyHtml += this._renderRow(i);
      } else {
        bodyHtml += brHtml;
      }
    }

    this._blankRowHtml = brHtml;
    this.table.querySelector(`colgroup`).innerHTML = colGroup;
    this.table.querySelector(`thead`).innerHTML = thHtml;
    this.table.querySelector(`tbody`).innerHTML = bodyHtml;
    this.table.querySelector(`tfoot`).innerHTML = tfHtml;

    this._renderFixCol();
  }

  /**
   * @desc 이전 행에 데이터를 바인딩한다.
   * @example -
   */
  prevRowBind() {
    let firstRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );

    if (parseInt(firstRowIndex) > 0) {
      let next = parseInt(firstRowIndex) - 1;

      if (this.options.data[next]) {
        this.tableBody.lastElementChild.remove();

        Jinja.dom.prepend(this.tableBody, this._renderRow(next));

        this.scrollTopSync();
      }

      this._renderFixCol();
    }
  }

  /**
   * @desc 다음 행에 데이터를 바인딩한다.
   * @example -
   */
  nextRowBind() {
    let lastRowIndex = this.tableBody.lastElementChild.getAttribute(
      'row-index'
    );

    if (lastRowIndex) {
      let next = parseInt(lastRowIndex) + 1;

      if (this.options.data[next]) {
        this.tableBody.firstElementChild.remove();

        Jinja.dom.append(this.tableBody, this._renderRow(next));

        this.scrollTopSync();
      }

      this._renderFixCol();
    }
  }

  /**
   * @desc 이전 페이지에 데이터를 바인딩한다.
   * @example -
   */
  prevPageBind() {
    let firstRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );

    if (parseInt(firstRowIndex) > 0) {
      let next = Math.max(parseInt(firstRowIndex) - this.options.pageSize, 0);

      this._renderPage(next);
      this.scrollTopSync();
    }
  }

  /**
   * @desc 다음 페이지에 데이터를 바인딩한다.
   * @example -
   */
  nextPageBind() {
    let lastRowIndex = this.tableBody.lastElementChild.getAttribute(
      'row-index'
    );

    if (lastRowIndex) {
      let next = parseInt(lastRowIndex) + 1;

      if (this.options.data[next]) {
        this._renderPage(next);
        this.scrollTopSync();
      }
    }
  }

  firstPageBind(){
    this._renderPage(0);
  }
  
  // 마지막 페이지로 이동하여 표시
  lastPageBind(){
    let moveIndex = Math.max(this.options.data.length - this.options.pageSize, 0)
    this._renderPage(moveIndex);
  }
  
  // 지정된 레코드 번호로 이동
  rowIndexSelect(rowIndex){
//     if(this.tableBody.querySelector("tr.selected")){
//       this.tableBody.querySelector("tr.selected").classList.remove("selected");
//     }

    let tr = this.tableBody.querySelector(`tr[row-index="${rowIndex}"]`);
    
    if(tr){
      tr.querySelector('td').click();
    }
    return tr;
  }
    
  
  
  /**
   * @desc 그리드 데이터에서 변경된 데이터를 반환한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  getCrudChangeData() {
    return Jinja.global.getChangeCRUD(this.options.data);
  }

  /**
   * @desc 지정한 데이터를 그리드에 반영한다.
   * @param {Array} - 그리드 데이터
   * @example -
   */
  updateData(rows) {
    this.options.data = rows;
    this._renderPage(0);
    
    if(this.options.autoFind){
      this.rowIndexSelect(0);
    }
    
  }

  /**
   * @desc 지정한 데이터 그리드 데이터로 변환하고 그리드에 반영한다.
   * @param {Array} - 대상 데이터
   * @return {Array} - 변경된 데이터
   * @example -
   */
  updateCrudData(rows) {
    Jinja.global.setCRUD(rows);

    this.updateData(rows);

    return rows;
  }

  /**
   * @desc 그리드 데이터에서 변경된 데이터를 저장한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  uploadCrudData() {
    return new Promise((resolve, reject) => {
      if (this.options.table && this.options.keyField) {
        this._uploadCrudData()
          .then(resule => {
          return resolve(true);
        })
          .catch(resule => {
          return reject(false);
        });
      } else {
        let message = '테이블, 키필드 속성이 지정되지 않았습니다.';

        alert(message);

        reject(false);
      }
    });
  }

  /**
   * @desc 새 데이터를 추가합니다
   * @return {Promiss} - 실행결과
   * @example -
   */
  appendRow(newRow) {
    let systemColumns = [
      "REG_DATE",
      "REG_DATETIME",
      "REG_USER",
      "REG_USER_ID",
      "REG_USER_NAME",
      "EDT_DATE",
      "EDT_DATETIME",
      "EDT_USER",
      "EDT_USER_ID",
      "EDT_USER_NAME",
    ];
    
    newRow = newRow || {};
		
 		this.options.colModel.forEach((col, index) => {
      if(!systemColumns.includes(col.field)){
      	newRow[col.field] = newRow[col.field]||col.default||"";
      }
    });    

    Jinja.global.addCRUDrow(this.options.data, newRow);

    // 추가후 마지막 페이지로 이동시킴
    this.lastPageBind();
    // 지정된 레코드인덱스 번호로 선택활성화
    this.rowIndexSelect(this.options.data.length-1);

  }


  /**
   * @desc 행클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onTrClick(event) {
    let curTr = event.target.$closest(`tr`);
    this.querySelectorAll("tr.selected").forEach(el=> el.classList.remove("selected"));
    

    this.curRowIndex = parseInt(curTr.getAttribute('row-index'));

		this.querySelectorAll(`tr[row-index="${this.curRowIndex}"]`).forEach(el=> el.classList.add("selected"));
    
    if (this.curRowIndex >= 0) {
      this.dispatchEvent(
        new CustomEvent('trClick', {
          detail: {
            tr: curTr,
            data: this.options.data,
            row: this.options.data[this.curRowIndex],
            rowIndex: this.curRowIndex
          },
          bubbles: true
        })
      );
    }
  }
  
 /**
   * @desc 행클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onTrDblClick(event) {
    let curTr = event.target.$closest(`tr`);
    this.querySelectorAll("tr.selected").forEach(el=> el.classList.remove("selected"));
    

    this.curRowIndex = parseInt(curTr.getAttribute('row-index'));

		this.querySelectorAll(`tr[row-index="${this.curRowIndex}"]`).forEach(el=> el.classList.add("selected"));
    
    if (this.curRowIndex >= 0) {
      this.dispatchEvent(
        new CustomEvent('trDblClick', {
          detail: {
            tr: curTr,
            data: this.options.data,
            row: this.options.data[this.curRowIndex],
            rowIndex: this.curRowIndex
          },
          bubbles: true
        })
      );
    }
  }
  

  /**
   * @desc 룰버튼 클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onRoleButtonClick(event) {
    let curTr = event.target.$closest(`tr`);
    let curRowIndex = parseInt(curTr.getAttribute('row-index'));
    let role = event.target.getAttribute('role');

    if (curRowIndex >= 0) {
      this.dispatchEvent(
        new CustomEvent(role + '.click', {
          detail: {
            data: this.options.data,
            row: this.options.data[curRowIndex],
            rowIndex: curRowIndex,
            role: role
          },
          bubbles: true
        })
      );
    }
  }

  /**
   * @desc 스크롤 최상단을 동기화한다.
   * @example -
   */
  scrollTopSync() {
    let curRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );
    let maxRow = this.options.data.length - this.options.pageSize;

    this.oJJMoveable.moveTop(curRowIndex / maxRow);
  }

  /**
   * @desc 스크롤 이동 이벤트를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onScrollMove(event) {
    let curRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );
    let maxRow = this.options.data.length - this.options.pageSize;

    if (curRowIndex && maxRow > 0) {
      let rowIndex = parseInt((event.detail.top / event.detail.maxTop) * maxRow);

      this._renderPage(rowIndex);
    }
  }

  /**
   * @desc 컬럼정렬 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onColSorted(event) {
    Jinja.global.arrMove(
      this.options.colModel,
      event.detail.startIndex - this.sysColumnCount,
      event.detail.endIndex - this.sysColumnCount
    );

    let firstRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );

    this._renderColGroup();
    this._renderPage(firstRowIndex);
  }

  /**
   * @desc 행선택 채크박스 클릭 이벤트를 처리한다.
   * @param {Object} - 이벤트
   * @example -
   */
  onTrChkSelect(event) {
    let tr = event.target.parentElement;
    let trIndex = tr.getAttribute('row-index');

    if (trIndex) {
  		this.querySelectorAll(`tr[row-index="${trIndex}"]`).forEach(el=> el.classList.toggle('checked'));
      this.options.data[trIndex]._checked = !this.options.data[trIndex]._checked;
    }
  }

  /**
   * @desc 그리드 헤더 선택 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onThSelect(event) {
    this.classList.add('col-sorting');

    event.target.classList.add('select');

    Jinja.addEventListener('mouseup', e2 => {
        this.classList.remove('col-sorting');

        event.target.classList.remove('select');
      },
      { once: true }
    );
  }

  /**
   * @desc 그리드 헤더 선택해제 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onThUnSelect(event) {}

  /**
   * @desc 마우스 휠동작 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onWheel(event) {
    event.preventDefault();

    if (event.deltaY > 0) this.nextRowBind();
    if (event.deltaY < 0) this.prevRowBind();
  }

  /**
   * @desc 키다운 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onKeyDown(event) {
    let keyMap = Jinja.global.getEventKeyMap(event);

    if (['Up', 'Down', 'PgUp', 'PgDn', 'Hhome', 'End'].includes(keyMap)) {
      event.preventDefault();
      event.stopPropagation();
    }

    switch (keyMap) {
      case 'Up':
        this.prevRowBind();

        break;
      case 'Down':
        this.nextRowBind();

        break;
      case 'PgUp':
        this.prevPageBind();

        break;
      case 'PgDn':
        this.nextPageBind();

        break;
      case 'Home':
        this._renderPage(0);

        break;
      case 'End':
        let moveIndex = Math.max(
          this.options.data.length - this.options.pageSize,
          0
        );

        this._renderPage(moveIndex);

        break;
    }
  }

  /**
   * @desc 정렬 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onSort(event) {
    if (event.target.matches('.sortIcon')) {
      let th = event.target.parentElement;
      let thIndex =
          Jinja.dom.findIndex(th.parentElement, th) - this.sysColumnCount;
      let field = this.options.colModel[thIndex].field;
      let orderType = th.getAttribute('order');

      if (event.ctrlKey) {
      } else {
        this.options.sort = [];
        this.tableHead
          .querySelectorAll('th')
          .forEach(el => (el != th ? el.removeAttribute('order') : ''));
      }

      if (!orderType) {
        th.setAttribute('order', 'asc');
      } else if (orderType == 'asc') {
        th.setAttribute('order', 'desc');
      } else {
        th.removeAttribute('order');
        field = 'index';
      }

      this.options.sort.push({ field: field, type: th.getAttribute('order') });

      let sortKey = {};

      this.options.sort.forEach(sort => (sortKey[sort.field] = sort.type));
      this.options.data = this.sortRows(this.options.data, sortKey);
      this._renderPage(0);
    }
  }

  /**
   * @desc 마우스 포커스인 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onMouseOver(event) {
    if (this.matches('.resizing')) return;

    if (event.target.matches('th, td')) {
      this.sizeBar.classList.add('on');
      this.sizeBar.thIndex = Jinja.dom.findIndex(
        event.target.parentElement,
        event.target
      );
      this.sizeBar.thWidth = event.target.offsetWidth;

      let x =
          event.target.getBoundingClientRect().x -
          this.getBoundingClientRect().x +
          this.scrollLeft;
      let y =
          this.table.getBoundingClientRect().y - this.getBoundingClientRect().y;
      let w = event.target.offsetWidth;
      let h = this.table.offsetHeight;

      this.sizeBar.style.top = y + 'px';
      this.sizeBar.style.left = x + w - 4 + 'px';
      this.sizeBar.style.height = h + 'px';

      this.sizeBar.hidden = this.sizeBar.thIndex < 2;
    }
  }

  /**
   * @desc 마우스 포커스아웃 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onMouseOut(event) {}

  /**
   * @desc 데이터 입력 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onInput(event) {
    let value = event.target.value;
    let field = event.target.getAttribute('bind');
    let tr = event.target.$closest('tr');
    let target, oldValue;

    if (field && tr) {
      let rowindex = tr.getAttribute('row-index');

      if (rowindex) {
        target = this.options.data[rowindex];
        oldValue = target[field];
        target[field] = value;

        if (
          target.hasOwnProperty('_crud_') &&
          ['R', 'U'].includes(target['_crud_']) &&
          field.substr(0, 1) != '_'
        ) {
          if (target['_changeData_'][field]) {
            target['_changeData_'][field]['val'] = value;
          } else {
            target['_changeData_'][field] = {
              old: oldValue,
              val: value
            };
          }

          if (
            target['_changeData_'][field].old ==
            target['_changeData_'][field].val
          ) {
            delete target['_changeData_'][key];
          }

          target['_crud_'] = Object.keys(target['_changeData_']).length
            ? 'U'
          : 'R';
        }
      }
    }
  }

  /**
   * @desc 리사이즈 시작 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onResizeStart(event) {
    if (this.sizeBar.thIndex < 2) return;

    event.preventDefault();

    let _this = this;

    this.classList.add('resizing');

    if (event.type === 'touchstart') {
      this.startX = event.touches[0].clientX;
      this.startY = event.touches[0].clientY;

      window.addEventListener('touchend', end);
      window.addEventListener('touchmove', move);
    } else {
      if (event.button == 0) {
        this.startX = event.clientX;
        this.startY = event.clientY;

        window.addEventListener('mouseup', end);
        window.addEventListener('mousemove', move);
      }
    }

    function move(e) {
      if (!_this.classList.contains('resizing')) return;

      e.preventDefault();

      let offset;

      if (e.type === 'touchmove') {
        offset =
          e.touches[0].clientX -
          _this.table.getBoundingClientRect().x -
          _this.table.parentElement.scrollLeft;
      } else {
        offset =
          e.clientX -
          _this.table.getBoundingClientRect().x -
          _this.table.parentElement.scrollLeft;
      }

      _this.sizeBar.style.left = offset + 'px';
    }

    function end(e) {
      if (!_this.classList.contains('resizing')) return;

      _this.classList.remove('resizing');

      let offset;

      if (e.type === 'touchmove') {
        offset = e.touches[0].clientX - _this.startX;
      } else {
        offset = e.clientX - _this.startX;
      }

      let sizeWidth = _this.sizeBar.thWidth + offset;

      _this.table.querySelector('colgroup').children[
        _this.sizeBar.thIndex
      ].style.width = sizeWidth + 'px';
      _this.options.colModel[
        _this.sizeBar.thIndex - _this.sysColumnCount
      ].width = sizeWidth + 'px';

      _this.sizeBar.ref = null;
      _this.sizeBar.columnIndex = null;
      _this.sizeBar.classList.remove('on');

      window.removeEventListener('mouseup', end);
      window.removeEventListener('mousemove', move);
      window.removeEventListener('touchend', end);
      window.removeEventListener('touchmove', move);

      if (
        _this.options.fixColIndex &&
        _this.sizeBar.thIndex < _this.options.fixColIndex
      ) {
        let firstRowIndex = _this.tableBody.firstElementChild.getAttribute(
          'row-index'
        );

        _this._renderPage(firstRowIndex);
      }
    }
  }

  /**
   * @desc 세로 스크롤 이벤트를 처리한다.
   * @param {event} - 이벤트
   * @example -
   */
  onScrollHorizontal(event) {
    if (this.options.isBidDataSpeed) {
      this.dataBind();
    }
  }

  updateCell (row, field, value){
    let rowindex = this.options.data.indexOf(row);
    if(rowindex >= 0){
      let target = this.options.data[rowindex];
      let oldValue = target[field];
      target[field] = value;

      if(target.hasOwnProperty("_crud_") && ["R","U"].includes(target["_crud_"]) && field.substr(0,1) != "_" ){

        if(target["_changeData_"][field]){
          target["_changeData_"][field]["val"] = value; 
        }
        else {
          target["_changeData_"][field] = {
            "old": oldValue,
            "val": value
          };
        }


        if(target["_changeData_"][field].old == target["_changeData_"][field].val){
          delete target["_changeData_"][key];
        }

        target["_crud_"] = Object.keys(target["_changeData_"]).length ? "U" : "R";
      }

    }

  }  
  /**
   * 체크표시된 row를 삭제한다 
   */
  checkedDelete(isUncheck){
    for(let i=this.options.data.length-1; i>=0; i--){
      let row = this.options.data[i];
      if(row._checked){
        // 처리후 체크표시 제거여부 판단
        if(isUncheck) row._checked = false;
        switch(row._crud_){
          case "C":
            this.options.data.splice(i,1);
            break;
          case "D":
            if(Object.keys(row._changeData_).length){
              row._crud_ = "U";  
            } else {
              row._crud_ = "R";  
            }
            break;
          default:
            row._crud_ = "D";
            break;
        }
      }

    }
    this.refresh();

  }  

  refresh(){
    let firstRowIndex = this.tableBody.firstElementChild.getAttribute("row-index");
    this._renderPage(firstRowIndex);
  }

  activeIndex(index){
    let tr = this.tableBody.querySelector(`tr[row-index="${index}"]`);
    if(!tr){
      this._renderPage(index);
      tr = this.tableBody.firstElementChild;
    }
    tr.querySelector(`td`).click();

    return tr;
  }
  activeRow(row){
    let index = this.options.data.indexOf(row);
    return this.activeIndex(index);
  }

  /**
   * @desc 지정한 rows 데이터를 지정한 정렬기준으로 정렬하여 반환한다.
   * @param {Array} - rows 데이터
   * @param {Object} - 정렬기준정보
   * @return {Array} - 변경된 rows 데이터
   * @example -
   */
  sortRows(rows, keys) {
    keys = keys || {};

    let obLen = function (obj) {
      let size = 0, key;

      for (key in obj) {
        if (obj.hasOwnProperty(key)) size++;
      }

      return size;
    };

    let obIx = function (obj, ix) {
      let size = 0, key;

      for (key in obj) {
        if (obj.hasOwnProperty(key)) {
          if (size == ix) return key;

          size++;
        }
      }

      return false;
    };

    let multiSort = function (a, b, d) {
      d = d !== null ? d : 1;

      if (a == b) return 0;

      return a > b ? 1 * d : -1 * d;
    };

    let KL = obLen(keys);
    let newarr = rows.slice(0);

    if (!KL) {
      return newarr.sort(multiSort);
    }

    for (let k in keys) {
      if (keys[k]) keys[k] = keys[k].toLowerCase();

      keys[k] =
        keys[k] == 'desc' || keys[k] == -1
        ? -1
      : keys[k] == 'skip' || keys[k] === 0
        ? 0
      : 1;
    }

    newarr.sort(function (a, b) {
      let sorted = 0, ix = 0;

      while (sorted === 0 && ix < KL) {
        let k = obIx(keys, ix);

        if (k) {
          let dir = keys[k];

          sorted = multiSort(a[k], b[k], dir);
          ix++;
        }
      }

      return sorted;
    });

    return newarr;
  }

  /**
   * @desc 그리드 데이터를 CSV파일로 내보내기한다.
   * @example -
   */
  exportcsv() {
    Jinja.global.csv(this.options.data, 'export');
  }

  /**
   * @desc 그리드 데이터를 엑셀파일로 내보내기한다.
   * @param {String} - 파일제목
   * @example -
   */
  exportexcel(title) {
    let exportDiv = document.createElement('div');

    exportDiv.classList.add('hidden');

    let caption = document.createElement('h2');

    caption.appendChild(document.createTextNode(title || '리포트'));
    exportDiv.appendChild(caption);
    exportDiv.appendChild(this.table.cloneNode(true));

    exportDiv.querySelectorAll('thead th').forEach(el => {
      el.style.backgroundColor = '#e1eaf8';
      el.style.color = 'black';
    });

    exportDiv.querySelectorAll('table').forEach(el => {
      el.setAttribute('border', '1');
    });

    exportDiv.querySelector('tbody').innerHTML = this.json2html();

    let htmltable = exportDiv.innerHTML;
    let excelFile =
        "<html xml:lang='en-US' xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:excel' xmlns='http://www.w3.org/TR/REC-html40'>";
    excelFile += '<head>';
    excelFile +=
      '<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />';
    excelFile += '<!--[if gte mso 9]>';
    excelFile += '<xml>';
    excelFile += '<x:ExcelWorkbook>';
    excelFile += '<x:ExcelWorksheets>';
    excelFile += '<x:ExcelWorksheet>';
    excelFile += '<x:Name>';
    excelFile += '{worksheet}';
    excelFile += '</x:Name>';
    excelFile += '<x:WorksheetOptions>';
    excelFile += '<x:DisplayGridlines/>';
    excelFile += '</x:WorksheetOptions>';
    excelFile += '</x:ExcelWorksheet>';
    excelFile += '</x:ExcelWorksheets>';
    excelFile += '</x:ExcelWorkbook>';
    excelFile += '</xml>';
    excelFile += '<![endif]-->';
    excelFile += '</head>';
    excelFile += '<body>';
    excelFile += htmltable.replace(/"/g, "'");
    excelFile += '</body>';
    excelFile += '</html>';
    let uri = 'data:application/vnd.ms-excel;base64,';
    let ctx = { worksheet: '출력', table: htmltable };

    uri = uri + this.base64(this.format(excelFile, ctx));
    uri = uri.replace('data:application/vnd.ms-excel;base64,', '');
    uri = decodeURIComponent(escape(window.atob(uri)));

    let blob = new Blob([uri], { type: 'application/vnd.ms-excel' });

    uri = window.URL.createObjectURL(blob);

    let link = document.createElement('a');

    link.href = uri;
    link.style = 'visibility:hidden';
    link.download = 'download.xls';

    document.body.appendChild(link);

    link.click();

    document.body.removeChild(link);

    exportDiv.remove();
  }

  /**
   * @desc 그리드 데이터를 HTML로 변환하여 반환한다.
   * @param {} -
   * @return {String} - html
   * @example -
   */
  json2html() {
    let bodyHtml = '';

    this.options.data.forEach(row => {
      let tr = '<tr>';

      this.options.colModel.forEach(col => {
        let txt = row[col.field];

        tr += '<td>' + txt + '</td>';
      });

      tr += '</tr>';
      bodyHtml += tr;
    });

    return bodyHtml;
  }

  /**
   * @desc 지정한 문자열을 지정한 배열로 반환한다.
   * @param {String} - 대상 문자열
   * @param {Array} - 반환대상 배열
   * @return {Array} - 변경된 배열
   * @example -
   */
  format(str, arr) {
    return str.replace(/{(\w+)}/g, function (m, p) {
      return arr[p];
    });
  }

  /**
   * @desc 지정한 문자열을 base64로 인코딩하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - base64 문자열
   * @example -
   */
  base64(str) {
    return window.btoa(unescape(encodeURIComponent(str)));
  }
}

customElements.define('jj-grid', JJGrid);
/* ==JJExcel.640.class================ */
class JJExcel extends JJElement {

  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    // 엑셀자료
    this.dbo; //JJBatisDBA
    this.rows = [];
    this.keymap = [];
    return {
      "jBatisId": workspaceMeta.options.appInfo.jbatisId,
      "tableName": "",
      "keyField": "KEY_ID",
      "gridClass": "jjExcel"
    };
  }

  _render() {

    this.setJBatis(this.options.jBatisId);

    this.file = document.createElement('input');
    this.file.type = "file"
    this.file.hidden = true;
    this.appendChild(this.file);

    this.excelBox = document.createElement('div');
    this.excelBox.setAttribute("class", "excelWrap");
    this.excelBox.setAttribute("tabindex", -1);
    this.appendChild(this.excelBox);

  }

  _setEvent() {
    this.file.addEventListener("change", e=>{
      this._fileUpload(this.file.files);
    })

    this.excelBox.addEventListener("dragover", e => {
      e.preventDefault();
      this.excelBox.classList.add("win-drag");
    });
    this.excelBox.addEventListener("dragleave", e => this.excelBox.classList.remove("win-drag"));
    this.excelBox.addEventListener("drop", e => {
      e.stopPropagation();
      e.preventDefault();
      var data = e.dataTransfer;

      if (data.types[0] == "Files") {
        this._fileUpload(data.files);    	
      }
      this.excelBox.classList.remove("win-drag");
    });

    this.excelBox.addEventListener('paste', (event) => {
      
      if(this.excelBox.childElementCount) return;

      let html = event.clipboardData.getData("text/html");
      
      if(html){
        let box = document.createElement('div');
        box.innerHTML = html;
        let table = box.querySelector('table');

        this.rows = this._table2json(table, true);

        this.excelBox.innerHTML = Jinja.global.json2html(this.rows);    
        this._makeImportTable();
      }
    });    
  }

  _fileUpload(files){
    if(!files.length) return;

    let wait = new JJWaitLayer(this, {"mwssage": "업데이트 배포중입니다."});
    this.dbo.excelUpload(files).then(result => {
      this.rows = result.rows;
      this.excelBox.innerHTML = Jinja.global.json2html(this.rows);    
      this._makeImportTable();
      this.dispatchEvent(new CustomEvent('fileSelect', {
        detail: {
          "file": files[0]
        },
        bubbles: true
      }));
    }).finally(()=>{
      wait.destroy();      
    })

  }
  _makeImportTable(){
    let txtName = document.createElement("input");
    let selType = document.createElement("select");

    let _html = `<option value="">제외</option>`
    this.dbo.getDBDomain().forEach(item=>{
      _html += `<option value="${item.CODE}">${item.NAME}</option>`
    })
    selType.innerHTML = _html;

    // 컬럼명 만들기
    let nameTr = this.excelBox.querySelector('thead tr').cloneNode(true);
    this.excelBox.querySelector('thead').appendChild(nameTr);

    nameTr.querySelectorAll('th').forEach((th,index)=>{
      let typeVal = this.rows[0][th.innerText];
      let dType = this.dbo.val2DBDomain(typeVal);

      let columnName = 'COL'+index;

      th.$empty();
      let fname = txtName.cloneNode(true);
      fname.value = columnName;

      let ftype = selType.cloneNode(true);
      ftype.value = dType;

      th.appendChild(fname);
      th.appendChild(ftype);
    });

  }

  _table2json(table, isHead){
    let rows =[];
    let keys =[];

    if(isHead){
      table.querySelectorAll('tr').forEach((tr, _index_)=>{
        if(_index_==0){
          tr.querySelectorAll('td').forEach((td,index)=>{
            if(keys.includes(td.innerText.trim())){
              keys.push(td.innerText.trim().replaceAll(/\n/,'').replaceAll(/ /,'')+"_COL"+index);  
            } else {
              keys.push(td.innerText.trim().replaceAll(/\n/,'').replaceAll(/ /,''));  
            }

          })
        } else {
          let row={};
          tr.querySelectorAll('td').forEach((td,index)=>{
            row[keys[index]] = td.innerText.trim();
          })
          rows.push(row);
        }
      })
    } else {
      table.querySelectorAll('tr').forEach(tr=>{
        let row ={}
        tr.querySelectorAll('td').forEach((td,index)=>{
          row["COL"+index] = td.innerText;
        })
        rows.push(row);
      })

    }

    return rows;
  }


  fileOpen(){
    this.file.value="";
    this.file.click();
  }                               

  createTable(tableName){
    let wait = new JJWaitLayer(this, {"mwssage": "자료를 업로드 중입니다."});
    this.options.tableName = tableName;
    this.keymap = [
      {
        "COLUMN_NAME" : "CELL_INDEX", 
        "COLUMN_LABEL" : "행번호",
        "COLUMN_DOMAIN": "INT"
      }
    ];

    let th1 = this.excelBox.querySelectorAll('thead tr:nth-child(1) th');
    let th2 = this.excelBox.querySelectorAll('thead tr:nth-child(2) th');

    th2.forEach((th,index)=>{
      let ftype = th.querySelector('select').value;
      let fname = th.querySelector('input').value;
      let ename = th1[index].innerText;

      let column ={
        "COLUMN_NAME" : fname,
        "COLUMN_LABEL" : ename,
        "COLUMN_DOMAIN" : ftype
      }

      if(column.COLUMN_DOMAIN){
        this.keymap.push(column);
      }
    })



    let sendData = {
      "TABLE_NAME": this.options.tableName,
      "KEY_FIELD": this.options.keyField,
      "COLUMNS" : this.keymap
    };

    return this.dbo.createTable(sendData)
      .then(()=>{
      Jinja.confirm.toastMessage("테이블생성이 완료되었습니다.<br>업로드중입니다.");
			
      let sendData = [];
      this.rows.forEach((item,index)=>{
        item["KEY_ID"] = item["KEY_ID"]||Jinja.global.uuid();
        let row = {
          "table": this.options.tableName, 
          "keyField": this.options.keyField,
          "keyValue": item[this.options.keyField],
          "crud": "C",
          "field": {}
        };
        row.field["CELL_INDEX"] = index+1;

        this.keymap.forEach(column=>{
          if(column.COLUMN_NAME=="CELL_INDEX") return;
          switch(column.COLUMN_DOMAIN){
            case "INT":
              row.field[column.COLUMN_NAME] = parseInt(item[column.COLUMN_LABEL]);
              break;
            case "FLOAT":
              row.field[column.COLUMN_NAME] = item[column.COLUMN_LABEL].toString();
              break;
            default:
              row.field[column.COLUMN_NAME] = item[column.COLUMN_LABEL];
              break;
          }
        })
        sendData.push(row);
      });

      return this.dbo.multirows(sendData)
    })
      .then(result=>{
      // 설정화면에서 시스템 필드에 대해서도 라벨을 설정할수 있도록
      // 시스템에서 설정된 고유번호들도 생성해준다
      this.keymap = this.keymap
        .concat(this.dbo.getSystemColumns())
        .concat([
        {
          "COLUMN_NAME" : this.options.keyField, 
          "COLUMN_LABEL" : "고유번호",
          "COLUMN_DOMAIN": "VARCHAR",
        }
      ]);

      Jinja.confirm.toastMessage("테이블생성 후 <br>업로드가 완료되었습니다.");

      return this.getOptionMap()
    })
      .finally(()=>{
        wait.destroy();      
      });    


  }

  setJBatis(jbatisId){
    this.dbo = new JJBatisDBA({
      "workspace": jbatisId
    });   

    return this.dbo;
  }

  getOptionMap(){
    return {
      "workspace": this.options.jBatisId,
      "table": this.options.tableName,
      "keyField": this.options.keyField,
      "keymap": this.keymap  
    }
  }


}

customElements.define('jj-excel', JJExcel);
/* ==JJAppGrid.640.class================ */

/**
 * @classdesc 그리드 컴포넌트관리를 위한 클래스
 */
class JJAppGrid extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this.curRowIndex;
    this.curKey;
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      "gridClass": "jjGrid",
      "title": { "text": "" },
      "dataSource":{
        "workspace": workspaceMeta.options.appInfo.jbatisId,
        "table": "",
        "keyField": "",
        "displayField":"",
        "sorts":[],
        "searchs":[]
      },
      "data": [],
      "colModel": [
        { "label": 'Column2' },
        { "label": 'Column3' },
        { "label": 'Column4' },
        { "label": 'Column5' },
        { "label": 'Column6' },
        { "label": 'Column7' },
        { "label": 'Column8' },
        { "label": 'Column9' },
        { "label": 'Column10' }
      ],
      "headHtml":"",
      "pageSize": 10,
      "fixColIndex": 0,
      "addInTool": [],
      "uploadField": [],
      "addIn": {},
      "headContent": '',
      "autoFind": false,
      "isCellMearge": false,
      "isFoot": false,
      "isScroll": true,
      "isLayoutFixed": false,
      "isSort": true,
      "isCheck": true,
      "lookupColumns":{}
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @param {String} - 챠트유형
   * @example -
   */
  _render() {
    let html = `
<div class="grid-warp" >
<table tabindex=-1>
<colgroup></colgroup>
<thead></thead>
<tbody></tbody>
<tfoot></tfoot>
</table>
</div>
<div class='sArea'><div class='uScrCur'></div></div>
<div class="fix-grid-warp"></div>
<div class="size-bar"></div>
`;

    this.innerHTML = html;
    this.table = this.querySelector('.grid-warp >table');
    this.tableHead = this.querySelector('.grid-warp >table > thead');
    this.tableBody = this.querySelector('.grid-warp >table > tbody');
    this.fixTableWarp = this.querySelector('.fix-grid-warp');
    this.sizeBar = this.querySelector('.size-bar');
    this.scrollCur = this.querySelector('.uScrCur');
    this.sysColumnCount = 2;

    if (!this.options.isScroll) {
      this.querySelector('.sArea').hidden = true;
    }

    this.querySelector('tfoot').setAttribute('class', 'hidden');
    this.querySelector('tfoot').hidden = true;

    if(this.options.isLayoutFixed){
      this.classList.add('fixed');
    }

    this.setColModel();

//     this.oJJSortable = new JJSortable([this.tableHead.lastElementChild], {
//       handles: 'e,w'
//     });
    this.oJJMoveable = new JJMoveable(this.scrollCur, {
      handles: 's'
    });

    if(this.options.autoFind){
      this.list();
    }    



  }

  /**
   * @desc 컬럼그룹을 생성한다.
   * @example -
   */
  _renderColGroup() {
    this.table.querySelector(`colgroup`).innerHTML = '';

    let colGroup = `<col style="width:50px;"><col style="width:50px;">`;

    if (!this.options.isCheck) {
      colGroup = `<col style="width:50px;"><col style="width:0px;">`;
    }

    this.options.colModel.forEach((col, index) => {
      let newCol = Object.assign(
        {},
        {
          width: '100px'
        },
        col
      );

      colGroup += `<col style="width:${newCol.width};" class="text-center">`;
    });

    colGroup += `<col class="sizeEmpty">`;

    this.table.querySelector(`colgroup`).innerHTML = colGroup;
  }

  /**
   * @desc 행순번에 해당하는 행정보로 그리드 행을 생성한다.
   * @param {Number} - 행순번
   * @return {String} - 그리드 행 HTML
   * @example -
   */
  _renderRow(rowIndex) {

    let html = '';
    let row = this.options.data[rowIndex];
    let statusClass = '';
    let crudClass = '';
    let keyValue= row[this.options.dataSource.keyField];
    if (row) {
      if (row._checked) statusClass += ' checked';
      if (this.curRowIndex == rowIndex ) statusClass += ' selected';

      html = `<tr key="${keyValue}" row-index=${rowIndex} class="${statusClass}" _crud_="${row._crud_}">`;
      html += `<td class="num">${rowIndex + 1}</td>`;
      html += `<td class="trCheck"><i class="fa"></i></td>`;

      this.options.colModel.forEach((col, index) => {
        if(col.isHiddenColumn) return;
        let newCol = Object.assign(
          {},
          {
            label: '',
            field: '',
            width: '100px',
            align: '',
            type: 'text',
            domain: 'VARCHAR',
            used: true,
            visible: true,
            editable: false,
            required: false,
            tdClass: '',
            btnClass: 'btn btn-primary',
            btnLabel: '',
            btnEvent: ''
          },
          col
        );

        let dispValue = row[newCol.field];

        if(row["_"+newCol.field+"_"]){
          dispValue = row["_"+newCol.field+"_"];
        }
        
        switch (newCol.domain) {
            //           case 'money':
            //             if (dispValue == null || dispValue == undefined) {
            //               dispValue = '';
            //             } else {
            //               dispValue = dispValue.$toCurrencyFormat();
            //             }

            //             if (!newCol.align) newCol.align = 'text-right';

            //             break;
            //           case 'percent':
            //             if (dispValue == null || dispValue == undefined) {
            //               dispValue = '';
            //             } else {
            //               dispValue = dispValue.$toPercentFormat();
            //             }

            //             if (!newCol.align) newCol.align = 'text-right';

            //             break;
          case 'INT':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              dispValue = parseInt(dispValue).$toIntFormat()
            }

            if (!newCol.align) newCol.align = 'text-right';

            break;
          case 'FLOAT':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              dispValue = parseFloat(dispValue).$toFloatFormat();
            }

            if (!newCol.align) newCol.align = 'text-right';

            break;
            //           case 'int':
            //             if (dispValue == null || dispValue == undefined) {
            //               dispValue = '';
            //             } else {
            //               dispValue = dispValue.$toIntFormat();
            //             }

            //             if (!newCol.align) newCol.align = 'text-right';

            //             break;
          case 'DATE':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              dispValue = new Date(dispValue).$toFormat('yyyy-MM-dd');
            }

            if (!newCol.align) newCol.align = 'text-center';

            break;
          case 'DATETIME':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              dispValue = new Date(dispValue).$toFormat('yyyy-MM-dd HH:mm');
            }

            if (!newCol.align) newCol.align = 'text-center';

            break;
          case 'BIT':
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            } else {
              switch(dispValue){
                case "1": dispValue="Y"; break; 
                case "0": dispValue="N"; break; 
                default: dispValue=""; break; 
              }
            }

            if (!newCol.align) newCol.align = 'text-center';

            break;
          default:
            if (dispValue == null || dispValue == undefined) {
              dispValue = '';
            }
            if (!newCol.align) newCol.align = 'text-left';

            break;
        }

        switch (newCol.type) {
          case 'money':
          case 'percent':
          case 'number':
          case 'float':
          case 'int':
            if (newCol.editable) {
              html += `<td><input type="number" class="form-control text-right" value="${row[newCol.field]}" bind="${newCol.field}"></td>`;
            } else {
              html += `<td class="${newCol.align}">${dispValue}</td>`;
            }

            break;
          case 'date':
            if (newCol.editable) {
              html += `<td><input type="date" class="form-control" value="${row[newCol.field]}" bind="${newCol.field}"></td>`;
            } else {
              html += `<td class="${newCol.align}">${dispValue}</td>`;
            }

            break;
          case 'datetime':
            if (newCol.editable) {
              html += `<td><input type="datetime-local" class="form-control" value="${row[newCol.field]}" bind="${newCol.field}"></td>`;
            } else {
              html += `<td class="${newCol.align}">${dispValue}</td>`;
            }

            break;
          case 'select':
            if (newCol.editable) {
              html += `<td><select class="form-control" bind="${newCol.field}" >`;

              if (!newCol.required) {
                html += `<option value="">-select-</option>`;
              }

              Jinja.code.codes[newCol.code].forEach(item => {
                if (row[newCol.field] == item.CODE) {
                  html += `<option value="${item.CODE}" selected>${item.NAME}</option>`;
                } else {
                  html += `<option value="${item.CODE}">${item.NAME}</option>`;
                }
              });

              html += `</select></td>`;
            } else {
              dispValue = Jinja.code.getCodeName(
                newCol.code,
                row[newCol.field]
              );

              html += `<td class="${newCol.align}">${dispValue || ''}</td>`;
            }

            break;
          case 'button':
            html += `<td><button type="button" role="${newCol.btnEvent}" class="${newCol.btnClass}">${newCol.btnLabel || newCol.label}</button></td>`;

            break;
          case 'check':
            if (newCol.editable) {
              if (!row[newCol.field] || row[newCol.field] == '0') {
                html += `<td><input type="checkbox" bind="${newCol.field}"></td>`;
              } else {
                html += `<td><input type="checkbox" checked bind="${newCol.field}"></td>`;
              }
            } else {
              html += `<td>${dispValue}</td>`;
            }

            break;
          default:
            if (newCol.editable) {
              html += `<td class="${newCol.align}">
<input type="text" class="form-control" value="${row[newCol.field] || ''}"
bind="${newCol.field}">
</td>`;
            } 
            else if(newCol.code) {

              dispValue = Jinja.code.getCodeName(
                newCol.code,
                row[newCol.field]
              );

              html += `<td class="${newCol.align}">${dispValue || ''}</td>`;

            } else {  

              html += `<td class="${newCol.align}">${dispValue}</td>`;
            }

            break;
        }
      });

      html += `<td class="sizeEmpty"</td></tr>`;
    }

    return html;
  }

  /**
   * @desc 행순번 기준으로 그리드 현재페이지를 생성한다.
   * @param {Number} - 행순번
   * @example -
   */
  _renderPage(rowIndex) {
    rowIndex = parseInt(rowIndex);

    let firstRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );
    let bodyHtml = '';

    for (let i = 0; i < this.options.pageSize; i++) {
      if (this.options.data && this.options.data[rowIndex]) {
        bodyHtml += this._renderRow(rowIndex);
      } else {
        bodyHtml += this._blankRowHtml;
      }

      rowIndex++;
    }

    this.tableBody.innerHTML = bodyHtml;
    this.scrollTopSync();
    this._renderFixCol();
    this.getCRUDCount();

  }

  /**
   * @desc 고정컬럼을 생성한다.
   * @example -
   */
  _renderFixCol() {
    this._meargeTableCell();

    if (this.options.fixColIndex) {
      let cloneTable = this.table.cloneNode(true);

      cloneTable
        .querySelectorAll(
        `colgroup >*:nth-child(${this.options.fixColIndex}) ~ *`
      )
        .forEach(el => el.remove());

      cloneTable.querySelectorAll('thead tr').forEach(tr => {
        tr.querySelectorAll(
          `:scope >*:nth-child(${this.options.fixColIndex}) ~ *`
        ).forEach(el => el.remove());
      });

      cloneTable.querySelectorAll('tbody tr').forEach(tr => {
        tr.querySelectorAll(
          `:scope >*:nth-child(${this.options.fixColIndex}) ~ *`
        ).forEach(el => el.remove());
      });

      cloneTable.querySelectorAll('tfoot tr').forEach(tr => {
        tr.querySelectorAll(
          `:scope >*:nth-child(${this.options.fixColIndex}) ~ *`
        ).forEach(el => el.remove());
      });

      this.fixTableWarp.$empty();
      this.fixTableWarp.appendChild(cloneTable);
      this.fixTableWarp.style.width = cloneTable.offsetWidth + '.px';
      this.fixTableWarp.hidden = false;
    } else {
      this.fixTableWarp.hidden = true;
    }

    this._meargeTableCell();
  }

  /**
   * @desc 지정된 table의 cell들을 병합한다.
   * @param {Object} - 테이블
   * @param {Number} - 셀번호
   * @example -
   */
  _meargeTableCell(table, cellIndex) {
    if (!this.options.isCellMearge) return;

    if (!table) table = this.table;
    if (!cellIndex) cellIndex = 2;

    let spanTr = null;
    let spanTd = null;
    let spanCount = 1;
    let spanText = null;

    table.querySelectorAll(`[rowspan], [hidden]`).forEach(el => {
      el.removeAttribute('rowspan');
      el.removeAttribute('hidden');
    });

    table.querySelectorAll(`tbody tr`).forEach(tr => {
      if (tr.getAttribute('row-index')) {
        if (!spanTr) {
          spanTr = tr;
          spanTd = spanTr.childNodes[cellIndex];
          spanText = spanTd.innerText;
          spanCount = 1;
        } else {
          if (spanText == tr.childNodes[cellIndex].innerText) {
            spanCount++;
            spanTd.setAttribute('rowspan', spanCount);
            tr.childNodes[cellIndex].hidden = true;
          } else {
            spanTr = tr;
            spanTd = spanTr.childNodes[cellIndex];
            spanText = spanTd.innerText;
            spanCount = 1;
          }
        }
      }
    });
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('wheel', e => {
      if (
        !['INPUT', 'SELECT'].includes(e.target.tagName) &&
        e.target.matches('tbody *')
      ) {
        this.onWheel(e);
      }
    });

    this.addEventListener('keydown', e => {
      if (!['INPUT', 'SELECT'].includes(e.target.tagName)) {
        this.onKeyDown(e);
      }
    });

    this.addEventListener('click', e => {
      if (e.target.matches('thead .trCheck')) {
        this.onTrChkAllSelect(e);
        return;
      } 
      else if (e.target.matches('tbody td.trCheck')) {
        this.onTrChkSelect(e);
        return;
      }
      else if (e.target.matches('tbody button[role]')) {
        this.onRoleButtonClick(e);
      }
      else if (e.target.matches('.sortIcon')) {
        this.onSort(e);
      }
      else if (e.target.matches('tr *')) {
        this.onTrClick(e);
      }
      else {}
    });

    this.addEventListener('mousedown', e => {
      //       if (e.target.matches('thead th')) {
      //         this.onThSelect(e);
      //       }

      //       if (e.target.matches('.sortIcon')) {
      //         this.onSort(e);
      //       }

      if (e.target.matches('.size-bar')) {
        this.onResizeStart(e);
      }
    });

    this.addEventListener('mousemove', e => {
      this.onMouseOver(e);
    });

    this.addEventListener('mouseup', e => {
      if (e.target.matches('thead th')) {
        this.onThUnSelect(e);
      }
    });

    this.addEventListener('scroll', e => {
      this.onScrollHorizontal(e);
    });

    this.addEventListener('input', e => {
      if (e.target.matches('tbody tr *')) {
        this.onInput(e);
      }
    });

    this.addEventListener('JJSortableEnd', e => {
      this.onColSorted(e);
    });

    this.addEventListener('JJMoveable.move', e => {
      if (e.target.matches('.uScrCur')) {
        this.onScrollMove(e);
      }
    });

    this.addEventListener('paste', (event) => {
      let html = event.clipboardData.getData("text/html");

      if(html){
        let box = document.createElement('div');
        box.innerHTML = html;
        let table = box.querySelector('table');

        let rows = this._table2json(table);
        let systemColumns = [
          "APPV_DATETIME",
          "APPV_ID",
          "APPV_NAME",
          "APPV_REQ_DATETIME",
          "APPV_STATUS",
          "OWNER_ID",
          "OWNER_NAME",
          "REG_DATE",
          "REG_DATETIME",
          "REG_USER",
          "REG_USER_ID",
          "REG_USER_NAME",
          "EDT_DATE",
          "EDT_DATETIME",
          "EDT_USER",
          "EDT_USER_ID",
          "EDT_USER_NAME",
        ];
        
        let showColModel = this.options.colModel.filter(col=>!col.isHiddenColumn); 
        
        rows = rows.map(row=>{
            let result ={};
            showColModel.forEach((col,index)=>{
              if(!systemColumns.includes(col.field)){
                result[col.field] = row['COL'+index];
              }
            }) 
            return result;
        })        
        
        //this.updateCrudData(rows);
        rows.forEach(row=>{
        	this.appendRow(row);  
        })
      }			
    });     
  }

  _table2json(table, isHead){
    let rows =[];
    let keys =[];

    if(isHead){
      table.querySelectorAll('tr').forEach((tr, _index_)=>{
        if(_index_==0){
          tr.querySelectorAll('td').forEach((td,index)=>{
            if(keys.includes(td.innerText.trim())){
              keys.push(td.innerText.trim().replaceAll(/\n/,'').replaceAll(/ /,'')+"_COL"+index);  
            } else {
              keys.push(td.innerText.trim().replaceAll(/\n/,'').replaceAll(/ /,''));  
            }

          })
        } else {
          let row={};
          tr.querySelectorAll('td').forEach((td,index)=>{
            row[keys[index]] = td.innerText.trim();
          })
          rows.push(row);
        }
      })
    } else {
      table.querySelectorAll('tr').forEach(tr=>{
        let row ={}
        tr.querySelectorAll('td').forEach((td,index)=>{
          row["COL"+index] = td.innerText;
        })
        rows.push(row);
      })

    }

    return rows;
  }  
  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {
    if(this.oJJSortable) this.oJJSortable.destroy();
    if(this.oJJMoveable) this.oJJMoveable.destroy();
  }

  /**
   * @desc 그리드 데이터에서 변경된 데이터를 저장한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  _uploadCrudData() {
    let sendData = [];

    this.getCrudChangeData().forEach(item => {
      let row = {
        table: this.options.table,
        keyField: this.options.keyField,
        keyValue: item[this.options.keyField],
        crud: item._crud_,
        field: {}
      };

      switch (item._crud_) {
        case 'U':
          Object.keys(item._changeData_).forEach(col => {
            row.field[col] = item._changeData_[col].val;
          });

          break;
        case 'C':
          Object.keys(item).forEach(col => {
            if (!col.startsWith('_')) {
              row.field[col] = item[col];
            }
          });

          break;
        case 'D':
          break;
      }

      sendData.push(row);
    });

    return Jinja.ajax.post(`/${this.options.apiVersion}/jbatis/ds201/restComcd/multirows`, {
      rows: sendData
    });
  }

  /**
   * @static
   * @memberof JJGrid
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return ['data-type'];
  }

  /**
   * @desc 지정한 옵션으로 그리드를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    Object.assign(this.options, options);

    this._render();
  }

  /**
   * @desc 컬럼모델 정보로 그리드 컬럼을 생성한다.
   * @example -
   */
  setColModel() {
    let colGroup = `<col style="width:50px;"><col style="width:50px;">`;

    if (!this.options.isCheck) {
      colGroup = `<col style="width:50px;"><col style="width:0px;">`;
    }

    let thHtml = `<tr class=""><th>NO</th><th class="trCheck"><i class="fa"></i></th>`;
    let brHtml = `<tr class=""><td>&nbsp</td><td>&nbsp</td>`;
    let tfHtml = `<tr class=""><td>&nbsp</td><td>&nbsp</td>`;

    this.options.colModel.forEach((col, index) => {
      if(col.isHiddenColumn) return;
      let newCol = Object.assign(
        {},
        {
          label: '',
          field: '',
          width: '100px',
          align: '',
          type: 'text',
          domain: 'VARCHAR',
          used: true,
          visible: true,
          editable: false,
          tdClass: '',
          btnClass: 'btn btn-primary',
          btnLabel: ''
        },
        col
      );

      colGroup += `<col style="width:${newCol.width};" class="text-center">`;
      thHtml += `<th><label title="${newCol.label}">${newCol.label.replaceAll('\n', '<br />')}</label>`;

      if (this.options.isSort) {
        thHtml += `<span class="sortIcon"><i class="fa"></i></span>`;
      }

      thHtml += `</th>`;
      brHtml += `<td>&nbsp</td>`;
      tfHtml += `<td></td>`;
    });

    colGroup += `<col class="sizeEmpty">`;
    thHtml += `<th class="sizeEmpty"></th></tr>`;
    brHtml += `<td class="sizeEmpty"></td></tr>`;
    tfHtml += `<td class="sizeEmpty"></td></tr>`;

    let bodyHtml = '';

    for (let i = 0; i < this.options.pageSize; i++) {
      if (this.options.data && this.options.data[i]) {
        bodyHtml += this._renderRow(i);
      } else {
        bodyHtml += brHtml;
      }
    }

    this._blankRowHtml = brHtml;
    this.table.querySelector(`colgroup`).innerHTML = colGroup;
    this.table.querySelector(`thead`).innerHTML = thHtml;
    this.table.querySelector(`tbody`).innerHTML = bodyHtml;
    this.table.querySelector(`tfoot`).innerHTML = tfHtml;


    if(this.options.headHtml){
      this.table.querySelector(`thead`).innerHTML = this.options.headHtml;
      let headTrLength = this.table.querySelectorAll('thead tr').length;
      Jinja.dom.prepend(this.table.querySelector('thead tr'), `<td rowspan="${headTrLength}" >no</td><td rowspan="${headTrLength}">!</td>`);  

    }    



    this._renderFixCol();
  }

  /**
   * @desc 이전 행에 데이터를 바인딩한다.
   * @example -
   */
  prevRowBind() {
    let firstRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );

    if (parseInt(firstRowIndex) > 0) {
      let next = parseInt(firstRowIndex) - 1;

      if (this.options.data[next]) {
        this.tableBody.lastElementChild.remove();

        Jinja.dom.prepend(this.tableBody, this._renderRow(next));

        this.scrollTopSync();
      }

      this._renderFixCol();
    }
  }

  /**
   * @desc 다음 행에 데이터를 바인딩한다.
   * @example -
   */
  nextRowBind() {
    let lastRowIndex = this.tableBody.lastElementChild.getAttribute(
      'row-index'
    );

    if (lastRowIndex) {
      let next = parseInt(lastRowIndex) + 1;

      if (this.options.data[next]) {
        this.tableBody.firstElementChild.remove();

        Jinja.dom.append(this.tableBody, this._renderRow(next));

        this.scrollTopSync();
      }

      this._renderFixCol();
    }
  }

  /**
   * @desc 이전 페이지에 데이터를 바인딩한다.
   * @example -
   */
  prevPageBind() {
    let firstRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );

    if (parseInt(firstRowIndex) > 0) {
      let next = Math.max(parseInt(firstRowIndex) - this.options.pageSize, 0);

      this._renderPage(next);
      this.scrollTopSync();
    }
  }

  /**
   * @desc 다음 페이지에 데이터를 바인딩한다.
   * @example -
   */
  nextPageBind() {
    let lastRowIndex = this.tableBody.lastElementChild.getAttribute(
      'row-index'
    );

    if (lastRowIndex) {
      let next = parseInt(lastRowIndex) + 1;

      if (this.options.data[next]) {
        this._renderPage(next);
        this.scrollTopSync();
      }
    }
  }

  firstPageBind(){
    this._renderPage(0);
  }

  // 마지막 페이지로 이동하여 표시
  lastPageBind(){
    let moveIndex = Math.max(this.options.data.length - this.options.pageSize, 0)
    this._renderPage(moveIndex);
  }

  // 지정된 레코드 번호로 이동
  rowIndexSelect(rowIndex){
    //     if(this.tableBody.querySelector("tr.selected")){
    //       this.tableBody.querySelector("tr.selected").classList.remove("selected");
    //     }

    let tr = this.tableBody.querySelector(`tr[row-index="${rowIndex}"]`);

    if(tr){
      tr.querySelector('td').click();
    }
    return tr;
  }



  /**
   * @desc 그리드 데이터에서 변경된 데이터를 반환한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  getCrudChangeData() {
    return Jinja.global.getChangeCRUD(this.options.data);
  }

  /**
   * @desc 지정한 데이터를 그리드에 반영한다.
   * @param {Array} - 그리드 데이터
   * @example -
   */
  updateData(rows) {
    this.options.data = rows;
    this._renderPage(0);

    if(this.options.autoFind){
      this.rowIndexSelect(0);
    }

  }

  /**
   * @desc 지정한 데이터 그리드 데이터로 변환하고 그리드에 반영한다.
   * @param {Array} - 대상 데이터
   * @return {Array} - 변경된 데이터
   * @example -
   */
  updateCrudData(rows) {
    Jinja.global.setCRUD(rows);

    this.updateData(rows);

    return rows;
  }

  /**
   * @desc 그리드 데이터에서 변경된 데이터를 저장한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  uploadCrudData() {
    return new Promise((resolve, reject) => {
      if (this.options.table && this.options.keyField) {
        this._uploadCrudData()
          .then(resule => {
          return resolve(true);
        })
          .catch(resule => {
          return reject(false);
        });
      } else {
        let message = '테이블, 키필드 속성이 지정되지 않았습니다.';

        alert(message);

        reject(false);
      }
    });
  }


  /**
   * @desc 행클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onTrClick(event) {
    let curTr = event.target.$closest(`tr`);
    this.querySelectorAll("tr.selected").forEach(el=> el.classList.remove("selected"));


    this.curRowIndex = parseInt(curTr.getAttribute('row-index'));
    this.curKey = curTr.getAttribute('key');

    this.querySelectorAll(`tr[row-index="${this.curRowIndex}"]`).forEach(el=> el.classList.add("selected"));

    if (this.curRowIndex >= 0) {
      this.dispatchEvent(
        new CustomEvent('trClick', {
          detail: {
            tr: curTr,
            data: this.options.data,
            row: this.options.data[this.curRowIndex],
            rowIndex: this.curRowIndex
          },
          bubbles: true
        })
      );
    }
  }

  /**
   * @desc 룰버튼 클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onRoleButtonClick(event) {
    let curTr = event.target.$closest(`tr`);
    let curRowIndex = parseInt(curTr.getAttribute('row-index'));
    let role = event.target.getAttribute('role');

    if (curRowIndex >= 0) {
      this.dispatchEvent(
        new CustomEvent(role + '.click', {
          detail: {
            data: this.options.data,
            row: this.options.data[curRowIndex],
            rowIndex: curRowIndex,
            role: role
          },
          bubbles: true
        })
      );
    }
  }

  /**
   * @desc 스크롤 최상단을 동기화한다.
   * @example -
   */
  scrollTopSync() {
    let curRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );
    let maxRow = this.options.data.length - this.options.pageSize;

    this.oJJMoveable.moveTop(curRowIndex / maxRow);
  }

  /**
   * @desc 스크롤 이동 이벤트를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onScrollMove(event) {
    let curRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );
    let maxRow = this.options.data.length - this.options.pageSize;

    if (curRowIndex && maxRow > 0) {
      let rowIndex = parseInt((event.detail.top / event.detail.maxTop) * maxRow);

      this._renderPage(rowIndex);
    }
  }

  /**
   * @desc 컬럼정렬 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onColSorted(event) {
    Jinja.global.arrMove(
      this.options.colModel,
      event.detail.startIndex - this.sysColumnCount,
      event.detail.endIndex - this.sysColumnCount
    );

    let firstRowIndex = this.tableBody.firstElementChild.getAttribute(
      'row-index'
    );

    this._renderColGroup();
    this._renderPage(firstRowIndex);
  }

  /**
   * @desc 행선택 채크박스 클릭 이벤트를 처리한다.
   * @param {Object} - 이벤트
   * @example -
   */
  onTrChkAllSelect(event) {
    let el = event.target;

    // Fix컬럼까지 적용해야함    
  	this.querySelectorAll('thead th.trCheck').forEach(th=>th.classList.toggle('checked'))  
    
    this.options.data.forEach(row=>row._checked =el.classList.contains('checked'));
    this.refresh();
    this.dispatchEvent(
      new CustomEvent('trAllCheck', {
        detail: {
          "data": this.options.data,
          "checked": el.classList.contains('checked'),
          "crud": this.getCRUDCount()
        },
        bubbles: true
      })
    );
    
  }
  
  /**
   * @desc 행선택 채크박스 클릭 이벤트를 처리한다.
   * @param {Object} - 이벤트
   * @example -
   */
  onTrChkSelect(event) {
    let tr = event.target.parentElement;
    let trIndex = tr.getAttribute('row-index');

    if (trIndex) {
      this.querySelectorAll(`tr[row-index="${trIndex}"]`).forEach(el=> el.classList.toggle('checked'));
      this.options.data[trIndex]._checked = !this.options.data[trIndex]._checked;

      this.dispatchEvent(
        new CustomEvent('trCheck', {
          detail: {
            "tr": tr,
            "data": this.options.data,
            "checked": this.options.data[trIndex]._checked,
            "rowIndex": trIndex,
            "crud": this.getCRUDCount()
          },
          bubbles: true
        })
      );

    }
  }

  getCRUDCount(){
    let result ={
      "length": this.options.data.length,
      "check": 0,
      "C": 0,
      "R": 0,
      "U": 0,
      "D": 0
    };

    this.options.data.forEach(row=>{
      if (row._checked) result.check++;
      if (row._crud_ == "C") result.C++;
      if (row._crud_ == "R") result.R++;
      if (row._crud_ == "U") result.U++;
      if (row._crud_ == "D") result.D++;
    })

    this.dispatchEvent(
      new CustomEvent('tableChange', {
        detail: {
          "data": this.options.data,
          "crud": result
        },
        bubbles: true
      })
    );

    return result;

  }

  /**
   * @desc 그리드 헤더 선택 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onThSelect(event) {
    this.classList.add('col-sorting');

    event.target.classList.add('select');

    Jinja.addEventListener('mouseup', e2 => {
      this.classList.remove('col-sorting');

      event.target.classList.remove('select');
    },
                           { once: true }
                          );
  }

  /**
   * @desc 그리드 헤더 선택해제 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onThUnSelect(event) {}

  /**
   * @desc 마우스 휠동작 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onWheel(event) {
    event.preventDefault();

    if (event.deltaY > 0) this.nextRowBind();
    if (event.deltaY < 0) this.prevRowBind();
  }

  /**
   * @desc 키다운 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onKeyDown(event) {
    let keyMap = Jinja.global.getEventKeyMap(event);

    if (['Up', 'Down', 'PgUp', 'PgDn', 'Hhome', 'End'].includes(keyMap)) {
      event.preventDefault();
      event.stopPropagation();
    }

    switch (keyMap) {
      case 'Up':
        this.prevRowBind();

        break;
      case 'Down':
        this.nextRowBind();

        break;
      case 'PgUp':
        this.prevPageBind();

        break;
      case 'PgDn':
        this.nextPageBind();

        break;
      case 'Home':
        this._renderPage(0);

        break;
      case 'End':
        let moveIndex = Math.max(
          this.options.data.length - this.options.pageSize,
          0
        );

        this._renderPage(moveIndex);

        break;
    }
  }

  /**
   * @desc 정렬 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onSort(event) {
    if (event.target.matches('.sortIcon')) {
      let th = event.target.parentElement;
      let thIndex =
          Jinja.dom.findIndex(th.parentElement, th) - this.sysColumnCount;
      let field = this.options.colModel[thIndex].field;
      let orderType = th.getAttribute('order');

      if (event.ctrlKey) {
      } else {
        this.options.sort = [];
        this.tableHead
          .querySelectorAll('th')
          .forEach(el => (el != th ? el.removeAttribute('order') : ''));
      }

      if (!orderType) {
        th.setAttribute('order', 'asc');
      } else if (orderType == 'asc') {
        th.setAttribute('order', 'desc');
      } else {
        th.removeAttribute('order');
        field = 'index';
      }

      this.options.sort.push({ field: field, type: th.getAttribute('order') });

      let sortKey = {};

      this.options.sort.forEach(sort => (sortKey[sort.field] = sort.type));
      this.options.data = this.sortRows(this.options.data, sortKey);
      this._renderPage(0);
    }
  }

  /**
   * @desc 마우스 포커스인 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onMouseOver(event) {
    if (this.matches('.resizing')) return;

    if (event.target.matches('th, td')) {
      this.sizeBar.classList.add('on');
      this.sizeBar.thIndex = Jinja.dom.findIndex(
        event.target.parentElement,
        event.target
      );
      this.sizeBar.thWidth = event.target.offsetWidth;

      let x =
          event.target.getBoundingClientRect().x -
          this.getBoundingClientRect().x +
          this.scrollLeft;
      let y =
          this.table.getBoundingClientRect().y - this.getBoundingClientRect().y;
      let w = event.target.offsetWidth;
      let h = this.table.offsetHeight;

      this.sizeBar.style.top = y + 'px';
      this.sizeBar.style.left = x + w - 4 + 'px';
      this.sizeBar.style.height = h + 'px';

      this.sizeBar.hidden = this.sizeBar.thIndex < 2;
    }
  }

  /**
   * @desc 마우스 포커스아웃 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onMouseOut(event) {}

  /**
   * @desc 데이터 입력 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onInput(event) {
    let value = event.target.value;
    let field = event.target.getAttribute('bind');
    let tr = event.target.$closest('tr');
    let target, oldValue;

    if (field && tr) {
      let rowindex = tr.getAttribute('row-index');

      if (rowindex) {
        target = this.options.data[rowindex];
        oldValue = target[field];
        target[field] = value;

        if (
          target.hasOwnProperty('_crud_') &&
          ['R', 'U'].includes(target['_crud_']) &&
          field.substr(0, 1) != '_'
        ) {
          if (target['_changeData_'][field]) {
            target['_changeData_'][field]['val'] = value;
          } else {
            target['_changeData_'][field] = {
              old: oldValue,
              val: value
            };
          }

          if (
            target['_changeData_'][field].old ==
            target['_changeData_'][field].val
          ) {
            delete target['_changeData_'][key];
          }

          target['_crud_'] = Object.keys(target['_changeData_']).length
            ? 'U'
          : 'R';
        }
      }
    }
  }

  /**
   * @desc 리사이즈 시작 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  onResizeStart(event) {
    if (this.sizeBar.thIndex < 2) return;

    event.preventDefault();

    let _this = this;

    this.classList.add('resizing');

    if (event.type === 'touchstart') {
      this.startX = event.touches[0].clientX;
      this.startY = event.touches[0].clientY;

      window.addEventListener('touchend', end);
      window.addEventListener('touchmove', move);
    } else {
      if (event.button == 0) {
        this.startX = event.clientX;
        this.startY = event.clientY;

        window.addEventListener('mouseup', end);
        window.addEventListener('mousemove', move);
      }
    }

    function move(e) {
      if (!_this.classList.contains('resizing')) return;

      e.preventDefault();

      let offset;

      if (e.type === 'touchmove') {
        offset =
          e.touches[0].clientX -
          _this.table.getBoundingClientRect().x -
          _this.table.parentElement.scrollLeft;
      } else {
        offset =
          e.clientX -
          _this.table.getBoundingClientRect().x -
          _this.table.parentElement.scrollLeft;
      }

      _this.sizeBar.style.left = offset + 'px';
    }

    function end(e) {
      if (!_this.classList.contains('resizing')) return;

      _this.classList.remove('resizing');

      let offset;

      if (e.type === 'touchmove') {
        offset = e.touches[0].clientX - _this.startX;
      } else {
        offset = e.clientX - _this.startX;
      }

      let sizeWidth = _this.sizeBar.thWidth + offset;

      _this.table.querySelector('colgroup').children[
        _this.sizeBar.thIndex
      ].style.width = sizeWidth + 'px';
      _this.options.colModel[
        _this.sizeBar.thIndex - _this.sysColumnCount
      ].width = sizeWidth + 'px';

      _this.sizeBar.ref = null;
      _this.sizeBar.columnIndex = null;
      _this.sizeBar.classList.remove('on');

      window.removeEventListener('mouseup', end);
      window.removeEventListener('mousemove', move);
      window.removeEventListener('touchend', end);
      window.removeEventListener('touchmove', move);

      if (
        _this.options.fixColIndex &&
        _this.sizeBar.thIndex < _this.options.fixColIndex
      ) {
        let firstRowIndex = _this.tableBody.firstElementChild.getAttribute(
          'row-index'
        );

        _this._renderPage(firstRowIndex);
      }
    }
  }

  /**
   * @desc 세로 스크롤 이벤트를 처리한다.
   * @param {event} - 이벤트
   * @example -
   */
  onScrollHorizontal(event) {
    if (this.options.isBidDataSpeed) {
      this.dataBind();
    }
  }

  updateCell (row, field, value){
    let rowindex = this.options.data.indexOf(row);
    if(rowindex >= 0){
      let target = this.options.data[rowindex];
      let oldValue = target[field];
      target[field] = value;

      if(target.hasOwnProperty("_crud_") && ["R","U"].includes(target["_crud_"]) && field.substr(0,1) != "_" ){

        if(target["_changeData_"][field]){
          target["_changeData_"][field]["val"] = value; 
        }
        else {
          target["_changeData_"][field] = {
            "old": oldValue,
            "val": value
          };
        }


        if(target["_changeData_"][field].old == target["_changeData_"][field].val){
          delete target["_changeData_"][key];
        }

        target["_crud_"] = Object.keys(target["_changeData_"]).length ? "U" : "R";
      }

    }

  }  

  /**
   * 체크표시된 row를 삭제한다 
   */
  checkedDelete(isUncheck){
    for(let i=this.options.data.length-1; i>=0; i--){
      let row = this.options.data[i];
      if(row._checked){
        // 처리후 체크표시 제거여부 판단
        if(isUncheck) row._checked = false;
        switch(row._crud_){
          case "C":
            this.options.data.splice(i,1);
            break;
          case "D":
            if(Object.keys(row._changeData_).length){
              row._crud_ = "U";  
            } else {
              row._crud_ = "R";  
            }
            break;
          default:
            row._crud_ = "D";
            break;
        }
      }

    }
    this.refresh();

  }  

  refresh(){
    let firstRowIndex = this.tableBody.firstElementChild.getAttribute("row-index");
    this._renderPage(firstRowIndex);
  }

  activeIndex(index){
    let tr = this.tableBody.querySelector(`tr[row-index="${index}"]`);
    if(!tr){
      this._renderPage(index);
      tr = this.tableBody.firstElementChild;
    }
    tr.querySelector(`td`).click();

    return tr;
  }
  activeKey(key){
    let tr = this.tableBody.querySelector(`tr[key="${key}"]`);
    if(tr){
      tr.querySelector(`td`).click();
    }

    return tr;
  }

  activeRow(row){
    let index = this.options.data.indexOf(row);
    return this.activeIndex(index);
  }

  getData(){
    return this.options.data;
  }

  list(filter, search){

    let searchOption ={
      "filter":[]
    };

    if (typeof(filter) == "string" && filter && this.options.dataSource.searchs.length){
      searchOption.filter = [
        {
          "field": this.options.dataSource.searchs.map(item=>item.COLUMN_NAME).join('+'), 
          "op": "like",
          "val": ["%"+filter+"%"]
        }        
      ]
    } 
    if (typeof(filter) == "object" && filter){
      searchOption.filter = filter;
    }
    if (typeof(search) == "string" && search && this.options.dataSource.searchs.length){
      searchOption.filter.push({
        "field": this.options.dataSource.searchs.map(item=>item.COLUMN_NAME).join('+'), 
        "op": "like",
        "val": ["%"+search+"%"]
      })        
    } 
		
    if(this.options.lookupColumns && Object.keys(this.options.lookupColumns)){
   		 searchOption.lookup = this.options.lookupColumns;
    }
    
    let url = `/${this.options.apiVersion}/jbatis/${this.options.dataSource.workspace}/rest/${this.options.dataSource.table}`;
    //  form.__config__.data.list = [];
    return Jinja.ajax.get(url, searchOption)
      .then(data=>{

      // 날짜형 변환준비
      let dataColumn = [];

      this.options.colModel.forEach(col=>{
        if(["DATETIME", "DATE"].includes(col.domain)){
          dataColumn.push(col.field)
        }
      })

      data.rows = data.rows.map(row=>{
        if(this.options.dataSource.keyField) row["_key"] = row[this.options.dataSource.keyField];
        if(this.options.dataSource.displayField) row["_display"] = row[this.options.dataSource.keyField];
        // 날짜형 변환준비
        dataColumn.forEach(col=>row[col] = new Date(row[col]));

        return row;
      });

      if(this.options.dataSource.sorts.length){
        let sortOption = {};
        this.options.dataSource.sorts.forEach(sort=>{
          sortOption[sort.COLUMN_NAME] = sort.ORDER_TYPE;
        })
        data.rows = Jinja.global.sortRows(data.rows, sortOption);
      }

      // 그리드 새로고침후에 현재 위치고정하기
      let oldKey = this.curKey;

      this.updateData(Jinja.global.setCRUD(data.rows));
      this.activeKey(oldKey);

      return data.rows;
    });

  }

  /**
   * @desc 새 데이터를 추가합니다
   * @return {Promiss} - 실행결과
   * @example -
   */
  appendRow(newRow) {
    let systemColumns = [
      "APPV_DATETIME",
      "APPV_ID",
      "APPV_NAME",
      "APPV_REQ_DATETIME",
      "APPV_STATUS",
      "OWNER_ID",
      "OWNER_NAME",
      "REG_DATE",
      "REG_DATETIME",
      "REG_USER",
      "REG_USER_ID",
      "REG_USER_NAME",
      "EDT_DATE",
      "EDT_DATETIME",
      "EDT_USER",
      "EDT_USER_ID",
      "EDT_USER_NAME",
    ];

    newRow = newRow || {};
    if(this.options.dataSource.keyField){
      newRow[this.options.dataSource.keyField] = 
        newRow[this.options.dataSource.keyField]||Jinja.global.uuid();
    }

    this.options.colModel.forEach((col, index) => {
      if(!systemColumns.includes(col.field)){
        if(["INT", "FLOAT"].includes(col.domain)){
          newRow[col.field] = newRow[col.field]||col.default||null;
        } else {
          newRow[col.field] = newRow[col.field]||col.default||null;
        }
      }
    });    

    Jinja.global.addCRUDrow(this.options.data, newRow);

    // 추가후 마지막 페이지로 이동시킴
    this.lastPageBind();
    // 지정된 레코드인덱스 번호로 선택활성화
    this.rowIndexSelect(this.options.data.length-1);
    this.getCRUDCount();
  }

  save(){
    let sendData = [];
    this.getCrudChangeData().forEach(item=>{
      let row = {
        "table": this.options.dataSource.table, 
        "keyField": this.options.dataSource.keyField,
        "keyValue": item[this.options.dataSource.keyField],
        "crud": item._crud_,
        "field": {}
      };

      switch(item._crud_){
        case "U":
          Object.keys(item._changeData_).forEach(col=>{
            if(typeof(item._changeData_[col].val) == "boolean"){
              row.field[col] = item._changeData_[col].val?'1':'0';
              //row.field[col] = item._changeData_[col].val;
            } 
            else if(typeof(item._changeData_[col].val) == "number"){
              row.field[col] = Jinja.global.string(item._changeData_[col].val);
            } 
            else if(Jinja.global.isDate(item._changeData_[col].val)){
              if(this.options.colModel.filter(model=>model.field==col)[0].domain == "DATE"){
                row.field[col] = item._changeData_[col].val.$toFormat('yyyy-MM-dd');
              } else {
                row.field[col] = item._changeData_[col].val;
              }
            }
            else {
              row.field[col] = item._changeData_[col].val;
            }
          })    
          break;
        case "C":
          Object.keys(item).forEach(col=>{
            if (!col.startsWith("_")){

              if(typeof(item[col]) == "boolean"){
                row.field[col] = item[col]?'1':'0';
                //row.field[col] = item._changeData_[col].val;
              } 
              else if(typeof(item[col]) == "number"){
                row.field[col] = Jinja.global.string(item[col]);
              } 
              else if(Jinja.global.isDate(item[col])){
                if(this.options.colModel.filter(model=>model.field==col)[0].domain == "DATE"){
                  row.field[col] = item[col].$toFormat('yyyy-MM-dd');
                } else {
                  row.field[col] = item[col];
                }
              } 
              else {
                row.field[col] = item[col];
              }
            }
          })    
          break;
        default: break;
      }

      sendData.push(row);
    })

    return Jinja.ajax.post(`/${this.options.apiVersion}/jbatis/${this.options.dataSource.workspace}/rest/multirows`, {
      "rows": sendData
    })
      .then(result=>this.list());

  }

  delete(){
    this.checkedDelete(true);

    return this.save();

  }

  /**
   * @desc 지정한 rows 데이터를 지정한 정렬기준으로 정렬하여 반환한다.
   * @param {Array} - rows 데이터
   * @param {Object} - 정렬기준정보
   * @return {Array} - 변경된 rows 데이터
   * @example -
   */
  sortRows(rows, keys) {
    keys = keys || {};

    let obLen = function (obj) {
      let size = 0, key;

      for (key in obj) {
        if (obj.hasOwnProperty(key)) size++;
      }

      return size;
    };

    let obIx = function (obj, ix) {
      let size = 0, key;

      for (key in obj) {
        if (obj.hasOwnProperty(key)) {
          if (size == ix) return key;

          size++;
        }
      }

      return false;
    };

    let multiSort = function (a, b, d) {
      d = d !== null ? d : 1;

      if (a == b) return 0;

      return a > b ? 1 * d : -1 * d;
    };

    let KL = obLen(keys);
    let newarr = rows.slice(0);

    if (!KL) {
      return newarr.sort(multiSort);
    }

    for (let k in keys) {
      if (keys[k]) keys[k] = keys[k].toLowerCase();

      keys[k] =
        keys[k] == 'desc' || keys[k] == -1
        ? -1
      : keys[k] == 'skip' || keys[k] === 0
        ? 0
      : 1;
    }

    newarr.sort(function (a, b) {
      let sorted = 0, ix = 0;

      while (sorted === 0 && ix < KL) {
        let k = obIx(keys, ix);

        if (k) {
          let dir = keys[k];

          sorted = multiSort(a[k], b[k], dir);
          ix++;
        }
      }

      return sorted;
    });

    return newarr;
  }

  /**
   * @desc 그리드 데이터를 CSV파일로 내보내기한다.
   * @example -
   */
  exportcsv() {
    Jinja.global.csv(this.options.data, 'export');
  }

  /**
   * @desc 그리드 데이터를 엑셀파일로 내보내기한다.
   * @param {String} - 파일제목
   * @example -
   */
  exportexcel(title) {
    title = title || 'App Excel Down';
    let exportDiv = document.createElement('div');

    exportDiv.classList.add('hidden');

    let caption = document.createElement('h2');

    caption.appendChild(document.createTextNode(title || 'title'));
    exportDiv.appendChild(caption);
    exportDiv.appendChild(this.table.cloneNode(true));

    exportDiv.querySelectorAll('thead th').forEach(el => {
      el.style.backgroundColor = '#e1eaf8';
      el.style.color = 'black';
    });

    exportDiv.querySelectorAll('table').forEach(el => {
      el.setAttribute('border', '1');
    });

    exportDiv.querySelector('tbody').innerHTML = this.json2html();

    let htmltable = exportDiv.innerHTML;
    let excelFile =
        "<html xml:lang='en-US' xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:x='urn:schemas-microsoft-com:office:excel' xmlns='http://www.w3.org/TR/REC-html40'>";
    excelFile += '<head>';
    excelFile +=
      '<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />';
    excelFile += '<!--[if gte mso 9]>';
    excelFile += '<xml>';
    excelFile += '<x:ExcelWorkbook>';
    excelFile += '<x:ExcelWorksheets>';
    excelFile += '<x:ExcelWorksheet>';
    excelFile += '<x:Name>';
    excelFile += '{worksheet}';
    excelFile += '</x:Name>';
    excelFile += '<x:WorksheetOptions>';
    excelFile += '<x:DisplayGridlines/>';
    excelFile += '</x:WorksheetOptions>';
    excelFile += '</x:ExcelWorksheet>';
    excelFile += '</x:ExcelWorksheets>';
    excelFile += '</x:ExcelWorkbook>';
    excelFile += '</xml>';
    excelFile += '<![endif]-->';
    excelFile += '</head>';
    excelFile += '<body>';
    excelFile += htmltable.replace(/"/g, "'");
    excelFile += '</body>';
    excelFile += '</html>';
    let uri = 'data:application/vnd.ms-excel;base64,';
    let ctx = { worksheet: '출력', table: htmltable };

    uri = uri + this.base64(this.format(excelFile, ctx));
    uri = uri.replace('data:application/vnd.ms-excel;base64,', '');
    uri = decodeURIComponent(escape(window.atob(uri)));

    let blob = new Blob([uri], { type: 'application/vnd.ms-excel' });

    uri = window.URL.createObjectURL(blob);

    let link = document.createElement('a');

    link.href = uri;
    link.style = 'visibility:hidden';
    link.download = title+'.xls';

    document.body.appendChild(link);

    link.click();

    document.body.removeChild(link);

    exportDiv.remove();
  }

  /**
   * @desc 그리드 데이터를 HTML로 변환하여 반환한다.
   * @param {} -
   * @return {String} - html
   * @example -
   */
  json2html() {

    let bodyHtml = '';

    this.options.data.forEach((row,index) => {
      let tr = `<tr><td>${index+1}</td><td></td>`;

      this.options.colModel.forEach(col => {
        if(col.isHiddenColumn) return;
        let txt = row[col.field];
        switch(col.domain){
          case 'INT':
            if (txt == null || txt == undefined) {
              txt = '';
            } else {
              txt = parseInt(txt).$toIntFormat()
            }
            break;
          case 'FLOAT':
            if (txt == null || txt == undefined) {
              txt = '';
            } else {
              txt = parseFloat(txt).$toFloatFormat()
            }
            break;
          case 'DATE':
            if (txt == null || txt == undefined) {
              txt = '';
            } else {
              txt = new Date(txt).$toFormat('yyyy-MM-dd');
            }
            break;
          case 'DATETIME':
            if (txt == null || txt == undefined) {
              txt = '';
            } else {
              txt = new Date(txt).$toFormat('yyyy-MM-dd HH:mm');
            }
            break;
          default:
            if (txt == null || txt == undefined) {
              txt = '';
            }
            break;
        }

        tr += '<td>' + txt + '</td>';
      });

      tr += '</tr>';
      bodyHtml += tr;
    });

    return bodyHtml;
  }

  /**
   * @desc 지정한 문자열을 지정한 배열로 반환한다.
   * @param {String} - 대상 문자열
   * @param {Array} - 반환대상 배열
   * @return {Array} - 변경된 배열
   * @example -
   */
  format(str, arr) {
    return str.replace(/{(\w+)}/g, function (m, p) {
      return arr[p];
    });
  }

  /**
   * @desc 지정한 문자열을 base64로 인코딩하여 반환한다.
   * @param {String} - 대상 문자열
   * @return {String} - base64 문자열
   * @example -
   */
  base64(str) {
    return window.btoa(unescape(encodeURIComponent(str)));
  }
}

customElements.define('jj-app-grid', JJAppGrid);
/* ==JJFilter.640.class================ */

/**
 * @classdesc 그리드 컴포넌트관리를 위한 클래스
 */
class JJAppFilter extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "colModel": [],
      "dataGrid":"",
      "class": "jj-app-filter"
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @param {String} - 챠트유형
   * @example -
   */
  _render() {
    let html =`
<ul class="list-group"></ul>
<div class="filter-box">
  <select class="field">
		<option></option>
		<optgroup label="user"></optgroup>
		<optgroup label="system"></optgroup>
	</select> 
  <select class="op"></select> 
  <div class="btn-group dropdown">
    <input class="f-value" type="search">
    <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
    <i class="mdi mdi-chevron-down"></i></button>
    <div class="dropdown-menu dropdown-menu-right  p-1">
      <input class="itemSearch" type="search">
      <div class="dropdown-divider"></div>
      <div class="item-box"></div>
    </div>
	</div>
	<button class="btn btn-success btn-add">Apply</button>  
</div>
`;
    this.innerHTML = html;

    this.filterGroup = this.querySelector(`ul.list-group`);
    this.filterBox = this.querySelector(`.filter-box`);
    this.field = this.querySelector(`select.field`);
    this.op = this.querySelector(`select.op`);
    this.fValue = this.querySelector(`input.f-value`);
    this.itemSearch = this.querySelector(`input.itemSearch`);
    this.itemBox = this.querySelector(`.item-box`);
    this.itemBox = this.querySelector(`.item-box`);

  }


  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {

    this.field.addEventListener("input", e=>this._setDomainOpOption())

    this.addEventListener("click", e=>{
      if(e.target.matches(`.btn-add`)) this._filterAdd();
      if(e.target.matches(`i.fa-remove`)) this._filterRemove(e.target.parentElement);
      if(e.target.matches(`.list-group-item a`)){
        this.field.value = e.target.dataset.field;
        this._setDomainOpOption();
        this.op.value = e.target.dataset.op;
        this.fValue.value = e.target.dataset.fvalue;
      }
      if(e.target.matches(`.dropdown-toggle`)){
        this._setDropdownItem();
      }
      if(e.target.matches(`.item-box *`)){
        this._getItemValue();
      }

    })
    
    this.fValue.addEventListener("keyup", e=>{
      if(e.keyCode == 13){
        this._filterAdd();
      }
    })

    this.itemSearch.addEventListener("input", e=>{
      this.itemBox.querySelectorAll('label').forEach(el=>{
        el.hidden = !el.innerText.includes(this.itemSearch.value);
      });  
    })
    
  }

  _getItemValue(){
    let values=[]
    this.itemBox.querySelectorAll('input:checked').forEach(el=>values.push(el.value));
    this.fValue.value = values.join(",");
  }

  _filterRemove(el){
		el.remove();
    
    this.dispatchEvent(
      new CustomEvent('changeFilter', {
        detail: {
          "filter": this.getFilter(),
          "colModel": this.options.colModel
        },
        bubbles: true
      })
    );    
  }
  _filterAdd(){
    let html = `
<li class="list-group-item">
<a
data-field="${this.field.value}"
data-op="${this.op.value}"
data-fvalue="${this.fValue.value}">
${this.field.options[this.field.selectedIndex].text}&nbsp;
${this.op.options[this.op.selectedIndex].text}&nbsp; 
<code>${this.fValue.value}</code></a>
<i class="fa fa-remove" aria-hidden="true"></i>
</li>
`;
    Jinja.dom.append(this.filterGroup, html)

    this.dispatchEvent(
      new CustomEvent('changeFilter', {
        detail: {
          "filter": this.getFilter(),
          "colModel": this.options.colModel
        },
        bubbles: true
      })
    );
    
  }

  _setDropdownItem(){
    let html = "";
    
    let codes =[];
    if(this.findCode){
      codes = Jinja.code.getGroup(this.findCode);
    } else if(this.options.dataGrid){
      this.options.dataGrid.options.data.forEach(row=>{
        if(!values.includes(row[this.field.value])){
          values.push({
            "CODE": row[this.field.value],
            "NAME": row[this.field.value]
          })
        }
      })
    } 

    codes.forEach(code=>{
      html += `<label><input type="checkbox" value="${code.CODE}">${code.NAME}</label>`;
    })
    this.itemBox.innerHTML = html;
  }  

  _setDomainOpOption(field){
    let col = this.options.colModel.find(item=>item.field == this.field.value);
    let html = '';

    this.findCode = col.code||""; 
    this.fValue.value = "";
    if(col){
      html += `<option value="=">같다</option>`;
      html += `<option value="<>">같지않다</option>`;
      switch(col.domain){
        case "VARCHAR":
        case "MEMO":
          html += `<option value="like">포함</option>`;
          html += `<option value="likeFrom">시작함</option>`;
          html += `<option value="likeTo">끝남</option>`;
          html += `<option value="in">여러값</option>`;
          break;
        case "INT":
        case "FLOAT":
        case "DATE":
        case "DATETIME":
          break;
      }
      html += `<option value=">">크다</option>`;
      html += `<option value="<">작다</option>`;
      html += `<option value=">=">크거나 같다</option>`;
      html += `<option value="<=">작거나 같다</option>`;
      html += `<option value="is null">null</option>`;
      html += `<option value="is not null">not null</option>`;
    }

    this.op.innerHTML = html;

  } 
  
  /**
   * @desc 이벤트를 삭제한다.
   * @example -
   */
  _clearEvent() {
  }

  /**
   * @static
   * @memberof JJGrid
   * @method get observedAttributes
   * @desc 모니터링 할 속성 목록을 반환한다.
   * @return {Array} - 모니터링 할 속성 목록
   * @example -
   */
  static get observedAttributes() {
    return [''];
  }

  /**
   * @desc 지정한 옵션으로 그리드를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    Object.assign(this.options, options);

    let systemColumns = DATA_TYPE.SystemColumnKey;
    
    let html = '';
    let html2 = '';
    this.options.colModel.forEach(col=>{
      if(systemColumns.includes(col.field)){
	      html2 += `<option value="${col.field}">${col.label}</option>`;
      } else {
	      html += `<option value="${col.field}">${col.label}</option>`;
        
      }
    })
		
    this.field.querySelector(`[label="user"]`).innerHTML = html;      
    this.field.querySelector(`[label="system"]`).innerHTML = html2;      
  }

  getFilter(){
    let result = [];
    this.filterGroup.querySelectorAll(`.list-group-item a`).forEach(el=>{
      switch(el.dataset.op){
        case "like":
          result.push({
            "field": el.dataset.field,
            "op": el.dataset.op,
            "val": ["%"+el.dataset.fvalue+"%"]
          });
          break;
        case "likeFrom":
          result.push({
            "field": el.dataset.field,
            "op": el.dataset.op,
            "val": [el.dataset.fvalue+"%"]
          });
          break;
        case "likeTo":
          result.push({
            "field": el.dataset.field,
            "op": el.dataset.op,
            "val": ["%"+el.dataset.fvalue]
          });
          break;
        case "in":
          result.push({
            "field": el.dataset.field,
            "op": el.dataset.op,
            "val": el.dataset.fvalue.split(",")
          });
          break;
        default:  
          result.push({
            "field": el.dataset.field,
            "op": el.dataset.op,
            "val":el.dataset.fvalue.split(",")
          });
          break;
      }
    })
    return result;
  }


}

customElements.define('jj-app-filter', JJAppFilter);
/* ==JJExcelLayout.640.class================ */
class JJExcelLayout extends JJElement {

  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    // 엑셀자료
    this.dbo; //JJBatisDBA
    this.rows = [];
    this.keymap = [];
    return {
      "jBatisId": workspaceMeta.options.appInfo.jbatisId,
      "tableName": "",
      "keyField": "KEY_ID",
      "gridClass": "jjExcel"
    };
  }

  _render() {

    this.setJBatis(this.options.jBatisId);

    this.file = document.createElement('input');
    this.file.type = "file"
    this.file.hidden = true;
    this.appendChild(this.file);

    this.excelBox = document.createElement('div');
    this.excelBox.setAttribute("class", "excelWrap");
    this.excelBox.setAttribute("tabindex", -1);
    this.appendChild(this.excelBox);

  }

  _setEvent() {
    this.file.addEventListener("change", e=>{
      this._fileUpload(this.file.files);
    })

    this.excelBox.addEventListener("dragover", e => {
      e.preventDefault();
      this.excelBox.classList.add("win-drag");
    });
    this.excelBox.addEventListener("dragleave", e => this.excelBox.classList.remove("win-drag"));
    this.excelBox.addEventListener("drop", e => {
      e.stopPropagation();
      e.preventDefault();
      var data = e.dataTransfer;

      if (data.types[0] == "Files") {
        this._fileUpload(data.files);    	
      }
      this.excelBox.classList.remove("win-drag");
    });

    this.excelBox.addEventListener('paste', (event) => {
      
      if(this.excelBox.childElementCount) return;

      let html = event.clipboardData.getData("text/html");
      
      if(html){
        let box = document.createElement('div');
        box.innerHTML = html;
        let table = box.querySelector('table');
				
        let thead = document.createElement('thead');
        
        table.querySelector('tbody').before(thead);
        
        this.excelBox.appendChild(table);
        
				let colLength=  table.querySelectorAll('colgroup col').length;
        let isHead = false;;
        table.querySelectorAll('tbody tr').forEach(tr=>{
          if(tr.querySelectorAll('td').length < colLength){
            thead.appendChild(tr);
            isHead = true;
          }
        })
			
        // 만일 해드파악이 안되면 첫번째 행을 해드로 정의한다
        if(!isHead){
          thead.appendChild(table.querySelector('tbody tr'));
        }
        
        thead.querySelectorAll("*").forEach(el=>{
          el.removeAttribute("height");
          el.removeAttribute("class");
          el.removeAttribute("width");
          el.removeAttribute("style");
        })
        table.querySelector('tbody').querySelectorAll("*").forEach(el=>{
          el.removeAttribute("height");
          el.removeAttribute("class");
          el.removeAttribute("width");
          el.removeAttribute("style");
        })
        
      }
    });    
  }

  _fileUpload(files){
    if(!files.length) return;

    let wait = new JJWaitLayer(this, {"mwssage": "업데이트 배포중입니다."});
    this.dbo.excelUpload(files).then(result => {
      this.rows = result.rows;
      this.excelBox.innerHTML = Jinja.global.json2html(this.rows);    
      this._makeImportTable();
      this.dispatchEvent(new CustomEvent('fileSelect', {
        detail: {
          "file": files[0]
        },
        bubbles: true
      }));
    }).finally(()=>{
      wait.destroy();      
    })

  }
  _makeImportTable(){
    let txtName = document.createElement("input");
    let selType = document.createElement("select");

    let _html = `<option value="">제외</option>`
    this.dbo.getDBDomain().forEach(item=>{
      _html += `<option value="${item.CODE}">${item.NAME}</option>`
    })
    selType.innerHTML = _html;

    // 컬럼명 만들기
    let nameTr = this.excelBox.querySelector('thead tr').cloneNode(true);
    this.excelBox.querySelector('thead').appendChild(nameTr);

    nameTr.querySelectorAll('th').forEach((th,index)=>{
      let typeVal = this.rows[0][th.innerText];
      let dType = this.dbo.val2DBDomain(typeVal);

      let columnName = 'COL'+index;

      th.$empty();
      let fname = txtName.cloneNode(true);
      fname.value = columnName;

      let ftype = selType.cloneNode(true);
      ftype.value = dType;

      th.appendChild(fname);
      th.appendChild(ftype);
    });

  }

  _table2json(table, isHead){
    let rows =[];
    let keys =[];

    if(isHead){
      table.querySelectorAll('tr').forEach((tr, _index_)=>{
        if(_index_==0){
          tr.querySelectorAll('td').forEach((td,index)=>{
            if(keys.includes(td.innerText.trim())){
              keys.push(td.innerText.trim().replaceAll(/\n/,'').replaceAll(/ /,'')+"_COL"+index);  
            } else {
              keys.push(td.innerText.trim().replaceAll(/\n/,'').replaceAll(/ /,''));  
            }

          })
        } else {
          let row={};
          tr.querySelectorAll('td').forEach((td,index)=>{
            row[keys[index]] = td.innerText.trim();
          })
          rows.push(row);
        }
      })
    } else {
      table.querySelectorAll('tr').forEach(tr=>{
        let row ={}
        tr.querySelectorAll('td').forEach((td,index)=>{
          row["COL"+index] = td.innerText;
        })
        rows.push(row);
      })

    }

    return rows;
  }


  fileOpen(){
    this.file.value="";
    this.file.click();
  }                               

  createTable(tableName){
    let wait = new JJWaitLayer(this, {"mwssage": "자료를 업로드 중입니다."});
    this.options.tableName = tableName;
    this.keymap = [
      {
        "COLUMN_NAME" : "CELL_INDEX", 
        "COLUMN_LABEL" : "행번호",
        "COLUMN_DOMAIN": "INT"
      }
    ];

    let th1 = this.excelBox.querySelectorAll('thead tr:nth-child(1) th');
    let th2 = this.excelBox.querySelectorAll('thead tr:nth-child(2) th');

    th2.forEach((th,index)=>{
      let ftype = th.querySelector('select').value;
      let fname = th.querySelector('input').value;
      let ename = th1[index].innerText;

      let column ={
        "COLUMN_NAME" : fname,
        "COLUMN_LABEL" : ename,
        "COLUMN_DOMAIN" : ftype
      }

      if(column.COLUMN_DOMAIN){
        this.keymap.push(column);
      }
    })



    let sendData = {
      "TABLE_NAME": this.options.tableName,
      "KEY_FIELD": this.options.keyField,
      "COLUMNS" : this.keymap
    };

    return this.dbo.createTable(sendData)
      .then(()=>{
      Jinja.confirm.toastMessage("테이블생성이 완료되었습니다.<br>업로드중입니다.");
			
      let sendData = [];
      this.rows.forEach((item,index)=>{
        item["KEY_ID"] = item["KEY_ID"]||Jinja.global.uuid();
        let row = {
          "table": this.options.tableName, 
          "keyField": this.options.keyField,
          "keyValue": item[this.options.keyField],
          "crud": "C",
          "field": {}
        };
        row.field["CELL_INDEX"] = index+1;

        this.keymap.forEach(column=>{
          if(column.COLUMN_NAME=="CELL_INDEX") return;
          switch(column.COLUMN_DOMAIN){
            case "INT":
              row.field[column.COLUMN_NAME] = parseInt(item[column.COLUMN_LABEL]);
              break;
            case "FLOAT":
              row.field[column.COLUMN_NAME] = item[column.COLUMN_LABEL].toString();
              break;
            default:
              row.field[column.COLUMN_NAME] = item[column.COLUMN_LABEL];
              break;
          }
        })
        sendData.push(row);
      });

      return this.dbo.multirows(sendData)
    })
      .then(result=>{
      // 설정화면에서 시스템 필드에 대해서도 라벨을 설정할수 있도록
      // 시스템에서 설정된 고유번호들도 생성해준다
      this.keymap = this.keymap
        .concat(this.dbo.getSystemColumns())
        .concat([
        {
          "COLUMN_NAME" : this.options.keyField, 
          "COLUMN_LABEL" : "고유번호",
          "COLUMN_DOMAIN": "VARCHAR",
        }
      ]);

      Jinja.confirm.toastMessage("테이블생성 후 <br>업로드가 완료되었습니다.");

      return this.getOptionMap()
    })
      .finally(()=>{
        wait.destroy();      
      });    


  }

  setJBatis(jbatisId){
    this.dbo = new JJBatisDBA({
      "workspace": jbatisId
    });   

    return this.dbo;
  }

  getOptionMap(){
    return {
      "workspace": this.options.jBatisId,
      "table": this.options.tableName,
      "keyField": this.options.keyField,
      "keymap": this.keymap  
    }
  }


}

customElements.define('jj-excel-layout', JJExcelLayout);
/* ==JJColor.640.class================ */

/**
 * @classdesc 색상메뉴 컴포넌트관리를 위한 클래스
 */
class JJColor extends JJElement {
  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.color = '#ffffff';
    this.innerHTML = 
      `<div style="margin:auto;width:236px;">` +
      `<img style="margin-right:2px;" src="/repository/systemImages/icons/img_colormap.gif" alt="colormap">` +
      `<map>` +
      `<area shape="poly" coords="63,0,72,4,72,15,63,19,54,15,54,4"  data-color="#003366,-200,54" data-over-color="#003366" alt="#003366">` +
      `<area shape="poly" coords="81,0,90,4,90,15,81,19,72,15,72,4"  data-color="#336699,-200,72" data-over-color="#336699" alt="#336699">` +
      `<area shape="poly" coords="99,0,108,4,108,15,99,19,90,15,90,4"  data-color="#3366CC,-200,90" data-over-color="#3366CC" alt="#3366CC">` +
      `<area shape="poly" coords="117,0,126,4,126,15,117,19,108,15,108,4"  data-color="#003399,-200,108" data-over-color="#003399" alt="#003399">` +
      `<area shape="poly" coords="135,0,144,4,144,15,135,19,126,15,126,4"  data-color="#000099,-200,126" data-over-color="#000099" alt="#000099">` +
      `<area shape="poly" coords="153,0,162,4,162,15,153,19,144,15,144,4"  data-color="#0000CC,-200,144" data-over-color="#0000CC" alt="#0000CC">` +
      `<area shape="poly" coords="171,0,180,4,180,15,171,19,162,15,162,4"  data-color="#000066,-200,162" data-over-color="#000066" alt="#000066">` +
      `<area shape="poly" coords="54,15,63,19,63,30,54,34,45,30,45,19"  data-color="#006666,-185,45" data-over-color="#006666" alt="#006666">` +
      `<area shape="poly" coords="72,15,81,19,81,30,72,34,63,30,63,19"  data-color="#006699,-185,63" data-over-color="#006699" alt="#006699">` +
      `<area shape="poly" coords="90,15,99,19,99,30,90,34,81,30,81,19"  data-color="#0099CC,-185,81" data-over-color="#0099CC" alt="#0099CC">` +
      `<area shape="poly" coords="108,15,117,19,117,30,108,34,99,30,99,19"  data-color="#0066CC,-185,99" data-over-color="#0066CC" alt="#0066CC">` +
      `<area shape="poly" coords="126,15,135,19,135,30,126,34,117,30,117,19"  data-color="#0033CC,-185,117" data-over-color="#0033CC" alt="#0033CC">` +
      `<area shape="poly" coords="144,15,153,19,153,30,144,34,135,30,135,19"  data-color="#0000FF,-185,135" data-over-color="#0000FF" alt="#0000FF">` +
      `<area shape="poly" coords="162,15,171,19,171,30,162,34,153,30,153,19"  data-color="#3333FF,-185,153" data-over-color="#3333FF" alt="#3333FF">` +
      `<area shape="poly" coords="180,15,189,19,189,30,180,34,171,30,171,19"  data-color="#333399,-185,171" data-over-color="#333399" alt="#333399">` +
      `<area shape="poly" coords="45,30,54,34,54,45,45,49,36,45,36,34"  data-color="#669999,-170,36" data-over-color="#669999" alt="#669999">` +
      `<area shape="poly" coords="63,30,72,34,72,45,63,49,54,45,54,34"  data-color="#009999,-170,54" data-over-color="#009999" alt="#009999">` +
      `<area shape="poly" coords="81,30,90,34,90,45,81,49,72,45,72,34"  data-color="#33CCCC,-170,72" data-over-color="#33CCCC" alt="#33CCCC">` +
      `<area shape="poly" coords="99,30,108,34,108,45,99,49,90,45,90,34"  data-color="#00CCFF,-170,90" data-over-color="#00CCFF" alt="#00CCFF">` +
      `<area shape="poly" coords="117,30,126,34,126,45,117,49,108,45,108,34"  data-color="#0099FF,-170,108" data-over-color="#0099FF" alt="#0099FF">` +
      `<area shape="poly" coords="135,30,144,34,144,45,135,49,126,45,126,34"  data-color="#0066FF,-170,126" data-over-color="#0066FF" alt="#0066FF">` +
      `<area shape="poly" coords="153,30,162,34,162,45,153,49,144,45,144,34"  data-color="#3366FF,-170,144" data-over-color="#3366FF" alt="#3366FF">` +
      `<area shape="poly" coords="171,30,180,34,180,45,171,49,162,45,162,34"  data-color="#3333CC,-170,162" data-over-color="#3333CC" alt="#3333CC">` +
      `<area shape="poly" coords="189,30,198,34,198,45,189,49,180,45,180,34"  data-color="#666699,-170,180" data-over-color="#666699" alt="#666699">` +
      `<area shape="poly" coords="36,45,45,49,45,60,36,64,27,60,27,49"  data-color="#339966,-155,27" data-over-color="#339966" alt="#339966">` +
      `<area shape="poly" coords="54,45,63,49,63,60,54,64,45,60,45,49"  data-color="#00CC99,-155,45" data-over-color="#00CC99" alt="#00CC99">` +
      `<area shape="poly" coords="72,45,81,49,81,60,72,64,63,60,63,49"  data-color="#00FFCC,-155,63" data-over-color="#00FFCC" alt="#00FFCC">` +
      `<area shape="poly" coords="90,45,99,49,99,60,90,64,81,60,81,49"  data-color="#00FFFF,-155,81" data-over-color="#00FFFF" alt="#00FFFF">` +
      `<area shape="poly" coords="108,45,117,49,117,60,108,64,99,60,99,49"  data-color="#33CCFF,-155,99" data-over-color="#33CCFF" alt="#33CCFF">` +
      `<area shape="poly" coords="126,45,135,49,135,60,126,64,117,60,117,49"  data-color="#3399FF,-155,117" data-over-color="#3399FF" alt="#3399FF">` +
      `<area shape="poly" coords="144,45,153,49,153,60,144,64,135,60,135,49"  data-color="#6699FF,-155,135" data-over-color="#6699FF" alt="#6699FF">` +
      `<area shape="poly" coords="162,45,171,49,171,60,162,64,153,60,153,49"  data-color="#6666FF,-155,153" data-over-color="#6666FF" alt="#6666FF">` +
      `<area shape="poly" coords="180,45,189,49,189,60,180,64,171,60,171,49"  data-color="#6600FF,-155,171" data-over-color="#6600FF" alt="#6600FF">` +
      `<area shape="poly" coords="198,45,207,49,207,60,198,64,189,60,189,49"  data-color="#6600CC,-155,189" data-over-color="#6600CC" alt="#6600CC">` +
      `<area shape="poly" coords="27,60,36,64,36,75,27,79,18,75,18,64"  data-color="#339933,-140,18" data-over-color="#339933" alt="#339933">` +
      `<area shape="poly" coords="45,60,54,64,54,75,45,79,36,75,36,64"  data-color="#00CC66,-140,36" data-over-color="#00CC66" alt="#00CC66">` +
      `<area shape="poly" coords="63,60,72,64,72,75,63,79,54,75,54,64"  data-color="#00FF99,-140,54" data-over-color="#00FF99" alt="#00FF99">` +
      `<area shape="poly" coords="81,60,90,64,90,75,81,79,72,75,72,64"  data-color="#66FFCC,-140,72" data-over-color="#66FFCC" alt="#66FFCC">` +
      `<area shape="poly" coords="99,60,108,64,108,75,99,79,90,75,90,64"  data-color="#66FFFF,-140,90" data-over-color="#66FFFF" alt="#66FFFF">` +
      `<area shape="poly" coords="117,60,126,64,126,75,117,79,108,75,108,64"  data-color="#66CCFF,-140,108" data-over-color="#66CCFF" alt="#66CCFF">` +
      `<area shape="poly" coords="135,60,144,64,144,75,135,79,126,75,126,64"  data-color="#99CCFF,-140,126" data-over-color="#99CCFF" alt="#99CCFF">` +
      `<area shape="poly" coords="153,60,162,64,162,75,153,79,144,75,144,64"  data-color="#9999FF,-140,144" data-over-color="#9999FF" alt="#9999FF">` +
      `<area shape="poly" coords="171,60,180,64,180,75,171,79,162,75,162,64"  data-color="#9966FF,-140,162" data-over-color="#9966FF" alt="#9966FF">` +
      `<area shape="poly" coords="189,60,198,64,198,75,189,79,180,75,180,64"  data-color="#9933FF,-140,180" data-over-color="#9933FF" alt="#9933FF">` +
      `<area shape="poly" coords="207,60,216,64,216,75,207,79,198,75,198,64"  data-color="#9900FF,-140,198" data-over-color="#9900FF" alt="#9900FF">` +
      `<area shape="poly" coords="18,75,27,79,27,90,18,94,9,90,9,79"  data-color="#006600,-125,9" data-over-color="#006600" alt="#006600">` +
      `<area shape="poly" coords="36,75,45,79,45,90,36,94,27,90,27,79"  data-color="#00CC00,-125,27" data-over-color="#00CC00" alt="#00CC00">` +
      `<area shape="poly" coords="54,75,63,79,63,90,54,94,45,90,45,79"  data-color="#00FF00,-125,45" data-over-color="#00FF00" alt="#00FF00">` +
      `<area shape="poly" coords="72,75,81,79,81,90,72,94,63,90,63,79"  data-color="#66FF99,-125,63" data-over-color="#66FF99" alt="#66FF99">` +
      `<area shape="poly" coords="90,75,99,79,99,90,90,94,81,90,81,79"  data-color="#99FFCC,-125,81" data-over-color="#99FFCC" alt="#99FFCC">` +
      `<area shape="poly" coords="108,75,117,79,117,90,108,94,99,90,99,79"  data-color="#CCFFFF,-125,99" data-over-color="#CCFFFF" alt="#CCFFFF">` +
      `<area shape="poly" coords="126,75,135,79,135,90,126,94,117,90,117,79"  data-color="#CCCCFF,-125,117" data-over-color="#CCCCFF" alt="#CCCCFF">` +
      `<area shape="poly" coords="144,75,153,79,153,90,144,94,135,90,135,79"  data-color="#CC99FF,-125,135" data-over-color="#CC99FF" alt="#CC99FF">` +
      `<area shape="poly" coords="162,75,171,79,171,90,162,94,153,90,153,79"  data-color="#CC66FF,-125,153" data-over-color="#CC66FF" alt="#CC66FF">` +
      `<area shape="poly" coords="180,75,189,79,189,90,180,94,171,90,171,79"  data-color="#CC33FF,-125,171" data-over-color="#CC33FF" alt="#CC33FF">` +
      `<area shape="poly" coords="198,75,207,79,207,90,198,94,189,90,189,79"  data-color="#CC00FF,-125,189" data-over-color="#CC00FF" alt="#CC00FF">` +
      `<area shape="poly" coords="216,75,225,79,225,90,216,94,207,90,207,79"  data-color="#9900CC,-125,207" data-over-color="#9900CC" alt="#9900CC">` +
      `<area shape="poly" coords="9,90,18,94,18,105,9,109,0,105,0,94"  data-color="#003300,-110,0" data-over-color="#003300" alt="#003300">` +
      `<area shape="poly" coords="27,90,36,94,36,105,27,109,18,105,18,94"  data-color="#009933,-110,18" data-over-color="#009933" alt="#009933">` +
      `<area shape="poly" coords="45,90,54,94,54,105,45,109,36,105,36,94"  data-color="#33CC33,-110,36" data-over-color="#33CC33" alt="#33CC33">` +
      `<area shape="poly" coords="63,90,72,94,72,105,63,109,54,105,54,94"  data-color="#66FF66,-110,54" data-over-color="#66FF66" alt="#66FF66">` +
      `<area shape="poly" coords="81,90,90,94,90,105,81,109,72,105,72,94"  data-color="#99FF99,-110,72" data-over-color="#99FF99" alt="#99FF99">` +
      `<area shape="poly" coords="99,90,108,94,108,105,99,109,90,105,90,94"  data-color="#CCFFCC,-110,90" data-over-color="#CCFFCC" alt="#CCFFCC">` +
      `<area shape="poly" coords="117,90,126,94,126,105,117,109,108,105,108,94"  data-color="#FFFFFF,-110,108" data-over-color="#FFFFFF" alt="#FFFFFF">` +
      `<area shape="poly" coords="135,90,144,94,144,105,135,109,126,105,126,94"  data-color="#FFCCFF,-110,126" data-over-color="#FFCCFF" alt="#FFCCFF">` +
      `<area shape="poly" coords="153,90,162,94,162,105,153,109,144,105,144,94"  data-color="#FF99FF,-110,144" data-over-color="#FF99FF" alt="#FF99FF">` +
      `<area shape="poly" coords="171,90,180,94,180,105,171,109,162,105,162,94"  data-color="#FF66FF,-110,162" data-over-color="#FF66FF" alt="#FF66FF">` +
      `<area shape="poly" coords="189,90,198,94,198,105,189,109,180,105,180,94"  data-color="#FF00FF,-110,180" data-over-color="#FF00FF" alt="#FF00FF">` +
      `<area shape="poly" coords="207,90,216,94,216,105,207,109,198,105,198,94"  data-color="#CC00CC,-110,198" data-over-color="#CC00CC" alt="#CC00CC">` +
      `<area shape="poly" coords="225,90,234,94,234,105,225,109,216,105,216,94"  data-color="#660066,-110,216" data-over-color="#660066" alt="#660066">` +
      `<area shape="poly" coords="18,105,27,109,27,120,18,124,9,120,9,109"  data-color="#336600,-95,9" data-over-color="#336600" alt="#336600">` +
      `<area shape="poly" coords="36,105,45,109,45,120,36,124,27,120,27,109"  data-color="#009900,-95,27" data-over-color="#009900" alt="#009900">` +
      `<area shape="poly" coords="54,105,63,109,63,120,54,124,45,120,45,109"  data-color="#66FF33,-95,45" data-over-color="#66FF33" alt="#66FF33">` +
      `<area shape="poly" coords="72,105,81,109,81,120,72,124,63,120,63,109"  data-color="#99FF66,-95,63" data-over-color="#99FF66" alt="#99FF66">` +
      `<area shape="poly" coords="90,105,99,109,99,120,90,124,81,120,81,109"  data-color="#CCFF99,-95,81" data-over-color="#CCFF99" alt="#CCFF99">` +
      `<area shape="poly" coords="108,105,117,109,117,120,108,124,99,120,99,109"  data-color="#FFFFCC,-95,99" data-over-color="#FFFFCC" alt="#FFFFCC">` +
      `<area shape="poly" coords="126,105,135,109,135,120,126,124,117,120,117,109"  data-color="#FFCCCC,-95,117" data-over-color="#FFCCCC" alt="#FFCCCC">` +
      `<area shape="poly" coords="144,105,153,109,153,120,144,124,135,120,135,109"  data-color="#FF99CC,-95,135" data-over-color="#FF99CC" alt="#FF99CC">` +
      `<area shape="poly" coords="162,105,171,109,171,120,162,124,153,120,153,109"  data-color="#FF66CC,-95,153" data-over-color="#FF66CC" alt="#FF66CC">` +
      `<area shape="poly" coords="180,105,189,109,189,120,180,124,171,120,171,109"  data-color="#FF33CC,-95,171" data-over-color="#FF33CC" alt="#FF33CC">` +
      `<area shape="poly" coords="198,105,207,109,207,120,198,124,189,120,189,109"  data-color="#CC0099,-95,189" data-over-color="#CC0099" alt="#CC0099">` +
      `<area shape="poly" coords="216,105,225,109,225,120,216,124,207,120,207,109"  data-color="#993399,-95,207" data-over-color="#993399" alt="#993399">` +
      `<area shape="poly" coords="27,120,36,124,36,135,27,139,18,135,18,124"  data-color="#333300,-80,18" data-over-color="#333300" alt="#333300">` +
      `<area shape="poly" coords="45,120,54,124,54,135,45,139,36,135,36,124"  data-color="#669900,-80,36" data-over-color="#669900" alt="#669900">` +
      `<area shape="poly" coords="63,120,72,124,72,135,63,139,54,135,54,124"  data-color="#99FF33,-80,54" data-over-color="#99FF33" alt="#99FF33">` +
      `<area shape="poly" coords="81,120,90,124,90,135,81,139,72,135,72,124"  data-color="#CCFF66,-80,72" data-over-color="#CCFF66" alt="#CCFF66">` +
      `<area shape="poly" coords="99,120,108,124,108,135,99,139,90,135,90,124"  data-color="#FFFF99,-80,90" data-over-color="#FFFF99" alt="#FFFF99">` +
      `<area shape="poly" coords="117,120,126,124,126,135,117,139,108,135,108,124"  data-color="#FFCC99,-80,108" data-over-color="#FFCC99" alt="#FFCC99">` +
      `<area shape="poly" coords="135,120,144,124,144,135,135,139,126,135,126,124"  data-color="#FF9999,-80,126" data-over-color="#FF9999" alt="#FF9999">` +
      `<area shape="poly" coords="153,120,162,124,162,135,153,139,144,135,144,124"  data-color="#FF6699,-80,144" data-over-color="#FF6699" alt="#FF6699">` +
      `<area shape="poly" coords="171,120,180,124,180,135,171,139,162,135,162,124"  data-color="#FF3399,-80,162" data-over-color="#FF3399" alt="#FF3399">` +
      `<area shape="poly" coords="189,120,198,124,198,135,189,139,180,135,180,124"  data-color="#CC3399,-80,180" data-over-color="#CC3399" alt="#CC3399">` +
      `<area shape="poly" coords="207,120,216,124,216,135,207,139,198,135,198,124"  data-color="#990099,-80,198" data-over-color="#990099" alt="#990099">` +
      `<area shape="poly" coords="36,135,45,139,45,150,36,154,27,150,27,139"  data-color="#666633,-65,27" data-over-color="#666633" alt="#666633">` +
      `<area shape="poly" coords="54,135,63,139,63,150,54,154,45,150,45,139"  data-color="#99CC00,-65,45" data-over-color="#99CC00" alt="#99CC00">` +
      `<area shape="poly" coords="72,135,81,139,81,150,72,154,63,150,63,139"  data-color="#CCFF33,-65,63" data-over-color="#CCFF33" alt="#CCFF33">` +
      `<area shape="poly" coords="90,135,99,139,99,150,90,154,81,150,81,139"  data-color="#FFFF66,-65,81" data-over-color="#FFFF66" alt="#FFFF66">` +
      `<area shape="poly" coords="108,135,117,139,117,150,108,154,99,150,99,139"  data-color="#FFCC66,-65,99" data-over-color="#FFCC66" alt="#FFCC66">` +
      `<area shape="poly" coords="126,135,135,139,135,150,126,154,117,150,117,139"  data-color="#FF9966,-65,117" data-over-color="#FF9966" alt="#FF9966">` +
      `<area shape="poly" coords="144,135,153,139,153,150,144,154,135,150,135,139"  data-color="#FF6666,-65,135" data-over-color="#FF6666" alt="#FF6666">` +
      `<area shape="poly" coords="162,135,171,139,171,150,162,154,153,150,153,139"  data-color="#FF0066,-65,153" data-over-color="#FF0066" alt="#FF0066">` +
      `<area shape="poly" coords="180,135,189,139,189,150,180,154,171,150,171,139"  data-color="#CC6699,-65,171" data-over-color="#CC6699" alt="#CC6699">` +
      `<area shape="poly" coords="198,135,207,139,207,150,198,154,189,150,189,139"  data-color="#993366,-65,189" data-over-color="#993366" alt="#993366">` +
      `<area shape="poly" coords="45,150,54,154,54,165,45,169,36,165,36,154"  data-color="#999966,-50,36" data-over-color="#999966" alt="#999966">` +
      `<area shape="poly" coords="63,150,72,154,72,165,63,169,54,165,54,154"  data-color="#CCCC00,-50,54" data-over-color="#CCCC00" alt="#CCCC00">` +
      `<area shape="poly" coords="81,150,90,154,90,165,81,169,72,165,72,154"  data-color="#FFFF00,-50,72" data-over-color="#FFFF00" alt="#FFFF00">` +
      `<area shape="poly" coords="99,150,108,154,108,165,99,169,90,165,90,154"  data-color="#FFCC00,-50,90" data-over-color="#FFCC00" alt="#FFCC00">` +
      `<area shape="poly" coords="117,150,126,154,126,165,117,169,108,165,108,154"  data-color="#FF9933,-50,108" data-over-color="#FF9933" alt="#FF9933">` +
      `<area shape="poly" coords="135,150,144,154,144,165,135,169,126,165,126,154"  data-color="#FF6600,-50,126" data-over-color="#FF6600" alt="#FF6600">` +
      `<area shape="poly" coords="153,150,162,154,162,165,153,169,144,165,144,154"  data-color="#FF5050,-50,144" data-over-color="#FF5050" alt="#FF5050">` +
      `<area shape="poly" coords="171,150,180,154,180,165,171,169,162,165,162,154"  data-color="#CC0066,-50,162" data-over-color="#CC0066" alt="#CC0066">` +
      `<area shape="poly" coords="189,150,198,154,198,165,189,169,180,165,180,154"  data-color="#660033,-50,180" data-over-color="#660033" alt="#660033">` +
      `<area shape="poly" coords="54,165,63,169,63,180,54,184,45,180,45,169"  data-color="#996633,-35,45" data-over-color="#996633" alt="#996633">` +
      `<area shape="poly" coords="72,165,81,169,81,180,72,184,63,180,63,169"  data-color="#CC9900,-35,63" data-over-color="#CC9900" alt="#CC9900">` +
      `<area shape="poly" coords="90,165,99,169,99,180,90,184,81,180,81,169"  data-color="#FF9900,-35,81" data-over-color="#FF9900" alt="#FF9900">` +
      `<area shape="poly" coords="108,165,117,169,117,180,108,184,99,180,99,169"  data-color="#CC6600,-35,99" data-over-color="#CC6600" alt="#CC6600">` +
      `<area shape="poly" coords="126,165,135,169,135,180,126,184,117,180,117,169"  data-color="#FF3300,-35,117" data-over-color="#FF3300" alt="#FF3300">` +
      `<area shape="poly" coords="144,165,153,169,153,180,144,184,135,180,135,169"  data-color="#FF0000,-35,135" data-over-color="#FF0000" alt="#FF0000">` +
      `<area shape="poly" coords="162,165,171,169,171,180,162,184,153,180,153,169"  data-color="#CC0000,-35,153" data-over-color="#CC0000" alt="#CC0000">` +
      `<area shape="poly" coords="180,165,189,169,189,180,180,184,171,180,171,169"  data-color="#990033,-35,171" data-over-color="#990033" alt="#990033">` +
      `<area shape="poly" coords="63,180,72,184,72,195,63,199,54,195,54,184"  data-color="#663300,-20,54" data-over-color="#663300" alt="#663300">` +
      `<area shape="poly" coords="81,180,90,184,90,195,81,199,72,195,72,184"  data-color="#996600,-20,72" data-over-color="#996600" alt="#996600">` +
      `<area shape="poly" coords="99,180,108,184,108,195,99,199,90,195,90,184"  data-color="#CC3300,-20,90" data-over-color="#CC3300" alt="#CC3300">` +
      `<area shape="poly" coords="117,180,126,184,126,195,117,199,108,195,108,184"  data-color="#993300,-20,108" data-over-color="#993300" alt="#993300">` +
      `<area shape="poly" coords="135,180,144,184,144,195,135,199,126,195,126,184"  data-color="#990000,-20,126" data-over-color="#990000" alt="#990000">` +
      `<area shape="poly" coords="153,180,162,184,162,195,153,199,144,195,144,184"  data-color="#800000,-20,144" data-over-color="#800000" alt="#800000">` +
      `<area shape="poly" coords="171,180,180,184,180,195,171,199,162,195,162,184"  data-color="#993333,-20,162" data-over-color="#993333" alt="#993333">` +
      `</map>` +
      `<div class="selectCell" alt="colormap"></div>` +
      `<ul class="list-inline color-base-group jj-active">` +
      `<li class="basecolor"  data-color=""></li>` +
      `<li class="basecolor1" data-color=""></li>` +
      `<li class="basecolor2" data-color=""></li>` +
      `<li class="basecolor3" data-color=""></li>` +
      `<li class="basecolor4" data-color=""></li>` +
      `<li class="basecolor5" data-color=""></li>` +
      `<li class="compcolor"  data-color=""></li>` +
      `</ul>` +
      `<ul class="list-inline color-gray-group jj-active">` +
      `<li class="colortext0"  data-color="#ffffff" title="white"></li>` +
      `<li class="colortext1"  data-color="#e6e6e6"></li>` +
      `<li class="colortext2"  data-color="#cccccc"></li>` +
      `<li class="colortext3"  data-color="#b3b3b3"></li>` +
      `<li class="colortext4"  data-color="#999999"></li>` +
      `<li class="colortext5"  data-color="#808080"></li>` +
      `<li class="colortext6"  data-color="#666666"></li>` +
      `<li class="colortext7"  data-color="#4d4d4d"></li>` +
      `<li class="colortext8"  data-color="#333333"></li>` +
      `<li class="colortext9"  data-color="#191919"></li>` +
      `<li class="colortext10" data-color="#000000" title="black"></li>` +
      `<li class="blank"       data-color="transparent" title="transparent"></li>` +
      `</ul>` +
      `<div class="input-group">` +
      `<div class="input-group-prepend">` +
      `<span class="input-group-text color-span">` +
      `<i class="fa fa-user"></i>` +
      `</span>` +
      `</div>` +
      `<input type="text" class="form-control">` +
      `</div>` +
      `<dl class="row">` +
      `<dt class="col-sm-3">name</dt><dd class="col-sm-9 color-name"></dd>` +
      `<dt class="col-sm-3">hex</dt><dd class="col-sm-9 color-hex"></dd>` +
      `<dt class="col-sm-3">rgb</dt><dd class="col-sm-9 color-rgb"></dd>` +
      `<dt class="col-sm-3">hsl</dt><dd class="col-sm-9 color-hsl"></dd>` +
      `<dt class="col-sm-3">hwb</dt><dd class="col-sm-9 color-hwb"></dd>` +
      `</dl>` +
      `</div>`;

    this.selectCell = this.querySelector('.selectCell');
    this.map = this.querySelector('map');
    this.map.id = Jinja.global.uuid();
    this.map.name = this.map.id;
    this.img = this.querySelector('img');
    this.img.setAttribute('usemap', '#' + this.map.id);
    this.input = this.querySelector('input');
    this.gray = this.querySelector('.color-gray-group');
    this.basecolor = this.querySelector('.color-base-group');
    this.colorSpan = this.querySelector('.color-span');

    this.colorName = this.querySelector('.color-name');
    this.colorHex = this.querySelector('.color-hex');
    this.colorRgb = this.querySelector('.color-rgb');
    this.colorHsl = this.querySelector('.color-hsl');
    this.colorHwb = this.querySelector('.color-hwb');

    let vars = [
      'basecolor',
      'compcolor',
      'basecolor1',
      'basecolor2',
      'basecolor3',
      'basecolor4',
      'basecolor5'
    ];

    vars.forEach(item => {
      let li = this.querySelector('.' + item);

      if (li) {
        let color = window
          .getComputedStyle(Jinja)
          .getPropertyValue('--' + item);
        li.style.backgroundColor = color;
        li.dataset.color = color;
      }
    });
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.map.addEventListener('mousemove', e => {
      if (e.target.matches('area')) {
        let color = e.target.dataset.color.split(',');

        if (this.overColor != color[0]) {
          this.overColor = color[0];
          this.dispatchEvent(
            new CustomEvent('overColor', {
              detail: {
                value: this.overColor
              }
            })
          );
        }
      }
    });

    this.map.addEventListener('click', e => {
      if (e.target.matches('area')) {
        let color = e.target.dataset.color.split(',');

        this.selectCell.style.left = color[2] + 'px';
        this.selectCell.style.top = color[1] + 'px';
        this.selectCell.style.opacity = 1;

        if (this.color != color[0]) {
          this.color = color[0];
          this.input.value = color[0];
          this.colorSpan.style.backgroundColor = color[0];

          let c = w3color(this.color);

          this.colorName.innerText = c.toName().toLowerCase() || 'unfind';
          this.colorHex.innerText = c.toHexString().toLowerCase();
          this.colorRgb.innerText = c.toRgbString().toLowerCase();
          this.colorHsl.innerText = c.toHslString().toLowerCase();
          this.colorHwb.innerText = c.toHwbString().toLowerCase();

          this.dispatchEvent(new Event('input', { bubbles: true }));
          this.dispatchEvent(new Event('change', { bubbles: true }));
          this.dispatchEvent(
            new CustomEvent('selectColor', {
              detail: {
                value: this.color
              }
            })
          );
        }
      }
    });

    this.basecolor.addEventListener('click', e => {
      let color = e.target.dataset.color;

      if (this.color != color) {
        this.selectCell.style.opacity = 0;
        this.color = color;
        this.input.value = this.color;
        this.colorSpan.style.backgroundColor = this.color;

        let c = w3color(this.color);

        this.colorName.innerText = c.toName().toLowerCase() || 'unfind';
        this.colorHex.innerText = c.toHexString().toLowerCase();
        this.colorRgb.innerText = c.toRgbString().toLowerCase();
        this.colorHsl.innerText = c.toHslString().toLowerCase();
        this.colorHwb.innerText = c.toHwbString().toLowerCase();

        this.dispatchEvent(new Event('input', { bubbles: true }));
        this.dispatchEvent(new Event('change', { bubbles: true }));
        this.dispatchEvent(
          new CustomEvent('selectColor', {
            detail: {
              value: this.color
            }
          })
        );
      }
    });

    this.gray.addEventListener('click', e => {
      let color = e.target.dataset.color;

      if (this.color != color) {
        this.selectCell.style.opacity = 0;
        this.color = color;
        this.input.value = this.color;
        this.colorSpan.style.backgroundColor = this.color;

        let c = w3color(this.color);

        this.colorName.innerText = c.toName().toLowerCase() || 'unfind';
        this.colorHex.innerText = c.toHexString().toLowerCase();
        this.colorRgb.innerText = c.toRgbString().toLowerCase();
        this.colorHsl.innerText = c.toHslString().toLowerCase();
        this.colorHwb.innerText = c.toHwbString().toLowerCase();

        this.dispatchEvent(new Event('input', { bubbles: true }));
        this.dispatchEvent(new Event('change', { bubbles: true }));
        this.dispatchEvent(
          new CustomEvent('selectColor', {
            detail: {
              value: this.color
            }
          })
        );
      }
    });

    this.input.addEventListener('input', e => {
      e.stopPropagation();
    });

    this.input.addEventListener('change', e => {
      e.stopPropagation();

      let c = w3color(this.input.value);
      let cell = this.map.querySelector(
        '[data-over-color="' + c.toHexString().toUpperCase() + '"]'
      );

      if (cell) cell.click();
      else {
        this.selectCell.style.opacity = 0;
        this.color = c.toHexString().toUpperCase();
        this.colorSpan.style.backgroundColor = this.color;
        this.dispatchEvent(new Event('input', { bubbles: true }));
        this.dispatchEvent(new Event('change', { bubbles: true }));
        this.dispatchEvent(
          new CustomEvent('selectColor', {
            detail: {
              value: this.color
            }
          })
        );
      }
    });
  }

  /**
   * @memberof JJColor
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.color;
  }

  /**
   * @memberof JJColor
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(val) {
    if (val) {
      this.color = Jinja.global.colorHexString(val);

      let cell = this.map.querySelector(
        '[data-over-color="' + this.color.toUpperCase() + '"]'
      );

      if (cell) cell.click();
      else {
        this.selectCell.style.opacity = 0;
        this.colorSpan.style.backgroundColor = this.color;
        this.input.value = this.color;

        let c = w3color(this.color);

        this.colorName.innerText = c.toName().toLowerCase() || 'unfind';
        this.colorHex.innerText = c.toHexString().toLowerCase();
        this.colorRgb.innerText = c.toRgbString().toLowerCase();
        this.colorHsl.innerText = c.toHslString().toLowerCase();
        this.colorHwb.innerText = c.toHwbString().toLowerCase();
        this.dispatchEvent(
          new CustomEvent('selectColor', {
            detail: {
              value: this.color
            }
          })
        );
      }
    }
  }
}

customElements.define('jj-color', JJColor);
/* ==JJMenu.640.class================ */

/**
 * @classdesc 메뉴 컴포넌트관리를 위한 클래스
 */
class JJMenu extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    this.appsUri = '';
    if (document.location.pathname.split('/')[1] == 'apps') {
      this.appsUri = '/apps/' + document.location.pathname.split('/')[2];
    }

    return {
      testMode: 'run', // test / run
      renderType: 'navigation-menu', //navigation-menu / metismenu
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render(menu) {
    this.innerHTML = 
      `<ul class="nav navbar-nav">` +
      `<li><a>워크스페이스에서 설정된 메뉴가 표시됩니다..</a></li>` +
      `</ul>`;

    //this.menu = menu || workspaceMeta.MENU;
    this.menu = menu;

    this.$empty();
    
    if (this.menu) {
      if (this.options.renderType === 'navigation-menu') {
        this._navigationMenu(this.menu);
      } else if (this.options.renderType === 'card-menu') {
        this._cardMenu(this.menu);
      } else {
        this._metisMenu(this.menu);
      }
    } else if(workspaceMeta.options.appInfo.menuUri){
      this._renderUri(workspaceMeta.options.appInfo.menuUri);
    } else if(this.options.renderSource=="folder"){
      this._renderFolder();
    }
  }

  /**
   * @desc 지정한 URI로 파일정보를 조회하여 메뉴를 생성한다.
   * @param {String} - URI
   * @example -
   */
  _renderUri(uri) {
    Jinja.driverApi.getUri(uri).then(fileInfo => {
      this.fileInfo = fileInfo;
      let body = Jinja.global.json(fileInfo.BODY)
      this._render(body)
    });
    //  Jinja.ajax.getJson(uri).then(body => this._render(body));
  }

  _renderFolder(folderId){
    folderId = folderId || workspaceMeta.options.appInfo.homeFolderId;

		return Jinja.driverApi
      .getTreeByFolderId(folderId)
      .then(treeData => {
	     file2Menu(treeData);
       this._render({
         "items": treeData
       })
    });    
    

    function file2Menu(files, path){
      path = path || "/";

      files.forEach(file=>{
        file.icon = file.ICON;
        file.title = file.NAME;

        // 왼쪽메뉴의 최상위는 아이콘이 필요함
        if( path == "/"){
          file.icon = file.icon||"fa-book";
        }
        
        if (file.items.length > 0 && !["images", "file"].includes(file.TYPE) ){
          file.href = "";  
          file2Menu(file.items, path+file.title+"/" )
        } else {
          if(["folder"].includes(file.TYPE)){
            file.href = null;
            file.items = null;
          } else {
            file.href = path+file.title;
            file.items = null;
          }
        }
      })
    }
    
  }


  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('click', e => {
      if (this.querySelector('li.active')) {
        this.querySelector('li.active').classList.remove('active');
      }

      if (this.querySelector('li > a.active')) {
        this.querySelectorAll('li > a.active').forEach(el =>
                                                       el.classList.remove('active')
                                                      );
      }

      if (e.target.matches('[test]')) {
        //alert(e.target.getAttribute('test') + ': Clicked!!');
      }

      if (e.target.matches('.metismenu li > a')) {
        e.target.parentElement.classList.toggle('mm-active');
        e.target.parentElement.classList.add('active');
        e.target.classList.add('active');
      }

      if (e.target.matches('li > a')) {
        Jinja.dom
          .parents(e.target, this, 'li')
          .forEach(li => li.querySelector('a').classList.add('active'));
      }
    });
  }

  
  /**
   * @desc 지정한 메뉴정보로 메뉴를 생성한다.
   * @param {Object} - 메뉴정보
   * @param {Element} - 메뉴엘리먼트
   * @param {Number} - 메뉴레벨
   * @example -
   */
  _cardMenu(menu, el, level) {
    if(menu=="null" || !menu) return;
    let ul = el || document.createElement('ul');

    level = (level || 0) + 1;

    menu.items.forEach(item => {
      let li = document.createElement('li');
      let a = document.createElement('a');

      if (item.href) {
        if (this.options.testMode == 'test') {
          a.setAttribute('test', item.href);
          a.href = '#';
        } else {
          a.href = this.appsUri + item.href;
        }
      }

      a.title = item.title;

      if (item.style) a.setAttribute('style', item.style);
      if (item.class) a.setAttribute('class', item.class);
      if (item.target) {
        a.setAttribute('target', item.target);
        a.setAttribute('rel', 'noreferrer');
      }

      let icon = document.createElement('i');

      icon.setAttribute('class', 'fa ' + (item.icon||"fa-book"));
      a.appendChild(icon);

      let textSpan = document.createElement('span');

      textSpan.appendChild(document.createTextNode(item.title));
      a.appendChild(textSpan);
      li.appendChild(a);
      ul.appendChild(li);

      if (item.items) {
        li.classList.add('has-submenu');

        let arrowDown = document.createElement('span');

        arrowDown.setAttribute('class', 'menu-arrow');
        a.appendChild(arrowDown);

        let dropdownUl = document.createElement('ul');

        this._metisMenu(item, dropdownUl, level);

        a.after(dropdownUl);
      }
    });

    if (level == 1) {
      ul.setAttribute('class', 'card-menu');

      this.appendChild(ul);
    } else if (level == 2) {
      ul.classList.add('nav-second-level');
    } else if (level == 3) {
      ul.classList.add('nav-thrid-level');
    }
  }  
  
  /**
   * @desc 지정한 메뉴정보로 메뉴를 생성한다.
   * @param {Object} - 메뉴정보
   * @param {Element} - 메뉴엘리먼트
   * @param {Number} - 메뉴레벨
   * @example -
   */
  _metisMenu(menu, el, level) {
    if(menu=="null" || !menu) return;
    let ul = el || document.createElement('ul');

    level = (level || 0) + 1;
    
    let ROLE_ID = Jinja.uo.MENU_URI;
		
    menu.items.forEach(item => {
      let menuRole;
      // 메뉴정봉[ Role이 있으면서 읽기권한이 없으면 생성을 중지한다
      if (workspaceMeta.options.policy.roleMenu && ROLE_ID && item.role ){
        let roles = Jinja.global.json(item.role);
        menuRole = roles.find(role=>role.ROLE_ID==ROLE_ID);
        if (menuRole.READ){
          item.role = menuRole;
        }
        else {
          return;
        }
        
      }
      
      let li = document.createElement('li');
      let a = document.createElement('a');

      if (item.href) {
        if (this.options.testMode == 'test') {
          a.setAttribute('test', item.href);
          a.href = '#';
        } else {
          a.href = this.appsUri + item.href;
        }
      }

      a.title = item.title;
      a.itemData = item;
      
      if (item.style) a.setAttribute('style', item.style);
      if (item.class) a.setAttribute('class', item.class);
      if (item.target) {
        a.setAttribute('target', item.target);
        a.setAttribute('rel', 'noreferrer');
      }

      let icon = document.createElement('i');

      icon.setAttribute('class', 'fa ' + item.icon);
      a.appendChild(icon);

      let textSpan = document.createElement('span');

      textSpan.appendChild(document.createTextNode(item.title));
      a.appendChild(textSpan);
      li.appendChild(a);
      ul.appendChild(li);

      if (item.items) {
        li.classList.add('has-submenu');

        let arrowDown = document.createElement('span');

        arrowDown.setAttribute('class', 'menu-arrow');
        a.appendChild(arrowDown);

        let dropdownUl = document.createElement('ul');

        this._metisMenu(item, dropdownUl, level);

        a.after(dropdownUl);
      }
    });

    if (level == 1) {
      ul.setAttribute('class', 'metismenu');

      this.appendChild(ul);
    } else if (level == 2) {
      ul.classList.add('nav-second-level');
    } else if (level == 3) {
      ul.classList.add('nav-thrid-level');
    }
  }

  
  /**
   * @desc 네비게이션 메뉴를 생성한다.
   * @param {Object} - 메뉴정보
   * @example -
   */
  _navigationMenu(menu) {
    if(menu=="null" || !menu) return;
    let ul = document.createElement('ul');

    ul.setAttribute('class', 'navigation-menu');

    menu.items.forEach(item => {
      let li = document.createElement('li');
      let a = document.createElement('a');

      if (item.href) {
        if (this.options.testMode == 'test') {
          a.setAttribute('test', item.href);
        } else {
          a.href = this.appsUri + item.href;
        }
      }

      a.title = item.title;

      if (item.style) {
        a.setAttribute('style', item.style);
      }

      if (item.class) {
        a.setAttribute('class', item.class);
      }

      if (item.target) {
        a.setAttribute('target', item.target);
        a.setAttribute('rel', 'noreferrer');
      }

      if (item.icon) {
        let icon = document.createElement('i');

        icon.setAttribute('class', 'fa ' + item.icon);
        a.appendChild(icon);
      }

      a.appendChild(document.createTextNode(item.title));
      li.appendChild(a);
      ul.appendChild(li);

      if (item.items) {
        li.classList.add('has-submenu');

        let arrowDown = document.createElement('div');

        arrowDown.setAttribute('class', 'arrow-down');
        a.appendChild(arrowDown);

        let dropdownUl = document.createElement('ul');

        if (!this.matches('side *')) {
          dropdownUl.classList.add('submenu');
        }

        item.items.forEach(subItem => {
          let subLi = document.createElement('li');
          let subA = document.createElement('a');

          if (this.options.testMode == 'test') {
            subA.setAttribute('test', subItem.href);
          } else {
            subA.href = subItem.href;
          }

          subA.title = subItem.title;

          if (subItem.style) {
            subA.setAttribute('style', subItem.style);
          }

          if (subItem.class) {
            subA.setAttribute('class', subItem.class);
          }

          if (subItem.target) {
            subA.setAttribute('target', subItem.target);
            subA.setAttribute('rel', 'noreferrer');
          }

          if (subItem.icon) {
            let icon = document.createElement('i');

            icon.setAttribute('class', 'fa ' + item.icon);
            subA.appendChild(icon);
          }

          subA.appendChild(document.createTextNode(subItem.title));
          subLi.appendChild(subA);
          dropdownUl.appendChild(subLi);
        });

        a.after(dropdownUl);
      }
    });

    this.appendChild(ul);
  }



  addMenu(item){
    let defaultItem = {
      "active": true,
      //"href": "\공통코드",
      "icon": "",
      //"menuId": "7522fffe-6fdd-4ce3-a703-fa0e09e71799",
      "target": "",
      //"title": "공통코드",
    };

		let newItem = Object.assign(defaultItem, item);

    this.menu.items.push(newItem);
    
    return Jinja.driverApi.updateFileBody(
      this.fileInfo.ID, 
      Jinja.global.string(this.menu), 
      this.fileInfo.VERSION);
  }

  getLocationPath(){
    let menuEl = this.querySelector(`a[href="${decodeURIComponent(location.pathname)}"]`);
    if(menuEl == null){
      return {
        "pathHtml": null,
        "parents":null,
        "menuEl" : null,
        "itemData":null
      }
    }
    let parents = menuEl.$parentAll('li', this);
    let pathHtml = '';
    parents.forEach((li,index)=>{
      let link = li.querySelector(`a`);
      let href = "#"+(link.href || ""); 
      li.classList.add('mm-active');
      link.classList.add('active');
      if (index < parents.length-1){
        pathHtml += `<li class="breadcrumb-item"><a href="${href}">${link.innerText}</a></li>`;
      } else {
        pathHtml += `<li class="breadcrumb-item active">${link.innerText}</li>`;
      }
    })
    return {
      "pathHtml": pathHtml,
      "parents":parents,
      "menuEl" : menuEl,
      "itemData": menuEl.itemData
    }
    
  }
  
  
}

customElements.define('jj-menu', JJMenu);
/* ==JJTree.640.class================ */

/**
 * @classdesc 트리 컴포넌트관리를 위한 클래스
 */
class JJTree extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      displayField: 'NAME',
      keyField: 'ID',
      iconField: 'icon',
      childField: 'items',
      categoryField: '',
      isIcon: false,
      icons: ['fa-folder-open', 'fa-file-text-o'],
      isCheck: false,
      isEdit: false,
      isDrag: false,
      isFolder: false,
      isFolderOnly: true,
      isClickFolding: false,
      isContextMenu: false,
      useKeyMove: false,
      dragMatches: '',
      dragObjectClass: '',
      contextMenu: [
        { label: 'Copy', command: 'copy', icon: 'fa-copy' },
        { label: 'Cut', command: 'cut', icon: 'fa-cut' },
        { label: 'Paste', command: 'paste', icon: 'fa-paste' },
        { label: 'divider' },
        { label: 'Remove', command: 'remove', icon: 'fa-remove' }
      ],
      addOn: ['editable', 'keydown', 'context', 'drag', 'checkbox']
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.classList.add('jj-tree');
    this.setAttribute('tabindex', -1);
    this.rootUl = document.createElement('ul');
    this._visbieItem = [];
    this.appendChild(this.rootUl);
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.addEventListener('click', this._onClick);
    this.addEventListener('dblclick', this._onDblClick);
    this.addEventListener('keydown', this._onKeydown);
    this.addEventListener('touchstart', this._onMousedown);
    this.addEventListener('touchend', this._onMouseup);

    this.addEventListener('mousedown', this._onMousedown);
    this.addEventListener('mouseup', this._onMouseup);
    this.addEventListener('dragstart', this._onDragstart);
    this.addEventListener('dragover', this._onDragover);
    this.addEventListener('drop', this._onDrop);
    this.addEventListener('dragleave', this._onDragleave);
    this.addEventListener('dragend', this._onDragend);
    this.options.isContextMenu = this.options.isContextMenu || this.hasAttribute("contextmenu");
    if (this.options.isContextMenu) {
      this.addEventListener('contextmenu', this._onContextmenu);
      this.addEventListener('jjContextMenuclick', this._onContextClick);
    }
  }

  _resetEvent(){
    this.removeEventListener("click", this._onClick)
    this.removeEventListener("dblclick", this._onDblClick)
    this.removeEventListener("keydown", this._onKeydown);
    this.removeEventListener("touchstart", this._onMousedown);
    this.removeEventListener("touchend", this._onMouseup);

    this.removeEventListener("mousedown", this._onMousedown);
    this.removeEventListener("mouseup", this._onMouseup);
    this.removeEventListener("dragstart", this._onDragstart);
    this.removeEventListener("dragover", this._onDragover);
    this.removeEventListener("drop", this._onDrop);
    this.removeEventListener("dragleave", this._onDragleave);
    this.removeEventListener("dragend", this._onDragend);
    this.removeEventListener("contextmenu", this._onContextmenu);
    this.removeEventListener("jjContextMenuclick", this._onContextClick);
  }  
  /**
   * @desc 지정한 데이터를 지정한 엘리먼트의 자식노드로 생성한다.
   * @param {Element} - 대상엘리먼트
   * @param {Array} - JSON 데이터 목록
   * @example -
   */
  _fromJson(ul, items) {
    items.forEach(item => {
      let li = this._renderItem(ul, item);
      let items = item[this.options.childField];

      if (items && items.length) {
        li.classList.add('has-child');

        let itemUl = document.createElement('ul');

        itemUl.classList.add('jstree-children');
        li.appendChild(itemUl);

        this._fromJson(itemUl, items);
      }
    });
  }

  /**
   * @desc 지정한 키에 해당하는 노드에 지정한 데이터로 자식노드를 추가한다.
   * @param {String} - 키
   * @param {Array} - JSON 데이터 목록
   * @example -
   */
  _updateJson(key, items) {
    if (!items.length) return;

    let item = this._findKey(key);

    if (item) {
      let li = item.parentElement;
      let itemUl = li.querySelector('ul');

      if (itemUl) {
        itemUl.$empty();
      } else {
        li.classList.add('has-child');
        itemUl = document.createElement('ul');
        li.appendChild(itemUl);
      }

      this._fromJson(itemUl, items);
    } else {
      console.error(`tree updateJson에서 ${key}의 노드를 찾을수 없습니다.`);
    }
  }

  /**
   * @desc 지정한 엘리먼트에 지정한 데이터로 생성한 엘리먼트를 자식엘리먼트로 추가한다.
   * @param {Object} - 대상엘리먼트
   * @param {Object} - JSON 데이터
   * @return {Object} - 자식엘리먼트
   * @example -
   */
  _renderItem(ul, item) {
    let label = item[this.options.displayField];
    let key = item[this.options.keyField];
    let icon = item[this.options.iconField]||this.options.icons[1];
    let addon = item["addon"]||"";
    let role = item["role"]||"";
    let itemClass = item["class"]||"";

    let html;

    if (this.options.isCheck){
      html = `<i class="jj-tree-folding"></i>
<a href="#" class="${itemClass}" key="${key}" title="${label}" role="${role}">
<i class="jj-tree-check"></i>
<i class="icon fa ${icon}"></i>
<t>${label}</t>
<span class="addon">${addon}</span>
</a>`;
    } 
    else {
      html = `<i class="jj-tree-folding"></i>
<a href="#" class="${itemClass}" key="${key}" title="${label}" role="${role}">
<i class="icon fa ${icon}"></i>
<t>${label}</t>
<span class="addon">${addon}</span>
</a>`;

    }

    let li = document.createElement("li");
    li.innerHTML = html;
    li.itemData = item;
    ul.appendChild(li);


    return li;  
  }

  /**
   * @desc 지정한 노드를 선택한다.
   * @param {Element} - 대상노드
   * @example -
   */
  _select(item) {
    this._selectMark(item);
    this.dispatchEvent(
      new CustomEvent('treeClick', {
        detail: {
          key: item.getAttribute('key'),
          data: item.parentElement.itemData
        },
        bubbles: true
      })
    );
  }

  /**
   * @desc 지정한 노드를 선택취소한다.
   * @param {Element} - 대상노드
   * @example -
   */
  _unselect() {
    //this.cutLi = null;
    //this.copyLi = null;
		
    this.querySelectorAll('.select').forEach(el=>{
      el.classList.remove('select');
      el.classList.remove('bg-primary');
      el.classList.remove('text-white');
    })
//     if (this.selectEl) {
//       this.selectEl.classList.remove('select');
//       this.selectEl.classList.remove('bg-primary');
//       this.selectEl.classList.remove('text-white');
//     }
    this.selectEl = null;

  }

  /**
   * @desc 지정한 노드를 선택표시한다.
   * @param {Element} - 대상노드
   * @example -
   */
  _selectMark(item) {

//     if (this.selectEl) {
//       this.selectEl.classList.remove('select');
//       this.selectEl.classList.remove('bg-primary');
//       this.selectEl.classList.remove('text-white');
//       this.selectEl = null;
//     }
    this._unselect();
		
    
    if (item) {
      this.selectEl = item;
      this.selectEl.classList.add('select');
      this.selectEl.classList.add('bg-primary');
      this.selectEl.classList.add('text-white');
      this.selectEl.scrollIntoView({
        behavior: 'smooth',
        block: 'nearest',
        inline: 'start'
      });
    }
  }

  /**
   * @desc 선택된 노드의 이전노드를 선택한다.
   * @param {Element} - 대상노드
   * @example -
   */
  _prevItem() {
    let index = this._visbieItem.indexOf(this.selectEl);

    index--;

    this._select(this._visbieItem[index]);
  }

  /**
   * @desc 선택된 노드의 다음 노드를 선택한다.
   * @param {Element} - 대상노드
   * @example -
   */
  _nextItem() {
    let index = this._visbieItem.indexOf(this.selectEl);

    index++;

    this._select(this._visbieItem[index]);
  }

  /**
   * @desc 선택된 노드의 상위노드를 선택한다.<br><br>
   * 하위노드가 펼쳐져 있을 경우 이동하지 않고 하위노드를 접는다.
   * @param {Element} - 대상노드
   * @example -
   */
  _leftItem() {
    let li = this.selectEl.parentElement;

    if (li.matches('.has-child') && li.matches('.show')) {
      li.classList.remove('show');

      this._visbieItemRefresh();
    } else {
      let parentItem = li.parentElement.closest('li');

      if (parentItem) {
        this._select(parentItem.querySelector('a'));
      }
    }
  }

  /**
   * @desc 선택된 노드의 다음노드를 선택한다.<br><br>
   * 하위노드가 접혀져 있을 경우 이동하지 않고 하위노드를 펼친다.
   * @example -
   */
  _rightItem() {
    let li = this.selectEl.parentElement;

    if (li.matches('.has-child') && li.matches('.show')) {
      this._nextItem();
    } else if (li.matches('.has-child') && !li.matches('.show')) {
      li.classList.add('show');

      this._visbieItemRefresh();
    } else {
      this._nextItem();
    }
  }

  /**
   * @desc 지정한 노드를 기준노드의 지정한 위치로 이동시킨다.
   * @param {Object} - 대상노드
   * @param {Object} - 기준노드
   * @param {String} - 이동위치
   * @param {Boolean} - 새로고침여부
   * @example -
   */
  _moveItem(fromLi, toLi, position, isSpeed) {
    if (!fromLi || !toLi) return;

    let fromUl;

    if (
      fromLi.parentElement &&
      fromLi.parentElement.tagName.toUpperCase() === 'UL'
    ) {
      fromUl = fromLi.parentElement;
    }

    try {
      switch (position) {
        case 'top':
          toLi.before(fromLi);

          break;
        case 'bottom':
          toLi.after(fromLi);

          break;
        case 'inner':
          let ul = toLi.querySelector('ul');

          if (!ul) {
            ul = document.createElement('ul');
            toLi.appendChild(ul);
          }

          ul.appendChild(fromLi);
          ul.parentElement.classList.add('has-child');
          ul.parentElement.classList.add('show');

          break;
      }
    } catch (ex) {
      console.error(ex);
    }

    if (fromUl && fromUl.parentElement && fromUl.childElementCount === 0) {
      fromUl.parentElement.classList.remove('has-child');
      fromUl.remove();
    }

    if (!isSpeed) {
      this._visbieItemRefresh();
    }
  }

  /**
   * @desc 드랍할 위치명 반환한다.
   * @param {Event} - 이벤트
   * @param {Number} - 여백
   * @return {String} - 위치명
   * @example -
   */
  _dropPosition(event, abs) {
    let dropPosition = 'bottom';

    if (!abs) abs = 6;

    let x =
        this.dropEl.getBoundingClientRect().x - this.getBoundingClientRect().x;
    let y =
        this.dropEl.getBoundingClientRect().y - this.getBoundingClientRect().y;
    let h = this.dropEl.offsetHeight;
    let w = this.dropEl.offsetWidth;
    let h2 = event.clientY - this.dropEl.getBoundingClientRect().y;
    let w2 = event.clientX - this.getBoundingClientRect().x - x;
    let py = h2 / h;
    let px = w2 / w;

    dropPosition = 'inner';

    if (h2 < abs) {
      dropPosition = 'top';
    } else if (h - h2 < abs) {
      dropPosition = 'bottom';
    } else {
      dropPosition = 'inner';
    }

    return dropPosition;
  }

  /**
   * @desc Visible 노드목록을 재생성한다.
   * @example -
   */
  _visbieItemRefresh() {
    if (this.options.useKeyMove) {
      window.requestAnimationFrame(e => {
        this._visbieItem = [];
        this.querySelectorAll('li > a').forEach(el => {
          if (Jinja.dom.isVisible(el)) this._visbieItem.push(el);
        });
      });
    }
  }

  /**
   * @desc 지정한 키의 노드를 반환한다.
   * @param {String} - 키
   * @return {Element} - 노드
   * @example -
   */
  _findKey(key) {
    return this.rootUl.querySelector(`a[key="${key}"]`);
  }

  /**
   * @desc 지정한 데이터와 동일한 노드를 반환한다.
   * @param {Object} - 데이터
   * @return {Element} - 노드
   * @example -
   */
  _findData(data) {
    var result;

    this.rootUl.querySelectorAll('li').forEach(li => {
      if (Object.is(li.itemData.nodeData, data)) {
        result = li;
      }
    });

    return result;
  }

  /**
   * @desc 클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onClick(event) {
    let item = event.target;

    if (event.target.matches('.has-child > .jj-tree-folding')) {
      event.target.parentElement.classList.toggle('show');

      this._visbieItemRefresh();
    } 
    else if (event.target.matches('.has-child > a')) {
      if (this.options.isClickFolding) {
        event.target.parentElement.classList.toggle('show');
      }

      if (this.options.isFolderOnly) {
        this._selectMark(event.target);
      } else {
        this._select(event.target);
      }

      this._visbieItemRefresh();
    } 
    else if (event.target.matches('a')) {
      this._select(event.target);
    }

    if (event.target.matches('.jj-tree-check')) {
      item.classList.toggle('checked');
      this.dispatchEvent(new CustomEvent('itemCheck', {
        "detail": {
          "key": item.parentElement.getAttribute('key'),
          "checked": item.classList.contains('checked'),
          "checkKeys": this.getCheckKeys(),
          "data": item.parentElement.parentElement.itemData
        },
        'bubbles': true
      }));        
    }

    if (event.target.matches('a')) {
      this.dispatchEvent(
        new CustomEvent('itemClick', {
          "detail": {
            "key": item.getAttribute('key'),
            "data": item.parentElement.itemData
          },
          "bubbles": true
        })
      );
    }
  }

  /**
   * @desc 클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDblClick(event) {
    let item = event.target;

    if (event.target.matches('a')) {
      this._select(event.target);
      this.dispatchEvent(new CustomEvent('itemDblClick', {
          "detail": {
            "key": item.getAttribute('key'),
            "data": item.parentElement.itemData
          },
          "bubbles": true
        }));
    }
  }
  
  /**
   * @desc 키다운 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onKeydown(event) {
    let keyMap = Jinja.global.getEventKeyMap(event);

    if (
      !this.options.useKeyMove &&
      ['Up', 'Down', 'Left', 'Right'].includes(keyMap)
    ) {
      return false;
    }

    if (['Up', 'Down', 'Left', 'Right', 'Space'].includes(keyMap)) {
      event.preventDefault();
      event.stopPropagation();
    }

    switch (keyMap) {
      case 'Up':
        this._prevItem();

        break;
      case 'Down':
        this._nextItem();

        break;
      case 'Left':
        this._leftItem();

        break;
      case 'Right':
        this._rightItem();

        break;
      case 'Ctrl-C':
        this._onCopy(event);

        break;
      case 'Ctrl-X':
        this._onCut(event);

        break;
      case 'Ctrl-V':
        this._onPaste(event);

        break;
      case 'Esc':
        this._unselect();

        break;
      case 'Delete':
        this._onDelete(event);

        break;
    }
  }

  /**
   * @desc 마우스다운 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onMousedown(event) {
    if (event.target.matches('a') && event.button === 0) {
      this.dragEl = event.target;
      this.dragEl.setAttribute('draggable', 'true');
    }
  }

  /**
   * @desc 마우스업 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onMouseup(event) {
    if (this.dragEl) {
      this.dragEl.removeAttribute('draggable');
      this.dragEl = null;
    }
  }

  /**
   * @desc 드래그시작 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDragstart(event) {
    let key = event.target.getAttribute('key');

    event.dataTransfer.setData('text/plain', key);
    event.dataTransfer.setData('key', key);
    event.dataTransfer.setData('objectClass', this.options.dragObjectClass);
  }

  /**
   * @desc 드래그오버 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDragover(event) {
    if (event.target.matches(`a:not([draggable])`)) {
      if (this.dragEl && this.dragEl.parentElement.contains(event.target)) {
        return;
      }

      if (
        this.options.dragMatches &&
        !event.target.matches(this.options.dragMatches)
      ) {
        return;
      }

      event.preventDefault();

      this.dropEl = event.target;
      this.dropEl.classList.add('dragover');

      let dropPosition = 'inner';

      if (!this.options.dragMatches) {
        dropPosition = this._dropPosition(event, 10);
      }

      this.dropEl.setAttribute('position', dropPosition);
    }
  }

  /**
   * @desc 드랍 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDrop(event) {
    if (this.dragEl) {
      if (Object.is(this.dragEl, this.dropEl)) {
        return;
      } else if (this.dragEl.parentElement.contains(this.dropEl)) {
        return;
      } else if (this.dropEl) {
        this._moveItem(
          this.dragEl.parentElement,
          this.dropEl.parentElement,
          this.dropEl.getAttribute('position')
        );
      }
    } else {
      this.dispatchEvent(
        new CustomEvent('treeExtDrop', {
          "detail": {
            "dropLi": this.dropEl.parentElement,
            "position": this.dropEl.getAttribute('position'),
            "dataTransfer": event.dataTransfer,
            "dropEvent": event
          },
          "bubbles": true
        })
      );

      this.dropEl.classList.remove('dragover');
      this.dropEl.removeAttribute('position');
      this.dropEl = null;
    }
  }

  /**
   * @desc 드래그리브 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDragleave(event) {
    if (event.target.matches(`a`) && event.target.classList.contains('dragover')) {
      event.target.classList.remove('dragover');
      event.target.removeAttribute('position');
    }
  }

  /**
   * @desc 드랍종료 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDragend(event) {
    if (this.dragEl) {
      this.dragEl.removeAttribute('draggable');
      this.dragEl = null;
    }

    if (this.dropEl) {
      this.dropEl.classList.remove('dragover');
      this.dropEl.removeAttribute('position');
      this.dropEl = null;
    }
  }

  /**
   * @desc 컨텍스트메뉴 생성 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onContextmenu(event) {
    if (event.target.matches(`a`)) {
      event.preventDefault();

      this._select(event.target);

      this.dispatchEvent(new CustomEvent('itemClick', {
        "detail": {
          "key": event.target.getAttribute('key'),
          "data": event.target.parentElement.itemData
        },
        "bubbles": true
      }));

      this.dispatchEvent( new CustomEvent('treeContextmenu', {
        "detail": {
          "key": event.target.getAttribute('key'),
          "data": event.target.parentElement.itemData,
          "tree": this,
          "target": event.target,
          "targetLi": event.target.parentElement,
          "event": event
        },
        "bubbles": false
      }));

      //       Jinja.context.render(this, event, [
      //         { command: 'copy', label: '복사', icon: 'fa-copy' },
      //         { command: 'cut', label: '자르기' },
      //         { label: 'divider' },
      //         { command: 'paste', label: '붙이기', icon: 'fa-paste' }
      //       ]);
    }
  }

  /**
   * @desc 컨텍스트메뉴 클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onContextClick(event) {
    event.preventDefault();

    let contextMenu = event.detail.menu;

    this.dispatchEvent( new CustomEvent('treeContextClick', {
      "detail": {
        "key": this.selectEl.getAttribute('key'),
        "data": this.selectEl.parentElement.itemData,
        "menu": contextMenu,
        "tree": this,
        "target": this.selectEl,
        "targetLi": this.selectEl.parentElement,
        "event": event
      },
      "bubbles": false
    }));

    //     switch (contextMenu) {
    //       case 'copy':
    //         this._onCopy(event);

    //         break;
    //       case 'cut':
    //         this._onCut(event);

    //         break;
    //       case 'paste':
    //         this._onPaste(event);

    //         break;
    //     }
  }

  /**
   * @desc 복사 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onCopy(event) {
    this.copyLi = this.selectEl.parentElement;
    this.cutLi = null;
  }

  /**
   * @desc 잘라내기 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onCut(event) {
    this.copyLi = null;
    this.cutLi = this.selectEl.parentElement;
  }

  /**
   * @desc 붙여넣기 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onPaste(event) {
    if (this.copyLi) {
      if (this.copyLi.contains(this.selectEl.parentElement)) {
        alert('대상 폴더가 원본 폴더의 하위 폴더입니다.');

        return;
      }

      this._moveItem(
        this.copyLi.cloneNode(true),
        this.selectEl.parentElement,
        'inner'
      );
    }

    if (this.cutLi) {
      if (this.cutLi.contains(this.selectEl.parentElement)) {
        alert('대상 폴더가 원본 폴더의 하위 폴더입니다.');

        return;
      }

      this._moveItem(this.cutLi, this.selectEl.parentElement, 'inner');
      this.cutLi = null;
    }
  }

  /**
   * @desc 삭제 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDelete(event) {
    Jinja.confirm
      .delete(`Delete OK?`)
      .then(() => this.selectEl.parentElement.remove());
  }

  //   /** 외부에서 수동 초기화 */
  init(opt){
    Object.assign(this.options, opt);		
    this.rootUl.$empty();
    this._resetEvent();
    this._setEvent();
  }  

  /**
   * @desc 모든 트리를 펼친다.
   * @example -
   */
  allShow() {
    this.rootUl
      .querySelectorAll('.has-child')
      .forEach(el => el.classList.add('show'));
  }

  /**
   * @desc 지정한 문자열을 포함하는 노드만 필터링하여 트리를 보여준다.
   * @param {String} - 문자열
   * @example -
   */
  contains(str) {
    if (str) {
      this.rootUl
        .querySelectorAll('li')
        .forEach(el => (el.style.display = 'none'));

      this.rootUl.querySelectorAll('li').forEach(el => {
        let aNode = el.querySelector(`:scope >a`);
        let findText =
            aNode.innerText +
            aNode.getAttribute('key') +
            Jinja.global.string(el.itemData);

        if (findText.toUpperCase().indexOf(str.toUpperCase()) >= 0) {
          Jinja.dom
            .parents(el, this.el, 'li')
            .forEach(findEl => (findEl.style.display = 'block'));
        }
      });
    } else {
      this.rootUl
        .querySelectorAll('li')
        .forEach(el => (el.style.display = 'block'));
    }
  }

  /**
   * @desc 지정한 데이터를 트리에 바인딩한다.
   * @param {Array} - JSON 데이터 목록
   * @param {*} - 최상위키필드값
   * @param {String} - 키필드명
   * @param {String} - 상위필드명
   * @param {String} - 정렬필드명
   * @param {String} - 하위노드 집합명
   * @example -
   */
  fromRows(rows, root, keyField, parentField, sortField, itemsName) {
    let treeData = this.row2tree(
      rows,
      root,
      keyField,
      parentField,
      sortField,
      itemsName
    );

    this.fromJson(treeData);
  }

  /**
   * @desc 지정한 데이터로 트리 엘리먼트를 생성한다.
   * @param {Array} - JSON 데이터 목록
   * @example -
   */
  fromJson(items) {
    this.rootUl.$empty();
    this._fromJson(this.rootUl, items);
    this._visbieItemRefresh();
  }

  /**
   * @desc 지정한 엘리먼트의 하위 노드정보를 JSON 데이터로 반환한다.
   * @param {Element} - 대상엘리먼트
   * @return {Array} - 노드정보목록
   * @example -
   */
  toJson(ul) {
    ul = ul || this.rootUl;

    let items = [];

    for (let i = 0; i < ul.children.length; i++) {
      let li = ul.children[i];
      let item = li.itemData;

      if (item) {
        delete item.items;

        items.push(item);

        if (li.querySelector('ul')) {
          let items = this.toJson(li.querySelector('ul'));

          if (items.length) {
            item.items = items;
          }
        }
      } else {
        alert('JJTree.toJson() itemData 를 찾을수 없습니다.');
      }
    }

    return items;
  }

  /**
   * @desc 선택된 노드 정보를 갱신한다.
   * @example -
   */
  updateSelectItem() {
    if(this.selectEl){
      let item = this.selectEl.parentElement.itemData;

      if (item) {
        let label = item[this.options.displayField];
        let key = item[this.options.keyField];
        let icon = item[this.options.iconField] || this.options.icons[1];

        this.selectEl.setAttribute('title', label);
        this.selectEl.querySelector('t').innerText = label;
        this.selectEl.querySelector('i').setAttribute('class', `icon fa ${icon}`);
      }
    }
  }

  /**
   * @desc 지정한 데이터와 정보를 이용하여 트리용 데이터로 변환하여 반환한다.
   * @param {Array} - 데이터
   * @param {*} - 최상위키필드값
   * @param {String} - 키필드명
   * @param {String} - 상위필드명
   * @param {String} - 정렬필드
   * @param {String} - 하위노드 집합명
   * @return {Object} - 트리 데이터
   * @example -
   */
  row2tree(rows, pv, pPN, pFN, pSo, pSubName) {
    pSubName = pSubName || 'subRows';

    let tree = {};

    if (pv === undefined) pv = null;
    if (pPN === undefined) pPN = '_ID';
    if (pFN === undefined) pFN = '_PID';
    if (pSo === undefined) pSo = 'SortNo';

    if (pv == 'row') {
      pv = rows[0][pFN];
    }

    let selRows;

    try {
      selRows = rows.filter(function (row) {
        return row[pFN] === pv;
      });

      if (pSo) {
        selRows = selRows.sort(function (a, b) {
          return (a[pSo] || '') > b[pSo || '']
            ? 1
          : (a[pSo] || '') < (b[pSo] || '')
            ? -1
          : 0;
        });
      }
    } catch (ex) {
      alert(ex.message);
    }

    tree = selRows;

    try {
      selRows.forEach((pR, pI) => {
        let _sub = this.row2tree(rows, pR[pPN], pPN, pFN, pSo, pSubName);

        if (_sub.length > 0) {
          pR[pSubName] = _sub;
        } else {
          pR[pSubName] = [];
        }
      });
    } catch (ex) {
      alert(ex.message);
    }

    return tree;
  }

  /**
   * @desc 지정한 키에 해당하는 노드를 선택하고 반환한다.
   * @param {String} - 키
   * @return {Element} - 노드
   * @example -
   */
  activeTreeByKey(key) {
    this._unselect();

    let node = this._findKey(key);

    if (node) {
      this._select(node);

      node.parentElement.parentElement
        .$parentAll('li', this)
        .forEach(el => el.classList.add('show'));
      node.scrollIntoView({
        behavior: 'smooth',
        block: 'nearest',
        inline: 'start'
      });
    }

    return node;
  }

  getActiveKey(){
    let key;
    if(this.selectEl){
      key = this.selectEl.getAttribute('key');
    }
    return key;
  }

  /**
   * @desc 지정한 키의 노드를 반환한다.
   * @param {String} - 키
   * @return {Element} - 노드
   * @example -
   */
  findKeyNode(key){
    return this._findKey(key);
  }  
  
  
  /**
   * @desc 해당 노드의 경로를 반환한다.
   * @param {String} - 키
   * @return {Array} - 노드경로
   * @example -
   */
  getFilePath(key) {
    let cur = this.querySelector('[key="' + key + '"]');
    let rlt = [];
    let nodeList = Jinja.dom.closestAll(cur, 'li', this);

    nodeList.reverse().forEach(el => {
      rlt.push({
        id: el.querySelector('a').getAttribute('key'),
        name: el.querySelector('a t').innerText,
      });
    });

    return rlt;
  }

  /**
   * @desc 현재 체크된 트리의 키를 배열로 리턴함
   * @return {Array} - 키배열
   * @example -
   */  
  getCheckKeys(){
    let items =[];
    this.rootUl.querySelectorAll(`.jj-tree-check.checked`)
      .forEach(el=>items.push(el.parentElement.getAttribute('key')));
    return items;
  }  

  /**
   * @desc 지정한 데이터와 동일한 노드를 선택하고 반환한다.
   * @param {Object} - JSON 데이터
   * @return {Element} - 노드
   * @example -
   */
  findData(data) {
    let li = this._findData(data);

    if (li) {
      let node = li.querySelector(`a`);

      node.parentElement.parentElement
        .$parentAll('li', this)
        .forEach(el => el.classList.add('show'));

      this._selectMark(node);

      node.scrollIntoView({
        behavior: 'smooth',
        block: 'nearest',
        inline: 'start'
      });
    }

    this._visbieItemRefresh();

    return li;
  }

  /**
   * @desc 지정한 데이터를 최상위노드의 자식노드로 추가한다.
   * @param {Object} - JSON 데이터
   * @example -
   */
  addItem(data) {
    this._renderItem(this.rootUl, data);
  }

  /**
   * @desc 지정한 데이터를 선택된 노드의 자식노드로 추가한다.
   * @param {Object} - JSON 데이터
   * @example -
   */
  addChildItem(data) {
    let targetUl;

    if (this.selectEl) {
      if (this.selectEl.nextElementSibling) {
        targetUl = this.selectEl.nextElementSibling;
      } else {
        targetUl = document.createElement('ul');
        targetUl.classList.add('jstree-children');

        this.selectEl.after(targetUl);
        this.selectEl.parentElement.classList.add('has-child');
      }
    } else {
      alert('추가할 상위노드을 선택하세요.');

      return;
    }

    this._renderItem(targetUl, data);
  }

  emptyChildItem(keyId){
    let item = this._findKey(keyId);

    if (item) {
      let li = item.parentElement;
      let itemUl = li.querySelector('ul');

      if (itemUl) {
        li.classList.remove('has-child');
        itemUl.remove();
      } 
    } else {
      console.error(`tree updateJson에서 ${key}의 노드를 찾을수 없습니다.`);
    }
  }  

  /**
   * @desc 지정한 데이터키를 가진 하위로 추가한다
   * @param {String} - 상위 키데이터
   * @param {Object} - 추가할 데이터셑
   * @example -
   */  
  addKeyChildItem(keyId,data){
    let targetUl;

    let keyIdEl = this._findKey(keyId);

    if (keyIdEl){
      this.selectEl = keyIdEl;
    } else {
      alert("tree대상키를 찾지못했습니다");
      return;
    }

    if (this.selectEl){
      if(this.selectEl.nextElementSibling){
        targetUl = this.selectEl.nextElementSibling;
      }else {
        targetUl = document.createElement("ul");
        targetUl.classList.add("jstree-children"); 
        this.selectEl.after(targetUl);
        this.selectEl.parentElement.classList.add("has-child");
      }
    } else {
      alert("추가할 상위아이템을 선택하세요");
      return;
    }
    this._renderItem(targetUl , data)
  }

  /**
   * @desc 지정한 데이터를 지정한 노드의 특정위치에 이동한다.
   * @param {Object} - JSON 데이터
   * @param {Element} - 대상노드
   * @param {String} - 위치명
   * @example -
   */
  dropChildItem(data, toLi, position) {
    let dumy = document.createElement('ul');
    let fromLi = this._renderItem(dumy, data);

    this._moveItem(fromLi, toLi, position);

    if (position == 'inner') {
      toLi.classList.add('has-child');
    }
  }

  /**
   * @desc 선택된 노드를 삭제한다.
   * @example -
   */
  removeSelectItem() {
    if (this.selectEl) {
      Jinja.confirm
        .delete(`Delete OK?`)
        .then(() => this.selectEl.parentElement.remove());
    } else {
      alert('삭제할 노드를 선택하세요.');
    }
  }

  /**
   * @desc 엘리먼트를 삭제한다.
   * @param {} -
   * @return {} -
   * @example -
   */
  clear() {
    this.rootUl.$empty();
  }
}

customElements.define('jj-tree', JJTree);
/* ==JJDomTree.640.class================ */

/**
 * @classdesc DomTree 컴포넌트관리를 위한 클래스
 */
class JJDomTree extends JJTree {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      displayField: 'NAME',
      keyField: 'ID',
      iconField: 'icon',
      childField: 'items',
      categoryField: '',
      isIcon: false,
      icons: ['fa-folder-open', 'fa-file-text-o'],
      isCheck: false,
      isEdit: false,
      isDrag: false,
      isFolder: false,
      isFolderOnly: false,
      isClickFolding: false,
      isContextMenu: false,
      useKeyMove: false,
      dragMatches: '',
      dragObjectClass: '',
      contextMenu: [],
      addOn: [],
      version: '640',
    };
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    super._setEvent();

    this.oMutationObserver = new MutationObserver(mutations => {
      let childListed = mutations.some(
        mutation => mutation.type == 'childList'
      );

      if (childListed) {
        if (
          mutations.length == 1 &&
          mutations[0].addedNodes.length == 1 &&
          mutations[0].addedNodes[0].nodeType == 3
        ) {
        } else {
          if (mutations[0].removedNodes.length) {
            mutations[0].removedNodes.forEach(node => {
              let li = this.findData(node);

              if (li) li.remove();
            });
          } else {
            this.setDomTree();

            if (this.selectedNode) {
            }
          }
        }
      }
    });
  }

  /**
   * @desc 지정한 엘리먼트에 지정한 데이터로 생성한 엘리먼트를 자식엘리먼트로 추가한다.
   * @param {Object} - 대상엘리먼트
   * @param {Object} - 자식엘리먼트 데이터
   * @return {Object} - 자식엘리먼트
   * @example -
   */
  _renderItem(ul, item) {
    let label = item.label;
    let html =
      `<i class="jj-tree-folding"></i>` +
      `<a href="#" title="${label}"><t>${label}</t></a>`;
    let li = document.createElement('li');

    li.itemData = Object.assign({}, item);
    li.innerHTML = html;
    ul.appendChild(li);

    return li;
  }

  /**
   * @desc 지정한 엘리먼트를 기준엘리먼트의 지정한 위치로 이동시킨다.
   * @param {Object} - 대상엘리먼트
   * @param {Object} - 기준엘리먼트
   * @param {String} - 이동위치
   * @param {Boolean} - 새로고침여부
   * @example -
   */
  _moveItem(fromLi, toLi, position, isSpeed) {
    if (!fromLi || !toLi) return;

    let fromUl;

    if (
      fromLi.parentElement &&
      fromLi.parentElement.tagName.toUpperCase() === 'UL'
    ) {
      fromUl = fromLi.parentElement;
    }

    try {
      switch (position) {
        case 'top':
          toLi.before(fromLi);
          toLi.itemData.nodeData.before(fromLi.itemData.nodeData);

          break;
        case 'bottom':
          toLi.after(fromLi);
          toLi.itemData.nodeData.after(fromLi.itemData.nodeData);

          break;
        case 'inner':
          let ul = toLi.querySelector('ul');

          if (!ul) {
            ul = document.createElement('ul');
            toLi.appendChild(ul);
          }

          ul.appendChild(fromLi);
          toLi.itemData.nodeData.appendChild(fromLi.itemData.nodeData);
          ul.parentElement.classList.add('has-child');
          ul.parentElement.classList.add('show');

          break;
      }
    } catch (ex) {
      console.error(ex);
    }

    if (fromUl && fromUl.parentElement && fromUl.childElementCount === 0) {
      fromUl.parentElement.classList.remove('has-child');
      fromUl.remove();
    }

    if (!isSpeed) {
      this._visieItemRefresh();
    }
  }

  /**
   * @desc 지정한 엘리먼트의 트리라벨을 생성하여 반환한다.
   * @param {Element} - 노드엘리먼트
   * @return {String} - 트리라벨
   * @example -
   */
  _domTreeLabel(node) {
    let result = '';

    if ([1, 2, 3].includes(node.nodeType)) {
      let tagName = node.tagName || '#TEXT';
      let codeText = '';

      if (node.getAttribute('jj-id')) {
        codeText = '#' + node.getAttribute('jj-id');
      }

      if (node.getAttribute('class')) {
        codeText = '[' + node.getAttribute('class') + ']';
      }

      if (node.getAttribute('data-render') && node.getAttribute('data-type')) {
        tagName = tagName + ':' + node.getAttribute('data-type');
      }

      result = `${tagName} ${codeText}`;
    }

    return result;
  }

  /**
   * @desc 삭제 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDelete(event) {
    this.targetVhtml.selectNodeRemove();
    this.focus();
  }

  /**
   * @desc 지정한 에디터를 트리엘리먼트와 연결한다.
   * @param {Object} - 지정된 Edit
   * @return {}-
   * @example -
   */
  setEdit(freamEdit) {
    this.targetVhtml = freamEdit;
    this.targetVhtml.addEventListener('undo', e => {
      this.setDomTree();
    });
    this.targetVhtml.addEventListener('redo', e => {
      this.setDomTree();
    });
    this.targetVhtml.addEventListener('open', e => {
      this.setDomTree();
    });
  }

  /**
   * @desc 지정한 엘리먼트로 트리 컴포넌트를 생성한다.
   * @param {Object} - 지정된 Element
   * @example -
   */
  setDom(el) {
    if (!el) {
      this.selectedNode = null;
      this.oMutationObserver.disconnect();
      this.selectDom = null;

      return;
    }

    if (Object.is(this.selectDom, el)) return;
    if (this.selectDom) this.oMutationObserver.disconnect();

    this.selectDom = el;
    this.oMutationObserver.observe(this.selectDom, {
      childList: true,
      attributes: true,
      characterData: true,
      subtree: true,
      attributeOldValue: true,
      characterDataOldValue: true,
      attributeFilter: ['style', 'class']
    });

    this.setDomTree();
  }

  /**
   * @desc 선택된 엘리먼트로 트리 컴포넌트를 생성한다.
   * @param {} -
   * @return {} -
   * @example -
   */
  setDomTree() {
    let treeData = this.dom2Json(this.selectDom);

    this.fromJson(treeData);
  }

  /**
   * @desc 지정한 엘리먼트를 JSON데이터로 변경하여 반환한다.
   * @param {Object} - 지정된 Element
   * @return {Array} - json구조로 변환된 자식들의 데이터를 담은 배열
   * @example -
   */
  dom2Json(element) {
    let result = [];

    for (let i = 0; i < element.children.length; i++) {
      let node = element.children[i];

      if ([1, 2, 3].includes(node.nodeType)) {
        let newItem = {
          label: this._domTreeLabel(node),
          nodeData: node
        };

        result.push(newItem);

        if (node.matches('[data-render]')) {
        } else if (node.tagName == 'SVG') {
        } else if (node.children.length) {
          newItem.items = this.dom2Json(node);
        }
      }
    }

    return result;
  }

  /**
   * @desc 지정한 노드의 활성화여부를 변경한다.
   * @param {Object} - 대상노드
   * @return {} -
   * @example -
   */
  activeNode(node) {
    window.setTimeout(e => {
      if (Object.is(this.selectedNode, node)) {
        return;
      }

      this.selectedNode = null;
      this._unselect();

      if (node) {
        this.selectedNode = node;
        this.findData(this.selectedNode);
      }
    }, 200);
  }
}

customElements.define('jj-domtree', JJDomTree);
/* ==JJFileReadTree.640.class================ */

/**
 * @classdesc FileReadTree 컴포넌트관리를 위한 클래스
 */
class JJFileReadTree extends JJTree {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      displayField: 'NAME',
      keyField: 'ID',
      iconField: 'icon',
      childField: 'items',
      categoryField: '',
      isIcon: false,
      icons: ['fa-folder-open', 'fa-file-text-o'],
      isCheck: false,
      isEdit: false,
      isDrag: false,
      isFolder: false,
      isClickFolding: false,
      isContextMenu: false,
      useKeyMove: false,
      dragMatches: '',
      dragObjectClass: '',
      contextMenu: null,
      addOn: ['editable', 'keydown', 'context', 'drag', 'checkbox']
    };
  }

  /**
   * @desc 지정한 엘리먼트에 지정한 데이터로 생성한 엘리먼트를 자식엘리먼트로 추가한다.
   * @param {Object} - 대상엘리먼트
   * @param {Object} - 자식엘리먼트 데이터
   * @return {Object} - 자식엘리먼트
   * @example -
   */
  _renderItem(ul, item) {
    let label = item.NAME;
    let key = item.ID;
    let icon = item.TYPE_ICON || 'fa-book';
    let html = 
      `<i class="jj-tree-folding"></i>` +
      `<a key="${key}" title="${label}">` +
      `<i class="icon fa ${icon}"></i><t>${label}</t>` +
      `<span class="addon"></span>` +
      `</a>`;
    let li = document.createElement('li');

    li.innerHTML = html;
    li.itemData = item;
    ul.appendChild(li);

    return li;
  }

  /**
   * @desc 지정한 엘리먼트를 선택한다.
   * @param {Element} - 대상엘리먼트
   * @example -
   */
  _select(item) {
    this._selectMark(item);

    if (['file'].includes(item.parentElement.itemData.TYPE)) {
      return;
    } else if ('folder' == item.parentElement.itemData.TYPE) {
      this.dispatchEvent(
        new CustomEvent('folderClick', {
          detail: {
            key: item.getAttribute('key'),
            title: item.title,
            data: item.parentElement.itemData
          },
          bubbles: true
        })
      );
    } else {
      this.dispatchEvent(
        new CustomEvent('treeClick', {
          detail: {
            key: item.getAttribute('key'),
            title: item.title,
            data: item.parentElement.itemData
          },
          bubbles: true
        })
      );
    }
  }

  /**
   * @desc 지정한 옵션으로 엘리먼트를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    super.init(options);
  }

  /**
   * @desc 지정한 폴더의 하위 데이터를 트리 데이터 형태로 반환한다.
   * @param {String} - 폴더 아이디
   * @return {Promiss} - 실행결과
   * @example -
   */
  getTreeByFolderId(folderId) {
    return Jinja.driverApi
      .getTreeByFolderId(folderId)
      .then(treeData => this.fromJson(treeData));
  }
}

customElements.define('jj-file-read-tree', JJFileReadTree);
/* ==JJFileTree.640.class================ */

/**
 * @classdesc FileTree 컴포넌트관리를 위한 클래스
 */
class JJFileTree extends JJTree {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      displayField: 'NAME',
      keyField: 'ID',
      iconField: 'icon',
      childField: 'items',
      categoryField: '',
      isIcon: false,
      icons: ['fa-folder-open', 'fa-file-text-o'],
      isCheck: false,
      isEdit: false,
      isDrag: false,
      isFolder: false,
      isFolderOnly: false,
      isClickFolding: false,
      isContextMenu: true,
      useKeyMove: false,
      dragMatches: '',
      dragObjectClass: '',
      contextMenu: [
        { label: 'Copy', command: 'copy', icon: 'fa-copy' },
        { label: 'Cut', command: 'cut', icon: 'fa-cut' },
        { label: 'Paste', command: 'paste', icon: 'fa-paste' },
        { label: 'divider' },
        { label: 'Remove', command: 'remove', icon: 'fa-remove' }
      ],
      addOn: ['editable', 'keydown', 'context', 'drag', 'checkbox']
    };
  }

  /**
   * @desc 지정한 엘리먼트에 지정한 데이터로 생성한 엘리먼트를 자식엘리먼트로 추가한다.
   * @param {Object} - 대상엘리먼트
   * @param {Object} - 자식엘리먼트 데이터
   * @return {Object} - 자식엘리먼트
   * @example -
   */
  _renderItem(ul, item) {
    let label = item.NAME;
    let key = item.ID;
    let icon = item.TYPE_ICON || 'fa-book';
    let version = item.TYPE == 'folder' ? '' : item.VERSION;
    let lockerHtml = `<i class="lock fa"></i>`;

    if (item.LOCKER_ID) {
      if (item.LOCKER_ID == Jinja.uo.USER_ID) {
        lockerHtml = `<i class="lock fa fa-lock" locker="${item.LOCKER_ID}" title="${item.LOCKER_NAME}"></i>`;
      } else {
        lockerHtml = `<i class="lock fa fa-user-circle-o" locker="${item.LOCKER_ID}" title="${item.LOCKER_NAME}"></i>`;
      }
    }

    let html = `<i class="jj-tree-folding"></i><a key="${key}" title="${label}">`;

    if (this.options.isCheck) {
      html += `<i class="jj-tree-check"></i>`;
    }

    html += 
      `<i class="icon fa ${icon}"></i><t>${label}</t>` +
      `<span class="addon"><small title="version">${version}</small>${lockerHtml}</span></a>`;

    let li = document.createElement('li');

    li.innerHTML = html;
    li.itemData = item;
    ul.appendChild(li);

    if (item.TYPE == 'folder') {
      li.classList.add('has-child');
    }

    return li;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    super._setEvent();

    // Myapp에서 단순메뉴로 사용되는 경우는 이후 이벤트 처리안함
    if(this.options.isMenu) return;

    this.addEventListener('treeExtDrop', e => {
      let objectType = e.detail.dataTransfer.getData('appspeed/object');
      let objectKey = e.detail.dataTransfer.getData('appspeed/key');

      if (objectType == 'file' && objectKey) {
        let targetId = e.detail.dropLi.itemData.ID;

        Jinja.driverApi
          .copyFile(objectKey, targetId)
          .then(() => this._folderRefresh(targetId));
      }
    });

    Jinja.event.add('studio.activeTree', 'JJFileTree.setEvent', e => {
      this.activeTreeByKey(e.detail.fileId);
    });

    Jinja.sse.addMessageRoute('301', 'JJFileTree._setEvent', message => {
      if (message.BODY) {
        let body = Jinja.global.json(message.BODY);

        if (Jinja.dom.isVisible(Jinja.el)) {
          $tosta(message.TITLE, {
            fromUserId: body.fromUserId,
            fromUserName: body.fromUserName
          });

          //           Jinja.notification.show('APPSPEED602 SSE', {
          //             body: message.TITLE,
          //             userId: body.fromUserId
          //           });
        } else {
          //           Jinja.notification.show('APPSPEED602 SSE', {
          //             body: message.TITLE,
          //             userId: body.fromUserId
          //           });
        }
      }
    });

    Jinja.sse.addMessageRoute('203', 'JJFileTree._setEvent', message => {
      if (message.BODY) {
        let body = Jinja.global.json(message.BODY);
        let html = `<h3>${message.TITLE}</h3><p>file: ${body.file}</p><p>요청자: ${body.from}</p>`;

        Jinja.confirm.update(html).then(choice => {
          if (choice === 'YES') {
            let fileId = message.PARENT_ID;
            let folderId = this._getFolderId(fileId);

            Jinja.driverApi
              .unlockResource(fileId)
              .then(() => this._folderRefresh(folderId));
          }
        })
          .catch(()=>{});

        Jinja.notification.show('STUDIO 해제 요청 접수', {
          body: html
        });

      }
    });

    Jinja.sse.addMessageRoute('202', 'JJFileTree._setEvent', message => {
      if (message.BODY) {
        let body = Jinja.global.json(message.BODY);

        this._unLock(body.ID);
      }
    });

    Jinja.sse.addMessageRoute('201', 'JJFileTree._setEvent', message => {
      if (message.BODY) {
        let body = Jinja.global.json(message.BODY);

        this._lock(body);
      }
    });
  }

  /**
   * @desc 선택된 파일아이디를 반환한다.
   * @return {String} - 파일아이디
   * @example -
   */
  _getSelectFileId() {
    return this.selectEl ? this.selectEl.getAttribute('key') : null;
  }

  /**
   * @desc 선택된 파일의 폴더아이디를 반환한다.
   * @return {String} - 폴더아이디
   * @example -
   */
  _getSelectFolderId() {

    return this.selectEl && this.selectEl.closest('li.has-child')
      ? this.selectEl.closest('li.has-child')
      .querySelector('a')
      .getAttribute('key')
    : null;
  }

  /**
   * @desc 지정한 파일아이디의 상위 폴더아이디를 반환한다.
   * @param {String} - 파일아이디
   * @return {String} - 폴더아이디
   * @example -
   */
  _getFolderId(fileId) {
    let result = '';
    let node = this._findKey(fileId);

    if (node && node.closest('li.has-child')) {
      result = node.closest('li.has-child').querySelector('a').getAttribute('key');
    }

    return result;
  }

  /**
   * @desc 지정한 엘리먼트를 선택처리한다.
   * @param {Object} - 선택한 Element
   * @example -
   */
  _select(item) {
    this._selectMark(item);

    if (['folder', 'file'].includes(item.parentElement.itemData.TYPE)) {
      this.dispatchEvent(
        new CustomEvent('folderClick', {
          detail: {
            key: item.getAttribute('key'),
            title: item.title,
            data: item.parentElement.itemData
          },
          bubbles: true
        })
      );

      return;
    }


    this.dispatchEvent(
      new CustomEvent('treeClick', {
        detail: {
          key: item.getAttribute('key'),
          title: item.title,
          data: item.parentElement.itemData
        },
        bubbles: true
      })
    );
  }

  /**
   * @desc 지정한 엘리먼트를 기준엘리먼트의 지정한 위치로 이동시킨다.
   * @param {Object} - 대상엘리먼트
   * @param {Object} - 기준엘리먼트
   * @param {String} - 이동위치
   * @param {Boolean} - 새로고침여부
   * @example -
   */
  _moveItem(fromLi, toLi, position, isSpeed) {
    if (!fromLi || !toLi) return;

    let moveFileId = fromLi.querySelector('a[key]').getAttribute('key');
    let targetId = toLi.querySelector('a[key]').getAttribute('key');

    Jinja.driverApi.moveFile(moveFileId, targetId).then(() => {
      this._folderRefresh(targetId).then(() => fromLi.remove());
    });
  }

  /**
   * @desc 지정한 파일을 잠금처리 한다.
   * @param {Object} - 잠금정보
   * @example -
   */
  _lock(lockInfo) {
    let node = this._findKey(lockInfo.ID);

    if (node) {
      let folderId = this._getFolderId(lockInfo.ID);
      
      if (!folderId && this.options.isFolder) {
        folderId = workspaceMeta.options.homeFolderId || workspaceMeta.options.appInfo.homeFolderId;
      }
      
      
      let lockEl = node.querySelector('i.lock');
      let lockIcon =
          lockInfo.lockerId == Jinja.uo.USER_ID
      ? 'fa-user-circle-o'
      : 'fa fa-lock';

      lockEl.setAttribute('class', 'lock fa ' + lockIcon);
      lockEl.setAttribute('locker', lockInfo.lockerId);
      lockEl.setAttribute('title', lockInfo.lockerName);

      this._folderRefresh(folderId);
    }
  }

  /**
   * @desc 지정한 파일을 해제처리 한다.
   * @param {String} - 파일아이디
   * @example -
   */
  _unLock(fileId) {
    let node = this._findKey(fileId);
    if (node) {
      let folderId = this._getFolderId(fileId);
      let lockEl = node.querySelector('i.lock');

      lockEl.setAttribute('class', 'lock fa');
      lockEl.removeAttribute('locker');
      lockEl.removeAttribute('title');

      this._folderRefresh(folderId);
    }
  }

  /**
   * @desc 지정된 폴더의 하위자료를 새로고침한다.
   * @param {String} - 지정한 폴더의 Id
   * @example -
   */
  _folderRefresh(folderId) {
    if (!folderId && this.options.isFolder) {
      folderId = workspaceMeta.options.homeFolderId || workspaceMeta.options.appInfo.homeFolderId;
    }
    
    return Jinja.driverApi
      .getTreeByFolderId(folderId)
      .then(treeData => this._updateJson(folderId, treeData));
  }

  /**
   * @desc 컨텍스트메뉴 생성 이벤트를 처리한다.
   * @param {Object} - 이벤트
   * @example -
   */
  _onContextmenu(event) {
    if (event.target.matches('a')) {
      event.preventDefault();

      this._selectMark(event.target);

      Jinja.context.render(this, event, [
        { command: 'newFile', label: '새 파일', icon: 'fa-file-o' },
        { command: 'newFolder', label: '새 폴더', icon: 'fa-folder' },
        { label: 'divider' },
        { command: 'copy', label: '복사', icon: 'fa-copy' },
        { command: 'cut', label: '자르기', icon: 'fa-cut' },
        { command: 'paste', label: '붙이기', icon: 'fa-paste' },
        { label: 'divider' },
        { command: 'delete', label: '삭제', icon: 'fa-remove' },
        { label: 'divider' },
        { command: 'lock', label: '잠금', icon: 'fa-lock' },
        { command: 'unLock', label: '해제', icon: 'fa-unlock' },
//        { command: 'unLockReq', label: '해제요청', icon: 'fa-paper-plane' },
        { label: 'divider' },
        { command: 'backup', label: '백업정보', icon: 'fa-bookmark' },
        { label: 'divider' },
//        { command: 'share', label: '공유', icon: 'fa-share' },
        { command: 'export', label: '내보내기', icon: 'fa-cloud-download' },
        { command: 'import', label: '가져오기', icon: 'fa-cloud-upload' },
        { label: 'divider' },
//        { command: 'rename', label: '이름변경', icon: 'fa-drivers-license-o' },
        { command: 'info', label: '속성', icon: 'fa-gear' },
        { command: 'refresh', label: '새로고침', icon: 'fa-refresh' }
      ]);
    }
  }

  /**
   * @desc 컨텍스트메뉴 클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onContextClick(event) {
    super._onContextClick(event);
    event.preventDefault();
		debugger;
    let contextMenu = event.detail.menu;

    switch (contextMenu) {
      case 'copy':
        this._onCopy(event);

        break;
      case 'cut':
        this._onCut(event);

        break;
      case 'paste':
        this._onPaste(event);

        break;
      case 'newFile':
        this.newFile(event);

        break;
      case 'newFolder':
        this.newFolder("");

        break;
      case 'delete':
        this._onDelete(event);

        break;
      case 'lock':
        this._onLock(event);

        break;
      case 'unLock':
        this._onUnLock(event);

        break;
      case 'unLockReq':
        this._onUnLockReq(event);

        break;
      case 'backup':
        this._onBackup(event);

        break;
      case 'share':
        this._onShare(event);

        break;
      case 'rename':
        this._onRename(event);

        break;
      case 'info':
        this._onInfo(event);

        break;
      case 'refresh':
        this._onRefresh(event);

        break;
      case 'export':
        this._onExport(event);

        break;
      case 'import':
        this._onImport(event);

        break;
    }
  }

  /**
   * @desc 드래그시작 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDragstart(event) {
    super._onDragstart(event);

    let key = event.target.getAttribute('key');
    let fileInfo = event.target.parentElement.itemData;

    if (key && event.dataTransfer) {
      event.dataTransfer.setData('appspeed/object', 'file');
      event.dataTransfer.setData('appspeed/key', key);
      event.dataTransfer.setData('appspeed/fileInfo', Jinja.global.string(fileInfo));
      event.dataTransfer.setData(
        'text/html',
        `<jj-include  jj-uri="${fileInfo.URI}"></jj-include>`
      );
      event.dataTransfer.setData(
        'text/json',
        `{ "uri": "${fileInfo.URI}",  "id":"${fileInfo.ID}",  "name":"${fileInfo.NAME}", "desciption":"${fileInfo.DESCRIPTION}" },\n`
      );
      event.dataTransfer.setData(
        'text/script',
        `JJForm.open("${fileInfo.URI}",{ "search":{}, "position": { "width": "50%" }, isModal: true, isMoveable: true }).then(result=>{}).catch(ex=>{})`
      );
    }
  }

  /**
   * @desc 이름변경 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onRename(event) {
    let oldFileInfo = this.selectEl.parentElement.itemData;

    Jinja.driverApi.formRenameFile(oldFileInfo).then(fileInfo => {
      Object.assign(this.selectEl.parentElement.itemData, fileInfo);

      this.selectEl.title = fileInfo.NAME;
      this.selectEl.querySelector('t').innerHTML = fileInfo.NAME;

      Jinja.event.dispatch(
        'studio.updateFileInfo',
        'studioV6Api.updateFileInfo',
        {
          detail: fileInfo
        }
      );
    });
  }

  /**
   * @desc 속성 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onInfo(event) {
    let fileInfo = this.selectEl.parentElement.itemData;

    Jinja.driverApi.formInfoFile(fileInfo).then(fileInfo => {
      this.selectEl.title = fileInfo.NAME;
      this.selectEl.querySelector('t').innerHTML = fileInfo.NAME;

      Jinja.event.dispatch(
        'studio.updateFileInfo',
        'studioV6Api.updateFileInfo',
        {
          detail: fileInfo
        }
      );
    });
  }

  /**
   * @desc 붙이기 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onPaste(event) {
    let targetId = this._getSelectFolderId();

    if (this.copyLi) {
      if (this.copyLi.contains(this.selectEl.parentElement)) {
        alert('대상 폴더가 원본 폴더의 하위 폴더입니다.');

        return;
      }

      let copyFileId = this.copyLi.querySelector('a[key]').getAttribute('key');

      Jinja.driverApi
        .copyFile(copyFileId, targetId)
        .then(() => this._folderRefresh(targetId));
    }

    if (this.cutLi) {
      if (this.cutLi.contains(this.selectEl.parentElement)) {
        alert('대상 폴더가 원본 폴더의 하위 폴더입니다.');

        return;
      }

      let moveFileId = this.cutLi.querySelector('a[key]').getAttribute('key');

      Jinja.driverApi
        .moveFile(moveFileId, targetId)
        .then(() => this._folderRefresh(targetId))
        .then(this.cutLi.remove());
    }
  }

  /**
   * @desc 삭제 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDelete(event) {
    let fileId = this._getSelectFileId();

    Jinja.confirm
      .delete('Delete OK?')
      .then(() => Jinja.driverApi.trashFile(fileId, true))
      .then(() => this.selectEl.parentElement.remove())
      .then(() =>
            this.dispatchEvent(
      new CustomEvent('fileDeleted', {
        detail: {
          fileId: fileId
        },
        bubbles: true
      })
    )
           )
      .catch(() => {});
  }

  /**
   * @desc 잠금 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onLock(event) {
    let fileId = this._getSelectFileId();
    let folderId = this._getSelectFolderId();

    return Jinja.driverApi
      .lockResource(fileId)
      .then(() => {
      let lockEl = this.selectEl.querySelector('i.lock');

      lockEl.setAttribute('class', 'lock fa fa-lock');
      lockEl.setAttribute('locker', Jinja.uo.USER_ID);
      lockEl.setAttribute('title', Jinja.uo.USER_NAME);
    })
      .then(() => this._folderRefresh(folderId));
  }

  /**
   * @desc 해제 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onUnLock(event) {
    let fileId = this._getSelectFileId();
    let folderId = this._getSelectFolderId();

    return Jinja.driverApi
      .unlockResource(fileId)
      .then(() => {
      let lockEl = this.selectEl.querySelector('i.lock');
      lockEl.setAttribute('class', 'lock fa');
      lockEl.removeAttribute('locker');
      lockEl.removeAttribute('title');
    })
      .then(() => this._folderRefresh(folderId));
  }

  /**
   * @desc 해제요청 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onUnLockReq(event) {
    let fileId = this._getSelectFileId();
    let lockEl = this.selectEl.querySelector('i.lock');

    if (lockEl) {
      let locker = lockEl.getAttribute('locker');
      let fileName = this.selectEl.querySelector('t').innerText;

      Jinja.driverApi.unlockReqPeer(fileId, locker, fileName);
    }
  }

  /**
   * @desc 지정된 파일의 backupRestore 이벤트를 발생시킨다.
   * @param {Object} - 쓰이지 않음
   * @example -
   */
  _onBackup(event) {
    let fileInfo = this.selectEl.parentElement.itemData;

    Jinja.driverApi.formBackupInfo(fileInfo).then(backupInfo => {
      this.dispatchEvent(
        new CustomEvent('backupRestore', {
          detail: {
            fileId: fileInfo.ID,
            body: backupInfo.BODY
          },
          bubbles: true
        })
      );
    });
  }

  /**
   * @desc 선택된 파일을 공유한다.
   * @param {Object} - 쓰이지 않음
   * @example -
   */
  _onShare(event) {
    let fileInfo = this.selectEl.parentElement.itemData;

    Jinja.driverApi.folderShare(fileInfo);
  }

  /**
   * @desc 새로고침 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onRefresh(event) {
    let folderId = this._getSelectFolderId();

    this._folderRefresh(folderId);
  }

  _onExport(event) {
    let fileInfo = this.selectEl.parentElement.itemData;

    Jinja.ajax.excute(`getRecursiveID.sql`, {
      "id": fileInfo.ID
    }).then(data => {

      let treeRow = Jinja.global.row2tree(
        data.rows,
        fileInfo.PARENT_ID,
        'PARENT_ID',
        'ID',
        'SORT_NAME',
        'items'
      );

      Jinja.global.exportJson(treeRow, fileInfo.NAME);

    });
  }  
  _onImport(event) {
    let fileInfo = this.selectEl.parentElement.itemData;
    let input = document.createElement("input");
    input.type = "file";
    input.hidden = true;
    document.body.appendChild(input);

    input.addEventListener('change', e=>{
      // FileList
      var fileList = input.files || event.target.files;
      // File
      var file = fileList[0];
      var reader = new FileReader();
      reader.onload = (progressEvent)=>{
        console.log(progressEvent.target.result);
        JJFormModal.openInfo("ImportFile.uc", {
          "file": fileInfo,
          "data": progressEvent.target.result
        }).then(result=>{
          this._folderRefresh(fileInfo.ID);
        });

      };
      reader.readAsText(file);
      input.remove();
    });
    input.click();
  }  

  /**
   * @desc 지정한 옵션으로 엘리먼트를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    // super.init(options);

    if (this.options.isFolder) {
      this.getTreeByFolderId(
        workspaceMeta.options.homeFolderId ||
        workspaceMeta.options.appInfo.homeFolderId
      );
    } else {
      this.getMyResource();
    }
  }

  /**
   * @desc 전체 자료를 갖고 온다.
   * @example -
   */
  getMyResource() {
    Jinja.driverApi.getMyResource().then(treeData => this.fromJson(treeData));
  }

  /**
   * @desc 지정된 폴더의 하위자료를 갖고 온다.
   * @param {String} - 폴더아이디
   * @example -
   */
  getTreeByFolderId(folderId) {
    Jinja.driverApi
      .getTreeByFolderId(folderId)
      .then(treeData => this.fromJson(treeData));
  }

  /**
   * @desc 현재 선택된 파일을 ID를 반환한다.
   * @example -
   */
  getSelectFileId() {
    return this._getSelectFileId();
  }  
  /**
   * @desc 선택된 폴더하위에 신규파일을 생성한다.
   * @example -
   */
  newFile() {
    let folderId = this._getSelectFolderId();

    if (!folderId && this.options.isFolder) {
      folderId = workspaceMeta.options.homeFolderId || workspaceMeta.options.appInfo.homeFolderId;
    }

    if (!folderId) {
      $topMessage('작업대상 폴더를 지정하세요.');
      return;
    }

    Jinja.driverApi.formNewFile(folderId).then(fileInfo => {
      this.dispatchEvent(
        new CustomEvent('treeClick', {
          detail: {
            key: fileInfo.ID,
            title: fileInfo.NAME,
            data: fileInfo
          },
          bubbles: true
        })
      );

      if (this.options.isFolder) {
        this.getTreeByFolderId(
          workspaceMeta.options.homeFolderId ||
          workspaceMeta.options.appInfo.homeFolderId
        );
      } else  {
        this._folderRefresh(folderId);
      }

    });
  }

  /**
   * @desc 선택된 폴더하위에 신규폴더를 생성한다.
   * @example -
   */
  newFolder(parentId) {
    let folderId = parentId||this._getSelectFolderId();

    if (!folderId && this.options.isFolder) {
      folderId = workspaceMeta.options.homeFolderId || workspaceMeta.options.appInfo.homeFolderId;
    }

    if (!folderId) {
      $topMessage('작업대상 폴더를 지정하세요.');

      return;
    }

    return Jinja.driverApi
      .formNewFolder(folderId)
      .then(result => {
      if (this.options.isFolder) {
        this.getTreeByFolderId(
          workspaceMeta.options.homeFolderId ||
          workspaceMeta.options.appInfo.homeFolderId
        );
      } else  {
        this._folderRefresh(folderId);
      }

    });
  }

  /**
   * @desc 선택된 폴더하위에 신규스토어파일을 생성한다.
   * @example -
   */
  newStore() {
    let folderId = this._getSelectFolderId();

    if (!folderId) {
      $topMessage('작업대상 폴더를 지정하세요.');

      return;
    }

    Jinja.driverApi.storeNewFile(folderId).then(fileInfo => {
      this._folderRefresh(folderId);
    });
  }

  /**
   * @desc 신규워크스페이스를 생성한다.
   * @example -
   */
  newWorkspace() {
    Jinja.driverApi.formNewWorkspace().then(() => {
      this.getMyResource();
    });
  }
}

customElements.define('jj-filetree', JJFileTree);
/* ==JJAttribute.640.class================ */

/**
 * @classdesc VhtmlEditor Attribute 컴포넌트관리를 위한 클래스
 */
class JJAttribute extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    let html = 
      `<table border=1>` +
      `<colgroup>` +
      `<col style="width:43px;">` +
      `<col style="width:70px;">` +
      `<col>` +
      `</colgroup>` +
      `<tbody>`;

    if (this.targetEl) {
      for (let i = 0; i < this.targetEl.attributes.length; i++) {
        if (!this.targetEl.attributes[i].name.startsWith('_')) {
          let name = this.targetEl.attributes[i].name;
          let value = this.targetEl.attributes[i].value;

          html += 
            `<tr data-name="${name}">` +
            `<th>` +
            `<button title="remove" method="remove" type="button"  class="btn btn-warning btn-sm"><i class="fa fa-remove" aria-hidden="true"></i></button>` +
            `<button title="save"   method="update" type="button"  class="btn btn-primary btn-sm"><i class="fa fa-save" aria-hidden="true"></i></button>` +
            `</th>` +
            `<th title="${name}" class="text-nowrap">${name}</th>` +
            `<td>` +
            `<div class="input-group">` +
            `<input type="text" class="form-control update-value" aria-label="..." value="${value}">` +
            `<div class="input-group-btn">` +
            `<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">...</button>` +
            `<textarea class="dropdown-menu dropdown-menu-right update-value">${value}</textarea>` +
            `</div>` +
            `</div>` +
            `</td>` +
            `</tr>`;
        }
      }
    }

    html += 
      `</tbody>` +
      `<tfoot>` +
      `<tr>` +
      `<th>` +
      `<button title="설정하고 지웁니다" method="clear" type="button" class="btn btn-success  btn-sm"><i class="fa fa-plus" aria-hidden="true"></i></button>` +
      `<button title="설정하고 유지합니다" method="add" type="button" class="btn btn-success  btn-sm"><i class="fa fa-plus-circle" aria-hidden="true"></i></button>` +
      `</th>` +
      `<th><input type="text" data-bind="name" class="form-control" aria-label="..." ></th>` +
      `<td><input type="text" data-bind="value" class="form-control add-value" aria-label="..."></td>` +
      `</tr>` +
      `</tfoot>` +
      `</table>`;

    this.$empty();
    this.innerHTML = html;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.oMutationObserver = new MutationObserver(mutations => {
      this._render();
    });

    this.addEventListener('click', e => {
      if (e.target.matches(`[method="remove"]`)) {
        let tr = e.target.closest('tr');
        let name = tr.dataset.name;

        this.targetEl.removeAttribute(name);

        tr.remove();
      }

      if (e.target.matches(`[method="update"]`)) {
        let tr = e.target.closest('tr');
        let name = tr.dataset.name;
        let value = tr.querySelector('input').value;

        this.targetEl.setAttribute(name, value);
      }

      if (e.target.matches(`[method="add"]`)) {
        let tr = e.target.closest('tr');
        let name = tr.querySelector(`input[data-bind="name"]`).value;
        let value = tr.querySelector(`input[data-bind="value"]`).value;

        this.targetEl.setAttribute(name, value);
        this._render();
      }

      if (e.target.matches(`[method="clear"]`)) {
        let tr = e.target.closest('tr');
        let name = tr.querySelector(`input[data-bind="name"]`).value;
        let value = tr.querySelector(`input[data-bind="value"]`).value;

        this.targetEl.setAttribute(name, value);
        this._render();

        tr.querySelector(`input[data-bind="name"]`).value = '';
        tr.querySelector(`input[data-bind="value"]`).value = '';
      }
    });

    this.addEventListener('keydown', e => {
      let keyMap = Jinja.global.getEventKeyMap(e);

      if (keyMap === 'Enter') {
        if (e.target.matches('.update-value')) {
          let tr = e.target.closest('tr');

          if (tr) {
            if (e.target.matches('textarea')) {
              let val = e.target.value;

              tr.querySelector(`input.update-value`).value = val;
            }

            tr.querySelector(`.btn[method="update"]`).click();
          }
        }

        if (e.target.matches('.add-value')) {
          e.target.closest('tr').querySelector(`.btn[method="add"]`).click();
        }
      }
    });

    this.targetEl = null;
  }

  /**
   * @desc 지정한 노드 엘리먼트를 활성화한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Boolean} - 새로고침여부
   * @example -
   */
  activeNode(el, isRefresh) {
    this.targetEl = null;
    this.oMutationObserver.disconnect();
    this._render();

    if (el) {
      this.targetEl = el;
      this.oMutationObserver.observe(this.targetEl, {
        attributes: true,
        childList: true,
        characterData: true
      });

      if (isRefresh) {
        this._render();
      }
    }
  }
}

customElements.define('jj-attribute', JJAttribute);
/* ==JJElToolbar.640.class================ */

/**
 * @classdesc VhtmlEditor Toolbar 컴포넌트관리를 위한 클래스
 */
class JJElToolbar extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    let html = 
      `<div>` +
      `<div class="btn-group">` +
      `<button class="btn btn-dark btn-sm" method="new" title="새 문서"><i class="fa fa-file"></i></button>` +
      `<button class="btn btn-dark btn-sm" method="allClear" title="빈 문서반들기"><i class="fa fa-file-o"></i></button>` +
      `<button class="btn btn-dark btn-sm" method="empty" title="선택박스 내용지우기"><i class="fa fa-eraser"></i></button>` +
      `<button class="btn btn-dark btn-sm" method="clone" title="옆에 복사추가"><i class="fa fa-clone"></i></button>` +
      `<button class="btn btn-dark btn-sm" method="remove" title="삭제"><i class="fa fa-remove"></i></button>` +
      `</div>` +
      `<div class="btn-group">` +
      `<button class="btn btn-dark btn-sm" method="undo" title="실행취소"><i class="fa fa-reply"></i></button>` +
      `<button class="btn btn-dark btn-sm" method="redo" title="다시실행"><i class="fa fa-share"></i></button>` +
      `</div>` +
      `<div class="btn-group">` +
      `<button class="btn btn-dark btn-sm" method="group" title="그룹"><i class="fa fa-object-group"></i></button>` +
      `<button class="btn btn-dark btn-sm" method="ungroup" title="그룹해제"><i class="fa fa-object-ungroup"></i></button>` +
      `</div>` +
      `<div class="btn-group dropdown">` +
      `<button type="button" class="btn btn-dark btn-sm dropdown-toggle waves-effect waves-light"` +
      `data-toggle="dropdown" aria-expanded="false">크기<i class="mdi mdi-chevron-down"></i></button>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item h1" method="setFontSize" data-set-class="h1" href="#">h1.크기</a>` +
      `<a class="dropdown-item h2" method="setFontSize" data-set-class="h2" href="#">h2.크기</a>` +
      `<a class="dropdown-item h3" method="setFontSize" data-set-class="h3" href="#">h3.크기</a>` +
      `<a class="dropdown-item h4" method="setFontSize" data-set-class="h4" href="#">h4.크기</a>` +
      `<a class="dropdown-item h5" method="setFontSize" data-set-class="h5" href="#">h5.크기</a>` +
      `<a class="dropdown-item h6" method="setFontSize" data-set-class="h6" href="#">h6.크기</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item" method="setFontSize" data-set-class="display-1" href="#">6rem</a>` +
      `<a class="dropdown-item" method="setFontSize" data-set-class="display-2" href="#">5.5rem</a>` +
      `<a class="dropdown-item" method="setFontSize" data-set-class="display-3" href="#">4.5rem</a>` +
      `<a class="dropdown-item" method="setFontSize" data-set-class="display-4" href="#">3.5rem</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item" method="setFontSize" data-set-class="small" href="#">small</a>` +
      `<a class="dropdown-item" method="setFontSize" data-set-class="" href="#">normal</a>` +
      `</div>` +
      `</div>` +
      `<div class="btn-group" role="group" aria-label="Basic example" draggable=true>` +
      `<div class="btn-group dropdown">` +
      `<button type="button" class="btn btn-dark btn-sm dropdown-toggle waves-effect waves-light"` +
      `data-toggle="dropdown" aria-expanded="false">문자<i class="mdi mdi-chevron-down"></i></button>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item text-custom" method="textColor" data-set-class="text-custom" href="#">custom</a>` +
      `<a class="dropdown-item text-pink" method="textColor" data-set-class="text-pink" href="#">pink</a>` +
      `<a class="dropdown-item text-muted" method="textColor" data-set-class="text-muted" href="#">muted</a>` +
      `<a class="dropdown-item text-primary" method="textColor" data-set-class="text-primary" href="#">primary</a>` +
      `<a class="dropdown-item text-secondary" method="textColor" data-set-class="text-secondary" href="#">secondary</a>` +
      `<a class="dropdown-item text-success" method="textColor" data-set-class="text-success" href="#">success</a>` +
      `<a class="dropdown-item text-danger" method="textColor" data-set-class="text-danger" href="#">danger</a>` +
      `<a class="dropdown-item text-warning" method="textColor" data-set-class="text-warning" href="#">warning</a>` +
      `<a class="dropdown-item text-info" method="textColor" data-set-class="text-info" href="#">info</a>` +
      `<a class="dropdown-item text-dark" method="textColor" data-set-class="text-dark" href="#">dark</a>` +
      `<a class="dropdown-item text-purple" method="textColor" data-set-class="text-purple" href="#">purple</a>` +
      `<a class="dropdown-item text-pink" method="textColor" data-set-class="text-pink" href="#">pink</a>` +
      `<a class="dropdown-item text-muted" method="textColor" data-set-class="text-black" href="#">muted</a>` +
      `<a class="dropdown-item text-light bg-secondary" method="textColor" data-set-class="text-light" href="#">light</a>` +
      `<a class="dropdown-item text-white bg-secondary" method="textColor" data-set-class="text-white" href="#">white</a>` +
      `</div>` +
      `</div>` +
      `<div class="btn-group dropdown">` +
      `<button type="button" class="btn btn-dark btn-sm dropdown-toggle waves-effect waves-light"` +
      `data-toggle="dropdown" aria-expanded="false">배경<i class="mdi mdi-chevron-down"></i></button>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item bg-primary text-white" method="backColor" data-set-class="bg-primary" href="#">primary</a>` +
      `<a class="dropdown-item bg-secondary text-white" method="backColor" data-set-class="bg-secondary" href="#">secondary</a>` +
      `<a class="dropdown-item bg-success text-white" method="backColor" data-set-class="bg-success" href="#">success</a>` +
      `<a class="dropdown-item bg-danger text-white" method="backColor" data-set-class="bg-danger" href="#">danger</a>` +
      `<a class="dropdown-item bg-warning text-dark" method="backColor" data-set-class="bg-warning" href="#">warning</a>` +
      `<a class="dropdown-item bg-info text-white" method="backColor" data-set-class="bg-info" href="#">info</a>` +
      `<a class="dropdown-item bg-light text-dark" method="backColor" data-set-class="bg-light" href="#">light</a>` +
      `<a class="dropdown-item bg-dark text-white" method="backColor" data-set-class="bg-dark" href="#">dark</a>` +
      `<a class="dropdown-item bg-white text-dark" method="backColor" data-set-class="bg-white" href="#">white</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item bg-rgba3 text-dark" method="backColor" data-set-class="bg-rgba3" href="#">투명도3</a>` +
      `<a class="dropdown-item bg-rgba2 text-dark" method="backColor" data-set-class="bg-rgba2" href="#">투명도2</a>` +
      `<a class="dropdown-item bg-rgba1 text-dark" method="backColor" data-set-class="bg-rgba1" href="#">투명도1</a>` +
      `<a class="dropdown-item bg-transparent text-dark" method="backColor" data-set-class="bg-transparent" href="#">투명</a>` +
      `<div class="dropdown-divider"></div>` +
      `<div class="btn-group dropright w-100">` +
      `<a class="dropdown-item dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">` +
      `그림자 <i class="mdi mdi-chevron-down pull-right"></i></a>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item" href="#" method="setBoxShadow" data-set-class="shadow-none">No shadow</a>` +
      `<a class="dropdown-item" href="#" method="setBoxShadow" data-set-class="shadow-sm">Small shadow</a>` +
      `<a class="dropdown-item" href="#" method="setBoxShadow" data-set-class="shadow">Regular shadow</a>` +
      `<a class="dropdown-item" href="#" method="setBoxShadow" data-set-class="shadow-lg">Larger shadow</a>` +
      `<a class="dropdown-item" href="#" method="setBoxShadow" data-set-class="">initial</a>` +
      `</div>` +
      `</div>` +
      `</div>` +
      `</div>` +
      `</div>` +
      `<div class="btn-group dropdown">` +
      `<button type="button" class="btn btn-dark btn-sm dropdown-toggle waves-effect waves-light"` +
      `data-toggle="dropdown" aria-expanded="false">모양<i class="mdi mdi-chevron-down"></i></button>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item font-weight-bold" method="setFontWeight" data-set-class="font-weight-bold" href="#">굵은 텍스트</a>` +
      `<a class="dropdown-item font-weight-normal" method="setFontWeight" data-set-class="font-weight-normal" href="#">보통 텍스트</a>` +
      `<a class="dropdown-item font-weight-light" method="setFontWeight" data-set-class="font-weight-light" href="#">가벼운 텍스트</a>` +
      `<a class="dropdown-item font-italic" method="setFontWeight" data-set-class="font-italic" href="#">기울임</a>` +
      `<a class="dropdown-item font-italic" method="setFontWeight" data-set-class="" href="#">initial</a>` +
      `<div class="dropdown-divider"></div>` +
      `<div class="btn-group dropright w-100">` +
      `<a class="dropdown-item dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">` +
      `대소문자 <i class="mdi mdi-chevron-down pull-right"></i></a>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item text-lowercase" href="#" method="setTextTransform" data-set-class="text-lowercase">Lowercased text.</a>` +
      `<a class="dropdown-item text-uppercase" href="#" method="setTextTransform" data-set-class="text-uppercase">Uppercased text.</a>` +
      `<a class="dropdown-item text-capitalize" href="#" method="setTextTransform" data-set-class="text-capitalize">CapiTaliZed text.</a>` +
      `<a class="dropdown-item text-capitalize" href="#" method="setTextTransform" data-set-class="">initial</a>` +
      `</div>` +
      `</div>` +
      `</div>` +
      `</div>` +
      `<div class="btn-group dropdown">` +
      `<button type="button" class="btn btn-dark btn-sm dropdown-toggle waves-effect waves-light"` +
      `data-toggle="dropdown" aria-expanded="false">테두리<i class="mdi mdi-chevron-down"></i></button>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item" href="#" method="setBorder" data-set-class="border">` +
      `<span class="border border-dark" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span>전체</a>` +
      `<a class="dropdown-item" href="#" method="setBorder" data-set-class="border-top">` +
      `<span class="border-top border-dark" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span>위</a>` +
      `<a class="dropdown-item" href="#" method="setBorder" data-set-class="border-right">` +
      `<span class="border-right border-dark" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span>오른쪽</a>` +
      `<a class="dropdown-item" href="#" method="setBorder" data-set-class="border-bottom">` +
      `<span class="border-bottom border-dark" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span>아래</a>` +
      `<a class="dropdown-item" href="#" method="setBorder" data-set-class="border-left">` +
      `<span class="border-left border-dark" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span>왼쪽</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item" href="#" method="setBorder" data-border="">` +
      `<span class="" style="width:20px;height:20px;border:1px dotted gray;display: inline-block;">&nbsp&nbsp&nbsp</span>지우기</a>` +
      `<div class="dropdown-divider"></div>` +
      `<div class="btn-group dropright w-100">` +
      `<a class="dropdown-item dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">` +
      `Color <i class="mdi mdi-chevron-down pull-right"></i></a>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item bg-primary text-white" href="#" method="setBorderColor" data-set-class="border-primary">primary</a>` +
      `<a class="dropdown-item bg-secondary text-white" href="#" method="setBorderColor" data-set-class="border-secondary">secondary</a>` +
      `<a class="dropdown-item bg-success text-white" href="#" method="setBorderColor" data-set-class="border-success">success</a>` +
      `<a class="dropdown-item bg-danger text-white" href="#" method="setBorderColor" data-set-class="border-danger">danger</a>` +
      `<a class="dropdown-item bg-warning text-dark" href="#" method="setBorderColor" data-set-class="border-warning">warning</a>` +
      `<a class="dropdown-item bg-info text-white" href="#" method="setBorderColor" data-set-class="border-info">info</a>` +
      `<a class="dropdown-item bg-light text-dark" href="#" method="setBorderColor" data-set-class="border-light">light</a>` +
      `<a class="dropdown-item bg-dark text-white" href="#" method="setBorderColor" data-set-class="border-dark">dark</a>` +
      `<a class="dropdown-item bg-white text-dark" href="#" method="setBorderColor" data-set-class="border-white">white</a>` +
      `</div>` +
      `</div>` +
      `<div class="btn-group dropright w-100">` +
      `<a class="dropdown-item dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">` +
      `Round <i class="mdi mdi-chevron-down pull-right"></i></a>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item" href="#" method="setBorderRadius" data-set-class="rounded">` +
      `<span class="bg-secondary border border-dark rounded" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span> rounded</a>` +
      `<a class="dropdown-item" href="#" method="setBorderRadius" data-set-class="rounded-top">` +
      `<span class="bg-secondary border border-dark rounded-top" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span> rounded-top</a>` +
      `<a class="dropdown-item" href="#" method="setBorderRadius" data-set-class="rounded-right">` +
      `<span class="bg-secondary border border-dark rounded-right" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span> rounded-right</a>` +
      `<a class="dropdown-item" href="#" method="setBorderRadius" data-set-class="rounded-bottom">` +
      `<span class="bg-secondary border border-dark rounded-bottom" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span> rounded-bottom</a>` +
      `<a class="dropdown-item" href="#" method="setBorderRadius" data-set-class="rounded-left">` +
      `<span class="bg-secondary border border-dark rounded-left" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span> rounded-left</a>` +
      `<a class="dropdown-item" href="#" method="setBorderRadius" data-set-class="rounded-circle">` +
      `<span class="bg-secondary border border-dark rounded-circle" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span> rounded-circle</a>` +
      `<a class="dropdown-item" href="#" method="setBorderRadius" data-set-class="rounded-pill">` +
      `<span class="bg-secondary border border-dark rounded-pill" style="width:40px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span> rounded-pill</a>` +
      `<a class="dropdown-item" href="#" method="setBorderRadius" data-set-class="rounded-0">` +
      `<span class="bg-secondary border border-dark rounded-0" style="width:20px;height:20px;border:1px dotted white;display: inline-block;">&nbsp&nbsp&nbsp</span> rounded-0</a>` +
      `</div>` +
      `</div>` +
      `</div>` +
      `</div>` +
      `<div class="btn-group dropdown">` +
      `<button type="button" class="btn btn-dark btn-sm dropdown-toggle waves-effect waves-light"` +
      `data-toggle="dropdown" aria-expanded="false">여백<i class="mdi mdi-chevron-down"></i></button>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item" method="setPadding" data-set-class="p-5" href="#">p-5 (여백)</a>` +
      `<a class="dropdown-item" method="setPadding" data-set-class="p-4" href="#">p-4 (여백)</a>` +
      `<a class="dropdown-item" method="setPadding" data-set-class="p-3" href="#">p-3 (여백)</a>` +
      `<a class="dropdown-item" method="setPadding" data-set-class="p-2" href="#">p-2 (여백)</a>` +
      `<a class="dropdown-item" method="setPadding" data-set-class="p-1" href="#">p-1 (여백)</a>` +
      `<a class="dropdown-item" method="setPadding" data-set-class="p-0" href="#">p-0 (여백)</a>` +
      `<a class="dropdown-item" method="setPadding" data-set-class="" href="#">미설정</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item" method="setMargineTop" data-set-class="mt-3" href="#">mt-3(윗마진)</a>` +
      `<a class="dropdown-item" method="setMargineTop" data-set-class="mt-2" href="#">mt-2(윗마진)</a>` +
      `<a class="dropdown-item" method="setMargineTop" data-set-class="mt-1" href="#">mt-1(윗마진)</a>` +
      `<a class="dropdown-item" method="setMargineTop" data-set-class="mt-0" href="#">mt-0(윗마진)</a>` +
      `<a class="dropdown-item" method="setMargineTop" data-set-class="" href="#">미설정</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item" method="setMargineBottom" data-set-class="mb-3" href="#">mb-3(아래마진)</a>` +
      `<a class="dropdown-item" method="setMargineBottom" data-set-class="mb-2" href="#">mb-2(아래마진)</a>` +
      `<a class="dropdown-item" method="setMargineBottom" data-set-class="mb-1" href="#">mb-1(아래마진)</a>` +
      `<a class="dropdown-item" method="setMargineBottom" data-set-class="mb-0" href="#">mb-0(아래마진)</a>` +
      `<a class="dropdown-item" method="setMargineBottom" data-set-class="" href="#">미설정</a>` +
      `</div>` +
      `</div>` +
      `<div class="btn-group">` +
      `<button class="btn btn-dark btn-sm" method="link" title="링크연결"><i class="fa fa-link" aria-hidden="true"></i></button>` +
      `<button class="btn btn-dark btn-sm" method="unlink" title="링크해제"><i class="fa fa-unlink" aria-hidden="true"></i></button>` +
      `</div>` +
      `<div class="btn-group dropdown">` +
      `<button type="button" class="btn btn-dark btn-sm dropdown-toggle waves-effect waves-light"` +
      `data-toggle="dropdown" aria-expanded="false">이동<i class="mdi mdi-chevron-down"></i></button>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item" method="movePrev" href="#">위로 이동</a>` +
      `<a class="dropdown-item" method="movePrevInner"  href="#">레벨 업</a>` +
      `<a class="dropdown-item" method="moveNextInner" href="#">레벨 다운</a>` +
      `<a class="dropdown-item" method="moveNext"  href="#">아래로 이동</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item" method="warp"  href="#"><i class="fa fa-object-group"></i>상위추가</a>` +
      `<a class="dropdown-item" method="unwarp" href="#"><i class="fa fa-object-ungroup"></i>상위삭제</a>` +
      `</div>` +
      `</div>` +
      `<div class="btn-group dropdown">` +
      `<button type="button" class="btn btn-dark btn-sm dropdown-toggle waves-effect waves-light"` +
      `data-toggle="dropdown" aria-expanded="false">정렬<i class="mdi mdi-chevron-down"></i></button>` +
      `<div class="dropdown-menu">` +
      `<a class="dropdown-item" method="changeClass" data-set-class="text-left" data-remove-class="text-left,text-center,text-right" href="#"><i class="fa fa-align-left"></i> 왼쪽정렬</a>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="text-center" data-remove-class="text-left,text-center,text-right" href="#"><i class="fa fa-align-center"></i> 가운데정렬</a>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="text-right" data-remove-class="text-left,text-center,text-right" href="#"><i class="fa fa-align-right"></i> 오른쪽정렬</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="align-top"  data-remove-class="align-top,align-middle,align-bottom" href="#">상단</a>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="align-middle" data-remove-class="align-top,align-middle,align-bottom"  href="#">중간</a>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="align-bottom" data-remove-class="align-top,align-middle,align-bottom"  href="#">하단</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="float-left"  data-remove-class="float-left,float-right,float-none" href="#"><i class="fa fa-toggle-left"></i>왼쪽위치 고정</a>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="float-right" data-remove-class="float-left,float-right,float-none"  href="#"><i class="fa fa-toggle-right"></i>오른쪽위치고정</a>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="float-none" data-remove-class="float-left,float-right,float-none"  href="#"><i class="fa fa-stop-circle-o"></i>고정취소</a>` +
      `<div class="dropdown-divider"></div>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="text-wrap"  data-remove-class="text-wrap,text-nowrap,text-truncate" href="#">줄 바꿈</a>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="text-nowrap" data-remove-class="text-wrap,text-nowrap,text-truncate"  href="#">줄 바꿈 취소</a>` +
      `<a class="dropdown-item" method="changeClass" data-set-class="text-truncate" data-remove-class="text-wrap,text-nowrap,text-truncate"  href="#">줄임표 자르기</a>` +
      `</div>` +
      `</div>` +
      `</div>` +
      `<div class="item-option-box"></div>`;

    this.innerHTML = html;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.oMutationObserver = new MutationObserver(mutations => {
      this._setStyle();
    });

    this.addEventListener('click', e => {
      if (e.target.matches(`[method], [method] *`)) {
        let method = e.target.closest(`[method]`).getAttribute('method');

        switch (method) {
          case 'empty':
            this.selectEl.$empty();

            break;
          case 'clone':
            this.targetVhtml._clone(e);

            break;
          case 'remove':
            this.targetVhtml._remove(e);

            break;
          case 'undo':
            this.targetVhtml._undo(e);

            break;
          case 'redo':
            this.targetVhtml._redo(e);

            break;
          case 'new':
            this._new(e);

            break;
        }
      }
    });
  }

  /**
   * @desc 스타일을 설정한다.
   * @example -
   */
  _setStyle() {}

  /**
   * @desc 신규 팝업을 호출한다.
   * @example -
   */
  _new() {
    JJFormModal.open('getVhtmlTemp.640.uc')
      .then(file => Jinja.driverApi.readFile(file.ID))
      .then(fileInfo => Jinja.global.json(fileInfo.BODY))
      .then(body => {
        this.targetVhtml.setFileBody(body);
      })
      .catch(e => {});
  }

  /**
   * @desc 지정한 에디터를 에디터로 설정한다.
   * @param {Object} - 에디터
   * @return {} -
   * @example -
   */
  setEdit(freamEdit) {
    this.targetVhtml = freamEdit;
  }

  /**
   * @desc 지정한 노드 엘리먼트를 활성화한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  activeNode(el) {
    this.selectEl = null;
    this.oMutationObserver.disconnect();

    if (el) {
      this.selectEl = el;
      this.oMutationObserver.observe(this.selectEl, {
        attributes: true,
        childList: true,
        characterData: true
      });
    } else {
      this._setStyle();
    }
  }
}

customElements.define('jj-el-toolbar', JJElToolbar);
/* ==JJFrameEditor.640.class================ */

/**
 * @classdesc VhtmlEditor Frame 컴포넌트관리를 위한 클래스
 */
class JJFrameEditor extends JJFrameViewer {
  /**
   * @desc SITE 엘리먼트를 생성한다.
   * @param {String} - 호스트명
   * @example -
   */
  _siteRender(host) {
    host = host || location.origin;

    let doc = this.frame.contentWindow.document;

    doc.open();

    let Html = 
      `<html lang="ko">` +
      `<head>` +
      `<meta charset="utf-8">` +
      `<meta http-equiv="X-UA-Compatible" content="IE=edge">` +
      `<meta name="viewport" content="width=device-width, initial-scale=1.0">` +
      `<link type="text/css" rel="stylesheet" href="${host}/extCss">` +
      `<link type="text/css" rel="stylesheet" href="${host}/appCss">` +
      `</head>` +
      `<body>` +
      `<jj-application class="jj" testable="true">` +
      `<jj-vhtml-editor></jj-vhtml-editor>` +
      `<script src="${host}/extScript"></script>` +
      `<script src="${host}/appScript"></script>` +
      `</jj-application>` +
      `</body>` +
      `</html>`;

    doc.write(Html);
    doc.close();

    this.codeSync.hidden = true;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    super._setEvent();

    this.frame.contentWindow.document.addEventListener('loadEditor', e => {
      this.vhtmlEditor = this.frame.contentWindow.document.querySelector(
        'jj-vhtml-editor'
      );
      this.requireResolv();
      this.dispatchEvent(
        new CustomEvent('loadEditor', {
          detail: {
            editor: e.target
          },
          bubbles: true
        })
      );
    });

    this.frame.contentWindow.document.addEventListener('selected', e => {
      this.dispatchEvent(
        new CustomEvent('selected', {
          detail: {
            editor: e.target
          },
          bubbles: true
        })
      );
    });

    this.frame.contentWindow.document.addEventListener('unselected', e => {
      this.dispatchEvent(
        new CustomEvent('unselected', {
          detail: {
            editor: e.target
          },
          bubbles: true
        })
      );
    });

    this.frame.contentWindow.document.addEventListener('undo', e => {
      this.dispatchEvent(
        new CustomEvent('undo', {
          detail: {
            editor: e.target
          },
          bubbles: true
        })
      );
    });

    this.frame.contentWindow.document.addEventListener('redo', e => {
      this.dispatchEvent(
        new CustomEvent('redo', {
          detail: {
            editor: e.target
          },
          bubbles: true
        })
      );
    });

    this.frame.contentWindow.document.addEventListener('open', e => {
      this.dispatchEvent(
        new CustomEvent('open', {
          detail: {
            editor: e.target
          },
          bubbles: true
        })
      );
    });
  }

  /**
   * @desc 생성 이벤트 후철리를 실행한다.
   * @example -
   */
  _onCreate() {
    this.requirePromise = new Promise((resolv, reject) => {
      this.requireResolv = resolv;
    });
  }

  /**
   * @memberof JJFrameEditor
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.vhtmlEditor.value;
  }

  /**
   * @memberof JJFrameEditor
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(html) {
    this.requirePromise.then(() => {
      this.vhtmlEditor.value = html;
    });
  }

  /**
   * @desc 지정한 노드 엘리먼트를 활성화한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  activeNode(el) {
    this.vhtmlEditor.activeNode(el);
  }

  /**
   * @desc 선택된 노드를 삭제한다.
   * @example -
   */
  selectNodeRemove() {
    this.vhtmlEditor.selectNodeRemove();
  }

  /**
   * @desc 에디터에 파일정보를 설정한다.
   * @param {Object} - 파일정보
   * @example -
   */
  setFileBody(body) {
    this.requirePromise.then(() => {
      this.vhtmlEditor.setFileBody(body);
      this.dispatchEvent(
        new CustomEvent('open', {
          detail: {
            editor: this.vhtmlEditor
          },
          bubbles: true
        })
      );
    });
  }

  /**
   * @desc 지정한 LESS정보를 에디터에 설정한다.
   * @param {String} - LESS정보
   * @example -
   */
  setBodyStyle(lessCss) {
    this.vhtmlEditor.setBodyStyle(lessCss);
  }

  /**
   * @desc 편집모드로 전환한다.
   * @example -
   */
  editeMode() {
    this.vhtmlEditor.editeMode();
  }

  /**
   * @desc 지정한 파일정보를 뷰어화면 반영한다.
   * @param {Object} - 파일정보
   * @example -
   */
  excute(body) {
    this.vhtmlEditor.excute(body);
  }
}

customElements.define('jj-frame-editor', JJFrameEditor);
/* ==JJStyle.640.class================ */

/**
 * classdesc VhtmlEditor Style 컴포넌트관리를 위한 클래스
 */
class JJStyle extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    const sizeunit = ['px', '%', 'pt', 'em'];

    return {
      styleJson: {
        padding: {
          title: '여백',
          type: 'number',
          prefix: sizeunit,
          child: {
            paddingTop: { title: '여백', type: 'number', prefix: sizeunit },
            paddingRight: { title: '여백', type: 'number', prefix: sizeunit },
            paddingBottom: { title: '여백', type: 'number', prefix: sizeunit },
            paddingLeft: { title: '여백', type: 'number', prefix: sizeunit }
          }
        },
        margin: {
          title: '여백',
          type: 'number',
          prefix: sizeunit,
          child: {
            marginTop: { title: '여백', type: 'number', prefix: sizeunit },
            marginRight: { title: '여백', type: 'number', prefix: sizeunit },
            marginBottom: { title: '여백', type: 'number', prefix: sizeunit },
            marginLeft: { title: '여백', type: 'number', prefix: sizeunit }
          }
        },
        width: {
          title: '여백',
          type: 'number',
          prefix: sizeunit,
          child: {
            minWidth: { title: '여백', type: 'number', prefix: sizeunit },
            maxWidth: { title: '여백', type: 'number', prefix: sizeunit }
          }
        },
        height: {
          title: '여백',
          type: 'number',
          prefix: sizeunit,
          child: {
            minHeight: { title: '여백', type: 'number', prefix: sizeunit },
            maxHeight: { title: '여백', type: 'number', prefix: sizeunit },
            lineHeight: { title: '여백', type: 'number', prefix: sizeunit }
          }
        },
        text: {
          title: '글자색',
          type: 'group',
          child: {
            color: {
              title: '글자색',
              type: 'jcolor'
            },
            textDecoration: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-textDecoration'
            },
            textShadow: {
              title: '효과',
              type: 'text',
              datalist: 'jstyle-textShadow'
            },
            textTransform: {
              title: '효과',
              type: 'text',
              datalist: 'jstyle-textTransform'
            },
            fontSize: {
              title: '폰트크기',
              type: 'number',
              prefix: sizeunit
            },
            fontFamily: {
              title: '폰트종류',
              type: 'text'
            }
          }
        },
        border: {
          title: 'border',
          type: 'group',
          child: {
            border: {
              title: '외곽선',
              type: 'text',
              child: {
                borderTopWidth: {
                  title: '여백',
                  type: 'number',
                  prefix: sizeunit
                },
                borderRightWidth: {
                  title: '여백',
                  type: 'number',
                  prefix: sizeunit
                },
                borderBottomWidth: {
                  title: '여백',
                  type: 'number',
                  prefix: sizeunit
                },
                borderLeftWidth: {
                  title: '여백',
                  type: 'number',
                  prefix: sizeunit
                },
                borderCollapse: {
                  title: '여백',
                  type: 'text',
                  datalist: 'jstyle-borderCollapse'
                }
              }
            },
            borderStyle: {
              title: '외곽선',
              type: 'text',
              datalist: 'jstyle-borderStyle'
            },
            borderColor: {
              title: '배경색',
              type: 'jcolor'
            },
            borderRadius: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-borderRadius'
            },
            borderImage: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-borderImage'
            }
          }
        },
        position: {
          title: 'border',
          type: 'group',
          child: {
            position: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-position',
              child: {
                top: { title: '여백', type: 'number', prefix: sizeunit },
                right: { title: '여백', type: 'number', prefix: sizeunit },
                bottom: { title: '여백', type: 'number', prefix: sizeunit },
                left: { title: '여백', type: 'number', prefix: sizeunit }
              }
            },
            display: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-display'
            },
            overflow: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-overflow',
              child: {
                overflowX: {
                  title: '여백',
                  type: 'text',
                  datalist: 'jstyle-overflow'
                },
                overflowY: {
                  title: '여백',
                  type: 'text',
                  datalist: 'jstyle-overflow'
                }
              }
            },
            float: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-float'
            },
            flex: {
              title: '여백',
              type: 'group',
              child: {
                flex: { title: '여백', number: 'text', datalist: 'flex' },
                flexDirection: {
                  title: '여백',
                  number: 'text',
                  datalist: 'flex-direction'
                },
                flexWrap: {
                  title: '여백',
                  type: 'text',
                  datalist: 'flex-wrap'
                },
                flexGrow: { title: '여백', type: 'text' },
                flexShrink: { title: '여백', type: 'text' },
                flexFlow: { title: '여백', type: 'text' },
                flexBasis: { title: '여백', type: 'text' },
                order: { title: '여백', type: 'number' },
              }
            },
            whiteSpace: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-whiteSpace'
            },
            textAlign: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-textAlign'
            },
            verticalAlign: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-verticalAlign'
            }
          }
        },
        background: {
          title: '여백',
          type: 'group',
          child: {
            backgroundColor: {
              title: '배경색',
              type: 'jcolor'
            },
            backgroundImage: {
              title: '여백',
              type: 'url',
              child: {
                backgroundRepeat: {
                  title: '여백',
                  type: 'text',
                  datalist: 'jstyle-backgroundRepeat'
                },
                backgroundSize: {
                  title: '여백',
                  type: 'text',
                  datalist: 'jstyle-backgroundSize'
                },
                backgroundPosition: {
                  title: '여백',
                  type: 'text',
                  datalist: 'jstyle-backgroundPosition'
                },
                backgroundAttachment: {
                  title: '여백',
                  type: 'text',
                  datalist: 'jstyle-backgroundAttachment'
                },
                backgroundClip: {
                  title: '여백',
                  type: 'text',
                  datalist: 'jstyle-backgroundClip'
                }
              }
            }
          }
        },
        show: {
          title: '여백',
          type: 'group',
          child: {
            visibility: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-visibility'
            },
            userSelect: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-userSelect'
            },
            pointerEvents: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-pointerEvents'
            },
            resize: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-resize'
            },
            boxShadow: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-boxShadow'
            },
            listStyle: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-listStyle'
            },
            transform: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-transform'
            },
            filter: {
              title: '여백',
              type: 'text',
              datalist: 'jstyle-filter'
            },
            opacity: {
              title: '여백',
              type: 'number',
              min: 0,
              max: 1,
              step: 0.1
            },
            zIndex: {
              title: '여백',
              type: 'number'
            }
          }
        }
      },
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    let html = 
      `<input type="search" method="findtext" class="form-control m-b-5" placeholder="find...">` +
      `<ul method="styleTree" style="font-size: 10pt"></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ` +
      `<datalist id="jstyle-borderStyle">` +
      `<option value="none">` +
      `<option value="solid">` +
      `<option value="dashed">` +
      `</datalist>` +
      `<datalist id="jstyle-borderRadius">` +
      `<option value="5px">` +
      `<option value="15px 50px 30px 5px">` +
      `<option value="2em 1em 4em / 0.5em 3em;">` +
      `</datalist>` +
      `<datalist id="jstyle-borderCollapse">` +
      `<option value="separate">` +
      `<option value="collapse">` +
      `<option value="inherit">` +
      `<option value="initial">` +
      `</datalist>` +
      `<datalist id="jstyle-borderImage">` +
      `<option value="url(/repository/systemImages/icons/border.png) 30 round">` +
      `<option value="url(/repository/systemImages/icons/border.png) 50 round">` +
      `<option value="url(/repository/systemImages/icons/border.png) 20% round">` +
      `<option value="url(/repository/systemImages/icons/border.png) 30% round">` +
      `<option value="url(/repository/systemImages/icons/border.png) 30 stretch">` +
      `<option value="url(/repository/systemImages/icons/border.png) 20% stretch">` +
      `<option value="url(/repository/systemImages/icons/border.png) 30% stretch">` +
      `<option value="url(/repository/systemImages/icons/border.png) 40% stretch">` +
      `<option value="inherit">` +
      `<option value="initial">` +
      `</datalist>` +
      `<datalist id="jstyle-position">` +
      `<option value="relative">` +
      `<option value="absolute">` +
      `<option value="fixed">` +
      `</datalist>` +
      `<datalist id="jstyle-transform">` +
      `<option value="rotate(20deg)">` +
      `<option value="skewY(20deg)">` +
      `<option value="scaleY(1.5)">` +
      `</datalist>` +
      `<datalist id="jstyle-display">` +
      `<option value="none">` +
      `<option value="block">` +
      `<option value="inline-block">` +
      `<option value="inline-flex">` +
      `<option value="flex">` +
      `<option value="table">` +
      `<option value="table-cell">` +
      `</datalist>` +
      `<datalist id="jstyle-overflow">` +
      `<option value="none">` +
      `<option value="auto">` +
      `<option value="hidden">` +
      `<option value="visible">` +
      `<option value="scroll">` +
      `</datalist>` +
      `<datalist id="jstyle-float">` +
      `<option value="none">` +
      `<option value="left">` +
      `<option value="right">` +
      `</datalist>` +
      `<datalist id="jstyle-textAlign">` +
      `<option value="none">` +
      `<option value="left">` +
      `<option value="right">` +
      `<option value="center">` +
      `</datalist>` +
      `<datalist id="jstyle-verticalAlign">` +
      `<option value="top">` +
      `<option value="middle">` +
      `<option value="bottom">` +
      `<option value="baseline">` +
      `</datalist>` +
      `<datalist id="jstyle-backgroundRepeat">` +
      `<option value="repeat">` +
      `<option value="repeat-y">` +
      `<option value="repeat-y">` +
      `<option value="no-repeat">` +
      `<option value="space">` +
      `<option value="round">` +
      `</datalist>` +
      `<datalist id="jstyle-backgroundSize">` +
      `<option value="auto">` +
      `<option value="300px 100px">` +
      `<option value="100% 100%">` +
      `<option value="cover">` +
      `<option value="contain">` +
      `<option value="contain, cover">` +
      `<option value="inherit">` +
      `<option value="initial">` +
      `</datalist>` +
      `<datalist id="jstyle-backgroundPosition">` +
      `<option value="left top">` +
      `<option value="left center">` +
      `<option value="left bottom">` +
      `<option value="right top">` +
      `<option value="right center">` +
      `<option value="right bottom">` +
      `<option value="center top">` +
      `<option value="center center">` +
      `<option value="center top">` +
      `<option value="center bottom">` +
      `<option value="50% 50%">` +
      `<option value="50px 150px">` +
      `</datalist>` +
      `<datalist id="jstyle-backgroundAttachment">` +
      `<option value="scroll">` +
      `<option value="fixed">` +
      `<option value="local">` +
      `<option value="inherit">` +
      `<option value="initial">` +
      `</datalist>` +
      `<datalist id="jstyle-backgroundClip">` +
      `<option value="border-box">` +
      `<option value="padding-box">` +
      `<option value="content-box">` +
      `<option value="inherit">` +
      `<option value="initial">` +
      `</datalist>` +
      `<datalist id="jstyle-filter">` +
      `<option value="blur(5px)">` +
      `<option value="brightness(200%)">` +
      `<option value="contrast(200%)">` +
      `<option value="drop-shadow(8px 8px 10px gray)">` +
      `<option value="grayscale(100%)">` +
      `<option value="hue-rotate(90deg)">` +
      `<option value="invert(100%)">` +
      `<option value="opacity(30%)">` +
      `<option value="saturate(8)">` +
      `<option value="sepia(100%)">` +
      `<option value="contrast(200%) brightness(150%)">` +
      `<option value="none">` +
      `</datalist>` +
      `<datalist id="jstyle-textDecoration">` +
      `<option value="overline">` +
      `<option value="line-through;">` +
      `<option value="underline">` +
      `<option value="underline overline;">` +
      `</datalist>` +
      `<datalist id="jstyle-textShadow">` +
      `<option value="2px 2px 8px #FF0000">` +
      `<option value="2px 2px 4px #000000">` +
      `<option value="0 0 3px #FF0000">` +
      `<option value="0 0 3px #FF0000, 0 0 5px #0000FF">` +
      `<option value="-10px -10px red">` +
      `</datalist>` +
      `<datalist id="jstyle-textShadow">` +
      `<option value="2px 2px 8px #FF0000">` +
      `<option value="2px 2px 4px #000000">` +
      `<option value="0 0 3px #FF0000">` +
      `<option value="0 0 3px #FF0000, 0 0 5px #0000FF">` +
      `<option value="-10px -10px red">` +
      `</datalist>` +
      `<datalist id="jstyle-textTransform">` +
      `<option value="uppercase">` +
      `<option value="lowercase">` +
      `<option value="capitalize">` +
      `<option value="none">` +
      `</datalist>` +
      `<datalist id="jstyle-visibility">` +
      `<option value="visible">` +
      `<option value="hidden">` +
      `<option value="none">` +
      `</datalist>` +
      `<datalist id="jstyle-userSelect">` +
      `<option value="auto">` +
      `<option value="none">` +
      `<option value="initial">` +
      `</datalist>` +
      `<datalist id="jstyle-pointerEvents">` +
      `<option value="auto">` +
      `<option value="none">` +
      `<option value="initial">` +
      `</datalist>` +
      `<datalist id="jstyle-resize">` +
      `<option value="none">` +
      `<option value="both">` +
      `<option value="horizontal">` +
      `<option value="vertical">` +
      `</datalist>` +
      `<datalist id="jstyle-boxShadow">` +
      `<option value="10px 10px grey">` +
      `<option value="50px 50px grey">` +
      `<option value="20px 20px 10px grey">` +
      `<option value="20px 20px 50px grey">` +
      `<option value="20px 20px 50px 15px grey">` +
      `<option value="20px 20px 20px 10px red">` +
      `<option value="20px 20px 20px 10px blue">` +
      `<option value="20px 20px 50px 10px pink">` +
      `<option value="20px 20px 50px 10px pink inset">` +
      `<option value="initial">` +
      `</datalist>` +
      `<datalist id="jstyle-listStyle">` +
      `<option value="circle">` +
      `<option value="square">` +
      `<option value="upper-roman">` +
      `<option value="lower-alpha">` +
      `<option value="square inside url(/repository/systemImages/icons/1420157478_bullet-red.png)">` +
      `<option value="none">` +
      `</datalist>` +
      `<datalist id="jstyle-whiteSpace">` +
      `<option value="none">` +
      `<option value="nowrap">` +
      `<option value="pre">` +
      `<option value="pre-line">` +
      `<option value="pre-wrap">` +
      `<option value="initial">` +
      `<option value="inherit">` +
      `</datalist>` +
      `<datalist id="flex">` +
      `<option value="auto">` +
      `<option value="initial">` +
      `<option value="none">` +
      `</datalist>` +
      `<datalist id="flex-direction">` +
      `<option value="none">` +
      `<option value="row">` +
      `<option value="column">` +
      `<option value="row-reverse">` +
      `<option value="column-reverse">` +
      `</datalist>` +
      `<datalist id="flex-wrap">` +
      `<option value="none">` +
      `<option value="row wrap">` +
      `<option value="column wrap">` +
      `<option value="row-reverse nowrap">` +
      `<option value="column wrap-reverse">` +
      `</datalist>`;

    this.$empty();
    this.innerHTML = html;
    this.findtext = this.querySelector(`[method="findtext"]`);
    this.styleTree = this.querySelector(`ul`);

    this._renderTree(this.styleTree, this.options.styleJson);
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.oMutationObserver = new MutationObserver(mutations => {
      this._setStyle();
    });

    this.addEventListener('click', e => {});

    this.addEventListener('input', e => {
      let styleEl = e.target.$closest('[style-name]');

      if (styleEl) {
        let styleName = styleEl.getAttribute('style-name');

        let value = e.target.value;

        if (value && styleEl.querySelector('unit')) {
          value += styleEl.querySelector('unit').innerText;
        }

        if (value) {
          styleEl.classList.add('usedata');
        } else {
          styleEl.classList.remove('usedata');
        }

        this._markUseData();

        if (this.selectEl) {
          this.selectEl.style[styleName] = value;
        }
      }
    });

    this.findtext.addEventListener('input', e => {
      let str = e.target.value.toUpperCase();

      if (str) {
        str = str.toUpperCase();

        this.styleTree
          .querySelectorAll('li')
          .forEach(el => (el.style.display = 'none'));

        this.styleTree.querySelectorAll('li').forEach(el => {
          if (el.children[0].innerText.toUpperCase().indexOf(str) >= 0) {
            Jinja.dom
              .parents(el, this, 'li')
              .forEach(findEl => (findEl.style.display = 'block'));
          }
        });
      } else {
        this.styleTree
          .querySelectorAll('li')
          .forEach(el => (el.style.display = 'block'));
      }
    });

    this.addEventListener('mousedown', e => {
      if (e.target.matches('.attr-label') && !e.ctrlKey) {
        e.target.parentElement.parentElement.classList.toggle('collapsed');

        if (e.target.children.length) {
          e.target.children[0].classList.toggle('fa-caret-right');
          e.target.children[0].classList.toggle('fa-caret-down');
        }
      }

      if (e.target.matches('a.unit')) {
        let styleEl = e.target.$closest('[style-name]');

        if (styleEl.querySelector('unit').innerText != e.target.innerText) {
          styleEl.querySelector('unit').innerText = e.target.innerText;

          if (this.selectEl && styleEl) {
            let styleName = styleEl.getAttribute('style-name');
            let input = styleEl.querySelector('input');
            let value = input.value + e.target.innerText;

            this.selectEl.style[styleName] = value;
          }
        }
      }

      if (e.target.matches('.attr-label') && e.ctrlKey) {
        e.stopImmediatePropagation();
        e.stopPropagation();
        e.preventDefault();

        const emptyValue = '';
        const styleEl = e.target.parentElement;
        const styleName = styleEl.getAttribute('style-name');

        if (styleName) {
          styleEl.classList.remove('usedata');

          if (styleEl.querySelector('input').type == 'color') {
            styleEl.querySelector('input').value = '#ffffff';
          } else {
            styleEl.querySelector('input').value = emptyValue;
          }

          this._markUseData();

          if (this.selectEl) {
            this.selectEl.style[styleName] = emptyValue;
          }
        }
      }

      if (e.target.matches('[type="url"]+.input-group-btn button')) {
        JJModal602.show('ui60.dialog.getImage.uc').then(result => {
          let inputEl = e.target.parentElement.previousElementSibling;

          inputEl.value = `url(${result[0]})`;
          inputEl.dispatchEvent(
            new Event('input', {
              bubbles: true,
              cancelable: true
            })
          );
        });
      }
    });
  }

  /**
   * @desc 지정한 트리를 생성한다.
   * @param {Element} - 대상 엘리먼트
   * @param {Obejct} - 트리정보
   * @example -
   */
  _renderTree(el, json) {
    let keys = Object.keys(json);

    keys.forEach(jsonKey => {
      let li = this._renderTreeItem(jsonKey, json[jsonKey]);

      el.appendChild(li);
    });
  }

  /**
   * @desc 트리항목을 생성한다.
   * @param {String} - 트리키
   * @param {Obejct} - 트리항목정보
   * @return {Element} - 트리항목
   * @example -
   */
  _renderTreeItem(key, json) {
    let li = document.createElement('li');

    li.searchContent = (key + json.title).toUpperCase();

    let labelStyle = document.createElement('label');

    li.appendChild(labelStyle);

    let spanAttrLabel = document.createElement('span');

    spanAttrLabel.classList.add('attr-label');
    spanAttrLabel.appendChild(document.createTextNode(key));
    spanAttrLabel.title = json.title;
    labelStyle.appendChild(spanAttrLabel);

    if (json.type == 'group') {
      labelStyle.classList.add('group');
    } else {
      labelStyle.setAttribute('style-name', key);

      let divInputG = document.createElement('div');

      divInputG.classList.add('input-group');

      let inputC = document.createElement('input');

      inputC.classList.add('form-control');
      inputC.type = json.type;

      if (json.datalist) {
        inputC.setAttribute('list', json.datalist);
        inputC.type = 'search';
      }
      if (json.min != undefined) inputC.setAttribute('min', json.min);
      if (json.max != undefined) inputC.setAttribute('max', json.max);
      if (json.step != undefined) inputC.setAttribute('step', json.step);

      let divGroupB = document.createElement('div');

      divGroupB.classList.add('input-group-btn');

      let inputGroupBtn = document.createElement('button');

      inputGroupBtn.type = 'button';
      inputGroupBtn.classList.add('btn');
      inputGroupBtn.classList.add('btn-default');

      if (json.prefix) {
        inputGroupBtn.classList.add('dropdown-toggle');
        inputGroupBtn.setAttribute('data-toggle', 'dropdown');
        inputGroupBtn.setAttribute('aria-haspopup', 'true');
        inputGroupBtn.setAttribute('aria-expanded', 'false');

        let unit = document.createElement('unit');

        unit.appendChild(document.createTextNode(json.prefix[0]));
        inputGroupBtn.appendChild(unit);

        let caret = document.createElement('span');

        caret.classList.add('caret');

        let ulDrop = document.createElement('div');

        ulDrop.setAttribute('class', 'dropdown-menu dropdown-menu-right');
        ulDrop.setAttribute('aria-labelledby', 'dropdownMenuLink');

        json.prefix.forEach(item => {
          let itema = document.createElement('a');

          itema.setAttribute('class', 'dropdown-item unit');
          itema.appendChild(document.createTextNode(item));
          ulDrop.appendChild(itema);
        });

        inputGroupBtn.appendChild(caret);
        divGroupB.appendChild(inputGroupBtn);
        divGroupB.appendChild(ulDrop);
      } else if (json.type == 'text') {
        inputGroupBtn.classList.add('dropdown-toggle');
        inputGroupBtn.setAttribute('data-toggle', 'dropdown');
        inputGroupBtn.setAttribute('aria-haspopup', 'true');
        inputGroupBtn.setAttribute('aria-expanded', 'false');
        inputGroupBtn.appendChild(document.createTextNode('...'));

        let textDrop = document.createElement('textarea');

        textDrop.classList.add('dropdown-menu');
        textDrop.classList.add('dropdown-menu-right');

        divGroupB.appendChild(inputGroupBtn);
        divGroupB.appendChild(textDrop);

        inputC.setAttribute('data-bind', 'data.' + key);
        textDrop.setAttribute('data-bind', 'data.' + key);
      } else {
        inputGroupBtn.appendChild(document.createTextNode('...'));
        divGroupB.appendChild(inputGroupBtn);
      }

      labelStyle.appendChild(divInputG);
      divInputG.appendChild(inputC);
      divInputG.appendChild(divGroupB);
    }

    if (json.child) {
      li.classList.add('collapsed');

      let iCaret = document.createElement('i');

      iCaret.classList.add('fa');
      iCaret.classList.add('fa-caret-right');
      spanAttrLabel.appendChild(iCaret);

      let ulChild = document.createElement('ul');

      li.appendChild(ulChild);

      this._renderTree(ulChild, json.child);
    }

    return li;
  }

  /**
   * @desc 스타일을 설정한다.
   * @example -
   */
  _setStyle() {
    const sizeunit = ['px', '%', 'pt', 'em'];

    let compStyle = {};
    let userStyle = {};

    if (this.selectEl) {
      compStyle = window.getComputedStyle(this.selectEl);
      userStyle = this.selectEl.style;
    }

    this.styleTree.querySelectorAll('[style-name]').forEach(item => {
      item.classList.remove('usedata');

      let styleName = item.getAttribute('style-name');
      let input = item.querySelector('input');
      let userValue = userStyle[styleName] || '';

      if (item.querySelector('unit')) {
        let unit = '';

        if (
          sizeunit.some(item => {
            if (userValue.includes(item)) {
              unit = item;

              return true;
            }
          })
        ) {
          userValue = userValue.replace(unit, '');

          item.querySelector('unit').innerText = unit;
          input.value = userValue;
        } else {
          input.value = userValue;
        }
      } else if (styleName.toLowerCase().endsWith('color')) {
        if (userValue && userValue != 'transparent') {
          input.value = userValue;
        } else {
          input.value = userValue;
        }
      } else {
        input.value = userValue;
      }

      if (userValue) {
        item.classList.add('usedata');
      }

      if (styleName.toLowerCase().endsWith('color')) {
        if ((compStyle[styleName] != compStyle[styleName]) != 'transparent') {
          input.placeholder = compStyle[styleName];
        } else {
          input.placeholder = compStyle[styleName];
        }
      } else {
        input.placeholder = compStyle[styleName] || '';
      }
    });

    this._markUseData();
  }

  /**
   * @desc 사용중 데이터를 표시한다.
   * @example -
   */
  _markUseData() {
    this.styleTree.querySelectorAll(':scope li').forEach(el => {
      if (el.querySelector(':scope > ul')) {
        if (el.querySelectorAll(':scope ul .usedata').length) {
          el.querySelector('label').classList.add('childdata');
        } else {
          el.querySelector('label').classList.remove('childdata');
        }
      }
    });
  }

  /**
   * @desc 생성 이벤트 후철리를 실행한다.
   * @example -
   */
  _onCreate() {
    this.selectEl = null;
  }

  /**
   * @desc 지정한 노드 엘리먼트를 활성화한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  activeNode(node, isRefresh) {
    this.selectEl = null;
    this.oMutationObserver.disconnect();

    if (node) {
      this.selectEl = node;
      this.oMutationObserver.observe(this.selectEl, {
        attributes: true,
        childList: true,
        characterData: true
      });

      if (isRefresh) {
        this._setStyle();
      }
    } else {
      this._setStyle();
    }
  }
}

customElements.define('jj-style', JJStyle);
/* ==JJVhtmlEditor.640.class================ */

/**
 * @classdesc VhtmlEditor 컴포넌트관리를 위한 클래스
 */
class JJVhtmlEditor extends JJElement {

  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      noeditTag: ['IMG', 'INPUT', 'SELECT', 'I', 'SVG', 'JJ-HEE'],
      histroyMethods: [
        'new',
        'clear',
        'clone',
        'delete',
        'paste',
        'warp',
        'unwarp',
        'movePrevInner',
        'moveNextInner',
        'movePrev',
        'moveNext',
        'alignText',
        'changeTag',
        'downHeight',
        'upHeight',
        'drop',
        'resizeEnd'
      ],
      activeHistory: true,
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    this.cssUUID = Jinja.global.uuid();

    let html = 
      `<div class='area-tool'>` +
      `<div class="dragBox">` +
      `<i class="fa fa-clone" aria-hidden="true"></i><t jj-id="cir" >1</t>개 이동 중` +
      `</div>` +
      `<div class="drop-holder"></div>` +
      `<jj-resize-box data-is-rotate=false></jj-resize-box>` +
      `</div>` +
      `<style></style>` +
      `<div class='area-editor' uuid="${this.cssUUID}" tabindex=-1></div>` +
      `<div class='area-viewer'></div>`;

    this.innerHTML = html;

    this.tool = this.querySelector('.area-tool');
    this.editor = this.querySelector('.area-editor');
    this.viewer = this.querySelector('.area-viewer');
    this.editStyle = this.querySelector('style');
    this.dragBox = this.querySelector('.dragBox');
    this.dropHolder = this.querySelector('.drop-holder');
    this.dropHolder.hidden = true;

    this.sizeBox = this.querySelector('jj-resize-box');
    this.sizeBox.hidden = true;

    this.histroyBody = [''];
    this.histroyIndex = 1;
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.onAction = {};

    this.editor.dispatchEvent(new CustomEvent('loadEditor', { bubbles: true }));

    this.editor.addEventListener('mousedown', e => {
      if (e.button === 0) {
        this._selectItem(e.target);

        this.dragEl = this.selectEl;

        if (this.dragEl) this.dragEl.setAttribute('draggable', 'true');
      } else {
        this._selectMark(e.target);
      }
    });

    this.editor.addEventListener('mouseup', e => {
      if (this.dragEl) {
        this.dragEl.classList.remove('drag-el');
        this.dragEl.removeAttribute('draggable');
        this.dragEl = null;
      }
    });

    this.editor.addEventListener('dragstart', e => {
      if (this.editor.matches(`[contenteditable]`)) return;

      e.dataTransfer.setData('text/html', this.dragEl.outerHTML);
      e.dataTransfer.setData('apptype', 'vhtml');

      this.dragEl.classList.add('drag-el');
      this.editor.classList.add('drag');
    });

    this.editor.addEventListener('dragover', e => {
      if (this.editor.matches(`[contenteditable]`)) return;

      if (this.dragEl && this.dragEl.contains(e.target)) {
        return;
      }

      e.preventDefault();

      if (this.dropEl) {
        this.dropEl.classList.remove('dragover');
        this.dropEl = null;
      }

      this.dropEl = e.target;
      this.dropEl.classList.add('dragover');
      this.dropPosition = this._dropPosition(e, 10);
      this._showDropHolder();
    });

    this.editor.addEventListener('dragleave', e => {
      if (this.editor.matches(`[contenteditable]`)) return;
      if (this.dropEl) {
        this.dropEl.classList.remove('dragover');
        this.dropEl = null;
      }
    });

    this.editor.addEventListener('dragend', e => {
      if (this.editor.matches(`[contenteditable]`)) return;

      this.editor.classList.remove('drag');
      this.dropHolder.hidden = true;

      if (this.dropEl) {
        this.dropEl.classList.remove('dragover');
        this.dropEl = null;
      }

      if (this.dragEl) {
        this.dragEl.classList.remove('drag-el');
        this.dragEl.removeAttribute('draggable');
        this.dragEl = null;
      }
    });

    this.editor.addEventListener('drop', e => {
      if (this.editor.matches(`[contenteditable]`)) return;

      e.preventDefault();

      if (this.dropEl) {
        this.dropEl.classList.remove('dragover');
      } else {
        return;
      }

      if (this.dragEl) {
        this.dragEl.classList.remove('drag-el');
        this.dragEl.removeAttribute('draggable');
      }

      let apptype = e.dataTransfer.getData('apptype');

      if (apptype === 'vhtml') {
        this.dragEl.classList.remove('drag-el');
        this._moveItem(this.dragEl, this.dropEl, this.dropPosition);
      } else {
        let objType = e.dataTransfer.getData('objType/application');

        if (objType) {
          if (this.onAction['dropAction']) {
            //
            // formApp에서 컬럼을 드롭하는 경우 신규 컬럼을 생성하고 프로미스로 리턴하는 경우처리함
            let rltHtml = this.onAction['dropAction'](e);
            if(typeof(rltHtml)=="string"){
            	this._insertAdjacentHTM(rltHtml, this.dropPosition);
            } else {
              return rltHtml.then(promHtml=>{
                this._insertAdjacentHTM(promHtml, this.dropPosition);
                this.editor.classList.remove('drag');
                this.dropPosition = null;
                this.dropHolder.hidden = true;
                this.dropEl = null;
                this.dragEl = null;
                
              });
            }
          }
        } else {
          let dropHtml = e.dataTransfer.getData('text/html');

          if (this.onAction['dropAction']) {
            let rltHtml = this.onAction['dropAction'](e);
            this._insertAdjacentHTM(rltHtml, this.dropPosition);
          } else {
            this._insertAdjacentHTM(dropHtml, this.dropPosition);
          }
        }
      }

      this.editor.classList.remove('drag');
      this.dropPosition = null;
      this.dropHolder.hidden = true;
      this.dropEl = null;
      this.dragEl = null;
    });

    this.editor.addEventListener('keydown', e => {
      let keyMap = Jinja.global.getEventKeyMap(e);

      if (e.target.matches(`[contenteditable], [contenteditable] *`)) {
        if (keyMap == 'Esc') this._setEditable(false);

        return;
      }

      switch (keyMap) {
        case 'Up':
          this._selectArrow('prev', e);

          break;
        case 'Down':
          this._selectArrow('next', e);

          break;
        case 'Left':
          this._selectArrow('parent', e);

          break;
        case 'Right':
          this._selectArrow('inner', e);

          break;
        case 'Shift-Up':
          this._moveArrow('prev', e);

          break;
        case 'Shift-Down':
          this._moveArrow('next', e);

          break;
        case 'Shift-Left':
          this._moveArrow('parent', e);

          break;
        case 'Shift-Right':
          this._moveArrow('inner', e);

          break;
        case 'Ctrl-Up':
          this._sizeArrow('decreaseHeight', e);

          break;
        case 'Ctrl-Down':
          this._sizeArrow('increaseHeight', e);

          break;
        case 'Ctrl-Left':
          this._sizeArrow('decreaseWidth', e);

          break;
        case 'Ctrl-Right':
          this._sizeArrow('increaseWidth', e);

          break;
        case 'Delete':
          this._remove();

          break;
        case 'Ctrl-C':
          this._copy(e);

          break;
        case 'Ctrl-D':
          this._clone(e);

          break;
        case 'Ctrl-X':
          this._cut(e);

          break;
        case 'Ctrl-V':
          this._paste(e);

          break;
        case 'Ctrl-Z':
          this._undo();

          break;
        case 'Ctrl-Y':
          this._redo();

          break;

        case 'F2':
          this._setEditable(true);

          break;
        case 'Esc':
          this._setEditable(false);

          break;
      }
    });

    this.sizeBox.addEventListener('resize', e => {
      if (e.detail.arrow.indexOf('right') >= 0) {
        if (this.selectEl.getAttribute('class') 
            && this.selectEl.getAttribute('class').indexOf('col-') >= 0) {
          let lw = this.selectInfo.width + e.detail.x;
          let pw = this.selectEl.parentElement.offsetWidth;
          let boCss = 'col-md-12';

          if ((lw / pw) * 100 <= (100 * 1) / 12) boCss = 'col-md-1';
          else if ((lw / pw) * 100 <= (100 * 2) / 12) boCss = 'col-md-2';
          else if ((lw / pw) * 100 <= (100 * 3) / 12) boCss = 'col-md-3';
          else if ((lw / pw) * 100 <= (100 * 4) / 12) boCss = 'col-md-4';
          else if ((lw / pw) * 100 <= (100 * 5) / 12) boCss = 'col-md-5';
          else if ((lw / pw) * 100 <= (100 * 6) / 12) boCss = 'col-md-6';
          else if ((lw / pw) * 100 <= (100 * 7) / 12) boCss = 'col-md-7';
          else if ((lw / pw) * 100 <= (100 * 8) / 12) boCss = 'col-md-8';
          else if ((lw / pw) * 100 <= (100 * 9) / 12) boCss = 'col-md-9';
          else if ((lw / pw) * 100 <= (100 * 10) / 12) boCss = 'col-md-10';
          else if ((lw / pw) * 100 <= (100 * 11) / 12) boCss = 'col-md-11';
          else boCss = 'col-md-12';

          this.selectEl.classList.remove(
            'col-md-1',
            'col-md-2',
            'col-md-3',
            'col-md-4',
            'col-md-5',
            'col-md-6',
            'col-md-7',
            'col-md-8',
            'col-md-9',
            'col-md-10',
            'col-md-11',
            'col-md-12'
          );

          this.selectEl.style.width = '';
          this.selectEl.classList.add(boCss);
          this.sizeBox.lockElement(this.selectEl);
        } else {
          this.selectEl.style.width = this.selectInfo.width + e.detail.x + 'px';
        }
      }

      if (e.detail.arrow.indexOf('bottom') >= 0) {
        this.selectEl.style.height = this.selectInfo.height + e.detail.y + 'px';
      }
    });

    this.sizeBox.addEventListener('resizeEnd', e => {
      this._history();
    });
  }

  /**
   * @desc 편집모드여부를 설정한다.
   * @param {Boolean} - 편집모드여부
   * @example -
   */
  _setEditable(isActive) {
    this._clearSelectEl();

    if (isActive) {
      this.editor.setAttribute('contenteditable', true);
    } else {
      this.editor.removeAttribute('contenteditable');
      this._history();
    }
  }

  /**
   * @desc 선택된 엘리먼트 기준으로 지정한 위치의 엘리먼트를 선택한다.
   * @param {String} - 위치정보
   * @param {Event} - 이벤트
   * @example -
   */
  _selectArrow(arrow, event) {
    let curEl = this.selectEl || this.editor.children[0];
    let nextEl;

    if (event) event.preventDefault();

    switch (arrow) {
      case 'prev':
        nextEl = curEl.previousElementSibling;

        break;
      case 'next':
        nextEl = curEl.nextElementSibling;

        break;
      case 'parent':
        nextEl = curEl.parentElement;

        break;
      case 'inner':
        nextEl = curEl.firstElementChild;

        break;
    }

    if (nextEl && !Object.is(this.editor, nextEl)) {
      this._selectItem(nextEl);
    }
  }

  /**
   * @desc 선택된 엘리먼트의 지정한 방향의 크기를 변경한다.
   * @param {String} - 위치정보
   * @param {Event} - 이벤트
   * @example -
   */
  _sizeArrow(arrow, event) {
    let curEl = this.selectEl || this.editor.children[0];
    let h, w;

    if (event) event.preventDefault();

    switch (arrow) {
      case 'decreaseHeight':
        h = parseInt((curEl.offsetHeight - 10) / 10) * 10;

        curEl.style.height = h + 'px';

        break;
      case 'increaseHeight':
        h = parseInt((curEl.offsetHeight + 10) / 10) * 10;

        curEl.style.height = h + 'px';

        break;
      case 'decreaseWidth':
        w = parseInt((curEl.offsetWidth - 10) / 10) * 10;

        curEl.style.width = w + 'px';

        break;
      case 'increaseWidth':
        w = parseInt((curEl.offsetWidth + 10) / 10) * 10;

        curEl.style.width = w + 'px';

        break;
    }

    this._history();
    this._selectItem(curEl);
  }

  /**
   * @desc 선택된 엘리먼트 기준으로 지정한 위치에 선택된 엘리먼트를 복사한다.
   * @param {String} - 위치정보
   * @param {Event} - 이벤트
   * @example -
   */
  _moveArrow(arrow, event) {
    let curEl = this.selectEl || this.editor.children[0];

    if (event) event.preventDefault();

    switch (arrow) {
      case 'prev':
        if (curEl.previousElementSibling) {
          curEl.previousElementSibling.before(curEl);
        }

        break;
      case 'next':
        if (curEl.nextElementSibling) {
          curEl.nextElementSibling.after(curEl);
        }

        break;
      case 'parent':
        if (
          curEl.parentElement &&
          !Object.is(this.editor, curEl.parentElement)
        ) {
          curEl.parentElement.after(curEl);
        }

        break;
      case 'inner':
        if (curEl.previousElementSibling) {
          curEl.previousElementSibling.appendChild(curEl);
        }

        break;
    }

    this._history();
    this._selectItem(curEl);
  }

  /**
   * @desc 선택한 엘리먼트의 선택 이벤트를 처리한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  _selectItem(el) {
    this._selectMark(el);

    if (this.selectEl) {
      this.selectEl.dispatchEvent(
        new CustomEvent('selected', { bubbles: true })
      );
    }
  }

  /**
   * @desc 선택한 Element를 선택표시한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  _selectMark(el) {
    if (this.editor.matches(`[contenteditable]`)) return;

    if (Object.is(this.editor, el)) {
      this._clearSelectEl();
      return;
    }

    this.selectEl = el;
    this.sizeBox.lockElement(this.selectEl);
    this.sizeBox.hidden = false;

    this.selectInfo = {
      width: this.selectEl.offsetWidth,
      height: this.selectEl.offsetHeight,
    };
  }

  /**
   * @desc 선택된 엘리먼트정보를 초기화한다.
   * @example -
   */
  _clearSelectEl() {
    this.dragEl = null;
    this.dropEl = null;
    this.selectEl = null;
    this.copyEl = null;
    this.sizeBox.hidden = true;
    this.dropHolder.hidden = true;
    this.editor.removeAttribute('contenteditable');
    this.dispatchEvent(new CustomEvent('unselected', { bubbles: true }));
  }

  /**
   * @desc 드랍위치를 반환한다.
   * @param {Event} - 이벤트
   * @param {Number} - 여백크기
   * @return {String} - 드랍위치
   * @example -
   */
  _dropPosition(event, abs) {
    let dropPosition = '';

    if (!abs) abs = 6;

    let x =
      this.dropEl.getBoundingClientRect().x -
      this.editor.getBoundingClientRect().x;
    let y =
      this.dropEl.getBoundingClientRect().y -
      this.editor.getBoundingClientRect().y;
    let h = this.dropEl.offsetHeight;
    let w = this.dropEl.offsetWidth;
    let h2 = event.clientY - this.dropEl.getBoundingClientRect().y;
    let w2 = event.clientX - this.editor.getBoundingClientRect().x - x;
    let py = h2 / h;
    let px = w2 / w;

    if (h2 < abs) {
      dropPosition = 'top';
    } else if (h - h2 < abs) {
      dropPosition = 'bottom';
    } else {
      dropPosition = 'inner';

      if (this.dropEl.classList.contains('group-editor')) {
        dropPosition = 'bottom';
      } else if (this.dropEl.hasAttribute('data-render')) {
        dropPosition = 'bottom';
      } else if (this.dropEl.childElementCount) {
        this.dropEl.classList.remove('dragover');
        this.dropEl = this.dropEl.lastElementChild;
        this.dropEl.classList.add('dragover');

        dropPosition = 'bottom';
      }
    }

    return dropPosition;
  }

  /**
   * @desc DropHolder를 지정된 위치에 보여준다.
   * @example -
   */
  _showDropHolder() {
    let x =
      this.dropEl.getBoundingClientRect().x - this.getBoundingClientRect().x;
    let y =
      this.dropEl.getBoundingClientRect().y -
      this.getBoundingClientRect().y +
      this.scrollTop;
    let w = this.dropEl.offsetWidth;
    let h = this.dropEl.offsetHeight;

    if (this.dropEl.tagName.toUpperCase() == 'SVG') {
      w = this.dropEl.clientWidth;
      h = this.dropEl.clientHeight;
    }

    let h2 = 10;
    let pw = this.dropEl.offsetWidth / this.dropEl.offsetWidth;

    if (
      this.dropPosition == 'top' &&
      pw < 0.8 &&
      ['left', 'right'].includes(window.getComputedStyle(this.dropEl).float)
    )
      this.dropPosition = 'left';
    if (
      this.dropPosition == 'bottom' &&
      pw < 0.8 &&
      ['left', 'right'].includes(window.getComputedStyle(this.dropEl).float)
    )
      this.dropPosition = 'right';

    if (this.dropPosition == 'top') {
      y = y - 12;
    } else if (this.dropPosition == 'bottom') {
      y = y + this.dropEl.offsetHeight + 2;
    } else if (this.dropPosition == 'left') {
      x = x - 12;
      y = y;
      w = 10;
      h2 = h;
    } else if (this.dropPosition == 'right') {
      x = x + w + 2;
      y = y;
      w = 10;
      h2 = h;
    } else if (this.dropPosition == 'inner') {
      if (this.dropEl.lastChild) {
        y = y + h - 20;
      } else {
        y = y + 10;
      }
    }

    this.dropHolder.style.top = y + 'px';
    this.dropHolder.style.left = x + 'px';
    this.dropHolder.style.width = w + 'px';
    this.dropHolder.style.height = h2 + 'px';

    this.dropHolder.setAttribute('position', this.dropPosition);
    this.dropHolder.hidden = false;
    
    if(this.dropEl == this.editor && ["top", "bottom"].includes(this.dropPosition)){
      this.dropHolder.hidden = true;
    }
    
  }

  /**
   * @desc 지정한 엘리먼트를 이동시킨다.
   * @param {Element} - 현재 엘리먼트
   * @param {Element} - 대상 엘리먼트
   * @param {String} - 위치명
   * @example -
   */
  _moveItem(atEl, toEl, position) {
    switch (position) {
      case 'top':
        toEl.before(atEl);

        break;
      case 'bottom':
        toEl.after(atEl);

        break;
      case 'inner':
        toEl.appendChild(atEl);

        break;
    }

    this._history();
    this._selectItem(atEl);
  }

  /**
   * @desc 선택된 엘리먼트 Element의 지정한 위치에 지정한 html을 추가한다.
   * @param {String} - 엘리먼트 문자열
   * @param {String} - 위치명
   * @example -
   */
  _insertAdjacentHTM(html, position) {
    let curEl = this.dropEl || this.editor;

    if (Object.is(curEl, this.editor)) {
      position = 'inner';
    }

    let nextEl;

    switch (position) {
      case 'top':
        curEl.insertAdjacentHTML('beforebegin', html);

        nextEl = curEl.previousElementSibling;

        break;
      case 'inner':
        curEl.insertAdjacentHTML('beforeend', html);

        nextEl = curEl.lastChild;

        break;
      default:
        curEl.insertAdjacentHTML('afterend', html);
        nextEl = curEl.nextElementSibling;
    }

    if (nextEl) {
      this._selectItem(nextEl);
    }

    this._history();
  }

  append(html){
    this.editor.insertAdjacentHTML('beforeend', html);
  }
  
  /**
   * @desc 선택된 엘리먼트를 삭제한다.
   * @example -
   */
  _remove() {
    let nextEl =
      this.selectEl.nextElementSibling ||
      this.selectEl.previousElementSibling ||
      this.selectEl.parentElement;

    this.selectEl.remove();
    this._clearSelectEl();
    this._history();

    if (nextEl && !Object.is(this.editor, nextEl)) {
      this._selectItem(nextEl);
    }
  }

  /**
   * @desc 선택한 엘리먼트를 클립보드에 저장한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _copy(event) {
    if (this.selectEl) {
      event.preventDefault();

      Jinja.store.clipBoard(this.selectEl.outerHTML);

      this.copyEl = this.selectEl;
    }
  }

  /**
   * @desc 선택한 엘리먼트를 잘라내어 클립보드에 저장한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _cut(event) {
    if (this.selectEl) {
      event.preventDefault();

      Jinja.store.clipBoard(this.selectEl.outerHTML);

      this.copyEl = this.selectEl;
      this.selectEl.remove();
      this._history();
    }
  }

  /**
   * @desc 선택한 엘리먼트를 복사하여 이어붙인다.
   * @param {Event} - 이벤트
   * @example -
   */
  _clone(event) {
    if (this.selectEl) {
      event.preventDefault();

      let clone = this.selectEl.cloneNode(true);

      this.selectEl.after(clone);
      this._history();
    }
  }

  /**
   * @desc 클립보드에 저장된 내용을 에디터에 붙여넣기 한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _paste(event) {
    event.preventDefault();

    Jinja.store.clipBoard().then(html => {
      if (!html) return;

      if (this.selectEl) {
        this.selectEl.insertAdjacentHTML('beforeend', html);
      } else {
        let selObj = this.editor.ownerDocument.getSelection();
        let selText = selObj.toString();
        let node = selObj.anchorNode;
        let bf = selObj.anchorNode.data.substr(0, selObj.anchorOffset);
        let ft = selObj.anchorNode.data.substr(selObj.focusOffset);

        node.before(document.createTextNode(bf));
        node.before(this.copyEl);
        node.before(document.createTextNode(ft));
        node.remove();
      }

      this._history();
    });
  }

  /**
   * @desc 컴포넌트의 현재상태를 이력에 저장한다.
   * @example -
   */
  _history() {
    if (this.options.activeHistory) {
      let body = this.editor.innerHTML;

      this.histroyBody.splice(this.histroyIndex + 1, this.histroyBody.length);
      this.histroyBody.push(body);
      this.histroyIndex = this.histroyBody.length - 1;
    }
  }

  /**
   * @desc 컴포넌트를 이전상태로 변경한다.
   * @example -
   */
  _undo() {
    this.editor.$empty();
    this.histroyIndex = Math.max(this.histroyIndex - 1, 0);
    this.editor.innerHTML = this.histroyBody[this.histroyIndex];
    this.editor.dispatchEvent(
      new CustomEvent('undo', {
        bubbles: true
      })
    );
  }

  /**
   * @desc 컴포넌트를 이후상태로 변경한다.
   * @example -
   */
  _redo() {
    this.editor.$empty();
    this.histroyIndex = Math.min(
      this.histroyIndex + 1,
      this.histroyBody.length - 1
    );
    this.editor.innerHTML = this.histroyBody[this.histroyIndex];
    this.editor.dispatchEvent(
      new CustomEvent('redo', {
        bubbles: true
      })
    );
  }

  /**
   * @memberof JJVhtmlEditor
   * @method get value
   * @desc 컴포넌트 Value를 반환한다.
   * @return {Array} - 컴포넌트 Value
   * @example -
   */
  get value() {
    return this.editor.innerHTML;
  }

  /**
   * @memberof JJVhtmlEditor
   * @method set value
   * @desc 컴포넌트 Value를 설정한다.
   * @param {Object} - 컴포넌트정보
   * @example -
   */
  set value(html) {
    this.editor.innerHTML = html;
  }

  /**
   * @desc 선택된 노드를 삭제한다.
   * @example -
   */
  selectNodeRemove() {
    this._remove();
  }

  /**
   * @desc 컴포넌트를 초기화시킨다.
   * @example -
   */
  clear() {
    this._clearSelectEl();

    Jinja.dom.empty(this.editor);
    Jinja.dom.empty(this.viewer);

    this._history();
  }

  /**
   * @desc 지정한 노드 엘리먼트를 활성화한다.
   * @param {Element} - 대상 엘리먼트
   * @example -
   */
  activeNode(node) {
    this._selectMark(node);
  }
	selectItem(node){
    this._selectItem(node);
  }
  /**
   * @desc 에디터에 파일정보를 설정한다.
   * @param {Object} - 파일정보
   * @example -
   */
  setFileBody(body) {
    this.clear();
    this.editor.innerHTML = body.html;
    this.setBodyStyle(body.less);
  }

  /**
   * @desc 지정한 LESS정보를 에디터에 설정한다.
   * @param {String} - LESS정보
   * @example -
   */
  setBodyStyle(lessCss) {
    less
      .render(
        `[uuid="${this.cssUUID}"]{ ${Jinja.lessRuleset || ''} ${
          lessCss || ''
        } }`
      )
      .then(output => (this.editStyle.innerText = output.css))
      .catch(error => console.error(error));
  }

  /**
   * @desc 편집모드로 전환한다.
   * @example -
   */
  editeMode() {
    if (this.viewer.querySelector('jj-form-excute')) {
      this.viewer.querySelector('jj-form-excute').$remove();
    }

    this.classList.remove('excute');
  }

  /**
   * @desc 지정한 파일정보를 뷰어화면 반영한다.
   * @param {Object} - 파일정보
   * @example -
   */
  excute(body) {
    this.classList.add('excute');

    if (this.viewer.querySelector('jj-form-excute')) {
      this.viewer.querySelector('jj-form-excute').$remove();
    }

    let formEl = document.createElement('jj-form-excute');

    this.viewer.appendChild(formEl);

    formEl.excuteLoad(body);

    return formEl;
  }

  /**
   * @desc 이벤트를 처리한다.
   * @param {String} - 이벤트명
   * @return {Function} - 콜백함수
   * @example -
   */
  on(action, callback) {
    this.onAction[action] = callback;
  }
}

customElements.define('jj-vhtml-editor', JJVhtmlEditor);
/* ==JJQueryResult.710.class================ */
class JJQueryResult extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {
    return {
      "sysColumnRight": true,
      "maxLength": 50,
      "version": '710'
    };
  }  
  
  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
  } 
  
  showMessage(msg){
    this.innerHTML = msg;
  }
  
  showResult(result, options){
    if(!result) return;
		
    let json2htmlOption = Object.assign(this.options, options);
    
    this.$empty();
    
    if (result.rows && !Array.isArray(result.rows)) {
      this.innerHTML = `처리되었습니다. 결과 건수가 ${result.rows}건입니다`;
    }

    if (result.rows && Array.isArray(result.rows) && result.rows.length == 0) {
      this.innerHTML = `처리되었습니다. 결과 건수가 0건입니다`;
    }

    if (result.rows && Array.isArray(result.rows) && result.rows.length > 0) {
      let h4 = document.createElement('h4');
      h4.innerHTML = `[${result.rows.length}: Records] ` ;
      if(result.rows.length > json2htmlOption.maxLength){
        h4.innerHTML += `<small class="text-danger">출력표시는 ${json2htmlOption.maxLength}건으로 제한됩니다</small>` ;
      }
      this.appendChild(h4);
      let tblWrap = document.createElement('div');
      
      tblWrap.innerHTML = Jinja.global.json2html(result.rows, json2htmlOption);
      this.appendChild(tblWrap);
    }

    if (result.table1) {

      Object.keys(result).forEach(tblName => {
        let h4 = document.createElement('h4');

        h4.innerHTML = tblName;

        this.appendChild(h4);

        let tblWrap = document.createElement('div');
        let _table  = result[tblName];

        if (_table.rows && !Array.isArray(_table.rows)) {
          tblWrap.innerHTML = `처리되었습니다. 결과 건수가 ${_table.rows}건입니다`;
        }

        if (_table.rows && Array.isArray(_table.rows) && _table.rows.length == 0) {
          tblWrap.innerHTML = `처리되었습니다. 결과 건수가 0건입니다`;
        }

        if (_table.rows && Array.isArray(_table.rows) && _table.rows.length > 0) {
          h4.innerHTML = `${tblName}  [${_table.rows.length}: Records] ` ;
          if(_table.rows.length > json2htmlOption.maxLength){
            h4.innerHTML += `<small class="text-danger">출력표시는 ${json2htmlOption.maxLength}건으로 제한됩니다</small>` ;
          }
          tblWrap.innerHTML = Jinja.global.json2html(_table.rows, json2htmlOption);
        }

        this.appendChild(tblWrap);
      });
    }
    
  }
}


customElements.define('jj-query-result', JJQueryResult);/* ==JJBookmark.630.class================ */
class JJBookmark extends JJElement {
  get value() {
    return this._value;
  }

  set value(v) {
    this._value = v;
  }    

  _defaultOption() {
    return {
      "title": "목록",
      "class": "xsummary",
      "targetSelect": ".jj-form",
      "itemSelect": ".sub-section",
      "delayTime": 200,
      "autoStart": true,
      "version": "620"
    };
  }  

  _render() {
    this.classList.add(this.options.class);
    
    let warp = document.createElement('div');

    this.appendChild(warp);

    warp.classList.add('bookmark-wrap');
    
    let _title = document.createElement('h5');

    warp.appendChild(_title);

    _title.append(document.createTextNode(this.options.title));

    this.links = document.createElement('ul');

    warp.appendChild(this.links);

    this.links.setAttribute("class", "list-unstyled");

    this.containerForm.addEventListener("formLoad", e => {
       this._makeSummary(); 
    });
  }

  _setEvent() {
    this.addEventListener("click", e => {
      e.preventDefault();
 	    e.stopPropagation();

      if (e.target._targetEl) {
    		e.target._targetEl.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });
      }
    })
    
  }

  _makeSummary(targetEl) {
    if (!targetEl) {
      targetEl = this.$closest(this.options.targetSelect)
    }

    if(!targetEl) {
      console.info("jj-bookmark 목록추출 대상이 없습니다");

      return ;
    } 

    targetEl.querySelectorAll(this.options.itemSelect).forEach(el=>{
      let linkName = el.getAttribute('id');

      if (linkName) {
        let item = document.createElement('li');
        let itemLink = document.createElement('a');
        let textContent = el.getAttribute("bookmark-title") || el.firstElementChild.textContent;

        itemLink.setAttribute('href', '#');
        itemLink.appendChild(document.createTextNode(textContent));
        item.appendChild(itemLink);

        itemLink._targetEl = el;

        this.links.appendChild(item);
      }
    })

  }
}

customElements.define('jj-bookmark', JJBookmark);	
/* ==JHRealtimeChart.class================ */
class JHChart extends JJElement {

  /** 
   * html만들기
   */
  _render() {
    // 속성
    this.clickCount = 0; 
    this.MAX_DATA_LENGTH = 20;
    this.MAX_DATA_Y = 100;
    this.INTERVAL = 100;
    this.chartType = "";


    let html = `
<div class="left_text" style="position: absolute; ">
<div  style="position: absolute; left:17; top:85; text-align: right;">0</div>
<div style="position: absolute; left:8; top:40; text-align: right;">50</div>
<div  style="position: absolute; left:3; top:-5; text-align: right;">100</div>
</div>

<div>
<div class="chart">
<canvas width="800" height="100;"></canvas>
<div class="tootip" jj-id="tooltip_text"></div>
</div>
</div>
`;

    this.innerHTML = html;

    this.C = this.querySelector('canvas');
    this.CTX = this.C.getContext("2d");
    this.dataSize = 2;
    this.colors = ["red", "blue", "green", "yellow"];
    this.chartType = "line";

    this.CHART_ITEM_WIDTH = this.C.width / this.MAX_DATA_LENGTH;
    this.data = [];
    this.X =0;
    this.t = this.CHART_ITEM_WIDTH; //to control width of X


  }

  /**
   * 이벤트등록
   */
  _setEvent() {
    this.addEventListener("click", e=>{
      this.addData(); 
    })  

    this.C.addEventListener("mousemove", e=>{
      let i = parseInt(e.offsetX / 40);
      this.tooltip_text.innerText = this.data[i]||"";
      this.tooltip_text.style.left = (e.offsetX+50)+'px';
      this.tooltip_text.style.top = e.offsetY+10+'px';
    })
  }

  setOption(key, value){
    
  }
  /*
   * 메소드
   */
  addData(Y){
    //      this.clickCount++;
    //      this.innerHTML = "김재희"+this.clickCount;
    this.data.push(Y);

    if(this.data.length > this.MAX_DATA_LENGTH){
      this.data.shift();
    }
    this.data.forEach((item,index)=>{
      this.x = index*this.CHART_ITEM_WIDTH+10;
    }) 

    this.smooth(this.data);
  }

  start(){
    this.timer =  setInterval(e=>{

      let Y = Math.floor((Math.random() * this.MAX_DATA_Y) );
      //let X = Math.floor((Math.random() * this.MAX_DATA_Y) );
      //form.addData([X,Y]);
      this.addData(Y);
    }, this.INTERVAL)    
  }
  stop(){
    clearInterval(this.timer); 
  }
  showChart(type){
    this.chartType = type;
    if(this.chartType == "line")
      this.line(this.data);  
    else 
      this.smooth(this.data);  
  }
  gradient(a, b) {
    return (b.y-a.y)/(b.x-a.x);
  }

  line(dataArray){

    // 영역지우기
    this.CTX.clearRect(0, 0, C.width, C.height);

    this.CTX.beginPath();

    dataArray.forEach((item,index)=>{

      this.CTX.lineTo(index*(this.C.width/this.MAX_DATA_LENGTH), 100-item);                                
      this.CTX.lineWidth = 2;
      this.CTX.stroke();     
      this.CTX.font = '10px serif';
      this.CTX.fillText(item, index*(this.C.width/this.MAX_DATA_LENGTH), 100-item-5);
      this.CTX.beginPath();
      this.CTX.arc(index*(this.C.width/this.MAX_DATA_LENGTH), 100-item,2, 0, 2 * Math.PI);      // End point
      this.CTX.fill();
      this.CTX.strokeStyle = colors[0];
    })


    this.CTX.beginPath();
    this.CTX.strokeStyle = "grey";
    this.CTX.moveTo(0,50);
    this.CTX.lineTo(800,50);
    this.CTX.stroke();
  }

  smooth(dataArray, f, t) {
    //f = 0, will be straight line
    //t suppose to be 1, but changing the value can control the smoothness too
    if (typeof(f) == 'undefined') f = 0.3;
    if (typeof(t) == 'undefined') t = 0.6;

    let points = [];
    dataArray.forEach((val, index)=>{
      points.push({
        "x": index * 40,
        "y": val
      })
    })

    this.CTX.clearRect(0, 0, this.C.width, this.C.height);

    this.CTX.beginPath();
    this.CTX.moveTo(points[0].x,this.MAX_DATA_Y- points[0].y);
    this.CTX.lineWidth = 2;
    this.CTX.strokeStyle = "blue";

    let m = 0;
    let dx1 = 0;
    let dy1 = 0;
    let dx2 = 0;
    let dy2 = 0;

    let preP = points[0];
    for (let i = 1; i < points.length; i++) {
      var curP = points[i];
      let nexP = points[i + 1];
      if (nexP) {
        m = this.gradient(preP, nexP);
        dx2 = (nexP.x - curP.x) * -f;
        dy2 = dx2 * m * t;
      } else {
        dx2 = 0;
        dy2 = 0;
      }
      this.CTX.bezierCurveTo(preP.x - dx1, this.MAX_DATA_Y-preP.y - dy1, curP.x + dx2, this.MAX_DATA_Y-curP.y + dy2, curP.x,this.MAX_DATA_Y-curP.y);
      this.CTX.stroke();

      this.CTX.beginPath();
      this.CTX.arc( curP.x, this.MAX_DATA_Y-curP.y, 2, 0, 2 * Math.PI);      // End point
      this.CTX.fill();

      this.CTX.font = '10px serif';
      this.CTX.fillText(curP.y, curP.x, this.MAX_DATA_Y-curP.y-5);

      dx1 = dx2;
      dy1 = dy2;
      preP = curP;
    }
    this.CTX.beginPath();
    this.CTX.strokeStyle = "grey";
    this.CTX.moveTo(0,50);
    this.CTX.lineTo(800,50);
    this. CTX.stroke();

  }

}
customElements.define('jh-chart', JHChart);  
/* ==JJCalendar.640.class================ */

/**
 * @classdesc 챠트 컴포넌트관리를 위한 클래스
 */
class JJCalendar extends JJElement {
  /**
   * @desc 기본 옵션값을 반환한다.
   * @return {Object} - 기본 옵션값
   * @example -
   */
  _defaultOption() {

    return {
      "require": ['fullcalendar'],
      "fullCalendar":{
        "plugins": [ 'interaction', 'dayGrid', 'timeGrid' ],
        "defaultView": 'dayGridMonth',
        "locale": "ko",
        "width": this.dataset.width||this.offsetWidth,
        "height": this.dataset.height || this.offsetHeight,
        "editable": false,
        "droppable": false,
        "selectable": true,
        "weekNumbers": false,
        "header": {
          "left": 'prev,next today',
          "center": 'title',
          "right": 'XXdayGridMonth,XXtimeGridWeek,XXtimeGridDay'
        },
        "dateClick": (calEvent, jsEvent, view)=>{
          this._onDateClick(calEvent, jsEvent, view);
        },
        "dayCellDidMount": (info)=>{              
          console.log(info);
          var day = moment(info.date).format('DD') // custom the text for example

          // hide the original one
          var originElement = info.el.querySelectorAll(".fc-daygrid-day-number")
          originElement.forEach(e => e.classList.add("d-none")  ); 

          // insert new text
          var targetElement = info.el.querySelectorAll(".fc-daygrid-day-top");
          targetElement.forEach(e => e.innerHTML = day );
        }
      },
      version: '640'
    };
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @param {String} - 챠트유형
   * @example -
   */
  _render(type) {
    type = type || this.options.type;
    this.requirePromise.then(() => {

      this.calendar = new FullCalendar.Calendar(this, this.options.fullCalendar) 
      this.calendar.render();

    });
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {  
  }

  _onDateClick(calEvent, jsEvent, view){
    this.dispatchEvent(new CustomEvent("dateClick", {
      "detail": {
        "calEvent":calEvent,
        "jsEvent":jsEvent,
        "view":view
      }
    }));
  }
  /**
   * @desc 엘리먼트를 삭제한다.
   * @example -
   */
  _destroy() {
    this.calendar.destroy();
  }

}

customElements.define('jj-calendar', JJCalendar);
/* ==JJGantChart.640.class================ */
class JJGanttchart extends JJElement {

  _defaultOption() {

    let toDay = (new Date()).$toFormat("yyyy-MM-dd");
    return {
      "require": ['vis'],
      "visTimeline":{
        timeAxis: {
          scale: 'hour',
          step: 1
        },
        min: new Date(toDay+"T08:00:00.000"), //new Date(2021, 6, 1), // lower limit of visible range
        max: new Date(toDay+"T19:00:00.000"), //new Date(2021, 6, 32), // upper limit of visible range
        //zoomMin: 1000 * 60 * 60 * 24, // one day in milliseconds
        //zoomMax: 1000 * 60 * 60 * 24 * 31 * 3, // about three months in milliseconds
        //width: 1100,
        locale: "ko",
        stack: true,
        start: new Date(toDay+"T08:00:00.000"),
        end: new Date(toDay+"T19:00:00.000"), //new Date(1000 * 60 * 60 * 24 + new Date().valueOf()),
        editable: {
          add: true,
          remove: false,
          updateGroup: false,
          updateTime: false,
          overrideItems: false,
        },
        zoomable: false,
        clickToUse: true,
        margin: {
          item: 10, // minimal margin between items
          axis: 5, // minimal margin between items and the axis
        },
        orientation: "top"
      },
      version: '640'
    };
  }  

  _render() {
    this.requirePromise.then(() => {    

      this.timeline = new vis.Timeline(this, null, this.options.visTimeline);

      this._setDemo();

      return this.timeline;
    })

  }

  _setEvent() {
    this.requirePromise.then(() => {        
      this.timeline.on('click', properties=>{
        //alert('selected items: ' + properties.items);
        this.dispatchEvent(new CustomEvent("JJGanttchartClick", {
          detail: properties,
          bubbles: true
        }));
      });
      this.timeline.on('select', properties=>{
        //alert('selected items: ' + properties.items);
        this.dispatchEvent(new CustomEvent("JJGanttchartSelect", {
          detail: properties,
          bubbles: true
        }));

      });
    });
  }

  _setDemo(){
    var groups = new vis.DataSet();

    groups.add([
      {
        id: 1,
        content: "A대학교",
        nestedGroups: [11, 12, 13],
      },
      {
        id: 2,
        content: "B대학교",
        //       visible: false,
      },
      {
        id: 3,
        content: "C대학교",
        nestedGroups: [14],
        showNested: false,
      },
      {
        id: 4,
        content: "D기관",
      },
    ]);

    groups.add([
      {
        id: 11,
        content: "studio1",
      },
      {
        id: 12,
        content: "studio2",
      },
      {
        id: 13,
        content: "VR room",
      },
      {
        id: 14,
        content: "X class",
      },
    ]);

    // create items
    // item = 예약건
    //var items = new vis.DataSet();

    var items = new vis.DataSet([
      {
        id:1,
        group: 11,
        start: new Date('2021-07-22 15:00'),
        end: new Date('2021-07-22 18:00'),  // end is optional
        content: "예약 완료",
        className: "booked",
        // Optional: fields 'id', 'type', 'group', 'className', 'style'
      },
      {
        id:2,
        group: 12,
        start: new Date('2021-07-22 12:00'),
        end: new Date('2021-07-22 24:00'),  // end is optional
        content: "예약 불가",
        className: "impossible",
        // Optional: fields 'id', 'type', 'group', 'className', 'style'
      },
      {
        id:3,
        group: 13,
        start: new Date('2021-07-22 11:00'),
        end: new Date('2021-07-22 12:00'),  // end is optional
        content: "승인 대기중",
        className: "waiting",
        // Optional: fields 'id', 'type', 'group', 'className', 'style'
      },
      {
        id:4,
        group: 14,
        start: new Date('2021-07-22 13:00'),
        end: new Date('2021-07-22 18:00'),  // end is optional
        content: "승인 대기중",
        className: "waiting",
        // Optional: fields 'id', 'type', 'group', 'className', 'style'
      },
      {
        id:5,
        group: 11,
        start: new Date('2021-07-22 13:00'),
        end: new Date('2021-07-22 15:00'),  // end is optional
        content: "예약 완료",
        className: "booked",
        // Optional: fields 'id', 'type', 'group', 'className', 'style'
      },
      // more items...
    ]);

    this.timeline.setGroups(groups);
    this.timeline.setItems(items);

  }

  // 메소드
  setGroups(groupData){
    this.timeline.setGroups(new vis.DataSet(groupData));
  }
  // 메소드
  setItems(itemData){
    this.timeline.setItems(new vis.DataSet(itemData));
  }
  // 메소드
  deleteItem(itemId){
    this.timeline.removeCustomTime(itemId);
  }
  // 메소드
  setWindow(from,to){
    this.timeline.setWindow(from,to);
  }
  setDate(date){
    let toDay = (date).$toFormat("yyyy-MM-dd");
    this.timeline.setOptions({
      min: new Date(toDay+"T08:00:00.000"), //new Date(2021, 6, 1), // lower limit of visible range
      max: new Date(toDay+"T19:00:00.000"), //new Date(2021, 6, 32), // upper limit of visible range
      start: new Date(toDay+"T08:00:00.000"),
      end: new Date(toDay+"T19:00:00.000") //new Date(1000 * 60 * 60 * 24 + new Date().valueOf()),
    });

  }
}
customElements.define('jj-ganttchart', JJGanttchart);
/* ==webKitCheck.640.class================ */
/* ==HMIComp.710.pkg.deploy================ */
/* ==JJHmiDiagram.640.class================ */
/**
 * @classdesc HMI 다이어그램 클래스
 */
class JJHmiDiagram extends JJElement {

  /**
   * https://docs.jsplumbtoolkit.com/community/current/index.html
   * https://jsplumbtoolkit.com/community
   */
  
  /**
   * @desc 추적대상 어튜리뷰트를 설정
   * @example -
   */   
  static get observedAttributes() {
    return [""];
  }	  


  /**
   * @desc 기본옵션을 생성
   * @example -
   */  
  _defaultOption(){
    return {
      "isContextMenu": true,
      "require":["jsplumb.2.12.5"],
      "mode": "studio"
    }
  }

  /**
   * @desc HTML을 생성
   * @example -
   */ 
  _render(){
    this.$empty();

    if(this.options.mode == "studio"){
      this.setAttribute("tabindex", -1);
      this.classList.add("hmi-editor");
      this.sizeBox = document.createElement('jj-resize-box');
      this.sizeBox.hidden = true;
      this.appendChild(this.sizeBox);
    }    

    this.requirePromise.then(()=>{
      jsPlumb.ready(()=>{
        this.instance = jsPlumb.getInstance({
          Container: this,
          Endpoint: ["Dot", {radius: 5}],
          Connector:"StateMachine",
          HoverPaintStyle: {stroke: "#1e8151", strokeWidth: 5 },
          ConnectionOverlays: [
            [ "Arrow", {
              location: 1,
              id: "arrow",
              length: 14,
              foldback: 0.8
            } ],
            //[ "Label", { label: "AppLink", id: "label", cssClass: "aLabel" }]
          ]
        });

        this.instance.registerConnectionType("basic", { anchor:"Continuous", connector:"StateMachine" });

        if(this.options.mode == "studio"){
          this.instance.bind("click", c=>{
            this.selectNode(c);
          });
          // 컨넥션연결을 위한 드래그 시작시
          this.instance.bind("beforeDrag", info=>{
            this.sizeBox.hidden = true;
          });   
          this.instance.bind("mousedown", info=>{
            this.sizeBox.hidden = true;
          });   
          // 컨넥션 연결시 종료시
          this.instance.bind("connection", info=>{
            //info.connection.getOverlay("label").setLabel(info.connection.id);
          });   
          this.instance.on(this, "click", ".node-collapse", (e)=>{
            var g = e.target.parentNode.getAttribute("group"), 
                collapsed =  this.instance.hasClass(e.target.parentNode, "collapsed");

            this.instance[collapsed ? "removeClass" : "addClass"](e.target.parentNode, "collapsed");
            this.instance[collapsed ? "expandGroup" : "collapseGroup"](g);
          });
        }
        //this.innerItemInit();
      });

    })    

  }


  /**
   * @desc 이벤트를 설정
   * @example -
   */  
  _setEvent(){
    this._changeEvent = true;
    // 개발관련이벤트는 모드를 파악하여 처리함
    if(this.options.mode != "studio") return;

    this.addEventListener("input", e=>{
    	this._changeedit();
    });
    // 다중선택기능은 향후에 검토하기로함    
    //     new JJSelector(this, {
    //       "item":  ".w",
    //       "markClass": "mark"
    //     });     

    this.addEventListener("paste", e=>{
      e.preventDefault();
      if(e.clipboardData.files.length) 	{

        Jinja.ajax.imageUpload(e.clipboardData.files)
          .then(result=>{
          let file = result.rows[0];
          //this.newImage(e.offsetX, e.offsetY, file.path+file.fileId);        
          this.newHmiElement(e.offsetX, e.offsetY, "jj-hmi-image", {
            "imageUri": file.path+file.fileId
          });  

        });
      }
    });    

    this.addEventListener("drop", e=>{
      e.preventDefault();

      let html = e.dataTransfer.getData("text/html");
      let diagramType = e.dataTransfer.getData("diagram-type");
      let dropObject = e.dataTransfer.getData("objtype/application");
      let dropData = e.dataTransfer.getData("objdata/application");
      let hmiElement = e.dataTransfer.getData("hmi-element");

      if (diagramType=="group"){
        this.newGroup(e.offsetX, e.offsetY, html);  
      } else if(diagramType=="node" && hmiElement) {
        this.newHmiElement(e.offsetX, e.offsetY, hmiElement, {});  
      } else {
        this.newHmiElement(e.offsetX, e.offsetY, "jj-hmi-html", {
          "html": html
        });  
      }
    })

    this.addEventListener("dragover", e=>{
      e.preventDefault();
    });

    this.addEventListener("click", e=>{
      //e.preventDefault();
      if(e.target.matches(`.w, .w *`)){
        this.selectNode(e.target.$closest(`.w`));
      } else if(e.target.matches(`.group-container, .group-container *`)){
        this.selectNode(e.target.$closest(`.group-container`));
      } else if(Object.is(this, e.target)) {
        // 빈공간을 선택하면 취소처리함
        this.clearSelectNode();
      }
    });

    this.addEventListener("dblclick", e=>{
      if(e.target.matches(`.w, .w *`)){
        this.optionNode(e.target.$closest(`.w`));
      }
    });

    this.addEventListener("keydown", e=>{
      let keyMap =  Jinja.global.getEventKeyMap(e);

      if (["Delete",'Up', 'Down', 'Left', 'Right',
           'Shift-Up', 'Shift-Down', 'Shift-Left', 'Shift-Right'].includes(keyMap)){
          if (this.selectEl){
            if (!this.selectEl.hasAttribute("contentEditable")){
        e.preventDefault();
        e.stopPropagation();
            }
          }
      }
      switch(keyMap){
        case "F2":
          if (this.selectEl){
            if (this.selectEl.hasAttribute("contentEditable")){
              this.selectEl.removeAttribute("contentEditable");
               this.selectEl.classList.remove("no-move");
            } else {
               this.selectEl.setAttribute("contentEditable","true");
              this.selectEl.classList.add("no-move");
              this.selectEl.focus();
            }
          }
          break;
        case "Delete":
          this.deleteNode(e);
          break;
        case "Up":
        case "Down":
        case "Left":
        case "Right":
          this._keyMove(keyMap);
          break;
        case "Shift-Up":
        case "Shift-Down":
        case "Shift-Left":
        case "Shift-Right":
          this._keyResize(keyMap);
          break;

        default:
          break;

      }      
    });

    this.addEventListener("resize", e=>{
      e.preventDefault();
      e.stopPropagation();
      this.selectEl.hmiEl.resize();
      this.instance.repaintEverything();
      this._changeedit();

    });

    if (this.options.isContextMenu) {
      this.addEventListener('contextmenu', this._onContextmenu);
      this.addEventListener('jjContextMenuclick', this._onContextClick);
    }




    //     this.addEventListener("mousedown", e=>{
    //       if(e.button === 0 && !e.target.matches(`jj-resize-box *`)){
    //        this.sizeBox.hidden = true;
    //       }
    //     });

  }

  /**
   * @desc 변경이벤트를 발생시킨다
   * @param {el} - 엘러먼트
   * @example -
   */
  _changeedit(el){
    if(this._changeEvent){
      this.dispatchEvent(
        new CustomEvent('changeedit', {
          detail: {
            mode: "hmi",
            el: (el||this.selectEl),
          },
          bubbles: true
        })
      );
    }
  }



  /**
   * @desc 컨텍스트메뉴 생성 이벤트를 처리한다.
   * @param {Object} - 이벤트
   * @example -
   */
  _onContextmenu(event) {
    if (event.target.matches(`.w, .w *`)) {
      event.preventDefault();
      this.selectNode(event.target.$closest(`.w`));

      Jinja.context.render(this, event, [
        { command: 'copy', label: '복사', icon: 'fa-copy' },
        { label: 'divider' },
        { command: 'delete', label: '삭제', icon: 'fa-remove' },
        { label: 'divider' },
        { command: 'info', label: '속성', icon: 'fa-gear' }
      ]);
    }
  }

  /**
   * @desc 컨텍스트메뉴 클릭 이벤트를 처리한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onContextClick(event) {
    /**
     * 스튜디오의 탭 컨텍스트가 동작할수 있음
     */
    event.preventDefault();
    event.stopImmediatePropagation(); /* 현재 테그의 이벤트도 중지하고 상위전달도 중지 */
    event.stopPropagation(); /* 이벤트 상위전파 취소 */

    let contextMenu = event.detail.menu;

    switch (contextMenu) {
      case 'copy':
        this.copyNode();

        break;
      case 'delete':
        this.deleteNode();

        break;
      case 'info':
        this.optionNode();

        break;
    }
  }

  /**
   * @desc 선택된 노드표시를 제거한다
   * @example -
   */
  clearSelectNode(){
    if (this.selectEl){
      if (this.selectEl.canvas){
        this.selectEl.canvas.classList.remove("selected");
      } 
      else if(this.selectEl.classList) {
        this.selectEl.classList.remove("selected");
      }

      this.selectEl = null;

    }

    this.sizeBox.hidden = true;

  }

  /**
   * @desc 객체에 선택처리를 실시한다
   * @example -
   */
  selectNode(obj, e){


    this.clearSelectNode();
    this.selectEl = obj;

    if (obj.hasAttribute("contentEditable")){
      return;
    }   
    if(obj.matches('.no-move')) return;


    if (obj.canvas){
      obj.canvas.classList.add("selected");
    } 
    else if(obj.classList) {
      obj.classList.add("selected");
    }

    this.sizeBox.lockElement(this.selectEl);
    this.sizeBox.hidden = false;

    this.selectEl.dispatchEvent(new CustomEvent('selected', {
      "detail": {
        "editor": this,
        "node": this.selectEl.firstElementChild
      },      
      bubbles: true
    }));      
    this.focus();

  }

  /**
   * @desc 선택된 노드객체를 제거한다
   * @example -
   */  
  deleteNode(obj){
    if(!this.selectEl){
      alert("선택된 항목이 없습니다");
      return;
    }

     if (this.selectEl.hasAttribute("contentEditable")) return;
       
    Jinja.confirm.delete("Connection delete ?")
      .then(()=>{

      if (this.selectEl.canvas){
        this.instance.deleteConnection(this.selectEl);
      } else if(this.selectEl.matches('.group-container')) {
        // .w에 연결된 Connection을 먼저 제거한다
        var g = this.selectEl.getAttribute("group");
        this.instance.removeGroup(g, true);

      } else if(this.selectEl.matches('.w')) {
        // .w에 연결된 Connection을 먼저 제거한다
        this.instance.getConnections().forEach(conn=>{
          if (Object.is(this.selectEl,conn.source) || Object.is(this.selectEl, conn.target)){
            this.instance.deleteConnection(conn);
          }
        });
        this.selectEl.remove();
      }
      this._changeedit();
      this.clearSelectNode()
    })
      .catch(()=>{});
  }

  /**
   * @desc 선택된 노드객체의 옵션을 표시한다
   * @example -
   */    
  optionNode(obj){
    if(!this.selectEl){
      alert("선택된 항목이 없습니다");
      return;
    }
    this.selectEl.hmiEl.showOptionForm();
  }


  /**
   * @desc 표시순서 바꾸기
   * @example -
   */  
  zIndex(p){

    if(this.selectEl){
      let zIndex = parseInt(this.selectEl.style.zIndex||0);

      if (p=="up"){
        zIndex++;
      } else {
        zIndex--;
      }

      this.selectEl.style.zIndex =  zIndex; 
      this._changeedit();
    }
  }

  /**
   * @desc 키보드 이벤트 이동동작을 정의한다
   * @param {String} - 방향
   * @example -
   */    
  _keyMove(arrrow){
    if(!this.selectEl) return;
    if (this.selectEl.hasAttribute("contentEditable")) return;
    switch(arrrow){
      case 'Up':
        this.selectEl.style.top = `${this.selectEl.offsetTop-1}px`;
        break;
      case 'Down':
        this.selectEl.style.top = `${this.selectEl.offsetTop+1}px`;
        break;
      case 'Left':
        this.selectEl.style.left = `${this.selectEl.offsetLeft-1}px`;
        break;
      case 'Right':
        this.selectEl.style.left = `${this.selectEl.offsetLeft+1}px`;
        break;
    }
    this.instance.repaintEverything();
    this.sizeBox.lockElement(this.selectEl);
    this._changeedit();

  }  

  /**
   * @desc 키보드 이벤트 크기이동을 정의한다
   * @param {String} - 방향
   * @example -
   */    
  _keyResize(arrrow){
    if(!this.selectEl) return;
     if (this.selectEl.hasAttribute("contentEditable")) return;
    switch(arrrow){
      case 'Shift-Up':
        this.selectEl.style.height = `${this.selectEl.offsetHeight-1}px`;
        break;
      case 'Shift-Down':
        this.selectEl.style.height = `${this.selectEl.offsetHeight+1}px`;
        break;
      case 'Shift-Left':
        this.selectEl.style.width = `${this.selectEl.offsetWidth-1}px`;
        break;
      case 'Shift-Right':
        this.selectEl.style.width = `${this.selectEl.offsetWidth+1}px`;
        break;
    }
    this.instance.repaintEverything();
    this.sizeBox.lockElement(this.selectEl);
    this._changeedit();

  }  

  /**
   * @desc 위쪽 정렬을 맞춘다
   * @param {String} - 방향
   * @example -
   */ 
  align(arrrow){
    let top;
    this.querySelectorAll(`.w.mark`).forEach((el,index)=>{
      top = index?Math.min(top, el.offsetTop):el.offsetTop;
    })
    this.querySelectorAll(`.w.mark`).forEach((el,index)=>{
      el.style.top = top+'px'
    })
    this._changeedit();
  }

  /**
   * @desc 객체를 이동하지 못하도록 고정한다
   * @param {Object} - 노드객체
   * @example -
   */ 
  noMove(el){
		let terget = el||this.selectEl;
    
    if(terget){
      terget.classList.toggle("no-move");
      if (terget==this.selectEl){
      	this.clearSelectNode();
      }
      this._changeedit();
    }
  }

  /**
   * @desc 선택된 노드객체의 이미지를 변경한다
   * @example -
   */ 
  changeImage(){
    JJFormModal.open("sysImage.640.uc")
      .then(result=>{
      
      if (this.selectEl.dataset.hmiElement){
        this.selectEl.hmiEl.setOptions({
          "imageUri": result.srcUrl 
        })
        this._changeedit();
      }
    })  
      .catch(ex=>{});
  }

//   print(){
//     Jinja.global.capture(this)
//       .then(img =>{
//       JJHee.open("getCapture.610.uc",{
//         "search":{
//           "image": img
//         },  
//         "position": {
//           "width": "80%"
//         },
//         isModal: true,
//         isMoveable: true
//       })
//         .then(result=>{
//         //hee.text.value = result.text;
//       })
//         .catch(ex=>{});
//     })
//   }

  /**
   * @desc 지정된 위치에 노드객체를 생성한다
   * @param {Int} - X
   * @param {Int} - Y
   * @param {Object} - hmiElement
   * @param {Object} - 생성옵션
   * @example -
   */ 
  newHmiElement(x, y, hmiElement, options) {
    let id = Jinja.global.uuid(); //jsPlumbUtil.uuid();

    let d = document.createElement("div");  
    d.classList.add("w");
    d.setAttribute("wid", id);
    d.style.left = `${x}px`;
    d.style.top = `${y}px`;
    d.dataset.hmiElement = hmiElement;
    d.hmiEl = document.createElement(d.dataset.hmiElement);
    d.hmiEl.setOptions(options||{});
    d.appendChild(d.hmiEl);

    this.instance.getContainer().appendChild(d);



    if(d.hmiEl.isEP){
      let ep = document.createElement("div");
      ep.classList.add('ep');
      d.appendChild(ep);
      this.initNode(d);
    } else {
      new JJMoveable(d, {
        handles: ['e', 'n', 's'],
        handleEl: '*',
        cancelEl: ".no-move, .no-move *"
      });

    }

    this._changeedit();

    return d;

  }    

  /**
   * @desc 노드객체를 초기화한다
   * @param {Object} - hmiElement
   * @example -
   */ 
  initNode(el) {

    if(this.options.mode == "studio"){
      this.instance.draggable(el,{
        filter:".no-move, .no-move *  , .resizer, .list-group *,.resizer, .resizer * ",
        grid:[5,5]
      });
      this._setMarker(el);
    } else {
      this._setMarker(el);  
    }		

    return el;
  }

  /**
   * @desc 노드객체를 마크표시한다
   * @param {Object} - hmiElement
   * @example -
   */ 
  _setMarker(el){
    this.instance.makeSource(el, {
      filter: ".ep",
      anchor: "Continuous",
      connectorStyle: { stroke: "#5c96bc", strokeWidth: 2, outlineStroke: "transparent", outlineWidth: 4 },
      connectionType:"basic",
      extract:{
        "action":"the-action"
      },
      maxConnections: 12,
      onMaxConnections: (info, e)=>{
        alert("Maximum connections (" + info.maxConnections + ") reached");
      }
    });

    this.instance.makeTarget(el, {
      dropOptions: { hoverClass: "dragHover" },
      anchor: "Continuous",
      allowLoopback: true
    });

  }

  /**
   * @desc 그룹객체인경우 하위 노드객체를 초기화한다
   * @example -
   */ 
  innerItemInit(){
    this.querySelectorAll("[group]").forEach(el=>this.initGroup(el));
    this.querySelectorAll(".w").forEach(el=>{
      if(!el.matches('[group] .w')){
        this.initNode(el)
      }
    })
  }

  /**
   * @desc Drop된 객체로 이미지를 노드객체를 생서한다
   * @param {Object} - Drop Fiels
   * @example -
   */   
  attchImages(files){
    for (var i = 0; i < files.length; i++) {
      let row = {
        "NAME": files[i].name,
        "SIZE": files[i].size,
        "TYPE": files[i].type,
        "URI":"",
        "FILEOBJ": files[i]
      };

      // react로 파일표시됨	
      let lens = this.options.data.images.push(row);
      var reader = new FileReader();
      reader.addEventListener("load", readEvent=>{
        this.options.data.images[lens-1].URI = readEvent.target.result;
      });
      reader.readAsDataURL(files[i]);        
    }

  }  


  /**
   * @desc 빈페이지 만들기를 물어본다
   * @param {Bool} - 질문여부
   * @example -
   */  
  clear(isConfirm){
    if (isConfirm){
      this._clear();
    } else {
      Jinja.confirm.delete("Diagram All Clear ?")
        .then(()=>this._clear())
        .catch(()=>{});
    }	
  }
  
  /**
   * @desc 빈페이지로 만든다
   * @example -
   */  
  _clear(){
    /**
     * 그룹요소를 먼저 제거하고 다음요소를 제거해야 한다
     */
    this.querySelectorAll("[group]").forEach(el=>{
      var g = el.getAttribute("group");
      this.instance.removeGroup(g, true);
    });

    //this.instance.clear();
    this.instance.deleteEveryConnection();
    this.querySelectorAll(".w").forEach(el=>el.remove());

    this._changeedit();

  }


  /**
   * @desc 선택된 노드를 복사한다
   * @example -
   */  
  copyNode(){
    if(!this.selectEl){
      alert("선택된 항목이 없습니다");
      return;
    }

    let _newNode = this.newHmiElement(this.selectEl.offsetLeft+50,
                                      this.selectEl.offsetTop+50, 
                                      this.selectEl.dataset.hmiElement,
                                      this.selectEl.hmiEl.getOptions());


    _newNode.setAttribute("style", this.selectEl.getAttribute('style'));
    _newNode.setAttribute("class", this.selectEl.getAttribute('class'));
    _newNode.style.top = (this.selectEl.offsetTop+50)+'px';
    _newNode.style.left = (this.selectEl.offsetLeft+50)+'px';

    this.selectNode(_newNode);
  }


  /**
   * @desc 노드객체의 정보를 배열로 리턴한다
   * @example -
   */  
  getNodes(){
    let nodes = [];
    this.querySelectorAll(".w").forEach(el=>{
      let node = {
        "wid": el.getAttribute("wid"),
        "style": el.getAttribute("style"),
        "position": {
          x: el.style.left,
          y: el.style.top
        },
        "hmiElement": el.dataset.hmiElement,
        "w": el,
        "el": el.hmiEl
      };

      nodes.push(node);

    });    
    
    return nodes;
  }
  
  /**
   * @desc 노드객체의 정보를 JSON으로 리턴한다
   * @example -
   */  
  toJSON(){
    let nodes = [];
    this.querySelectorAll(".w").forEach(el=>{
      let node = {
        "wid": el.getAttribute("wid"),
        "style": el.getAttribute("style"),
        "noMove": el.matches('.no-move'),
        "position": {
          x: el.style.left,
          y: el.style.top
        },
        "hmiElement": el.dataset.hmiElement,
        "options": el.hmiEl.getOptions()
      };

      nodes.push(node);

    });    

    let connectors = [];
    this.instance.getConnections().forEach(conn=>{
      connectors.push({
        "source": conn.source.getAttribute("wid"),
        "target": conn.target.getAttribute("wid")
      })
    });

    return {
      "nodes": nodes,
      "connectors": connectors
    }
  }

  /**
   * @desc 노드정보 JSON으로 노드 객체를 만든다
   * @example -
   */  
  fromJSON(jsonData){
    return this.requirePromise.then(()=>{
      this._changeEvent = false;

      this._fromJSON(jsonData);
      this._changeEvent = true;

    })
  }  

  _fromJSON(jsonData){
    this.clear(true);

    let defaultBody = {
      "groups": [],
      "nodes": [],
      "connectors": []
    };

    let body =  Object.assign(defaultBody, jsonData);

    body.nodes.forEach(node=>{
      var nodeEl = document.createElement("div");
      nodeEl.className = "w";
      nodeEl.setAttribute("wid", node.wid);
      nodeEl.setAttribute("style", node.style);
		
      if(node.noMove){
        nodeEl.classList.add('no-move');
      }
      
      nodeEl.dataset.hmiElement = node.hmiElement;
      nodeEl.hmiEl = document.createElement(node.hmiElement);
      nodeEl.appendChild(nodeEl.hmiEl);

      this.instance.getContainer().appendChild(nodeEl);
      nodeEl.hmiEl.setOptions(node.options);

      if(nodeEl.hmiEl.isEP){
        let ep = document.createElement("div");
        ep.classList.add('ep');
        nodeEl.appendChild(ep);
        this.initNode(nodeEl);
      } else {
        new JJMoveable(nodeEl, {
          handles: ['e', 'n', 's'],
          handleEl: '*',
          cancelEl: ".no-move, .no-move *"
        });

      }

    })

    body.connectors.forEach(conn=>{
      this.instance.connect({ 
        source: this.querySelector(`[wid="${conn.source}"]`), 
        target: this.querySelector(`[wid="${conn.target}"]`), type:"basic" });
    });

  }

}

customElements.define('jj-hmi-diagram', JJHmiDiagram);	/* ==JJHmiIcon.640.class================ */
/**
 * @classdesc HMI 아이콘아이콘 클래스
 */
class JJHmiIcon extends JJElement {

  /**
   * @desc 값을 리턴한다
   * @example -
   */
  get value() {
    return this._value;
  }
  /**
   * @desc 값을 설정한다
   * @example -
   */   
  set value(v) {
    this._value = v;
    this._showValue();
  }    

  /**
   * @desc isEP여부를 조회한다
   * @example -
   */   
  get isEP(){
    return true;
  }

  /**
   * @desc 기본옵션을 생성
   * @example -
   */    
  _defaultOption() {
    return {
      "imageUri": "https://cdn.appspeed.net:8444/repository/systemImages/hmi/pan2.svg",
      "activeUri": "https://cdn.appspeed.net:8444/repository/systemImages/hmi/etcp.svg",
      "name": "이미지",
      "class": "hmi-tag",
      "actionClass": "",
      "filterClass": "",
      "commandType": "click",
      "moveable": false,
      "readonly": true,
      "attrUrl":"IconAttr.uc",
      "tagId":"",
      "tagValue":0,
      // 논리,숫자,문자
      "valueType":"논리", 
      "jj-id": "",
      "jj-command": "",
      "delayTime": 200,
      "version": "640"
    };
  }  

  /**
   * @desc HTML을 생성
   * @example -
   */ 
  _render() {
    this.$empty();
    this.classList.add('jj-hmi');
    this.classList.add(this.options.class);

    this.img = document.createElement('img');
    this.appendChild(this.img);
    this._showValue();
  }  

  /**
   * @desc 이벤트를 설정
   * @example -
   */  
  _setEvent() {
    if(this.options.moveable){
      this._oMover = new JJMoveable(this, {
        handles: ['e', 'n', 's'],
        handleEl: '*'
      });
    }

    this.addEventListener("click", e => {
      if(!this.options.readonly){
        if(this.options.commandType == "toggle"){
          Jinja.hmiSSE.send(this.options.tagId, !this._value);
        } else {
          Jinja.hmiSSE.send(this.options.tagId, this.options.tagValue);
        }

      }
    })
  }  

  /**
   * @desc value에 맞는 동작을 실행
   * @example -
   */  
  _showValue(){
    this.setAttribute('name', this.options.name);
    if(this.options.jjId) this.setAttribute('jj-id', this.options.jjId);
    if(this.options.jjCommand) this.setAttribute('jj-command', this.options.jjCommand);

    if(this.options.valueType == "논리"){
      if (this._value=="0") this._value = 0;
      if (this._value=="false") this._value = 0;

      this._value = this._value?1:0;
    }
    if(this.options.readonly){
      this.setAttribute('readonly', 'readonly');
    } else {
      this.removeAttribute('readonly');
    }

    if(this.img){
      this.img.setAttribute('class', this.options.class);


      if (!this._value || this._value == "0"  ){
        this.img.src = this.options.imageUri;
        if(this.options.actionClass)
          this.img.classList.remove(this.options.actionClass);
        if(this.options.filterClass)
          this.img.classList.remove(this.options.filterClass);
      } else {
        this.img.src = this.options.activeUri;
        if(this.options.actionClass)
          this.img.classList.add(this.options.actionClass);
        if(this.options.filterClass)
          this.img.classList.add(this.options.filterClass);
      }

      if(this.options.actionClass == "rotate" &&
         this.options.valueType == "숫자"){
        this.img.classList.add(this.options.actionClass);
        this.img.style.transform = `rotate(${Math.min(90,this._value) -45}deg)`;        
      }


    }
  }

  /**
   * @desc 객체 초기화
   * @example -
   */    
  init(options){
    Object.assign(this.options, options);
    this._showValue();
  }

  /**
   * @desc 옵션정볼르 리턴한다
   * @example -
   */    
  getOptions(){
    return this.options;
  }

  /**
   * @desc 옵션정보를 설정한다
   * @param {Object} - 옵션
   * @example -
   */    
  setOptions(options){
    Object.assign(this.options, options);

    Jinja.hmiSSE.tagGet(this.options.tagId, this);


    this._showValue();
    this.dispatchEvent(
      new CustomEvent('input', {
        detail: {
          el: this,
        },
        bubbles: true
      })
    );

    return this.options;
  }

  /**
   * @desc 옵션정보 설정폼을 호출한다
   * @param {Object} - 옵션
   * @example -
   */    
  showOptionForm(){
    JJFormModal.open(this.options.attrUrl, this.options)
      .then(options=>this.setOptions(options))
      .catch(err=>alert(err));  
  }

  /**
   * @desc 크기변경 실행동작을 설정한다
   * @example -
   */     
  resize(){
    // this._showValue();
  }  
}


customElements.define('jj-hmi-icon', JJHmiIcon);	
/* ==JJHmiDigital.640.class================ */
/**
 * @classdesc HMI 숫자표시기숫자표시기 클래스
 */ 
class JJHmiDigital extends JJHmiIcon {

  /**
   * @desc 기본옵션을 생성
   * @example -
   */    
  _defaultOption() {
    this._value = parseInt(this.innerText)||0; 
    return {
      "name": "숫자게이지",
      "class": "hmi-tag",
      "moveable": false,
      "tagId":"",
      "tagValue":"true",
      "attrUrl":"IconAttr.uc",
      "readonly": true,
      "valueType":"논리", 
      
      "step": 0.1,
      "jj-id": "",
      "jj-command": "",
      "intervalTime": 50,
      "version": "640"
    };
  }  

  /**
   * @desc HTML을 생성
   * @example -
   */   
  _render() {
    this.classList.add(this.options.class);

    this._showValue();
  }  

  /**
   * @desc 이벤트를 설정
   * @example -
   */ 
  _setEvent() {

    if(this.options.moveable){
      this._oMover = new JJMoveable(this, {
        handles: ['e', 'n', 's'],
        handleEl: '*'
      });
    }

    this.addEventListener("click", e => {
    })
  }  


  /**
   * @desc value에 맞는 동작을 실행
   * @example -
   */  
  _showValue(){

    this.setAttribute('name', this.options.name);

    this._value = parseFloat(this._value);
    if(this.options.jjId) this.setAttribute('jj-id', this.options.jjId);
    if(this.options.jjCommand) this.setAttribute('jj-command', this.options.jjCommand);

    let _val = 0;
    let _class="";

    if(this.options.class) _class += this.options.class+" ";

    if(this.options.fontSizeClass) _class += this.options.fontSizeClass+" ";
    if(this.options.fontClass) _class += this.options.fontClass+" ";
    this.setAttribute('class', _class);

    if(this.options.readonly){
      this.setAttribute('readonly', 'readonly');
    } else {
      this.removeAttribute('readonly');
    }
    
    this.innerText = _val;
    let tm1 = setInterval(e=>{
      //_val += parseInt((this._value * this.options.step));
      _val += parseInt((this._value * 0.1));
      this.innerText = _val.$toIntFormat();
      if(_val >= this._value){
        this.innerText = this._value.$toIntFormat();
        clearInterval(tm1)
      }
    }, 100);
    //    }, this.options.intervalTime);

  }


}


customElements.define('jj-hmi-digital', JJHmiDigital);	
/* ==JJHmiPad.640.class================ */
/**
 * @classdesc HMI Pad 클래스
 */
class JJHmiPad extends JJHmiIcon {

  /**
   * @desc 기본옵션을 생성
   * @example -
   */    
  _defaultOption() {
    this._value = { "x": 0, "y":0};
    return {
      "name": "패드",
      "class": "hmi-tag",
      "attrUrl":"IconAttr.uc",
      "tagId":"",
      "tagValue":12345,
      "readonly": false,
      "jj-id": "",
      "jj-command": "",
      "pointerClass": "fa-bug",
      "intervalTime": 10,
      "version": "640"
    };
  }  

  /**
   * @desc HTML을 생성
   * @example -
   */ 
  _render() {
    this.classList.add(this.options.class);
      
    let html = `
<table >
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
</table>
<i class="fa ${this.options.pointerClass} slider-pointer " aria-hidden="true"></i>
`;
    this.innerHTML = html;
    this.pointer = this.querySelector(`.slider-pointer`);   
    this._showValue();
  }  


  /**
   * @desc 이벤트를 설정
   * @example -
   */  
  _setEvent() {

    if(!this.options.readonly){
      
      new JJMoveable(this.pointer, {
        handles: ['e', 'n', 's'],
        handleEl: '*'
      });
      
			this.timer;
      
      this.pointer.addEventListener("JJMoveable.move", e=>{
        if(this.timer) {
          clearTimeout(this.timer);
          this.timer = null;
        }
        this.timer = setTimeout(()=>{
          this.pointer.left = e.detail.elLeft+'px';
          this.pointer.top = e.detail.elTop+'px';
          this._value = e.detail.value;
          Jinja.hmiSSE.send(this.options.tagId, this._value);
          this.dispatchEvent( new CustomEvent('input', {
              detail: {
                "value": this._value,
                "inner": e
              },
              bubbles: true      
          }));
          clearTimeout(this.timer);
          this.timer = null;
        }, this.options.intervalTime)
        
      })

      this.addEventListener("click", e => {
      })
    }
  }  


  /**
   * @desc value에 맞는 동작을 실행
   * @example -
   */  
  _showValue(){
    this.setAttribute('name', this.options.name);

    if(this.options.readonly && this.pointer){
      this.pointer.style.left = parseInt((this.offsetWidth-this.pointer.offsetWidth) * (this._value.x/100))+'px';
      this.pointer.style.top = parseInt((this.offsetHeight-this.pointer.offsetHeight) * (this._value.y/100))+'px';
    }
  }

 

}


customElements.define('jj-hmi-pad', JJHmiPad);	
/* ==JJHmiDevice.640.class================ */
/**
 * @classdesc HMI ICON 클래스
 */
class JJHmiDevice extends JJHmiIcon {
 
  /**
   * @desc 기본옵션을 생성
   * @example -
   */  
  _defaultOption() {
    return {
      "imageUri": "/repository/systemImages/hmi/aircon1.svg",
      "activeUri": "/repository/systemImages/hmi/aircon3.svg",
      "title": "목록",
      "class": "hmi-tag",
      "moveable": false,
      "tagId":"",
      "delayTime": 200,
      "version": "640"
    };
  }  

  /**
   * @desc HTML을 생성
   * @example -
   */  
  _render() {
    this.$empty();
    this.classList.add('jj-hmi');
    this.classList.add(this.options.class);

    this.img = document.createElement('img');
    this.appendChild(this.img);
    this._showValue();
  }  


  /**
   * @desc 이벤트를 설정
   * @example -
   */  
  _setEvent() {

    if(this.options.moveable){
      this._oMover = new JJMoveable(this, {
        handles: ['e', 'n', 's'],
        handleEl: '*'
      });
    }

    this.addEventListener("click", e => {
    })
  }  

  /**
   * @desc value에 맞는 동작을 실행
   * @example -
   */  
  _showValue(){
    if(this.img){
      if (this._value){
        this.img.src = this.options.activeUri;
      } else {
        this.img.src = this.options.imageUri;
      }
    }
  }

  /**
   * @desc 객체 초기화
   * @example -
   */  
  init(options){
    Object.assign(this.options, options);
    this._showValue();
  }



}


customElements.define('jj-hmi-device', JJHmiDevice);	
/* ==JJHmiImage.640.class================ */
/**
 * @classdesc HMI 이미지이미지 클래스
 */
class JJHmiImage extends JJHmiIcon {

  /**
   * @desc isEP여부를 조회한다
   * @example -
   */   
  get isEP(){
    return false;
  }
  
  /**
   * @desc 기본옵션을 생성
   * @example -
   */    
  _defaultOption() {
    return {
      "imageUri": "/repository/systemImages/plant/p4.png",
      "class": "hmi-tag",
      "moveable": false,
      "tagId":"",
      "version": "640"
    };
  }  
  
  /**
   * @desc HTML을 생성
   * @example -
   */ 
  _render() {
    this.$empty();
    this.classList.add(this.options.class);
    this.classList.add('jj-hmi');
	
    this._showValue();
  }  

  
  /**
   * @desc 이벤트를 설정
   * @example -
   */  
  _setEvent() {
    
		if(this.options.moveable){
      this._oMover = new JJMoveable(this, {
        handles: ['e', 'n', 's'],
        handleEl: '*'
      });
    }

    
    this.addEventListener("click", e => {
    })
  }  
  
  /**
   * @desc value에 맞는 동작을 실행
   * @example -
   */  
  _showValue(){
    this.style.backgroundImage=`url("${this.options.imageUri}")`;
  }
  
  /**
   * @desc 객체 초기화
   * @example -
   */    
  init(options){
    Object.assign(this.options, options);
    this._showValue();
  }
 
  /**
   * @desc 옵션정볼르 리턴한다
   * @example -
   */    
  getOptions(){
    return this.options;
  }
  
  /**
   * @desc 옵션정보를 설정한다
   * @param {Object} - 옵션
   * @example -
   */    
  setOptions(options){
    Object.assign(this.options, options);
  	this._showValue();
    return this.options;
  }
  
  
  
}


customElements.define('jj-hmi-image', JJHmiImage);	
/* ==JJHmiHtml.640.class================ */
/**
 * @classdesc HMI 일반 HTML을 랜더링하기 위한 컴포넌트
 */
class JJHmiHtml extends JJHmiIcon {

  /**
   * @desc 기본옵션을 생성
   * @example -
   */      
  _defaultOption() {
    return {
      "class": "hmi-tag",
      "html": "<label>Html을 넣으세요</label>",
      "moveable": false,
      "tagId":"",
      "version": "640"
    };
  }  

  /**
   * @desc HTML을 생성
   * @example -
   */   
  _render() {
    this.$empty();
    this.classList.add(this.options.class);
    this.classList.add('jj-hmi');
	
    this._showValue();
  }  

  
  /**
   * @desc 이벤트를 설정
   * @example -
   */ 
  _setEvent() {
    
		if(this.options.moveable){
      this._oMover = new JJMoveable(this, {
        handles: ['e', 'n', 's'],
        handleEl: '*'
      });
    }

    
    this.addEventListener("click", e => {
    })
  }  
  
  /**
   * @desc value에 맞는 동작을 실행
   * @example -
   */  
  _showValue(){
    this.$empty();
    this.innerHTML = this.options.html;
  }

  /**
   * @desc 객체 초기화
   * @example -
   */    
  init(options){
    Object.assign(this.options, options);
    this._showValue();
  }

  /**
   * @desc 옵션정볼르 리턴한다
   * @example -
   */   
  getOptions(options){
    return this.options;
  }
  
  /**
   * @desc 옵션정보를 설정한다
   * @param {Object} - 옵션
   * @example -
   */   
  setOptions(options){
    Object.assign(this.options, options);
  	this._showValue();
    return this.options;
  }
  
}


customElements.define('jj-hmi-html', JJHmiHtml);	
/* ==JJHmiLine.640.class================ */
/**
 * @classdesc HMI 선그리기선그리기 클래스
 */
class JJHmiLine extends JJHmiIcon {
  
  /**
   * @desc isEP여부를 조회한다
   * @example -
   */   
  get isEP(){
    return false;
  }  
  
  /**
   * @desc 기본옵션을 생성
   * @example -
   */    
  _defaultOption() {
    return {
      "class": "hmi-tag",
      "lineClass": "bg-info",
      "moveable": false,
      "tagId":"",
      "version": "640"
    };
  }  
  
  /**
   * @desc HTML을 생성
   * @example -
   */ 
  _render() {
    this.$empty();
    this.classList.add(this.options.class);
    this.classList.add('jj-hmi');
	
    this._showValue();
  }  

  
  /**
   * @desc 이벤트를 설정
   * @example -
   */  
  _setEvent() {
    
		if(this.options.moveable){
      this._oMover = new JJMoveable(this, {
        handles: ['e', 'n', 's'],
        handleEl: '*'
      });
    }
    
    this.addEventListener("click", e => {
    })
  }  
  
  /**
   * @desc value에 맞는 동작을 실행
   * @example -
   */  
  _showValue(){
    this.$empty();
    this.classList.add(this.options.lineClass);
  }
  
  /**
   * @desc 객체 초기화
   * @example -
   */    
  init(options){
    Object.assign(this.options, options);
    this._showValue();
  }

}


customElements.define('jj-hmi-line', JJHmiLine);	
/* ==JJHmiRealChart.640.class================ */
/**
 * @classdesc HMI 실시간 차트 클래스
 */
class JJHmiRealChart extends JJHmiIcon {

  /**
   * @desc 기본옵션을 생성
   * @example -
   */    
  _defaultOption() {
    return {
      "name": "실시간차트",
      "class": "hmi-tag",
      "html": "<label>Html을 넣으세요</label>",
      "moveable": false,
      "colors": ["red", "blue", "green", "yellow"],
      "attrUrl":"IconAttr.uc",
      "tagId":"",
      "tagValue":12345,
      "maxDataLength": 50,
      "version": "640"
    };
  }  

  /**
   * @desc HTML을 생성
   * @example -
   */ 
  _render() {
    this.$empty();
    this.chartData = [];

    this.classList.add(this.options.class);
    this.canvas = document.createElement('canvas');
    this.canvas.setAttribute("width", this.offsetWidth);
    this.canvas.setAttribute("height", this.offsetHeight);
    this.appendChild(this.canvas);
    this._showDemo();
  }  


  /**
   * @desc 이벤트를 설정
   * @example -
   */  
  _setEvent() {
    if(this.options.moveable){
      this._oMover = new JJMoveable(this, {
        handles: ['e', 'n', 's'],
        handleEl: '*'
      });
    }

    this.addEventListener("click", e => {
    })
  }  

  /**
   * @desc value에 맞는 동작을 실행
   * @example -
   */  
  _showValue(){
    this.setAttribute('name', this.options.name);
    
    if(this.canvas && this._value){
	    this.chartData.push([this._value.x,this._value.y]);
      this.canvas.setAttribute("width", this.offsetWidth);
      this.canvas.setAttribute("height", this.offsetHeight);
      var ctx = this.canvas.getContext("2d");
      ctx.clearRect(0, 0, this.offsetWidth, this.offsetHeight);
      let dataSize = this.chartData[0].length;
      if(this.chartData.length > this.options.maxDataLength){
        this.chartData.shift();
      }
      
      for (let i=0; i<dataSize; i++){
        ctx.beginPath();
        this.chartData.forEach((item,index)=>{
          ctx.lineTo(index*(this.offsetWidth/this.options.maxDataLength), (100-item[i]) * (this.offsetHeight) * 0.01);  
          ctx.lineWidth = 1;
          ctx.stroke();     
          ctx.strokeStyle = this.options.colors[i];
        })
      }
    }
  }

  /**
   * 이미지 토글에 의한 동작
   */
  _showDemo(){
//     this.setAttribute('name', this.options.name);
    
//     if(this.canvas){
//       this.canvas.setAttribute("width", this.offsetWidth);
//       this.canvas.setAttribute("height", this.offsetHeight);
//       var ctx = this.canvas.getContext("2d");
//       ctx.clearRect(0, 0, this.offsetWidth, this.offsetHeight);
//       let data = [
//         [
//           84,
//           40
//         ],
//         [
//           48,
//           83
//         ],
//         [
//           92,
//           98
//         ],
//         [
//           59,
//           71
//         ],
//         [
//           58,
//           64
//         ],
//         [
//           53,
//           98
//         ],
//         [
//           76,
//           91
//         ],
//         [
//           93,
//           62
//         ],
//         [
//           68,
//           66
//         ],
//         [
//           57,
//           79
//         ],
//         [
//           40,
//           52
//         ],
//         [
//           79,
//           59
//         ],
//         [
//           86,
//           41
//         ],
//         [
//           82,
//           42
//         ],
//         [
//           76,
//           73
//         ]
//       ];
      
//       let dataSize = data[0].length;
// 			let maxDataLength = data.length;
      
//       for (let i=0; i<dataSize; i++){
//         ctx.beginPath();
//         data.forEach((item,index)=>{
//           ctx.lineTo(index*(this.offsetWidth/maxDataLength), (100-item[i]) * (this.offsetHeight) * 0.01);  
//           ctx.lineWidth = 1;
//           ctx.stroke();     
//           ctx.strokeStyle = this.options.colors[i];
//         })
//       }
//     }
  }
  

  /**
   * @desc 옵션정보를 설정한다
   * @param {Object} - 옵션
   * @example -
   */    
  setOptions(options){
    Object.assign(this.options, options);
    
		Jinja.hmiSSE.tagGet(this.options.tagId, this);

    
    this._showValue();
    this.dispatchEvent(
      new CustomEvent('input', {
        detail: {
          el: this,
        },
        bubbles: true
      })
    );
    
    return this.options;
  }
  
  /**
   * @desc 크기변경 실행동작을 설정한다
   * @example -
   */     
  resize(){
    this._showValue();
  }
}


customElements.define('jj-real-chart', JJHmiRealChart);	
/* ==JJHmiDial.640.class================ */
/**
 * @classdesc HMI 다이얼 클래스
 */
class JJHmiDial extends JJElement {

  /**
   * @desc 값을 리턴한다
   * @example -
   */   
  get value() {
    return this.rotate.value;
  }

  /**
   * @desc 값을 설정한다
   * @example -
   */   
  set value(v) {
    if(this.options.readonly){
      this._value = v;
      this._showValue();
    }
  }    

  /**
   * @desc isEP여부를 조회한다
   * @example -
   */   
  get isEP(){
    return true;
  }

  /**
   * @desc 기본옵션을 생성
   * @example -
   */    
  _defaultOption() {
    this._value = 0;
    return {
      "imageUri": "",
      "activeUri": "",
      "name": "다이얼",
      "class": "hmi-tag",
      "actionClass": "",
      "filterClass": "",
      "commandType": "click",
      "moveable": false,
      "readonly": true,
      "attrUrl":"IconAttr.uc",
      "tagId":"",
      "tagValue":0,
      // 논리,숫자,문자
      "valueType":"논리", 
      "jj-id": "",
      "jj-command": "",
      "delayTime": 200,
      "version": "640"
    };
  }  

  /**
   * @desc HTML을 생성
   * @example -
   */ 
  _render() {
    this.$empty();
    this.classList.add('jj-hmi');
    this.classList.add(this.options.class);
    
    this.innerHTML =`
      <div class="dial">
         <div class="mark"></div>
      </div>
      <h3 class="dial-title"></h3>
`;
		this.dial = this.querySelector('.dial');
		this.dialValue = this.querySelector('.dial-title');

    this.rotate =  new JJRotate(this.dial, {
      "handleEl": ".mark"
    })
    
    this._showValue();
  }  


  /**
   * @desc 이벤트를 설정
   * @example -
   */  
  _setEvent() {

    this.dial.addEventListener("jjRotateMove", e=>{
      this._value = e.detail.value;
      this.dialValue.innerText =  this._value;      
      if(!this.options.readonly){
      	Jinja.hmiSSE.send(this.options.tagId, e.detail.value);
      }
      
    })
    
  }  

  /**
   * @desc value에 맞는 동작을 실행
   * @example -
   */  
  _showValue(){
    this.setAttribute('name', this.options.name);
    if(this.options.jjId) this.setAttribute('jj-id', this.options.jjId);
    if(this.options.jjCommand) this.setAttribute('jj-command', this.options.jjCommand);
    
    if(this.rotate){
    	this.rotate.value = this._value;
			this.dialValue.innerText =  this._value;      
      if(this._value){
        this.dial.style.backgroundImage=`url("${this.options.activeUri}")`;    
      } else {
        this.dial.style.backgroundImage=`url("${this.options.imageUri}")`;    
      }
      
    }

    if(this.options.readonly){
      this.setAttribute('readonly', 'readonly');
    } else {
      this.removeAttribute('readonly');
    }

  }

  /**
   * @desc 객체 초기화
   * @example -
   */    
  init(options){
    Object.assign(this.options, options);
    this._showValue();
  }
 
  /**
   * @desc 옵션정볼르 리턴한다
   * @example -
   */    
  getOptions(){
    return this.options;
  }
  
  /**
   * @desc 옵션정보를 설정한다
   * @param {Object} - 옵션
   * @example -
   */    
  setOptions(options){
    Object.assign(this.options, options);
    
		Jinja.hmiSSE.tagGet(this.options.tagId, this);

    
    this._showValue();

    return this.options;
  }

  /**
   * @desc 옵션정보 설정폼을 호출한다
   * @param {Object} - 옵션
   * @example -
   */    
  showOptionForm(){
    if(!this.options.attrUrl) return;
    
    JJFormModal.open(this.options.attrUrl, this.options)
      .then(options=>this.setOptions(options))
      .catch(err=>alert(err));  
  }
  
 
  /**
   * @desc 크기변경 실행동작을 설정한다
   * @example -
   */     
  resize(){
   // this._showValue();
  }  
}


customElements.define('jj-hmi-dial', JJHmiDial);	
/* ==HMISSEvents.640.class================ */

/**
 * @classdesc SSE 관리를 위한 클래스
 */
class HMISSEvents extends JJModule {
  /**
   * @desc 생성자
   * @param {Object} - 옵션
   * @example -
   */

  _defaultOption() {
    this.VERSION = '640';
    this.messageRoute = {};
		this.tags ={};
    return {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61"
    };
  }
  
  _setEvent() {
    Jinja.event.add('jjAppStart', 'hmisse.setInit', this.appStart.bind(this));
    Jinja.event.add('JJLogout', 'hmisse.setInit', this.destroy.bind(this));
  }  
  
  /**
   * @desc SSE모듈을 초기화한다.
   * @example -
   */
  appStart() {
    if (navigator.onLine && workspaceMeta.options.pwa.useSSE) {
      // Tag수신처 등록
      Jinja.ajax.post(`/${this.options.apiVersion}/notification/topic/HMI/user/${Jinja.uo.USER_ID}`)
      
      // Tag수신메시지 등록
      Jinja.sse.addMessageRoute('1200', 'HMI-ROUTE', message => {
        //console.log(message);
        let tagId = message.DATA.tagID;
        let value = message.DATA.value;
        
        if(this.tags[tagId]){
        	this.tags[tagId].forEach(el=>el.value = value);
        }
        //form.dig1.value = message.MESSAGE.value;
      });
      
    }
  }
	
  tagGet(tagId, el){
    if(!tagId) return;
    if(!this.tags[tagId]){
      this.tags[tagId] = []; 
    }
    return this.tags[tagId].push(el);
  }
  
  send(tagId, value){
    if(!tagId) return;
    Jinja.ajax.post(`/${this.options.apiVersion}/notification/topic/HMI/message`,{
      "NOTI_CODE": "1200",
      "TITLE": "Tag메시지",
      "DATA": {
        "tagID": tagId,
        "value": value
      }
    });
  }
  /**
   * @desc SSE모듈을 삭제한다.
   * @example -
   */
  destroy() {
    if (Jinja.sseWellComm) {
      Jinja.ajax.delete(`/${this.options.apiVersion}/notification/topic/HMI/user/${Jinja.uo.USER_ID}`);
    }
  }
}

Jinja.addModule('hmiSSE', HMISSEvents);
/* ==JJDao.710.pkg.deploy================ */
/* ==JJBatis.640.class================ */

/**
 * @classdesc JJBatis 컴포넌트관리를 위한 클래스
 */
class JJBatis {
  /**
   * @desc 생성자
   * @param {Object} - 옵션
   * @example -
   */
  constructor(options) {
    this.VERSION = '640';
    this.options = {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      "sourceType": 'table',
      "workspace": workspaceMeta.options.appInfo.jbatisId||"",
      "tableName": '',
      "keyField": '',
      "keyValue": '',
      "infoFields": [],
      "default": {},
      "filter": [],
      "order": '',
      "dataSources": [],
      "pagecount": 30000
      
    };

    Object.assign(this.options, options);

    this.data = {
      info: {},
      rows: []
    };

    this.init();
  }

  /**
   * @desc 엘리먼트를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    Object.assign(this.options, options);

    if (!this.options.workspace) {
  		alert("JBatis에 워크스페이스가 지정되지 않았습니다.");    
    } else {
	    this.restUrl = `/${this.options.apiVersion}/jbatis/${this.options.workspace}`;
      this.ready = new Promise((resolv, reject) => resolv());
    }
  }

  /**
   * @desc 객체를 삭제한다.
   * @example -
   */
  destroy() {}

  /**
   * @desc 워크스페이스명을 반환한다.
   * @return {String} - 워크스페이스명
   * @example -
   */
  getWorkspace() {
    return this.options.workspace;
  }

  /**
   * @desc 워크스페이스명을 설정한다.
   * @param {String} - 워크스페이스명
   * @example -
   */
  setWorkspace(workspace) {
    this.options.workspace = workspace;
    this.restUrl = `/${this.options.apiVersion}/jbatis/${this.options.workspace}`;
  }

  /**
   * @desc 새로고침한 워크스페이스명을 반환한다.
   * @return {Promiss} - 실행결과
   * @example -
   */
  getRefreshWorkspace() {
    this.ready = null;
    this.ready = Jinja.ajax.get(`/${this.options.apiVersion}/jbatis/connection`).then(result => {
      this.options.dataSources = result.rows;

      return this.options.dataSources;
    });

    return this.ready;
  }

  /**
   * @desc 지정한 row 데이터를 등록한다.
   * @param {Object} - row 데이터
   * @return {Promiss} - 실행결과
   * @example -
   */
  insert(row) {
    return Jinja.ajax
      .post(
        this.restUrl +
          `/rest/${this.options.tableName}/${this.options.keyField}/${
            row[this.options.keyField]
          }`,
        {
          field: row,
        }
      )
      .then(data => this.data.rows.push(row));
  }

  /**
   * @desc 지정한 row 데이터를 저장한다.
   * @param {Object} - row 데이터
   * @return {Promiss} - 실행결과
   * @example -
   */
  save(row) {
    if (!row) {
      row = this.data.info;
    }

    let keyValue = row[this.options.keyField] || this.options.keyValue;
    let method = row._crud_ == 'C' ? 'POST' : 'PATCH';

    if (row._crud_ == 'C') {
      return Jinja.ajax
        .post(
          this.restUrl +
            `/rest/${this.options.tableName}/${this.options.keyField}/${keyValue}`,
          {
            field: Jinja.json.getChangeData(row),
          }
        )
        .then(result => {
          $topMessage('신규 저장되었습니다.');

          this.clearRow(row);
        });
    } else {
      return Jinja.ajax
        .patch(
          this.restUrl +
            `/rest/${this.options.tableName}/${this.options.keyField}/${keyValue}`,
          {
            field: Jinja.json.getChangeData(row),
          }
        )
        .then(result => {
          $topMessage('수정 저장되었습니다.');

          this.clearRow(row);
        });
    }
  }

  /**
   * @desc 지정한 rows 데이터를 저장한다.
   * @param {Array} - rows 데이터
   * @return {Promiss} - 실행결과
   * @example -
   */
  saveAll(rows) {
    rows = rows || this.data.rows;

    let sendData = { rows: this.getSaveRows(rows) };

    return Jinja.ajax
      .post(this.restUrl + `/rest/${this.options.tableName}`, sendData)
      .then(data => {
        this.clearCrud(rows);

        $topMessage(sendData.rows.length + '건이 처리되었습니다.');
      });
  }

  /**
   * @desc 지정한 row 순번에 해당하는 정보를 저장한다.
   * @param {Number} - row 순번
   * @return {Promiss} - 실행결과
   * @example -
   */
  saveIndex(index) {
    this.save(this.data.rows[index]);
  }

  /**
   * @desc 지정한 rows 데이터에서 수정된 row 목록을 반환한다.(신규, 삭제 포함)
   * @param {Array} - rows 데이터
   * @return {Array} - 수정된 rows 데이터
   * @example -
   */
  getEditedRows(rows) {
    return rows.filter((row, index) => {
      return ['C', 'U', 'D'].indexOf(row['_crud_']) >= 0;
    });
  }

  /**
   * @desc 지정한 rows 데이터에서 수정된 row 데이터를 저장을 위한 정보로 변환하여 반환한다.
   * @param {Array} - rows 데이터
   * @return {Array} - 수정된 rows 데이터
   * @example -
   */
  getSaveRows(rows) {
    let saveRows = this.getEditedRows(rows).map(row => {
      let rlt = {
        crud: row['_crud_'],
        table: this.options.tableName,
        keyField: this.options.keyField,
        keyValue: null,
        field: {},
      };

      if (row['_crud_'] == 'C' && !row[this.options.keyField]) {
        rlt.keyValue = row[this.options.keyField] = generateUUID();
      }

      if (row['_crud_'] == 'C') {
        Object.keys(row).forEach(function (key) {
          if (
            row[key] != null &&
            row[key] != undefined &&
            key.substr(0, 1) != '_'
          ) {
            rlt.field[key] = row[key];
          }
        });
      } else if (row['_crud_'] == 'U') {
        Object.keys(row._changeData_).forEach((key, index) => {
          if (row._changeData_[key].val != row._changeData_[key].old) {
            rlt.field[key] = row._changeData_[key].val;
          }
        });
      }

      rlt.keyValue = row[this.options.keyField];

      return rlt;
    });

    return saveRows;

    function f1(value, field) {
      let rlt = value;

      if (vOption.colModel.filter(col => col.field == field).length > 0) {
        let type = vOption.colModel.filter(col => col.field == field)[0].type;

        switch (type) {
          case 'date':
            rlt = rlt.substr(0, 10);

            break;
          case 'datetime':
            rlt = "TO_DATE('" + rlt.substr(0, 16) + "', 'yyyy-mm-dd HH24:MI')";

            break;
          case 'money':
          case 'number':
            rlt = rlt.toString().replace(/,/gi, '');

            break;
        }
      }

      return rlt;
    }
  }

  /**
   * @desc 지정한 row 데이터의 정리한다.<br><br>
   * _crud_ : 'R'
   * _changeData_ : {}
   * @param {Object} - row 데이터
   * @example -
   */
  clearRow(row) {
    row._crud_ = 'R';
    row._changeData_ = {};
  }

  /**
   * @desc 지정한 rows 데이터의 정리한다.<br><br>
   * R(_crud_) : clearRow 실행
   * D(_crud_) : removeIndex 실행
   * 그외 : 현상유지
   * @param {Array} - rows 데이터
   * @example -
   */
  clearCrud(rows) {
    let rowLength = rows.length - 1;

    for (; rowLength >= 0; rowLength--) {
      switch (rows[rowLength]._crud_) {
        case 'C':
        case 'U':
          this.clearRow(rows[rowLength]);

          break;
        case 'D':
          rows.removeIndex(rowLength);

          break;
      }
    }
  }

  /**
   * @desc 지정한 rows 데이터에서 지정한 row 또는 선택된 row의 CRUD 정보를 삭제한다.<br><br>
   * C(_crud_) : row 데이터 삭제
   * R(_crud_) : _crud_값을 D 상태로 수정
   * U(_crud_) : _crud_값을 D 상태로 수정
   * D(_crud_) : _changeData_ 데이터가 있으면 _crud_값을 U 없으면 R 상태로 수정
   * @param {Object} - 선택된 row 데이터
   * @param {Array} - rows 데이터
   * @example -
   */
  deleteCrud(srow, rows) {
    let selectrow = rows.filter(row => row._select_);

    if (selectrow.length == 0) {
      selectrow.push(srow);
    }

    selectrow.forEach(row => {
      switch (row._crud_) {
        case 'C':
          let keyValue = row[this.options.keyField];
          let findIndex;

          rows.some((row, index) => {
            if (row[this.options.keyField] == keyValue) {
              findIndex = index;

              return true;
            }
          });

          rows.splice(findIndex, 1);

          break;
        case 'D':
          if (Object.keys(row['_changeData_']).length) {
            row._crud_ = 'U';
          } else {
            row._crud_ = 'R';
          }

          break;
        case 'R':
          row._crud_ = 'D';

          break;
        case 'U':
          row._crud_ = 'D';

          break;
      }
    });
  }

  /**
   * @desc 지정한 keyValue값으로 데이터를 조회한다.
   * @param {String} - keyValue
   * @return {Promiss} - 실행결과
   * @example -
   */
  read(keyValue) {
    this.options.keyValue = keyValue;

    let url =
      this.restUrl +
      `/rest/${this.options.tableName}/${this.options.keyField}/${keyValue}?d0=`;

    if (this.options.infoFields.length) {
      url += '&field=' + this.options.infoFields.join(',');
    }

    return Jinja.ajax.get(url).then(result => {
      this.data.info = Jinja.json.setCRUD(result.row);

      return this.data.info;
    });
  }

  /**
   * @desc 지정한 값을 default값으로 하는 신규 row를 data.info로 설정한다.
   * @param {*} - default값
   * @return {Promiss} - 실행결과
   * @example -
   */
  new(newValue) {
    let newRow = {
      _crud_: 'C',
      _select_: true,
      _rno_: 0,
      _changeData_: {}
    };

    return this.getColumns().then(() => {
      if (this.options.infoFields.length > 1) {
        this.options.infoFields.forEach(column => (newRow[column] = null));
      } else {
        this.columns.forEach(col => (newRow[col.COLUMN_NAME] = null));
      }

      newRow = Object.assign(newRow, this.options.default, newValue);

      this.options.keyValue = Jinja.global.uuid();

      newRow[this.options.keyField] = this.options.keyValue;

      this.data.info = newRow;

      return newRow;
    });
  }

  /**
   * @desc 지정한 값을 default값으로 하는 신규 row를 data.rows에 추가한다.
   * @param {*} - default값
   * @return {Promiss} - 실행결과
   * @example -
   */
  appendRow(newValue) {
    let newRow = {
      _crud_: 'C',
      _select_: true,
      _rno_: 0,
      _changeData_: {}
    };

    return this.getColumns().then(() => {
      if (this.options.infoFields.length > 1) {
        this.options.infoFields.forEach(column => (newRow[column] = null));
      } else {
        this.columns.forEach(col => (newRow[col.COLUMN_NAME] = null));
      }

      newRow = Object.assign(newRow, this.options.default, newValue);

      this.options.keyValue = Jinja.global.uuid();

      newRow[this.options.keyField] = this.options.keyValue;

      this.data.rows.push(newRow);

      return newRow;
    });
  }

  /**
   * @desc 지정한 keyValue값으로 데이터를 삭제한다.
   * @param {String} - keyValue
   * @return {Promiss} - 실행결과
   * @example -
   */
  delete(keyValue) {
    this.options.keyValue = keyValue;

    let url =
      this.restUrl +
      `/rest/${this.options.tableName}/${this.options.keyField}/${this.options.keyValue}`;

    return Jinja.ajax
      .delete(url)
      .then(row => $topMessage('선택된 자료가 삭제되었습니다.'));
  }

  /**
   * @desc 지정한 조회조건을 기준으로 데이터를 조회한다.
   * @param {Object} - 조회조건
   * @return {Promiss} - 실행결과
   * @example -
   */
  search(filter) {
    switch (this.options.sourceType) {
      case 'sqlj':
        return this.excuteGet(this.options.tableName, filter);
      default:
        return this.tableSearch(filter);
    }
  }

  /**
   * @desc 지정한 파일URI와 조회조건으로 데이터를 조회한다. 
   * @param {String} - 파일URI
   * @param {Object} - 조회조건
   * @return {Promiss} - 실행결과
   * @example -
   */
  excuteGet(uri, data) {
    if (!uri) uri = this.options.tableName;

    let url = this.restUrl + `/excute/get/${uri}`;

    return Jinja.ajax.get(url, data).then(result => {
      this.data.rows = Jinja.json.setCRUD(result.rows);

      return this.data;
    });
  }

  /**
   * @desc 지정한 조회조건으로 테이블 데이터를 조회한다.
   * @param {Object} - 조회조건
   * @return {Promiss} - 실행결과
   * @example -
   */
  tableSearch(filter) {
    let url = this.restUrl + `/rest/${this.options.tableName}?`;

    filter = filter || [];

    let findFilter = [];

    if (this.options.infoFields.length) {
      url += '&field=' + this.options.infoFields.join(',');
    }

    if (this.options.filter.length || filter.length) {
      findFilter = findFilter.concat(filter, this.options.filter);
      url +=
        '&filter=' + Jinja.global.encodeURI(Jinja.global.string(findFilter));
    }

    url += '&pagecount=' + this.options.pagecount;

    if (this.options.order) {
      url += '&order=' + this.options.order;
    }

    return Jinja.ajax.get(url).then(result => {
      this.data.rows = Jinja.json.setCRUD(result.rows);

      return this.data;
    });
  }

  multirows(sendData){
    let url = this.restUrl + `/rest/multirows`;
    return Jinja.ajax.post(url, {
       "rows": sendData
    })    
  }
  /**
   * @desc 지정한 테이블명의 입력컬럼정보를 조회한다.
   * @param {String} - 테이블명
   * @return {Promiss} - 실행결과
   * @example -
   */
  getFilters(tableName) {
    switch (this.options.sourceType) {
      case 'sqlj': {
        if (!tableName) tableName = this.options.tableName;

        return Jinja.resource.getUri(tableName).then(data => {
          let body = Jinja.global.json(data.BODY);

          this.columns = body.indata;

          return { rows: body.indata };
        });
      }

      default: {
        if (!tableName) tableName = this.options.tableName;

        return Jinja.ajax
          .get(this.restUrl + `/table/${tableName}/columns`)
          .then(data => {
            this.columns = data.rows;

            return data;
          });
      }
    }
  }


  /**
   * @desc 지정한 row순번의 데이터를 반환한다.
   * @param {} - 
   * @return {} - 
   * @example -
   */
  getIndexRow(rowIndex) {
    return this.data.rows[rowIndex];
  }
}
/* ==JJBatisDBA.640.class================ */

/**
 * @classdesc JJBatisDBA 컴포넌트관리를 위한 클래스
 */
class JJBatisDBA extends JJBatis {
  /**
   * @desc 생성자
   * @param {Object} - 옵션
   * @example -
   */
  constructor(options) {
    super(options);

    this.VERSION = '640';
  }

  /**
   * @desc 지정한 Jbatis아이디의 접속정보를 삭제한다.
   * @param {String} - jbatis아이디
   * @throw {JJException} - 접속정보 삭제시 예외처리
   * @return {Promiss} - 실행결과
   * @example -
   */
  removeJbatis(jbatisId) {
    return Jinja.confirm
      .delete('접속정보를 삭제하시겠습니까?')
      .then(chooice => {
      if (chooice == 'YES') {
        return Jinja.ajax.delete(`/${this.options.apiVersion}/jbatis/connection/${jbatisId}`);
      } else {
        throw new JJException(901, '프로세스진행종료1');
      }
    })
      .catch(ex => {
      throw new JJException(901, '프로세스진행종료2');
    });
  }

  /**
   * @desc 데이터소스 목록을 반환한다.
   * @return {Array} - 데이터소스 목록
   * @example -
   */
  getSources() {
    return this.options.dataSources;
  }

  /**
   * @desc 테이블 목록을 반환한다.
   * @param {String} - 테이블명
   * @return {Promiss} - 실행결과
   * @example -
   */
  getTables(tableName) {
    let url = this.restUrl + `/tables`;

    if (tableName) {
      url += '?q=' + tableName;
    }

    return Jinja.ajax.get(url);
  }

  findTable(){
    let result;
    return JJFormModal.open("getTable.640.uc").then(data=>{
      result = data;
      this.setWorkspace(result.workspace)
      this.options.tableName = result.table;
      this.options.keyField = result.keyField;
      return this.getColumns();
    }).then(dataColumns=> {
      result.columns = dataColumns.rows
      return result;
    });

  }  

  /**
   * @desc 지정한 테이블을 생성한다.
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  createTable(options) {
    let option = {
      TABLE_NAME: '',
      KEY_FIELD: '',
      DISPLAY_FIELD: '',
      COLUMNS: [],
    };

    let sendData = Object.assign({}, option, options);
    sendData.COLUMNS.forEach(col=>{
      col.COLUMN_TYPE = this.getDBDomain(col.COLUMN_DOMAIN).DBTYPE; 
      col.COLUMN_LENGTH = this.getDBDomain(col.COLUMN_DOMAIN).LENGTH; 
    })
    
    return Jinja.ajax
      .post(this.restUrl + `/table`, sendData)
      .then(() => {
      sendData["workspace"] = this.options.workspace;
      return sendData;
    });
  }

  /**
   * @desc 지정한 테이블을 수정한다.
   * @param {Object} - 옵션
   * @return {Promiss} - 실행결과
   * @example -
   */
  alterTable(options) {
    let option = {
      TABLE_NAME: '',
      KEY_FIELD: '',
      COLUMNS: []
    };

    let sendData = Object.assign({}, option, options);
//    let bodyData = Jinja.global.string(sendData);

    sendData.COLUMNS.forEach(col=>{
      // 서버의 테이블 생성모듈이 도메인을 기반으로 변경됨으로 도메인을 넘김
      //col.COLUMN_TYPE = this.getDBDomain(col.COLUMN_DOMAIN).DBTYPE; 
      col.COLUMN_TYPE = col.COLUMN_DOMAIN;
      col.COLUMN_LENGTH = this.getDBDomain(col.COLUMN_DOMAIN).LENGTH; 
    })
    
    
    return Jinja.ajax.patch(
      this.restUrl + `/table/${sendData.TABLE_NAME}`,
      sendData
    );
  }

  /**
   * @desc 지정한 테이블명의 출력컬럼정보를 조회한다.
   * @param {String} - 테이블명
   * @return {Promiss} - 실행결과
   * @example -
   */
  getColumns(tableName) {
    switch (this.options.sourceType) {
      case 'sqlj': {
        if (!tableName) tableName = this.options.tableName;

        return Jinja.resource.getUri(tableName).then(data => {
          let body = Jinja.global.json(data.BODY);

          this.columns = body.outdata;

          return { rows: body.outdata };
        });
      }

      default: {
        if (!tableName) tableName = this.options.tableName;
				
        return Jinja.ajax
          .get(this.restUrl + `/table/${tableName}/columns`)
          .then(data => {
          	data.rows.forEach(row=>{
              row.COLUMN_LABEL = row.COLUMN_NAME;
              row.COLUMN_DOMAIN = this.DbType2Domain(row.COLUMN_TYPE, row.COLUMN_LENGTH);
              row.COLUMN_SHOW = this.getSystemColumnKeys().includes(row.COLUMN_NAME)?"false":"true";
            });
          
          
            this.columns = data.rows;

            return data;
          });
      }
    }
  }
  
  /**
   * @desc 지정한 컬럼을 추가한다.
   * @param {String} - 테이블명
   * @param {String} - 컬럼명
   * @param {String} - 컬럼유형
   * @param {String} - 컬럼길이
   * @return {Promiss} - 실행결과
   * @example -
   */
  addColumn(tableName, columnName, columnDomain) {
    return this.alterTable({
      TABLE_NAME: tableName,
      COLUMNS: [
        {
          "COLUMN_NAME": columnName,
          "COLUMN_DOMAIN": columnDomain,
          "_crud_": 'C'
        },
      ],
    });
  }

  /**
   * @desc 지정한 테이블을 삭제한다.
   * @param {String} - 테이블명
   * @throw {JJException} - 삭제취소시 예외처리
   * @return {Promiss} - 실행결과
   * @example -
   */
  removeTable(tableName) {
    return Jinja.confirm
      .delete(`${tableName} 테이블 삭제하시겠습니까?`)
      .then(chooice => {
      if (chooice == 'YES') {
        return Jinja.ajax.delete(this.restUrl + `/table/${tableName}`, true);
      } else {
        throw new JJException(901, '프로세스진행종료');
      }
    });
  }

  /**
   * @desc 지정한 컬럼을 삭제한다.
   * @param {String} - 테이블명
   * @param {String} - 컬럼명
   * @throw {JJException} - 삭제취소시 예외처리
   * @return {Promiss} - 실행결과
   * @example -
   */
  removeColumn(tableName, columnName) {
    return Jinja.confirm
      .delete(`${columnName} 컬럼을 삭제하시겠습니까?`)
      .then(chooice => {
      if (chooice == 'YES') {
        return Jinja.ajax.delete(
          this.restUrl + `/table/${tableName}/column/${columnName}`,
          true
        );
      } else {
        throw new JJException(901, '프로세스진행종료');
      }
    });
  }

  /**
   * @desc 지정한 쿼리를 실행한다.
   * @param {String} - 쿼리
   * @return {Promiss} - 실행결과
   * @example -
   */
  excute(sql) {
    let url = this.restUrl + `/excute/test`;

    return Jinja.ajax.post(url, {
      sql: sql
    });
  }
  /**
   * @desc 지정한 쿼리를 실행한다.
   * @param {String} - 쿼리
   * @return {Promiss} - 실행결과
   * @example -
   */
  excuteNt(sql) {
    let url = this.restUrl + `/excuteNt/test`;

    return Jinja.ajax.post(url, {
      sql: sql
    });
  }

  /**
   * @desc 엑셀파일을 업로드한다.
   * @param {File} - 파일목록
   * @return {Promiss} - 실행결과
   * @example -
   */
  excelUpload(files) {
    return Jinja.ajax.excelUpload(this.restUrl + `/table/exceltojson`, files);
  }

  /**
   * @desc 조회쿼리를 생성 반환한다.
   * @param {String} - 테이블명
   * @param {String} - 컬럼명
   * @return {String} - 쿼리 문자열
   * @example -
   */
  selectSql(tableName, columns) {
    tableName = tableName || this.options.tableName;
    columns = columns || this.columns;

    let sql = `SELECT \n`;

    columns.forEach((col, index) => {
      if (index === 0) {
        sql += `   ${col['COLUMN_NAME']} \n`;
      } else {
        sql += `  ,${col['COLUMN_NAME']} \n`;
      }
    });

    sql += ` FROM ${tableName} \n`;
    sql += ` WHERE 1=1 \n`;

    columns.forEach((col, index) => {
      sql += ` /* AND ${col['COLUMN_NAME']}  = #\{${col['COLUMN_NAME']}\} */\n`;
    });

    return sql;
  }

  /**
   * @desc 등록쿼리를 생성 반환한다.
   * @param {String} - 테이블명
   * @param {String} - 컬럼명
   * @example -
   */
  insertSql(tableName, columns) {
    tableName = tableName || this.options.tableName;
    columns = columns || this.columns;

    let sql = `INSERT INTO ${tableName} ( \n`;

    columns.forEach((col, index) => {
      if (index === 0) {
        sql += `/*   ${col['COLUMN_NAME']}  -- #\{${col['COLUMN_NAME']}\} */\n`;
      } else {
        sql += `/*  ,${col['COLUMN_NAME']}  -- #\{${col['COLUMN_NAME']}\} */\n`;
      }
    });

    sql += `) \n`;
    sql += `VALUES ( \n`;

    columns.forEach((col, index) => {
      if (index === 0) {
        sql += `/*   #\{${col['COLUMN_NAME']}\} */\n`;
      } else {
        sql += `/*  ,#\{${col['COLUMN_NAME']}\} */\n`;
      }
    });

    return sql;
  }

  /**
   * @desc 수정쿼리를 생성 반환한다.
   * @param {String} - 테이블명
   * @param {String} - 컬럼명
   * @example -
   */
  updateSql(tableName, columns) {
    tableName = tableName || this.options.tableName;
    columns = columns || this.columns;

    let sql = `UPDATE ${tableName} \n`;

    sql += ` SET EDT_DATE    = GETDATE() \n`;

    columns.forEach((col, index) => {
      sql += ` /* , ${col['COLUMN_NAME']}  = #\{${col['COLUMN_NAME']}\} */\n`;
    });

    sql += ` WHERE 1=1 \n`;

    columns.forEach((col, index) => {
      sql += ` /* AND ${col['COLUMN_NAME']}  = #\{${col['COLUMN_NAME']}\} */\n`;
    });

    return sql;
  }

  /**
   * @desc 삭제쿼리를 생성 반환한다.
   * @param {String} - 테이블명
   * @param {String} - 컬럼명
   * @example -
   */
  deleteSql(tableName, columns) {
    tableName = tableName || this.options.tableName;
    columns = columns || this.columns;

    let sql = `DELETE FROM ${tableName} \n`;

    sql += ` WHERE 1=1 \n`;

    columns.forEach((col, index) => {
      sql += ` /* AND ${col['COLUMN_NAME']}  = #\{${col['COLUMN_NAME']}\} */\n`;
    });

    return sql;
  }

  getDBDomain(code){
    let rows = DATA_TYPE.domain;
    if(code){
      return rows.find(row=>row.CODE == code);
    } else {
      return rows;
    }
  }
  
	DbType2Domain(type, length){
  	let result = "VARCHAR";
    switch(type.toUpperCase()){
      case "INT":  
      case "FLOAT":  
      case "DATE":  
      case "DATETIME":  
      case "BIT":  
      case "CLOB":  
        result = type.toUpperCase(); 
        break;
      case "NUMERIC":
        result = "FLOAT"
        break;
      case "NVARCHAR":  
        if (length == -1){
          result = "CLOB"; 
        } else if (length <= 200){
          result = "VARCHAR"; 
        } else {
          result = "MEMO"; 
        }
        break;
      default:
        break;
    }
    
    return result;
  }
  /**
   * @desc 데이터 타입을 반환한다.
   * @param {*} - 대상 데이터
   * @return {String} - 데이터 타입, string
   * @example - JJBatisDBA.640.class
   *  { "CODE": "VARCHAR",  "NAME": "문자", "DBTYPE": "NVARCHAR", "SIZE": 200  },
      { "CODE": "INT",      "NAME": "정수", "DBTYPE": "INT",      "SIZE": 4    },
      { "CODE": "FLOAT",    "NAME": "실수", "DBTYPE": "FLOAT",    "SIZE": 8    },
      { "CODE": "DATE",     "NAME": "날짜", "DBTYPE": "DATE",     "SIZE": 4    },
      { "CODE": "DATETIME", "NAME": "일시", "DBTYPE": "DATETIME", "SIZE": 8    },
      { "CODE": "BIT",      "NAME": "체크", "DBTYPE": "BIT",      "SIZE": 1    },
      { "CODE": "MEMO",     "NAME": "메모", "DBTYPE": "MEMO",     "SIZE": 2000 },
      { "CODE": "CLOB",     "NAME": "본문", "DBTYPE": "CLOB",     "SIZE": 20000}

   */
  val2DBDomain(val) {

    let result = typeof(val);

    if(Jinja.global.isDate(val)) {
      result = "DATE";
    } else if (result == "number"){
      result = Number.isInteger(val)? "INT":"FLOAT";
    } else if (result == "boolean"){
      result = "BIT"
    } else {
      result = "VARCHAR"
    }

    return result;
  }  

  getSystemColumnKeys(){
    return  DATA_TYPE.SystemColumnKey;
  }

  getSystemColumns(){
    return [

      {
        "COLUMN_NAME" : "APPV_STATUS", 
        "COLUMN_LABEL" : "결제상태",
				"COLUMN_DOMAIN": "VARCHAR",        
        "COLUMN_TYPE": "VARCHAR",
        "COLUMN_LENGTH": 40
      },
      {
        "COLUMN_NAME" : "APPV_DATETIME", 
        "COLUMN_LABEL" : "결제처리일시",
				"COLUMN_DOMAIN": "DATETIME",        
        "COLUMN_TYPE": "DATETIME",
        "COLUMN_LENGTH": 4
      },
      {
        "COLUMN_NAME" : "APPV_REQ_DATETIME", 
        "COLUMN_LABEL" : "결제요청일시",
				"COLUMN_DOMAIN": "DATETIME",        
        "COLUMN_TYPE": "DATETIME",
        "COLUMN_LENGTH": 4
      },
      {
        "COLUMN_NAME" : "OWNER_ID", 
        "COLUMN_LABEL" : "소유자번호",
				"COLUMN_DOMAIN": "VARCHAR",        
        "COLUMN_TYPE": "VARCHAR",
        "COLUMN_LENGTH": 40
      },
      {
        "COLUMN_NAME" : "OWNER_NAME", 
        "COLUMN_LABEL" : "소유자명",
				"COLUMN_DOMAIN": "VARCHAR",        
        "COLUMN_TYPE": "VARCHAR",
        "COLUMN_LENGTH": 40
      },
      {
        "COLUMN_NAME" : "APPV_ID", 
        "COLUMN_LABEL" : "승인자번호",
				"COLUMN_DOMAIN": "VARCHAR",        
        "COLUMN_TYPE": "VARCHAR",
        "COLUMN_LENGTH": 40
      },
      {
        "COLUMN_NAME" : "APPV_NAME", 
        "COLUMN_LABEL" : "승인자명",
				"COLUMN_DOMAIN": "VARCHAR",        
        "COLUMN_TYPE": "VARCHAR",
        "COLUMN_LENGTH": 40
      },
      {
        "COLUMN_NAME" : "REG_DATETIME", 
        "COLUMN_LABEL" : "등록일시",
				"COLUMN_DOMAIN": "DATETIME",        
        "COLUMN_TYPE": "DATETIME",
        "COLUMN_LENGTH": 4
      },
      {
        "COLUMN_NAME" : "REG_USER_ID", 
        "COLUMN_LABEL" : "등록사용자번호",
				"COLUMN_DOMAIN": "DATETIME",        
        "COLUMN_TYPE": "VARCHAR",
        "COLUMN_LENGTH": 40
      },
      {
        "COLUMN_NAME" : "REG_USER_NAME", 
        "COLUMN_LABEL" : "등록사용자명",
				"COLUMN_DOMAIN": "DATETIME",        
        "COLUMN_TYPE": "VARCHAR",
        "COLUMN_LENGTH": 40
      },
      {
        "COLUMN_NAME" : "EDT_DATETIME", 
        "COLUMN_LABEL" : "수정일시",
				"COLUMN_DOMAIN": "DATETIME",        
        "COLUMN_TYPE": "DATETIME",
        "COLUMN_LENGTH": 4
      },
      {
        "COLUMN_NAME" : "EDT_USER_ID", 
        "COLUMN_LABEL" : "수정사용자번호",
				"COLUMN_DOMAIN": "DATETIME",        
        "COLUMN_TYPE": "VARCHAR",
        "COLUMN_LENGTH": 40
      },
      {
        "COLUMN_NAME" : "EDT_USER_NAME", 
        "COLUMN_LABEL" : "수정사용자명",
				"COLUMN_DOMAIN": "DATETIME",        
        "COLUMN_TYPE": "VARCHAR",
        "COLUMN_LENGTH": 40
      }
    ]
  }

}
/* ==JJDataExpoler.640.class================ */

/**
 * @classdesc JJDataExpoler 컴포넌트관리를 위한 클래스
 */
class JJDataExpoler extends HTMLElement {
  /**
   * @desc 생성자
   * @param {Object} - 옵션
   * @example -
   */
  constructor(options) {
    super();

    this.VERSION = '640';
    this.options = {
      "apiVersion": workspaceMeta.options.appInfo.apiVersion||"v61",
      contextMenu: []
    };

    Object.assign(this.options, this.dataset, options);

    this.event = new JJEventPool(this);
  }

  /**
   * @desc 엘리먼트를 생성한다.
   * @example -
   */
  _render() {
    let btnRefresh = document.createElement('button');

    btnRefresh.setAttribute('class', 'btn btn-primary btn-block');
    btnRefresh.setAttribute('type', 'button');
    btnRefresh.setAttribute('role', 'getMySource');
    btnRefresh.innerText = 'refresh';

    this.appendChild(btnRefresh);

    let btnAddSpace = document.createElement('button');

    btnAddSpace.setAttribute('class', 'btn btn-primary btn-block');
    btnAddSpace.setAttribute('type', 'button');
    btnAddSpace.setAttribute('role', 'addSpace');
    btnAddSpace.innerText = 'addSpace';

    this.appendChild(btnAddSpace);

    let btnAddConnection = document.createElement('button');

    btnAddConnection.setAttribute('class', 'btn btn-primary btn-block');
    btnAddConnection.setAttribute('type', 'button');
    btnAddConnection.setAttribute('role', 'addConnection');
    btnAddConnection.innerText = 'addConnection';

    this.appendChild(btnAddConnection);

    this.treeEl = document.createElement('ul');
    this.appendChild(this.treeEl);

    this.tree = new JJTree(this.treeEl, {
      isIcon: true,
      isCheck: false,
      isEdit: true,
      isDrag: true,
      isClickFolding: true,
      contextMenu: [
        { label: 'new Table', icon: 'fa-plus', command: 'newTable' },
        { label: 'new Column', icon: 'fa-plus', command: 'newColumn' },
        { label: 'divider' },
        { label: 'new Query', icon: 'fa-plus', command: 'newQuery' },
        { label: 'divider' },
        { label: 'remove', icon: 'fa-plus', command: 'removeJbatisObject' }
      ],
      addOn: ['editable', 'keydown', 'context', 'drag']
    });

    this._setEvent();
  }

  /**
   * @desc 이벤트를 설정한다.
   * @example -
   */
  _setEvent() {
    this.event.on('treeClick', this._onClick);
    this.event.on('treeDragstart', this._onDragstart);
    this.event.on('treeContextClick', this._onContextData);
    this.event.on('click', 'button[role]', this._onRoleClick);
  }

  /**
   * @desc 엘리먼트를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  _init() {
    this.dbo = new JJBatisDBA();
    this.dbo.init();
    this.getMyResource();
  }

  /**
   * @desc Tree의 항목을 삭제한다.
   * @param {Object} - 항목정보
   * @param {String} - 트리 Key
   * @example -
   */
  _removeJbatisObject(dataInfo, itemKey) {
    this.dbo.setWorkspace(dataInfo.jbatis);

    switch (dataInfo.type) {
      case 'JBATIS':
        this.dbo
          .removeJbatis(dataInfo.jbatis)
          .then(rlt => {
            this.tree.removeItem(itemKey, true);
          })
          .catch(ex => {});

        break;
      case 'TABLE':
        this.dbo
          .removeTable(dataInfo.table)
          .then(() => this.tree.removeItem(itemKey));

        break;
      case 'COLUMN':
        this.dbo
          .column(dataInfo.table.column)
          .then(() => this.tree.removeItem(itemKey));

        break;
    }
  }

  /**
   * @desc 신규테이블을 추가한다.
   * @param {Object} - 테이블정보
   * @example -
   */
  _newTable(dataInfo) {
    JJHee.open('app610.datasource.createTable.uc', {
      search: {},
      position: {
        width: '50%'
      },
      isModal: true,
      isMoveable: true
    })
      .then(result => {
        this.dbo.setWorkspace(dataInfo.jbatis);
        this.dbo.createTable(result);
      })
      .catch(ex => {});
  }

  /**
   * @desc 신규컬럼을 추가한다.
   * @param {Object} - 컬럼정보
   * @example -
   */
  _newColumn(dataInfo) {
    if (!dataInfo.table) {
      alert('테이블이 아닙니다.');

      return;
    }

    JJHee.open('app610.datasource.addColumn.uc', {
      search: {},
      position: {
        width: '50%'
      },
      isModal: true,
      isMoveable: true
    })
      .then(result => {
        this.dbo.setWorkspace(dataInfo.jbatis);
        this.dbo.addColumn(
          dataInfo.table,
          result.COLUMNE_NAME,
          result.COLUMN_TYPE,
          result.COLUMN_LENGTH
        );
      })
      .catch(ex => {});
  }

  /**
   * @desc Context메뉴 선택 이벤트를 실행한다.<br><br>
   * Context메뉴에서 copy, move는 기본명령과 충돌할수 있음
   * @param {Event} - 이벤트
   * @example -
   */
  _onContextData(event) {
    let targetFileInfo;

    if (event.detail.key) {
      let dataInfo = event.detail.targetA.parentElement.dataItem;

      switch (event.detail.command) {
        case 'newTable':
          this._newTable(dataInfo, event.detail.key);

          break;
        case 'newColumn':
          this._newColumn(dataInfo, event.detail.key);

          break;
        case 'removeJbatisObject':
          this._removeJbatisObject(dataInfo, event.detail.key);

          break;
      }
    }
  }

  /**
   * @desc 롤클릭 이벤트를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onRoleClick(event) {
    let role = event.target.getAttribute('role');

    switch (role) {
      case 'getMySource':
        this.getMyResource();

        break;
      case 'addSpace':
        this.addSpace();

        break;
      case 'addConnection':
        this.addConnection();

        break;
    }
  }

  /**
   * @desc 클릭 이벤트를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onClick(event) {
    let itemData = event.detail.data;

    this.dbo.setWorkspace(itemData.jbatis);

    if (itemData.type == 'table.folder' && !event.detail.item.nextElementSibling) {
      this.dbo.getTables().then(result =>
        result.rows.forEach(row =>
          this.tree.addChildItem(
            {
              id: row.TABLE_NAME,
              label: row.TABLE_NAME,
              type: 'TABLE',
              jbatis: itemData.jbatis,
              table: row.TABLE_NAME
            },
            event.detail.item.parentElement,
            'inner',
            true
          )
        )
      );
    }

    if (itemData.type == 'TABLE' && !event.detail.item.nextElementSibling) {
      this.dbo.getColumns(itemData.id).then(result =>
        result.rows.forEach(row =>
          this.tree.addChildItem(
            {
              id: row.COLUMN_NAME,
              label: row.COLUMN_NAME,
              type: 'COLUMN',
              jbatis: itemData.jbatis,
              table: itemData.table,
              column: row.COLUMN_NAME
            },
            event.detail.item.parentElement,
            'inner',
            true
          )
        )
      );
    }
  }

  /**
   * @desc 드래그시작 이벤트를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onDragstart(event) {
    if (event.detail.key && event.detail.dataTransfer) {
      let itemData = event.detail.dragEl.parentElement.dataItem;

      event.detail.dataTransfer.setData('text/html', `${itemData.id}`);

      switch (itemData.type) {
        case 'JBATIS':
          event.detail.dataTransfer.setData('objType/application', 'jbatis');
          event.detail.dataTransfer.setData(
            'objData/application',
            `{ "jbatis": "${itemData.jbatis}"}`
          );
          event.detail.dataTransfer.setData(
            'text/json',
            `{ "jbatis": "${itemData.jbatis}"},\n`
          );

          break;
        case 'TABLE':
          event.detail.dataTransfer.setData('objType/application', 'table');
          event.detail.dataTransfer.setData(
            'objData/application',
            `{ "jbatis": "${itemData.jbatis}", "table":"${itemData.table}" }`
          );
          event.detail.dataTransfer.setData(
            'text/json',
            `{ "jbatis": "${itemData.jbatis}", "table":"${itemData.table}"},\n`
          );

          break;
        case 'COLUMN':
          event.detail.dataTransfer.setData('objType/application', 'column');
          event.detail.dataTransfer.setData(
            'objData/application',
            `{ "jbatis": "${itemData.jbatis}", "table":"${itemData.table}", "column":"${itemData.column}"}"}`
          );
          event.detail.dataTransfer.setData(
            'text/json',
            `{ "jbatis": "${itemData.jbatis}", "table":"${itemData.table}", "column":"${itemData.column}"},\n`
          );

          break;
      }
    }
  }

  /**
   * @desc 파일정보 업데이트 이벤트를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onUpdateFileInfo(event) {
    this.tree.updateData(event.detail);
  }

  /**
   * @desc 폴더 새로고침 이벤트를 실행한다.
   * @param {Event} - 이벤트
   * @example -
   */
  _onFolderRefresh(event) {
    let folderId;

    if (event && event.detail && event.detail.PARENT_ID) folderId = event.detail.PARENT_ID;
    if (!folderId) folderId = event.folderId;
    if (!folderId) return;

    Jinja.studioV6Api
      .getTreeByFolderId(folderId)
      .then(treeData => this.tree.updateJson(folderId, treeData));
  }

  /**
   * @desc 엘리먼트를 초기화한다.
   * @param {Object} - 옵션
   * @example -
   */
  init(options) {
    Object.assign(this.options, options);

    this._init();
  }

  /**
   * @desc 나의 접속가능한 컨넥션을 조회한다.
   * @example -
   */
  getMyResource() {
    this.tree.clear();

    this.dbo.ready.then(() => {
      this.dbo.getRefreshWorkspace().then(result =>
        result.forEach(row => {
          let li = this.tree.addItem({
            id: row.JBATIS_SOURCE_ID,
            label: row.NAME,
            type: 'JBATIS',
            jbatis: row.JBATIS_SOURCE_ID
          });

          this.tree.addChildItem(
            {
              id: row.JBATIS_SOURCE_ID + '.tables',
              label: 'tables',
              type: 'table.folder',
              jbatis: row.JBATIS_SOURCE_ID
            },
            li,
            'inner',
            true
          );

          this.tree.addChildItem(
            {
              id: row.JBATIS_SOURCE_ID + '.query',
              label: 'querys',
              type: 'table.query',
              jbatis: row.JBATIS_SOURCE_ID
            },
            li,
            'inner',
            true
          );
        })
      );
    });
  }

  /**
   * @desc 새로운 접속정보를 등록하고 DB 접속을 추가한다.
   * @example -
   */
  addSpace() {
    JJHee.open('app610.datasource.newTablespace.uc', {
      search: {},
      position: {
        width: '50%'
      },
      isModal: true,
      isMoveable: true
    })
      .then(result =>
        Jinja.ajax.post(
          `/${this.options.apiVersion}/jbatis/connection/${result.datasourceId}/schema`,
          {
            NAME: result.name,
            HOST_SOURCE_ID: result.hostsourceId,
            DESCRIPTION: result.description
          }
        )
      )
      .then(result => this.getMyResource())
      .catch(ex => {});
  }

  /**
   * @desc 지정된 데이터소스아이디로 DB 접속을 추가한다.
   * @example -
   */
  addConnection() {
    return JJHee.open('app610.datasource.newConnection.uc', {
      search: {},
      position: {
        width: '50%'
      },
      isModal: true,
      isMoveable: true
    })
      .then(result =>
        Jinja.ajax.post(`/${this.options.apiVersion}/jbatis/connection/${result.datasourceId}`, {
          NAME: result.name,
          BODY: {
            dbType: result.body.DBTYPE,
            dbVersion: result.body.DBVERSION,
            dbIp: result.body.DBIP,
            dbPort: result.body.DBPORT,
            dbName: result.body.DBNAME,
            userId: result.body.USERID,
            userPw: result.body.USERPW,
            test: result.body.TEST
          },
          STATUS: 'STOP',
          POSITION: 'EXT',
          DESCRIPTION: result.description
        })
      )
      .then(result => this.getMyResource())
      .catch(ex => {});
  }

  /**
   * @desc 엘리먼트를 삭제한다.
   * @example -
   */
  _destroy() {
    this.tree.destroy();
    this.event.destroy();
    this.tree = null;
  }

  /**
   * @desc 엘리먼트를 삭제한다.
   * @example -
   */
  destroy() {
    this._destroy();
    this.remove();
  }

  /**
   * @desc 엘리먼트를 Dom에 연결 후처리를 한다.
   * @example -
   */
  connectedCallback() {
    this._render();
  }

  /**
   * @desc 엘리먼트를 Dom에 연결해제 후처리를 한다.
   * @example -
   */
  disconnectedCallback() {
    this._destroy();
  }

  /**
   * @desc 엘리먼트 속성 중 하나가 추가, 변경, 삭제 될 때 호출된다.
   * @param {String} - 속성명
   * @param {*} - 이전값
   * @param {*} - 신규값
   * @example -
   */
  attributeChangedCallback(attrName, oldVal, newVal) {}

  /**
   * @desc 엘리먼트가 새 문서로 이동 될 때 호출된다.
   * @param {Document} - 이전문서
   * @param {Document} - 대상문서
   * @example -
   */
  adoptedCallback(oldDoc, newDoc) {}
}

customElements.define('jj-data-expoler', JJDataExpoler);
